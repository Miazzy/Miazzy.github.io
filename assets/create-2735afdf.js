var I=(S,P,h)=>new Promise((f,k)=>{var L=t=>{try{w(h.next(t))}catch(U){k(U)}},D=t=>{try{w(h.throw(t))}catch(U){k(U)}},w=t=>t.done?f(t.value):Promise.resolve(t.value).then(L,D);w((h=h.apply(S,P)).next())});import{d as ya,aD as Ca,k as p,r as K,K as _a,o as Ia,al as y,Z as W,a9 as j,aa as l,$ as N,f as a,E as x,ad as q,u as m,ac as le,J as M,aG as Na,aH as ha}from"./vue-71d1abb3.js";import{au as wa,b as xa,av as T,ax as qa,a7 as ka,a5 as Da,_ as Ta}from"./index.js";import{e as Sa}from"./download-03e71dd5.js";import{U as Ua}from"./UploadBox-636ecf02.js";import{B as ne}from"./BasicTable-0434a334.js";import"./BasicForm.vue_vue_type_style_index_0_lang-1ba7be9e.js";import"./index-085d06c7.js";import{u as oe}from"./useTable-109483b3.js";import{a2 as _}from"./antd-15ac76ed.js";import{P as _e}from"./index-20519caf.js";import{_ as re}from"./DictSelectBox.vue_vue_type_script_setup_true_lang-e03e9fe8.js";import{S as H}from"./SearchBox-22bb02d6.js";import{D as se}from"./Dialog-0a006d82.js";import{C as Ea}from"./CommonTree-c4ed7838.js";import{a as Fa,b as Pa,c as Ra,f as Ma}from"./index-04498ccb.js";import{u as Oa,c as Va,g as Aa,d as Ka,e as Wa,a as ja,b as Ha,f as Ya,h as La,i as Ba,j as za}from"./index-131c61b3.js";import{a as $a,b as Ga}from"./index-5d738211.js";import{a as Y}from"./assign-37f1c13d.js";import"./useForm-dea3ed18.js";import"./uniqBy-92d3bc7f.js";import"./index-316f6ffb.js";import"./useWindowSizeFn-13b1b8a2.js";import"./index-f4fc48e6.js";import"./useTabs-2b062e85.js";import"./index-5d49b7a7.js";import"./OrganDialog-dd1023ce.js";import"./sortable.esm-4ae27e0b.js";import"./dict-c04c0dd8.js";import"./useContentViewHeight-7f845167.js";import"./index-3801a970.js";const Ja=S=>(Na("data-v-ed1d9b0a"),S=S(),ha(),S),Xa={class:"load"},Za={class:"process-box"},Qa={class:"header-box"},et=Ja(()=>N("div",{class:"header-left"},"物资",-1)),at={class:"header-right"},tt={class:"content"},lt={id:"equipment-tab-content",class:"tab-table-div tab-table-content"},Ie="/baseset/related-party/page",nt="/baseset/material/searchPage",Ne="/baseset/areaset/get-list",he="/baseset/related-party/get-related-party-list",ot=ya({name:"EquipmentCreate",__name:"create",setup(S){const{createConfirm:P,createMessage:h}=wa(),{t:f}=xa(),{query:k}=Ca(),L=p(!1),D=p(),w=p("1"),t=K({spinning:!1,processInstanceId:"",id:"",stationOrganId:"",stationOrganName:"",stationId:"",stationName:"",periodId:"",periodName:"",status:"",code:"",name:"",materialId:"",materialCode:"",materialName:"",materialWholeName:"",materialCategoryCode:"",modelCode:"",factoryId:"",factoryName:"",supplierId:"",supplierName:"",productionNumber:"",productionDate:"",usedDate:"",warrantyDate:"",areaId:"",areaName:"",subarrayId:"",subarrayName:"",qty:"",unitId:"",unitName:"",remark:"",deviceCode:""}),U=p([]),we=p({}),xe=n=>{ke(),O.value=!0},ie=K({}),ue=p({}),O=p(!1),qe=()=>{qa("/baseset/monitor/device","设备设置",{deviceEsn:t.deviceCode})};function ke(){return I(this,null,function*(){const n=yield $a();let e=n.filter(r=>{let d=n.filter(s=>r.id==s.parentId&&r.id!="");return d.length>0&&(r.children=d),r.parentId==""});U.value=e})}function De(n={}){we.value=n,ie.materialCategoryCode=n.code,oa()}const Te=[{title:"生产厂家",dataIndex:"name",width:80}],Se=[{title:"供应商",dataIndex:"name",width:80}],V=n=>{var e;(e=D==null?void 0:D.value)==null||e.validate(n)},i=K({id:"",equipmentId:"",code:"",name:"",materialId:"",materialCode:"",materialName:"",materialWholeName:"",subjectId:"",subjectName:"",useTo:"",qty:"",unitId:"",unitName:""}),E=p(!1),B=p("添加主要元器件"),de=p(),Ue=[{title:"物料编码",dataIndex:"code",width:80},{title:"大类",dataIndex:"categoryName1",width:80},{title:"中类",dataIndex:"categoryName2",width:80},{title:"小类",dataIndex:"categoryName3",width:80},{title:"物料名称",dataIndex:"name",width:80}],Ee=(n,e)=>{let r=e.record;i.materialCode=r.code,i.materialId=r.key,i.materialName=r.name,i.name=r.name,i.subjectId=r.materialCategoryId,i.subjectName=r.categoryName3||r.categoryName2||r.categoryName1,i.materialWholeName=Fe(r),i.unitId=r.unit,i.unitName=r.unit},Fe=n=>{let e="";return n.categoryName1&&(e+=n.categoryName1+"-",t.lastCategoryName=n.categoryName1),n.categoryName2&&(e+=n.categoryName2+"-",t.lastCategoryName=n.categoryName1),n.categoryName3&&(e+=n.categoryName3+"-",t.lastCategoryName=n.categoryName1),e+=n.name,e},Pe=()=>{if(!t.id){_.warning("请先保存。");return}B.value="添加主要元器件",E.value=!0,i.equipmentId=t.id},me=n=>{E.value=!1,i.id="",i.equipmentId="",i.code="",i.name="",i.materialId="",i.materialCode="",i.materialName="",i.materialWholeName="",i.subjectId="",i.subjectName="",i.useTo="",i.qty="",i.unitId="",i.unitName=""},Re=(n,e)=>{i.unitName=e.label},Me=n=>{de.value.validate().then(()=>I(this,null,function*(){const e=M(i);e.id?yield Oa(e):yield Va(e),z(),_.success("操作成功。"),E.value=!1,me()})).catch(e=>{console.log("error",e)})},Oe=()=>{if(!pe())return;const n=b.value[0];B.value="修改主要元器件",E.value=!0,Aa(n).then(e=>{Y(i,e)})},Ve=()=>{if(!pe())return;const n=b.value[0];P({title:f("common.message.confirmTitle"),iconType:"warning",content:f("common.message.delMessage"),onOk(){return I(this,null,function*(){yield Ka(n),z(),delete b.value[0],h.success(f("common.delSuccessText"))})}})};function Ae(){return I(this,null,function*(){P({title:f("common.exportTitle"),iconType:"warning",content:f("common.message.exportMessage"),onOk(){return I(this,null,function*(){yield Wa().then(e=>{Sa(e==null?void 0:e.data,"主要元器件.xls")}),h.success(f("common.exportSuccessText"))})}})})}const b=p([]);function Ke(n,e){e?b.value=[...b.value,n.id]:b.value=b.value.filter(r=>r!==n.id)}function We(n,e,r){const d=r.map(s=>s.id);n?b.value=[...b.value,...d]:b.value=b.value.filter(s=>!d.includes(s))}function pe(){return b.value.length==0||b.value.length>1||!b.value[0]?(_.warning("请选择一行数据"),!1):!0}const je=[{title:"物料编码",dataIndex:"materialCode",width:160},{title:"物料名称",dataIndex:"materialName",width:160},{title:"物料类别",dataIndex:"subjectName",width:160},{title:"用途",dataIndex:"useTo",width:160},{title:"数量",dataIndex:"qty",width:160},{title:"计量单位",dataIndex:"unitName",width:160}],[He,{reload:z,redoHeight:Ye}]=oe({api:Ba,target:"#equipment-tab-content",targetTabKey:"2",targetTabValue:w,columns:je,formConfig:{labelWidth:120},useSearchForm:!1,rowKey:"id",rowSelection:{type:"checkbox",selectedRowKeys:b,onSelect:Ke,onSelectAll:We},scroll:{y:300},maxHeight:300,beforeFetch(n){return n.equipmentId=t.id||"-1",n}}),ce=()=>{Ye(),Qe()};_a(()=>{ce()});const c=K({id:"",equipmentId:"",itemName:"",itemValue:"",status:"",sort:"",remark:""}),F=p(!1),$=p("添加技术参数"),fe=p(),Le=()=>{if(!t.id){_.warning("请先保存。");return}$.value="添加技术参数",F.value=!0,c.equipmentId=t.id},ve=n=>{F.value=!1,c.id="",c.equipmentId="",c.itemName="",c.itemValue="",c.status="",c.sort="",c.remark=""},Be=n=>{fe.value.validate().then(()=>{const e=M(c);e.id?ja(e):Ha(e),_.success("保存成功。"),F.value=!1,ve(),setTimeout(()=>{G()},1e3)}).catch(e=>{console.log("error",e)})},ze=()=>{if(!be())return;const n=g.value[0];$.value="修改技术参数",F.value=!0,Ya(n).then(e=>{Y(c,e)})},$e=()=>{if(!be())return;const n=g.value[0];P({title:f("common.message.confirmTitle"),iconType:"warning",content:f("common.message.delMessage"),onOk(){return I(this,null,function*(){yield La(n),G(),delete g.value[0],h.success(f("common.delSuccessText"))})}})},Ge=[{title:"技术参数",dataIndex:"itemName",width:160},{title:"参数值",dataIndex:"itemValue",width:160}],g=p([]);function Je(n,e){e?g.value=[...g.value,n.id]:g.value=g.value.filter(r=>r!==n.id)}function Xe(n,e,r){const d=r.map(s=>s.id);n?g.value=[...g.value,...d]:g.value=g.value.filter(s=>!d.includes(s))}function be(){return g.value.length==0||g.value.length>1||!g.value[0]?(_.warning("请选择一行数据"),!1):!0}const[Ze,{reload:G,redoHeight:Qe}]=oe({api:za,target:"#equipment-tab-content",targetTabKey:"1",targetTabValue:w,columns:Ge,formConfig:{labelWidth:120},useSearchForm:!1,rowKey:"id",rowSelection:{type:"checkbox",selectedRowKeys:g,onSelect:Je,onSelectAll:Xe},scroll:{y:300},maxHeight:300,beforeFetch(n){return n.equipmentId=t.id||"-1",n}}),ea=[{key:"code",title:"物料编码",dataIndex:"code",align:"center",width:120},{key:"fullName",title:"物料类别",dataIndex:"fullName",align:"center",width:150},{key:"name",title:"物料名称",dataIndex:"name",align:"center",width:200},{key:"unit",title:"计量单位",dataIndex:"unit",align:"center",width:80},{key:"warrantyMonth",title:"质保期(月)",dataIndex:"warrantyMonth",align:"center",width:80}],aa={baseColProps:{lg:6,md:8},labelWidth:90,schemas:[{label:"物料名称",field:"name",component:"Input"},{label:"物料编码",field:"code",component:"Input"}]},ta=(n,e)=>Da.get({url:n,params:e},{isOnlyResult:!0}),la=(n,e)=>{e?ue.value=n:ue.value={}},[na,{reload:oa,getSelectRows:ra}]=oe({api:Ga,rowKey:"id",columns:ea,useSearchForm:!0,formConfig:aa,bordered:!0,pagination:!0,maxHeight:480,scroll:{y:480},rowSelection:{type:"radio",onSelect:la},beforeFetch(n){return n.status=1,n}}),sa=p([]),ia=p([]),J=p([]),ua=n=>{const e=M(n.record);t.areaId=e.key,t.areaName=e.name,t.subarrayId=e.key,t.subarrayName=e.name},da=()=>{let n=ra();if(n.length==0)return _.warning("请选择物料。"),!1;O.value=!1;const e=n[0];t.materialId=e.id,t.materialCode=e.code,t.materialName=e.name,t.materialWholeName=e.fullName+"-"+e.name,t.materialCategoryCode=e.materialCategoryCode,t.unitId=e.unit,t.unitName=e.unitText,t.unitName="",t.modelCode="",t.factoryId="",t.factoryName="",t.supplierId="",t.supplierName="",t.productionNumber="",t.productionDate="",t.usedDate="",t.warrantyDate="",t.areaId="",t.areaName="",t.subarrayId="",t.subarrayName="",t.qty="",t.name="",ge()},ge=()=>{const n={status:1,partyTypeCodes:"supplier",materialCategoryIds:t.materialCategoryCode};A(he,n,sa),n.partyTypeCodes="manufacturer",A(he,n,ia)},A=(n,e,r)=>{ta(n,e).then(d=>{r.value.splice(0,r.value.length),d.forEach(u=>{r.value.push({id:u.id,code:u.code,name:u.name})});const s=r.value;r.value=[],setTimeout(()=>{r.value=s},100)})},ma=p([{title:"编码",dataIndex:"code",key:"code",fixed:"left",minWidth:50},{title:"公司名称",dataIndex:"name",key:"name",fixed:"left",minWidth:50}]),pa=(n,e)=>{t.unitName=e.label},ca=()=>{D.value.validate().then(()=>{const n=M(t);if(!ye(n.usedDate,n.productionDate)){_.warning("投运日期要超过出厂日期。");return}if(!ye(n.warrantyDate,n.usedDate)){_.warning("质保到期时间要超过投运日期。");return}fa()}).catch(n=>{console.log("onSubmit=》error",n)})},fa=()=>I(this,null,function*(){t.spinning=!0;try{const n=M(t);if(t.id)yield Ra(n);else{const e=yield Ma(n);t.id=e.result}_.success("保存成功。"),setTimeout(()=>{ka.getInstance().sendMsg("equipment-page",{})},1e3)}catch(n){console.log("error",n)}finally{t.spinning=!1}}),ye=(n,e)=>{let r=new Date(Date.parse(n)),d=new Date(Date.parse(e));return r>d},v=p(!1),X=p(!1);return Ia(()=>I(this,null,function*(){if(k.id)v.value=k.page_readonly,Pa(k.id).then(n=>{n.deviceCode&&(X.value="true"),Y(t,n),t.status=n.status+"",t.materialCategoryCode=n.materialCode,ge();const e={stationId:t.stationId,stationPeriodId:t.periodId};A(Ne,e,J),setTimeout(()=>{G(),z()},300)});else{t.status="1",Y(t,k);const n={stationId:t.stationId,stationPeriodId:t.periodId};A(Ne,n,J),Fa().then(e=>{t.code=e})}})),(n,e)=>{const r=y("a-button"),d=y("a-input"),s=y("a-form-item"),u=y("a-col"),va=y("a-input-search"),Z=y("a-date-picker"),Q=y("a-input-number"),ee=y("a-textarea"),C=y("a-row"),ae=y("a-card"),te=y("a-form"),Ce=y("a-tab-pane"),ba=y("a-tabs"),ga=y("a-spin");return W(),j(m(_e),{detail:!0,dense:"",contentFullHeight:"",fixedHeight:"",contentClass:"fix-detail-page",style:{position:"relative"}},{default:l(()=>[N("div",Xa,[a(ga,{spinning:t.spinning,tip:"Loading..."},{default:l(()=>[N("div",Za,[N("div",Qa,[et,N("div",at,[v.value?le("",!0):(W(),j(r,{key:0,type:"primary",onClick:ca,loading:L.value},{default:l(()=>[x(q(m(f)("common.saveText")),1)]),_:1},8,["loading"]))])]),N("div",tt,[a(te,{ref_key:"formRef",ref:D,model:t,labelAlign:"right",autocomplete:"off",scrollToFirstError:!0},{default:l(()=>[a(ae,{title:"基本信息",bordered:!1},{default:l(()=>[a(C,{gutter:32},{default:l(()=>[a(u,{span:12},{default:l(()=>[a(s,{name:"stationName",label:"电站名称",labelCol:{span:4}},{default:l(()=>[a(d,{disabled:"",value:t.stationName,"onUpdate:value":e[0]||(e[0]=o=>t.stationName=o)},null,8,["value"])]),_:1})]),_:1}),a(u,{span:12},{default:l(()=>[a(s,{name:"periodName",label:"期数",labelCol:{span:4}},{default:l(()=>[a(d,{disabled:"",value:t.periodName,"onUpdate:value":e[1]||(e[1]=o=>t.periodName=o)},null,8,["value"])]),_:1})]),_:1}),a(u,{span:12},{default:l(()=>[a(s,{name:"status",label:"设备状态",labelCol:{span:4}},{default:l(()=>[a(re,{type:"enable_or_disable",onChange:e[2]||(e[2]=o=>"()=> formState.status = value"),value:t.status,"onUpdate:value":e[3]||(e[3]=o=>t.status=o),style:{width:"100%"},disabled:""},null,8,["value"])]),_:1})]),_:1}),a(u,{span:12},{default:l(()=>[a(s,{name:"code",label:"设备编码",labelCol:{span:4}},{default:l(()=>[a(d,{value:t.code,"onUpdate:value":e[4]||(e[4]=o=>t.code=o),disabled:""},null,8,["value"])]),_:1})]),_:1}),a(u,{span:12},{default:l(()=>[a(s,{name:"materialName",label:"物料名称",labelCol:{span:4},rules:[{required:!0,message:"请选择物料"}]},{default:l(()=>[a(va,{readOnly:"",value:t.materialName,"onUpdate:value":e[5]||(e[5]=o=>t.materialName=o),placeholder:"请选择物料","enter-button":"",disabled:X.value,onSearch:xe},null,8,["value","disabled"])]),_:1})]),_:1}),a(u,{span:12},{default:l(()=>[a(s,{name:"materialWholeName",label:"物料全称",labelCol:{span:4}},{default:l(()=>[a(d,{value:t.materialWholeName,"onUpdate:value":e[6]||(e[6]=o=>t.materialWholeName=o),disabled:""},null,8,["value"])]),_:1})]),_:1}),a(u,{span:12},{default:l(()=>[a(s,{name:"materialCode",label:"物料编码",labelCol:{span:4}},{default:l(()=>[a(d,{value:t.materialCode,"onUpdate:value":e[7]||(e[7]=o=>t.materialCode=o),disabled:""},null,8,["value"])]),_:1})]),_:1}),a(u,{span:12},{default:l(()=>[a(s,{name:"modelCode",label:"型号",labelCol:{span:4},rules:[{required:!0,message:"请输入型号"}]},{default:l(()=>[a(d,{value:t.modelCode,"onUpdate:value":e[8]||(e[8]=o=>t.modelCode=o),placeholder:"请输入型号",disabled:v.value},null,8,["value","disabled"])]),_:1})]),_:1}),a(u,{span:12},{default:l(()=>[a(s,{label:"生产厂家",name:"factoryName",labelCol:{span:4},rules:[{required:!0,message:"请选择生产厂家"}]},{default:l(()=>[a(H,{value:t.factoryName,"onUpdate:value":e[9]||(e[9]=o=>t.factoryName=o),columns:Te,api:Ie,apiParamFunc:()=>({status:1,partyTypeCodes:"manufacturer",materialCategoryIds:t.materialCategoryCode}),vfield:"name",pagination:!0,style:{width:"100%"},validateFunc:()=>{V("factoryName")},disabled:v.value,onChange:e[10]||(e[10]=(o,R)=>{t.factoryId=R.record.key,t.factoryName=R.record.name})},null,8,["value","apiParamFunc","validateFunc","disabled"])]),_:1})]),_:1}),a(u,{span:12},{default:l(()=>[a(s,{label:"供应商",name:"supplierName",labelCol:{span:4},wrapperCol:7,rules:[{required:!0,message:"请选择供应商"}]},{default:l(()=>[a(H,{value:t.supplierName,"onUpdate:value":e[11]||(e[11]=o=>t.supplierName=o),columns:Se,api:Ie,apiParamFunc:()=>({status:1,partyTypeCodes:"supplier",materialCategoryIds:t.materialCategoryCode}),disabled:v.value,vfield:"name",pagination:!0,style:{width:"100%"},validateFunc:()=>{V("supplierName")},onChange:e[12]||(e[12]=(o,R)=>{t.supplierId=R.record.key,t.supplierName=R.record.name})},null,8,["value","apiParamFunc","disabled","validateFunc"])]),_:1})]),_:1}),a(u,{span:12},{default:l(()=>[a(s,{name:"productionNumber",label:"出厂编号",labelCol:{span:4}},{default:l(()=>[a(d,{value:t.productionNumber,"onUpdate:value":e[13]||(e[13]=o=>t.productionNumber=o),maxlength:"64",disabled:v.value,placeholder:"请输入出厂编号"},null,8,["value","disabled"])]),_:1})]),_:1}),a(u,{span:12},{default:l(()=>[a(s,{label:"出厂日期",name:"productionDate",labelAlign:"right",labelCol:{span:4},rules:[{required:!0,message:"请选择出厂日期"}]},{default:l(()=>[a(Z,{value:t.productionDate,"onUpdate:value":e[14]||(e[14]=o=>t.productionDate=o),style:{"min-width":"100%"},disabled:v.value,"value-format":"YYYY-MM-DD"},null,8,["value","disabled"])]),_:1})]),_:1}),a(u,{span:12},{default:l(()=>[a(s,{label:"投运日期",name:"usedDate",labelAlign:"right",labelCol:{span:4},rules:[{required:!0,message:"请选择投运日期"}]},{default:l(()=>[a(Z,{value:t.usedDate,"onUpdate:value":e[15]||(e[15]=o=>t.usedDate=o),style:{"min-width":"100%"},disabled:v.value,"value-format":"YYYY-MM-DD"},null,8,["value","disabled"])]),_:1})]),_:1}),a(u,{span:12},{default:l(()=>[a(s,{label:"质保截止日期",name:"warrantyDate",labelAlign:"right",labelCol:{span:4},rules:[{required:!0,message:"请选择质保截止日期"}]},{default:l(()=>[a(Z,{value:t.warrantyDate,"onUpdate:value":e[16]||(e[16]=o=>t.warrantyDate=o),style:{"min-width":"100%"},disabled:v.value,"value-format":"YYYY-MM-DD"},null,8,["value","disabled"])]),_:1})]),_:1}),a(u,{span:12},{default:l(()=>[a(s,{name:"subarrayName",label:"区域子阵",labelCol:{span:4},rules:[{required:!0,message:"请输入区域子阵"}]},{default:l(()=>[a(H,{value:t.subarrayName,"onUpdate:value":e[17]||(e[17]=o=>t.subarrayName=o),columns:ma.value,data:J.value,vfield:"name",pagination:!0,twidth:"100%",validateFunc:()=>{V("subarrayName")},disabled:v.value,onSelect:ua},null,8,["value","columns","data","validateFunc","disabled"])]),_:1})]),_:1}),a(u,{span:12},{default:l(()=>[a(s,{name:"name",label:"设备名称",labelCol:{span:4},rules:[{required:!0,message:"请输入设备名称"}]},{default:l(()=>[a(d,{value:t.name,"onUpdate:value":e[18]||(e[18]=o=>t.name=o),placeholder:"请输入设备名称",maxlength:"50",disabled:v.value},null,8,["value","disabled"])]),_:1})]),_:1}),a(u,{span:12},{default:l(()=>[a(s,{name:"qty",label:"数量",labelCol:{span:4},rules:[{required:!0,message:"请输入数量"}]},{default:l(()=>[a(Q,{value:t.qty,"onUpdate:value":e[19]||(e[19]=o=>t.qty=o),min:0,placeholder:"请输入数量",max:1e9,step:.01,disabled:X.value,parser:o=>o.match(/^[0-9]*\.([0-9]{0,2})|^[0-9]*/)[0]},null,8,["value","disabled","parser"])]),_:1})]),_:1}),a(u,{span:12},{default:l(()=>[a(s,{label:"计量单位",name:"unitId",labelCol:{span:4},wrapperCol:15,rules:[{required:!0,message:"请选择计量单位"}]},{default:l(()=>[a(re,{type:"safety_tpl_unit",value:t.unitId,"onUpdate:value":e[20]||(e[20]=o=>t.unitId=o),style:{width:"100%"},onChange:pa,disabled:v.value},null,8,["value","disabled"])]),_:1})]),_:1}),a(u,{span:12},{default:l(()=>[a(s,{name:"deviceCode",label:"关联设备",labelCol:{span:4}},{default:l(()=>[N("a",{onClick:qe},q(t.deviceCode),1)]),_:1})]),_:1}),a(u,{span:24,class:"textarea-item"},{default:l(()=>[a(s,{label:"备注",name:"remark",labelAlign:"right",labelCol:{span:2}},{default:l(()=>[a(ee,{rows:5,value:t.remark,"onUpdate:value":e[21]||(e[21]=o=>t.remark=o),placeholder:"512字以内",maxlength:512,disabled:v.value},null,8,["value","disabled"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model"]),a(ae,{title:"附件信息",bordered:!1},{default:l(()=>[a(Ua,{width:800,height:550,maxCount:20,maxSize:100*1024*1024,application:"po",module:"equipment",vmode:"box",bizId:t.id,disabled:v.value},null,8,["bizId","disabled"])]),_:1}),a(ae,{title:"",bordered:!1},{default:l(()=>[N("div",lt,[a(ba,{activeKey:w.value,"onUpdate:activeKey":e[22]||(e[22]=o=>w.value=o),onChange:ce},{default:l(()=>[a(Ce,{key:"1",tab:"技术参数"},{default:l(()=>[a(m(ne),{onRegister:m(Ze)},{toolbar:l(()=>[v.value?le("",!0):(W(),j(r,{key:0,type:"primary",preIcon:m(T).ADD,onClick:Le},{default:l(()=>[x(q(m(f)("common.action.create")),1)]),_:1},8,["preIcon"])),a(r,{type:"primary",preIcon:m(T).EDIT,onClick:ze},{default:l(()=>[x(q(m(f)("common.action.edit")),1)]),_:1},8,["preIcon"]),a(r,{class:"red-btn",preIcon:m(T).DELETE,onClick:$e},{default:l(()=>[x(q(m(f)("common.delText")),1)]),_:1},8,["preIcon"])]),_:1},8,["onRegister"])]),_:1}),a(Ce,{key:"2",tab:"主要元器件"},{default:l(()=>[a(m(ne),{onRegister:m(He)},{toolbar:l(()=>[v.value?le("",!0):(W(),j(r,{key:0,type:"primary",preIcon:m(T).ADD,onClick:Pe},{default:l(()=>[x(q(m(f)("common.action.create")),1)]),_:1},8,["preIcon"])),a(r,{type:"primary",preIcon:m(T).EDIT,onClick:Oe},{default:l(()=>[x(q(m(f)("common.action.edit")),1)]),_:1},8,["preIcon"]),a(r,{class:"red-btn",preIcon:m(T).DELETE,onClick:Ve},{default:l(()=>[x(q(m(f)("common.delText")),1)]),_:1},8,["preIcon"]),a(r,{class:"yellow-btn",preIcon:m(T).EXPORT,onClick:Ae},{default:l(()=>[x(" 导出 ")]),_:1},8,["preIcon"])]),_:1},8,["onRegister"])]),_:1})]),_:1},8,["activeKey"])])]),_:1}),N("div",null,[a(se,{visible:O.value,"onUpdate:visible":e[23]||(e[23]=o=>O.value=o),title:"选择物料",onOk:da,width:1200,maskClosable:!1},{default:l(()=>[a(m(_e),{dense:"",contentFullHeight:"",fixedHeight:"",contentClass:"flex",style:{position:"relative"}},{default:l(()=>[a(Ea,{title:"物料分类",onSelect:De,value:U.value,class:"w-1/6",toolbar:!1,isShowOperationBtns:!1,style:{height:"480px"},fieldNames:{key:"id",title:"name"}},null,8,["value"]),a(m(ne),{onRegister:m(na),class:"w-5/6 xl:w-10/12 table-in-dialog",searchInfo:ie},null,8,["onRegister","searchInfo"])]),_:1})]),_:1},8,["visible"]),a(se,{visible:F.value,"onUpdate:visible":e[28]||(e[28]=o=>F.value=o),title:$.value,onOk:Be,onCancel:ve},{default:l(()=>[a(te,{ref_key:"parameterFormRef",ref:fe,model:c},{default:l(()=>[a(C,{gutter:24},{default:l(()=>[a(u,{span:20},{default:l(()=>[a(s,{label:"技术参数",name:"itemName",labelCol:{span:5},rules:[{required:!0,max:128}]},{default:l(()=>[a(d,{value:c.itemName,"onUpdate:value":e[24]||(e[24]=o=>c.itemName=o),maxlength:"128"},null,8,["value"])]),_:1})]),_:1})]),_:1}),a(C,{gutter:24},{default:l(()=>[a(u,{span:20},{default:l(()=>[a(s,{label:"参数值",name:"itemValue",labelCol:{span:5},rules:[{required:!0,max:128}]},{default:l(()=>[a(d,{value:c.itemValue,"onUpdate:value":e[25]||(e[25]=o=>c.itemValue=o),maxlength:"128"},null,8,["value"])]),_:1})]),_:1})]),_:1}),a(C,{gutter:24},{default:l(()=>[a(u,{span:20},{default:l(()=>[a(s,{label:"排序号",name:"sort",labelCol:{span:5}},{default:l(()=>[a(Q,{min:1,max:1e5,value:c.sort,"onUpdate:value":e[26]||(e[26]=o=>c.sort=o)},null,8,["value"])]),_:1})]),_:1})]),_:1}),a(C,{gutter:24},{default:l(()=>[a(u,{span:20},{default:l(()=>[a(s,{label:"备注",name:"remark",labelCol:{span:5},rules:[{required:!1,max:100}]},{default:l(()=>[a(ee,{value:c.remark,"onUpdate:value":e[27]||(e[27]=o=>c.remark=o),maxlength:128,"auto-size":{minRows:2,maxRows:5}},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["visible","title"]),a(se,{visible:E.value,"onUpdate:visible":e[35]||(e[35]=o=>E.value=o),title:B.value,onOk:Me,onCancel:me},{default:l(()=>[a(te,{ref_key:"componentFormRef",ref:de,model:i},{default:l(()=>[a(C,{gutter:24},{default:l(()=>[a(u,{span:20},{default:l(()=>[a(s,{label:"物料编码",name:"materialCode",labelCol:{span:5},rules:[{required:!0,max:128}]},{default:l(()=>[a(d,{disabled:"",value:i.materialCode,"onUpdate:value":e[29]||(e[29]=o=>i.materialCode=o),maxlength:"32"},null,8,["value"])]),_:1})]),_:1})]),_:1}),a(C,{gutter:24},{default:l(()=>[a(u,{span:20},{default:l(()=>[a(s,{label:"物料名称",name:"materialName",labelCol:{span:5},wrapperCol:7,rules:[{required:!0,message:"请选择物料名称"}]},{default:l(()=>[a(H,{value:i.materialName,"onUpdate:value":e[30]||(e[30]=o=>i.materialName=o),columns:Ue,api:nt,vfield:"name",pagination:!0,validateFunc:()=>{V("materialName")},style:{width:"100%"},onChange:Ee},null,8,["value","validateFunc"])]),_:1})]),_:1})]),_:1}),a(C,{gutter:24},{default:l(()=>[a(u,{span:20},{default:l(()=>[a(s,{label:"物料类别",name:"subjectName",labelCol:{span:5},rules:[{required:!0,max:128}]},{default:l(()=>[a(d,{disabled:"",value:i.subjectName,"onUpdate:value":e[31]||(e[31]=o=>i.subjectName=o)},null,8,["value"])]),_:1})]),_:1})]),_:1}),a(C,{gutter:24},{default:l(()=>[a(u,{span:20},{default:l(()=>[a(s,{label:"用途",name:"useTo",labelCol:{span:5},rules:[{required:!1,max:100}]},{default:l(()=>[a(ee,{value:i.useTo,"onUpdate:value":e[32]||(e[32]=o=>i.useTo=o),maxlength:128,"auto-size":{minRows:2,maxRows:5}},null,8,["value"])]),_:1})]),_:1})]),_:1}),a(C,{gutter:24},{default:l(()=>[a(u,{span:20},{default:l(()=>[a(s,{name:"qty",label:"数量",labelCol:{span:5},rules:[{required:!0,message:"请输入数量"}]},{default:l(()=>[a(Q,{value:i.qty,"onUpdate:value":e[33]||(e[33]=o=>i.qty=o),min:0,placeholder:"请输入数量",max:1e4,step:.1,parser:o=>o.match(/^[0-9]*\.([0-9]{0,2})|^[0-9]*/)[0]},null,8,["value","parser"])]),_:1})]),_:1})]),_:1}),a(C,{gutter:24},{default:l(()=>[a(u,{span:20},{default:l(()=>[a(s,{label:"计量单位",name:"unitId",labelCol:{span:5},rules:[{required:!0,message:"请选择计量单位"}]},{default:l(()=>[a(re,{type:"safety_tpl_unit",value:i.unitId,"onUpdate:value":e[34]||(e[34]=o=>i.unitId=o),style:{width:"100%"},onChange:Re},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["visible","title"])])])])]),_:1},8,["spinning"])])]),_:1})}}});const Ot=Ta(ot,[["__scopeId","data-v-ed1d9b0a"]]);export{Ot as default};
//# sourceMappingURL=create-2735afdf.js.map
