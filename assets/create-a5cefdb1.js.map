{"version":3,"file":"create-a5cefdb1.js","sources":["../../src/views/po/integrated/vehicle/create.vue"],"sourcesContent":["<template>\n  <PageWrapper\n    :detail=\"true\"\n    dense\n    contentFullHeight\n    fixedHeight\n    contentClass=\"fix-detail-page\"\n    style=\"position: relative\"\n  >\n    <div class=\"load\">\n      <a-spin :spinning=\"formState.spinning\" tip=\"Loading...\">\n        <div class=\"process-box\">\n          <!-- 操作按钮-->\n          <div class=\"header-box\">\n            <div class=\"header-left\">车辆信息</div>\n            <div class=\"header-right\">\n              <a-button v-if=\"!disabledInput\" @click=\"handleCancel\">{{\n                t('common.cancelText')\n              }}</a-button>\n              <a-button\n                v-if=\"!disabledInput\"\n                class=\"!ml-4\"\n                type=\"primary\"\n                @click=\"handleSave\"\n                :loading=\"isLoading\"\n              >\n                {{ t('common.saveText') }}</a-button\n              >\n              <!-- <PrintButton class=\"!ml-4\" /> -->\n            </div>\n          </div>\n          <!-- 表单内容 -->\n          <div class=\"content\">\n            <a-form ref=\"formRef\" :model=\"formState\" labelAlign=\"right\" autocomplete=\"off\">\n              <a-card title=\"基本信息\" :bordered=\"false\">\n                <a-row :gutter=\"32\">\n                  <a-col v-show=\"true\" :span=\"12\">\n                    <a-form-item\n                      name=\"stationName\"\n                      label=\"归属电站\"\n                      :labelCol=\"{ class: 'detail-label' }\"\n                    >\n                      <a-input disabled v-model:value=\"formState.stationName\" />\n                    </a-form-item>\n                  </a-col>\n                  <a-col v-show=\"true\" :span=\"12\">\n                    <a-form-item\n                      name=\"vehicleNo\"\n                      label=\"车辆编号\"\n                      :labelCol=\"{ class: 'detail-label' }\"\n                    >\n                      <a-input disabled v-model:value=\"formState.vehicleNo\" />\n                    </a-form-item>\n                  </a-col>\n                </a-row>\n\n                <a-row :gutter=\"32\">\n                  <a-col v-show=\"true\" :span=\"12\">\n                    <a-form-item\n                      name=\"plateNumber\"\n                      label=\"车牌号\"\n                      :labelCol=\"{ class: 'detail-label' }\"\n                      :rules=\"[{ required: true, message: '请输入车牌号' }]\"\n                    >\n                      <a-input\n                        :disabled=\"disabledInput\"\n                        v-model:value=\"formState.plateNumber\"\n                        :maxlength=\"30\"\n                        @blur=\"blurPlateNumber\"\n                      />\n                    </a-form-item>\n                  </a-col>\n                  <a-col v-show=\"true\" :span=\"12\">\n                    <a-form-item\n                      name=\"vehicleType\"\n                      label=\"车辆类型\"\n                      :labelCol=\"{ class: 'detail-label' }\"\n                      :rules=\"[{ required: true, message: '请选择车辆类型' }]\"\n                    >\n                      <DictSelectBox\n                        :disabled=\"disabledInput\"\n                        :type=\"`vehicle_type`\"\n                        v-model:value=\"formState.vehicleType\"\n                      />\n                    </a-form-item>\n                  </a-col>\n                </a-row>\n\n                <a-row :gutter=\"32\">\n                  <a-col v-show=\"true\" :span=\"12\">\n                    <a-form-item\n                      name=\"identificationCode\"\n                      label=\"识别代码\"\n                      :labelCol=\"{ class: 'detail-label' }\"\n                      :rules=\"[{ required: true, message: '请输入识别代码' }]\"\n                    >\n                      <a-input\n                        :disabled=\"disabledInput\"\n                        v-model:value=\"formState.identificationCode\"\n                        :maxlength=\"30\"\n                      />\n                    </a-form-item>\n                  </a-col>\n                  <a-col v-show=\"true\" :span=\"12\">\n                    <a-form-item\n                      name=\"engineCode\"\n                      label=\"发动机号\"\n                      :labelCol=\"{ class: 'detail-label' }\"\n                      :rules=\"[{ required: true, message: '请输入发动机号' }]\"\n                    >\n                      <a-input\n                        :disabled=\"disabledInput\"\n                        v-model:value=\"formState.engineCode\"\n                        :maxlength=\"30\"\n                      />\n                    </a-form-item>\n                  </a-col>\n                </a-row>\n\n                <a-row :gutter=\"32\">\n                  <a-col v-show=\"true\" :span=\"12\">\n                    <a-form-item\n                      name=\"brand\"\n                      label=\"品牌\"\n                      :labelCol=\"{ class: 'detail-label' }\"\n                      :rules=\"[{ required: true, message: '请输入品牌' }]\"\n                    >\n                      <a-input\n                        :disabled=\"disabledInput\"\n                        v-model:value=\"formState.brand\"\n                        :maxlength=\"30\"\n                      />\n                    </a-form-item>\n                  </a-col>\n                  <a-col v-show=\"true\" :span=\"12\">\n                    <a-form-item\n                      name=\"model\"\n                      label=\"型号\"\n                      :labelCol=\"{ class: 'detail-label' }\"\n                      :rules=\"[{ required: true, message: '请输入型号' }]\"\n                    >\n                      <a-input\n                        :disabled=\"disabledInput\"\n                        v-model:value=\"formState.model\"\n                        :maxlength=\"30\"\n                      />\n                    </a-form-item>\n                  </a-col>\n                </a-row>\n\n                <a-row :gutter=\"32\">\n                  <a-col v-show=\"true\" :span=\"12\">\n                    <a-form-item\n                      name=\"factory\"\n                      label=\"生产厂家\"\n                      :labelCol=\"{ class: 'detail-label' }\"\n                      :rules=\"[{ required: true, message: '请输入生产厂家' }]\"\n                    >\n                      <a-input\n                        :disabled=\"disabledInput\"\n                        v-model:value=\"formState.factory\"\n                        :maxlength=\"100\"\n                      />\n                    </a-form-item>\n                  </a-col>\n                  <a-col v-show=\"true\" :span=\"12\">\n                    <a-form-item\n                      name=\"colour\"\n                      label=\"车身颜色\"\n                      :labelCol=\"{ class: 'detail-label' }\"\n                      :rules=\"[{ required: true, message: '请输入车身颜色' }]\"\n                    >\n                      <a-input\n                        :disabled=\"disabledInput\"\n                        v-model:value=\"formState.colour\"\n                        :maxlength=\"30\"\n                      />\n                    </a-form-item>\n                  </a-col>\n                </a-row>\n\n                <a-row :gutter=\"32\">\n                  <a-col v-show=\"true\" :span=\"12\">\n                    <a-form-item\n                      name=\"size\"\n                      label=\"外形尺寸\"\n                      :labelCol=\"{ class: 'detail-label' }\"\n                      :rules=\"[{ required: true, message: '请输入外形尺寸' }]\"\n                    >\n                      <a-input\n                        :disabled=\"disabledInput\"\n                        v-model:value=\"formState.size\"\n                        :maxlength=\"20\"\n                      />\n                    </a-form-item>\n                  </a-col>\n                  <a-col v-show=\"true\" :span=\"12\">\n                    <a-form-item\n                      name=\"structureFeature\"\n                      label=\"结构特点\"\n                      :labelCol=\"{ class: 'detail-label' }\"\n                      :rules=\"[{ required: true, message: '请选择结构特点' }]\"\n                    >\n                      <DictSelectBox\n                        :disabled=\"disabledInput\"\n                        :type=\"`structural_feature`\"\n                        v-model:value=\"formState.structureFeature\"\n                      />\n                    </a-form-item>\n                  </a-col>\n                </a-row>\n\n                <a-row :gutter=\"32\">\n                  <a-col v-show=\"true\" :span=\"12\">\n                    <a-form-item\n                      name=\"fuelType\"\n                      label=\"燃油类型\"\n                      :labelCol=\"{ class: 'detail-label' }\"\n                      :rules=\"[{ required: true, message: '请选择燃油类型' }]\"\n                    >\n                      <DictSelectBox\n                        :disabled=\"disabledInput\"\n                        :type=\"`fuel_type`\"\n                        v-model:value=\"formState.fuelType\"\n                      />\n                    </a-form-item>\n                  </a-col>\n                  <a-col v-show=\"true\" :span=\"12\">\n                    <a-form-item\n                      name=\"displacement\"\n                      label=\"排量(L)\"\n                      :labelCol=\"{ class: 'detail-label' }\"\n                      :rules=\"[{ required: true, message: '请输入排量(L)' }]\"\n                    >\n                      <a-input-number\n                        :disabled=\"disabledInput\"\n                        v-model:value=\"formState.displacement\"\n                        :min=\"0.1\"\n                        :max=\"99.9\"\n                        :precision=\"1\"\n                      />\n                    </a-form-item>\n                  </a-col>\n                </a-row>\n\n                <a-row :gutter=\"32\">\n                  <a-col v-show=\"true\" :span=\"12\">\n                    <a-form-item\n                      name=\"approvedLoadCount\"\n                      label=\"核定载人数(人)\"\n                      :labelCol=\"{ class: 'detail-label' }\"\n                      :rules=\"[{ required: true, message: '请输入核定载人数(人)' }]\"\n                    >\n                      <a-input-number\n                        :disabled=\"disabledInput\"\n                        v-model:value=\"formState.approvedLoadCount\"\n                        :min=\"1\"\n                        :max=\"100\"\n                      />\n                    </a-form-item>\n                  </a-col>\n                  <a-col v-show=\"true\" :span=\"12\">\n                    <a-form-item\n                      name=\"isBimotored\"\n                      label=\"是否双发动机\"\n                      :labelCol=\"{ class: 'detail-label' }\"\n                      :rules=\"[{ required: true, message: '请选择是否双发动机' }]\"\n                    >\n                      <DictSelectBox\n                        :disabled=\"disabledInput\"\n                        :type=\"`yes_or_no`\"\n                        v-model:value=\"formState.isBimotored\"\n                      />\n                    </a-form-item>\n                  </a-col>\n                </a-row>\n\n                <a-row :gutter=\"32\">\n                  <a-col v-show=\"true\" :span=\"12\">\n                    <a-form-item\n                      name=\"weight\"\n                      label=\"总重量(kg)\"\n                      :labelCol=\"{ class: 'detail-label' }\"\n                      :rules=\"[{ required: true, message: '请输入总重量(kg)' }]\"\n                    >\n                      <a-input-number\n                        :disabled=\"disabledInput\"\n                        v-model:value=\"formState.weight\"\n                        :min=\"1\"\n                        :max=\"9999\"\n                        :precision=\"0\"\n                      />\n                    </a-form-item>\n                  </a-col>\n                  <a-col v-show=\"true\" :span=\"12\">\n                    <a-form-item\n                      label=\"购买日期\"\n                      name=\"purchaseDate\"\n                      :labelCol=\"{ class: 'detail-label' }\"\n                      :rules=\"[{ required: true, message: '请选择购买日期' }]\"\n                    >\n                      <a-date-picker\n                        :disabled=\"disabledInput\"\n                        v-model:value=\"formState.purchaseDate\"\n                        style=\"width: 100%\"\n                        value-format=\"YYYY-MM-DD\"\n                      />\n                    </a-form-item>\n                  </a-col>\n                </a-row>\n\n                <a-row :gutter=\"32\">\n                  <a-col v-show=\"true\" :span=\"12\">\n                    <a-form-item\n                      label=\"发证日期\"\n                      name=\"registerDate\"\n                      :labelCol=\"{ class: 'detail-label' }\"\n                      :rules=\"[{ required: true, message: '请选择发证日期' }]\"\n                    >\n                      <a-date-picker\n                        :disabled=\"disabledInput\"\n                        v-model:value=\"formState.registerDate\"\n                        style=\"width: 100%\"\n                        value-format=\"YYYY-MM-DD\"\n                      />\n                    </a-form-item>\n                  </a-col>\n                  <a-col v-show=\"true\" :span=\"12\">\n                    <a-form-item\n                      name=\"emissionLevel\"\n                      label=\"排放标准\"\n                      :labelCol=\"{ class: 'detail-label' }\"\n                      :rules=\"[{ required: true, message: '请选择排放标准' }]\"\n                    >\n                      <DictSelectBox\n                        :disabled=\"disabledInput\"\n                        :type=\"`emission_standard`\"\n                        v-model:value=\"formState.emissionLevel\"\n                      />\n                    </a-form-item>\n                  </a-col>\n                </a-row>\n\n                <a-row :gutter=\"32\">\n                  <a-col v-show=\"true\" :span=\"12\">\n                    <a-form-item\n                      name=\"headerId\"\n                      label=\"车辆负责人\"\n                      :labelCol=\"{ class: 'detail-label' }\"\n                      :rules=\"[{ required: true, message: '请选择车辆负责人' }]\"\n                    >\n                      <a-select\n                        :disabled=\"disabledInput\"\n                        v-model:value=\"formState.headerId\"\n                        show-search\n                        allow-clear\n                        style=\"width: 100%\"\n                        :options=\"stationPersonOptions\"\n                        @change=\"(value: string, option) => (formState.header = option.label)\"\n                      />\n                    </a-form-item>\n                  </a-col>\n                  <a-col v-show=\"true\" :span=\"12\">\n                    <a-form-item\n                      name=\"price\"\n                      label=\"车价(元)\"\n                      :labelCol=\"{ class: 'detail-label' }\"\n                      :rules=\"[{ required: true, message: '请输入车价(元)' }]\"\n                    >\n                      <a-input-number\n                        :disabled=\"disabledInput\"\n                        v-model:value=\"formState.price\"\n                        :min=\"1\"\n                        :max=\"999999999.99\"\n                        :precision=\"2\"\n                      />\n                    </a-form-item>\n                  </a-col>\n                </a-row>\n\n                <a-row :gutter=\"32\">\n                  <a-col v-show=\"true\" :span=\"12\">\n                    <a-form-item\n                      name=\"responsiblePersonIds\"\n                      label=\"指定驾驶员\"\n                      :labelCol=\"{ class: 'detail-label' }\"\n                      :rules=\"[{ required: true, message: '请选择指定驾驶员' }]\"\n                    >\n                      <a-select\n                        :disabled=\"disabledInput\"\n                        v-model:value=\"formState.responsiblePersonIds\"\n                        show-search\n                        allow-clear\n                        mode=\"multiple\"\n                        style=\"width: 100%\"\n                        :options=\"stationPersonOptions\"\n                        @change=\"\n                          (value: string, option) =>\n                            (formState.responsiblePersonNames = option.map((item) => item.label))\n                        \"\n                      />\n                    </a-form-item>\n                  </a-col>\n                </a-row>\n\n                <a-row :gutter=\"32\">\n                  <a-col v-show=\"true\" :span=\"24\">\n                    <a-form-item name=\"remark\" label=\"备注\" :labelCol=\"{ class: 'detail-label' }\">\n                      <a-textarea\n                        :disabled=\"disabledInput\"\n                        v-model:value=\"formState.remark\"\n                        row=\"4\"\n                        :maxlength=\"256\"\n                      />\n                    </a-form-item>\n                  </a-col>\n                </a-row>\n              </a-card>\n            </a-form>\n\n            <a-card title=\"\" :bordered=\"false\">\n              <div id=\"more-tab-content\" class=\"tab-table-div\">\n                <a-tabs v-model:activeKey=\"activeKey\" @change=\"handleDetailChange\">\n                  <a-tab-pane class=\"tab-pane-table\" key=\"1\" tab=\"保险记录\">\n                    <BasicTable @register=\"registerInsuranceTable\">\n                      <template #toolbar>\n                        <a-button\n                          v-if=\"!disabledInput && activeKey === '1'\"\n                          type=\"primary\"\n                          :preIcon=\"IconEnum.ADD\"\n                          @click=\"handleDetailAdd(VehicleApi.RecordType.INSURANCE)\"\n                        >\n                          {{ t('common.action.create') }}\n                        </a-button>\n                      </template>\n                      <template v-if=\"!disabledInput\" #bodyCell=\"{ column, record }\">\n                        <template v-if=\"column.key === 'action'\">\n                          <TableAction\n                            :actions=\"createActions(record, VehicleApi.RecordType.INSURANCE)\"\n                          />\n                        </template>\n                      </template>\n                    </BasicTable>\n                  </a-tab-pane>\n                  <a-tab-pane class=\"tab-pane-table\" key=\"2\" tab=\"年检记录\" force-render>\n                    <BasicTable @register=\"registerAnnualReviewTable\">\n                      <template #toolbar>\n                        <a-button\n                          v-if=\"!disabledInput && activeKey === '2'\"\n                          type=\"primary\"\n                          :preIcon=\"IconEnum.ADD\"\n                          @click=\"handleDetailAdd(VehicleApi.RecordType.ANNUAL_REVIEW)\"\n                        >\n                          {{ t('common.action.create') }}\n                        </a-button>\n                      </template>\n                      <template v-if=\"!disabledInput\" #bodyCell=\"{ column, record }\">\n                        <template v-if=\"column.key === 'action'\">\n                          <TableAction\n                            :actions=\"createActions(record, VehicleApi.RecordType.ANNUAL_REVIEW)\"\n                          />\n                        </template>\n                      </template>\n                    </BasicTable>\n                  </a-tab-pane>\n                  <a-tab-pane class=\"tab-pane-table\" key=\"3\" tab=\"保养记录\" force-render>\n                    <BasicTable @register=\"registerMaintenanceTable\">\n                      <template #toolbar>\n                        <a-button\n                          v-if=\"!disabledInput && activeKey === '3'\"\n                          type=\"primary\"\n                          :preIcon=\"IconEnum.ADD\"\n                          @click=\"handleDetailAdd(VehicleApi.RecordType.MAINTENANCE)\"\n                        >\n                          {{ t('common.action.create') }}\n                        </a-button>\n                      </template>\n                      <template v-if=\"!disabledInput\" #bodyCell=\"{ column, record }\">\n                        <template v-if=\"column.key === 'action'\">\n                          <TableAction\n                            :actions=\"createActions(record, VehicleApi.RecordType.MAINTENANCE)\"\n                          />\n                        </template>\n                      </template>\n                    </BasicTable>\n                  </a-tab-pane>\n                  <a-tab-pane class=\"tab-pane-table\" key=\"4\" tab=\"维修记录\" force-render>\n                    <BasicTable @register=\"registerRepairTable\">\n                      <template #toolbar>\n                        <a-button\n                          v-if=\"!disabledInput && activeKey === '4'\"\n                          type=\"primary\"\n                          :preIcon=\"IconEnum.ADD\"\n                          @click=\"handleDetailAdd(VehicleApi.RecordType.REPAIR)\"\n                        >\n                          {{ t('common.action.create') }}\n                        </a-button>\n                      </template>\n                      <template v-if=\"!disabledInput\" #bodyCell=\"{ column, record }\">\n                        <template v-if=\"column.key === 'action'\">\n                          <TableAction\n                            :actions=\"createActions(record, VehicleApi.RecordType.REPAIR)\"\n                          />\n                        </template>\n                      </template>\n                    </BasicTable>\n                  </a-tab-pane>\n                  <a-tab-pane class=\"tab-pane-table\" key=\"5\" tab=\"安全检查记录\" force-render>\n                    <BasicTable @register=\"registerSecurityTable\">\n                      <template #toolbar>\n                        <a-button\n                          v-if=\"!disabledInput && activeKey === '5'\"\n                          type=\"primary\"\n                          :preIcon=\"IconEnum.ADD\"\n                          @click=\"handleSecurityAdd\"\n                        >\n                          {{ t('common.action.create') }}\n                        </a-button>\n                      </template>\n                    </BasicTable>\n                  </a-tab-pane>\n                </a-tabs>\n              </div>\n            </a-card>\n\n            <a-card title=\"附件资料\" :bordered=\"false\">\n              <div class=\"detail-upload-table\">\n                <UploadTable\n                  ref=\"uploadTable\"\n                  :rows=\"uploadRows\"\n                  :colwidths=\"['15%', '70%', '15%']\"\n                  :application=\"`po`\"\n                  :module=\"`vehicle`\"\n                  :mode=\"!disabledInput ? `normal` : `view`\"\n                />\n              </div>\n            </a-card>\n          </div>\n        </div>\n      </a-spin>\n    </div>\n  </PageWrapper>\n</template>\n\n<script lang=\"ts\" setup>\n  import { reactive, ref, onMounted, toRaw, UnwrapRef } from 'vue';\n  import type { SelectProps } from 'ant-design-vue';\n  import { useRoute } from 'vue-router';\n  import { assign, cloneDeep } from 'lodash-es';\n  import { IconEnum } from '@/enums/appEnum';\n  import { SysMessage, useMessage } from '@/hooks/web/useMessage';\n  import { useI18n } from '@/hooks/web/useI18n';\n  // import PrintButton from '/@/components/Framework/Button/PrintButton.vue';\n  import { BasicTable, useTable, TableAction, ActionItem, EditRecordRow } from '@/components/Table';\n  import DictSelectBox from '@/components/Framework/Combox/DictSelectBox.vue';\n  import UploadTable from '/@/components/Framework/Table/UploadTable.vue';\n  import { setCustomCompOptions } from '@/utils/cache';\n  import { buildShortUUID } from '@/utils/uuid';\n  import * as VehicleApi from './vehicle.data';\n  import { closeCurrentTab, addTabPage } from '@/utils/route';\n  import { MsgManager } from '@/message/MsgManager';\n\n  const { t } = useI18n();\n  const uploadTable = ref();\n  const uploadRows = ref<any[]>([]);\n  const { createMessage: msg } = useMessage();\n  const { query } = useRoute();\n  const isLoading = ref(false);\n  const formRef = ref();\n  const activeKey = ref('1');\n  const formState: UnwrapRef<any> = reactive({ spinning: false, status: 1 });\n  const currentEditKeyRef = ref('');\n  const currentEditRowRef = ref({});\n  const stationPersonOptions = ref<SelectProps['options']>([]) as any;\n  const insuranceDataSource = ref<any[]>();\n  const annualReviewDataSource = ref<any[]>();\n  const maintenanceDataSource = ref<any[]>();\n  const repairDataSource = ref<any[]>();\n  const securityDataSource = ref<any[]>();\n  const disabledInput = ref<boolean>(Boolean(query.isReadonly));\n\n  const tableOption = {\n    bordered: true,\n    useSearchForm: false,\n    actionColumn: {\n      width: 140,\n      title: t('common.operate'),\n      dataIndex: 'action',\n      fixed: 'right',\n      ifShow: () => {\n        return !disabledInput.value;\n      },\n    },\n    canResize: false,\n    pagination: false,\n    showTableSetting: false,\n    tableSetting: { fullScreen: true },\n  };\n\n  // 保险记录\n  const insuranceProps: any = assign(\n    {\n      dataSource: insuranceDataSource,\n      columns: VehicleApi.getDetailColumns(VehicleApi.RecordType.INSURANCE, currentEditRowRef),\n      target: '#more-tab-content',\n      targetTabKey: '1',\n      targetTabValue: activeKey,\n    },\n    tableOption,\n  );\n  const [registerInsuranceTable, { getDataSource: getInsuranceDataSource }] =\n    useTable(insuranceProps);\n\n  // 年检记录\n  const annualReviewProps: any = assign(\n    {\n      dataSource: annualReviewDataSource,\n      columns: VehicleApi.getDetailColumns(VehicleApi.RecordType.ANNUAL_REVIEW, currentEditRowRef),\n      target: '#more-tab-content',\n      targetTabKey: '2',\n      targetTabValue: activeKey,\n    },\n    tableOption,\n  );\n  const [registerAnnualReviewTable, { getDataSource: getAnnualReviewDataSource }] =\n    useTable(annualReviewProps);\n\n  // 保养记录\n  const maintenanceProps: any = assign(\n    {\n      dataSource: maintenanceDataSource,\n      columns: VehicleApi.getDetailColumns(VehicleApi.RecordType.MAINTENANCE, currentEditRowRef),\n      target: '#more-tab-content',\n      targetTabKey: '3',\n      targetTabValue: activeKey,\n    },\n    tableOption,\n  );\n  const [registerMaintenanceTable, { getDataSource: getMaintenanceDataSource }] =\n    useTable(maintenanceProps);\n\n  // 维修记录\n  const repairProps: any = assign(\n    {\n      dataSource: repairDataSource,\n      columns: VehicleApi.getDetailColumns(VehicleApi.RecordType.REPAIR, currentEditRowRef),\n      target: '#more-tab-content',\n      targetTabKey: '4',\n      targetTabValue: activeKey,\n    },\n    tableOption,\n  );\n  const [registerRepairTable, { getDataSource: getRepairDataSource }] = useTable(repairProps);\n\n  // 安全检查记录\n  const [registerSecurityTable] = useTable({\n    dataSource: securityDataSource,\n    columns: VehicleApi.securityColumns,\n    pagination: false,\n    striped: false,\n    useSearchForm: false,\n    showTableSetting: false,\n    bordered: true,\n    showIndexColumn: true,\n    canResize: false,\n    target: '#more-tab-content',\n    targetTabKey: '5',\n    targetTabValue: activeKey,\n  });\n\n  const blurPlateNumber = () => {\n    initSecurityDataSource();\n  };\n\n  function recursion(data) {\n    for (let i = 0; i < data.length; i++) {\n      const item = data[i];\n      item.value = item.id;\n      item.label = item.name;\n      item.disabled = item.orgKindId !== 'psm';\n      if (item.children && item.children.length > 0) {\n        recursion(item.children);\n      }\n    }\n  }\n\n  const initOrgTree = async () => {\n    const typeList = await VehicleApi.getOrgTree({\n      orgId: formState.stationOrganId,\n      orgKindIds: 'ogn,dpt,pos,psm',\n      showPosition: true,\n      status: 1,\n    });\n    recursion(typeList.result);\n    const orgTreeOptions = {\n      data: typeList.result,\n      tfields: { value: 'value', label: 'label', children: 'children' },\n    };\n    setCustomCompOptions('OrgTreeOptions', orgTreeOptions);\n  };\n\n  function getDataSource(type: string) {\n    if (type === VehicleApi.RecordType.INSURANCE) {\n      return getInsuranceDataSource();\n    }\n    if (type === VehicleApi.RecordType.ANNUAL_REVIEW) {\n      return getAnnualReviewDataSource();\n    }\n    if (type === VehicleApi.RecordType.MAINTENANCE) {\n      return getMaintenanceDataSource();\n    }\n    if (type === VehicleApi.RecordType.REPAIR) {\n      return getRepairDataSource();\n    }\n    return [];\n  }\n\n  function handleDetailAdd(type: string) {\n    if (!formState.id) {\n      SysMessage.getInstance().warning('请先保存数据');\n      return;\n    }\n    if (currentEditKeyRef.value) {\n      SysMessage.getInstance().warning('请保存行数据');\n      return;\n    }\n    const data = getDataSource(type);\n    const addRow: EditRecordRow = {\n      editable: true,\n      isNew: true,\n      key: `${type}_${Date.now()}`,\n    };\n    data.push(addRow);\n    currentEditKeyRef.value = addRow.key;\n  }\n\n  function handleSecurityAdd() {\n    const title = `${t('common.action.create')}车辆检查`;\n    addTabPage('/po/safety/vehicleexecution/create', title, {\n      stationOrganId: formState.stationOrganId,\n      stationOrganName: formState.stationOrganName,\n      stationId: formState.stationId,\n      stationName: formState.stationName,\n    });\n  }\n\n  function handleDetailEdit(record: EditRecordRow) {\n    currentEditKeyRef.value = record.key;\n    record.onEdit?.(true);\n  }\n\n  function handleDetailCancel(record: EditRecordRow, type: string) {\n    if (record.isNew && !record.id) {\n      const data = getDataSource(type);\n      const index = data.findIndex((item) => item.key === record.key);\n      data.splice(index, 1);\n    }\n    currentEditKeyRef.value = '';\n    currentEditRowRef.value = {} as any;\n    record.onEdit?.(false, false);\n  }\n\n  const handleDetailDelete = async (record: EditRecordRow, type: string) => {\n    // msg.loading({ content: '正在删除...', duration: 0, key: 'deleting' });\n    await VehicleApi.deleteDetail(type, `?id=${record.id}`);\n    const data = getDataSource(type);\n    const index = data.findIndex((item) => item.key === record.key);\n    data.splice(index, 1);\n    msg.success('数据已删除');\n    record.onEdit?.(false, false);\n  };\n\n  const handleDetailSave = async (record: EditRecordRow, type: string) => {\n    // 校验\n    // msg.loading({ content: '正在保存...', duration: 0, key: 'saving' });\n    const valid = await record.onValid?.();\n    if (valid) {\n      try {\n        const data = cloneDeep(record.editValueRefs) as any;\n        assign(data, toRaw(currentEditRowRef.value));\n        // 将数据提交给服务器保存\n        data.id = record.id;\n        data.vehicleId = formState.id;\n        const res = await VehicleApi.saveDetail(type, data);\n        // 保存之后提交编辑状态\n        const pass = await record.onEdit?.(false, true);\n        if (pass) {\n          currentEditKeyRef.value = '';\n          currentEditRowRef.value = {} as any;\n        }\n        assign(record, res.result);\n        msg.success('数据已保存');\n      } catch (error) {\n        msg.error('保存失败');\n      }\n    } else {\n      msg.error('请填写正确的数据');\n    }\n  };\n\n  function createActions(record: EditRecordRow, type: string): ActionItem[] {\n    if (!record.editable) {\n      return [\n        {\n          label: t('common.action.update'),\n          icon: IconEnum.EDIT,\n          disabled: currentEditKeyRef.value ? currentEditKeyRef.value !== record.key : false,\n          onClick: handleDetailEdit.bind(null, record),\n        },\n        {\n          label: t('common.delText'),\n          icon: IconEnum.DELETE,\n          disabled: currentEditKeyRef.value ? currentEditKeyRef.value !== record.key : false,\n          danger: true,\n          popConfirm: {\n            title: '是否确认删除',\n            confirm: handleDetailDelete.bind(null, record, type),\n          },\n        },\n      ];\n    }\n    return [\n      {\n        label: t('common.saveText'),\n        onClick: handleDetailSave.bind(null, record, type),\n      },\n      {\n        label: t('common.cancelText'),\n        icon: IconEnum.DELETE,\n        danger: true,\n        popConfirm: {\n          title: `是否取消${t('common.action.edit')}`,\n          confirm: handleDetailCancel.bind(null, record, type),\n        },\n      },\n    ];\n  }\n\n  const handleCancel = () => {\n    closeCurrentTab();\n    MsgManager.getInstance().sendMsg('integrated-vehicle', {});\n  };\n\n  const handleSave = () => {\n    formRef.value\n      .validate()\n      .then(() => {\n        const result = uploadTable.value.validate();\n        if (!result?.valid) {\n          msg.error('请上传附件资料');\n          return;\n        }\n        doSave();\n      })\n      .catch((error) => {\n        console.log('onSubmit=》error', error);\n      });\n  };\n\n  const doSave = async () => {\n    formState.spinning = true;\n    try {\n      convertStr(['Id', 'Name']);\n      const formData = toRaw(formState);\n      await VehicleApi.saveData(formData).then((res) => {\n        formState.id = res.result;\n        SysMessage.getInstance().success(t('common.saveSuccessText'));\n      });\n      setTimeout(function () {\n        handleCancel();\n      }, 200);\n    } finally {\n      formState.spinning = false;\n    }\n  };\n\n  function initStationPersonOptions() {\n    VehicleApi.getStationPerson('?stationId=' + formState.stationId).then((res) => {\n      if (res.result && res.result.length > 0) {\n        res.result.forEach((item) => {\n          stationPersonOptions.value.push({ value: item.userId, label: item.name });\n        });\n\n        const stationPersonTreeSelectOptions = {\n          data: stationPersonOptions.value,\n          tfields: { value: 'value', label: 'label' },\n        };\n        setCustomCompOptions('StationPersonTreeSelectOptions', stationPersonTreeSelectOptions);\n      }\n    });\n  }\n\n  const initFormState = async () => {\n    assign(formState, query);\n    if (query.id) {\n      const res = await VehicleApi.getData({ id: query.id });\n      assign(formState, res.result);\n      convertArr(['Id', 'Name']);\n    } else {\n      formState.bizFileId = buildShortUUID();\n    }\n  };\n\n  const initTableData = async () => {\n    const param = { vehicleId: formState.id };\n    const insuranceObj = await VehicleApi.getDetailList(VehicleApi.RecordType.INSURANCE, param);\n    insuranceDataSource.value = insuranceObj.result;\n\n    const annualReviewObj = await VehicleApi.getDetailList(\n      VehicleApi.RecordType.ANNUAL_REVIEW,\n      param,\n    );\n    annualReviewDataSource.value = annualReviewObj.result;\n\n    const maintenanceObj = await VehicleApi.getDetailList(VehicleApi.RecordType.MAINTENANCE, param);\n    maintenanceDataSource.value = maintenanceObj.result;\n\n    const repairObj = await VehicleApi.getDetailList(VehicleApi.RecordType.REPAIR, param);\n    repairDataSource.value = repairObj.result;\n\n    initSecurityDataSource();\n  };\n\n  const initSecurityDataSource = async () => {\n    const securityObj = await VehicleApi.getVehicleExecutionPage({\n      stationId: formState.stationId,\n      plateNumber: formState.plateNumber ? formState.plateNumber : '-null-',\n      pageNo: 1,\n      pageSize: 100,\n    });\n    securityDataSource.value = securityObj.result.list;\n  };\n\n  function handleDetailChange(activeKey) {\n    if (activeKey == 5) {\n      initSecurityDataSource();\n    }\n  }\n\n  function initSelectOptions() {\n    initOrgTree();\n    initStationPersonOptions();\n  }\n\n  function convertStr(suffixs: Array<string>) {\n    suffixs.forEach((suffix) => {\n      const fields = ref<Array<string>>(['responsiblePerson']);\n      fields.value.forEach((item) => {\n        const value = formState[item + suffix + 's'];\n        if (value && value.length > 0) {\n          formState[item + suffix] = value.join(',');\n        }\n      });\n    });\n  }\n\n  function convertArr(suffixs: Array<string>) {\n    suffixs.forEach((suffix) => {\n      const fields = ref<Array<string>>(['responsiblePerson']);\n      fields.value.forEach((item) => {\n        const value = formState[item + suffix];\n        if (value) {\n          formState[item + suffix + 's'] = value.split(',');\n        }\n      });\n    });\n  }\n\n  ////////////表格附件/////////////\n  const initUploadRows = () => {\n    if (!formState.bizFileId) {\n      formState.bizFileId = buildShortUUID();\n    }\n    uploadRows.value = [\n      {\n        fileKindId: 'picture',\n        filetype: '车辆图片',\n        bizId: formState.bizFileId,\n        maxCount: 1,\n        maxSize: 20 * 1024 * 1024,\n        required: true,\n        readonly: disabledInput.value,\n        format: 'png,jpg,jpeg',\n      },\n      {\n        fileKindId: 'archive',\n        filetype: '车辆档案',\n        bizId: formState.bizFileId,\n        maxCount: 20,\n        maxSize: 20 * 1024 * 1024,\n        required: false,\n        readonly: disabledInput.value,\n      },\n    ];\n  };\n  ////////////表格附件/////////////\n\n  onMounted(async () => {\n    await initFormState();\n    await initSelectOptions();\n    initTableData();\n    initUploadRows();\n  });\n</script>\n<style lang=\"less\" scoped>\n  @import '/@/design/biz/bizForm.less';\n</style>\n"],"names":["t","useI18n","uploadTable","ref","uploadRows","msg","useMessage","query","useRoute","isLoading","formRef","activeKey","formState","reactive","currentEditKeyRef","currentEditRowRef","stationPersonOptions","insuranceDataSource","annualReviewDataSource","maintenanceDataSource","repairDataSource","securityDataSource","disabledInput","tableOption","insuranceProps","assign","VehicleApi.getDetailColumns","VehicleApi.RecordType","registerInsuranceTable","getInsuranceDataSource","useTable","annualReviewProps","registerAnnualReviewTable","getAnnualReviewDataSource","maintenanceProps","registerMaintenanceTable","getMaintenanceDataSource","repairProps","registerRepairTable","getRepairDataSource","registerSecurityTable","VehicleApi.securityColumns","blurPlateNumber","initSecurityDataSource","recursion","data","i","item","initOrgTree","__async","typeList","VehicleApi.getOrgTree","orgTreeOptions","setCustomCompOptions","getDataSource","type","handleDetailAdd","SysMessage","addRow","handleSecurityAdd","title","addTabPage","handleDetailEdit","record","_a","handleDetailCancel","index","handleDetailDelete","VehicleApi.deleteDetail","handleDetailSave","cloneDeep","toRaw","res","VehicleApi.saveDetail","_b","error","createActions","IconEnum","handleCancel","closeCurrentTab","MsgManager","handleSave","result","doSave","convertStr","formData","VehicleApi.saveData","initStationPersonOptions","VehicleApi.getStationPerson","stationPersonTreeSelectOptions","initFormState","VehicleApi.getData","convertArr","buildShortUUID","initTableData","param","insuranceObj","VehicleApi.getDetailList","annualReviewObj","maintenanceObj","repairObj","securityObj","VehicleApi.getVehicleExecutionPage","handleDetailChange","initSelectOptions","suffixs","suffix","value","initUploadRows","onMounted"],"mappings":"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"}