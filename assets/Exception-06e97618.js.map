{"version":3,"file":"Exception-06e97618.js","sources":["../../src/assets/svg/no-data.svg","../../src/assets/svg/net-error.svg","../../src/views/sys/exception/Exception.vue"],"sourcesContent":["export default \"__VITE_ASSET__be2e2c90__\"","export default \"__VITE_ASSET__e0107b16__\"","<script lang=\"tsx\">\n  import type { PropType } from 'vue';\n  import { Result, Button } from 'ant-design-vue';\n  import { defineComponent, ref, computed, unref } from 'vue';\n  import { ExceptionEnum } from '/@/enums/exceptionEnum';\n  import notDataSvg from '/@/assets/svg/no-data.svg';\n  import netWorkSvg from '/@/assets/svg/net-error.svg';\n  import { useRoute } from 'vue-router';\n  import { useDesign } from '/@/hooks/web/useDesign';\n  import { useI18n } from '/@/hooks/web/useI18n';\n  import { useGo, useRedo } from '/@/hooks/web/usePage';\n  import { PageEnum } from '/@/enums/pageEnum';\n\n  interface MapValue {\n    title: string;\n    subTitle: string;\n    btnText?: string;\n    icon?: string;\n    handler?: any;\n    status?: string;\n  }\n\n  export default defineComponent({\n    name: 'ErrorPage',\n    props: {\n      // 状态码\n      status: {\n        type: Number as PropType<number>,\n        default: ExceptionEnum.PAGE_NOT_FOUND,\n      },\n\n      title: {\n        type: String as PropType<string>,\n        default: '',\n      },\n\n      subTitle: {\n        type: String as PropType<string>,\n        default: '',\n      },\n\n      full: {\n        type: Boolean as PropType<boolean>,\n        default: false,\n      },\n    },\n    setup(props) {\n      const statusMapRef = ref(new Map<string | number, MapValue>());\n\n      const { query } = useRoute();\n      const go = useGo();\n      const redo = useRedo();\n      const { t } = useI18n();\n      const { prefixCls } = useDesign('app-exception-page');\n\n      const getStatus = computed(() => {\n        const { status: routeStatus } = query;\n        const { status } = props;\n        return Number(routeStatus) || status;\n      });\n\n      const getMapValue = computed((): MapValue => {\n        return unref(statusMapRef).get(unref(getStatus)) as MapValue;\n      });\n\n      const backLoginI18n = t('sys.exception.backLogin');\n      const backHomeI18n = t('sys.exception.backHome');\n\n      unref(statusMapRef).set(ExceptionEnum.PAGE_NOT_ACCESS, {\n        title: '403',\n        status: `${ExceptionEnum.PAGE_NOT_ACCESS}`,\n        subTitle: t('sys.exception.subTitle403'),\n        btnText: props.full ? backLoginI18n : backHomeI18n,\n        handler: () => (props.full ? go(PageEnum.BASE_LOGIN) : go()),\n      });\n\n      unref(statusMapRef).set(ExceptionEnum.PAGE_NOT_FOUND, {\n        title: '404',\n        status: `${ExceptionEnum.PAGE_NOT_FOUND}`,\n        subTitle: t('sys.exception.subTitle404'),\n        btnText: props.full ? backLoginI18n : backHomeI18n,\n        handler: () => (props.full ? go(PageEnum.BASE_LOGIN) : go()),\n      });\n\n      unref(statusMapRef).set(ExceptionEnum.ERROR, {\n        title: '500',\n        status: `${ExceptionEnum.ERROR}`,\n        subTitle: t('sys.exception.subTitle500'),\n        btnText: backHomeI18n,\n        handler: () => go(),\n      });\n\n      unref(statusMapRef).set(ExceptionEnum.PAGE_NOT_DATA, {\n        title: t('sys.exception.noDataTitle'),\n        subTitle: '',\n        btnText: t('common.redo'),\n        handler: () => redo(),\n        icon: notDataSvg,\n      });\n\n      unref(statusMapRef).set(ExceptionEnum.NET_WORK_ERROR, {\n        title: t('sys.exception.networkErrorTitle'),\n        subTitle: t('sys.exception.networkErrorSubTitle'),\n        btnText: t('common.redo'),\n        handler: () => redo(),\n        icon: netWorkSvg,\n      });\n\n      return () => {\n        const { title, subTitle, btnText, icon, handler, status } = unref(getMapValue) || {};\n        return (\n          <Result\n            class={prefixCls}\n            status={status as any}\n            title={props.title || title}\n            sub-title={props.subTitle || subTitle}\n          >\n            {{\n              extra: () =>\n                btnText && (\n                  <Button type=\"primary\" onClick={handler}>\n                    {() => btnText}\n                  </Button>\n                ),\n              icon: () => (icon ? <img src={icon} /> : null),\n            }}\n          </Result>\n        );\n      };\n    },\n  });\n</script>\n<style lang=\"less\">\n  @prefix-cls: ~'@{namespace}-app-exception-page';\n\n  .@{prefix-cls} {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n\n    .ant-result-icon {\n      img {\n        max-width: 400px;\n        max-height: 300px;\n      }\n    }\n  }\n</style>\n"],"names":["notDataSvg","netWorkSvg","defineComponent","name","props","status","type","Number","default","ExceptionEnum","PAGE_NOT_FOUND","title","String","subTitle","full","Boolean","setup","statusMapRef","ref","Map","query","useRoute","go","useGo","redo","useRedo","t","useI18n","prefixCls","useDesign","getStatus","computed","routeStatus","getMapValue","unref","get","backLoginI18n","backHomeI18n","set","PAGE_NOT_ACCESS","btnText","handler","PageEnum","BASE_LOGIN","ERROR","PAGE_NOT_DATA","icon","NET_WORK_ERROR","_createVNode","Result","extra","Button"],"mappings":"0LAAA,MAAeA,EAAA,+BCAAC,EAAA,iCCsBEC,IAAgB,CAC7BC,KAAM,YACNC,MAAO,CAELC,OAAQ,CACNC,KAAMC,OACNC,QAASC,EAAcC,cACxB,EAEDC,MAAO,CACLL,KAAMM,OACNJ,QAAS,EACV,EAEDK,SAAU,CACRP,KAAMM,OACNJ,QAAS,EACV,EAEDM,KAAM,CACJR,KAAMS,QACNP,QAAS,EACX,CACD,EACDQ,MAAMZ,EAAO,CACX,MAAMa,EAAeC,EAAI,IAAIC,GAAgC,EAEvD,CAAEC,MAAAA,GAAUC,EAAQ,EACpBC,EAAKC,IACLC,EAAOC,IACP,CAAEC,CAAI,EAAEC,EAAO,EACf,CAAEC,UAAAA,CAAU,EAAIC,EAAU,oBAAoB,EAE9CC,EAAYC,EAAS,IAAM,CAC/B,KAAM,CAAE1B,OAAQ2B,CAAY,EAAIZ,EAC1B,CAAEf,OAAAA,CAAS,EAAED,EACnB,OAAOG,OAAOyB,CAAW,GAAK3B,CAChC,CAAC,EAEK4B,EAAcF,EAAS,IACpBG,EAAMjB,CAAY,EAAEkB,IAAID,EAAMJ,CAAS,CAAC,CAChD,EAEKM,EAAgBV,EAAE,yBAAyB,EAC3CW,EAAeX,EAAE,wBAAwB,EAE/CQ,OAAAA,EAAMjB,CAAY,EAAEqB,IAAI7B,EAAc8B,gBAAiB,CACrD5B,MAAO,MACPN,OAAS,GAAEI,EAAc8B,eAAgB,GACzC1B,SAAUa,EAAE,2BAA2B,EACvCc,QAASpC,EAAMU,KAAOsB,EAAgBC,EACtCI,QAASA,IAAOrC,EAAMU,KAAOQ,EAAGoB,EAASC,UAAU,EAAIrB,EAAG,CAC5D,CAAC,EAEDY,EAAMjB,CAAY,EAAEqB,IAAI7B,EAAcC,eAAgB,CACpDC,MAAO,MACPN,OAAS,GAAEI,EAAcC,cAAe,GACxCG,SAAUa,EAAE,2BAA2B,EACvCc,QAASpC,EAAMU,KAAOsB,EAAgBC,EACtCI,QAASA,IAAOrC,EAAMU,KAAOQ,EAAGoB,EAASC,UAAU,EAAIrB,EAAG,CAC5D,CAAC,EAEDY,EAAMjB,CAAY,EAAEqB,IAAI7B,EAAcmC,MAAO,CAC3CjC,MAAO,MACPN,OAAS,GAAEI,EAAcmC,KAAM,GAC/B/B,SAAUa,EAAE,2BAA2B,EACvCc,QAASH,EACTI,QAASA,IAAMnB,EAAG,CACpB,CAAC,EAEDY,EAAMjB,CAAY,EAAEqB,IAAI7B,EAAcoC,cAAe,CACnDlC,MAAOe,EAAE,2BAA2B,EACpCb,SAAU,GACV2B,QAASd,EAAE,aAAa,EACxBe,QAASA,IAAMjB,EAAM,EACrBsB,KAAM9C,CACR,CAAC,EAEDkC,EAAMjB,CAAY,EAAEqB,IAAI7B,EAAcsC,eAAgB,CACpDpC,MAAOe,EAAE,iCAAiC,EAC1Cb,SAAUa,EAAE,oCAAoC,EAChDc,QAASd,EAAE,aAAa,EACxBe,QAASA,IAAMjB,EAAM,EACrBsB,KAAM7C,CACR,CAAC,EAEM,IAAM,CACX,KAAM,CAAEU,MAAAA,EAAOE,SAAAA,EAAU2B,QAAAA,EAASM,KAAAA,EAAML,QAAAA,EAASpC,OAAAA,CAAO,EAAI6B,EAAMD,CAAW,GAAK,GAClF,OAAAe,EAAAC,EAAA,CAAA,MAEWrB,EAAS,OACRvB,EAAK,MACND,EAAMO,OAASA,EAAK,YAChBP,EAAMS,UAAYA,CAAQ,EAAA,CAGnCqC,MAAOA,IACLV,GAAMQ,EAAAG,EAAA,CAAA,KAAA,UAAA,QAC4BV,CAAO,EAAA,CAAAjC,QACpCA,IAAMgC,EAEV,EACHM,KAAMA,IAAOA,EAAKE,EAAA,MAAA,CAAA,IAAYF,GAAW,IAAA,EAAA,IAAK,CAAA,EAKxD,CACF,CAAC"}