var k=(r,e,u)=>new Promise((h,w)=>{var C=s=>{try{p(u.next(s))}catch(_){w(_)}},n=s=>{try{p(u.throw(s))}catch(_){w(_)}},p=s=>s.done?h(s.value):Promise.resolve(s.value).then(C,n);p((u=u.apply(r,e)).next())});import{d as R,r as T,k as x,ax as $,u as c,o as A,al as i,Z as B,_ as D,f as a,aa as t,$ as m,E as M,ac as U,v as b,A as v,aG as E,aH as L}from"./vue-71d1abb3.js";import{h as S,i as P}from"./knowledge-473fa26e.js";import{T as G}from"./index-aadc7f51.js";import{ak as Q,bP as Z,aC as Y,a7 as J,_ as K}from"./index.js";import{U as W}from"./UploadBox-636ecf02.js";import{a as I}from"./assign-37f1c13d.js";import{a2 as X}from"./antd-15ac76ed.js";import"./Dialog-0a006d82.js";const ee=r=>(E("data-v-b6541c4c"),r=r(),L(),r),ae={class:"load"},te={class:"process-box"},le={class:"header-box"},oe=ee(()=>m("div",{class:"header-left"},"知识库",-1)),ne={key:0,class:"header-right"},se={class:"content"},de={style:{margin:"10px 0 0 80px"}},ie={class:"clearfix",style:{"padding-left":"15px"}},re=R({__name:"knowledgeDrawer",setup(r){const e=T({spinning:!1});x(!0);const u=x(!1);x(!1);const h=T({});h.subject="知识库",h.infoItems=[];const w=$(),{currentRoute:C}=w;c(C);const n=Q.getInstance().getQuery();function p(){Y()}const s=x();function _(){e.spinning=!0;try{s.value.validateFields().then(()=>{P(e).then(d=>{e.id=d.result,X.success("保存成功"),J.getInstance().sendMsg("integrated-knowledge",{}),Y()})})}catch(d){console.log("error",d)}finally{e.spinning=!1}}I(e,{id:"",status:1,subject:"",content:"",bizFileId:""}),A(()=>k(this,null,function*(){n.id=yield q(),n.id?yield S({id:n.id}).then(d=>{I(e,d.result)}):(I(e,n),e.spinning=!1),e.spinning=!1,(e.bizFileId==null||e.bizFileId==null||e.bizFileId=="")&&V()}));const V=()=>k(this,null,function*(){Z().then(d=>{e.bizFileId=d})}),q=()=>k(this,null,function*(){let d=n.id;return e.id&&(yield S({id:e.id}).then(l=>{I(e,l.result)})),d});return(d,l)=>{const F=i("a-button"),y=i("a-input"),f=i("a-form-item"),g=i("a-col"),N=i("a-row"),j=i("a-date-picker"),z=i("a-card"),H=i("a-form"),O=i("a-spin");return B(),D("div",ae,[a(O,{spinning:e.spinning,tip:"Loading..."},{default:t(()=>[m("div",te,[m("div",le,[oe,c(n).readOnly?U("",!0):(B(),D("div",ne,[a(F,{onClick:p},{default:t(()=>[M("取消")]),_:1}),a(F,{class:"!ml-4",type:"primary",onClick:_,loading:u.value},{default:t(()=>[M(" 保存 ")]),_:1},8,["loading"])]))]),m("div",se,[a(H,{ref_key:"formRef",ref:s,model:e,labelAlign:"right",autocomplete:"off"},{default:t(()=>[a(z,{title:"基本信息",bordered:!1},{default:t(()=>[a(N,{gutter:24},{default:t(()=>[b(a(g,{span:12},{default:t(()=>[a(f,{name:"deptName",label:"部门",labelCol:{span:4},rules:[{required:!0,message:"请输入部门"}]},{default:t(()=>[a(y,{disabled:"",value:e.deptName,"onUpdate:value":l[0]||(l[0]=o=>e.deptName=o),placeholder:"请输入部门"},null,8,["value"]),U("",!0)]),_:1})]),_:1},512),[[v,!0]]),b(a(g,{span:12},{default:t(()=>[a(f,{name:"knowledgeTypeName",label:" 知识库分类",labelCol:{span:4},rules:[{required:!0,message:"请输入 知识库分类"}]},{default:t(()=>[a(y,{disabled:"",value:e.knowledgeTypeName,"onUpdate:value":l[2]||(l[2]=o=>e.knowledgeTypeName=o),placeholder:"请输入知识库分类"},null,8,["value"])]),_:1})]),_:1},512),[[v,!0]])]),_:1}),a(N,{gutter:24},{default:t(()=>[b(a(g,{span:12},{default:t(()=>[a(f,{name:"creatorName",label:" 创建人",labelCol:{span:4},rules:[{required:!0,message:"请输入创建人"}]},{default:t(()=>[a(y,{disabled:"",value:e.creatorName,"onUpdate:value":l[3]||(l[3]=o=>e.creatorName=o),placeholder:"请输入创建人"},null,8,["value"])]),_:1})]),_:1},512),[[v,!0]]),b(a(g,{span:12},{default:t(()=>[a(f,{name:"createTime",label:"创建时间",labelCol:{span:4},rules:[{required:!0,message:"请选择创建时间"}]},{default:t(()=>[a(j,{value:e.createTime,"onUpdate:value":l[4]||(l[4]=o=>e.createTime=o),"value-format":"YYYY-MM-DD HH:mm:ss",format:"YYYY-MM-DD HH:mm:ss",style:{"min-width":"100%"},"show-time":"",disabled:""},null,8,["value"])]),_:1})]),_:1},512),[[v,!0]])]),_:1}),a(N,{gutter:24},{default:t(()=>[b(a(g,{span:24},{default:t(()=>[a(f,{name:"subject",label:"主题",labelCol:{span:2},rules:[{required:!0,message:"请输入主题"}]},{default:t(()=>[a(y,{value:e.subject,"onUpdate:value":l[5]||(l[5]=o=>e.subject=o),placeholder:"请输入主题",maxlength:200,disabled:c(n).readOnly},null,8,["value","disabled"])]),_:1})]),_:1},512),[[v,!0]])]),_:1})]),_:1}),a(z,{title:"分享内容",bordered:!1},{default:t(()=>[m("div",de,[a(c(G),{modelValue:e.content,"onUpdate:modelValue":l[6]||(l[6]=o=>e.content=o),width:"calc(100% - 17px)",height:400,maxChars:5e3,disabled:c(n).readOnly},null,8,["modelValue","width","disabled"])])]),_:1}),a(z,{title:"附件信息",bordered:!1},{default:t(()=>[m("div",ie,[a(W,{width:800,height:550,maxCount:20,maxSize:100*1024*1024,application:"po",module:"knowledge",vmode:c(n).readOnly?"view":"box",bizId:e.bizFileId},null,8,["vmode","bizId"])])]),_:1})]),_:1},8,["model"])])])]),_:1},8,["spinning"])])}}});const he=K(re,[["__scopeId","data-v-b6541c4c"]]);export{he as default};
//# sourceMappingURL=knowledgeDrawer-2c8c2893.js.map
