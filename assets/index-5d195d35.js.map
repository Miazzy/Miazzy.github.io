{"version":3,"file":"index-5d195d35.js","sources":["../../src/views/monitor/smartdevice/realstatus/data.ts","../../src/views/monitor/smartdevice/realstatus/iconUrl.ts","../../src/views/monitor/smartdevice/realstatus/index.vue"],"sourcesContent":["import { defHttp } from '/@/utils/http/axios';\n\nenum Api {\n  // 首页电站数据\n  getHomePageStationsUrl = '/da/home-page/stations',\n  // 获得行车记录仪实时状态统计\n  getDrRealStatusCountUrl = '/monitor/driving-recorder-real-status/getRealStatusCount',\n  // 分页获得行车记录仪实时状态列表\n  getDrPageUrl = '/monitor/driving-recorder-real-status/page',\n  // 获得行车记录仪实时状态列表\n  getDrListUrl = '/monitor/driving-recorder-real-status/list',\n  // 导出行车记录仪实时状态\n  exportDrExcelUrl = '/monitor/driving-recorder-real-status/export-excel',\n  // 获得电子工牌实时状态统计\n  getEwcRealStatusCountUrl = '/monitor/ele-work-card-real-status/getRealStatusCount',\n  // 分页获得电子工牌实时状态列表\n  getEwcPageUrl = '/monitor/ele-work-card-real-status/page',\n  // 获得电子工牌实时状态列表\n  getEwcListUrl = '/monitor/ele-work-card-real-status/list',\n  // 导出电子工牌实时状态\n  exportEwcExcelUrl = '/monitor/ele-work-card-real-status/export-excel',\n  // 获得巡检仪实时状态统计\n  getIiRealStatusCountUrl = '/monitor/inspection-instrument-real-status/getRealStatusCount',\n  // 分页获得巡检仪实时状态列表\n  getIiPageUrl = '/monitor/inspection-instrument-real-status/page',\n  // 获得巡检仪实时状态列表\n  getIiListUrl = '/monitor/inspection-instrument-real-status/list',\n  // 导出巡检仪实时状态\n  exportIiExcelUrl = '/monitor/inspection-instrument-real-status/export-excel',\n}\n\nexport const getHomePageStations = (params) =>\n  defHttp.get({ url: Api.getHomePageStationsUrl, params }, {});\n\nexport const getDrRealStatusCount = (params) =>\n  defHttp.get({ url: Api.getDrRealStatusCountUrl, params }, { isOnlyResult: true });\n\nexport const getDrPage = (params) =>\n  defHttp.get({ url: Api.getDrPageUrl, params }, { isOnlyResult: true });\n\nexport const getDrList = (params) =>\n  defHttp.get({ url: Api.getDrListUrl, params }, { isOnlyResult: true });\n\nexport const exportDrExcel = (params) =>\n  defHttp.post({ url: Api.exportDrExcelUrl, params, responseType: 'blob' }, { isOnlyResult: true });\n\nexport const getEwcRealStatusCount = (params) =>\n  defHttp.get({ url: Api.getEwcRealStatusCountUrl, params }, { isOnlyResult: true });\n\nexport const getEwcPage = (params) =>\n  defHttp.get({ url: Api.getEwcPageUrl, params }, { isOnlyResult: true });\n\nexport const getEwcList = (params) =>\n  defHttp.get({ url: Api.getEwcListUrl, params }, { isOnlyResult: true });\n\nexport const exportEwcExcel = (params) =>\n  defHttp.post(\n    { url: Api.exportEwcExcelUrl, params, responseType: 'blob' },\n    { isOnlyResult: true },\n  );\n\nexport const getIiRealStatusCount = (params) =>\n  defHttp.get({ url: Api.getIiRealStatusCountUrl, params }, { isOnlyResult: true });\n\nexport const getIiPage = (params) =>\n  defHttp.get({ url: Api.getIiPageUrl, params }, { isOnlyResult: true });\n\nexport const getIiList = (params) =>\n  defHttp.get({ url: Api.getIiListUrl, params }, { isOnlyResult: true });\n\nexport const exportIiExcel = (params) =>\n  defHttp.post({ url: Api.exportIiExcelUrl, params, responseType: 'blob' }, { isOnlyResult: true });\n","export const iconUrl = {\n  // 电子工牌\n  ewc: {\n    online: '/images/work_card_online.svg',\n    leave: '/images/work_card_leave.svg',\n    offline: '/images/work_card_offline.svg',\n  },\n  // 行车记录仪\n  dr: {\n    online: '/images/dashcam_online.svg',\n    leave: '/images/dashcam_leave.svg',\n    offline: '/images/dashcam_offline.svg',\n  },\n  // 巡检仪\n  ii: {\n    online: '/images/itinerant_detector_online.svg',\n    leave: '/images/itinerant_detector_leave.svg',\n    offline: '/images/itinerant_detector_offline.svg',\n  },\n};\n","<template>\n  <div class=\"satellite-map\">\n    <div id=\"map-container\" class=\"map-container\"></div>\n    <div class=\"map-mode-toggle-box\">\n      <a-radio-group v-model:value=\"mapMode\" @change=\"handleMapModeChange\">\n        <a-radio-button value=\"BMAP_NORMAL_MAP\">\n          <i class=\"iconfont btn-icon icon-pingmianditu\"></i>平面\n        </a-radio-button>\n        <a-radio-button value=\"BMAP_EARTH_MAP\">\n          <i class=\"iconfont btn-icon icon-weixingditu\"></i>卫星\n        </a-radio-button>\n      </a-radio-group>\n    </div>\n    <div class=\"device-data-panel\">\n      <div class=\"search-box\">\n        <a-select\n          style=\"width: 100%\"\n          v-model:value=\"curStationId\"\n          mode=\"multiple\"\n          show-search\n          :options=\"stationList\"\n          :fieldNames=\"{ value: 'id', label: 'name' }\"\n          @change=\"handleChange\"\n          :maxTagCount=\"2\"\n          :maxTagTextLength=\"10\"\n          placeholder=\"请选择电站\"\n        />\n        <Icon class=\"search-icon\" @click=\"handleSearch\" icon=\"ant-design:search-outlined\" />\n      </div>\n      <div class=\"collapse-box\">\n        <a-collapse v-model:activeKey=\"activeKey\" expandIconPosition=\"right\" accordion>\n          <a-collapse-panel key=\"1\" forceRender :style=\"customStyle\">\n            <template #header>\n              <div class=\"collapse-header\">\n                <div class=\"device-type-box\">\n                  <div class=\"device-icon icon1\"></div>\n                  <div class=\"device-text\">\n                    <span style=\"margin-right: 7px\">电子工牌</span>\n                    <span>{{ readStatus.ewc.total }}</span>\n                  </div>\n                </div>\n                <div class=\"device-status-box\">\n                  <div class=\"device-status-data online\">\n                    <span style=\"margin-right: 7px\">在线</span>\n                    <span>{{ readStatus.ewc.online }}</span>\n                  </div>\n                  <div class=\"device-status-data offline\">\n                    <span style=\"margin-right: 7px\">离线</span>\n                    <span>{{ readStatus.ewc.offline }}</span>\n                  </div>\n                </div>\n              </div>\n            </template>\n            <div class=\"collapse-content\">\n              <div class=\"device-list\">\n                <div\n                  v-for=\"(item, index) in ewcList\"\n                  :key=\"index\"\n                  @click=\"handleClick(item, index, 'ewc')\"\n                  :class=\"[\n                    'device-item',\n                    readStatus.ewc.selectedIndex === index ? 'selected' : null,\n                  ]\"\n                >\n                  <div class=\"device-name\" :title=\"`${item.stationShortName}-${item.userName}`\"\n                    >{{ item.stationShortName }}-{{ item.userName }}</div\n                  >\n                  <div :class=\"`device-status-data ${item.status}`\">{{ item.statusText }}</div>\n                </div>\n              </div>\n            </div>\n          </a-collapse-panel>\n          <a-collapse-panel key=\"2\" forceRender :style=\"customStyle\">\n            <template #header>\n              <div class=\"collapse-header\">\n                <div class=\"device-type-box\">\n                  <div class=\"device-icon icon2\"></div>\n                  <div class=\"device-text\">\n                    <span style=\"margin-right: 7px\">行车记录仪</span>\n                    <span>{{ readStatus.dr.total }}</span>\n                  </div>\n                </div>\n                <div class=\"device-status-box\">\n                  <div class=\"device-status-data online\">\n                    <span style=\"margin-right: 7px\">在线</span>\n                    <span>{{ readStatus.dr.online }}</span>\n                  </div>\n                  <div class=\"device-status-data offline\">\n                    <span style=\"margin-right: 7px\">离线</span>\n                    <span>{{ readStatus.dr.offline }}</span>\n                  </div>\n                </div>\n              </div>\n            </template>\n            <div class=\"collapse-content\">\n              <div class=\"device-list\">\n                <div\n                  v-for=\"(item, index) in drList\"\n                  :key=\"index\"\n                  @click=\"handleClick(item, index, 'dr')\"\n                  :class=\"[\n                    'device-item',\n                    readStatus.dr.selectedIndex === index ? 'selected' : null,\n                  ]\"\n                >\n                  <div class=\"device-name\" :title=\"`${item.stationShortName}-${item.plateNumber}`\"\n                    >{{ item.stationShortName }}-{{ item.plateNumber }}</div\n                  >\n                  <div :class=\"`device-status-data ${item.status}`\">{{ item.statusText }}</div>\n                </div>\n              </div>\n            </div>\n          </a-collapse-panel>\n          <a-collapse-panel key=\"3\" forceRender :style=\"customStyle\">\n            <template #header>\n              <div class=\"collapse-header\">\n                <div class=\"device-type-box\">\n                  <div class=\"device-icon icon3\"></div>\n                  <div class=\"device-text\">\n                    <span style=\"margin-right: 7px\">巡检仪</span>\n                    <span>{{ readStatus.ii.total }}</span>\n                  </div>\n                </div>\n                <div class=\"device-status-box\">\n                  <div class=\"device-status-data online\">\n                    <span style=\"margin-right: 7px\">在线</span>\n                    <span>{{ readStatus.ii.online }}</span>\n                  </div>\n                  <div class=\"device-status-data offline\">\n                    <span style=\"margin-right: 7px\">离线</span>\n                    <span>{{ readStatus.ii.offline }}</span>\n                  </div>\n                </div>\n              </div>\n            </template>\n            <div class=\"collapse-content\">\n              <div class=\"device-list\">\n                <div\n                  v-for=\"(item, index) in iiList\"\n                  :key=\"index\"\n                  @click=\"handleClick(item, index, 'ii')\"\n                  :class=\"[\n                    'device-item',\n                    readStatus.ii.selectedIndex === index ? 'selected' : null,\n                  ]\"\n                >\n                  <div class=\"device-name\" :title=\"`${item.stationShortName}-${item.deviceName}`\"\n                    >{{ item.stationShortName }}-{{ item.deviceName }}</div\n                  >\n                  <div :class=\"`device-status-data ${item.status}`\">{{ item.statusText }}</div>\n                </div>\n              </div>\n            </div>\n          </a-collapse-panel>\n        </a-collapse>\n      </div>\n    </div>\n    <!-- 信息弹框 -->\n    <InfoDialog\n      :title=\"dialogTitle[curType]\"\n      :type=\"curType\"\n      :infoData=\"curInfo\"\n      :height=\"curType === 'ii' ? 290 : 500\"\n      v-model:visible=\"openDialog\"\n    />\n  </div>\n</template>\n<script lang=\"ts\" setup>\n  import { onMounted, ref, reactive, computed } from 'vue';\n  import {\n    getDrRealStatusCount,\n    getEwcRealStatusCount,\n    getIiRealStatusCount,\n    getDrList,\n    getEwcList,\n    getIiList,\n  } from './data';\n  import { getStations } from '../../monitorApi';\n  import InfoDialog from './infoDialog.vue';\n  import { iconUrl } from './iconUrl';\n  import Icon from '@/components/Icon/Icon.vue';\n  import * as FileApi from '@/api/infra/file';\n  import { useAppStore } from '/@/store/modules/app';\n\n  const appStore = useAppStore();\n\n  const mapObject = ref();\n  // 信息弹框\n  const openDialog = ref(false);\n  // 选电站\n  const curStationId = ref<Array<string>>([]);\n  const stationList = ref([]);\n  // 折叠面板展开的key\n  const activeKey = ref('');\n  const readStatus = reactive({\n    // 电子工牌\n    ewc: { total: 0, online: 0, offline: 0, selectedIndex: -1 },\n    // 行车记录仪\n    dr: { total: 0, online: 0, leave: 0, offline: 0, selectedIndex: -1 },\n    // 巡检仪\n    ii: { total: 0, online: 0, leave: 0, offline: 0, selectedIndex: -1 },\n  });\n  const ewcList = ref<Array<any>>([]);\n  const drList = ref<Array<any>>([]);\n  const iiList = ref<Array<any>>([]);\n  const dialogTitle = reactive({\n    // 电子工牌\n    ewc: '电子工牌信息',\n    // 行车记录仪\n    dr: '行车记录仪及车辆信息',\n    // 巡检仪\n    ii: '巡检仪信息',\n  });\n  const curType = ref<string>('');\n  const curInfo = ref<any>({ fileUrl: '' });\n  const mapModes = {\n    BMAP_NORMAL_MAP,\n    BMAP_EARTH_MAP,\n  };\n  const mapMode = ref('');\n\n  // 初始化地图\n  const initMap = () => {\n    mapObject.value = new BMapGL.Map('map-container'); // 创建Map实例\n    mapObject.value.enableScrollWheelZoom(true); // 开启鼠标滚轮缩放\n\n    // 设置地图类型 浅色模式为标准模式 深色模式为卫星地图模式\n    if (appStore.getDarkMode === 'dark') {\n      mapMode.value = 'BMAP_EARTH_MAP';\n      mapObject.value.setMapType(BMAP_EARTH_MAP);\n    } else {\n      mapMode.value = 'BMAP_NORMAL_MAP';\n      mapObject.value.setMapType(BMAP_NORMAL_MAP);\n    }\n    mapObject.value.centerAndZoom(new BMapGL.Point(112, 34), 5); // 初始化地图,设置中心点坐标和地图级别\n\n    let zoomCtrl = new BMapGL.ZoomControl(); // 添加缩放控件\n    mapObject.value.addControl(zoomCtrl);\n  };\n\n  // 创建label\n  const createLabel = (pt, content) => {\n    let opts = {\n      position: pt, // 指定文本标注所在的地理位置\n      offset: new BMapGL.Size(10, -40), //设置文本偏移量\n    };\n    let label = new BMapGL.Label(content, opts); // 创建文本标注对象\n    label.setStyle({\n      //样式\n      width: 'auto !important',\n      color: 'white',\n      fontSize: '12px',\n      backgroundColor: 'rgba(0,0,0)',\n      border: 0,\n      padding: '10px',\n      borderRadius: '4px',\n    });\n    // 返回label\n    return label;\n  };\n\n  const getFilePath = async (markItem, type) => {\n    let bizId = '';\n    if (type === 'ewc') {\n      bizId = markItem.userId;\n    } else if (type === 'dr') {\n      bizId = markItem.bizFileId;\n    }\n    const data = await FileApi.getFiles({ bizId: bizId });\n    if (!data || data.length === 0) {\n      return '';\n    }\n    let url;\n    if (type === 'dr') {\n      for (let i = 0; i < data.length; i++) {\n        if (data[i].fileKindId === 'picture') {\n          url = data[i].url;\n          break;\n        }\n      }\n    } else {\n      url = data[0].url;\n    }\n    return FileApi.attachmentDownloadUrl(url);\n  };\n\n  // 创建mark\n  const createMark = (pt, markItem, type) => {\n    let myIcon = new BMapGL.Icon(iconUrl[type][markItem.status], new BMapGL.Size(30, 44), {\n      anchor: new BMapGL.Size(15, 44),\n    });\n    // 创建标注对象并添加到地图\n    let marker = new BMapGL.Marker(pt, { icon: myIcon });\n    mapObject.value.addOverlay(marker);\n    // 点击marker打开弹框\n    marker.onclick = async () => {\n      openDialog.value = true;\n      const fileUrl = await getFilePath(markItem, type);\n      curType.value = type;\n      curInfo.value = markItem;\n      curInfo.value.fileUrl = fileUrl;\n      curInfo.value.mapMode = mapMode.value;\n    };\n\n    // 添加title 标题信息\n    const label = createLabel(pt, markItem.stationShortName);\n    // 移入\n    marker.onmouseover = () => {\n      mapObject.value.addOverlay(label);\n    };\n    // 移除\n    marker.onmouseout = () => {\n      mapObject.value.removeOverlay(label);\n    };\n  };\n\n  // 获取mark 并将mark 标记在地图上\n  const getDoMarkData = async (data, type) => {\n    if (data?.length) {\n      data.forEach((item) => {\n        if (item.status === 'online') {\n          const pt = new BMapGL.Point(item.longitude, item.latitude);\n          createMark(pt, item, type);\n        }\n      });\n    }\n  };\n\n  // 获取电站列表数据\n  const getPowerStationList = async () => {\n    const res = await getStations({});\n    if (res?.length) {\n      stationList.value = res;\n    }\n  };\n  // 选择电站\n  const handleChange = (value: string[]) => {\n    curStationId.value = value;\n  };\n\n  // 折叠面板自定义样式\n  const customStyle = computed(() => {\n    if (appStore.getDarkMode === 'dark') {\n      return 'border-radius: 2px; background: rgba(7,59,109,0.5); border: 1px solid rgba(255,255,255,0.1); margin-bottom: 10px;';\n    } else {\n      return 'border-radius: 2px; background: #E3F2FF; border: 1px solid #EBEBEB; margin-bottom: 10px;';\n    }\n  });\n\n  const getParams = () => {\n    return { stationId: curStationId.value.join(',') };\n  };\n\n  const initReadStatus = () => {\n    const params = getParams();\n    getEwcRealStatusCount(params).then((data) => {\n      readStatus.ewc = data;\n    });\n    getDrRealStatusCount(params).then((data) => {\n      readStatus.dr = data;\n    });\n    getIiRealStatusCount(params).then((data) => {\n      readStatus.ii = data;\n    });\n\n    ewcList.value = [];\n    drList.value = [];\n    iiList.value = [];\n    mapObject.value.clearOverlays();\n    // 创建地理编码实例\n    let myGeo = new BMapGL.Geocoder();\n    getEwcList(params).then((data) => {\n      initAddress(myGeo, data);\n      ewcList.value = data;\n      getDoMarkData(data, 'ewc');\n    });\n    getDrList(params).then((data) => {\n      initAddress(myGeo, data);\n      drList.value = data;\n      getDoMarkData(data, 'dr');\n    });\n    getIiList(params).then((data) => {\n      initAddress(myGeo, data);\n      iiList.value = data;\n      getDoMarkData(data, 'ii');\n    });\n  };\n\n  const initAddress = (myGeo, data) => {\n    // 根据坐标得到地址描述\n    data.forEach((item) => {\n      myGeo.getLocation(new BMapGL.Point(item.longitude, item.latitude), function (result) {\n        if (result) {\n          item.address = result.address;\n        }\n      });\n    });\n  };\n\n  const handleClick = (row, index, type) => {\n    readStatus[type].selectedIndex = index;\n    const pt = new BMapGL.Point(row.longitude, row.latitude);\n    // 设置中心点坐标和地图级别\n    mapObject.value.centerAndZoom(pt, 14);\n    createMark(pt, row, type);\n  };\n\n  const handleSearch = () => {\n    initReadStatus();\n  };\n\n  const handleMapModeChange = (e) => {\n    mapObject.value.setMapType(mapModes[e.target.value]);\n  };\n\n  onMounted(() => {\n    initMap();\n    getPowerStationList();\n    initReadStatus();\n  });\n</script>\n<style lang=\"less\">\n  [data-theme='dark'] .theme1 {\n    .device-data-panel {\n      background-color: #0a244a;\n    }\n\n    .collapse-box {\n      .ant-collapse {\n        background-color: transparent;\n        color: #fff;\n      }\n\n      .ant-collapse-content {\n        background-color: rgb(6 26 51 / 57%);\n        color: #fff;\n      }\n    }\n\n    .collapse-header {\n      .device-type-box {\n        .device-icon {\n          &.icon1 {\n            background: url('../images/panel-icon1-dark.png') no-repeat 100% 100%;\n          }\n\n          &.icon2 {\n            background: url('../images/panel-icon2-dark.png') no-repeat 100% 100%;\n          }\n\n          &.icon3 {\n            background: url('../images/panel-icon3-dark.png') no-repeat 100% 100%;\n          }\n        }\n\n        .device-text {\n          color: #fff;\n        }\n      }\n    }\n\n    .collapse-content {\n      .device-item {\n        border-bottom: 1px solid rgb(255 255 255 / 16%);\n        background-color: transparent;\n\n        .device-name {\n          color: rgb(255 255 255 / 80%);\n        }\n\n        &.selected {\n          background-color: #002d57;\n        }\n      }\n    }\n\n    .map-mode-toggle-box {\n      background: #0a244a;\n      box-shadow: 0 0 5px 0 rgb(12 6 14 / 10%);\n\n      .ant-radio-button-wrapper {\n        border: none;\n        color: rgb(255 255 255 / 30%);\n      }\n\n      .ant-radio-button-wrapper:not(:first-child)::before {\n        background-color: rgb(255 255 255 / 16%);\n      }\n    }\n  }\n\n  .theme3 {\n    .device-data-panel {\n      background-color: #fff;\n    }\n\n    .search-icon {\n      color: #bfbfbf;\n    }\n\n    .collapse-box {\n      .ant-collapse {\n        background-color: transparent;\n        color: #000;\n      }\n\n      .ant-collapse-content {\n        background-color: #fff;\n        color: rgb(38 38 38 / 80%);\n      }\n    }\n\n    .collapse-header {\n      .device-type-box {\n        .device-icon {\n          &.icon1 {\n            background: url('../images/panel-icon1-light.png') no-repeat 100% 100%;\n          }\n\n          &.icon2 {\n            background: url('../images/panel-icon2-light.png') no-repeat 100% 100%;\n          }\n\n          &.icon3 {\n            background: url('../images/panel-icon3-light.png') no-repeat 100% 100%;\n          }\n        }\n\n        .device-text {\n          color: #000;\n        }\n      }\n    }\n\n    .collapse-content {\n      .device-item {\n        border-bottom: 1px solid rgb(153 153 153 / 10%);\n        background-color: transparent;\n\n        .device-name {\n          color: rgb(38 38 38 / 80%);\n        }\n\n        &.selected {\n          background-color: rgb(24 144 255 / 8%);\n        }\n      }\n    }\n\n    .map-mode-toggle-box {\n      background: #fff;\n      box-shadow: 0 0 5px 0 rgb(12 6 14 / 10%);\n\n      .ant-radio-button-wrapper {\n        border: none;\n        color: #666;\n      }\n\n      .ant-radio-button-wrapper:not(:first-child)::before {\n        background-color: #d9d9d9;\n      }\n    }\n  }\n</style>\n<style lang=\"less\" scoped>\n  .satellite-map {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n\n    .map-container {\n      width: 100%;\n      height: 100%;\n    }\n\n    :deep(.modal-body) {\n      margin: 0;\n    }\n  }\n\n  .device-data-panel {\n    position: absolute;\n    z-index: 9;\n    top: 10px;\n    left: 10px;\n    width: 320px;\n    height: calc(100vh - 20px);\n  }\n\n  .search-box {\n    position: relative;\n\n    .search-icon {\n      position: absolute;\n      z-index: 10;\n      top: 0;\n      right: 0;\n      align-items: center;\n      justify-content: center;\n      width: 46px;\n      height: 32px;\n      cursor: pointer;\n    }\n  }\n\n  .collapse-box {\n    padding: 18px 12px;\n\n    :deep(.ant-collapse) {\n      border: none;\n    }\n\n    :deep(.ant-collapse-content) {\n      border-top: none;\n    }\n  }\n\n  .collapse-header {\n    .device-type-box {\n      display: flex;\n      align-items: center;\n      margin-bottom: 18px;\n\n      .device-icon {\n        width: 42px;\n        height: 42px;\n        margin-right: 12px;\n      }\n\n      .device-text {\n        font-size: 14px;\n        font-weight: 600;\n      }\n    }\n\n    .device-status-box {\n      display: flex;\n      padding: 0 5px;\n\n      .device-status-data {\n        font-size: 13px;\n        line-height: 1;\n\n        &.online {\n          color: #52c41a;\n        }\n\n        &.leave {\n          color: #efbd47;\n        }\n\n        &.offline {\n          color: #ff4d4f;\n        }\n\n        & + .device-status-data {\n          margin-left: 30px;\n        }\n      }\n    }\n  }\n\n  .collapse-content {\n    .device-item {\n      display: flex;\n      align-items: center;\n      justify-content: space-between;\n      height: 36px;\n      padding: 0 5px;\n      font-size: 12px;\n      cursor: pointer;\n\n      .device-name {\n        width: 85%;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n      }\n\n      .device-status-data {\n        &.online {\n          color: #52c41a;\n        }\n\n        &.leave {\n          color: #efbd47;\n        }\n\n        &.offline {\n          color: #ff4d4f;\n        }\n      }\n\n      &.selected {\n        .device-name {\n          color: rgb(24 144 255 / 80%);\n        }\n      }\n    }\n  }\n\n  .map-mode-toggle-box {\n    position: absolute;\n    z-index: 9;\n    top: 10px;\n    right: 13px;\n\n    .btn-icon {\n      margin-right: 4px;\n      font-size: 14px;\n    }\n\n    :deep(.ant-radio-button-wrapper) {\n      box-shadow: none !important;\n      line-height: 32px;\n\n      &:hover {\n        color: #1890ff !important;\n      }\n    }\n\n    :deep(.ant-radio-button-wrapper:not(:first-child)::before) {\n      z-index: 1;\n      top: 6px;\n      height: 18px;\n    }\n\n    :deep(.ant-radio-button-wrapper-checked:not(.ant-radio-button-wrapper-disabled)) {\n      color: #1890ff !important;\n    }\n  }\n</style>\n"],"names":["getDrRealStatusCount","params","defHttp","getDrList","getEwcRealStatusCount","getEwcList","getIiRealStatusCount","getIiList","iconUrl","appStore","useAppStore","mapObject","ref","openDialog","curStationId","stationList","activeKey","readStatus","reactive","ewcList","drList","iiList","dialogTitle","curType","curInfo","mapModes","mapMode","initMap","zoomCtrl","createLabel","pt","content","opts","label","getFilePath","markItem","type","__async","bizId","data","FileApi.getFiles","url","i","FileApi.attachmentDownloadUrl","createMark","myIcon","marker","fileUrl","getDoMarkData","item","getPowerStationList","res","getStations","handleChange","value","customStyle","computed","getParams","initReadStatus","myGeo","initAddress","result","handleClick","row","index","handleSearch","handleMapModeChange","e","onMounted"],"mappings":"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"}