{"version":3,"file":"useRender-21ce56fb.js","sources":["../../src/components/Table/src/components/TableImg.vue","../../src/components/Table/src/hooks/useRender.ts"],"sourcesContent":["<template>\n  <div\n    :class=\"prefixCls\"\n    class=\"flex items-center mx-auto\"\n    v-if=\"imgList && imgList.length\"\n    :style=\"getWrapStyle\"\n  >\n    <Badge :count=\"!showBadge || imgList.length == 1 ? 0 : imgList.length\" v-if=\"simpleShow\">\n      <div class=\"img-div\">\n        <PreviewGroup>\n          <template v-for=\"(img, index) in imgList\" :key=\"img\">\n            <AImage\n              :width=\"size\"\n              :style=\"{\n                display: index === 0 ? '' : 'none !important',\n              }\"\n              :src=\"srcPrefix + img\"\n              :fallback=\"fallback\"\n            />\n          </template>\n        </PreviewGroup>\n      </div>\n    </Badge>\n    <PreviewGroup v-else>\n      <template v-for=\"(img, index) in imgList\" :key=\"img\">\n        <AImage\n          :width=\"size\"\n          :style=\"{ marginLeft: index === 0 ? 0 : margin + 'px' }\"\n          :src=\"srcPrefix + img\"\n          :fallback=\"fallback\"\n        />\n      </template>\n    </PreviewGroup>\n  </div>\n</template>\n<script lang=\"ts\">\n  import type { CSSProperties } from 'vue';\n  import { defineComponent, computed } from 'vue';\n  import { useDesign } from '/@/hooks/web/useDesign';\n  import { Image, Badge } from 'ant-design-vue';\n  import { propTypes } from '/@/utils/propTypes';\n\n  export default defineComponent({\n    name: 'TableImage',\n    components: { AImage: Image, PreviewGroup: Image.PreviewGroup, Badge },\n    props: {\n      imgList: propTypes.arrayOf(propTypes.string),\n      size: propTypes.number.def(40),\n      // 是否简单显示（只显示第一张图片）\n      simpleShow: propTypes.bool,\n      // 简单模式下是否显示图片数量的badge\n      showBadge: propTypes.bool.def(true),\n      // 图片间距\n      margin: propTypes.number.def(4),\n      // src前缀，将会附加在imgList中每一项之前\n      srcPrefix: propTypes.string.def(''),\n      // fallback,加载失败显示图像占位符。\n      fallback: propTypes.string.def(\n        'data:image/png;base64,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',\n      ),\n    },\n    setup(props) {\n      const getWrapStyle = computed((): CSSProperties => {\n        const { size } = props;\n        const s = `${size}px`;\n        return { height: s, width: s };\n      });\n\n      const { prefixCls } = useDesign('basic-table-img');\n      return { prefixCls, getWrapStyle };\n    },\n  });\n</script>\n<style lang=\"less\">\n  @prefix-cls: ~'@{namespace}-basic-table-img';\n\n  .@{prefix-cls} {\n    .ant-image {\n      margin-right: 4px;\n      cursor: zoom-in;\n\n      img {\n        border-radius: 2px;\n      }\n    }\n\n    .img-div {\n      display: inline-grid;\n    }\n  }\n</style>\n","import { h } from 'vue';\nimport dayjs from 'dayjs';\nimport { Button, Tag } from 'ant-design-vue';\nimport TableImg from '../components/TableImg.vue';\nimport { isArray, isString } from '@/utils/is';\nimport { DictTag } from '@/components/DictTag';\nimport { Icon } from '@/components/Icon';\nimport { JsonPreview } from '@/components/CodeEditor';\nimport { addTabPage } from '@/utils/route';\n\nconst statusColor = {\n  0: '#dc0000', // 草稿\n  1: '#338ed1', // 处理中\n  2: '#30ca5a', // 通过\n  3: '#929292', // 不通过\n  4: '#929292', // 已取消\n  5: '#929292', // 已终止\n  6: '#fda941', // 退回/驳回\n};\nexport const useRender = {\n  /**\n   * 渲染图片\n   * @param text 图片地址\n   * @returns image标签\n   */\n  renderImg: (text: string) => {\n    if (text) {\n      if (isArray(text)) return h(TableImg, { imgList: text });\n      else if (isString(text)) return h(TableImg, { imgList: [text] });\n    }\n    return '';\n  },\n  /**\n   * 渲染链接\n   * @param url 链接地址\n   * @param text 文字说明\n   * @returns link 按钮\n   */\n  renderLink: (url: string, text?: string) => {\n    if (url) return h(Button, { type: 'link', href: url, target: '_self' }, () => text || '');\n\n    return '';\n  },\n  /**\n   * 渲染链接（iframe模式）\n   * @param url 链接地址\n   * @param text 文字说明\n   * @returns link 按钮\n   */\n  renderIframeLink: (\n    url: string,\n    name: string = '',\n    params: Object | null = null,\n    text?: string,\n  ) => {\n    if (url) {\n      return h(\n        Button,\n        {\n          type: 'link',\n          style: {\n            height: '24px',\n            padding: 0,\n          },\n          onClick: () => {\n            addTabPage(url, name, params);\n          },\n        },\n        () => text || '',\n      );\n    }\n    return '';\n  },\n  /**\n   * 渲染文本，将text与val 拼接到一起\n   * @param text 文本1\n   * @param val 文本2\n   * @returns 文本1 + 文本2\n   */\n  renderText: (text: string, val: string) => {\n    if (text) return `${text} ${val}`;\n    else return '';\n  },\n  /**\n   * 渲染标签\n   * @param text 标签文本\n   * @param color 标签颜色\n   * @returns 标签\n   */\n  renderTag: (text: string | number, color?: string) => {\n    if (color) return h(Tag, { color }, () => text);\n    else return h(Tag, {}, () => text);\n  },\n  /**\n   * 渲染流程状态\n   * @param status 状态\n   * @param statusText 状态文本\n   * @returns 标签\n   */\n  renderFlowStatus: (status: number, statusText: string) => {\n    return useRender.renderTag(statusText, statusColor[status]);\n  },\n  /**\n   * 渲染多标签\n   * @param texts 文本\n   * @returns 多标签\n   */\n  renderTags: (texts: string[]) => {\n    if (texts) {\n      return h('div', null, [\n        texts.map((text) => {\n          return h(Tag, null, () => text);\n        }),\n      ]);\n    }\n    return '';\n  },\n  /**\n   * 渲染日期\n   * @param text 日期\n   * @param format 格式化\n   * @returns 格式化后日期\n   */\n  renderDate: (text: string, format?: string) => {\n    if (!text) return '';\n\n    if (!format) return dayjs(text).format('YYYY-MM-DD HH:mm:ss');\n    else return dayjs(text).format(format);\n  },\n  /**\n   * 渲染字典\n   * @param text 字典值\n   * @param dictType 字典类型\n   * @returns 字典标签\n   */\n  renderDict: (text: string, dictType: string) => {\n    if (dictType) return h(DictTag, { type: dictType, value: text });\n\n    return '';\n  },\n  /**\n   * 渲染图标icon\n   * @param text icon\n   * @returns icon\n   */\n  renderIcon: (text: string) => {\n    if (text) return h(Icon, { icon: text });\n  },\n  /**\n   * 使用JsonPreview组件  方便预览JSON\n   * @param json json字符串/obj\n   * @returns 能转为json返回JsonPreview 否则返回自身\n   */\n  renderJsonPreview: (json: any) => {\n    if (!json) return '';\n    if (typeof json === 'object') return h(JsonPreview, { data: json });\n\n    if (typeof json === 'string') {\n      try {\n        const data = JSON.parse(json);\n        return h(JsonPreview, { data });\n      } catch (e) {\n        return json;\n      }\n    }\n  },\n};\n"],"names":["_resolveComponent","_ctx","_openBlock","_createElementBlock","_normalizeClass","_normalizeStyle","_createBlock","_component_Badge","_withCtx","_createElementVNode","_hoisted_1","_createVNode","_component_PreviewGroup","_Fragment","_renderList","img","index","_component_AImage","statusColor","useRender","text","isArray","h","TableImg","isString","url","Button","name","params","addTabPage","val","color","Tag","status","statusText","texts","format","dayjs","dictType","DictTag","Icon","json","JsonPreview","data","e"],"mappings":"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"}