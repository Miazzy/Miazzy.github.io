{"version":3,"file":"monitorInfo-0546f87d.js","sources":["../../src/views/monitor/smartdevice/monitorInfo/monitorInfo.vue"],"sourcesContent":["<template>\n  <div class=\"satellite-map\">\n    <div id=\"map-monitor-container\" class=\"map-container\"></div>\n    <div class=\"map-mode-toggle-box\">\n      <a-radio-group v-model:value=\"mapMode\" @change=\"handleMapModeChange\">\n        <a-radio-button value=\"BMAP_NORMAL_MAP\">\n          <i class=\"iconfont btn-icon icon-pingmianditu\"></i>平面\n        </a-radio-button>\n        <a-radio-button value=\"BMAP_EARTH_MAP\">\n          <i class=\"iconfont btn-icon icon-weixingditu\"></i>卫星\n        </a-radio-button>\n      </a-radio-group>\n    </div>\n    <div class=\"device-data-panel\">\n      <a-tabs v-model:activeKey=\"activeKey\" @change=\"handleTabChange\">\n        <a-tab-pane key=\"1\" tab=\"基本信息\">\n          <BasicInfo\n            :infoData=\"infoData\"\n            @location=\"handleLocation\"\n            @view-video=\"handleViewVideo\"\n          />\n        </a-tab-pane>\n        <a-tab-pane key=\"2\" tab=\"轨迹回放\">\n          <TrackReplay\n            :infoData=\"infoData\"\n            :disabledBtn=\"disabledBtn\"\n            @search=\"handleSearch\"\n            @replay=\"handleReplay\"\n            @pause=\"handlePause\"\n            @go-on=\"handleGoOn\"\n            @end=\"handleEnd\"\n            @change-date=\"handleChangeDate\"\n            @change-time=\"handleChangeTime\"\n          />\n        </a-tab-pane>\n        <a-tab-pane v-if=\"infoData.type === 'ii'\" key=\"3\" tab=\"历史视频\">\n          <HistoryVideo\n            :inspectionInstrumentId=\"infoData.inspectionInstrumentId\"\n            @row-click=\"handleRowClick\"\n          />\n        </a-tab-pane>\n      </a-tabs>\n    </div>\n    <div class=\"card-box\">\n      <!-- 实时视频 -->\n      <div v-if=\"isShowVideo\" class=\"video-box\">\n        <Mcs8Video :devId=\"infoData.deviceCode\" @close=\"closeVideo\" />\n      </div>\n      <!-- 历史视频 -->\n      <div v-if=\"isShowHistoryVideo\" class=\"video-box\">\n        <a-button class=\"close-btn\" :icon=\"h(CloseOutlined)\" ghost @click=\"closeHistoryVideo\" />\n        <video\n          id=\"history-video-self\"\n          class=\"video-self\"\n          controls\n          :src=\"videoSrc\"\n          autoplay\n          muted\n          crossOrigin=\"anonymous\"\n        >\n        </video>\n      </div>\n      <!-- 历史图片 -->\n      <div v-if=\"isShowHistoryImage\" class=\"video-box\">\n        <a-button class=\"close-btn\" :icon=\"h(CloseOutlined)\" ghost @click=\"closeHistoryImage\" />\n        <img :src=\"imageSrc\" loading=\"lazy\" class=\"device-img video-self\" />\n      </div>\n    </div>\n  </div>\n</template>\n<script lang=\"ts\" setup>\n  import { onMounted, ref, reactive, h } from 'vue';\n  import BasicInfo from './basicInfo.vue';\n  import TrackReplay from './trackReplay.vue';\n  import HistoryVideo from './historyVideo.vue';\n  import Mcs8Video from '../components/Mcs8Video.vue';\n  import { urlToPath } from '/@/utils/route';\n  import { getDrGpsList, getEwcGpsList, getIiGpsList } from './data';\n  import dayjs from 'dayjs';\n  import { useMessage } from '@/hooks/web/useMessage';\n  import { useAppStore } from '/@/store/modules/app';\n  import { CloseOutlined } from '@ant-design/icons-vue';\n\n  const appStore = useAppStore();\n  const message = useMessage();\n  const mapObject = ref();\n  const trackAni = ref();\n  const { params: routeQuery } = urlToPath();\n  const infoData = ref({ ...routeQuery });\n  const activeKey = ref('1');\n  const searchInfo = reactive({\n    locDate: dayjs().format('YYYY-MM-DD'),\n    startLocDate: '',\n    endLocDate: '',\n  });\n  const disabledBtn = reactive({ replay: true, pause: true, goOn: true, end: true });\n  // 轨迹动画持续时长ms\n  const trackDuration = ref<number>(60000);\n  const mapModes = {\n    BMAP_NORMAL_MAP,\n    BMAP_EARTH_MAP,\n  };\n  const mapMode = ref(infoData.value.mapMode);\n  const isShowVideo = ref<boolean>(false);\n  const isShowHistoryVideo = ref<boolean>(false);\n  const isShowHistoryImage = ref<boolean>(false);\n  const videoSrc = ref();\n  const imageSrc = ref();\n\n  // 初始化地图\n  const initMap = () => {\n    mapObject.value = new BMapGL.Map('map-monitor-container'); // 创建Map实例\n    mapObject.value.enableScrollWheelZoom(true); // 开启鼠标滚轮缩放\n    // 设置地图类型\n    setMapType();\n    mapObject.value.centerAndZoom(\n      new BMapGL.Point(infoData.value.longitude, infoData.value.latitude),\n      14,\n    ); // 初始化地图,设置中心点坐标和地图级别\n    let zoomCtrl = new BMapGL.ZoomControl(); // 添加缩放控件\n    mapObject.value.addControl(zoomCtrl);\n  };\n\n  // 设置地图类型\n  const setMapType = () => {\n    // 卫星地图模式\n    if (mapMode.value === 'BMAP_EARTH_MAP') {\n      mapObject.value.setMapType(mapModes.BMAP_EARTH_MAP);\n      return;\n    }\n    // 标准模式\n    if (mapMode.value === 'BMAP_NORMAL_MAP') {\n      mapObject.value.setMapType(mapModes.BMAP_NORMAL_MAP);\n      return;\n    }\n    // 设置地图类型 浅色模式为标准模式 深色模式为卫星地图模式\n    if (appStore.getDarkMode === 'dark') {\n      mapMode.value = 'BMAP_EARTH_MAP';\n      mapObject.value.setMapType(mapModes.BMAP_EARTH_MAP);\n    } else {\n      mapMode.value = 'BMAP_NORMAL_MAP';\n      mapObject.value.setMapType(mapModes.BMAP_NORMAL_MAP);\n    }\n  };\n\n  // 创建label\n  const createLabel = (pt, content) => {\n    let opts = {\n      position: pt, // 指定文本标注所在的地理位置\n      offset: new BMapGL.Size(10, -40), //设置文本偏移量\n    };\n    let label = new BMapGL.Label(content, opts); // 创建文本标注对象\n    label.setStyle({\n      //样式\n      width: 'auto !important',\n      color: 'white',\n      fontSize: '12px',\n      backgroundColor: 'rgba(0,0,0)',\n      border: 0,\n      padding: '10px',\n      borderRadius: '4px',\n    });\n    return label; // 返回label\n  };\n\n  // 创建mark\n  const createMark = (pt, markItem) => {\n    // 创建标注对象并添加到地图\n    let marker = new BMapGL.Marker(pt);\n    mapObject.value.addOverlay(marker);\n\n    // 添加title 标题信息\n    let label = createLabel(pt, markItem.stationShortName);\n    // 移入\n    marker.onmouseover = () => {\n      mapObject.value.addOverlay(label);\n    };\n    // 移除\n    marker.onmouseout = () => {\n      mapObject.value.removeOverlay(label);\n    };\n  };\n\n  // 创建开始标注对象并添加到地图\n  const createStartMarker = (lng, lat) => {\n    const point = new BMapGL.Point(lng, lat);\n    let myIcon = new BMapGL.Icon('/images/marker_start.png', new BMapGL.Size(30, 50), {\n      anchor: new BMapGL.Size(15, 50),\n    });\n    let startMarker = new BMapGL.Marker(point, { icon: myIcon });\n    mapObject.value.addOverlay(startMarker);\n  };\n\n  // 创建结束标注对象并添加到地图\n  const createEndMarker = (lng, lat) => {\n    const point = new BMapGL.Point(lng, lat);\n    let myIcon = new BMapGL.Icon('/images/marker_end.png', new BMapGL.Size(30, 50), {\n      anchor: new BMapGL.Size(15, 50),\n    });\n    // 创建标注对象并添加到地图\n    let endMarker = new BMapGL.Marker(point, { icon: myIcon });\n    mapObject.value.addOverlay(endMarker);\n  };\n\n  const drawTrace = async () => {\n    mapObject.value.clearOverlays();\n    const data = await getGpsList();\n    if (!data || data.length == 0) {\n      message.error('未查询到轨迹数据');\n      disabledBtn.replay = true;\n      return;\n    }\n    disabledBtn.replay = false;\n\n    createStartMarker(data[0].longitude, data[0].latitude);\n    createEndMarker(data[data.length - 1].longitude, data[data.length - 1].latitude);\n    //轨迹线\n    let paths = [] as any;\n    data.forEach((item) => {\n      const point = new BMapGL.Point(item.longitude, item.latitude);\n      paths.push(point);\n    });\n\n    //添加折线\n    const bluePolyline = new BMapGL.Polyline(paths, getTrackAnimationOptions('blue'));\n    mapObject.value.addOverlay(bluePolyline);\n\n    const greenPolyline = new BMapGL.Polyline(paths, getTrackAnimationOptions('green'));\n    trackAni.value = new BMapGLLib.TrackAnimation(mapObject.value, greenPolyline, {\n      overallView: true, // 动画完成后自动调整视野到总览\n      tilt: 30, // 轨迹播放的角度，默认为55\n      duration: trackDuration.value, // 动画持续时长，默认为10000，单位ms\n      delay: 0, // 动画开始的延迟，默认0，单位ms\n    });\n  };\n\n  const getTrackAnimationOptions = (color) => {\n    return {\n      enableEditing: false, //是否启用线编辑，默认为false\n      enableClicking: true, //是否响应点击事件，默认为true\n      icons: [],\n      strokeStyle: 'dashed',\n      strokeColor: color, //折线颜色\n      strokeWeight: 8, //折线的宽度，以像素为单位\n      strokeOpacity: 0.8, //折线的透明度，取值范围0 - 1\n      strokeTexture: {\n        url: `https://mapopen-pub-jsapigl.bj.bcebos.com/svgmodel/Icon_road_${color}_arrow.png`,\n        width: 16,\n        height: 64,\n      },\n    };\n  };\n\n  // 点击切换标签\n  const handleTabChange = async (item) => {\n    isShowVideo.value = false;\n    isShowHistoryVideo.value = false;\n    isShowHistoryImage.value = false;\n    if (item === '1') {\n      // 基本信息\n      initMark();\n    } else if (item === '2') {\n      // 轨迹回放\n      drawTrace();\n    }\n  };\n\n  const closeVideo = () => {\n    isShowVideo.value = false;\n  };\n\n  // 定位\n  const handleLocation = () => {\n    mapObject.value.centerAndZoom(\n      new BMapGL.Point(infoData.value.longitude, infoData.value.latitude),\n      14,\n    );\n  };\n\n  // 查看实时视频\n  const handleViewVideo = () => {\n    isShowVideo.value = true;\n  };\n\n  const initMark = () => {\n    mapObject.value.clearOverlays();\n    let pt = new BMapGL.Point(infoData.value.longitude, infoData.value.latitude);\n    createMark(pt, infoData.value);\n  };\n\n  const getGpsList = async () => {\n    if (infoData.value.type === 'ewc') {\n      return await getEwcGpsList({\n        eleWorkCardId: infoData.value.eleWorkCardId,\n        ...searchInfo,\n      });\n    }\n    if (infoData.value.type === 'dr') {\n      return await getDrGpsList({\n        drivingRecorderId: infoData.value.drivingRecorderId,\n        ...searchInfo,\n      });\n    }\n    if (infoData.value.type === 'ii') {\n      return await getIiGpsList({\n        inspectionInstrumentId: infoData.value.inspectionInstrumentId,\n        ...searchInfo,\n      });\n    }\n    return [];\n  };\n\n  // 查询\n  const handleSearch = async () => {\n    if (!searchInfo.locDate) {\n      message.error('请选择日期');\n      return;\n    }\n    drawTrace();\n  };\n\n  // 回放\n  const handleReplay = (speed) => {\n    let duration = trackDuration.value;\n    if (speed > 0) {\n      duration = duration / speed;\n    }\n    trackAni.value.setDuration(duration);\n    trackAni.value.start();\n\n    disabledBtn.pause = false;\n    disabledBtn.end = false;\n  };\n\n  // 暂停\n  const handlePause = () => {\n    trackAni.value.pause();\n\n    disabledBtn.goOn = false;\n  };\n\n  // 继续\n  const handleGoOn = () => {\n    trackAni.value.continue();\n  };\n\n  // 结束\n  const handleEnd = () => {\n    trackAni.value.cancel();\n\n    disabledBtn.pause = true;\n    disabledBtn.goOn = true;\n  };\n\n  const handleChangeDate = (value) => {\n    searchInfo.locDate = value;\n  };\n\n  const handleChangeTime = (values: Array<string>) => {\n    searchInfo.startLocDate = dayjs(values[0]).format('HH:mm');\n    searchInfo.endLocDate = dayjs(values[1]).format('HH:mm');\n  };\n\n  const handleMapModeChange = (e) => {\n    mapObject.value.setMapType(mapModes[e.target.value]);\n  };\n\n  const handleRowClick = (record) => {\n    if (record.fileType === 'video') {\n      isShowHistoryVideo.value = true;\n      videoSrc.value = '/zfy-api/files' + record.filePath;\n    } else if (record.fileType === 'image') {\n      isShowHistoryImage.value = true;\n      imageSrc.value = '/zfy-api/files' + record.filePath;\n    }\n  };\n\n  // 关闭历史视频\n  const closeHistoryVideo = () => {\n    isShowHistoryVideo.value = false;\n  };\n\n  // 关闭历史图片\n  const closeHistoryImage = () => {\n    isShowHistoryImage.value = false;\n  };\n\n  onMounted(() => {\n    initMap();\n    initMark();\n  });\n</script>\n<style lang=\"less\">\n  [data-theme='dark'] .theme1 {\n    .device-data-panel {\n      background-color: #0a244a;\n    }\n\n    .map-mode-toggle-box {\n      background: #0a244a;\n      box-shadow: 0 0 5px 0 rgb(12 6 14 / 10%);\n\n      .ant-radio-button-wrapper {\n        border: none;\n        color: rgb(255 255 255 / 30%);\n      }\n\n      .ant-radio-button-wrapper:not(:first-child)::before {\n        background-color: rgb(255 255 255 / 16%);\n      }\n    }\n  }\n\n  .theme3 {\n    .device-data-panel {\n      background-color: #fff;\n    }\n\n    .map-mode-toggle-box {\n      background: #fff;\n      box-shadow: 0 0 5px 0 rgb(12 6 14 / 10%);\n\n      .ant-radio-button-wrapper {\n        border: none;\n        color: #666;\n      }\n\n      .ant-radio-button-wrapper:not(:first-child)::before {\n        background-color: #d9d9d9;\n      }\n    }\n  }\n</style>\n<style lang=\"less\" scoped>\n  .satellite-map {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n\n    .map-container {\n      width: 100%;\n      height: 100%;\n    }\n\n    // /////////////////视频////////////////////\n    :deep(.card-box) {\n      display: flex;\n      position: absolute;\n      z-index: 12;\n      top: 60px;\n      right: 10px;\n      left: 20px;\n      background-color: transparent;\n\n      .tab-box {\n        width: 398px;\n      }\n\n      .panel-box {\n        height: 800px;\n        border-radius: 4px;\n        background-color: rgb(34 114 182 / 77%);\n        box-shadow: 1px 2px 6px 0 rgb(0 0 0 / 20%);\n      }\n\n      .panel-inner-box {\n        padding: 0 15px;\n        border-radius: 4px 4px 0 0;\n        background-color: rgb(0 0 0 / 55%);\n        box-shadow: 1px 2px 6px 0 rgb(0 0 0 / 20%);\n\n        .info-item-box {\n          display: flex;\n          border-bottom: 1px solid rgb(220 223 230 / 24%);\n\n          &:last-child {\n            border-bottom: none;\n          }\n\n          .info-left {\n            width: 7em;\n            margin-right: 10px;\n            text-align: right;\n          }\n\n          .info-text {\n            padding: 15px 0;\n            color: #fff;\n            font-size: 14px;\n          }\n\n          .info-right {\n            display: flex;\n            flex: 1;\n            align-items: center;\n          }\n\n          .blue-btn.el-button {\n            padding: 5px 9px;\n            border-radius: 2px;\n            border-color: #338dcf;\n            background-color: #338dcf;\n            color: #fff;\n\n            .iconfont {\n              margin-right: 4px;\n              font-size: 12px;\n            }\n\n            &.is-disabled {\n              border-color: rgb(51 141 207 / 50%);\n              background-color: rgb(51 141 207 / 50%);\n            }\n          }\n\n          .blue-btn.el-button + .blue-btn.el-button {\n            margin-left: 2px;\n          }\n\n          .info-text + .blue-btn {\n            margin-left: 5px;\n          }\n\n          .red-text {\n            color: #f56c6c;\n            font-size: 14px;\n          }\n\n          .date-picker {\n            .el-input__inner {\n              padding-left: 0;\n              border: none;\n              background-color: transparent;\n              color: #fff;\n            }\n\n            .el-input__prefix {\n              left: 72px;\n              color: #2d9dfe;\n              font-size: 16px;\n            }\n          }\n\n          .date-time-picker {\n            .el-input__prefix {\n              left: 112px;\n            }\n          }\n\n          .slider-box {\n            width: 100%;\n            padding: 10px 0;\n\n            .el-slider__runway {\n              background-color: #dadada;\n            }\n\n            .el-slider__marks-text {\n              color: #fff;\n              font-size: 12px;\n\n              &:first-child {\n                transform: translateX(0);\n              }\n\n              &:last-child {\n                transform: translateX(-100%);\n              }\n            }\n\n            .el-slider__marks-stop {\n              background-color: transparent;\n            }\n\n            .el-slider__button {\n              width: 12px;\n              height: 12px;\n              border: none;\n              background: linear-gradient(180deg, #07a7dc, #2169e5);\n            }\n\n            .el-slider__bar {\n              background: linear-gradient(90deg, #2d9cfd, #59aff9);\n            }\n          }\n\n          .big-btn {\n            width: 100%;\n\n            & > span {\n              font-size: 14px;\n            }\n\n            &.el-button {\n              padding: 9px 0;\n\n              .iconfont {\n                margin-right: 7px;\n                font-size: 14px;\n              }\n            }\n          }\n\n          .top-btn {\n            margin-bottom: 22px;\n          }\n        }\n\n        .no-border-bottom {\n          border-bottom: none;\n        }\n      }\n\n      .playback {\n        .info-item-box {\n          .info-left {\n            width: 6em;\n          }\n        }\n      }\n\n      .history {\n        padding-bottom: 15px;\n\n        .info-item-box {\n          .info-left {\n            width: 5em;\n          }\n\n          .info-right {\n            flex-wrap: wrap;\n            padding: 4px 0;\n\n            .slider-box {\n              padding: 0;\n            }\n          }\n\n          .btn-group {\n            padding: 8px 0;\n          }\n\n          .slider-box-outter {\n            padding: 10px 0;\n          }\n        }\n      }\n\n      .open-shrink-btn-box {\n        top: 426px;\n        left: 398px;\n\n        .open-shrink {\n          width: 15px;\n          margin-top: 0;\n          padding: 0;\n        }\n\n        &.shrink-panel {\n          left: 0;\n        }\n      }\n\n      .table-box {\n        background-color: #fff;\n\n        .el-table thead th {\n          background-color: #eef1f6;\n        }\n\n        .el-table__row:hover {\n          color: #3a96e0;\n        }\n\n        .el-pagination .el-pager li {\n          min-width: 28px;\n          color: #444;\n\n          &:not(.disabled).active {\n            background-color: #3a96e0;\n            color: #fffefe;\n          }\n\n          &:hover {\n            color: #3a96e0;\n          }\n        }\n\n        .el-table td,\n        .el-table th {\n          padding: 8px 0;\n        }\n      }\n    }\n\n    .video-box {\n      position: relative;\n      width: 100%;\n      height: 750px;\n      margin-right: 10px;\n      margin-left: 420px;\n      border-radius: 6px;\n      // background-color: #338dcf;\n\n      .close-btn {\n        position: absolute;\n        z-index: 1;\n        top: 10px;\n        right: 10px;\n        color: #fff;\n        font-size: 20px;\n        cursor: pointer;\n      }\n\n      .video-self {\n        width: 100%;\n        height: 100%;\n        border-radius: 6px;\n        object-fit: fill;\n      }\n      // /////////////////视频////////////////////\n    }\n  }\n\n  .device-data-panel {\n    position: absolute;\n    z-index: 9;\n    top: 10px;\n    left: 10px;\n    width: 420px;\n    height: calc(100vh - 20px);\n\n    :deep(.ant-tabs-top > .ant-tabs-nav::before) {\n      border-bottom: none;\n    }\n  }\n\n  .map-mode-toggle-box {\n    position: absolute;\n    z-index: 9;\n    top: 10px;\n    right: 13px;\n\n    .btn-icon {\n      margin-right: 4px;\n      font-size: 14px;\n    }\n\n    :deep(.ant-radio-button-wrapper) {\n      box-shadow: none !important;\n      line-height: 32px;\n\n      &:hover {\n        color: #1890ff;\n      }\n    }\n\n    :deep(.ant-radio-button-wrapper:not(:first-child)::before) {\n      z-index: 1;\n      top: 6px;\n      height: 18px;\n    }\n\n    :deep(.ant-radio-button-wrapper-checked:not(.ant-radio-button-wrapper-disabled)) {\n      color: #1890ff;\n    }\n  }\n</style>\n"],"names":["appStore","useAppStore","message","useMessage","mapObject","ref","trackAni","routeQuery","urlToPath","infoData","__spreadValues","activeKey","searchInfo","reactive","dayjs","disabledBtn","trackDuration","mapModes","mapMode","isShowVideo","isShowHistoryVideo","isShowHistoryImage","videoSrc","imageSrc","initMap","setMapType","zoomCtrl","createLabel","pt","content","opts","label","createMark","markItem","marker","createStartMarker","lng","lat","point","myIcon","startMarker","createEndMarker","endMarker","drawTrace","__async","data","getGpsList","paths","item","bluePolyline","getTrackAnimationOptions","greenPolyline","color","handleTabChange","initMark","closeVideo","handleLocation","handleViewVideo","getEwcGpsList","getDrGpsList","getIiGpsList","handleSearch","handleReplay","speed","duration","handlePause","handleGoOn","handleEnd","handleChangeDate","value","handleChangeTime","values","handleMapModeChange","handleRowClick","record","closeHistoryVideo","closeHistoryImage","onMounted"],"mappings":"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"}