import{d as O,k as B,e as V,w as I,al as P,Z as s,_ as a,a9 as D,B as w,$ as o,ac as i,j as $,a6 as r,ad as N,R as m,F as z,g as q,f as h,aa as g,E as v,q as A}from"./vue-71d1abb3.js";import{bA as F,aT as j,bv as y,bz as T,a7 as H,_ as R}from"./index.js";const U={key:0,class:"modal-mask"},W=["target"],Z={class:"modal-header"},G=["src"],J={key:0,class:"modal-footer",style:{position:"relative"}},K={class:"footer-button",style:{}},Q={key:0,class:"modal-mask"},ee=["target"],te={class:"modal-header"},oe=["src"],se={key:0,class:"modal-footer",style:{position:"relative"}},ae={class:"footer-button",style:{}},le=O({name:"Dialog",__name:"Dialog",props:{visible:Boolean,title:String,smode:{type:String,default:"simple"},tweight:{type:Number,default:400},tsize:{type:String,default:"16"},width:{type:[Number,String],default:800},height:{type:[Number,String],default:600},pheight:{type:Number,default:121},showBtm:{type:Boolean,default:!0},mode:{type:String,default:""},url:{type:String,default:""},target:{type:String,default:"body"},overflowY:{type:String,default:"hidden"},overflowX:{type:String,default:"hidden"}},emits:["update:visible","cancel","confirm","ok","close","open"],setup(t,{expose:_,emit:l}){const e=t;F();const E=B(),c=document.querySelector("div#app"),u=()=>{l("update:visible",!1),l("close"),y()},X=()=>{l("update:visible",!0),l("open"),T()},b=()=>{l("cancel"),e.smode!=="simple"||(l("update:visible",!1),y())},k=()=>{l("confirm"),l("ok"),e.smode=="simple"&&(l("update:visible",!1),y())},S=V(()=>e.height-e.pheight),x=function(n){n.preventDefault()},p=B({x:0,y:0}),Y=()=>{p.value={x:window.pageXOffset||document.documentElement.scrollLeft,y:window.pageYOffset||document.documentElement.scrollTop},window.scrollTo(0,0)},L=()=>{window.scrollTo(p.value.x,p.value.y)},C=()=>{e.target==="body"&&(Y(),c.addEventListener("mousewheel",x,{passive:!1}),A(()=>{c.classList.add("modal-open"),T()}))},M=()=>{c.removeEventListener("mousewheel",x,{passive:!1}),c.classList.remove("modal-open"),y(),L()};return I(()=>e.visible,n=>{n?C():M()},{deep:!0}),_({closeModal:u,openModal:X}),j(()=>{E.value=q(),H.getInstance().listen("iframe-dialog-close",()=>{u(),M()}),e.target==="body"&&e.visible&&C()}),(n,d)=>{const f=P("a-button");return s(),a(z,null,[["body","#app"].includes(e.target)?(s(),D($,{key:0,to:e.target},[t.visible?(s(),a("div",{key:0,class:"modal-mask",onMousewheel:d[1]||(d[1]=w(()=>{},["prevent"]))},[o("div",{class:"modal-mask-container",onMousewheel:d[0]||(d[0]=w(()=>{},["prevent"]))},null,32)],32)):i("",!0)],8,["to"])):i("",!0),["body","#app"].includes(e.target)?(s(),D($,{key:1,to:e.target},[t.visible?(s(),a("div",U,[["body","#app"].includes(e.target)?(s(),a("div",{key:0,class:"modal-mask-container",onMousewheel:d[2]||(d[2]=w(()=>{},["prevent"]))},null,32)):i("",!0),o("div",{class:"modal-container",target:e.target,style:r({width:typeof t.width=="number"?t.width+"px":t.width,height:typeof t.height=="number"?t.height+"px":t.height})},[o("div",Z,[o("span",{style:r(`font-size: ${e.tsize}px; font-weight: ${e.tweight};`)},N(t.title),5),o("button",{class:"modal-close",onClick:u},"×")]),o("div",{class:"modal-body",style:r({height:S.value+"px",overflowY:t.overflowY,overflowX:t.overflowX})},[e.mode!=="iframe"?m(n.$slots,"default",{key:0},void 0,!0):(s(),a("iframe",{key:1,src:e.url,frameborder:"0",width:"100%",height:"100%"},null,8,G))],4),e.showBtm?(s(),a("div",J,[o("div",K,[m(n.$slots,"footer",{},()=>[h(f,{onClick:b},{default:g(()=>[v("取消")]),_:1}),h(f,{type:"primary",onClick:k},{default:g(()=>[v("确定")]),_:1})],!0)])])):i("",!0)],12,W)])):i("",!0)],8,["to"])):i("",!0),["body","#app"].includes(e.target)?i("",!0):(s(),a(z,{key:2},[t.visible?(s(),a("div",Q,[o("div",{class:"modal-container",target:e.target,style:r({width:typeof t.width=="number"?t.width+"px":t.width,height:typeof t.height=="number"?t.height+"px":t.height})},[o("div",te,[o("span",{style:r(`font-size: ${e.tsize}px; font-weight: ${e.tweight};`)},N(t.title),5),o("button",{class:"modal-close",onClick:u},"×")]),o("div",{class:"modal-body",style:r({height:S.value+"px",overflowY:t.overflowY,overflowX:t.overflowX})},[e.mode!=="iframe"?m(n.$slots,"default",{key:0},void 0,!0):(s(),a("iframe",{key:1,src:e.url,frameborder:"0",width:"100%",height:"100%"},null,8,oe))],4),e.showBtm?(s(),a("div",se,[o("div",ae,[m(n.$slots,"footer",{},()=>[h(f,{onClick:b},{default:g(()=>[v("取消")]),_:1}),h(f,{type:"primary",onClick:k},{default:g(()=>[v("确定")]),_:1})],!0)])])):i("",!0)],12,ee)])):i("",!0)],64))],64)}}});const de=R(le,[["__scopeId","data-v-2dab2f93"]]);export{de as D};
//# sourceMappingURL=Dialog-0a006d82.js.map
