var D=(p,m,o)=>new Promise((n,i)=>{var v=r=>{try{u(o.next(r))}catch(c){i(c)}},a=r=>{try{u(o.throw(r))}catch(c){i(c)}},u=r=>r.done?n(r.value):Promise.resolve(r.value).then(v,a);u((o=o.apply(p,m)).next())});import{bm as T,aC as E,K as C}from"./antd-15ac76ed.js";import{ay as y,_ as F}from"./index.js";import{_ as N}from"./EchartLineChart.vue_vue_type_style_index_0_lang-c85cdf3b.js";import{R as M}from"./monitorApi-44e70004.js";import{d as $,r as B,k as h,w as k,o as L,Z as R,_ as A,$ as d,f as x,u as b}from"./vue-71d1abb3.js";import"./install-58e0bd81.js";import"./helper-474c7a04.js";import"./api-32c7505d.js";const V={class:"data-comparison"},H={class:"header-box"},I={class:"header-left"},O={class:"date-picker-box"},S={class:"select-box"},U={class:"content-box"},W={class:"chart-box"},Z={style:{"margin-top":"20px",transform:"scale(0.85)","transform-origin":"0 0"}},j=$({__name:"dataComparison",props:{indexType:{type:Array,default:[]},esn:{type:String,default:""},echartWidth:{type:Number,default:1200},echartHeight:{type:Number,default:712}},setup(p,{expose:m}){const o=p,n=B({barData:[],lineData:[],categories:[],units:[],seriesName:[],colors:[["#078C5D","#68E4B8"],["#E59837","#FAE895"],["#078C5D","#68E4B8"]]});h([]);const i=h(),v=e=>{console.log("选择日期范围",e),_()},a=h([]),u=h([]),r=e=>{console.log(`selected ${e}`),a.value=[],a.value.push(e),_()},c=()=>D(this,null,function*(){let e=[];o.indexType.forEach(t=>{a.value.length==0&&a.value.push(t.addressField),e.push({label:t.addressDesc,value:t.addressField})}),u.value=e;let s=y(new Date);i.value=[C(s,"YYYY-MM-DD"),C(s,"YYYY-MM-DD")],_()}),_=()=>D(this,null,function*(){let e={},s=[];if(s.push(o.esn),a.value.length===0)return;e.queryFieldList=a.value,e.startDate=y(i.value[0]),e.endDate=y(i.value[1]),e.esns=s,e.esn=o.esn,e.dataType=1,e.isCrossTian=!0,e.sortField="timestamps",e.sortType="asc";let t=yield M(e);if(t.hisData.length>0){let l=[];t.hisData.forEach(f=>{l.push(f.dataList[0])}),n.lineData=l,n.categories=t.hisData[0].timeList,n.units=t.unitList,n.seriesName=t.seriesNames}}),Y=e=>{const s=n.units,t=n.seriesName;let l="";return e!=null&&e.length&&(l=`${e[0].name}<br />`,e.forEach((f,g)=>{l=l+`${t[g]}：${f.value} ${s[g]}`,g<e.length-1&&(l=l+"<br />")})),l},w=()=>{a.value=[]};return k(()=>o.indexType,e=>{c()}),L(()=>{a.value=[],c()}),m({loadBaseInfo:c,clearTarget:w}),(e,s)=>(R(),A("div",V,[d("div",H,[d("div",I,[d("div",O,[x(b(T),{value:i.value,"onUpdate:value":s[0]||(s[0]=t=>i.value=t),valueFormat:"YYYY-MM-DD",onChange:v},null,8,["value"])]),d("div",S,[x(b(E),{value:a.value,"onUpdate:value":s[1]||(s[1]=t=>a.value=t),style:{"min-width":"206px"},placeholder:"选择指标",options:u.value,"max-tag-count":2,showArrow:"",onChange:r},null,8,["value","options"])])])]),d("div",U,[d("div",W,[d("div",Z,[x(N,{data:n,width:o.echartWidth,height:o.echartHeight,smooth:!0,disableDataZoom:!1,customTooltipFormatter:Y},null,8,["data","width","height"])])])])]))}});const te=F(j,[["__scopeId","data-v-a027ac03"]]);export{te as default};
//# sourceMappingURL=dataComparison-458260e7.js.map
