{"version":3,"file":"TopContent-3808901f.js","sources":["../../src/components/Framework/Chart/DataBoardItem2.vue","../../src/views/da/cockpit/property/TopContent.vue"],"sourcesContent":["<template>\n  <div class=\"data-board-item\">\n    <div>\n      <div class=\"title-box\">\n        <div class=\"icon-box\">\n          <img class=\"icon-img\" :src=\"getIcon(icon)\">\n        </div>\n        <div class=\"title-value-box\">\n          <div class=\"title-text\">{{title}}</div>\n          <div class=\"value-text\"><span style=\"cursor: pointer;\" @click=\"handleClickValue\">{{value}}</span></div>\n          <div v-if=\"tRatio||tRatio===0\" class=\"percent-data-box\">\n            <div v-if=\"tRatio||tRatio===0\" class=\"percent-item\">\n              <span class=\"p-title\">{{tbTitle}}</span>\n              <span class=\"p-value\" :class=\"handleTextClass(tRatio)\">{{tRatio}}</span>\n            </div>\n            <div v-if=\"hRatio||hRatio===0\" class=\"percent-item\">\n              <span class=\"p-title\">{{hbTitle}}</span>\n              <span class=\"p-value\" :class=\"handleTextClass(hRatio)\">{{hRatio}}</span>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n  </div>\n</template>\n\n<script lang=\"ts\" setup>\n  import { onMounted, ref, watch } from 'vue';\n\n  // 传入参数\n  const props = defineProps({\n    title: { type: String, default: '今日发电量(万kWh)' },\n    value: { type: [Number, String], default: 0 },\n    tRatio: { type: [Number, String], default: '' },\n    hRatio: { type: [Number, String], default: '' },\n    icon: String,\n    tbTitle: { type: String, default: '同比新增' },\n    hbTitle: { type: String, default: '环比(%)' }\n  });\n\n  // 图标\n  const iconUrls = {\n    dayGen: 'icon_day_gen.png', // 今日发电量\n    earnings: 'icon_earnings.png', // 今日收益\n    dayOnline: 'icon_day_online.png', // 累计上网电量\n    warningCount: 'icon_warning_count.png', // 天气预警\n    realGen: 'icon_real_gen.png', // 实发电量\n    online: 'icon_online.png', // 上网电量\n    settlement: 'icon_settlement.png', // 结算电量\n    loss: 'icon_loss.png', // 结算电量\n    lossRate: 'icon_loss_rate.png', // 损失率\n    facRate: 'icon_fac_rate.png', // 综合厂用电率\n    sysRate: 'icon_sys_rate.png', // 系统效率\n    comRate: 'icon_com_rate.png', // 计划完成\n    runningDays: 'icon_running_days.png', // 安全运行天数\n    safeCheckCount: 'icon_safe_check_count.png', // 安全检查\n    hiddenCount: 'icon_hidden_count.png', // 安全隐患\n    trainingCount: 'icon_training_count.png', // 安全培训\n    signRage: 'icon_sign_rage.png', // 安全责任书签订\n    toolsCount: 'icon_tools_count.png', // 安全工器具\n    inspectionCount: 'icon_inspection_count.png', // 巡检统计\n    workOrderCount: 'icon_work_order_count.png', // 工单统计\n    netIncome: 'icon_net_income.png', // 细则统计\n    twoTicketCount: 'icon_two_ticket_count.png', // 两票统计\n    defectCount: 'icon_defect_count.png', // 缺陷统计\n    hiddenStatistics: 'icon_hidden_statistics.png', // 隐患统计\n    stationTotal: 'icon_station_total.png', // 电站规模\n    connectCapacity: 'icon_connect_capacity.png', // 并网容量\n    fullTotal: 'icon_full_total.png', // 全容量并网电站\n    equipmentTotal: 'icon_equipment_total.png', // 设备统计\n    transQty: 'icon_trans_qty.png', // 备品备件\n    orderTotal: 'icon_order_total.png', // 出入库单\n    task: 'icon_task.png', // 任务统计\n    ddzRate: 'icon_ddz_rate.png', // 调度持证率\n    trainingTotal: 'icon_training_total.png', // 培训统计\n    vehicleCount: 'icon_vehicle_count.png', // 车辆统计\n    eval: 'icon_eval.png', // 考核评价\n    contractTotal: 'icon_contract_total.png', // 合同统计\n  };\n  const getIcon = (icon: string) => {\n    return new URL(`../../../assets/images/da/${iconUrls[icon]}`, import.meta.url).href;\n  };\n\n  // 根据数据内容判断class\n  const handleTextClass = (text) => {\n    if (typeof text == 'string') {\n      return text.startsWith('-') ? 'arrow-negative' : 'arrow-positive';\n    } else if (typeof text == 'number') {\n      return text < 0 ? 'arrow-negative' : 'arrow-positive';\n    }\n    return 'arrow-positive';\n  };\n\n  // 根据数据内容判断是否添加%符号\n  // const handleTextPercent = (text) => {\n  //   if (typeof text == 'string') {\n  //     return text;\n  //   } else if (typeof text == 'number') {\n  //     return String(text) + '%';\n  //   }\n  //   return text;\n  // };\n  const emits = defineEmits(['clickValue']);\n  const handleClickValue = ()=>{\n    emits('clickValue');\n  }\n\n  onMounted(() => {});\n</script>\n\n<style lang=\"less\" scoped>\n  .data-board-item {\n    display: flex;\n    align-items: center;\n    width: 2.24rem;\n    height: 1.1rem;\n    background-color: rgba(24, 144, 255, 0.1);\n    border-radius: 0.04rem;\n    border: 1px solid rgba(24, 144, 255, 0.4);\n    padding: 0 0.15rem;\n    .title-box {\n      display: flex;\n      align-items: center;\n      .icon-box {\n        width: 0.56rem;\n        height: 0.62rem;\n        background: url('../../../assets/images/da/icon_bg.png') no-repeat center bottom/contain;\n        margin-right: 0.04rem;\n        text-align: center;\n        .icon-img {\n          width: 0.46rem;\n        }\n      }\n      .title-text {\n        font-size: 0.14rem;\n        line-height: 1;\n        color: #fff;\n        margin-bottom: 0.1rem;\n      }\n      .value-text {\n        font-size: 0.22rem;\n        line-height: 1;\n        color: #1890ff;\n        font-weight: 600;\n      }\n    }\n    .percent-data-box {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      line-height: 1;\n      margin-top: 0.04rem;\n      .percent-item {\n        display: flex;\n        align-items: flex-end;\n      }\n      .p-value {\n        font-size: 0.14rem;\n        margin-right: 0.04rem;\n        &::before {\n          margin-right: 0.04rem;\n          transform: scale(0.7);\n          display: inline-block;\n        }\n      }\n      .p-title {\n        font-size: 0.12rem;\n        color: rgba(255, 255, 255, 0.6);\n        margin-right: 0.12rem;\n      }\n    }\n  }\n\n  .arrow-positive {\n    color: #e05b5b;\n  }\n\n  .arrow-negative {\n    color: #00ba24;\n  }\n</style>\n","<template>\n  <div class=\"top-content\" :key=\"instanceKey\">\n    <div class=\"data-board-box-inner\">\n      <DataBoardItem\n        title=\"电站规模(座)\"\n        icon=\"stationTotal\"\n        :value=\"topIndexData.stationTotal\"\n        :tRatio=\"topIndexData.tbStationTotal != null ? topIndexData.tbStationTotal + '座' : ''\"\n        @clickValue=\"stationTotalHandle\"\n      />\n      <DataBoardItem\n        title=\"并网容量(MW)\"\n        icon=\"connectCapacity\"\n        :value=\"topIndexData.connectCapacity\"\n        :tRatio=\"topIndexData.tbConnectCapacity != null ? topIndexData.tbConnectCapacity + 'MW' : ''\"\n        @clickValue=\"stationTotalHandle\"\n      />\n      <DataBoardItem\n        title=\"全容量并网电站(座)\"\n        icon=\"fullTotal\"\n        :value=\"topIndexData.fullTotal\"\n        :tRatio=\"topIndexData.tbFullTotal != null ? topIndexData.tbFullTotal + '座' : ''\"\n        @clickValue=\"stationFullHandle\"\n      />\n      <DataBoardItem title=\"设备统计\" icon=\"equipmentTotal\" :value=\"topIndexData.equipmentTotal\" />\n      <DataBoardItem\n        title=\"备品备件\"\n        icon=\"transQty\"\n        :value=\"topIndexData.transQty\"\n        @clickValue=\"stationWarehouseHandle\"\n      />\n      <DataBoardItem title=\"出入库单(张)\" icon=\"orderTotal\" :value=\"topIndexData.orderTotal\" />\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\" setup>\n  import { reactive, UnwrapRef, watch, ref } from 'vue';\n  import DataBoardItem from '/@/components/Framework/Chart/DataBoardItem2.vue';\n  import { getTopIndexData } from './data';\n  import { assign } from 'lodash-es';\n  import { handleRouteChange } from '../../utils';\n  import { buildUUID } from '@/utils/uuid';\n\n  const topSearchInfo: UnwrapRef<any> = reactive({});\n  const topIndexData = reactive<any>({});\n\n  interface Props {\n    searchInfoByTime?: {};\n  }\n  const props = withDefaults(defineProps<Props>(), {});\n  const instanceKey = ref(buildUUID());\n\n  watch(\n    () => props.searchInfoByTime,\n    (value) => {\n      assign(topSearchInfo, value);\n      queryTopIndexData();\n    },\n  );\n  //=============================== 指标数据=============================================\n  const queryTopIndexData = async () => {\n    let data = await getTopIndexData(topSearchInfo);\n    if (data.result) {\n      assign(topIndexData, data.result);\n    }\n  };\n\n  //=============================== 数据穿透=============================================\n  //电站规模/并网容量\n  function stationTotalHandle() {\n    handleRouteChange('/bi/grid/capacity/statistics', {});\n  }\n  //全并网容量\n  function stationFullHandle() {\n    handleRouteChange('/bi/grid/capacity/statistics', { activeKey: 'detail' });\n  }\n  //备品备件\n  function stationWarehouseHandle() {\n    handleRouteChange('/bi/equipment/index', { warehouseType: 'spare' });\n  }\n\n  // 更新组件函数\n  const handleUpdate = () => {\n    instanceKey.value = buildUUID();\n  };\n\n  defineExpose({\n    handleUpdate,\n  });\n</script>\n\n<style lang=\"less\" scoped>\n  .top-content {\n    flex: 11.32%;\n    height: 11.32%;\n\n    .data-board-box-inner {\n      display: flex;\n      justify-content: space-between;\n      height: 100%;\n\n      :deep(.data-board-item) {\n        width: 15.73vw;\n        height: 100%;\n        padding-left: 0.2rem;\n\n        .title-box {\n          .icon-box {\n            margin-right: 0.16rem;\n          }\n\n          .title-text {\n            margin-bottom: 0.05rem;\n          }\n        }\n\n        .percent-data-box {\n          margin-top: 0.05rem;\n        }\n      }\n    }\n  }\n</style>\n"],"names":["iconUrls","getIcon","icon","__vite_glob_0_0","__vite_glob_0_1","__vite_glob_0_2","__vite_glob_0_3","__vite_glob_0_4","__vite_glob_0_5","__vite_glob_0_6","__vite_glob_0_7","__vite_glob_0_8","__vite_glob_0_9","__vite_glob_0_10","__vite_glob_0_11","__vite_glob_0_12","__vite_glob_0_13","__vite_glob_0_14","__vite_glob_0_15","__vite_glob_0_16","__vite_glob_0_17","__vite_glob_0_18","__vite_glob_0_19","__vite_glob_0_20","__vite_glob_0_21","__vite_glob_0_22","__vite_glob_0_23","__vite_glob_0_24","__vite_glob_0_25","__vite_glob_0_26","__vite_glob_0_27","__vite_glob_0_28","__vite_glob_0_29","__vite_glob_0_30","__vite_glob_0_31","__vite_glob_0_32","__vite_glob_0_33","__vite_glob_0_34","__vite_glob_0_35","__vite_glob_0_36","__vite_glob_0_37","__vite_glob_0_38","__vite_glob_0_39","__vite_glob_0_40","__vite_glob_0_41","__vite_glob_0_42","__vite_glob_0_43","__vite_glob_0_44","__vite_glob_0_45","__vite_glob_0_46","__vite_glob_0_47","__vite_glob_0_48","__vite_glob_0_49","__vite_glob_0_50","__vite_glob_0_51","__vite_glob_0_52","__vite_glob_0_53","handleTextClass","text","handleClickValue","emits","onMounted","topSearchInfo","reactive","topIndexData","instanceKey","ref","buildUUID","watch","props","value","assign","queryTopIndexData","__async","data","getTopIndexData","stationTotalHandle","handleRouteChange","stationFullHandle","stationWarehouseHandle","__expose"],"mappings":"ojDA0CE,MAAMA,EAAW,CACf,OAAQ,mBACR,SAAU,oBACV,UAAW,sBACX,aAAc,yBACd,QAAS,oBACT,OAAQ,kBACR,WAAY,sBACZ,KAAM,gBACN,SAAU,qBACV,QAAS,oBACT,QAAS,oBACT,QAAS,oBACT,YAAa,wBACb,eAAgB,4BAChB,YAAa,wBACb,cAAe,0BACf,SAAU,qBACV,WAAY,uBACZ,gBAAiB,4BACjB,eAAgB,4BAChB,UAAW,sBACX,eAAgB,4BAChB,YAAa,wBACb,iBAAkB,6BAClB,aAAc,yBACd,gBAAiB,4BACjB,UAAW,sBACX,eAAgB,2BAChB,SAAU,qBACV,WAAY,uBACZ,KAAM,gBACN,QAAS,oBACT,cAAe,0BACf,aAAc,yBACd,KAAM,gBACN,cAAe,yBAAA,EAEXC,EAAWC,GACR,IAAA,IAAA,OAAA,OAAA,CAAA,0CAAAC,EAAA,wCAAAC,EAAA,8CAAAC,EAAA,sDAAAC,EAAA,oDAAAC,EAAA,6CAAAC,EAAA,gDAAAC,EAAA,8CAAAC,EAAA,kDAAAC,EAAA,8CAAAC,EAAA,qDAAAC,EAAA,0CAAAC,EAAA,8CAAAC,EAAA,gDAAAC,EAAA,kDAAAC,EAAA,uDAAAC,EAAA,sDAAAC,EAAA,0CAAAC,EAAA,+CAAAC,EAAA,gDAAAC,EAAA,4CAAAC,EAAA,iDAAAC,EAAA,8CAAAC,EAAA,kDAAAC,EAAA,sDAAAC,EAAA,gDAAAC,EAAA,+CAAAC,EAAA,mDAAAC,EAAA,8CAAAC,GAAA,0CAAAC,GAAA,iDAAAC,GAAA,oDAAAC,GAAA,oDAAAC,GAAA,+CAAAC,GAAA,sDAAAC,GAAA,mDAAAC,GAAA,mDAAAC,GAAA,sDAAAC,GAAA,gDAAAC,GAAA,qCAAAC,GAAA,gDAAAC,GAAA,8CAAAC,GAAA,+CAAAC,GAAA,6CAAAC,GAAA,sDAAAC,GAAA,sDAAAC,GAAA,sDAAAC,GAAA,6CAAAC,GAAA,6CAAAC,GAAA,6CAAAC,GAAA,6CAAAC,GAAA,6CAAAC,GAAA,yCAAAC,GAAA,uCAAAC,EAAA,CAAA,EAAA,6BAAAxD,EAAAE,CAAA,CAAA,EAAA,EAAA,KAAA,QAAA,EAAwE,KAI3EuD,EAAmBC,GACnB,OAAOA,GAAQ,SACVA,EAAK,WAAW,GAAG,EAAI,iBAAmB,iBACxC,OAAOA,GAAQ,UACjBA,EAAO,EAAI,iBAEb,iBAaHC,EAAmB,IAAI,CAC3BC,EAAM,YAAY,CAAA,EAGpB,OAAAC,GAAU,IAAM,CAAA,CAAE,iuBChEZC,EAAgCC,EAAS,CAAA,CAAE,EAC3CC,EAAeD,EAAc,CAAA,CAAE,EAM/BE,EAAcC,GAAIC,EAAA,CAAW,EAEnCC,GACE,IAAMC,EAAM,iBACXC,GAAU,CACTC,EAAOT,EAAeQ,CAAK,EACTE,GACpB,CAAA,EAGF,MAAMA,EAAoB,IAAYC,EAAA,sBAChC,IAAAC,EAAO,MAAMC,GAAgBb,CAAa,EAC1CY,EAAK,QACAH,EAAAP,EAAcU,EAAK,MAAM,CAClC,GAKF,SAASE,GAAqB,CACVC,EAAA,+BAAgC,CAAA,CAAE,CACtD,CAEA,SAASC,GAAoB,CAC3BD,EAAkB,+BAAgC,CAAE,UAAW,QAAU,CAAA,CAC3E,CAEA,SAASE,GAAyB,CAChCF,EAAkB,sBAAuB,CAAE,cAAe,OAAS,CAAA,CACrE,CAOa,OAAAG,EAAA,CACX,aALmB,IAAM,CACzBf,EAAY,MAAQE,GAAU,CAI9B,CACD"}