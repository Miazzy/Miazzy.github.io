{"version":3,"file":"StationIntroduction-1041619a.js","sources":["../../src/assets/images/operationScreen/station-intro.jpg","../../src/views/da/stationOperation/overview/StationIntroduction.vue"],"sourcesContent":["export default \"__VITE_ASSET__9950af89__\"","<template>\n  <div class=\"station-Introduction\">\n    <SmallModule title=\"电站简介\">\n      <template #content>\n        <div class=\"content-layout\">\n          <div class=\"station-info-box\">\n            <div class=\"left\"> <img class=\"pic\" :src=\"stationPic\" /> </div>\n            <div class=\"right\">\n              <div v-for=\"(item, index) in infoData\" :key=\"index\">\n                <div\n                  class=\"info-item\"\n                  :class=\"{ 'address-text': item.label === '电站地址' }\"\n                  v-if=\"item.label !== '负责人'\"\n                >\n                  <span class=\"label-text\">{{ item.label }}：</span>\n                  <div class=\"value-text-outer\"\n                    ><span class=\"value-text\">{{ item.value }}</span></div\n                  >\n                </div>\n              </div>\n            </div>\n          </div>\n          <div class=\"weather-box\">\n            <WeatherItem\n              v-for=\"(item, index) in weatherData\"\n              :key=\"index\"\n              :day=\"item.weekDay\"\n              :weatherIcon=\"getWeatherIconName(item)\"\n              :temperature=\"item.temp\"\n              :description=\"item.textDay\"\n              :type=\"item.type\"\n            />\n          </div>\n        </div>\n      </template>\n    </SmallModule>\n  </div>\n</template>\n\n<script lang=\"ts\" setup>\n  import { ref, reactive, UnwrapRef, onMounted } from 'vue';\n  import SmallModule from '/@/components/Framework/OperationScreen/SmallModule.vue';\n  import WeatherItem from '/@/components/Framework/OperationScreen/WeatherItem.vue';\n  import stationPic from '/@/assets/images/operationScreen/station-intro.jpg';\n  import * as CommonApi from '@/api/da/common';\n  import { getRunDataData } from './data';\n  import { assign } from 'lodash-es';\n  import { weatherIcons } from '@/utils/weatherIcon';\n\n  //搜索参数\n  const searchInfo: UnwrapRef<any> = reactive({});\n\n  interface Props {\n    overviewSearchInfo?: {};\n  }\n\n  const props = withDefaults(defineProps<Props>(), {});\n\n  // 天气数据\n  const weatherData = ref([]);\n  const getWeatherData = async () => {\n    let res = await CommonApi.getWeather({ lastDay: '7d' });\n    let now = await CommonApi.getWeather({ lastDay: 'now' });\n    let weTemp = [];\n    if (now.weather.now) {\n      let nowData = now.weather.now;\n      let item = {\n        weekDay: '今天',\n        iconDay: nowData.icon,\n        temp: `${nowData.temp}℃`,\n        textDay: nowData.text,\n        type: 'today',\n      };\n      weTemp.push(item);\n    }\n    if (res.weather.daily?.length > 5) {\n      let spTemp = res.weather.daily.splice(1, 4);\n\n      const days = ['周日', '周一', '周二', '周三', '周四', '周五', '周六'];\n      spTemp.forEach((item) => {\n        let date = new Date(item.fxDate);\n        item.weekDay = days[date.getDay()];\n        item.temp = item.tempMin + '~' + item.tempMax + '℃';\n        weTemp.push(item);\n      });\n    }\n    weatherData.value = weTemp;\n  };\n  const getWeatherIconName = (item) => {\n    return item.iconDay && weatherIcons[item.iconDay] ? weatherIcons[item.iconDay] : 'tianqi-wu2';\n  };\n\n  onMounted(() => {\n    assign(searchInfo, props.overviewSearchInfo);\n    queryRunDataData();\n    getWeatherData();\n  });\n\n  // 电站信息\n  const infoData = ref({});\n  const queryRunDataData = async () => {\n    let data = await getRunDataData(searchInfo);\n    if (data.result) {\n      infoData.value = data.result;\n    }\n  };\n</script>\n\n<style lang=\"less\" scoped>\n  .station-Introduction {\n    .content-layout {\n      height: 100%;\n      padding: 0 0.16rem;\n    }\n\n    .station-info-box {\n      display: flex;\n      align-items: center;\n      width: 100%;\n      margin-bottom: 1.5vh;\n\n      .left {\n        width: 2rem;\n        height: 1.12rem;\n\n        .pic {\n          width: 100%;\n          height: 100%;\n        }\n      }\n\n      .right {\n        flex: 1;\n        padding-left: 0.11rem;\n\n        .info-item {\n          display: flex;\n          color: #fff;\n          font-size: 0.12rem;\n          line-height: 0.22rem;\n\n          .label-text {\n            width: 6em;\n            opacity: 0.6;\n          }\n\n          .value-text {\n            flex: 1;\n          }\n\n          &.address-text {\n            .label-text {\n              flex-shrink: 0;\n            }\n\n            .value-text-outer {\n              flex-shrink: 0;\n              overflow: hidden;\n            }\n\n            .value-text {\n              display: inline-block;\n              animation: scroll 10s linear infinite;\n            }\n          }\n        }\n      }\n    }\n\n    .weather-box {\n      display: flex;\n      justify-content: space-between;\n    }\n  }\n\n  @keyframes scroll {\n  0% {\n    transform: translateX(0%);\n  }\n  100% {\n    transform: translateX(-100%);\n  }\n}\n</style>\n"],"names":["stationPic","searchInfo","reactive","weatherData","ref","getWeatherData","__async","res","CommonApi.getWeather","now","weTemp","nowData","item","_a","spTemp","days","date","getWeatherIconName","weatherIcons","onMounted","assign","props","queryRunDataData","infoData","data","getRunDataData"],"mappings":"0qDAAeA,GAAA,4WCkDPC,EAA6BC,EAAS,CAAA,CAAE,EASxCC,EAAcC,EAAI,CAAA,CAAE,EACpBC,EAAiB,IAAYC,EAAA,4BACjC,IAAIC,EAAM,MAAMC,EAAqB,CAAE,QAAS,IAAM,CAAA,EAClDC,EAAM,MAAMD,EAAqB,CAAE,QAAS,KAAO,CAAA,EACnDE,EAAS,CAAA,EACT,GAAAD,EAAI,QAAQ,IAAK,CACf,IAAAE,EAAUF,EAAI,QAAQ,IACtBG,EAAO,CACT,QAAS,KACT,QAASD,EAAQ,KACjB,KAAM,GAAGA,EAAQ,IAAI,IACrB,QAASA,EAAQ,KACjB,KAAM,OAAA,EAERD,EAAO,KAAKE,CAAI,CAClB,CACA,KAAIC,EAAAN,EAAI,QAAQ,QAAZ,YAAAM,EAAmB,QAAS,EAAG,CACjC,IAAIC,EAASP,EAAI,QAAQ,MAAM,OAAO,EAAG,CAAC,EAEpC,MAAAQ,EAAO,CAAC,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,IAAI,EAC/CD,EAAA,QAASF,GAAS,CACvB,IAAII,EAAO,IAAI,KAAKJ,EAAK,MAAM,EAC/BA,EAAK,QAAUG,EAAKC,EAAK,OAAQ,CAAA,EACjCJ,EAAK,KAAOA,EAAK,QAAU,IAAMA,EAAK,QAAU,IAChDF,EAAO,KAAKE,CAAI,CAAA,CACjB,CACH,CACAT,EAAY,MAAQO,CAAA,GAEhBO,EAAsBL,GACnBA,EAAK,SAAWM,EAAaN,EAAK,OAAO,EAAIM,EAAaN,EAAK,OAAO,EAAI,aAGnFO,EAAU,IAAM,CACPC,EAAAnB,EAAYoB,EAAM,kBAAkB,EAC1BC,IACFjB,GAAA,CAChB,EAGK,MAAAkB,EAAWnB,EAAI,CAAA,CAAE,EACjBkB,EAAmB,IAAYhB,EAAA,sBAC/B,IAAAkB,EAAO,MAAMC,EAAexB,CAAU,EACtCuB,EAAK,SACPD,EAAS,MAAQC,EAAK,OACxB"}