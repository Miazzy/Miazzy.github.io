{"version":3,"file":"NtgaleChart.vue_vue_type_script_setup_true_lang-0930fb50.js","sources":["../../src/components/Framework/Chart/NtgaleChart.vue"],"sourcesContent":["<template>\n  <div v-show=\"!noData\" :id=\"props.id\" ref=\"chart\"\n    :style=\"`width: ${typeof props.width == 'number' ? props.width + 'px' : props.width}; height: ${typeof props.height == 'number' ? props.height + 'px' : props.height};`\"></div>\n  <div v-if=\"noData\" :style=\"`width: ${typeof props.width == 'number' ? props.width + 'px' : props.width}; height: ${typeof props.height == 'number' ? props.height + 'px' : props.height};`\">\n    <NoData />\n  </div>\n</template>\n\n<script lang=\"ts\" setup>\n  import * as echarts from 'echarts';\n  import { onMounted, watch, PropType, nextTick, computed } from 'vue';\n  import NoData from '/@/components/Framework/Chart/NoData.vue';\n\n  const props = defineProps({\n    width: { type: [Number, String], default: 600 },\n    height: { type: [Number, String], default: 300 },\n    data: Array,\n    id: { type: String },\n    showLabel: { type: Boolean, default: false }, // 是否显示饼图图形旁边的文字标签\n    roseType: { type: [String, Boolean], default: 'radius' }, // 是否展示成南丁格尔图，通过半径区分数据大小 radius/area\n    radius: { type: Array as PropType<Array<number | string>>, default: [30, 100] },\n    labelFormatter: { type: [String, Function], default: '{b}: {c}' },\n    colors: { type: Array, default: ['#1890ff', '#60d1f3', '#8fd0f4', '#2de4a5', '#63b2ee'] }, // 饼图颜色\n  });\n\n  const emit = defineEmits(['clickItem']);\n\n  const noData = computed(() => {\n    if (props.data?.length) {\n      return false;\n    } else {\n      return true;\n    }\n  })\n\n  const setupData = () => {\n    const chartDom = document.getElementById(props.id);\n    let myChart = echarts.getInstanceByDom(chartDom);\n    if (myChart == undefined) {\n      myChart = echarts.init(chartDom);\n    }\n    const option = {\n      color: props.colors,\n      legend: {\n        show: false,\n      },\n      series: [\n        {\n          name: 'Nightingale Chart',\n          type: 'pie',\n          radius: props.radius,\n          center: ['50%', '50%'],\n          roseType: props.roseType,\n          itemStyle: {\n            borderRadius: 0,\n          },\n          data: props.data,\n          label: {\n            show: props.showLabel,\n            formatter: props.labelFormatter,\n            overflow: 'break',\n            textBorderType: 'none',\n            color: '#BAC3C4',\n          },\n        },\n      ],\n    };\n    option && myChart.setOption(option);\n  };\n\n  watch(\n    () => props.data,\n    () => {\n      setupData();\n    },\n    {\n      deep: true,\n    },\n  );\n\n  watch(\n    () => props.height,\n    () => {\n      setTimeout(() => {\n        const chartDom = document.getElementById(props.id);\n        let myChart = echarts?.getInstanceByDom(chartDom);\n        myChart?.resize();\n      }, 100);\n    },\n  );\n\n  onMounted(() => {\n    setupData();\n    nextTick(() => {\n      const chartDom = document.getElementById(props.id);\n      let myChart = echarts.getInstanceByDom(chartDom);\n      myChart.on('click', (params) => {\n        emit('clickItem', params);\n      });\n    });\n  });\n</script>\n"],"names":["noData","computed","_a","props","setupData","chartDom","myChart","echarts.getInstanceByDom","echarts.init","option","watch","echarts?.getInstanceByDom","onMounted","nextTick","params","emit"],"mappings":"0sBA2BQA,EAASC,EAAS,IAAM,OACxB,MAAA,GAAAC,EAAAC,EAAM,OAAN,MAAAD,EAAY,OAIhB,CACD,EAEKE,EAAY,IAAM,CACtB,MAAMC,EAAW,SAAS,eAAeF,EAAM,EAAE,EAC7C,IAAAG,EAAUC,EAAyBF,CAAQ,EAC3CC,GAAW,OACHA,EAAAE,EAAaH,CAAQ,GAEjC,MAAMI,EAAS,CACb,MAAON,EAAM,OACb,OAAQ,CACN,KAAM,EACR,EACA,OAAQ,CACN,CACE,KAAM,oBACN,KAAM,MACN,OAAQA,EAAM,OACd,OAAQ,CAAC,MAAO,KAAK,EACrB,SAAUA,EAAM,SAChB,UAAW,CACT,aAAc,CAChB,EACA,KAAMA,EAAM,KACZ,MAAO,CACL,KAAMA,EAAM,UACZ,UAAWA,EAAM,eACjB,SAAU,QACV,eAAgB,OAChB,MAAO,SACT,CACF,CACF,CAAA,EAEQM,GAAAH,EAAQ,UAAUG,CAAM,CAAA,EAGpC,OAAAC,EACE,IAAMP,EAAM,KACZ,IAAM,CACMC,GACZ,EACA,CACE,KAAM,EACR,CAAA,EAGFM,EACE,IAAMP,EAAM,OACZ,IAAM,CACJ,WAAW,IAAM,CACf,MAAME,EAAW,SAAS,eAAeF,EAAM,EAAE,EAC7C,IAAAG,EAAUK,EAA0BN,CAAQ,EAChDC,GAAA,MAAAA,EAAS,UACR,GAAG,CACR,CAAA,EAGFM,EAAU,IAAM,CACJR,IACVS,EAAS,IAAM,CACb,MAAMR,EAAW,SAAS,eAAeF,EAAM,EAAE,EACnCI,EAAyBF,CAAQ,EACvC,GAAG,QAAUS,GAAW,CAC9BC,EAAK,YAAaD,CAAM,CAAA,CACzB,CAAA,CACF,CAAA,CACF"}