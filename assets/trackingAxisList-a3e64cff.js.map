{"version":3,"file":"trackingAxisList-a3e64cff.js","sources":["../../src/views/monitor/PVArea/subareaOverview/trackingAxisList.vue"],"sourcesContent":["<!--\n * @Description: 分区总览-跟踪轴\n * @Date: 2023-10-10 09:40:47\n * @LastEditTime: 2023-11-01 16:20:55\n * @FilePath: \\ygwl-framework\\src\\views\\monitor\\PVArea\\subareaOverview\\trackingAxisList.vue\n-->\n<template>\n  <div class=\"combiner-box-list\">\n    <div class=\"combiner-box-header\">\n      <div class=\"header-left\">\n        <div>跟踪轴：{{abnormalInfo.deviceNum}}条</div>\n        <div class=\"status-checkbox-group-box\">\n          <CheckboxGroup v-model:value=\"checkedStatus\" @change=\"handleStatusChange\">\n            <Checkbox v-for=\"(item, index) in statusOptions\" :key=\"index\" :value=\"item.value\">\n              <span class=\"status-label-text\">{{item.label}}</span>\n              <span :class=\"{'red-text': item.value!=='normal'&&item.number>0}\">{{item.number}}</span>\n            </Checkbox>\n          </CheckboxGroup>\n        </div>\n      </div>\n    </div>\n    <div class=\"combiner-box-content\">\n      <div class=\"combiner-box-list-box\">\n        <DeviceItem class=\"device-item-layout\" v-for=\"(item, index) in trackingAxisData\" :key=\"index\" :options=\"deviceItemOptions\" :data=\"item\" />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\" setup>\n  import { reactive, ref, watch, onMounted } from 'vue';\n  import { Checkbox, CheckboxGroup } from 'ant-design-vue';\n  import DeviceItem from '../../component/deviceItem.vue';\n  import { getPhotovoltaicDevice } from '../../monitorApi.ts';\n\n  const props = defineProps({\n    stationId: String,\n    areaId: String,\n  });\n\n  // 设备状态选项\n  const statusOptions = ref([\n    { label: '正常', value: 'normal', number: 0},\n    { label: '停机', value: 'halt', number: 0 },\n    { label: '告警', value: 'alarm', number: 0 },\n    { label: '通讯中断', value: 'interrupt', number: 0 },\n  ]);\n  const checkedStatus = ref(['normal', 'halt', 'alarm', 'interrupt']);\n  const handleStatusChange = (checkedValue)=>{\n    console.log('checkedValue',checkedValue);\n    getPhotovoltaicDeviceData();\n  };\n\n  const abnormalInfo = reactive({}); // 跟踪轴异常数据\n  const trackingAxisData = ref([]); // 跟踪轴数据\n  // 获取跟踪轴数据\n  const getPhotovoltaicDeviceData = async () => {\n    let res = await getPhotovoltaicDevice({\n      stationId: props.stationId,\n      areaId: props.areaId,\n      abnormalType: checkedStatus.value,\n      deviceType: 'TrackingAxis',\n    });\n    Object.assign(abnormalInfo, res.abnormalInfo);\n    statusOptions.value[0].number = abnormalInfo.normalNum;\n    statusOptions.value[1].number = abnormalInfo.haltNum;\n    statusOptions.value[2].number = abnormalInfo.alarmNum;\n    statusOptions.value[3].number = abnormalInfo.interruptNum;\n    trackingAxisData.value = res.dataList;\n  };\n\n  // 设备item显示内容配置\n  const deviceItemOptions = reactive({\n    deviceLabelKey: 'esn',\n    // right: [\n    //   {\n    //     label: '角度',\n    //     dataKey: 'angle',\n    //     unit: '°',\n    //   },\n    //   {\n    //     label: '工作模式',\n    //     dataKey: 'workModel',\n    //     unit: '',\n    //   },\n    //   {\n    //     label: '支架类型',\n    //     dataKey: 'supportType',\n    //     unit: '',\n    //   },\n    // ],\n    // hasStatus: false,\n  });\n\n  watch(\n    () => props.areaId,\n    (newValue) => {\n      if (newValue) {\n        getPhotovoltaicDeviceData();\n      }\n    },\n  );\n\n  onMounted(() => {\n    // getPhotovoltaicDeviceData();\n  });\n\n  defineExpose({ statusOptions });\n</script>\n\n<style lang=\"less\" scoped>\n  .combiner-box-list {\n    .combiner-box-header {\n      display: flex;\n      justify-content: space-between;\n      padding: 0 15px;\n\n      .header-left {\n        display: flex;\n        align-items: center;\n\n        & > div {\n          margin-right: 20px;\n        }\n      }\n\n      .status-checkbox-group-box {\n        .status-label-text {\n          margin-right: 6px;\n        }\n      }\n\n      .red-text {\n        color: #ff4d4f;\n      }\n    }\n\n    .combiner-box-content {\n      .combiner-box-list-box {\n        display: flex;\n        flex-wrap: wrap;\n        margin-right: -20px;\n        padding: 20px 15px 0;\n        overflow: hidden;\n\n        .device-item-layout {\n          margin: 0 20px 16px 0;\n          // float: left;\n          cursor: pointer;\n        }\n      }\n    }\n  }\n</style>"],"names":["statusOptions","ref","checkedStatus","handleStatusChange","checkedValue","getPhotovoltaicDeviceData","abnormalInfo","reactive","trackingAxisData","__async","res","getPhotovoltaicDevice","props","deviceItemOptions","watch","newValue","onMounted","__expose"],"mappings":"40BAyCQA,EAAgBC,EAAI,CACxB,CAAE,MAAO,KAAM,MAAO,SAAU,OAAQ,CAAC,EACzC,CAAE,MAAO,KAAM,MAAO,OAAQ,OAAQ,CAAE,EACxC,CAAE,MAAO,KAAM,MAAO,QAAS,OAAQ,CAAE,EACzC,CAAE,MAAO,OAAQ,MAAO,YAAa,OAAQ,CAAE,CAAA,CAChD,EACKC,EAAgBD,EAAI,CAAC,SAAU,OAAQ,QAAS,WAAW,CAAC,EAC5DE,EAAsBC,GAAe,CACjC,QAAA,IAAI,eAAeA,CAAY,EACbC,GAAA,EAGtBC,EAAeC,EAAS,CAAA,CAAE,EAC1BC,EAAmBP,EAAI,CAAA,CAAE,EAEzBI,EAA4B,IAAYI,EAAA,sBACxC,IAAAC,EAAM,MAAMC,EAAsB,CACpC,UAAWC,EAAM,UACjB,OAAQA,EAAM,OACd,aAAcV,EAAc,MAC5B,WAAY,cAAA,CACb,EACM,OAAA,OAAOI,EAAcI,EAAI,YAAY,EAC5CV,EAAc,MAAM,CAAC,EAAE,OAASM,EAAa,UAC7CN,EAAc,MAAM,CAAC,EAAE,OAASM,EAAa,QAC7CN,EAAc,MAAM,CAAC,EAAE,OAASM,EAAa,SAC7CN,EAAc,MAAM,CAAC,EAAE,OAASM,EAAa,aAC7CE,EAAiB,MAAQE,EAAI,QAAA,GAIzBG,EAAoBN,EAAS,CACjC,eAAgB,KAAA,CAmBjB,EAED,OAAAO,EACE,IAAMF,EAAM,OACXG,GAAa,CACRA,GACwBV,GAE9B,CAAA,EAGFW,EAAU,IAAM,CAAA,CAEf,EAEYC,EAAA,CAAE,cAAAjB,EAAe"}