var b=(n,y,v)=>new Promise((l,D)=>{var e=o=>{try{f(v.next(o))}catch(p){D(p)}},d=o=>{try{f(v.throw(o))}catch(p){D(p)}},f=o=>o.done?l(o.value):Promise.resolve(o.value).then(e,d);f((v=v.apply(n,y)).next())});import{d as K,r as T,k as m,w as P,o as q,al as J,Z as L,_ as Q,$ as i,f as s,aa as S,v as k,A as _,a6 as w,a5 as B}from"./vue-71d1abb3.js";import{S as I}from"./SubtitleBar-001f5f49.js";import{I as R}from"./IndicatorGroup-e2cd29a8.js";import{_ as W}from"./EchartLineBarChart.vue_vue_type_style_index_0_lang-90edad95.js";import{E as F}from"./EchartPillarChart-9aa5a33e.js";import{h as g}from"./utils-5bbca5df.js";import{b as X,d as Y,h as tt}from"./index-fdc74a3e.js";import{a as at}from"./index-8c718dee.js";import{am as $,_ as et}from"./index.js";import{a as ot}from"./assign-37f1c13d.js";import"./index-d8a2358f.js";import"./install-58e0bd81.js";import"./NoData-1ab5cc7b.js";import"./antd-15ac76ed.js";const nt={class:"left-section section-box"},it={class:"section-bg"},st={style:{width:"100%",height:"2rem"}},lt={style:{"margin-left":"0.16rem",transform:"scale(0.85)","transform-origin":"0 0"}},dt={class:"middle-section section-box"},ct={class:"section-bg"},rt={style:{width:"100%",height:"2rem"}},ut={style:{"margin-left":"0.16rem",transform:"scale(0.85)","transform-origin":"0 0"}},mt={class:"right-section section-box"},ht={class:"section-bg"},vt={style:{width:"100%",height:"2rem"}},ft={style:{"margin-left":"0.16rem",transform:"scale(0.85)","transform-origin":"0 0"}},gt=K({__name:"BottomContent",props:{searchInfoByTime:{type:Object,default:{}},tabStatus:{type:String,default:""}},setup(n,{expose:y}){const v=n,l=T({}),D=m($()),e=T({ticket:"station",defect:"station",hidden:"station"}),d=m([]);P(()=>v.searchInfoByTime,a=>{ot(l,a),x(e.ticket),M(e.defect),E(e.hidden)}),q(()=>b(this,null,function*(){(yield at({dictType:"cockpit_three_dimension"})).result.forEach(t=>{d.value.push({value:t.value,label:t.label})})}));const f=m({}),o=m({barData:[[],[],[]],categories:[],colors:[["#488FF6","#60D1F3"],["#078C5D","#68E4B8"],["#E59837","#FAE895"],["#e59837","#fae895"],["#078C5D","#68E4B8"]],dataZoomDefaultValueRange:[0,4]}),p=[["操作票（张）","电气一票（张）","电气二票（张）"]],x=a=>b(this,null,function*(){const t=yield X({dimension:a,startMonth:l.startMonth,endMonth:l.endMonth});t&&(f.value=[{label:"电气一票(张)",value:t.firstCount},{label:"电气二票(张)",value:t.secondCount},{label:"操作票(张)",value:t.operateCount}],o.value.barData=t.barData||[],o.value.categories=t.categories||[])}),U=a=>{x(a)},Z=m({}),h=m({barData:[[]],lineData:[[]],categories:[],units:["(项)","(%)"],colors:[["#078C5D","#68E4B8"],["#E59837","#FAE895"],["#078C5D","#68E4B8"]],dataZoomDefaultValueRange:[0,7]}),N=["缺陷未处理","处理率"],M=a=>b(this,null,function*(){var c;const t=yield Y({dimension:a,startMonth:l.startMonth,endMonth:l.endMonth});t&&(Z.value=[{label:"待处理(项)",value:t.unHandleCount},{label:"处理率(%)",value:t.handleRate}],h.value.barData=t.barData||[],h.value.categories=t.categories||[],(c=t.lineData)!=null&&c.length?h.value.lineData[0]=t.lineData:h.value.lineData=[])}),A=a=>{M(a)},V=m({}),r=m({barData:[[]],categories:[],lineData:[[]],units:["(项)","(%)"],colors:[["#488FF6","#60D1F3"],["#E59837","#FAE895"],["#078C5D","#68E4B8"]],dataZoomDefaultValueRange:[0,7]}),O=["待处理","处理率"],E=a=>b(this,null,function*(){var c;const t=yield tt({dimension:a,startMonth:l.startMonth,endMonth:l.endMonth});t&&(V.value=[{label:"待处理(项)",value:t.waitCount},{label:"处理率(%)",value:t.dealRate}],r.value.barData=t.barData||[],r.value.categories=t.categories||[],(c=t.lineData)!=null&&c.length?r.value.lineData[0]=t.lineData:r.value.lineData=[])}),H=a=>{E(a)},C=a=>{a=="ticket"?g("/bi/maintenance/ticket",{}):a==="defect"?g("/bi/fault/index",{}):a==="hidden"&&g("/bi/hidden/index",{})},z=a=>{g("/bi/maintenance/ticket",{stationOrganId:e.ticket==="company"?a.data.id:"",stationIds:e.ticket==="station"?a.data.id:"",dateType:"month"})},j=a=>{g("/bi/fault/index",{stationOrganId:e.defect==="company"?a.data.id:"",stationId:e.defect==="station"?a.data.id:"",dateType:"month"})},G=a=>{g("/bi/hidden/index",{stationOrganId:e.hidden==="company"?a.data.id:"",stationId:e.hidden==="station"?a.data.id:"",dateType:"month"})};return y({handleUpdate:()=>{D.value=$()}}),(a,t)=>{const c=J("a-select");return L(),Q("div",{class:"bottom-content",key:D.value},[i("div",nt,[i("div",it,[s(I,{subtitle:"两票统计"},{default:S(()=>[k(s(c,{value:e.ticket,"onUpdate:value":t[0]||(t[0]=u=>e.ticket=u),options:d.value,onChange:U,style:{width:"1.2rem"}},null,8,["value","options"]),[[_,d.value.length>1]])]),_:1}),s(R,{data:f.value,style:w(n.tabStatus==="on"?"margin-top: -0.15rem":"margin-top: -0.2rem"),class:B(["indicator-group-layout",n.tabStatus==="on"?"":"fix-indicator-group-padding"]),onClickItem:t[1]||(t[1]=u=>C("ticket"))},null,8,["data","style","class"]),i("div",st,[i("div",lt,[s(W,{data:o.value,colors:o.value.colors,width:"36.14vw",height:n.tabStatus==="on"?"34.8vh":"39vh",category:o.value.categories,ybgcolor:"#01B7D730",name:p,onClickItem:z,dataZoomDisabled:!1,dataZoomMaxValueSpan:o.value.categories.length,dataZoomDefaultValueRange:o.value.dataZoomDefaultValueRange},null,8,["data","colors","height","category","dataZoomMaxValueSpan","dataZoomDefaultValueRange"])])])])]),i("div",dt,[i("div",ct,[s(I,{subtitle:"缺陷统计"},{default:S(()=>[k(s(c,{value:e.defect,"onUpdate:value":t[2]||(t[2]=u=>e.defect=u),options:d.value,onChange:A,style:{width:"1.2rem"}},null,8,["value","options"]),[[_,d.value.length>1]])]),_:1}),s(R,{data:Z.value,style:w(n.tabStatus==="on"?"margin-top: -0.15rem":"margin-top: -0.2rem"),class:B(["indicator-group-layout2",n.tabStatus==="on"?"":"fix-indicator-group-padding"]),onClickItem:t[3]||(t[3]=u=>C("defect"))},null,8,["data","style","class"]),i("div",rt,[i("div",ut,[s(F,{data:h.value,colors:h.value.colors,width:"36.14vw",height:n.tabStatus==="on"?"34.8vh":"39vh",name:N,onClickItem:j,dataZoomDefaultValueRange:h.value.dataZoomDefaultValueRange,dataZoomDisabled:!1},null,8,["data","colors","height","dataZoomDefaultValueRange"])])])])]),i("div",mt,[i("div",ht,[s(I,{subtitle:"隐患统计"},{default:S(()=>[k(s(c,{value:e.hidden,"onUpdate:value":t[4]||(t[4]=u=>e.hidden=u),options:d.value,onChange:H,style:{width:"1.2rem"}},null,8,["value","options"]),[[_,d.value.length>1]])]),_:1}),s(R,{data:V.value,style:w(n.tabStatus==="on"?"margin-top: -0.15rem":"margin-top: -0.2rem"),class:B(["indicator-group-layout2",n.tabStatus==="on"?"":"fix-indicator-group-padding"]),onClickItem:t[5]||(t[5]=u=>C("hidden"))},null,8,["data","style","class"]),i("div",vt,[i("div",ft,[s(F,{data:r.value,category:r.value.categories,colors:r.value.colors,width:"36.14vw",height:n.tabStatus==="on"?"34.8vh":"39vh",name:O,onClickItem:G,dataZoomDefaultValueRange:r.value.dataZoomDefaultValueRange,dataZoomDisabled:!1},null,8,["data","category","colors","height","dataZoomDefaultValueRange"])])])])])])}}});const Et=et(gt,[["__scopeId","data-v-4ad8df4c"]]);export{Et as default};
//# sourceMappingURL=BottomContent-3ff1671d.js.map
