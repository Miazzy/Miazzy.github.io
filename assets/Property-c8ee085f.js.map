{"version":3,"file":"Property-c8ee085f.js","sources":["../../src/views/da/cockpit/property/Property.vue"],"sourcesContent":["<template>\n  <div v-if=\"refreshFlag\" class=\"layout rem-layout\">\n    <div class=\"dashboard\">\n      <CockpitHeader v-if=\"tabStatus === 'on'\" class=\"header-layout\" :title=\"title\" @date-change=\"handleDateChange\" />\n      <CockpitSetting v-if=\"tabStatus === 'off'\" @date-change=\"handleDateChange\" />\n      <div class=\"content\">\n        <TopContent ref=\"topContentRef\" :searchInfoByTime=\"searchInfoByTime\" />\n        <MiddleContent ref=\"middleContentRef\" :searchInfoByTime=\"searchInfoByTime\" :tabStatus=\"tabStatus\" />\n        <BottomContent ref=\"bottomContentRef\" :searchInfoByTime=\"searchInfoByTime\" :tabStatus=\"tabStatus\" />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\" setup>\n  import '../../rem.ts';\n  import { ref, onMounted, nextTick, getCurrentInstance } from 'vue';\n  import CockpitHeader from '/@/components/Framework/Chart/CockpitHeader.vue';\n  import MiddleContent from '/@/views/da/cockpit/property/MiddleContent.vue';\n  import BottomContent from '/@/views/da/cockpit/property/BottomContent.vue';\n  import TopContent from '/@/views/da/cockpit/property/TopContent.vue';\n  import CockpitSetting from '/@/components/Framework/Chart/CockpitSetting.vue';\n  import { handleInstanceUpdated } from '/@/utils/route';\n  import { useRouter } from 'vue-router';\n  // import { MsgManager } from '/@/message/MsgManager';\n\n  //时间参数\n  const searchInfoByTime = ref({});\n  const refreshFlag = ref(true);\n  const tabStatus = ref('');\n  const title = ref('资产驾驶舱');\n  const instance = getCurrentInstance();\n  const topContentRef = ref();\n  const middleContentRef = ref();\n  const bottomContentRef = ref();\n  const router = useRouter();\n\n  function handleDateChange(e) {\n    const [startMonth, endMonth] = e;\n    searchInfoByTime.value = { startMonth, endMonth };\n  }\n\n  // 判断当前页面是否在 iframe 中显示\n  const checkInIframe = () => {\n    try {\n      return window.self !== window.top;\n    } catch (e) {\n      return true;\n    }\n  };\n\n  // 更新页面\n  const handlePageUpdate = () => {\n    try {\n      const path = router.currentRoute.value?.path;\n      if (path === '/frame/cockpit/property') {\n        handleInstanceUpdated(instance);\n      } else if (path === '/cockpitproperty') {\n        bottomContentRef.value?.handleUpdate();\n        middleContentRef.value?.handleUpdate();\n        topContentRef.value?.handleUpdate();\n      }\n    } catch (error) {\n      console.error('update power page error:', error);\n    }\n  };\n\n  onMounted(() => {\n    tabStatus.value = checkInIframe() ? 'off' : 'on';\n    window.addEventListener('resize', handlePageUpdate);\n  });\n</script>\n\n<style lang=\"less\" scoped>\n  .layout {\n    position: relative;\n    width: 100%;\n    height: 100%;\n\n    .dashboard {\n      display: flex;\n      position: relative;\n      flex-direction: column;\n      width: 100%;\n      height: 100%;\n      background: url('../../../../assets/images/da/sky_bg.jpg') no-repeat center/100% 100%;\n\n      .content {\n        display: flex;\n        flex: 1;\n        flex-direction: column;\n        flex-shrink: 0;\n        height: 100%;\n        padding: 2.78vh 0.78vw 1.48vh;\n\n        :deep(.ant-select-selection-search-input) {\n          color: rgb(255 255 255 / 85%);\n        }\n\n        :deep(.ant-select-selection-item) {\n          color: rgb(255 255 255 / 85%);\n        }\n\n        :deep(\n            .ant-select-single .ant-select-selector .ant-select-selection-item,\n            .ant-select-single .ant-select-selector .ant-select-selection-placeholder\n          ) {\n          line-height: 0.24rem;\n        }\n\n        :deep(.ant-select) {\n          font-size: 0.14rem;\n        }\n      }\n    }\n  }\n</style>\n"],"names":["searchInfoByTime","ref","refreshFlag","tabStatus","title","instance","getCurrentInstance","topContentRef","middleContentRef","bottomContentRef","router","useRouter","handleDateChange","e","startMonth","endMonth","checkInIframe","handlePageUpdate","path","_a","handleInstanceUpdated","_b","_c","_d","error","onMounted"],"mappings":"m+BA2BQ,MAAAA,EAAmBC,EAAI,CAAA,CAAE,EACzBC,EAAcD,EAAI,EAAI,EACtBE,EAAYF,EAAI,EAAE,EAClBG,EAAQH,EAAI,OAAO,EACnBI,EAAWC,IACXC,EAAgBN,IAChBO,EAAmBP,IACnBQ,EAAmBR,IACnBS,EAASC,IAEf,SAASC,EAAiBC,EAAG,CACrB,KAAA,CAACC,EAAYC,CAAQ,EAAIF,EACdb,EAAA,MAAQ,CAAE,WAAAc,EAAY,SAAAC,CAAS,CAClD,CAGA,MAAMC,EAAgB,IAAM,CACtB,GAAA,CACK,OAAA,OAAO,OAAS,OAAO,UACvBH,EAAG,CACH,MAAA,EACT,CAAA,EAIII,EAAmB,IAAM,aACzB,GAAA,CACI,MAAAC,GAAOC,EAAAT,EAAO,aAAa,QAApB,YAAAS,EAA2B,KACpCD,IAAS,0BACXE,EAAsBf,CAAQ,EACrBa,IAAS,sBAClBG,EAAAZ,EAAiB,QAAjB,MAAAY,EAAwB,gBACxBC,EAAAd,EAAiB,QAAjB,MAAAc,EAAwB,gBACxBC,EAAAhB,EAAc,QAAd,MAAAgB,EAAqB,sBAEhBC,EAAO,CACN,QAAA,MAAM,2BAA4BA,CAAK,CACjD,CAAA,EAGF,OAAAC,EAAU,IAAM,CACJtB,EAAA,MAAQa,IAAkB,MAAQ,KACrC,OAAA,iBAAiB,SAAUC,CAAgB,CAAA,CACnD"}