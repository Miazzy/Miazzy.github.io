{"version":3,"file":"groupSeriesRealTimeAnalysis-fe2af370.js","sources":["../../src/views/monitor/realTimeAnalysis/groupSeriesRealTimeAnalysis.vue"],"sourcesContent":["<!--\n * @Description: 实时分析-组串实时分析\n * @Date: 2023-10-23 17:31:10\n * @LastEditTime: 2023-11-10 10:11:53\n * @FilePath: \\ygwl-framework\\src\\views\\monitor\\realTimeAnalysis\\groupSeriesRealTimeAnalysis.vue\n-->\n<template>\n  <div class=\"real-time-analysis\">\n    <a-row class=\"real-time-analysis-row\" type=\"flex\" :wrap=\"false\">\n      <a-col flex=\"298px\">\n        <CommonTree\n          :toolbar=\"true\"\n          :canEdit=\"false\"\n          :canAdd=\"false\"\n          :canDelete=\"false\"\n          :isShowOperationBtns=\"false\"\n          class=\"fit-common-tree\"\n          title=\"电站组织\"\n          :value=\"stationTreeData\"\n          :fieldNames=\"{ key: 'id', title: 'name' }\"\n          @select=\"handleSelect\"\n          :selectedKeys=\"selectedKeys\"\n          :expandedKeys=\"expandedKeys\"\n        />\n      </a-col>\n      <a-col flex=\"auto\">\n        <div class=\"right-box\">\n          <div class=\"right-row-box\">\n            <div class=\"box-header\">\n              <div class=\"header-left\">{{ selectedShowData.label }}</div>\n              <div class=\"header-right\">\n                <a-select\n                  v-model:value=\"selectedShowData\"\n                  allow-clear\n                  style=\"min-width: 206px\"\n                  placeholder=\"选择指标项\"\n                  :options=\"indicatorOptions\"\n                  showArrow\n                  @change=\"handleSelectionChange\"\n                />\n              </div>\n            </div>\n            <div class=\"box-content\">\n              <div class=\"chart-box\">\n                <div id=\"customerChart\" style=\"width: 1300px; height: 320px\"></div>\n              </div>\n            </div>\n          </div>\n          <div class=\"right-row-box\">\n            <div class=\"data-table-box\">\n              <div class=\"table-title-line\"></div>\n              <BasicTable @register=\"registerTable\" @row-db-click=\"searchChartData\">\n                <template #tableTitle>\n                  <div class=\"select-box\">\n                    <div class=\"select-label-box\">区域</div>\n                    <a-select\n                      v-model:value=\"area\"\n                      allow-clear\n                      style=\"min-width: 256px\"\n                      mode=\"multiple\"\n                      placeholder=\"选择区域\"\n                      :options=\"areaOptions\"\n                      :max-tag-count=\"1\"\n                      showArrow\n                      :maxTagTextLength=\"6\"\n                      @change=\"handleAreaChange\"\n                    />\n                  </div>\n                  <div class=\"select-box\">\n                    <div class=\"select-label-box\">设备类型</div>\n                    <Select\n                      v-model:value=\"deviceType\"\n                      mode=\"multiple\"\n                      style=\"min-width: 256px\"\n                      placeholder=\"选择类型\"\n                      :options=\"deviceTypeOptions\"\n                      showArrow\n                      @change=\"handleDeviceTypeChange\"\n                    />\n                  </div>\n                  <div class=\"select-box\">\n                    <div class=\"select-label-box\">指标</div>\n                    <a-select\n                      v-model:value=\"target\"\n                      mode=\"multiple\"\n                      style=\"min-width: 256px\"\n                      placeholder=\"选择指标\"\n                      :options=\"targetOptions\"\n                      :max-tag-count=\"1\"\n                      showArrow\n                      :maxTagTextLength=\"6\"\n                      @change=\"handleTargetChange\"\n                    />\n                  </div>\n                </template>\n                <template #toolbar>\n                  <div style=\"margin-top: -7px; padding-left: 8px\">\n                    <a-button @click=\"resetForm\"> 重置 </a-button>\n                    <a-button\n                      class=\"yellow-btn\"\n                      style=\"margin-left: 8px\"\n                      @click=\"exportData\"\n                      :preIcon=\"IconEnum.EXPORT\"\n                    >\n                      导出\n                    </a-button>\n                  </div>\n                </template>\n                <template #bodyCell=\"{ column, record }\">\n                  <template v-if=\"column.key === 'statusText'\">\n                    <span class=\"status-icon\" :class=\"statusMap[record.status]\"></span>\n                  </template>\n                </template>\n              </BasicTable>\n            </div>\n          </div>\n        </div>\n      </a-col>\n    </a-row>\n  </div>\n</template>\n\n<script lang=\"ts\" setup>\n  import { ref, onMounted, reactive, computed, shallowRef } from 'vue';\n  import CommonTree from '@/components/Framework/Tree/CommonTree.vue';\n  import { Select } from 'ant-design-vue';\n  import { TreeItem } from '/@/components/Tree';\n  import { BasicTable, useTable, TableAction, BasicColumn } from '/@/components/Table';\n  import Icon from '@/components/Icon/Icon.vue';\n  import type { SelectProps } from 'ant-design-vue';\n  import dayjs, { Dayjs } from 'dayjs';\n  import { formatDate } from '/@/utils/dateUtil';\n  import DataDetail from './seriesDataDetail.vue';\n  import * as echarts from 'echarts';\n  import { message } from 'ant-design-vue';\n  import { jsonToSheetXlsx } from '/@/components/Excel';\n  import {\n    getStationTree,\n    getAreas,\n    getPvStringRealData,\n    getChartData,\n    getPvStringChartData,\n    getPvStringExport,\n    getDeviceTypes,\n  } from '../monitorApi.ts';\n  import { IconEnum } from '@/enums/appEnum';\n  import { useMessage } from '@/hooks/web/useMessage';\n  import { exportExcelFile } from '@/utils/file/download';\n\n  const { createConfirm } = useMessage();\n\n  const pchartData = reactive({\n    barData: [],\n    lineData: [],\n    categories: [],\n    units: [],\n    colors: [\n      ['#078C5D', '#68E4B8'],\n      ['#E59837', '#FAE895'],\n      ['#078C5D', '#68E4B8'],\n    ],\n  });\n  const pChartSeriesName = ref([]);\n  // 状态\n  const statusMap = {\n    normal: 'green',\n    alarm: 'red',\n    interrupt: 'grey',\n    halt: 'white',\n  };\n  // 电站组织树\n  const stationTreeData = ref<TreeItem[]>([]);\n  const selectedStationId = ref('');\n  const selectedKeys = computed(() => {\n    return [selectedStationId.value];\n  });\n  const expandedKeys = ref([]);\n\n  // 区域\n  const area = ref(['all']);\n  const areaOptions = ref<SelectProps['options']>([]);\n\n  // 类型\n  const deviceType = ref([]);\n  const deviceTypeOptions = ref<SelectProps['options']>([]);\n  const deviceTypeMap = {\n    StringFormation: {\n      value: 'StringFormation',\n      label: '组串式逆变器',\n    },\n    CombinerDc: {\n      value: 'CombinerDc',\n      label: '直流汇流箱',\n    },\n  };\n  const handleDeviceTypeChange = (value: string[]) => {\n    deviceType.value = value;\n    reload();\n    getPvActualChart();\n  };\n  // 查询设备类型\n  const getDeviceType = async () => {\n    let res = await getDeviceTypes({\n      stationId: selectedStationId.value,\n    });\n    let temp = [];\n    let tempTypes = ['StringFormation', 'CombinerDc'];\n    let deviceTypeTemp = [];\n    if (res != null) {\n      res.forEach((element) => {\n        if (tempTypes.includes(element.deviceType)) {\n          temp.push(deviceTypeMap[element.deviceType]);\n          deviceTypeTemp.push(element.deviceType);\n        }\n      });\n    }\n    deviceTypeOptions.value = temp;\n    deviceType.value = deviceTypeTemp;\n  };\n\n  // 数据表格\n  const columns: BasicColumn[] = ref([]);\n  const seriesCount = ref(0); // 展示组串的个数\n  const getColumns = async () => {\n    // 数据表格\n    let preColumns = [\n      {\n        title: '区域',\n        dataIndex: 'areaName',\n        width: 100,\n      },\n      {\n        title: '设备名称',\n        dataIndex: 'deviceName',\n        width: 100,\n      },\n      {\n        title: '状态',\n        dataIndex: 'statusText',\n        width: 100,\n      },\n      // {\n      //   title: '状态',\n      //   dataIndex: 'status',\n      //   width: 100,\n      // },\n    ];\n    if (seriesCount.value > 0) {\n      let showColumns = targetOptions.value.filter((item) => target.value.includes(item.value));\n      for (let i = 1; i <= seriesCount.value; i++) {\n        let children = [];\n\n        showColumns.forEach((item) => {\n          let sonCulomn = {\n            title: item.label,\n            dataIndex: i + '_' + item.value,\n            width: 100,\n          };\n          children.push(sonCulomn);\n        });\n        let headerCulomn = {\n          title: '组串' + i,\n          width: showColumns.length * 100,\n          children: children,\n        };\n        preColumns.push(headerCulomn);\n      }\n    }\n    columns.value = preColumns;\n  };\n  const tableData = ref([]);\n  const checkFlag = ref(false);\n  const loadDataList = async () => {\n    if (selectedStationId.value == '' || area.value.length === 0 || deviceType.value.length === 0) {\n      return;\n    }\n    const paginationRef = getPaginationRef() as any;\n    let param = {\n      stationId: selectedStationId.value,\n      areaIds: area.value,\n      deviceTypeList: deviceType.value,\n      pageNo: paginationRef.current,\n      pageSize: paginationRef.pageSize,\n      needSerialsTmp: 1,\n      indexList: target.value,\n    };\n    let res = await getPvStringRealData(param);\n    seriesCount.value = res.columnSize;\n    await getColumns();\n    if (res.data.list?.length > 0) {\n      res.data.list.forEach((item) => {\n        if (item.serialsTmp != null) {\n          let serMap = item.serialsTmp;\n          let showColumns = targetOptions.value.filter((element) =>\n            target.value.includes(element.value),\n          );\n          for (let k in serMap) {\n            showColumns.forEach((column) => {\n              item[k + '_' + column.value] = serMap[k][column.value];\n            });\n          }\n        }\n      });\n    }\n    tableData.value = res.data.list;\n    return res.data;\n  };\n  const [registerTable, { reload, getPaginationRef }] = useTable({\n    api: loadDataList,\n    columns,\n    bordered: true,\n    pagination: { pageSize: 200, pageSizeOptions: ['20', '50', '100', '200'] },\n  });\n\n  // 获取区域列表数据\n  const getAreaList = async () => {\n    let res = await getAreas({ stationId: selectedStationId.value });\n    if (res?.length) {\n      area.value = ['all'];\n      let temp = [{ label: '全部区域', value: 'all' }];\n      res.forEach((element) => {\n        temp.push({ value: element.id, label: element.name });\n      });\n      areaOptions.value = temp;\n    }\n  };\n  // 选择区域\n  const handleAreaChange = (value: string[]) => {\n    console.log(`selected ${value}`);\n    if (value.length > 1 && value.includes('all')) {\n      if (value[value.length - 1] === 'all') {\n        area.value = ['all'];\n      } else {\n        area.value = value.slice(1);\n      }\n    } else {\n      area.value = value;\n    }\n    reload();\n\n    getPvActualChart();\n  };\n  // 查询电站树数据\n  async function queryDeptTreeList() {\n    let result = await getStationTree();\n    stationTreeData.value = result;\n    // 初始化默认选湖北天门\n    setTimeout(async () => {\n      expandedKeys.value = [result[0].id, result[0].children[0].id];\n      selectedKeys.value = [result[0].children[0].id];\n      selectedStationId.value = result[0].children[0].id;\n      await getAreaList();\n      await getDeviceType();\n      reload();\n      getPvActualChart();\n    }, 500);\n  }\n  // 左侧树状菜单选中事件\n  async function handleSelect(nodes = {}) {\n    selectedStationId.value = null;\n    if (nodes?.id != null && nodes?.nodeKindId == 'station') {\n      selectedStationId.value = nodes.powerStationId;\n      await getAreaList();\n      await getDeviceType();\n      reload();\n      getPvActualChart();\n    }\n  }\n\n  // 选择类型\n  const handleTypeChange = (value: string[]) => {\n    reload();\n  };\n\n  // 选择指标\n  const target = ref(['p_avg', 'p_max']);\n  const targetOptions = ref<SelectProps['options']>([\n    {\n      value: 'pv_total',\n      label: 'PV容量',\n    },\n    {\n      value: 'p_avg',\n      label: '平均功率',\n    },\n    {\n      value: 'p_avg_kw',\n      label: '平均功率/kW',\n    },\n    {\n      value: 'p_max',\n      label: '峰值功率',\n    },\n    {\n      value: 'p_max_kw',\n      label: '峰值功率/kW',\n    },\n    {\n      value: 'p_out_put_power',\n      label: '日发电量',\n    },\n    {\n      value: 'p_out_put_power_kw',\n      label: '日发电量/kW',\n    },\n  ]);\n  const handleTargetChange = (value: string[]) => {\n    console.log(`selected ${value}`);\n    target.value = value;\n    reload();\n    getPvActualChart();\n  };\n\n  // 重置\n  function resetForm() {\n    area.value = [];\n    deviceType.value = [];\n    target.value = [];\n\n    reload();\n    getPvActualChart();\n  }\n\n  // 导出\n  const exportData = async () => {\n    createConfirm({\n      title: '提示',\n      iconType: 'warning',\n      content: '确定要导出所有记录？',\n      async onOk() {\n        let param = {\n          stationId: selectedStationId.value,\n          areaIds: area.value,\n          deviceTypeList: deviceType.value,\n          needSerialsTmp: 1,\n          indexList: target.value,\n        };\n        param.fileName = '组串实时数据';\n        param.excelList = columns.value;\n        await getPvStringExport(param).then((res) => {\n          exportExcelFile(res?.data, param.fileName);\n        });\n      },\n    });\n  };\n  // ---------------------------------------------------组串折线图——————————————————————----------------------------------------\n  const date = ref<Dayjs>();\n  const stationDeviceInfo = reactive({\n    stationId: '',\n    areaId: '',\n    esn: '',\n  });\n  const searchChartData = (record) => {\n    stationDeviceInfo.stationId = selectedStationId.value;\n    stationDeviceInfo.areaId = record.areaId;\n    stationDeviceInfo.esn = record.esn;\n  };\n\n  // 选择折线图指标项\n  const selectedShowData = ref({ label: 'PV容量', value: 'pv_total', dataKind: 'line' });\n  const indicatorOptions = ref([\n    { label: 'pv容量', value: 'pv_total', dataKind: 'line' },\n    { label: '平均功率', value: 'p_avg', dataKind: 'line' },\n    { label: '平均给功率/kW', value: 'p_avg_kw', dataKind: 'line' },\n    { label: '峰值功率', value: 'p_max', dataKind: 'line' },\n    { label: '峰值功率/kW', value: 'p_max_kw', dataKind: 'line' },\n    { label: '日发电量', value: 'pv_output_power_day', dataKind: 'line' },\n    { label: '日发电量/kW', value: 'pv_output_power_day_kw', dataKind: 'line' },\n  ]);\n  async function handleSelectionChange(label, value: any) {\n    selectedShowData.value = value;\n    getPvActualChart();\n  }\n\n  // 输入总功率,输出有功功率,输出无功功率 => 曲线\n  const getPvActualChart = async () => {\n    let res = [];\n    if (selectedStationId.value == '' || area.value.length === 0 || deviceType.value.length === 0) {\n      res = [];\n    } else {\n      let param = {\n        stationId: selectedStationId.value,\n        showData: selectedShowData.value.value,\n        deviceTypeList: deviceType.value,\n        areaIds: area.value,\n        indexList: [selectedShowData.value.value],\n      };\n      res = await getPvStringChartData(param);\n    }\n\n    _option(res);\n  };\n  const showChart = ref(false);\n\n  const options = {\n    color: [\n      '#1729F6',\n      '#FCAB28',\n      '#09D963',\n      '#FF1EE9',\n      '#B32630',\n      '#009588',\n      '#C9930F',\n      '#FF5906',\n      '#f3a33f',\n      '#fe8466',\n      '#8A69FF',\n      '#FF7669',\n    ],\n    tooltip: {\n      show: true,\n      trigger: 'axis',\n      formatter: '台',\n      axisPointer: {\n        type: 'line',\n        lineStyle: {\n          type: 'dashed',\n          color: 'rgba(1,180,241,.5)',\n        },\n        crossStyle: {\n          type: 'dashed',\n          color: 'rgba(1,180,241,.5)',\n        },\n      },\n      backgroundColor: ' #f5fbfb',\n      borderColor: '#c6ecea',\n      borderWidth: 1,\n    },\n    dataZoom: [{ type: 'inside' }],\n    legend: {\n      top: 20,\n      right: 200,\n      padding: [10, 0],\n      itemGap: 14,\n      itemWidth: 14,\n      itemHeight: 10,\n      textStyle: {\n        color: '#bce2e3',\n      },\n    },\n    grid: {\n      top: 50,\n      bottom: 30,\n      left: 40,\n      right: 10,\n    },\n    xAxis: {\n      type: 'category',\n      boundaryGap: true,\n      axisTick: {\n        alignWithLabel: true,\n        show: false,\n      },\n      axisLine: {\n        lineStyle: {\n          color: '#ccc',\n        },\n      },\n      axisLabel: {\n        color: '#888',\n      },\n    },\n    yAxis: {\n      type: 'value',\n      nameTextStyle: {\n        color: '#888',\n      },\n      axisLine: {\n        show: true,\n        lineStyle: {\n          color: '#ccc',\n        },\n      },\n      axisLabel: {\n        color: '#888',\n        formatter: '{value}',\n      },\n      axisTick: {\n        show: false,\n      },\n      splitLine: {\n        lineStyle: {\n          color: 'rgba(0, 0, 0, .1)',\n          type: 'dashed',\n        },\n      },\n    },\n  };\n  const myEchart = shallowRef({});\n  function _option(data, name) {\n    let option = JSON.parse(JSON.stringify(options)),\n      legend = [],\n      series = [];\n    option.xAxis.data = data.xList; // x轴\n    legend.push(selectedShowData.value.label);\n    let showName = selectedShowData.value.label;\n    // option.yAxis[0].name = 'w'; // y轴单位\n    series.push({\n      name,\n      data: data.yList,\n      type: 'line',\n      showSymbol: true,\n      symbol: 'circle',\n      symbolSize: 10,\n      smooth: 0,\n      lineStyle: {\n        width: 2,\n        color: 'rgba(64,202,192,1)',\n      },\n      itemStyle: {\n        normal: {\n          shadowColor: 'rgba(0,0,0,0.1)',\n          shadowBlur: 6,\n          borderWidth: 3,\n          borderColor: '#fff',\n          color: '#40cac0',\n        },\n      },\n    });\n    option.series = series;\n    option.legend.data = legend;\n    option.tooltip.formatter = (params) => {\n      return (\n        '<p style=\"text-align: left;color:#666;opacity: .8; line-height: 20px;font-size:12px;\">' +\n        params[0].axisValue +\n        '</p> ' +\n        '<p style=\"font-size:12px;color:#666;\">' +\n        showName +\n        ':  <span style=\"color: #3ccacc;font-size:13px;font-weight:bold;\">' +\n        params[0].data +\n        '</span></p>'\n      );\n    };\n    setTimeout(() => {\n      showChart.value = true;\n      initChart(option);\n    });\n  }\n  function initChart(data, callback) {\n    const main = document.getElementById('customerChart');\n    myEchart.value = echarts.init(main);\n    myEchart.value.setOption(data, true);\n    //窗口改变时重绘echarts,使用函数节流提高性能\n    callback && callback(myEchart);\n    window.addEventListener('resize', () => {\n      myEchart.value.resize();\n    });\n  }\n  // 获取实时遥测数据\n  // const ycData = ref([]);\n  // const getYcData = async (deviceItem) => {\n  //   let res = await getRealTimeYc({\n  //     stationId: selectedStationId.value,\n  //     areaId: deviceItem.areaId,\n  //     esn: deviceItem.esn,\n  //     dataType: 3,\n  //   });\n  //   ycData.value = res;\n  // };\n\n  // 获取数据\n  // const loadChartData = async () => {\n  //   let params = {};\n  //   let esns = [];\n  //   esns.push(selectedEsn.value);\n  //   params.queryFieldList = target.value;\n  //   params.startDate = formatDate(date.value);\n  //   params.endDate = formatDate(date.value);\n  //   params.esns = esns;\n  //   params.esn = selectedEsn.value;\n  //   params.dataType = 1;\n  //   let res = await getChartData(params);\n  //   pchartData.lineData = res[0].dataList;\n  //   pchartData.categories = res[0].timeList;\n  //   pchartData.units = res[0].unitList;\n  //   pChartSeriesName.value = res[0].zhList;\n  // };\n  onMounted(() => {\n    queryDeptTreeList();\n\n    // 初始化日期\n    let current = new Date();\n    date.value = dayjs(formatDate(current), 'YYYY-MM-DD');\n  });\n</script>\n\n<style lang=\"less\">\n  @import '../style/themes.less';\n</style>\n\n<style lang=\"less\" scoped>\n  .real-time-analysis {\n    height: 100%;\n    padding: 10px;\n\n    .real-time-analysis-row {\n      height: 100%;\n    }\n\n    .fit-common-tree {\n      height: 100%;\n      margin: 0 !important;\n      border: none !important;\n    }\n\n    .right-box {\n      height: 100%;\n      padding-left: 10px;\n\n      .right-row-box {\n        width: 100%;\n        height: calc(50% - 5px);\n        margin-bottom: 10px;\n        border-radius: 2px;\n\n        &:last-child {\n          margin-bottom: 0;\n        }\n\n        .box-header {\n          display: flex;\n          align-items: center;\n          justify-content: space-between;\n          height: 48px;\n          padding: 0 16px;\n          font-size: 14px;\n          line-height: 47px;\n        }\n\n        .data-table-box {\n          position: relative;\n\n          :deep(.vben-basic-table .ant-table-wrapper) {\n            padding: 7px 16px 8px;\n          }\n\n          :deep(.vben-basic-title.vben-basic-table-title) {\n            padding-left: 0;\n            font-size: 14px;\n          }\n\n          :deep(.ant-table-title) {\n            position: relative;\n            margin-bottom: 10px;\n          }\n\n          :deep(.table-settings) {\n            padding: 7px 0 1px;\n          }\n\n          :deep(.vben-basic-table-header__toolbar > .table-settings) {\n            margin-right: 0;\n          }\n\n          :deep(.table-settings > span:last-child) {\n            margin-right: 0;\n          }\n\n          .select-box {\n            display: flex;\n            align-items: center;\n            margin-right: 20px;\n\n            &:last-child {\n              margin-right: 0;\n            }\n\n            .select-label-box {\n              margin-right: 6px;\n              font-size: 14px;\n            }\n          }\n\n          .status-icon {\n            display: inline-block;\n            width: 12px;\n            height: 12px;\n            border-radius: 50%;\n\n            &.green {\n              background-color: #52c41a;\n            }\n\n            &.red {\n              background-color: #ff4d4f;\n            }\n\n            &.grey {\n              background-color: #999;\n            }\n\n            &.white {\n              background-color: #f5f4f4;\n            }\n          }\n\n          .table-title-line {\n            position: absolute;\n            z-index: 1;\n            top: 45px;\n            left: 0;\n            width: 100%;\n            height: 1px;\n            opacity: 0.85;\n          }\n        }\n      }\n    }\n  }\n</style>\n"],"names":["createConfirm","useMessage","reactive","ref","statusMap","stationTreeData","selectedStationId","selectedKeys","computed","expandedKeys","area","areaOptions","deviceType","deviceTypeOptions","deviceTypeMap","handleDeviceTypeChange","value","reload","getPvActualChart","getDeviceType","__async","res","getDeviceTypes","temp","tempTypes","deviceTypeTemp","element","columns","seriesCount","getColumns","preColumns","showColumns","targetOptions","item","target","i","children","sonCulomn","headerCulomn","tableData","loadDataList","paginationRef","getPaginationRef","param","getPvStringRealData","_a","serMap","k","column","registerTable","useTable","getAreaList","getAreas","handleAreaChange","queryDeptTreeList","result","getStationTree","handleSelect","nodes","handleTargetChange","resetForm","exportData","getPvStringExport","exportExcelFile","date","stationDeviceInfo","searchChartData","record","selectedShowData","indicatorOptions","handleSelectionChange","label","getPvStringChartData","_option","showChart","options","myEchart","shallowRef","data","name","option","legend","series","showName","params","initChart","callback","main","echarts.init","onMounted","current","dayjs","formatDate"],"mappings":"grEAqJQ,KAAA,CAAE,cAAAA,GAAkBC,KAEPC,EAAS,CAC1B,QAAS,CAAC,EACV,SAAU,CAAC,EACX,WAAY,CAAC,EACb,MAAO,CAAC,EACR,OAAQ,CACN,CAAC,UAAW,SAAS,EACrB,CAAC,UAAW,SAAS,EACrB,CAAC,UAAW,SAAS,CACvB,CAAA,CACD,EACwBC,EAAI,CAAA,CAAE,EAE/B,MAAMC,EAAY,CAChB,OAAQ,QACR,MAAO,MACP,UAAW,OACX,KAAM,OAAA,EAGFC,EAAkBF,EAAgB,CAAA,CAAE,EACpCG,EAAoBH,EAAI,EAAE,EAC1BI,EAAeC,GAAS,IACrB,CAACF,EAAkB,KAAK,CAChC,EACKG,EAAeN,EAAI,CAAA,CAAE,EAGrBO,EAAOP,EAAI,CAAC,KAAK,CAAC,EAClBQ,EAAcR,EAA4B,CAAA,CAAE,EAG5CS,EAAaT,EAAI,CAAA,CAAE,EACnBU,EAAoBV,EAA4B,CAAA,CAAE,EAClDW,EAAgB,CACpB,gBAAiB,CACf,MAAO,kBACP,MAAO,QACT,EACA,WAAY,CACV,MAAO,aACP,MAAO,OACT,CAAA,EAEIC,EAA0BC,GAAoB,CAClDJ,EAAW,MAAQI,EACZC,IACUC,GAAA,EAGbC,EAAgB,IAAYC,EAAA,sBAC5B,IAAAC,EAAM,MAAMC,GAAe,CAC7B,UAAWhB,EAAkB,KAAA,CAC9B,EACGiB,EAAO,CAAA,EACPC,EAAY,CAAC,kBAAmB,YAAY,EAC5CC,EAAiB,CAAA,EACjBJ,GAAO,MACLA,EAAA,QAASK,GAAY,CACnBF,EAAU,SAASE,EAAQ,UAAU,IACvCH,EAAK,KAAKT,EAAcY,EAAQ,UAAU,CAAC,EAC5BD,EAAA,KAAKC,EAAQ,UAAU,EACxC,CACD,EAEHb,EAAkB,MAAQU,EAC1BX,EAAW,MAAQa,CAAA,GAIfE,EAAyBxB,EAAI,CAAA,CAAE,EAC/ByB,EAAczB,EAAI,CAAC,EACnB0B,EAAa,IAAYT,EAAA,sBAE7B,IAAIU,EAAa,CACf,CACE,MAAO,KACP,UAAW,WACX,MAAO,GACT,EACA,CACE,MAAO,OACP,UAAW,aACX,MAAO,GACT,EACA,CACE,MAAO,KACP,UAAW,aACX,MAAO,GACT,CAAA,EAOE,GAAAF,EAAY,MAAQ,EAAG,CACrB,IAAAG,EAAcC,EAAc,MAAM,OAAQC,GAASC,EAAO,MAAM,SAASD,EAAK,KAAK,CAAC,EACxF,QAASE,EAAI,EAAGA,GAAKP,EAAY,MAAOO,IAAK,CAC3C,IAAIC,EAAW,CAAA,EAEHL,EAAA,QAASE,GAAS,CAC5B,IAAII,EAAY,CACd,MAAOJ,EAAK,MACZ,UAAWE,EAAI,IAAMF,EAAK,MAC1B,MAAO,GAAA,EAETG,EAAS,KAAKC,CAAS,CAAA,CACxB,EACD,IAAIC,EAAe,CACjB,MAAO,KAAOH,EACd,MAAOJ,EAAY,OAAS,IAC5B,SAAAK,CAAA,EAEFN,EAAW,KAAKQ,CAAY,CAC9B,CACF,CACAX,EAAQ,MAAQG,CAAA,GAEZS,EAAYpC,EAAI,CAAA,CAAE,EACNA,EAAI,EAAK,EAC3B,MAAMqC,EAAe,IAAYpB,EAAA,4BAC3B,GAAAd,EAAkB,OAAS,IAAMI,EAAK,MAAM,SAAW,GAAKE,EAAW,MAAM,SAAW,EAC1F,OAEF,MAAM6B,EAAgBC,IACtB,IAAIC,EAAQ,CACV,UAAWrC,EAAkB,MAC7B,QAASI,EAAK,MACd,eAAgBE,EAAW,MAC3B,OAAQ6B,EAAc,QACtB,SAAUA,EAAc,SACxB,eAAgB,EAChB,UAAWP,EAAO,KAAA,EAEhBb,EAAM,MAAMuB,GAAoBD,CAAK,EACzC,OAAAf,EAAY,MAAQP,EAAI,WACxB,MAAMQ,EAAW,IACbgB,EAAAxB,EAAI,KAAK,OAAT,YAAAwB,EAAe,QAAS,GAC1BxB,EAAI,KAAK,KAAK,QAASY,GAAS,CAC1B,GAAAA,EAAK,YAAc,KAAM,CAC3B,IAAIa,EAASb,EAAK,WACdF,EAAcC,EAAc,MAAM,OAAQN,GAC5CQ,EAAO,MAAM,SAASR,EAAQ,KAAK,CAAA,EAErC,QAASqB,KAAKD,EACAf,EAAA,QAASiB,GAAW,CACzBf,EAAAc,EAAI,IAAMC,EAAO,KAAK,EAAIF,EAAOC,CAAC,EAAEC,EAAO,KAAK,CAAA,CACtD,CAEL,CAAA,CACD,EAEOT,EAAA,MAAQlB,EAAI,KAAK,KACpBA,EAAI,IAAA,GAEP,CAAC4B,EAAe,CAAE,OAAAhC,EAAQ,iBAAAyB,CAAkB,CAAA,EAAIQ,GAAS,CAC7D,IAAKV,EACL,QAAAb,EACA,SAAU,GACV,WAAY,CAAE,SAAU,IAAK,gBAAiB,CAAC,KAAM,KAAM,MAAO,KAAK,CAAE,CAAA,CAC1E,EAGKwB,EAAc,IAAY/B,EAAA,sBAC9B,IAAIC,EAAM,MAAM+B,GAAS,CAAE,UAAW9C,EAAkB,MAAO,EAC/D,GAAIe,GAAA,MAAAA,EAAK,OAAQ,CACVX,EAAA,MAAQ,CAAC,KAAK,EACnB,IAAIa,EAAO,CAAC,CAAE,MAAO,OAAQ,MAAO,MAAO,EACvCF,EAAA,QAASK,GAAY,CAClBH,EAAA,KAAK,CAAE,MAAOG,EAAQ,GAAI,MAAOA,EAAQ,KAAM,CAAA,CACrD,EACDf,EAAY,MAAQY,CACtB,CAAA,GAGI8B,EAAoBrC,GAAoB,CACpC,QAAA,IAAI,YAAYA,CAAK,EAAE,EAC3BA,EAAM,OAAS,GAAKA,EAAM,SAAS,KAAK,EACtCA,EAAMA,EAAM,OAAS,CAAC,IAAM,MACzBN,EAAA,MAAQ,CAAC,KAAK,EAEdA,EAAA,MAAQM,EAAM,MAAM,CAAC,EAG5BN,EAAK,MAAQM,EAERC,IAEUC,GAAA,EAGnB,SAAeoC,GAAoB,QAAAlC,EAAA,sBAC7B,IAAAmC,EAAS,MAAMC,KACnBnD,EAAgB,MAAQkD,EAExB,WAAW,IAAYnC,EAAA,sBACrBX,EAAa,MAAQ,CAAC8C,EAAO,CAAC,EAAE,GAAIA,EAAO,CAAC,EAAE,SAAS,CAAC,EAAE,EAAE,EAC/ChD,EAAA,MAAQ,CAACgD,EAAO,CAAC,EAAE,SAAS,CAAC,EAAE,EAAE,EAC9CjD,EAAkB,MAAQiD,EAAO,CAAC,EAAE,SAAS,CAAC,EAAE,GAChD,MAAMJ,EAAY,EAClB,MAAMhC,EAAc,EACbF,IACUC,MAChB,GAAG,CACR,GAEe,SAAAuC,GAAyB,QAAArC,EAAA,yBAAZsC,EAAQ,GAAI,CACtCpD,EAAkB,MAAQ,MACtBoD,GAAA,YAAAA,EAAO,KAAM,OAAQA,GAAA,YAAAA,EAAO,aAAc,YAC5CpD,EAAkB,MAAQoD,EAAM,eAChC,MAAMP,EAAY,EAClB,MAAMhC,EAAc,EACbF,IACUC,IAErB,GAQA,MAAMgB,EAAS/B,EAAI,CAAC,QAAS,OAAO,CAAC,EAC/B6B,EAAgB7B,EAA4B,CAChD,CACE,MAAO,WACP,MAAO,MACT,EACA,CACE,MAAO,QACP,MAAO,MACT,EACA,CACE,MAAO,WACP,MAAO,SACT,EACA,CACE,MAAO,QACP,MAAO,MACT,EACA,CACE,MAAO,WACP,MAAO,SACT,EACA,CACE,MAAO,kBACP,MAAO,MACT,EACA,CACE,MAAO,qBACP,MAAO,SACT,CAAA,CACD,EACKwD,EAAsB3C,GAAoB,CACtC,QAAA,IAAI,YAAYA,CAAK,EAAE,EAC/BkB,EAAO,MAAQlB,EACRC,IACUC,GAAA,EAInB,SAAS0C,IAAY,CACnBlD,EAAK,MAAQ,GACbE,EAAW,MAAQ,GACnBsB,EAAO,MAAQ,GAERjB,IACUC,GACnB,CAGA,MAAM2C,GAAa,IAAYzC,EAAA,sBACfpB,EAAA,CACZ,MAAO,KACP,SAAU,UACV,QAAS,aACH,MAAO,QAAAoB,EAAA,sBACX,IAAIuB,EAAQ,CACV,UAAWrC,EAAkB,MAC7B,QAASI,EAAK,MACd,eAAgBE,EAAW,MAC3B,eAAgB,EAChB,UAAWsB,EAAO,KAAA,EAEpBS,EAAM,SAAW,SACjBA,EAAM,UAAYhB,EAAQ,MAC1B,MAAMmC,GAAkBnB,CAAK,EAAE,KAAMtB,GAAQ,CAC3B0C,GAAA1C,GAAA,YAAAA,EAAK,KAAMsB,EAAM,QAAQ,CAAA,CAC1C,CACH,GAAA,CACD,CAAA,GAGGqB,GAAO7D,IACP8D,EAAoB/D,EAAS,CACjC,UAAW,GACX,OAAQ,GACR,IAAK,EAAA,CACN,EACKgE,GAAmBC,GAAW,CAClCF,EAAkB,UAAY3D,EAAkB,MAChD2D,EAAkB,OAASE,EAAO,OAClCF,EAAkB,IAAME,EAAO,GAAA,EAI3BC,EAAmBjE,EAAI,CAAE,MAAO,OAAQ,MAAO,WAAY,SAAU,MAAA,CAAQ,EAC7EkE,GAAmBlE,EAAI,CAC3B,CAAE,MAAO,OAAQ,MAAO,WAAY,SAAU,MAAO,EACrD,CAAE,MAAO,OAAQ,MAAO,QAAS,SAAU,MAAO,EAClD,CAAE,MAAO,WAAY,MAAO,WAAY,SAAU,MAAO,EACzD,CAAE,MAAO,OAAQ,MAAO,QAAS,SAAU,MAAO,EAClD,CAAE,MAAO,UAAW,MAAO,WAAY,SAAU,MAAO,EACxD,CAAE,MAAO,OAAQ,MAAO,sBAAuB,SAAU,MAAO,EAChE,CAAE,MAAO,UAAW,MAAO,yBAA0B,SAAU,MAAO,CAAA,CACvE,EACc,SAAAmE,GAAsBC,EAAOvD,EAAY,QAAAI,EAAA,sBACtDgD,EAAiB,MAAQpD,EACRE,GACnB,GAGA,MAAMA,EAAmB,IAAYE,EAAA,sBACnC,IAAIC,EAAM,CAAA,EACN,GAAAf,EAAkB,OAAS,IAAMI,EAAK,MAAM,SAAW,GAAKE,EAAW,MAAM,SAAW,EAC1FS,EAAM,CAAA,MACD,CACL,IAAIsB,EAAQ,CACV,UAAWrC,EAAkB,MAC7B,SAAU8D,EAAiB,MAAM,MACjC,eAAgBxD,EAAW,MAC3B,QAASF,EAAK,MACd,UAAW,CAAC0D,EAAiB,MAAM,KAAK,CAAA,EAEpC/C,EAAA,MAAMmD,GAAqB7B,CAAK,CACxC,CAEA8B,GAAQpD,CAAG,CAAA,GAEPqD,GAAYvE,EAAI,EAAK,EAErBwE,GAAU,CACd,MAAO,CACL,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,SACF,EACA,QAAS,CACP,KAAM,GACN,QAAS,OACT,UAAW,IACX,YAAa,CACX,KAAM,OACN,UAAW,CACT,KAAM,SACN,MAAO,oBACT,EACA,WAAY,CACV,KAAM,SACN,MAAO,oBACT,CACF,EACA,gBAAiB,WACjB,YAAa,UACb,YAAa,CACf,EACA,SAAU,CAAC,CAAE,KAAM,SAAU,EAC7B,OAAQ,CACN,IAAK,GACL,MAAO,IACP,QAAS,CAAC,GAAI,CAAC,EACf,QAAS,GACT,UAAW,GACX,WAAY,GACZ,UAAW,CACT,MAAO,SACT,CACF,EACA,KAAM,CACJ,IAAK,GACL,OAAQ,GACR,KAAM,GACN,MAAO,EACT,EACA,MAAO,CACL,KAAM,WACN,YAAa,GACb,SAAU,CACR,eAAgB,GAChB,KAAM,EACR,EACA,SAAU,CACR,UAAW,CACT,MAAO,MACT,CACF,EACA,UAAW,CACT,MAAO,MACT,CACF,EACA,MAAO,CACL,KAAM,QACN,cAAe,CACb,MAAO,MACT,EACA,SAAU,CACR,KAAM,GACN,UAAW,CACT,MAAO,MACT,CACF,EACA,UAAW,CACT,MAAO,OACP,UAAW,SACb,EACA,SAAU,CACR,KAAM,EACR,EACA,UAAW,CACT,UAAW,CACT,MAAO,oBACP,KAAM,QACR,CACF,CACF,CAAA,EAEIC,EAAWC,GAAW,CAAA,CAAE,EACrB,SAAAJ,GAAQK,EAAMC,EAAM,CAC3B,IAAIC,EAAS,KAAK,MAAM,KAAK,UAAUL,EAAO,CAAC,EAC7CM,EAAS,GACTC,EAAS,CAAA,EACJF,EAAA,MAAM,KAAOF,EAAK,MAClBG,EAAA,KAAKb,EAAiB,MAAM,KAAK,EACpC,IAAAe,EAAWf,EAAiB,MAAM,MAEtCc,EAAO,KAAK,CACV,KAAAH,EACA,KAAMD,EAAK,MACX,KAAM,OACN,WAAY,GACZ,OAAQ,SACR,WAAY,GACZ,OAAQ,EACR,UAAW,CACT,MAAO,EACP,MAAO,oBACT,EACA,UAAW,CACT,OAAQ,CACN,YAAa,kBACb,WAAY,EACZ,YAAa,EACb,YAAa,OACb,MAAO,SACT,CACF,CAAA,CACD,EACDE,EAAO,OAASE,EAChBF,EAAO,OAAO,KAAOC,EACdD,EAAA,QAAQ,UAAaI,GAExB,yFACAA,EAAO,CAAC,EAAE,UACV,8CAEAD,EACA,oEACAC,EAAO,CAAC,EAAE,KACV,cAGJ,WAAW,IAAM,CACfV,GAAU,MAAQ,GAClBW,GAAUL,CAAM,CAAA,CACjB,CACH,CACS,SAAAK,GAAUP,EAAMQ,EAAU,CAC3B,MAAAC,EAAO,SAAS,eAAe,eAAe,EAC3CX,EAAA,MAAQY,GAAaD,CAAI,EACzBX,EAAA,MAAM,UAAUE,EAAM,EAAI,EAEnCQ,GAAYA,EAASV,CAAQ,EACtB,OAAA,iBAAiB,SAAU,IAAM,CACtCA,EAAS,MAAM,QAAO,CACvB,CACH,CA8BA,OAAAa,GAAU,IAAM,CACInC,IAGd,IAAAoC,MAAc,KAClB1B,GAAK,MAAQ2B,GAAMC,GAAWF,CAAO,EAAG,YAAY,CAAA,CACrD"}