{"version":3,"file":"data-6f7533e0.js","sources":["../../src/views/po/integrated/training/data.ts"],"sourcesContent":["import { BasicColumn, FormProps, useRender } from '/@/components/Table';\nimport { useUserStore } from '/@/store/modules/user';\nimport { defHttp } from '/@/utils/http/axios';\n\nenum Api {\n  getStationTreeData = '/baseset/common/list-orgStationTree',\n\n  getTearchUrl = '/system/org/list-tree',\n\n  createTrainingUrl = '/po/training-record/create',\n  updateTrainingUrl = '/po/training-record/update',\n\n  getTrainingUrl = '/po/training-record/get',\n  deleteTrainingUrl = '/po/training-record/delete',\n  getTrainingListUrl = '/po/training-record/page',\n\n  exprotTrainingListUrl = '/po/training-record/export-excel',\n\n  getTrainingDtlUrl = '/po/training-record/detail',\n}\n// 电站树数据\nexport const getStationTreeList = (params) =>\n  defHttp.post({ url: Api.getStationTreeData, params }, { isOnlyResult: true });\n\n//获取讲师数据\nexport const getTeacherData = (params) => defHttp.post({ url: Api.getTearchUrl, params }, {});\n\n//获取培训记录列表\nexport const getTrainingList = (params) =>\n  defHttp.get({ url: Api.getTrainingListUrl, params }, { isOnlyResult: true });\n//保存培训记录\nexport const saveTraining = (params) => {\n  if (!params.id) {\n    return createTraining(params);\n  }\n  return updateTraining(params);\n};\n//新增培训记录\nexport const createTraining = (params) =>\n  defHttp.post({ url: Api.createTrainingUrl, params }, { isOnlyResult: true });\n//修改培训记录\nexport const updateTraining = (params) =>\n  defHttp.post({ url: Api.updateTrainingUrl, params }, { isOnlyResult: true });\n//获取培训记录主数据\nexport const getTraining = (params) => defHttp.get({ url: Api.getTrainingUrl, params }, {});\n//删除培训记录\nexport const deleteTraining = (params) =>\n  defHttp.delete({ url: Api.deleteTrainingUrl, params }, { isOnlyResult: true });\n//导出培训记录\nexport const exprotTrainingList = (params) =>\n  defHttp.download({ url: Api.exprotTrainingListUrl, params }, { isReturnNativeResponse: true });\n\n//获取明细\nexport const getTrainingDtl = (params) =>\n  defHttp.get({ url: Api.getTrainingDtlUrl, params }, { isOnlyResult: true });\n\n// 表格SearchForm字段\nexport const searchFormSchema: Partial<FormProps> = {\n  labelWidth: 120,\n  actionColOptions: {\n    span: 24,\n  },\n  autoAdvancedLine: 1,\n  showAdvancedButton: true,\n  baseColProps: {\n    span: 7,\n  },\n  autoSubmitOnEnter: true,\n  noHideBtnFlag: true,\n  schemas: [\n    {\n      field: `billCode`,\n      label: `单据编号`,\n      component: 'Input',\n      componentProps: { placeholder: '请输入单据编号' },\n    },\n    {\n      field: `subject`,\n      label: `培训主题`,\n      component: 'Input',\n      componentProps: { placeholder: '请输入培训主题' },\n    },\n    {\n      label: `培训类型`,\n      field: `trainingType`,\n      component: 'DictSelectBox',\n      componentProps: {\n        type: 'trainingType',\n      },\n    },\n    {\n      label: `培训方式`,\n      field: `trainingWay`,\n      component: 'DictSelectBox',\n      componentProps: {\n        type: 'trainingMethod',\n      },\n    },\n    {\n      field: '[startTime, endTime]',\n      label: '培训时间',\n      component: 'RangePicker',\n      colProps: { span: 8 },\n      componentProps: {\n        showTime:true,\n        format: 'YYYY-MM-DD HH:mm:ss',\n        valueFormat: 'YYYY-MM-DD HH:mm:ss',\n        placeholder: ['培训开始日期', '培训结束日期'],\n      },\n    },\n    {\n      label: '状态',\n      field: 'status',\n      component: 'DictSelectBox',\n      componentProps: {\n        type: 'bpm_process_instance_result',\n      },\n    },\n  ],\n};\n\n//主页面列表字段展示\nexport const columns: BasicColumn[] = [\n  // { title: 'id', dataIndex: 'id', width: 150, defaultHidden: true },\n  { title: '单据编号', dataIndex: 'billCode', width: 200, sorter: true, resizable: true },\n  // { title: '所属公司id', dataIndex: 'stationOrganId', width: 150, defaultHidden: true },\n  {\n    title: '所属公司',\n    dataIndex: 'stationOrganName',\n    width: 150,\n    sorter: true,\n    resizable: true,\n    ifShow: useUserStore().isMultiOrganization,\n  },\n  // { title: '电站id', dataIndex: 'stationId', width: 150, defaultHidden: true },\n  { title: '电站名称', dataIndex: 'stationName', width: 150, sorter: true, resizable: true },\n  { title: '培训主题', dataIndex: 'subject', width: 150, sorter: true, resizable: true },\n  { title: '培训学时', dataIndex: 'trainingHours', width: 150, sorter: true, resizable: true },\n  { title: '培训开始时间', dataIndex: 'startTime', width: 150, sorter: true, resizable: true },\n  { title: '培训结束时间', dataIndex: 'endTime', width: 150, sorter: true, resizable: true },\n  {\n    title: '培训类型',\n    dataIndex: 'trainingType',\n    width: 150,\n    sorter: true,\n    resizable: true,\n    customRender: ({ record }) => {\n      return record.trainingTypeText;\n    },\n  },\n  {\n    title: '培训方式',\n    dataIndex: 'trainingWay',\n    width: 150,\n    sorter: true,\n    resizable: true,\n    customRender: ({ record }) => {\n      return record.trainingWayText;\n    },\n  },\n  { title: '计划人数', dataIndex: 'plannedNumber', width: 150, sorter: true, resizable: true },\n  { title: '实到人数', dataIndex: 'actualNumber', width: 150, sorter: true, resizable: true },\n  // { title: '创建人id', dataIndex: 'personMemberId', width: 150, defaultHidden: true },\n  { title: '创建人', dataIndex: 'personMemberName', width: 150, sorter: true, resizable: true },\n  { title: '创建时间', dataIndex: 'fillinDate', width: 150, sorter: true, resizable: true },\n  {\n    title: '状态',\n    dataIndex: 'status',\n    sorter: true,\n    resizable: true,\n    customRender: ({ text, record }) => {\n      return useRender.renderFlowStatus(text, record.statusText);\n    },\n  },\n];\n\n//内部信息\nexport const internalColumns: BasicColumn[] = [\n  { title: 'id', dataIndex: '', width: 140, defaultHidden: true },\n  { title: '内部外部类型', dataIndex: 'trainingType', width: 140, defaultHidden: true },\n  { title: '讲师', dataIndex: 'teacher', width: 100 },\n  { title: '开始时间', dataIndex: 'startTime', width: 140 },\n  { title: '结束时间', dataIndex: 'endTime', width: 140 },\n  { title: '时长', dataIndex: 'trainingHours', width: 220 },\n  { title: 'sort', dataIndex: 'sort', width: 220, defaultHidden: true },\n  { title: 'key', dataIndex: 'key', width: 220, defaultHidden: true },\n];\n\n//外部信息\nexport const externalColumns: BasicColumn[] = [\n  { title: 'id', dataIndex: '', width: 140, defaultHidden: true },\n  { title: '内部外部类型', dataIndex: 'trainingType', width: 140, defaultHidden: true },\n  { title: '培训费用', dataIndex: 'trainingCost', width: 100 },\n  { title: '外部单位', dataIndex: 'trainingCompanyName', width: 100 },\n  { title: '讲师', dataIndex: 'teacher', width: 100 },\n  { title: '开始时间', dataIndex: 'startTime', width: 140 },\n  { title: '结束时间', dataIndex: 'endTime', width: 140 },\n  { title: '时长', dataIndex: 'trainingHours', width: 220 },\n  { title: 'sort', dataIndex: 'sort', width: 220, defaultHidden: true },\n  { title: 'key', dataIndex: 'key', width: 220, defaultHidden: true },\n];\n\n//明细表格设置\nexport const detailTableProps: any = {\n  pagination: false,\n  striped: false,\n  useSearchForm: false,\n  showTableSetting: false,\n  bordered: true,\n  showIndexColumn: true,\n  resizeHeightOffset: 31,\n  canResize: false,\n  actionColumn: {\n    width: 80,\n    title: '操作',\n    dataIndex: 'action',\n  },\n};\n"],"names":["getStationTreeList","params","defHttp","getTeacherData","getTrainingList","saveTraining","updateTraining","createTraining","getTraining","exprotTrainingList","getTrainingDtl","searchFormSchema","columns","useUserStore","record","text","useRender","internalColumns","externalColumns","detailTableProps"],"mappings":"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"}