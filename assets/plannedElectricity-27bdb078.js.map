{"version":3,"file":"plannedElectricity-27bdb078.js","sources":["../../src/views/po/elec/plannedelectricity/plannedElectricity.ts"],"sourcesContent":["import { defHttp } from '/@/utils/http/axios';\nimport { BasicColumn } from '/@/components/Table';\nimport { useRender } from '@/components/Table';\nimport { reactive, ref } from 'vue';\nimport { useUserStore } from '/@/store/modules/user';\n\nenum Api {\n  treeData = '/baseset/common/list-orgStationPeriodTree',\n  areaList = '/po/plannedElectricity/page',\n  insertUrl = '/po/plannedElectricity/create',\n  checkProcessingUrl = '/po/plannedElectricity/checkProcessing',\n  updateUrl = '/po/plannedElectricity/update',\n  getPeriods = '/po/plannedElectricity/periods',\n  deleteUrl = '/po/plannedElectricity/delete',\n  getIndexUrl = '/po/plannedElectricity/get',\n  elecDataUrl = '/po/plannedElectricity/getElecData',\n  getConnectDataUrl = '/po/plannedElectricity/getConnectData',\n  getPlannedElectricityDtlUrl = '/po/plannedElectricity/getPlannedElectricityDtl',\n  IMPORT_EXCEL_URL = '/admin-api/po/plannedElectricity/import-excel',\n  insertDtlUrl = '/po/plannedElectricity/saveDetail',\n  exportExcel = '/po/plannedElectricity/export-excel',\n}\n\nexport const importExcelUrl = Api.IMPORT_EXCEL_URL;\nexport function getPlannedElectricityListColumns(options: any[]): BasicColumn[] {\n  return [\n    {\n      title: '单据编号',\n      dataIndex: 'billCode',\n      width: 160,\n      resizable: true,\n      sorter: true,\n    },\n    {\n      title: '所属公司',\n      dataIndex: 'stationOrganName',\n      width: 160,\n      sorter: true,\n      resizable: true,\n      headAlign: 'center',\n      align: 'left',\n      ifShow: useUserStore().isMultiOrganization,\n    },\n    {\n      title: '电站名称',\n      dataIndex: 'stationName',\n      width: 160,\n      headAlign: 'center',\n      align: 'left',\n      resizable: true,\n      sorter: true,\n    },\n    {\n      title: '期数',\n      dataIndex: 'periodName',\n      width: 160,\n      headAlign: 'center',\n      align: 'center',\n      resizable: true,\n      sorter: true,\n    },\n    {\n      title: '并网容量(MW)',\n      dataIndex: 'connectCapacity',\n      width: 160,\n      headAlign: 'center',\n      align: 'right',\n      resizable: true,\n      sorter: true,\n    },\n    {\n      title: '全容量并网时间',\n      dataIndex: 'fullGirdDate',\n      width: 160,\n      resizable: true,\n      sorter: true,\n    },\n    {\n      title: '版本',\n      dataIndex: 'bizVersion',\n      width: 160,\n      headAlign: 'center',\n      align: 'right',\n      resizable: true,\n      sorter: true,\n    },\n    {\n      title: '起算月',\n      dataIndex: 'startMonth',\n      width: 160,\n      resizable: true,\n      sorter: true,\n    },\n    {\n      title: '截至月',\n      dataIndex: 'endMonth',\n      width: 160,\n      resizable: true,\n      sorter: true,\n    },\n    {\n      title: '创建人',\n      dataIndex: 'personMemberName',\n      width: 160,\n      resizable: true,\n      sorter: true,\n    },\n    {\n      title: '创建时间',\n      dataIndex: 'fillinDate',\n      width: 180,\n      customRender: ({ text }) => {\n        return useRender.renderDate(text);\n      },\n      resizable: true,\n      sorter: true,\n    },\n    {\n      title: '业务状态',\n      dataIndex: 'bizStatus',\n      width: 160,\n      customRender: ({ text }) => {\n        return useRender.renderDict(text, 'xx');\n      },\n      resizable: true,\n      sorter: true,\n    },\n    {\n      title: '审批状态',\n      dataIndex: 'status',\n      width: 160,\n      customRender: ({ text, record }) => {\n        return useRender.renderFlowStatus(text, record.statusText);\n      },\n      resizable: true,\n      sorter: true,\n    },\n  ];\n}\n// 列表表头\n\nexport function getPlannedElectricityDtlColumns(options: any[]): BasicColumn[] {\n  return [\n    {\n      title: '自然年',\n      dataIndex: 'year',\n    },\n    {\n      title: '计划电量(万kWh)',\n      dataIndex: 'plannedElec',\n      width: '7%',\n      align: 'right',\n    },\n    {\n      title: '1月',\n      dataIndex: 'month1',\n      width: '7%',\n      align: 'right',\n    },\n    {\n      title: '2月',\n      dataIndex: 'month2',\n      width: '7%',\n      align: 'right',\n    },\n    {\n      title: '3月',\n      dataIndex: 'month3',\n      width: '7%',\n      align: 'right',\n    },\n    {\n      title: '4月',\n      dataIndex: 'month4',\n      width: '7%',\n      align: 'right',\n    },\n    {\n      title: '5月',\n      dataIndex: 'month5',\n      width: '7%',\n      align: 'right',\n    },\n    {\n      title: '6月',\n      dataIndex: 'month6',\n      width: '7%',\n      align: 'right',\n    },\n    {\n      title: '7月',\n      dataIndex: 'month7',\n      width: '7%',\n      align: 'right',\n    },\n    {\n      title: '8月',\n      dataIndex: 'month8',\n      width: '7%',\n      align: 'right',\n    },\n    {\n      title: '9月',\n      dataIndex: 'month9',\n      width: '7%',\n      align: 'right',\n    },\n    {\n      title: '10月',\n      dataIndex: 'month10',\n      width: '7%',\n      align: 'right',\n    },\n    {\n      title: '11月',\n      dataIndex: 'month11',\n      width: '7%',\n      align: 'right',\n    },\n    {\n      title: '12月',\n      dataIndex: 'month12',\n      width: '7%',\n      align: 'right',\n    },\n  ];\n}\n\nexport interface DeptListItem {\n  id: string;\n  orderNo: string;\n  createTime: string;\n  remark: string;\n  status: number;\n}\n\n// 获取\nexport const getIndex = (params) =>\n  defHttp.get(\n    {\n      url: Api.getIndexUrl,\n      params,\n    },\n    {},\n  );\n\n//并网信息\nexport const getConnectData = (params) =>\n  defHttp.get(\n    {\n      url: Api.getConnectDataUrl,\n      params,\n    },\n    {},\n  );\n\n// 组织树数据\nexport const getTreeData = (params) =>\n  defHttp.post(\n    {\n      url: Api.treeData,\n      params,\n    },\n    {},\n  );\n\n// 列表数据\nexport const getPlannedElectricityList = (params) =>\n  defHttp.get(\n    {\n      url: Api.areaList,\n      params,\n    },\n    {},\n  );\n\n// 明细列表数据\nexport const getPlannedElectricityDtl = (params) =>\n  defHttp.get(\n    {\n      url: Api.getPlannedElectricityDtlUrl + '?id=' + params,\n    },\n    {},\n  );\n\n// 新增\nexport const insertPlannedElectricity = (params) =>\n  defHttp.post(\n    {\n      url: Api.insertUrl,\n      params,\n    },\n    { isOnlyResult: true },\n  );\n\n//检查是否有重复\nexport const checkProcessingData = (params) =>\n  defHttp.get(\n    {\n      url: Api.checkProcessingUrl,\n      params,\n    },\n    {},\n  );\n\n// 修改\nexport const updatePlannedElectricity = (params) =>\n  defHttp.put(\n    {\n      url: Api.updateUrl,\n      params,\n    },\n    {},\n  );\n\nexport const saveData = (params) => {\n  return insertPlannedElectricity(params);\n};\n\nexport const saveDtl = (params) => {\n  return defHttp.post(\n    {\n      url: Api.insertDtlUrl,\n      params,\n    },\n    {},\n  );\n};\n\nexport const getElecData = (params) =>\n  defHttp.post(\n    {\n      url: Api.elecDataUrl,\n      params,\n    },\n    {},\n  );\n\n// 导出 Excel\nexport function exportExcel(params) {\n  return defHttp.get({ url: Api.exportExcel, params });\n}\n// 删除\nexport const deletePlannedElectricity = (params) =>\n  defHttp.delete({ url: Api.deleteUrl + '?id=' + params });\n\nexport function initInfoItems(billTitleOption, item) {\n  billTitleOption.infoItems.push({\n    key: 'billCode',\n    label: '单据编号',\n    value: item.billCode,\n    position: 'left',\n  });\n  billTitleOption.infoItems.push({\n    key: 'fillinDate',\n    label: '制单日期',\n    value: item.fillinDate,\n    position: 'center',\n  });\n  billTitleOption.infoItems.push({\n    key: 'createPerson',\n    label: '创建人',\n    value: item.deptName + '.' + item.personMemberName,\n    position: 'right',\n  });\n}\n\n// Form表单对象\nexport const detailFormState = reactive({ spinning: false });\nexport const formState = reactive({\n  spinning: false,\n  processInstanceId: '',\n  id: '',\n  billCode: '',\n  fillinDate: '',\n  organId: '',\n  organName: '',\n  deptId: '',\n  deptName: '',\n  positionId: '',\n  positionName: '',\n  personMemberId: '',\n  personMemberName: '',\n  fullId: '',\n  status: 0,\n  subject: '',\n  finishedDate: '',\n  stationOrganId: '',\n  stationOrganName: '',\n  stationId: '',\n  stationName: '',\n  periodId: '',\n  periodName: '',\n  connectCapacity: '',\n  fullGirdDate: '',\n  startMonth: '',\n  endMonth: '',\n  bizStatus: '',\n  bizVersion: '',\n});\n"],"names":["getPlannedElectricityListColumns","options","useUserStore","text","useRender","record","getPlannedElectricityDtlColumns","getIndex","params","defHttp","getConnectData","getTreeData","getPlannedElectricityList","getPlannedElectricityDtl","insertPlannedElectricity","checkProcessingData","saveData","exportExcel","reactive","formState"],"mappings":"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"}