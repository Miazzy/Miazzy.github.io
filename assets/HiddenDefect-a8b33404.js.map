{"version":3,"file":"HiddenDefect-a8b33404.js","sources":["../../src/components/Framework/OperationScreen/HiddenDefectProgress.vue","../../src/views/da/groupOperation/operation/HiddenDefect.vue"],"sourcesContent":["<template>\n  <div class=\"hidden-defect-progress\">\n    <div class=\"rank-icon-box\">\n      <i class=\"rank-icon iconfont icon-shubiao\" :style=\"{color: getRankIconColor(index)}\"></i>\n      <span class=\"index-text\">{{props.index}}</span>\n    </div>\n    <div class=\"label-text\">{{props.label}}</div>\n    <div class=\"progress-box\">\n      <a-progress :stroke-color=\"{'0%': '#4FACFE', '100%': '#00F6FF',}\" :percent=\"props.percent\" :showInfo=\"false\" trailColor=\"rgba(14, 229, 254, 0.1)\" :strokeWidth=\"10\" />\n    </div>\n    <div class=\"value-text\">{{props.value}}</div>\n    <div class=\"percent-text\">{{props.percent}}%</div>\n  </div>\n</template>\n\n<script lang=\"ts\" setup>\n  const props = defineProps({\n    index: { type: Number, default: 1 }, // 排名序号\n    label: { type: String, default: '' }, // 名\n    value: { type: Number, default: 0 }, // 数值\n    percent: { type: Number, default: 0 }, // 百分比\n  });\n\n  const getRankIconColor = (index) => {\n    if (index === 1) {\n      return '#FF3232';\n    } else if (index === 2) {\n      return '#FF9800';\n    } else if (index === 3) {\n      return '#FFD200';\n    } else {\n      return '#03A9FF';\n    }\n  };\n</script>\n\n<style lang=\"less\" scoped>\n  .hidden-defect-progress {\n    display: flex;\n    align-items: center;\n    font-size: 0.14rem;\n    margin-bottom: 0.06rem;\n\n    .rank-icon-box {\n      position: relative;\n      padding-right: 0.05rem;\n      .rank-icon {\n        font-size: 0.15rem;\n      }\n      .index-text {\n        position: absolute;\n        left: 0;\n        top: 0.01rem;\n        width: 0.17rem;\n        font-size: 0.12rem;\n        color: #fff;\n        text-align: center;\n        transform: scale(0.83);\n      }\n    }\n\n    .label-text {\n      width: 4em;\n      color: #d8d9dd;\n    }\n\n    .progress-box {\n      flex: 1;\n      padding: 0 0.16rem 0 0.07rem\n    }\n\n    .value-text {\n      width: 3em;\n      color: #f0f0f0;\n    }\n\n    .percent-text {\n      width: 4em;\n      color: #f0f0f0;\n    }\n  }\n</style>","<template>\n  <div class=\"hidden-defect\">\n    <SmallModule title=\"隐患缺陷统计\">\n      <template #titleRight>\n        <div class=\"right-title-layout\">\n          <a-radio-group\n            class=\"operation-screen-radio-group\"\n            v-model:value=\"searchInfo.defectType\"\n            size=\"small\"\n            @change=\"handleFaultAndHiddenChange\"\n          >\n            <a-radio-button value=\"hidden\">隐患</a-radio-button>\n            <a-radio-button value=\"defect\">缺陷</a-radio-button>\n          </a-radio-group>\n          <!-- <div class=\"detail-text\"\n            ><span class=\"text\">详情</span><span class=\"arrow\">&gt;</span></div\n          > -->\n        </div>\n      </template>\n      <template #content>\n        <div class=\"content-layout\">\n          <div class=\"data-layout\">\n            <DataIndicator label=\"未解决\" :value=\"indexData.not_resolution_total\" />\n            <DataIndicator label=\"处理中\" :value=\"indexData.handle_total\" />\n            <DataIndicator label=\"今日新增\" :value=\"indexData.day_create\" />\n            <DataIndicator label=\"今日解决\" :value=\"indexData.day_result\" />\n          </div>\n          <div class=\"chart-layout\">\n            <div class=\"hidden-defect-list-box\" style=\"height: 18vh; margin-top: -1.8vh\">\n              <template v-if=\"list && list.length\">\n                <HiddenDefectProgress\n                  v-for=\"(item, index) in list\"\n                  :key=\"index\"\n                  :index=\"index + 1\"\n                  :label=\"item.label\"\n                  :value=\"item.value\"\n                  :percent=\"item.percent\"\n                />\n              </template>\n              <NoData v-else />\n            </div>\n          </div>\n        </div>\n      </template>\n    </SmallModule>\n  </div>\n</template>\n\n<script lang=\"ts\" setup>\n  import SmallModule from '/@/components/Framework/OperationScreen/SmallModule.vue';\n  import DataIndicator from '/@/components/Framework/OperationScreen/DataIndicator.vue';\n  import HiddenDefectProgress from '/@/components/Framework/OperationScreen/HiddenDefectProgress.vue';\n  import { reactive, UnwrapRef, ref, onMounted } from 'vue';\n  import { assign } from 'lodash-es';\n  import { getFaultAndHiddenData } from './data';\n  import NoData from '/@/components/Framework/Chart/NoData.vue';\n\n  const searchInfo: UnwrapRef<any> = reactive({});\n  const indexData: UnwrapRef<any> = reactive({});\n\n  onMounted(() => {\n    searchInfo.defectType = 'hidden';\n    queryFaultAndHiddenData();\n  });\n\n  const list = ref([]);\n\n  const handleFaultAndHiddenChange = (e: Event) => {\n    searchInfo.defectType = e.target.value;\n    queryFaultAndHiddenData();\n  };\n\n  const queryFaultAndHiddenData = async () => {\n    searchInfo.selectValue = searchInfo.defectType;\n    let data = await getFaultAndHiddenData(searchInfo);\n    if (data.result) {\n      assign(indexData, data.result);\n      list.value = data.result.barData;\n    }\n  };\n</script>\n\n<style lang=\"less\" scoped>\n  .right-title-layout {\n    display: flex;\n    align-items: center;\n    padding-right: 0.16rem;\n\n    .detail-text {\n      margin-left: 0.14rem;\n      color: #fff;\n      font-size: 0.12rem;\n      line-height: 1;\n      cursor: pointer;\n\n      .text {\n        margin-right: 0.04rem;\n      }\n\n      .arrow {\n        opacity: 0.6;\n      }\n    }\n  }\n\n  .content-layout {\n    height: 100%;\n\n    .data-layout {\n      display: flex;\n      align-items: flex-end;\n      justify-content: space-between;\n      height: 22.59%;\n      margin-top: -0.11rem;\n      padding: 0 0.55rem;\n    }\n\n    .chart-layout {\n      width: 100%;\n      height: 77.41%;\n      padding: 0.2rem 0.16rem;\n\n      .hidden-defect-list-box {\n        height: 100%;\n        overflow-y: auto;\n      }\n    }\n  }\n</style>\n"],"names":["getRankIconColor","index","searchInfo","reactive","indexData","onMounted","queryFaultAndHiddenData","list","ref","handleFaultAndHiddenChange","e","__async","data","getFaultAndHiddenData","assign"],"mappings":"s+BAuBQA,EAAoBC,GACpBA,IAAU,EACL,UACEA,IAAU,EACZ,UACEA,IAAU,EACZ,UAEA,quBC0BL,MAAAC,EAA6BC,EAAS,CAAA,CAAE,EACxCC,EAA4BD,EAAS,CAAA,CAAE,EAE7CE,EAAU,IAAM,CACdH,EAAW,WAAa,SACAI,GAAA,CACzB,EAEK,MAAAC,EAAOC,EAAI,CAAA,CAAE,EAEbC,EAA8BC,GAAa,CACpCR,EAAA,WAAaQ,EAAE,OAAO,MACTJ,GAAA,EAGpBA,EAA0B,IAAYK,EAAA,sBAC1CT,EAAW,YAAcA,EAAW,WAChC,IAAAU,EAAO,MAAMC,EAAsBX,CAAU,EAC7CU,EAAK,SACAE,EAAAV,EAAWQ,EAAK,MAAM,EACxBL,EAAA,MAAQK,EAAK,OAAO,QAC3B"}