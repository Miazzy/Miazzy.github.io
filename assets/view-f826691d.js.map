{"version":3,"file":"view-f826691d.js","sources":["../../src/views/oa/info/informationquery/view.vue"],"sourcesContent":["<template>\n  <a-row :gutter=\"24\" style=\"margin-bottom: 20px\">\n    <a-col :span=\"19\" :offset=\"1\">\n      <div style=\"text-align: center\">\n        <h1\n          style=\"\n            width: 90vw;\n            overflow: hidden;\n            color: #1890ff;\n            text-overflow: ellipsis;\n            white-space: nowrap;\n          \"\n          >{{ formState.subject }}</h1\n        ></div\n      >\n      <div style=\"text-align: center\"\n        >发布人：{{ formState.publisher }} &nbsp;&nbsp;发布时间：{{\n          formState.publishedDate\n        }}</div\n      >\n    </a-col>\n\n  </a-row>\n  <a-row :gutter=\"24\">\n    <a-col :span=\"22\" :offset=\"1\">\n      <Tinymce\n        v-if=\"visible\"\n        class=\"tinymce-comp-content\"\n        v-model=\"formState.content\"\n        :width=\"`100%`\"\n        :height=\"`calc(100vh - 188px)`\"\n        :disabled=\"true\"\n        :auto-resize=\"true\"\n      />\n    </a-col>\n  </a-row>\n  <a-row :gutter=\"24\">\n    <a-col :span=\"22\" :offset=\"1\" style=\"position: fixed; bottom: 0; width: 100%; height: 78px\">\n      <UploadTable\n        ref=\"uploadTable\"\n        :width=\"`101.55%`\"\n        :height=\"`78px`\"\n        :rows=\"uploadRows\"\n        :colwidths=\"['20%', '85%']\"\n        :application=\"`oa`\"\n        :module=\"formState.module\"\n        :mode=\"`view`\"\n        fixed=\"bottom\"\n        :operate=\"operate\"\n      />\n    </a-col>\n  </a-row>\n\n</template>\n<script lang=\"ts\" setup>\n  import { reactive, h, ref, onMounted, onActivated, nextTick } from 'vue';\n  import { Tinymce } from '/@/components/Tinymce/index';\n  import UploadTable from '/@/components/Framework/Table/UploadTable.vue';\n  import { urlToPath } from '/@/utils/route';\n  import { defHttp } from '/@/utils/http/axios';\n\n\n  let { params: query } = urlToPath() as any;\n\n  const formState: any = reactive({\n    module:'information'\n  });\n  const uploadRows = ref<any[]>([]);\n  const visible = ref(true);\n\n  const operate = ref('preview');\n   \n\n  onActivated(() => {\n    visible.value = false;\n    nextTick(() => {\n      visible.value = true;\n    });\n  });\n\n  onMounted(async () => {\n    let params = {id:query.bizId};\n    let resp =await  defHttp.get({ url: '/oa/information/get',params });\n    if (resp.result) {\n\n      formState.bizId = query.bizId;\n      Object.assign(formState,resp.result);\n  \n      uploadRows.value = [\n        {\n          filetype: '资讯附件',\n          fnamelist: '',\n          bizId: formState.bizFileId,\n          maxCount: 20,\n          maxSize: 100 * 1024 * 1024,\n          required: false,\n          vmode: 'view',\n          fileKindId: '',\n        },\n      ];\n    }\n  });\n</script>\n<style lang=\"less\" scoped>\n  :deep(.tox-tinymce) {\n    border: 0 solid #ccc;\n    border-radius: 0;\n  }\n</style>\n"],"names":["query","urlToPath","formState","reactive","uploadRows","ref","visible","operate","onActivated","nextTick","onMounted","__async","params","resp","defHttp"],"mappings":"uzBA8DE,GAAI,CAAE,OAAQA,CAAM,EAAIC,EAAU,EAElC,MAAMC,EAAiBC,EAAS,CAC9B,OAAO,aAAA,CACR,EACKC,EAAaC,EAAW,CAAA,CAAE,EAC1BC,EAAUD,EAAI,EAAI,EAElBE,EAAUF,EAAI,SAAS,EAG7B,OAAAG,EAAY,IAAM,CAChBF,EAAQ,MAAQ,GAChBG,EAAS,IAAM,CACbH,EAAQ,MAAQ,EAAA,CACjB,CAAA,CACF,EAEDI,EAAU,IAAYC,EAAA,sBACpB,IAAIC,EAAS,CAAC,GAAGZ,EAAM,KAAK,EACxBa,EAAM,MAAOC,EAAQ,IAAI,CAAE,IAAK,sBAAsB,OAAAF,EAAQ,EAC9DC,EAAK,SAEPX,EAAU,MAAQF,EAAM,MACjB,OAAA,OAAOE,EAAUW,EAAK,MAAM,EAEnCT,EAAW,MAAQ,CACjB,CACE,SAAU,OACV,UAAW,GACX,MAAOF,EAAU,UACjB,SAAU,GACV,QAAS,IAAM,KAAO,KACtB,SAAU,GACV,MAAO,OACP,WAAY,EACd,CAAA,EAEJ,EACD"}