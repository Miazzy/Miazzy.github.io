{"version":3,"file":"HistoryVideo-cec157e4.js","sources":["../../src/views/da/stationOperation/device/HistoryVideo.vue"],"sourcesContent":["<template>\n  <div class=\"info-content-box\">\n    <div class=\"device-info-box\">\n      <div class=\"info-row\">\n        <span class=\"label\" style=\"width: 5em\">开始时间：</span>\n        <a-date-picker\n          v-model:value=\"startTime\"\n          format=\"YYYY-MM-DD HH:mm\"\n          value-format=\"YYYY-MM-DD HH:mm\"\n          show-time\n          style=\"width: 100%\"\n        />\n      </div>\n      <div class=\"info-row\">\n        <span class=\"label\" style=\"width: 5em\">结束时间：</span>\n        <a-date-picker\n          v-model:value=\"endTime\"\n          format=\"YYYY-MM-DD HH:mm\"\n          value-format=\"YYYY-MM-DD HH:mm\"\n          show-time\n          style=\"width: 100%\"\n        />\n      </div>\n      <div class=\"info-row search-btn\">\n        <a-button class=\"operation-btn\" type=\"primary\" @click=\"handleSearch\">查询</a-button>\n      </div>\n      <div class=\"info-row\">\n        <BasicTable\n          @register=\"registerTable\"\n          @resize-column=\"(w, col) => (col.width = w)\"\n          @row-click=\"handleRowClick\"\n        />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\" setup>\n  import { ref } from 'vue';\n  import { BasicTable, useTable, BasicColumn } from '@/components/Table';\n  import * as SmartDeviceApi from '/@/api/monitor/smartdevice';\n\n  const emit = defineEmits(['row-click']);\n\n  const props = defineProps({\n    inspectionInstrumentId: String,\n  });\n\n  const startTime = ref();\n  const endTime = ref();\n\n  const getPageByParam = async () => {\n    const param = {\n      startTime: startTime.value,\n      endTime: endTime.value,\n      inspectionInstrumentId: props.inspectionInstrumentId,\n      fileType: 'video',\n    };\n    if (param.startTime) {\n      param.startTime = param.startTime + ':00';\n    }\n    if (param.endTime) {\n      param.endTime = param.endTime + ':59';\n    }\n    return await SmartDeviceApi.getIiFilePage(param);\n  };\n\n  const columns: BasicColumn[] = [\n    {\n      title: '录制时间',\n      dataIndex: 'fileCreateTime',\n      width: 140, // resizable: true, sorter: true\n    },\n    {\n      title: '文件大小',\n      dataIndex: 'fileLength',\n      width: 140, // resizable: true, sorter: true\n    },\n  ];\n\n  const [registerTable, { reload }] = useTable({\n    api: getPageByParam,\n    columns: columns,\n    useSearchForm: false,\n    showTableSetting: false,\n    bordered: true,\n    rowKey: 'id',\n    resizeHeightOffset: 10,\n  });\n\n  const handleSearch = () => {\n    reload();\n  };\n\n  const handleRowClick = (record) => {\n    emit('row-click', record);\n  };\n</script>\n<style lang=\"less\">\n  [data-theme='dark'] .theme1 {\n    .info-content-box {\n      background-color: rgb(7 59 109 / 50%);\n\n      .info-row {\n        border-bottom: 1px solid rgb(255 255 255 / 16%);\n\n        .label {\n          color: rgb(255 255 255 / 60%);\n        }\n\n        .text {\n          color: #fff;\n        }\n      }\n    }\n  }\n\n  .theme3 {\n    .info-content-box {\n      background-color: rgb(24 144 255 / 6%);\n\n      .info-row {\n        border-bottom: 1px solid rgb(153 153 153 / 10%);\n\n        .label {\n          color: #777;\n        }\n\n        .text {\n          color: #262626;\n        }\n      }\n    }\n  }\n</style>\n<style lang=\"less\" scoped>\n  :deep(.my-layout .vben-basic-table .ant-table-wrapper) {\n    padding: unset;\n  }\n\n  :deep(.vben-basic-table .ant-table-wrapper) {\n    padding: unset;\n    border-radius: unset;\n  }\n\n  .info-content-box {\n    padding: 20px;\n    border-radius: 2px;\n\n    .search-btn {\n      display: flex;\n      align-items: center;\n      justify-content: center;\n    }\n\n    .info-row {\n      display: flex;\n      align-items: center;\n      min-height: 50px;\n      padding: 10px 0;\n      font-size: 14px;\n\n      .label {\n        flex-shrink: 0;\n        margin-right: 6px;\n        text-align: right;\n      }\n\n      .operation-btn {\n        height: 24px;\n        padding: 0 9px;\n        font-size: 12px;\n\n        & + .operation-btn {\n          margin-left: 2px;\n        }\n      }\n    }\n  }\n</style>\n"],"names":["startTime","ref","endTime","getPageByParam","__async","param","props","SmartDeviceApi.getIiFilePage","columns","registerTable","reload","useTable","handleSearch","handleRowClick","record","emit"],"mappings":"4gDAgDQA,EAAYC,IACZC,EAAUD,IAEVE,EAAiB,IAAYC,EAAA,sBACjC,MAAMC,EAAQ,CACZ,UAAWL,EAAU,MACrB,QAASE,EAAQ,MACjB,uBAAwBI,EAAM,uBAC9B,SAAU,OAAA,EAEZ,OAAID,EAAM,YACFA,EAAA,UAAYA,EAAM,UAAY,OAElCA,EAAM,UACFA,EAAA,QAAUA,EAAM,QAAU,OAE3B,MAAME,EAA6BF,CAAK,CAAA,GAG3CG,EAAyB,CAC7B,CACE,MAAO,OACP,UAAW,iBACX,MAAO,GACT,EACA,CACE,MAAO,OACP,UAAW,aACX,MAAO,GACT,CAAA,EAGI,CAACC,EAAe,CAAE,OAAAC,CAAQ,CAAA,EAAIC,EAAS,CAC3C,IAAKR,EACL,QAAAK,EACA,cAAe,GACf,iBAAkB,GAClB,SAAU,GACV,OAAQ,KACR,mBAAoB,EAAA,CACrB,EAEKI,EAAe,IAAM,CAClBF,GAAA,EAGHG,EAAkBC,GAAW,CACjCC,EAAK,YAAaD,CAAM,CAAA"}