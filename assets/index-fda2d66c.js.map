{"version":3,"file":"index-fda2d66c.js","sources":["../../src/components/Drawer/src/props.ts","../../src/components/Drawer/src/components/DrawerFooter.vue","../../src/components/Drawer/src/components/DrawerHeader.vue","../../src/components/Drawer/src/BasicDrawer.vue","../../src/components/Drawer/src/useDrawer.ts","../../src/components/Drawer/index.ts"],"sourcesContent":["import type { PropType } from 'vue';\n\nimport { useI18n } from '/@/hooks/web/useI18n';\n\nconst { t } = useI18n();\n\nexport const footerProps = {\n  confirmLoading: { type: Boolean },\n  /**\n   * @description: Show close button\n   */\n  showCancelBtn: { type: Boolean, default: true },\n  cancelButtonProps: Object as PropType<Recordable>,\n  cancelText: { type: String, default: t('common.cancelText') },\n  /**\n   * @description: Show confirmation button\n   */\n  showOkBtn: { type: Boolean, default: true },\n  okButtonProps: Object as PropType<Recordable>,\n  okText: { type: String, default: t('common.okText') },\n  okType: { type: String, default: 'primary' },\n  showFooter: { type: Boolean },\n  footerHeight: {\n    type: [String, Number] as PropType<string | number>,\n    default: 60,\n  },\n};\nexport const basicProps = {\n  isDetail: { type: Boolean },\n  title: { type: String, default: '' },\n  loadingText: { type: String },\n  showDetailBack: { type: Boolean, default: true },\n  visible: { type: Boolean },\n  loading: { type: Boolean },\n  maskClosable: { type: Boolean, default: true },\n  getContainer: {\n    type: [Object, String] as PropType<any>,\n  },\n  closeFunc: {\n    type: [Function, Object] as PropType<any>,\n    default: null,\n  },\n  destroyOnClose: { type: Boolean },\n  ...footerProps,\n};\n","<template>\n  <div :class=\"prefixCls\" :style=\"getStyle\" v-if=\"showFooter || $slots.footer\">\n    <template v-if=\"!$slots.footer\">\n      <slot name=\"insertFooter\"></slot>\n      <a-button v-bind=\"cancelButtonProps\" @click=\"handleClose\" class=\"mr-2\" v-if=\"showCancelBtn\">\n        {{ cancelText }}\n      </a-button>\n      <slot name=\"centerFooter\"></slot>\n      <a-button\n        :type=\"okType\"\n        @click=\"handleOk\"\n        v-bind=\"okButtonProps\"\n        class=\"mr-2\"\n        :loading=\"confirmLoading\"\n        v-if=\"showOkBtn\"\n      >\n        {{ okText }}\n      </a-button>\n      <slot name=\"appendFooter\"></slot>\n    </template>\n\n    <template v-else>\n      <slot name=\"footer\"></slot>\n    </template>\n  </div>\n</template>\n<script lang=\"ts\">\n  import type { CSSProperties } from 'vue';\n  import { defineComponent, computed } from 'vue';\n  import { useDesign } from '/@/hooks/web/useDesign';\n\n  import { footerProps } from '../props';\n\n  export default defineComponent({\n    name: 'BasicDrawerFooter',\n    props: {\n      ...footerProps,\n      height: {\n        type: String,\n        default: '60px',\n      },\n    },\n    emits: ['ok', 'close'],\n    setup(props, { emit }) {\n      const { prefixCls } = useDesign('basic-drawer-footer');\n\n      const getStyle = computed((): CSSProperties => {\n        const heightStr = `${props.height}`;\n        return {\n          height: heightStr,\n          lineHeight: `calc(${heightStr} - 1px)`,\n        };\n      });\n\n      function handleOk() {\n        emit('ok');\n      }\n\n      function handleClose() {\n        emit('close');\n      }\n      return { handleOk, prefixCls, handleClose, getStyle };\n    },\n  });\n</script>\n\n<style lang=\"less\">\n  @prefix-cls: ~'@{namespace}-basic-drawer-footer';\n  @footer-height: 60px;\n  .@{prefix-cls} {\n    position: absolute;\n    bottom: 0;\n    width: 100%;\n    padding: 0 12px 0 20px;\n    border-top: 1px solid @border-color-base;\n    background-color: @component-background;\n    text-align: right;\n\n    > * {\n      margin-right: 8px;\n    }\n  }\n</style>\n","<template>\n  <BasicTitle v-if=\"!isDetail\" :class=\"prefixCls\">\n    <slot name=\"title\"></slot>\n    {{ !$slots.title ? title : '' }}\n  </BasicTitle>\n\n  <div :class=\"[prefixCls, `${prefixCls}--detail`]\" v-else>\n    <span :class=\"`${prefixCls}__twrap`\">\n      <span @click=\"handleClose\" v-if=\"showDetailBack\">\n        <ArrowLeftOutlined :class=\"`${prefixCls}__back`\" />\n      </span>\n      <span v-if=\"title\">{{ title }}</span>\n    </span>\n\n    <span :class=\"`${prefixCls}__toolbar`\">\n      <slot name=\"titleToolbar\"></slot>\n    </span>\n  </div>\n</template>\n<script lang=\"ts\">\n  import { defineComponent } from 'vue';\n  import { BasicTitle } from '/@/components/Basic';\n  import { ArrowLeftOutlined } from '@ant-design/icons-vue';\n\n  import { useDesign } from '/@/hooks/web/useDesign';\n\n  import { propTypes } from '/@/utils/propTypes';\n\n  export default defineComponent({\n    name: 'BasicDrawerHeader',\n    components: { BasicTitle, ArrowLeftOutlined },\n    props: {\n      isDetail: propTypes.bool,\n      showDetailBack: propTypes.bool,\n      title: propTypes.string,\n    },\n    emits: ['close'],\n    setup(_, { emit }) {\n      const { prefixCls } = useDesign('basic-drawer-header');\n\n      function handleClose() {\n        emit('close');\n      }\n\n      return { prefixCls, handleClose };\n    },\n  });\n</script>\n\n<style lang=\"less\">\n  @prefix-cls: ~'@{namespace}-basic-drawer-header';\n  @footer-height: 60px;\n  .@{prefix-cls} {\n    display: flex;\n    align-items: center;\n    height: 100%;\n\n    &__back {\n      padding: 0 12px;\n      cursor: pointer;\n\n      &:hover {\n        color: @primary-color;\n      }\n    }\n\n    &__twrap {\n      flex: 1;\n    }\n\n    &__toolbar {\n      padding-right: 50px;\n    }\n  }\n</style>\n","<template>\n  <Drawer :class=\"prefixCls\" @close=\"onClose\" v-bind=\"getBindValues\">\n    <template #title v-if=\"!$slots.title\">\n      <DrawerHeader\n        :title=\"getMergeProps.title\"\n        :isDetail=\"isDetail\"\n        :showDetailBack=\"showDetailBack\"\n        @close=\"onClose\"\n      >\n        <template #titleToolbar>\n          <slot name=\"titleToolbar\"></slot>\n        </template>\n      </DrawerHeader>\n    </template>\n    <template v-else #title>\n      <slot name=\"title\"></slot>\n    </template>\n\n    <ScrollContainer\n      :style=\"getScrollContentStyle\"\n      v-loading=\"getLoading\"\n      :loading-tip=\"loadingText || t('common.loadingText')\"\n    >\n      <slot></slot>\n    </ScrollContainer>\n    <DrawerFooter v-bind=\"getProps\" @close=\"onClose\" @ok=\"handleOk\" :height=\"getFooterHeight\">\n      <template #[item]=\"data\" v-for=\"item in Object.keys($slots)\">\n        <slot :name=\"item\" v-bind=\"data || {}\"></slot>\n      </template>\n    </DrawerFooter>\n  </Drawer>\n</template>\n<script lang=\"ts\">\n  import type { DrawerInstance, DrawerProps } from './typing';\n  import type { CSSProperties } from 'vue';\n  import {\n    defineComponent,\n    ref,\n    computed,\n    watch,\n    unref,\n    nextTick,\n    toRaw,\n    getCurrentInstance,\n  } from 'vue';\n  import { Drawer } from 'ant-design-vue';\n  import { useI18n } from '/@/hooks/web/useI18n';\n  import { isFunction, isNumber } from '/@/utils/is';\n  import { deepMerge } from '/@/utils';\n  import DrawerFooter from './components/DrawerFooter.vue';\n  import DrawerHeader from './components/DrawerHeader.vue';\n  import { ScrollContainer } from '/@/components/Container';\n  import { basicProps } from './props';\n  import { useDesign } from '/@/hooks/web/useDesign';\n  import { useAttrs } from '@vben/hooks';\n  import { MsgManager } from '/@/message/MsgManager';\n\n  export default defineComponent({\n    components: { Drawer, ScrollContainer, DrawerFooter, DrawerHeader },\n    inheritAttrs: false,\n    props: basicProps,\n    emits: ['visible-change', 'ok', 'close', 'register'],\n    setup(props, { emit }) {\n      const visibleRef = ref(false);\n      const attrs = useAttrs();\n      const propsRef = ref<Partial<DrawerProps | null>>(null);\n\n      const { t } = useI18n();\n      const { prefixVar, prefixCls } = useDesign('basic-drawer');\n\n      const drawerInstance: DrawerInstance = {\n        setDrawerProps: setDrawerProps as any,\n        emitVisible: undefined,\n      };\n\n      const instance = getCurrentInstance();\n\n      instance && emit('register', drawerInstance, instance.uid);\n\n      const getMergeProps = computed((): DrawerProps => {\n        return deepMerge(toRaw(props), unref(propsRef)) as any;\n      });\n\n      // 判断当前页面是否在 iframe 中显示\n      const checkInIframe = () => {\n        try {\n          return window.self !== window.top;\n        } catch (e) {\n          return true;\n        }\n      };\n\n      const getProps = computed((): DrawerProps => {\n        const opt = {\n          placement: 'right',\n          ...unref(attrs),\n          ...unref(getMergeProps),\n          visible: unref(visibleRef),\n        };\n        opt.title = undefined;\n        const { isDetail, width, wrapClassName, getContainer } = opt;\n        if (isDetail) {\n          if (!width) {\n            opt.width = '100%';\n          }\n          const detailCls = `${prefixCls}__detail`;\n          opt.class = wrapClassName ? `${wrapClassName} ${detailCls}` : detailCls;\n\n          if (!getContainer) {\n            // TODO type error?\n            opt.getContainer = `.${prefixVar}-layout-content` as any;\n          }\n        }\n        return opt as DrawerProps;\n      });\n\n      const getBindValues = computed((): DrawerProps => {\n        return {\n          ...attrs,\n          ...unref(getProps),\n        };\n      });\n\n      // Custom implementation of the bottom button,\n      const getFooterHeight = computed(() => {\n        const { footerHeight, showFooter } = unref(getProps);\n        if (showFooter && footerHeight) {\n          return isNumber(footerHeight)\n            ? `${footerHeight}px`\n            : `${footerHeight.replace('px', '')}px`;\n        }\n        return `0px`;\n      });\n\n      const getScrollContentStyle = computed((): CSSProperties => {\n        const footerHeight = unref(getFooterHeight);\n        return {\n          position: 'relative',\n          height: `calc(100% - ${footerHeight})`,\n        };\n      });\n\n      const getLoading = computed(() => {\n        return !!unref(getProps)?.loading;\n      });\n\n      watch(\n        () => props.visible,\n        (newVal, oldVal) => {\n          if (newVal !== oldVal) visibleRef.value = newVal;\n        },\n        { deep: true },\n      );\n\n      watch(\n        () => visibleRef.value,\n        (visible) => {\n          nextTick(() => {\n            emit('visible-change', visible);\n            instance && drawerInstance.emitVisible?.(visible, instance.uid);\n          });\n        },\n      );\n\n      // Cancel event\n      async function onClose(e) {\n        const { closeFunc } = unref(getProps);\n        emit('close', e);\n        if (closeFunc && isFunction(closeFunc)) {\n          const res = await closeFunc();\n          visibleRef.value = !res;\n          return;\n        }\n        if (checkInIframe()) {\n          MsgManager.getInstance().sendMsg('drawer-open', { type: 'remove' });\n        }\n        visibleRef.value = false;\n      }\n\n      function setDrawerProps(props: Partial<DrawerProps>): void {\n        // Keep the last setDrawerProps\n        propsRef.value = deepMerge(unref(propsRef) || ({} as any), props);\n\n        if (Reflect.has(props, 'visible')) {\n          visibleRef.value = !!props.visible;\n        }\n      }\n\n      function handleOk() {\n        emit('ok');\n      }\n\n      return {\n        onClose,\n        t,\n        prefixCls,\n        getMergeProps: getMergeProps as any,\n        getScrollContentStyle,\n        getProps: getProps as any,\n        getLoading,\n        getBindValues,\n        getFooterHeight,\n        handleOk,\n      };\n    },\n  });\n</script>\n<style lang=\"less\">\n  @header-height: 60px;\n  @detail-header-height: 40px;\n  @prefix-cls: ~'@{namespace}-basic-drawer';\n  @prefix-cls-detail: ~'@{namespace}-basic-drawer__detail';\n\n  .@{prefix-cls} {\n    .ant-drawer-wrapper-body {\n      overflow: hidden;\n    }\n\n    .ant-drawer-close {\n      &:hover {\n        color: @error-color;\n      }\n    }\n\n    .ant-drawer-body {\n      height: calc(100% - @header-height);\n      padding: 0;\n      background-color: @component-background;\n\n      .scrollbar__wrap {\n        margin-bottom: 0 !important;\n        padding: 16px !important;\n      }\n\n      > .scrollbar > .scrollbar__bar.is-horizontal {\n        display: none;\n      }\n    }\n  }\n\n  .@{prefix-cls-detail} {\n    position: absolute;\n\n    .ant-drawer-header {\n      box-sizing: border-box;\n      width: 100%;\n      height: @detail-header-height;\n      padding: 0;\n      border-top: 1px solid @border-color-base;\n    }\n\n    .ant-drawer-title {\n      height: 100%;\n    }\n\n    .ant-drawer-close {\n      height: @detail-header-height;\n      line-height: @detail-header-height;\n    }\n\n    .ant-drawer-body {\n      height: calc(100% - @detail-header-height);\n\n      .scrollbar__wrap {\n        padding: 0 !important;\n      }\n    }\n  }\n</style>\n","import type {\n  UseDrawerReturnType,\n  DrawerInstance,\n  ReturnMethods,\n  DrawerProps,\n  UseDrawerInnerReturnType,\n} from './typing';\nimport {\n  ref,\n  getCurrentInstance,\n  unref,\n  reactive,\n  watchEffect,\n  nextTick,\n  toRaw,\n  computed,\n} from 'vue';\nimport { isProdMode } from '/@/utils/env';\nimport { isFunction } from '/@/utils/is';\nimport { tryOnUnmounted } from '@vueuse/core';\nimport { isEqual } from 'lodash-es';\nimport { error } from '/@/utils/log';\nimport { MsgManager } from '/@/message/MsgManager';\n\nconst dataTransferRef = reactive<any>({});\n\nconst visibleData = reactive<{ [key: number]: boolean }>({});\n\n// 判断当前页面是否在 iframe 中显示\nconst checkInIframe = () => {\n  try {\n    return window.self !== window.top;\n  } catch (e) {\n    return true;\n  }\n};\n\n/**\n * @description: Applicable to separate drawer and call outside\n */\nexport function useDrawer(): UseDrawerReturnType {\n  if (!getCurrentInstance()) {\n    throw new Error('useDrawer() can only be used inside setup() or functional components!');\n  }\n  const drawer = ref<DrawerInstance | null>(null);\n  const loaded = ref<Nullable<boolean>>(false);\n  const uid = ref<string>('');\n\n  function register(drawerInstance: DrawerInstance, uuid: string) {\n    isProdMode() &&\n      tryOnUnmounted(() => {\n        drawer.value = null;\n        loaded.value = null;\n        dataTransferRef[unref(uid)] = null;\n      });\n\n    if (unref(loaded) && isProdMode() && drawerInstance === unref(drawer)) {\n      return;\n    }\n    uid.value = uuid;\n    drawer.value = drawerInstance;\n    loaded.value = true;\n\n    drawerInstance.emitVisible = (visible: boolean, uid: number) => {\n      visibleData[uid] = visible;\n    };\n  }\n\n  const getInstance = () => {\n    const instance = unref(drawer);\n    if (!instance) {\n      error('useDrawer instance is undefined!');\n    }\n    return instance;\n  };\n\n  const methods: ReturnMethods = {\n    setDrawerProps: (props: Partial<DrawerProps>): void => {\n      getInstance()?.setDrawerProps(props);\n    },\n\n    getVisible: computed((): boolean => {\n      return visibleData[~~unref(uid)];\n    }),\n\n    openDrawer: <T = any>(visible = true, data?: T, openOnSet = true): void => {\n      if (checkInIframe()) {\n        MsgManager.getInstance().sendMsg('drawer-open', { type: 'open' });\n      }\n      getInstance()?.setDrawerProps({\n        visible: visible,\n      });\n      if (!data) return;\n\n      if (openOnSet) {\n        dataTransferRef[unref(uid)] = null;\n        dataTransferRef[unref(uid)] = toRaw(data);\n        return;\n      }\n      const equal = isEqual(toRaw(dataTransferRef[unref(uid)]), toRaw(data));\n      if (!equal) {\n        dataTransferRef[unref(uid)] = toRaw(data);\n      }\n    },\n    closeDrawer: () => {\n      if (checkInIframe()) {\n        MsgManager.getInstance().sendMsg('drawer-open', { type: 'remove' });\n      }\n      getInstance()?.setDrawerProps({ visible: false });\n    },\n  };\n\n  return [register, methods];\n}\n\nexport const useDrawerInner = (callbackFn?: Fn): UseDrawerInnerReturnType => {\n  const drawerInstanceRef = ref<Nullable<DrawerInstance>>(null);\n  const currentInstance = getCurrentInstance();\n  const uidRef = ref<string>('');\n\n  if (!getCurrentInstance()) {\n    throw new Error('useDrawerInner() can only be used inside setup() or functional components!');\n  }\n\n  const getInstance = () => {\n    const instance = unref(drawerInstanceRef);\n    if (!instance) {\n      error('useDrawerInner instance is undefined!');\n      return;\n    }\n    return instance;\n  };\n\n  const register = (modalInstance: DrawerInstance, uuid: string) => {\n    isProdMode() &&\n      tryOnUnmounted(() => {\n        drawerInstanceRef.value = null;\n      });\n\n    uidRef.value = uuid;\n    drawerInstanceRef.value = modalInstance;\n    currentInstance?.emit('register', modalInstance, uuid);\n  };\n\n  watchEffect(() => {\n    const data = dataTransferRef[unref(uidRef)];\n    if (!data) return;\n    if (!callbackFn || !isFunction(callbackFn)) return;\n    nextTick(() => {\n      callbackFn(data);\n    });\n  });\n\n  return [\n    register,\n    {\n      changeLoading: (loading = true) => {\n        getInstance()?.setDrawerProps({ loading });\n      },\n\n      changeOkLoading: (loading = true) => {\n        getInstance()?.setDrawerProps({ confirmLoading: loading });\n      },\n      getVisible: computed((): boolean => {\n        return visibleData[~~unref(uidRef)];\n      }),\n\n      closeDrawer: () => {\n        getInstance()?.setDrawerProps({ visible: false });\n        if (checkInIframe()) {\n          MsgManager.getInstance().sendMsg('drawer-open', { type: 'remove' });\n        }\n      },\n\n      setDrawerProps: (props: Partial<DrawerProps>) => {\n        getInstance()?.setDrawerProps(props);\n      },\n    },\n  ];\n};\n","import { withInstall } from '/@/utils';\nimport basicDrawer from './src/BasicDrawer.vue';\n\nexport const BasicDrawer = withInstall(basicDrawer);\nexport * from './src/typing';\nexport { useDrawer, useDrawerInner } from './src/useDrawer';\n"],"names":["t","useI18n","footerProps","basicProps","__spreadValues","_sfc_main$2","defineComponent","__spreadProps","props","emit","prefixCls","useDesign","getStyle","computed","heightStr","handleOk","handleClose","_resolveComponent","_ctx","_openBlock","_createElementBlock","_normalizeClass","_normalizeStyle","_renderSlot","_Fragment","_createBlock","_component_a_button","_mergeProps","_createCommentVNode","_sfc_main$1","BasicTitle","ArrowLeftOutlined","propTypes","_","_component_ArrowLeftOutlined","_cache","args","_hoisted_1","_toDisplayString","_createElementVNode","_component_BasicTitle","_withCtx","_sfc_main","Drawer","ScrollContainer","DrawerFooter","DrawerHeader","visibleRef","ref","attrs","useAttrs","propsRef","prefixVar","drawerInstance","setDrawerProps","instance","getCurrentInstance","getMergeProps","deepMerge","toRaw","unref","checkInIframe","e","getProps","opt","isDetail","width","wrapClassName","getContainer","detailCls","getBindValues","getFooterHeight","footerHeight","showFooter","isNumber","getScrollContentStyle","getLoading","_a","watch","newVal","oldVal","visible","nextTick","onClose","__async","closeFunc","isFunction","res","MsgManager","_directive_loading","_resolveDirective","_component_Drawer","_createSlots","_withDirectives","_component_ScrollContainer","_component_DrawerFooter","item","data","_createVNode","_component_DrawerHeader","dataTransferRef","reactive","visibleData","useDrawer","drawer","loaded","uid","register","uuid","tryOnUnmounted","isProdMode","getInstance","error","methods","openOnSet","isEqual","useDrawerInner","callbackFn","drawerInstanceRef","currentInstance","uidRef","modalInstance","watchEffect","loading","BasicDrawer","withInstall","basicDrawer"],"mappings":"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"}