{"version":3,"file":"SearchBox-22bb02d6.js","sources":["../../src/components/Framework/Combox/SearchBox.vue"],"sourcesContent":["<template>\n  <div class=\"search-box\" ref=\"searchBox\">\n    <a-dropdown\n      ref=\"dropdown\"\n      v-if=\"props.vmode == 'edit' && !props.disabled\"\n      :trigger=\"['click']\"\n      :disabled=\"isDisabled\"\n      class=\"search-dropdown-box\"\n      v-model:visible=\"showDropdown\"\n      @visibleChange=\"handleClickOutside\"\n    >\n      <!-- 输入框区域 -->\n      <a-input\n        v-model:value=\"searchRealText\"\n        class=\"search-text\"\n        :allow-clear=\"showDropdown\"\n        :disabled=\"isDisabled\"\n        placeholder=\"请选择下拉列表中数据...\"\n        @focus=\"handlePreventEvent\"\n        @keydown=\"handlePreventEvent\"\n        @change=\"handleTextChange\"\n        @click=\"toggleDropdown($event)\"\n      />\n      <template #overlay>\n        <a-menu>\n          <!-- 下拉表格弹框区域 -->\n          <div\n            @click.stop\n            v-show=\"showDropdown\"\n            class=\"search-content\"\n            :style=\"`width: ${twidths || props.twidth}; display: ${\n              showDropdown ? 'block' : 'none'\n            }`\"\n          >\n            <!-- 输入框、搜索按钮和关闭按钮区域 -->\n            <div class=\"search-panel\">\n              <div class=\"search-popup-subcontent\">\n                <input\n                  class=\"search-input\"\n                  v-model=\"search.text\"\n                  @keyup=\"searchData\"\n                  placeholder=\"  请输入搜索关键字...\"\n                />\n                <button class=\"close-button\" @click=\"clearData\">清除</button>\n                <button class=\"search-button\" @click=\"searchData\">搜索</button>\n              </div>\n            </div>\n            <div class=\"search-table\">\n              <template v-if=\"multiple\">\n                <Table\n                  :rowKey=\"handleRowKey\"\n                  :row-selection=\"rowSelection\"\n                  :columns=\"tcolumns\"\n                  :data-source=\"tableData\"\n                  size=\"small\"\n                  :pagination=\"xpagination\"\n                  :loading=\"loading\"\n                  :bordered=\"true\"\n                  :scroll=\"{ y: theight }\"\n                  @change=\"handleChange\"\n                  :customRow=\"handleClick\"\n                />\n              </template>\n              <template v-else>\n                <Table\n                  :rowKey=\"handleRowKey\"\n                  :columns=\"tcolumns\"\n                  :data-source=\"tableData\"\n                  size=\"small\"\n                  :pagination=\"xpagination\"\n                  :loading=\"loading\"\n                  :bordered=\"true\"\n                  :scroll=\"{ y: theight }\"\n                  @change=\"handleChange\"\n                  :customRow=\"handleClick\"\n                />\n              </template>\n            </div>\n          </div>\n        </a-menu>\n      </template>\n    </a-dropdown>\n    <span v-else-if=\"props.vmode == 'view'\">{{ props.value }}</span>\n    <span v-else><a-input :value=\"props.value\" class=\"search-text\" :disabled=\"true\" /></span>\n  </div>\n</template>\n\n<script lang=\"ts\" setup>\n  import {\n    ref,\n    onMounted,\n    onUnmounted,\n    defineProps,\n    defineEmits,\n    unref,\n    watch,\n    reactive,\n    withDirectives,\n    nextTick,\n    computed,\n  } from 'vue';\n  import { getCustomCompOptions } from '@/utils/cache';\n  import clickOutside from '/@/directives/clickOutside';\n  import { Table } from 'ant-design-vue';\n  import type { TableProps } from 'ant-design-vue';\n  import { defHttp } from '/@/utils/http/axios';\n  import { MsgManager } from '/@/message/MsgManager';\n\n  const showDropdown = ref(false);\n  const searchRealText = ref<any>('');\n  const search = reactive({ text: '' });\n  const searchBox = ref<any>(null);\n  const dropdown = ref<any>(null);\n  const loading = ref(false);\n  const tableData = reactive([]);\n  const theight = ref(260);\n\n  const props = defineProps({\n    vmode: { type: String, default: 'edit' },\n    opkey: { type: String, default: null },\n    searchKey: { type: String, default: 'name' },\n    multiple: { type: Boolean, default: false },\n    columns: Array, // 列定义\n    data: Array, // 表格数据\n    twidth: { type: String, default: 'auto' },\n    value: { type: String, default: '' }, // 搜索框文本\n    tfields: {\n      type: Object,\n      default: { key: 'id' }, // table必须含有key字段，此处是只将数组对象的那个字段转化为key字段\n    },\n    disabled: { type: Boolean, default: false },\n    api: { type: [String, Function], default: null },\n    apiParamFunc: { type: Function, default: null },\n    vfield: { type: String, default: 'name' },\n    pagination: { type: [Boolean, Object], default: false },\n    callback: { type: Function, default: null },\n    validateFunc: { type: Function, default: null },\n  });\n\n  const tcolumns = ref([]);\n  const tvfield = ref('');\n  const tdata = ref([]);\n  const tpagination = ref<any>(false);\n  const twidths = ref('100%');\n  const xpagination = reactive({\n    size: 'small',\n    total: 0,\n    current: 1,\n    pageSize: 10,\n    hideOnSinglePage: false,\n    simple: false,\n    disabled: false,\n  });\n\n  // 注入全局的disable状态\n  const appDisabled = ref(false);\n\n  // 根据disable状态计算出组件的disable状态\n  const isDisabled = computed(() => {\n    return props.disabled || appDisabled.value;\n  });\n\n  const emit = defineEmits([\n    'update:value',\n    'select',\n    'change',\n    'search',\n    'searchclick',\n    'clear',\n    'update:searchText',\n  ]); // 允许双向绑定value\n\n  // 获取api请求结果\n  const getApiFunc = async (url, pagination, params: any = null) => {\n    if ((params == null || typeof params == 'undefined') && props.apiParamFunc != null) {\n      params = await props.apiParamFunc?.();\n      if (params === false) {\n        return { data: [], total: 0 };\n      }\n    }\n    if (!url.includes('?')) {\n      url = url + `?${props.searchKey}={name}&pageNo={current}&pageSize={pageSize}`;\n    }\n    url = url\n      .replace('{name}', search.text)\n      .replace('{current}', pagination.current)\n      .replace('{pageSize}', pagination.pageSize);\n    const requestParams = { url, params };\n    return defHttp.get<any>(requestParams, { isOnlyResult: true });\n  };\n\n  // 查询数据函数\n  const searchData = () => {\n    try {\n      emit('update:searchText', search.text);\n      emit('search', search.text);\n      emit('searchclick', search.text);\n      nextTick(async () => {\n        // loading.value = true;\n        if (props.api != null && typeof props.api === 'string') {\n          // 如果 api 是字符串，则说明是 URL\n          const url = props.api;\n          const pagination = { current: 1, pageSize: xpagination.pageSize };\n          const result = await getApiFunc(url, pagination);\n          let data = [];\n          if (result?.data && Array.isArray(result?.data)) {\n            data = result?.data;\n          } else if (result?.list && Array.isArray(result?.list)) {\n            data = result?.list;\n          }\n          const rule = props?.tfields;\n          const transformedData = transformData(data, rule) as never[];\n          tableData.splice(0, tableData.length);\n          tableData.push(...transformedData);\n          xpagination.total = result?.total;\n          xpagination.current = pagination.current;\n        } else if (props.api != null && typeof props.api === 'function') {\n          // 如果 api 是函数，则调用函数获取数据\n          const list = await props.api();\n          const rule = props?.tfields;\n          const transformedData = transformData(list, rule) as never[];\n          tableData.splice(0, tableData.length);\n          tableData.push(...transformedData);\n        } else {\n          const rule = props?.tfields;\n          const data = unref(tdata.value as unknown[]);\n          const resultData = JSON.parse(JSON.stringify(data));\n          const result = findNodes(resultData, search.text);\n          const tempList = transformData(result, rule) as never[];\n          tableData.splice(0, tableData.length);\n          tableData.push(...tempList);\n        }\n      });\n      // loading.value = false;\n    } catch (error) {\n      //\n    }\n  };\n\n  // 下拉内容隐藏函数\n  const toggleDropdown = (event) => {\n    try {\n      event.stopPropagation(); // 阻止事件冒泡\n      showDropdown.value = true;\n      handleValid();\n    } catch (error) {\n      //\n    }\n  };\n\n  // 禁用事件\n  const handlePreventEvent = (event) => {\n    event.preventDefault();\n  };\n\n  // 处理校验\n  const handleValid = () => {\n    if (props.validateFunc) {\n      props.validateFunc();\n    }\n  };\n\n  // 更新数据\n  const handleTextChange = (e) => {\n    emit('update:value', searchRealText.value);\n    emit('change', searchRealText.value, {});\n    handleValid();\n  };\n\n  const clearData = () => {\n    try {\n      search.text = '';\n      searchData();\n      clearInput('input.search-input');\n    } catch (error) {\n      //\n    }\n  };\n\n  // 清空输入\n  const clearInput = (selector = 'input.search-input') => {\n    try {\n      document.querySelector(selector).value = '';\n    } catch (e) {\n      //\n    }\n  };\n\n  // 选中函数\n  const rowSelection: TableProps['rowSelection'] = {\n    hideSelectAll: true,\n    preserveSelectedRowKeys: true,\n    onChange: (keys: any[], selectedRows: any[]) => {},\n    onSelect: (record, selected, selectedRows, nativeEvent) => {\n      if (selected == true) {\n        searchRealText.value += handleRowKey(record) + ',';\n      } else {\n        searchRealText.value = searchRealText.value.replace(handleRowKey(record) + ',', '');\n      }\n      emit('update:value', searchRealText.value);\n      emit('select', { records: searchRealText.value, keys: searchRealText.value, selectedRows });\n      emit('change', searchRealText.value, {\n        records: searchRealText.value,\n        keys: searchRealText.value,\n        selectedRows,\n      });\n      handleValid();\n      if (props.callback != null) {\n        props.callback({ records: searchRealText.value, keys: searchRealText.value, selectedRows });\n      }\n    },\n  };\n\n  // 处理RowKey\n  const handleRowKey = (record) => {\n    try {\n      if (Reflect.has(record, tvfield.value)) {\n        return record[tvfield.value];\n      } else if (Reflect.has(record, props.tfields.key)) {\n        return record[props.tfields.key];\n      } else {\n        return JSON.stringify(record);\n      }\n    } catch (error) {\n      //\n    }\n  };\n\n  // 按tfields生成转换规则\n  const reverseRule = (rule) => {\n    const reversedRule = {};\n    try {\n      for (const key in rule) {\n        reversedRule[rule[key]] = key;\n      }\n    } catch (error) {\n      //\n    }\n    return reversedRule;\n  };\n\n  // 按tfields的设置转换table的数据\n  const transformData = (data, rule) => {\n    if (data == null || typeof data == 'undefined' || data.length === 0) {\n      return [];\n    }\n    try {\n      const rules = reverseRule(rule);\n      return data.map((item) => {\n        const newItem = {};\n        for (const key in item) {\n          if (key in rules) {\n            newItem[rules[key]] = item[key];\n          } else {\n            newItem[key] = item[key];\n          }\n        }\n        return newItem;\n      });\n    } catch (error) {\n      return [];\n    }\n  };\n\n  // 递归函数\n  const recursiveSearch = (node, result, searchValue) => {\n    try {\n      const temp = JSON.parse(JSON.stringify(node));\n      if (JSON.stringify(temp).includes(searchValue)) {\n        result.push(temp);\n      }\n    } catch (error) {\n      //\n    }\n  };\n\n  // 查找节点\n  const findNodes = (data, searchValue) => {\n    if (searchValue == '' || searchValue == null || typeof searchValue == 'undefined') {\n      return data;\n    }\n    const result = [];\n    try {\n      // 开始遍历\n      for (const item of data) {\n        recursiveSearch(item, result, searchValue);\n      }\n    } catch (error) {\n      //\n    }\n    return result;\n  };\n\n  const handleClickOutside = (event) => {\n    try {\n      clearData();\n      reloadData();\n      if (typeof event == 'boolean') {\n        return;\n      }\n      if (searchBox.value && !searchBox.value.contains(event.target)) {\n        showDropdown.value = false;\n      }\n    } catch (error) {\n      //\n    }\n  };\n\n  // 表格点击函数\n  const handleClick = (record, index) => {\n    const clickFunc = (event) => {\n      try {\n        if (!props.multiple) {\n          searchRealText.value = record[tvfield.value];\n          emit('update:value', record[tvfield.value]);\n          emit('select', { record, index }, event);\n          emit('change', record[tvfield.value], { record, index }, event);\n          if (props.callback != null) {\n            props.callback({ record, index, event });\n          }\n          handleValid();\n        }\n        showDropdown.value = false;\n      } catch (error) {\n        //\n      }\n    };\n    return {\n      onclick: clickFunc,\n    };\n  };\n\n  // 监听变化函数\n  const handleChange = async (pagination, filters, sorter, options) => {\n    try {\n      // 重新加载数据\n      if (props.api != null) {\n        const result = await getApiFunc(props.api, pagination);\n        if (result?.data && Array.isArray(result?.data)) {\n          tdata.value = result?.data;\n        } else if (result?.list && Array.isArray(result?.list)) {\n          tdata.value = result?.list;\n        }\n        const rule = props?.tfields;\n        const data = unref(tdata.value as unknown[]);\n        const resultData = JSON.parse(JSON.stringify(data));\n        const tempList = transformData(resultData, rule) as never[];\n        tableData.splice(0, tableData.length);\n        tableData.push(...tempList);\n        xpagination.total = result?.total;\n      }\n      // 重新设置分页数据\n      xpagination.current = pagination?.current;\n      xpagination.pageSize = pagination?.pageSize;\n    } catch (error) {\n      //\n    }\n  };\n\n  // 重新加载数据函数\n  const reloadData = async () => {\n    try {\n      if (props.opkey != null && props.opkey != '') {\n        const options = getCustomCompOptions(props.opkey);\n        tcolumns.value = options.columns;\n        tvfield.value = options.vfield;\n        tdata.value = options.data;\n        tpagination.value = options.pagination;\n        twidths.value = options.twidth;\n      } else {\n        tcolumns.value = props.columns as never[];\n        tvfield.value = props.vfield;\n        tdata.value = props.data as never[];\n        tpagination.value = props.pagination;\n        twidths.value = props.twidth;\n      }\n      const pagination = { current: 1, pageSize: xpagination.pageSize };\n      let result: any = null;\n      if (props.api != null && typeof props.api == 'function') {\n        result = await props.api();\n        tdata.value = result?.list;\n      } else if (props.api != null && typeof props.api === 'string') {\n        result = await getApiFunc(props.api, pagination);\n        if (result?.data && Array.isArray(result?.data)) {\n          tdata.value = result?.data;\n        } else if (result?.list && Array.isArray(result?.list)) {\n          tdata.value = result?.list;\n        }\n      }\n      const rule = props?.tfields;\n      const data = unref(tdata.value as unknown[]);\n      const resultData = JSON.parse(JSON.stringify(data));\n      const tempList = transformData(resultData, rule) as never[];\n      tableData.splice(0, tableData.length);\n      tableData.push(...tempList);\n      xpagination.disabled = !tpagination.value;\n      xpagination.total = result?.total;\n      xpagination.current = pagination.current;\n      xpagination.pageSize = pagination?.pageSize;\n    } catch (error) {\n      //\n    }\n  };\n\n  watch(\n    () => showDropdown.value,\n    async () => {\n      try {\n        if (props.twidth === 'auto' || props.twidth === '100%') {\n          const handleWidth = () => {\n            const doms = document.querySelectorAll('body .ant-dropdown');\n            for (let dom of doms) {\n              dom.style.width = dom.style.minWidth;\n            }\n          };\n          await nextTick();\n          await nextTick();\n          await nextTick();\n          await nextTick();\n          await nextTick();\n          handleWidth();\n        }\n      } catch (error) {\n        //\n      }\n    },\n  );\n\n  watch(\n    () => props.data,\n    () => {\n      reloadData();\n    },\n  );\n\n  watch(\n    () => props.value,\n    () => {\n      try {\n        searchRealText.value = props.value;\n      } catch (error) {\n        //\n      }\n    },\n  );\n\n  watch(\n    () => searchRealText.value,\n    (val) => {\n      if (!val) {\n        emit('clear', val);\n      }\n    },\n  );\n\n  onMounted(async () => {\n    try {\n      await reloadData();\n      searchRealText.value = props.value;\n      withDirectives(searchBox, [[clickOutside, handleClickOutside]]); // 注册 clickOutside 指令\n      // MsgManager.getInstance().listen('global-disabled', (message) => { appDisabled.value = message; });\n    } catch (error) {\n      //\n    }\n  });\n\n  onUnmounted(() => {});\n</script>\n\n<style lang=\"less\" scoped>\n  .search-box {\n    position: relative;\n  }\n\n  .vben-editable-cell__wrapper {\n    .search-box {\n      .search-dropdown-box {\n        margin: 0;\n        padding: 0 2px 0 4px;\n\n        :deep(.ant-input) {\n          height: 24px !important;\n          margin: 3px 0;\n        }\n      }\n    }\n  }\n\n  :deep(.ant-dropdown.ant-dropdown-placement-bottomLeft) {\n    width: auto !important;\n  }\n\n  .search-content {\n    position: relative;\n    z-index: 100000 !important; // 设置一个较大的值\n    height: 100%;\n    margin-top: 5px;\n    border: 0 solid #f0f0f0;\n\n    &:deep(.ant-table-wrapper) {\n      z-index: 10000 !important;\n    }\n\n    &:deep(.ant-table-wrapper .ant-spin-nested-loading .ant-spin-container) {\n      z-index: 1000 !important;\n    }\n\n    .search-panel {\n      width: 100%;\n\n      .search-popup-subcontent {\n        margin: 0 5px 1px;\n\n        & input.search-text {\n          z-index: 1000 !important;\n          width: 100%;\n          padding: 5px;\n        }\n      }\n\n      .search-button {\n        position: absolute;\n        top: 5px;\n        right: 0;\n\n        &:hover {\n          cursor: pointer;\n        }\n      }\n\n      .close-button {\n        position: absolute;\n        top: 5px;\n        right: 40px;\n\n        &:hover {\n          cursor: pointer;\n        }\n      }\n    }\n\n    .search-table {\n      top: 36px;\n      width: 100%;\n      border-bottom: 0 solid #cecece;\n\n      .ant-table-wrapper {\n        padding: 10px;\n      }\n    }\n  }\n\n  input.search-input {\n    width: 100%;\n    height: 35px;\n    line-height: 35px;\n\n    &:focus {\n      border: 0 solid #fefefe;\n      border-bottom: 1px solid #3793f5;\n      border-radius: 0;\n      outline: none;\n    }\n  }\n</style>\n<style lang=\"less\">\n  .theme1 {\n    .search-content .search-panel {\n      border-bottom: 1px solid rgb(217 217 217 / 16%);\n      background: #032748;\n\n      .search-button {\n        background: transparent;\n        color: #fefefe;\n\n        &:hover {\n          color: #1890ff;\n        }\n      }\n\n      .close-button {\n        background: transparent;\n        color: #fefefe;\n\n        &:hover {\n          color: #1890ff;\n        }\n      }\n    }\n\n    .search-popup-subcontent {\n      .search-input {\n        background: transparent;\n      }\n    }\n  }\n\n  [data-theme='dark'] .theme1 {\n    .ant-dropdown-menu {\n      background: #032748;\n    }\n\n    .ant-dropdown {\n      background: #032748;\n      box-shadow:\n        0 3px 6px -4px rgb(0 0 0 / 12%),\n        0 6px 16px 0 rgb(0 0 0 / 8%),\n        0 9px 28px 8px rgb(0 0 0 / 5%);\n    }\n  }\n\n  .theme3 {\n    .search-content .search-panel {\n      border-bottom: 1px solid #f0f0f0;\n      background: #fefefe;\n\n      .search-button {\n        background: #fefefe;\n        color: #cecece;\n\n        &:hover {\n          color: #1890ff;\n        }\n      }\n\n      .close-button {\n        background: #fefefe;\n        color: #cecece;\n\n        &:hover {\n          color: #1890ff;\n        }\n      }\n    }\n  }\n</style>\n"],"names":["showDropdown","ref","searchRealText","search","reactive","searchBox","dropdown","loading","tableData","theight","tcolumns","tvfield","tdata","tpagination","twidths","xpagination","appDisabled","isDisabled","computed","props","getApiFunc","url","pagination","params","__async","_a","requestParams","defHttp","searchData","emit","nextTick","result","data","rule","transformedData","transformData","list","unref","resultData","findNodes","tempList","error","toggleDropdown","event","handleValid","handlePreventEvent","handleTextChange","clearData","clearInput","selector","e","rowSelection","keys","selectedRows","record","selected","nativeEvent","handleRowKey","reverseRule","reversedRule","key","rules","item","newItem","recursiveSearch","node","searchValue","temp","handleClickOutside","reloadData","handleClick","index","handleChange","filters","sorter","options","getCustomCompOptions","watch","handleWidth","doms","dom","val","onMounted","withDirectives","clickOutside","onUnmounted"],"mappings":"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"}