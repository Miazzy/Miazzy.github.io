{"version":3,"file":"WorkOrder-ee069aed.js","sources":["../../src/views/da/stationOperation/operation/WorkOrder.vue"],"sourcesContent":["<template>\n  <div class=\"work-order\">\n    <SmallModule title=\"工单统计\" position=\"left\">\n      <!-- <template #titleRight>\n        <div class=\"right-title-layout\">\n          <div class=\"operation-screen-select\">\n            <DictSelectBox :type=\"DICT_TYPE.BPM_MODEL_CATEGORY\" :width=\"82\" style=\"margin-right: 13px\" />\n          </div>\n          <div class=\"detail-text\"\n            ><span class=\"text\" @click=\"handPenetrate\">详情</span\n            ><span class=\"arrow\">&gt;</span></div\n          >\n        </div>\n      </template> -->\n      <template #content>\n        <div class=\"content-layout\">\n          <div class=\"data-layout\">\n            <DataIndicator\n              label=\"未处理\"\n              :value=\"workOrderIndexData.not_allocation\"\n              @click=\"handPenetrate('notAllocation')\"\n            />\n            <DataIndicator\n              label=\"处理中\"\n              :value=\"workOrderIndexData.processing\"\n              @click=\"handPenetrate('processing')\"\n            />\n            <DataIndicator\n              label=\"今日新增\"\n              :value=\"workOrderIndexData.day_create\"\n              @click=\"handPenetrate('dayCreate')\"\n            />\n            <DataIndicator label=\"今日解决\" :value=\"workOrderIndexData.day_result\" />\n          </div>\n          <div class=\"table-layout\" style=\"margin-top: -1vh\">\n            <a-table\n              class=\"operation-screen-table\"\n              :columns=\"workOrdercolumns\"\n              :data-source=\"workOrderData\"\n              size=\"small\"\n              :pagination=\"false\"\n              :scroll=\"{ y: 'calc(23.5vh - 0.68rem)' }\"\n              :row-class-name=\"(_record, index) => (index % 2 === 0 ? 'table-striped' : null)\"\n            >\n              <template #bodyCell=\"{ column, record }\">\n                <template v-if=\"column.key === 'responsible'\">\n                  <span class=\"blue-text\">{{ record.responsible }}</span>\n                </template>\n                <template v-else-if=\"column.key === 'status'\">\n                  <span v-if=\"record.status === '处理中'\" class=\"blue-text\">{{\n                    record.status\n                  }}</span>\n                  <span v-if=\"record.status === '已完成'\" class=\"green-text\">{{\n                    record.status\n                  }}</span>\n                  <span v-if=\"record.status === '未处理'\" class=\"white-text\">{{\n                    record.status\n                  }}</span>\n                </template>\n              </template>\n            </a-table>\n          </div>\n        </div>\n      </template>\n    </SmallModule>\n  </div>\n</template>\n\n<script lang=\"ts\" setup>\n  import SmallModule from '/@/components/Framework/OperationScreen/SmallModule.vue';\n  import DataIndicator from '/@/components/Framework/OperationScreen/DataIndicator.vue';\n  import { reactive, UnwrapRef, ref, onMounted } from 'vue';\n  import { getWorkOrderData, workOrdercolumns } from './data';\n  import { assign } from 'lodash-es';\n  import { addTabPage } from '/@/utils/route';\n\n  const workOrderIndexData: UnwrapRef<any> = reactive({});\n\n  //搜索参数\n  const searchInfo: UnwrapRef<any> = reactive({});\n  interface Props {\n    operationSearchInfo?: {};\n  }\n  const props = withDefaults(defineProps<Props>(), {});\n\n  function handPenetrate(type: string) {\n    let param = {\n      stationId: props.operationSearchInfo.stationUUId,\n    };\n    if (type === 'processing') {\n      param.status = '0,1';\n    } else if (type === 'dayCreate') {\n      let now = new Date();\n      param.startMonth = now.getFullYear().toString() + '-' + (now.getMonth() + 1).toString();\n      param.endMonth = now.getFullYear().toString() + '-' + (now.getMonth() + 1).toString();\n    }\n\n    addTabPage('/po/workorder/index', '工单管理', param);\n  }\n\n  onMounted(() => {\n    assign(searchInfo, props.operationSearchInfo);\n    queryWorkOrderData();\n  });\n\n  const workOrderData = ref([]);\n  const queryWorkOrderData = async () => {\n    let data = await getWorkOrderData(searchInfo);\n    if (data.result) {\n      assign(workOrderIndexData, data.result);\n      workOrderData.value = data.result.barData;\n    }\n  };\n</script>\n\n<style lang=\"less\" scoped>\n  .right-title-layout {\n    display: flex;\n    align-items: center;\n    padding: 0.2rem 0.16rem 0 0;\n\n    .detail-text {\n      margin-left: 0.14rem;\n      color: #fff;\n      font-size: 0.12rem;\n      line-height: 1;\n      cursor: pointer;\n\n      .text {\n        margin-right: 0.04rem;\n      }\n\n      .arrow {\n        opacity: 0.6;\n      }\n    }\n  }\n\n  .content-layout {\n    height: 100%;\n\n    .data-layout {\n      display: flex;\n      align-items: flex-end;\n      justify-content: space-between;\n      height: 20.74%;\n      margin-top: -0.12rem;\n      padding: 0 0.55rem;\n    }\n\n    .table-layout {\n      width: 100%;\n      height: 79.26%;\n      padding: 0 0.16rem;\n\n      .blue-text {\n        color: #03a9ff;\n      }\n\n      .white-text {\n        color: #fff;\n      }\n\n      .green-text {\n        color: #00ffa4;\n      }\n    }\n  }\n</style>\n"],"names":["workOrderIndexData","reactive","searchInfo","handPenetrate","type","param","props","now","addTabPage","onMounted","assign","queryWorkOrderData","workOrderData","ref","__async","data","getWorkOrderData"],"mappings":"04BA4EQA,EAAqCC,EAAS,CAAA,CAAE,EAGhDC,EAA6BD,EAAS,CAAA,CAAE,EAM9C,SAASE,EAAcC,EAAc,CACnC,IAAIC,EAAQ,CACV,UAAWC,EAAM,oBAAoB,WAAA,EAEvC,GAAIF,IAAS,aACXC,EAAM,OAAS,cACND,IAAS,YAAa,CAC3B,IAAAG,MAAU,KACRF,EAAA,WAAaE,EAAI,YAAA,EAAc,SAAa,EAAA,KAAOA,EAAI,SAAA,EAAa,GAAG,SAAS,EAChFF,EAAA,SAAWE,EAAI,YAAA,EAAc,SAAa,EAAA,KAAOA,EAAI,SAAA,EAAa,GAAG,SAAS,CACtF,CAEWC,EAAA,sBAAuB,OAAQH,CAAK,CACjD,CAEAI,EAAU,IAAM,CACPC,EAAAR,EAAYI,EAAM,mBAAmB,EACzBK,GAAA,CACpB,EAEK,MAAAC,EAAgBC,EAAI,CAAA,CAAE,EACtBF,EAAqB,IAAYG,EAAA,sBACjC,IAAAC,EAAO,MAAMC,EAAiBd,CAAU,EACxCa,EAAK,SACAL,EAAAV,EAAoBe,EAAK,MAAM,EACxBH,EAAA,MAAQG,EAAK,OAAO,QACpC"}