import{B as U}from"./BasicTable-0434a334.js";import{T as S}from"./BasicForm.vue_vue_type_style_index_0_lang-1ba7be9e.js";import"./index-085d06c7.js";import{u as N}from"./useTable-109483b3.js";import{a0 as O}from"./antd-15ac76ed.js";import{b as q,av as p,_ as A}from"./index.js";import"./index-316f6ffb.js";import{u as H}from"./useRender-21ce56fb.js";import{P as M}from"./index-20519caf.js";import{g as W,u as J,c as L,a as Z,d as j}from"./index-ef0d8f76.js";import{d as z,k as m,r as G,al as i,Z as x,_ as K,f as a,aa as n,u as r,E as Q,a9 as X,ac as Y,F as $,J as ee}from"./vue-71d1abb3.js";import"./useForm-dea3ed18.js";import"./uniqBy-92d3bc7f.js";import"./useWindowSizeFn-13b1b8a2.js";import"./index-f4fc48e6.js";import"./useTabs-2b062e85.js";import"./download-03e71dd5.js";import"./index-5d49b7a7.js";import"./SearchBox-22bb02d6.js";import"./UploadBox-636ecf02.js";import"./Dialog-0a006d82.js";import"./DictSelectBox.vue_vue_type_script_setup_true_lang-e03e9fe8.js";import"./OrganDialog-dd1023ce.js";import"./sortable.esm-4ae27e0b.js";import"./dict-c04c0dd8.js";import"./useContentViewHeight-7f845167.js";const te=[{title:"编码",dataIndex:"code",width:160},{title:"名称",dataIndex:"name",width:160},{title:"规则",dataIndex:"rule",width:160},{title:"当前值",dataIndex:"currentValue",width:160},{title:"创建时间",dataIndex:"createTime",width:180,customRender:({text:f})=>H.renderDate(f)}],ae=[{label:"编码",field:"code",component:"Input",colProps:{span:8}},{label:"名称",field:"name",component:"Input",colProps:{span:8}}],oe=z({name:"CodeBuildRule",__name:"index",setup(f){const{t:C}=q(),[h,{reload:_}]=N({title:"单据编号规则列表",api:W,columns:te,formConfig:{labelWidth:120,schemas:ae},useSearchForm:!0,showTableSetting:!0,bordered:!0,actionColumn:{width:140,title:C("common.operate"),dataIndex:"action",fixed:"right"}}),I={span:4},k={span:14},u=m(!1);m(!1);const d=m("新增单据编号规则"),g=()=>{u.value=!0},R=l=>{t.id="",t.code="",t.name="",t.rule="",t.currentValue=""},w=l=>{console.log(l),b.value.validate().then(()=>{const e=ee(t);e.id?J(e):L(e),_(),u.value=!1}).catch(e=>{console.log("error",e)})};function B(){d.value="新增单据编号规则",g()}function V(l){d.value="修改单据编号规则",g(),Z(l.id).then(e=>{t.id=e.id,t.code=e.code,t.name=e.name,t.rule=e.rule,t.currentValue=e.currentValue})}function T(l){O.confirm({title:"确认操作",content:"请确认是否删除此流程数据项？",onOk(){j(l.id).then(()=>{_()})}})}const b=m(),t=G({id:"",code:"",name:"",rule:"",currentValue:1}),y={code:[{required:!0,message:"请输入编码",trigger:"change"},{min:10,max:32,message:"长度应该在10到32个字符",trigger:"change"}],name:[{required:!0,message:"请输入名称",trigger:"change"},{min:2,max:64,message:"长度应该在2到32个字符",trigger:"change"}],rule:[{max:128,message:"长度应该在128个字符以内",trigger:"blur"}]};return(l,e)=>{const E=i("a-button"),c=i("a-input"),s=i("a-form-item"),D=i("a-input-number"),F=i("a-form"),P=i("a-modal");return x(),K($,null,[a(r(M),{dense:"",contentFullHeight:"",fixedHeight:"",contentClass:"flex",style:{position:"relative"}},{default:n(()=>[a(r(U),{onRegister:r(h),class:"fix-basic-table"},{toolbar:n(()=>[a(E,{type:"primary",preIcon:r(p).ADD,onClick:B},{default:n(()=>[Q(" 添加 ")]),_:1},8,["preIcon"])]),bodyCell:n(({column:o,record:v})=>[o.key==="action"?(x(),X(r(S),{key:0,actions:[{icon:r(p).EDIT,label:"编辑",onClick:V.bind(null,v)},{icon:r(p).DELETE,danger:!0,label:"删除",onClick:T.bind(null,v)}]},null,8,["actions"])):Y("",!0)]),_:1},8,["onRegister"])]),_:1}),a(P,{visible:u.value,"onUpdate:visible":e[4]||(e[4]=o=>u.value=o),title:d.value,onOk:w,onCancel:R},{default:n(()=>[a(F,{ref_key:"formRef",ref:b,model:t,rules:y,"label-col":I,"wrapper-col":k},{default:n(()=>[a(s,{label:"编码",name:"code"},{default:n(()=>[a(c,{value:t.code,"onUpdate:value":e[0]||(e[0]=o=>t.code=o)},null,8,["value"])]),_:1}),a(s,{label:"名称",name:"name"},{default:n(()=>[a(c,{value:t.name,"onUpdate:value":e[1]||(e[1]=o=>t.name=o)},null,8,["value"])]),_:1}),a(s,{label:"编码规则",name:"rule"},{default:n(()=>[a(c,{value:t.rule,"onUpdate:value":e[2]||(e[2]=o=>t.rule=o)},null,8,["value"])]),_:1}),a(s,{label:"当前值",name:"currentValue"},{default:n(()=>[a(D,{value:t.currentValue,"onUpdate:value":e[3]||(e[3]=o=>t.currentValue=o),min:1,max:999999},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible","title"])],64)}}});const Ee=A(oe,[["__scopeId","data-v-02b2d1fe"]]);export{Ee as default};
//# sourceMappingURL=index-2b7a70f3.js.map
