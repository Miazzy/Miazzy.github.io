var p=(n,t,r)=>new Promise((d,l)=>{var u=a=>{try{o(r.next(a))}catch(e){l(e)}},c=a=>{try{o(r.throw(a))}catch(e){l(e)}},o=a=>a.done?d(a.value):Promise.resolve(a.value).then(u,c);o((r=r.apply(n,t)).next())});import{P as h}from"./index-20519caf.js";import{B as _}from"./BasicTable-0434a334.js";import"./BasicForm.vue_vue_type_style_index_0_lang-1ba7be9e.js";import"./index-085d06c7.js";import{u as v}from"./useTable-109483b3.js";import"./antd-15ac76ed.js";import{a5 as P,a7 as x,ax as w}from"./index.js";import{u as y,B as F}from"./useForm-dea3ed18.js";import{d as R,k,o as z,Z as B,a9 as C,aa as D,$ as m,f,u as i}from"./vue-71d1abb3.js";import"./useContentViewHeight-7f845167.js";import"./useWindowSizeFn-13b1b8a2.js";import"./index-316f6ffb.js";import"./index-f4fc48e6.js";import"./useTabs-2b062e85.js";import"./download-03e71dd5.js";import"./index-5d49b7a7.js";import"./SearchBox-22bb02d6.js";import"./UploadBox-636ecf02.js";import"./Dialog-0a006d82.js";import"./DictSelectBox.vue_vue_type_script_setup_true_lang-e03e9fe8.js";import"./OrganDialog-dd1023ce.js";import"./sortable.esm-4ae27e0b.js";import"./dict-c04c0dd8.js";import"./uniqBy-92d3bc7f.js";const S=n=>P.get({url:"/oa/information/queryPage",params:n},{}),O=[{title:"主题",dataIndex:"subject",align:"left",headAlign:"center",width:120,sorter:!0,resizable:!0},{title:"信息类型",dataIndex:"typeText",width:120,sorter:!0,resizable:!0},{title:"发布人",dataIndex:"publisher",width:120,sorter:!0,align:"left",headAlign:"center",resizable:!0},{title:"发布日期",dataIndex:"publishedDate",width:120,sorter:!0,resizable:!0}],Y=[{label:"信息主题",field:"subject",component:"Input",colProps:{span:8}},{label:"信息类型",field:"type",component:"DictSelectBox",componentProps:{type:"information_type"},colProps:{span:8}},{field:"[startPublishedDate, endPublishedDate]",label:"发布时间",component:"RangePicker",colProps:{span:8},componentProps:{format:"YYYY-MM-DD",valueFormat:"YYYY-MM-DD",placeholder:["开始日期","结束日期"]}}],M={class:"w-6/6 tab-model"},T={class:"tab-button-div"},I={class:"tab-table-div"},le=R({__name:"index",setup(n){const t=k({pageNo:1,pageSize:10,sortField:"sort",sortOrder:"desc"});function r(e){e.source==="2"?w(`/oa/info/informationquery/view?bizId=${e.id}`,"查看资讯"):window.open(e.url,"_blank")}const[d,{resetFields:l,getFieldsValue:u}]=y({labelWidth:120,baseColProps:{span:8},actionColOptions:{span:24},schemas:Y,compact:!0,resetButtonOptions:{onClick:()=>p(this,null,function*(){yield l(),o()})},submitFunc:()=>(o(),Promise.resolve())}),[c,{reload:o,getPaginationRef:a}]=v({title:"资讯查询",api:()=>p(this,null,function*(){const e=a();return Object.assign(t.value,u()),t.value.pageNo=e.current,t.value.pageSize=e.pageSize,(yield S(t.value)).result}),columns:O,bordered:!0,rowKey:"id",useSearchForm:!1,showTableSetting:!0,sortFn:e=>{e.order?(t.value.sortField=e.field.replace("Text",""),t.value.sortOrder=e.order.replace("end","")):(t.value.sortField="sort",t.value.sortOrder="desc")},handleSearchInfoFn(e){for(const s in e)t.value[s]=e[s]}});return z(()=>p(this,null,function*(){x.getInstance().listen("info-reload",()=>{o()})})),(e,s)=>(B(),C(i(h),{dense:"",contentFullHeight:"",fixedHeight:"",contentClass:"flex",style:{position:"relative"}},{default:D(()=>[m("div",M,[m("div",T,[f(i(F),{onRegister:i(d)},null,8,["onRegister"])]),m("div",I,[f(i(_),{onRegister:i(c),onRowDbClick:r,onResizeColumn:s[0]||(s[0]=(g,b)=>b.width=g)},null,8,["onRegister"])])])]),_:1}))}});export{le as default};
//# sourceMappingURL=index-cf91a298.js.map
