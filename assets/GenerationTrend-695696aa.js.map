{"version":3,"file":"GenerationTrend-695696aa.js","sources":["../../src/views/da/stationOperation/overview/GenerationTrend.vue"],"sourcesContent":["<template>\n  <div class=\"generation-trend\">\n    <SmallModule title=\"发电趋势\">\n      <template #titleRight>\n        <div class=\"right-title-layout\">\n          <a-radio-group\n            class=\"operation-screen-radio-group\"\n            v-model:value=\"searchInfo.selectTrendValue\"\n            size=\"small\"\n            @change=\"handleTrendChange\"\n          >\n            <a-radio-button value=\"today\">今日</a-radio-button>\n            <a-radio-button value=\"month\">当月</a-radio-button>\n          </a-radio-group>\n        </div>\n      </template>\n      <template #content>\n        <div class=\"content-layout\">\n          <div style=\"transform: scale(0.85); transform-origin: 0 0\">\n            <EchartPillarChart\n              :data=\"pchartData\"\n              :width=\"`26.14vw`\"\n              :height=\"`28.06vh`\"\n              :name=\"pChartName\"\n              @clickItem=\"handlePowerContrastByParams\"\n              :dataZoomDefaultValueRange=\"pchartData.dataZoomDefaultValueRange\"\n              :dataZoomDisabled=\"false\"\n            />\n          </div>\n        </div>\n      </template>\n    </SmallModule>\n  </div>\n</template>\n\n<script lang=\"ts\" setup>\n  import SmallModule from '/@/components/Framework/OperationScreen/SmallModule.vue';\n  import EchartPillarChart from '/@/components/Framework/Chart/EchartPillarChart.vue';\n  import { reactive, UnwrapRef, onMounted, ref } from 'vue';\n  import { addTabPage } from '@/utils/route';\n  import { getElecTrendData } from './data';\n  import { assign } from 'lodash-es';\n\n  function handlePowerContrastByParams() {\n    addTabPage('/bi/elec/powerContrast');\n  }\n\n  const searchInfo: UnwrapRef<any> = reactive({});\n  interface Props {\n    overviewSearchInfo?: {};\n  }\n  const props = withDefaults(defineProps<Props>(), {});\n  const result = ref({});\n\n  const pchartData = ref({\n    barData: [],\n    categories: [],\n    units: ['kWh', 'kWh', 'kWh'],\n    dataZoomDefaultValueRange: [0, 9],\n  });\n\n  const pChartName = ['发电量'];\n\n  const changeTab = (value: string) => {\n    searchInfo.dimension = value;\n    queryPowerEfficiency();\n  };\n\n  const queryElecTrendData = async () => {\n    let data = await getElecTrendData(searchInfo);\n    if (data.result) {\n      result.value = data.result;\n      loadPChartData();\n    }\n  };\n  onMounted(() => {\n    searchInfo.selectTrendValue = 'today';\n    assign(searchInfo, props.overviewSearchInfo);\n    queryElecTrendData(searchInfo);\n  });\n\n  const handleTrendChange = (e: Event) => {\n    searchInfo.selectTrendValue = e.target.value;\n    loadPChartData();\n  };\n\n  const loadPChartData = () => {\n    if (searchInfo.selectTrendValue === 'today') {\n      pchartData.value.barData = result.value.curDate.barData;\n      pchartData.value.categories = result.value.curDate.categories;\n    } else {\n      pchartData.value.barData = result.value.month.barData;\n      pchartData.value.categories = result.value.month.categories;\n    }\n  };\n</script>\n\n<style lang=\"less\" scoped>\n  .right-title-layout {\n    padding-right: 0.16rem;\n  }\n\n  .content-layout {\n    height: 100%;\n    padding: 0 0.14rem;\n  }\n</style>\n"],"names":["handlePowerContrastByParams","addTabPage","searchInfo","reactive","result","ref","pchartData","pChartName","queryElecTrendData","__async","data","getElecTrendData","loadPChartData","onMounted","assign","props","handleTrendChange","e"],"mappings":"+2BA2CE,SAASA,GAA8B,CACrCC,EAAW,wBAAwB,CACrC,CAEM,MAAAC,EAA6BC,EAAS,CAAA,CAAE,EAKxCC,EAASC,EAAI,CAAA,CAAE,EAEfC,EAAaD,EAAI,CACrB,QAAS,CAAC,EACV,WAAY,CAAC,EACb,MAAO,CAAC,MAAO,MAAO,KAAK,EAC3B,0BAA2B,CAAC,EAAG,CAAC,CAAA,CACjC,EAEKE,EAAa,CAAC,KAAK,EAOnBC,EAAqB,IAAYC,EAAA,sBACjC,IAAAC,EAAO,MAAMC,EAAiBT,CAAU,EACxCQ,EAAK,SACPN,EAAO,MAAQM,EAAK,OACLE,IACjB,GAEFC,EAAU,IAAM,CACdX,EAAW,iBAAmB,QACvBY,EAAAZ,EAAYa,EAAM,kBAAkB,EAC3CP,EAA6B,CAAA,CAC9B,EAEK,MAAAQ,EAAqBC,GAAa,CAC3Bf,EAAA,iBAAmBe,EAAE,OAAO,MACxBL,GAAA,EAGXA,EAAiB,IAAM,CACvBV,EAAW,mBAAqB,SAClCI,EAAW,MAAM,QAAUF,EAAO,MAAM,QAAQ,QAChDE,EAAW,MAAM,WAAaF,EAAO,MAAM,QAAQ,aAEnDE,EAAW,MAAM,QAAUF,EAAO,MAAM,MAAM,QAC9CE,EAAW,MAAM,WAAaF,EAAO,MAAM,MAAM,WACnD"}