var _=(i,g,o)=>new Promise((n,m)=>{var h=l=>{try{u(o.next(l))}catch(b){m(b)}},s=l=>{try{u(o.throw(l))}catch(b){m(b)}},u=l=>l.done?n(l.value):Promise.resolve(l.value).then(h,s);u((o=o.apply(i,g)).next())});import G from"./deviceItem-f8cae721.js";import H from"./deviceDialog-59d49a92.js";import{Z as R,e as U,f as Z}from"./monitorApi-44e70004.js";import{aD as $,aH as j}from"./antd-15ac76ed.js";import{d as z,k as c,r as S,w as K,o as M,Z as d,_ as f,$ as a,ad as p,f as w,aa as B,F as D,ae as I,a9 as L,u as T,a5 as y,aG as P,aH as q}from"./vue-71d1abb3.js";import{_ as A}from"./index.js";import"./Dialog-0a006d82.js";import"./deviceWarning-620b5d81.js";import"./BasicTable-0434a334.js";import"./useForm-dea3ed18.js";import"./BasicForm.vue_vue_type_style_index_0_lang-1ba7be9e.js";import"./index-f4fc48e6.js";import"./index-316f6ffb.js";import"./useWindowSizeFn-13b1b8a2.js";import"./useTabs-2b062e85.js";import"./download-03e71dd5.js";import"./index-5d49b7a7.js";import"./SearchBox-22bb02d6.js";import"./UploadBox-636ecf02.js";import"./DictSelectBox.vue_vue_type_script_setup_true_lang-e03e9fe8.js";import"./OrganDialog-dd1023ce.js";import"./uniqBy-92d3bc7f.js";import"./index-085d06c7.js";import"./sortable.esm-4ae27e0b.js";import"./dict-c04c0dd8.js";import"./useTable-109483b3.js";import"./dataDetail-62a9c747.js";import"./EchartLineChart.vue_vue_type_style_index_0_lang-c85cdf3b.js";import"./install-58e0bd81.js";import"./helper-474c7a04.js";import"./api-32c7505d.js";import"./index-74ac3212.js";import"./Export2Excel-389a8fc9.js";import"./dataComparison-458260e7.js";const V=i=>(P("data-v-f619a15f"),i=i(),q(),i),J={class:"combiner-box-list"},Q={class:"combiner-box-header"},W={class:"header-left"},X={class:"status-checkbox-group-box"},aa={class:"status-label-text"},ea=V(()=>a("span",null,"电流异常：",-1)),ta={class:"header-right"},oa=V(()=>a("div",{class:"legend-label"},"组串图例：",-1)),sa={class:"legend-item-label"},la={class:"combiner-box-content"},na={class:"combiner-box-list-box"},ra=z({__name:"combinerBoxList",props:{stationId:String,areaId:String},setup(i,{expose:g}){const o=i,n=c([{label:"正常",value:"normal",number:0},{label:"停机",value:"halt",number:0},{label:"告警",value:"alarm",number:0},{label:"通讯中断",value:"interrupt",number:0}]),m=c(["normal","halt","alarm","interrupt"]),h=e=>{console.log("checkedValue",e),l()},s=S({}),u=c([]),l=()=>_(this,null,function*(){let e=yield R({stationId:o.stationId,areaId:o.areaId,abnormalType:m.value});console.log("getCombinerDcsData",e),Object.assign(s,e.abnormalInfo),n.value[0].number=s.normalNum,n.value[1].number=s.haltNum,n.value[2].number=s.alarmNum,n.value[3].number=s.interruptNum,u.value=e.dataList}),b=[{className:"normal",label:"正常运行"},{className:"offline",label:"离网状态"},{className:"I-abnormal",label:"电流异常"},{className:"communication-outage",label:"通讯中断"},{className:"unconnected",label:"组串未接"}],E=S({deviceLabelKey:"combinerdcESN",left:"combinerdcPVtotal"});K(()=>o.areaId,e=>{e&&l()});const x=c(!1),N=c(""),O=e=>{x.value=!0,N.value=e.combinerdcESN,Y(e),F(e)},k=c([]),Y=e=>_(this,null,function*(){let r=yield U({stationId:o.stationId,areaId:o.areaId,esn:e.combinerdcESN,dataType:3});k.value=r}),C=c([]),F=e=>_(this,null,function*(){let r=yield Z({stationId:o.stationId,areaId:o.areaId,esn:e.esn,dataType:1});C.value=r.dataList});return M(()=>{}),g({statusOptions:n}),(e,r)=>(d(),f("div",J,[a("div",Q,[a("div",W,[a("div",null,"汇流箱："+p(s.deviceNum)+"台",1),a("div",X,[w(T(j),{value:m.value,"onUpdate:value":r[0]||(r[0]=t=>m.value=t),onChange:h},{default:B(()=>[(d(!0),f(D,null,I(n.value,(t,v)=>(d(),L(T($),{key:v,value:t.value},{default:B(()=>[a("span",aa,p(t.label),1),a("span",{class:y({"red-text":t.value!=="normal"&&t.number>0})},p(t.number),3)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),a("div",null,"组串："+p(s.pvStringNum),1),a("div",null,[ea,a("span",{class:y({"red-text":s.abnormalCurrentNum>0})},p(s.abnormalCurrentNum),3)])]),a("div",ta,[oa,(d(),f(D,null,I(b,(t,v)=>a("div",{class:"legend-item",key:v},[a("span",{class:y(["legend-item-icon",t.className])},null,2),a("span",sa,p(t.label),1)])),64))])]),a("div",la,[a("div",na,[(d(!0),f(D,null,I(u.value,(t,v)=>(d(),L(G,{class:"device-item-layout",key:v,options:E,data:t,onDblclick:ia=>O(t)},null,8,["options","data","onDblclick"]))),128))])]),w(H,{title:N.value,visible:x.value,ycData:k.value,yxData:C.value,"onUpdate:visible":r[1]||(r[1]=t=>x.value=t)},null,8,["title","visible","ycData","yxData"])]))}});const za=A(ra,[["__scopeId","data-v-f619a15f"]]);export{za as default};
//# sourceMappingURL=combinerBoxList-d5b3ce59.js.map
