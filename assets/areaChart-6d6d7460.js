var p=(C,u,i)=>new Promise((w,x)=>{var r=n=>{try{o(i.next(n))}catch(s){x(s)}},c=n=>{try{o(i.throw(n))}catch(s){x(s)}},o=n=>n.done?w(n.value):Promise.resolve(n.value).then(r,c);o((i=i.apply(C,u)).next())});import{b as R,au as V,I as E,ay as _,_ as O}from"./index.js";import{e as U}from"./download-03e71dd5.js";import{aG as M,aF as $,ba as G,aC as K,ai as P,K as j}from"./antd-15ac76ed.js";import{B as q}from"./BasicTable-0434a334.js";import"./BasicForm.vue_vue_type_style_index_0_lang-1ba7be9e.js";import"./index-085d06c7.js";import{u as Q}from"./useTable-109483b3.js";import{_ as Z}from"./EchartLineChart.vue_vue_type_style_index_0_lang-c85cdf3b.js";import{P as H,Q as J}from"./monitorApi-44e70004.js";import{d as W,r as X,k as m,o as ee,Z as g,_ as f,$ as v,f as l,aa as D,u as d,ac as y,E as ae}from"./vue-71d1abb3.js";import"./useForm-dea3ed18.js";import"./uniqBy-92d3bc7f.js";import"./index-316f6ffb.js";import"./useWindowSizeFn-13b1b8a2.js";import"./index-f4fc48e6.js";import"./useTabs-2b062e85.js";import"./index-5d49b7a7.js";import"./SearchBox-22bb02d6.js";import"./UploadBox-636ecf02.js";import"./Dialog-0a006d82.js";import"./DictSelectBox.vue_vue_type_script_setup_true_lang-e03e9fe8.js";import"./OrganDialog-dd1023ce.js";import"./sortable.esm-4ae27e0b.js";import"./dict-c04c0dd8.js";import"./install-58e0bd81.js";import"./helper-474c7a04.js";import"./api-32c7505d.js";const te={class:"data-detail"},oe={class:"header-box"},se={class:"header-left"},le={class:"radio-btn-box"},ne={class:"date-picker-box"},ie={key:0,class:"select-box"},re={key:0,class:"header-right"},ce={class:"content-box"},de={key:0,class:"chart-box"},ue={style:{"margin-top":"10px",transform:"scale(0.85)","transform-origin":"0 0"}},me={key:1,class:"table-box"},pe=W({__name:"areaChart",props:{index:{},areaId:{}},setup(C){const u=C,{t:i}=R(),{createConfirm:w,createMessage:x}=V(),r=X({barData:[],lineData:[],categories:[],units:[],colors:[["#078C5D","#68E4B8"],["#E59837","#FAE895"],["#078C5D","#68E4B8"]]});m([]);const c=m("chart"),o=m(),n=e=>{console.log("选择日期",e),I()},s=m([]),k=m([]),Y=e=>{console.log(`selected ${e}`),s.value=e,I()},L=()=>p(this,null,function*(){var t;T.value=u.tableColumns;let e=[];((t=u.index)==null?void 0:t.length)>0&&u.index.forEach(h=>{s.value.length==0&&s.value.push(h.value),e.push(h)}),k.value=e;let a=new Date;o.value=j(_(a),"YYYY-MM-DD"),I()}),I=()=>p(this,null,function*(){let e={};e.queryFieldList=s.value,e.startDate=_(o.value),e.endDate=_(o.value),e.areaId=u.areaId,e.isCrossTian=!1;let a=yield H(e);r.lineData=a.lineData,r.categories=a.timeList,r.units=a.unitList,r.seriesName=a.seriesName,S(a)}),S=e=>p(this,null,function*(){let a=e.columnList,t=e.enList,h=[{title:"时间",dataIndex:"time",width:120}];if(a.length>0){for(let b=0;b<a.length;b++){let z={title:a[b],dataIndex:t[b],width:120};h.push(z)}T.value=h}B.value=e.allData,F()});function N(){return p(this,null,function*(){let e={};e.startDate=_(o.value),e.endDate=_(o.value),e.areaId=u.areaId,e.isCrossTian=!1,w({title:i("common.exportTitle"),iconType:"warning",content:i("common.message.exportMessage"),onOk(){return p(this,null,function*(){yield J(e).then(t=>{U(t==null?void 0:t.data,"区域实时数据.xls")}),x.success(i("common.exportSuccessText"))})}})})}const T=m([]),B=m([]),[A,{reload:F}]=Q({columns:T,bordered:!0,showTableSetting:!1,rowKey:"time",pagination:{show:!0,pageSize:15},tableSetting:{fullScreen:!0},dataSource:B});return ee(()=>{L()}),(e,a)=>(g(),f("div",te,[v("div",oe,[v("div",se,[v("div",le,[l(d($),{value:c.value,"onUpdate:value":a[0]||(a[0]=t=>c.value=t),size:"small"},{default:D(()=>[l(d(M),{value:"chart"},{default:D(()=>[l(E,{icon:"ant-design:line-chart-outlined",class:"radio-btn-icon",size:14})]),_:1}),l(d(M),{value:"table"},{default:D(()=>[l(E,{icon:"ant-design:insert-row-above-outlined",class:"radio-btn-icon",size:14})]),_:1})]),_:1},8,["value"])]),v("div",ne,[l(d(G),{value:o.value,"onUpdate:value":a[1]||(a[1]=t=>o.value=t),valueFormat:"YYYY-MM-DD",onChange:n},null,8,["value"])]),c.value==="chart"?(g(),f("div",ie,[l(d(K),{value:s.value,"onUpdate:value":a[2]||(a[2]=t=>s.value=t),mode:"multiple",style:{"min-width":"206px"},placeholder:"选择指标",options:k.value,"max-tag-count":2,showArrow:"",onChange:Y},null,8,["value","options"])])):y("",!0)]),c.value==="table"?(g(),f("div",re,[l(d(P),{type:"primary",onClick:N},{default:D(()=>[ae("导出")]),_:1})])):y("",!0)]),v("div",ce,[c.value==="chart"?(g(),f("div",de,[v("div",ue,[l(Z,{data:r,colors:r.colors,width:850,height:600},null,8,["data","colors"])])])):y("",!0),c.value==="table"?(g(),f("div",me,[l(d(q),{onRegister:d(A),scroll:{x:200,y:400}},null,8,["onRegister"])])):y("",!0)])]))}});const $e=O(pe,[["__scopeId","data-v-992b3acc"]]);export{$e as default};
//# sourceMappingURL=areaChart-6d6d7460.js.map
