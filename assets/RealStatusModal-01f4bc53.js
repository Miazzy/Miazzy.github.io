var W=Object.defineProperty;var z=Object.getOwnPropertySymbols;var K=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable;var R=(e,o,n)=>o in e?W(e,o,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[o]=n,D=(e,o)=>{for(var n in o||(o={}))K.call(o,n)&&R(e,n,o[n]);if(z)for(var n of z(o))U.call(o,n)&&R(e,n,o[n]);return e};var C=(e,o,n)=>new Promise((f,b)=>{var k=v=>{try{c(n.next(v))}catch(h){b(h)}},r=v=>{try{c(n.throw(v))}catch(h){b(h)}},c=v=>v.done?f(v.value):Promise.resolve(v.value).then(k,r);c((n=n.apply(e,o)).next())});import{M as Z}from"./MonitorVideoItem-196e081b.js";import{au as A,a7 as m,_ as J}from"./index.js";import{K as T}from"./antd-15ac76ed.js";import Q from"./TrackReplay-432cfa35.js";import X from"./HistoryVideo-cec157e4.js";import{f as tt,h as et,i as st}from"./index-0c1c0ee9.js";import{d as at,k as _,r as V,o as ot,b as it,Z as d,_ as l,$ as t,F as y,ae as nt,a5 as g,ad as i,ac as u,f as M,a6 as P,aG as ct,aH as dt}from"./vue-71d1abb3.js";import"./TimeSlider-bdb1df9d.js";import"./BasicTable-0434a334.js";import"./useForm-dea3ed18.js";import"./BasicForm.vue_vue_type_style_index_0_lang-1ba7be9e.js";import"./index-f4fc48e6.js";import"./index-316f6ffb.js";import"./useWindowSizeFn-13b1b8a2.js";import"./useTabs-2b062e85.js";import"./download-03e71dd5.js";import"./index-5d49b7a7.js";import"./SearchBox-22bb02d6.js";import"./UploadBox-636ecf02.js";import"./Dialog-0a006d82.js";import"./DictSelectBox.vue_vue_type_script_setup_true_lang-e03e9fe8.js";import"./OrganDialog-dd1023ce.js";import"./uniqBy-92d3bc7f.js";import"./index-085d06c7.js";import"./sortable.esm-4ae27e0b.js";import"./dict-c04c0dd8.js";import"./useTable-109483b3.js";const s=e=>(ct("data-v-ae3d5c6e"),e=e(),dt(),e),lt={class:"tab-box"},vt=["onClick"],rt={class:"left-content"},ut={key:0,class:"basic-info"},ft={class:"info-item"},ht=s(()=>t("div",{class:"label-box"},"设备编号：",-1)),_t={class:"value-box"},bt=["title"],mt={class:"info-item"},xt=s(()=>t("div",{class:"label-box"},"状态：",-1)),Dt={class:"value-box"},yt={class:"info-item"},gt=s(()=>t("div",{class:"label-box"},"SIM卡号：",-1)),kt={class:"value-box"},It={class:"value-text"},Ct={class:"info-item"},Tt=s(()=>t("div",{class:"label-box"},"姓名：",-1)),Mt={class:"value-box"},wt={class:"value-text"},pt={class:"info-item"},Lt=s(()=>t("div",{class:"label-box"},"最近定位时间：",-1)),St={class:"value-box"},zt={class:"value-text"},Rt={class:"info-item"},Vt=s(()=>t("div",{class:"label-box"},"最近定位：",-1)),Pt={class:"value-box"},Nt={class:"value-text"},Gt={class:"info-item"},$t=s(()=>t("div",{class:"label-box"},"设备编号：",-1)),Bt={class:"value-box"},Et=["title"],Ht={class:"info-item"},Ot=s(()=>t("div",{class:"label-box"},"状态：",-1)),Yt={class:"value-box"},Ft={key:0,class:"info-item"},jt=s(()=>t("div",{class:"label-box"},"实时视频：",-1)),qt=s(()=>t("i",{class:"iconfont icon-bofang btn-icon"},null,-1)),Wt=s(()=>t("span",{class:"btn-text"},"查看",-1)),Kt=[qt,Wt],Ut={class:"info-item"},Zt=s(()=>t("div",{class:"label-box"},"所属电站：",-1)),At={class:"value-box"},Jt={class:"value-text"},Qt={class:"info-item"},Xt=s(()=>t("div",{class:"label-box"},"定位时间：",-1)),te={class:"value-box"},ee={class:"value-text"},se={class:"info-item"},ae=s(()=>t("div",{class:"label-box"},"位置：",-1)),oe={class:"value-box"},ie={class:"value-text"},ne={class:"info-item"},ce=s(()=>t("div",{class:"label-box"},"设备编号：",-1)),de={class:"value-box"},le=["title"],ve={class:"info-item"},re=s(()=>t("div",{class:"label-box"},"状态：",-1)),ue={class:"value-box"},fe={key:0,class:"info-item"},he=s(()=>t("div",{class:"label-box"},"实时视频：",-1)),_e=s(()=>t("i",{class:"iconfont icon-bofang btn-icon"},null,-1)),be=s(()=>t("span",{class:"btn-text"},"查看",-1)),me=[_e,be],xe={class:"info-item"},De=s(()=>t("div",{class:"label-box"},"车牌号：",-1)),ye={class:"value-box"},ge={class:"value-text"},ke={class:"info-item"},Ie=s(()=>t("div",{class:"label-box"},"车辆类型：",-1)),Ce={class:"value-box"},Te={class:"value-text"},Me={class:"info-item"},we=s(()=>t("div",{class:"label-box"},"指定驾驶员：",-1)),pe={class:"value-box"},Le={class:"value-text"},Se={class:"info-item"},ze=s(()=>t("div",{class:"label-box"},"测速定位时间：",-1)),Re={class:"value-box"},Ve={class:"value-text"},Pe={class:"info-item"},Ne=s(()=>t("div",{class:"label-box"},"速度(km/h)：",-1)),Ge={class:"value-box"},$e={class:"value-text"},Be={class:"info-item"},Ee=s(()=>t("div",{class:"label-box"},"位置：",-1)),He={class:"value-box"},Oe={class:"value-text"},Ye={key:1,class:"basic-info"},Fe={key:2,class:"basic-info"},je={key:0,class:"right-box"},qe=at({__name:"RealStatusModal",props:{infoData:{type:Object,require:!0,default:()=>{}},closeModal:{type:Function,require:!0,default:()=>{}}},setup(e){const o=e,n=A(),f=_("1"),b=_([]),k=()=>{let a=[{tabIndex:"1",tabLabel:"基本信息"}];b.value=a},r=V({locDate:T().format("YYYY-MM-DD"),startLocDate:"",endLocDate:""}),c=V({replay:!0,pause:!0,goOn:!0,end:!0}),v=_(6e4),h=_(),w=_("real"),p=_(),N=a=>{f.value=a.tabIndex},L=()=>{h.value.openVideo()},G=()=>C(this,null,function*(){return o.infoData.bizType==="ewc"?yield tt(D({eleWorkCardId:o.infoData.eleWorkCardId},r)):o.infoData.bizType==="dr"?yield et(D({drivingRecorderId:o.infoData.drivingRecorderId},r)):o.infoData.bizType==="ii"?yield st(D({inspectionInstrumentId:o.infoData.inspectionInstrumentId},r)):[]}),$=()=>C(this,null,function*(){if(!r.locDate){n.error("请选择日期");return}const a=yield G();if(!a||a.length==0){n.error("未查询到轨迹数据"),c.replay=!0;return}c.replay=!1,m.getInstance().sendMsg("smart-device-track",{trackParams:{type:"track",trackDuration:v.value},record:o.infoData,data:a})}),B=a=>{let x=v.value;a>0&&(x=x/a),m.getInstance().sendMsg("smart-device-track",{trackParams:{type:"replay",duration:x}}),c.pause=!1,c.end=!1},E=()=>{m.getInstance().sendMsg("smart-device-track",{trackParams:{type:"pause"}}),c.goOn=!1},H=()=>{m.getInstance().sendMsg("smart-device-track",{trackParams:{type:"continue"}})},O=()=>{m.getInstance().sendMsg("smart-device-track",{trackParams:{type:"cancel"}}),c.pause=!0,c.goOn=!0},Y=a=>{r.locDate=a},F=a=>{r.startLocDate=T(a[0]).format("HH:mm"),r.endLocDate=T(a[1]).format("HH:mm")},j=a=>{w.value="history",p.value="http://"+a.filePath},S=a=>{a.target.classList.contains("BMap_noprint")||(a.target.closest(".satellite-map")||a.target.closest(".footer.footer-layout"))&&o.closeModal()};return ot(()=>{k(),window.addEventListener("click",S)}),it(()=>{window.removeEventListener("click",S)}),(a,x)=>(d(),l("div",{class:"modal-box",style:P(`width: ${e.infoData.bizType==="ewc"||e.infoData.status==="offline"?"4.57rem":"8.57rem"}`)},[t("div",{class:"left-box",style:P(`width: ${e.infoData.bizType==="ewc"||e.infoData.status==="offline"?"100%":"45%"}`)},[t("div",lt,[(d(!0),l(y,null,nt(b.value,(I,q)=>(d(),l("div",{class:g(["tab-item",{active:f.value===I.tabIndex}]),key:q,onClick:We=>N(I)},i(I.tabLabel),11,vt))),128))]),t("div",rt,[f.value==="1"?(d(),l("div",ut,[e.infoData.bizType==="ewc"?(d(),l(y,{key:0},[t("div",ft,[ht,t("div",_t,[t("span",{class:"value-text",title:e.infoData.deviceCode},i(e.infoData.deviceCode),9,bt)])]),t("div",mt,[xt,t("div",Dt,[t("div",{class:g(`status-tag ${e.infoData.status}`)},i(e.infoData.statusText),3)])]),t("div",yt,[gt,t("div",kt,[t("div",It,i(e.infoData.simNumber),1)])]),t("div",Ct,[Tt,t("div",Mt,[t("div",wt,i(e.infoData.userName),1)])]),t("div",pt,[Lt,t("div",St,[t("div",zt,i(e.infoData.locDate),1)])]),t("div",Rt,[Vt,t("div",Pt,[t("div",Nt,i(e.infoData.address),1)])])],64)):u("",!0),e.infoData.bizType==="ii"?(d(),l(y,{key:1},[t("div",Gt,[$t,t("div",Bt,[t("span",{class:"value-text",title:e.infoData.deviceCode},i(e.infoData.deviceCode),9,Et)])]),t("div",Ht,[Ot,t("div",Yt,[t("div",{class:g(`status-tag ${e.infoData.status}`)},i(e.infoData.statusText),3)])]),e.infoData.status==="online"?(d(),l("div",Ft,[jt,t("div",{class:"value-box"},[t("button",{class:"value-btn",onClick:L},Kt)])])):u("",!0),t("div",Ut,[Zt,t("div",At,[t("div",Jt,i(e.infoData.stationShortName),1)])]),t("div",Qt,[Xt,t("div",te,[t("div",ee,i(e.infoData.locDate),1)])]),t("div",se,[ae,t("div",oe,[t("div",ie,i(e.infoData.address),1)])])],64)):u("",!0),e.infoData.bizType==="dr"?(d(),l(y,{key:2},[t("div",ne,[ce,t("div",de,[t("span",{class:"value-text",title:e.infoData.deviceCode},i(e.infoData.deviceCode),9,le)])]),t("div",ve,[re,t("div",ue,[t("div",{class:g(`status-tag ${e.infoData.status}`)},i(e.infoData.statusText),3)])]),e.infoData.status==="online"?(d(),l("div",fe,[he,t("div",{class:"value-box"},[t("button",{class:"value-btn",onClick:L},me)])])):u("",!0),t("div",xe,[De,t("div",ye,[t("div",ge,i(e.infoData.plateNumber),1)])]),t("div",ke,[Ie,t("div",Ce,[t("div",Te,i(e.infoData.vehicleTypeText),1)])]),t("div",Me,[we,t("div",pe,[t("div",Le,i(e.infoData.responsiblePersonName),1)])]),t("div",Se,[ze,t("div",Re,[t("div",Ve,i(e.infoData.locDate),1)])]),t("div",Pe,[Ne,t("div",Ge,[t("div",$e,i(e.infoData.speed),1)])]),t("div",Be,[Ee,t("div",He,[t("div",Oe,i(e.infoData.address),1)])])],64)):u("",!0)])):u("",!0),f.value==="2"?(d(),l("div",Ye,[M(Q,{infoData:e.infoData,disabledBtn:c,onSearch:$,onReplay:B,onPause:E,onGoOn:H,onEnd:O,onChangeDate:Y,onChangeTime:F},null,8,["infoData","disabledBtn"])])):u("",!0),f.value==="3"?(d(),l("div",Fe,[M(X,{inspectionInstrumentId:e.infoData.inspectionInstrumentId,onRowClick:j},null,8,["inspectionInstrumentId"])])):u("",!0)])],4),e.infoData.status==="online"&&(e.infoData.bizType==="ii"||e.infoData.bizType==="dr")?(d(),l("div",je,[M(Z,{ref_key:"monitorVideoRef",ref:h,devId:e.infoData.deviceCode,videoType:w.value,videoSrc:p.value,width:"100%",height:"auto",title:e.infoData.deviceCode},null,8,["devId","videoType","videoSrc","title"])])):u("",!0)],4))}});const gs=J(qe,[["__scopeId","data-v-ae3d5c6e"]]);export{gs as default};
//# sourceMappingURL=RealStatusModal-01f4bc53.js.map
