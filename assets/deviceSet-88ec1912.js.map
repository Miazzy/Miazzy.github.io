{"version":3,"file":"deviceSet-88ec1912.js","sources":["../../src/views/baseset/monitor/device/deviceSet.vue"],"sourcesContent":["<template>\n  <PageWrapper dense contentFullHeight fixedHeight contentClass=\"flex\" style=\"position: relative\">\n    <!-- 电站组织树 -->\n    <CommonTree\n      title=\"电站组织\"\n      @select=\"handleSelect\"\n      :value=\"treeData\"\n      class=\"left-tree-layout\"\n      :canEdit=\"false\"\n      :canAdd=\"false\"\n      :canDelete=\"false\"\n      :isShowOperationBtns=\"false\"\n      :fieldNames=\"{ key: 'id', title: 'name' }\"\n      :expandedKeys=\"expandedKeys\"\n      :selectedKeys=\"selectedKeys\"\n    />\n    <div class=\"right-table-layout\">\n      <div class=\"tab-button-div\">\n        <a-form :model=\"searchInfo\" name=\"searchInfo\" layout=\"inline\" autocomplete=\"off\">\n          <a-form-item\n            label=\"区域名称\"\n            name=\"areaName\"\n            style=\"width: 22%; margin-left: 60px\"\n            :colon=\"false\"\n          >\n            <a-input v-model:value=\"searchInfo.areaName\" />\n          </a-form-item>\n          <a-form-item\n            label=\"设备编码\"\n            name=\"deviceEsn\"\n            style=\"width: 22%; margin-left: 60px\"\n            :colon=\"false\"\n          >\n            <a-input v-model:value=\"searchInfo.deviceEsn\" />\n          </a-form-item>\n          <a-form-item\n            label=\"设备名称\"\n            name=\"deviceName\"\n            style=\"width: 22%; margin-left: 60px\"\n            :colon=\"false\"\n          >\n            <a-input v-model:value=\"searchInfo.deviceName\" />\n          </a-form-item>\n          <a-form-item class=\"tab-button\">\n            <a-button class=\"tab-button\" @click=\"resetFrom\">重置</a-button>\n            <a-button type=\"primary\" class=\"tab-button\" @click=\"searchList\">查询</a-button>\n          </a-form-item>\n        </a-form>\n      </div>\n      <div class=\"tab-table-div\">\n        <div class=\"form-subtitle-box\">\n          <div class=\"title-left\"><span>设备列表</span></div>\n          <div class=\"title-right\">\n            <a-button\n              class=\"tab-button\"\n              type=\"primary\"\n              :preIcon=\"IconEnum.ADD\"\n              @click=\"handleCreate\"\n              >{{ t('common.action.create') }}</a-button\n            >\n            <a-button\n              :disabled=\"!hasSelected\"\n              class=\"tab-button red-btn\"\n              :preIcon=\"IconEnum.DELETE\"\n              @click=\"handleDel\"\n              >{{ t('common.delText') }}</a-button\n            >\n\n            <a-button\n              class=\"tab-button yellow-btn\"\n              :preIcon=\"IconEnum.EXPORT\"\n              @click=\"exportList\"\n              >{{ t('common.action.export') }}</a-button\n            >\n          </div>\n        </div>\n        <a-table\n          v-show=\"nodeType == 'inverter'\"\n          :columns=\"inverterColumn\"\n          :data-source=\"deviceList\"\n          :pagination=\"pagination\"\n          @change=\"tableChange\"\n          size=\"small\"\n          bordered\n          rowKey=\"id\"\n          :scroll=\"{ x: 500, y: 'calc(100vh - 233px)' }\"\n          @resize-column=\"(w, col) => (col.width = w)\"\n          :row-selection=\"{\n            selectedRowKeys: checkedKeys,\n            onChange: selectChange,\n          }\"\n        >\n          <template #bodyCell=\"{ column, text, record }\">\n            <template v-if=\"column.dataIndex === 'areaId'\">\n              <div>\n                <a-select\n                  v-if=\"editableData[record.id]\"\n                  v-model:value=\"editableData[record.id][column.dataIndex]\"\n                  style=\"margin: -5px 0\"\n                  :options=\"areaList\"\n                />\n                <template v-else>\n                  {{ record.areaName }}\n                </template></div\n              >\n            </template>\n            <template v-if=\"column.dataIndex === 'modelCode'\">\n              <div>\n                <a-select\n                  v-if=\"editableData[record.id]\"\n                  v-model:value=\"editableData[record.id][column.dataIndex]\"\n                  style=\"margin: -5px 0\"\n                  :options=\"modelOptions\"\n                />\n                <template v-else>\n                  {{ text }}\n                </template></div\n              >\n            </template>\n            <template v-if=\"column.dataIndex === 'name'\"\n              ><div>\n                <a-input\n                  v-if=\"editableData[record.id]\"\n                  v-model:value=\"editableData[record.id][column.dataIndex]\"\n                  style=\"margin: -5px 0\"\n                />\n                <template v-else>\n                  {{ text }}\n                </template></div\n              >\n            </template>\n            <template v-if=\"column.dataIndex === 'operation'\">\n              <div>\n                <span v-if=\"editableData[record.id]\">\n                  <a-typography-link @click=\"save(editableData, record)\">保存 </a-typography-link\n                  >&nbsp;\n                  <a-popconfirm title=\"确定取消?\" @confirm=\"cancel(record, record.id)\">\n                    <a>取消</a>\n                  </a-popconfirm>\n                </span>\n                <span v-else>\n                  <a @click=\"edit(record.id)\">修改 </a>&nbsp;\n                  <a @click=\"handleDetail(record)\"> 组串详情</a>\n                </span>\n              </div>\n            </template>\n          </template>\n        </a-table>\n        <a-table\n          v-show=\"nodeType == 'unInverter'\"\n          :columns=\"unInverterColumn\"\n          :data-source=\"deviceList\"\n          :pagination=\"pagination\"\n          @change=\"tableChange\"\n          size=\"small\"\n          bordered\n          rowKey=\"id\"\n          :scroll=\"{ x: 500, y: 'calc(100vh - 233px)' }\"\n          @resize-column=\"(w, col) => (col.width = w)\"\n          :row-selection=\"{\n            selectedRowKeys: checkedKeys,\n            onChange: selectChange,\n          }\"\n        >\n          <template #bodyCell=\"{ column, text, record }\">\n            <template v-if=\"column.dataIndex === 'areaId'\">\n              <div>\n                <a-select\n                  v-if=\"editableData[record.id]\"\n                  v-model:value=\"editableData[record.id][column.dataIndex]\"\n                  style=\"margin: -5px 0\"\n                  :options=\"areaList\"\n                />\n                <template v-else>\n                  {{ record.areaName }}\n                </template></div\n              >\n            </template>\n            <template v-if=\"column.dataIndex === 'modelCode'\">\n              <div>\n                <a-select\n                  v-if=\"editableData[record.id]\"\n                  v-model:value=\"editableData[record.id][column.dataIndex]\"\n                  style=\"margin: -5px 0\"\n                  :options=\"modelOptions\"\n                />\n                <template v-else>\n                  {{ text }}\n                </template></div\n              >\n            </template>\n            <template v-if=\"['name', 'pvTotal'].includes(column.dataIndex)\"\n              ><div>\n                <a-input\n                  v-if=\"editableData[record.id]\"\n                  v-model:value=\"editableData[record.id][column.dataIndex]\"\n                  style=\"margin: -5px 0\"\n                />\n                <template v-else>\n                  {{ text }}\n                </template></div\n              >\n            </template>\n            <template v-if=\"column.dataIndex === 'operation'\">\n              <div>\n                <span v-if=\"editableData[record.id]\">\n                  <a-typography-link @click=\"save(editableData, record)\">保存 </a-typography-link>\n                  <a-popconfirm title=\"确定取消?\" @confirm=\"cancel(record, record.id)\">\n                    <a>取消</a>\n                  </a-popconfirm>\n                </span>\n                <span v-else>\n                  <a @click=\"edit(record.id)\">修改</a>\n                </span>\n              </div>\n            </template>\n          </template>\n        </a-table>\n        <a-table\n          v-show=\"nodeType == 'other'\"\n          :columns=\"otherColumn\"\n          :data-source=\"deviceList\"\n          :pagination=\"pagination\"\n          @change=\"tableChange\"\n          size=\"small\"\n          bordered\n          rowKey=\"id\"\n          :scroll=\"{ x: 500, y: 'calc(100vh - 233px)' }\"\n          @resize-column=\"(w, col) => (col.width = w)\"\n          :row-selection=\"{\n            selectedRowKeys: checkedKeys,\n            onChange: selectChange,\n          }\"\n        >\n          <template #bodyCell=\"{ column, text, record }\">\n            <template v-if=\"column.dataIndex === 'modelCode'\">\n              <div>\n                <a-select\n                  v-if=\"editableData[record.id]\"\n                  :width=\"100\"\n                  v-model:value=\"editableData[record.id][column.dataIndex]\"\n                  style=\"margin: -5px 0\"\n                  :options=\"modelOptions\"\n                />\n                <template v-else>\n                  {{ text }}\n                </template></div\n              >\n            </template>\n            <template v-if=\"column.dataIndex === 'name'\"\n              ><div>\n                <a-input\n                  v-if=\"editableData[record.id]\"\n                  v-model:value=\"editableData[record.id][column.dataIndex]\"\n                  style=\"margin: -5px 0\"\n                />\n                <template v-else>\n                  {{ text }}\n                </template></div\n              >\n            </template>\n            <template v-if=\"column.dataIndex === 'operation'\">\n              <div>\n                <span v-if=\"editableData[record.id]\">\n                  <a-typography-link @click=\"save(editableData, record)\">保存 </a-typography-link>\n                  <a-popconfirm title=\"确定取消?\" @confirm=\"cancel(record, record.id)\">\n                    <a>取消</a>\n                  </a-popconfirm>\n                </span>\n                <span v-else>\n                  <a @click=\"edit(record.id)\">修改</a>\n                </span>\n              </div>\n            </template>\n          </template>\n        </a-table>\n      </div>\n    </div>\n\n    <div v-show=\"loadingFlag\" class=\"dialog-loading\">\n      <a-spin />\n    </div>\n\n    <!-- 弹窗a: 1、选择光伏区设备 2、选择非组串式逆变器、直流汇流箱 -->\n    <Dialog\n      v-model:visible=\"unInverterVisible\"\n      smode=\"normal\"\n      :title=\"selectTitle\"\n      :width=\"800\"\n      :height=\"300\"\n      @confirm=\"saveUnInverter\"\n      @cancel=\"cancelUnInverter\"\n    >\n      <a-form ref=\"unInverterFormRef\" :model=\"formState\" name=\"unInverterForm\">\n        <a-row :gutter=\"24\">\n          <a-col v-show=\"true\" :span=\"20\">\n            <a-form-item label=\"区域范围\" :labelCol=\"{ span: 5 }\" style=\"margin-bottom: 0\" required>\n              <a-space>\n                <a-form-item\n                  name=\"areaStart\"\n                  :rules=\"[{ required: true, message: '请选择区域范围' }]\"\n                >\n                  <a-input-number v-model:value=\"formState.areaStart\" :min=\"1\" :max=\"100000\" />\n                </a-form-item>\n                <span\n                  style=\"\n                    display: inline-block;\n                    height: 32px;\n                    margin-bottom: 24px;\n                    line-height: 32px;\n                  \"\n                  >-</span\n                >\n                <a-form-item\n                  name=\"areaEnd\"\n                  :rules=\"[{ required: true, message: '请选择区域范围' }]\"\n                >\n                  <a-input-number v-model:value=\"formState.areaEnd\" :min=\"1\" :max=\"100000\" />\n                </a-form-item>\n              </a-space>\n            </a-form-item>\n          </a-col>\n        </a-row>\n        <a-row :gutter=\"24\">\n          <a-col v-show=\"true\" :span=\"20\">\n            <a-form-item label=\"编码范围\" :labelCol=\"{ span: 5 }\" style=\"margin-bottom: 0\" required>\n              <a-space>\n                <a-form-item\n                  name=\"codeStart\"\n                  :rules=\"[{ required: true, message: '请选择编码范围' }]\"\n                >\n                  <a-input-number v-model:value=\"formState.codeStart\" :min=\"1\" :max=\"100000\" />\n                </a-form-item>\n                <span\n                  style=\"\n                    display: inline-block;\n                    height: 32px;\n                    margin-bottom: 24px;\n                    line-height: 32px;\n                  \"\n                  >-</span\n                >\n                <a-form-item\n                  name=\"codeEnd\"\n                  :rules=\"[{ required: true, message: '请选择编码范围' }]\"\n                >\n                  <a-input-number v-model:value=\"formState.codeEnd\" :min=\"1\" :max=\"100000\" />\n                </a-form-item>\n              </a-space>\n            </a-form-item>\n          </a-col>\n        </a-row>\n        <a-row :gutter=\"24\">\n          <a-col v-show=\"true\" :span=\"20\">\n            <a-form-item\n              label=\"设备型号\"\n              name=\"modelCode\"\n              :labelCol=\"{ span: 5 }\"\n              :rules=\"[{ required: true, message: '请选择设备型号' }]\"\n            >\n              <a-select\n                v-model:value=\"formState.modelCode\"\n                allow-clear\n                style=\"width: 100%\"\n                placeholder=\"请选择设备型号\"\n                :options=\"modelOptions\"\n                @change=\"handleChange\"\n              />\n            </a-form-item>\n          </a-col>\n        </a-row>\n      </a-form>\n    </Dialog>\n\n    <!-- 弹窗b: 1、选择升压站设备、储能设备 -->\n    <Dialog\n      v-model:visible=\"otherVisible\"\n      smode=\"normal\"\n      :title=\"selectTitle\"\n      :width=\"800\"\n      :height=\"400\"\n      @confirm=\"saveOther\"\n      @cancel=\"cancelOther\"\n    >\n      <a-form ref=\"otherFormRef\" :model=\"formState\" name=\"otherForm\">\n        <a-row :gutter=\"24\">\n          <a-col v-show=\"true\" :span=\"20\">\n            <a-form-item label=\"编码范围\" :labelCol=\"{ span: 5 }\" style=\"margin-bottom: 0\" required>\n              <a-space>\n                <a-form-item\n                  name=\"codeStart\"\n                  :rules=\"[{ required: true, message: '请选择编码范围' }]\"\n                >\n                  <a-input-number v-model:value=\"formState.codeStart\" :min=\"1\" :max=\"100000\" />\n                </a-form-item>\n                <span\n                  style=\"\n                    display: inline-block;\n                    height: 32px;\n                    margin-bottom: 24px;\n                    line-height: 32px;\n                  \"\n                  >-</span\n                >\n                <a-form-item\n                  name=\"codeEnd\"\n                  :rules=\"[{ required: true, message: '请选择编码范围' }]\"\n                >\n                  <a-input-number v-model:value=\"formState.codeEnd\" :min=\"1\" :max=\"100000\" />\n                </a-form-item>\n              </a-space>\n            </a-form-item>\n          </a-col>\n        </a-row>\n        <a-row :gutter=\"24\">\n          <a-col v-show=\"true\" :span=\"20\">\n            <a-form-item\n              label=\"设备型号\"\n              name=\"modelCode\"\n              :labelCol=\"{ span: 5 }\"\n              :rules=\"[{ required: true, message: '请选择设备型号' }]\"\n            >\n              <a-select\n                v-model:value=\"formState.modelCode\"\n                allow-clear\n                style=\"width: 100%\"\n                placeholder=\"请选择设备型号\"\n                :options=\"modelOptions\"\n                @change=\"handleChange\"\n              />\n            </a-form-item>\n          </a-col>\n        </a-row>\n      </a-form>\n    </Dialog>\n\n    <!-- 弹窗c: 1、选择光伏区设备 2、选择组串式逆变器、直流汇流箱 -->\n    <Dialog\n      v-model:visible=\"inverterVisible\"\n      smode=\"normal\"\n      :title=\"selectTitle\"\n      :width=\"800\"\n      :height=\"600\"\n      @confirm=\"saveInverter\"\n      @cancel=\"cancelInverter\"\n    >\n      <a-form ref=\"inverterFormRef\" :model=\"formState\" name=\"inverterForm\">\n        <a-row :gutter=\"24\">\n          <a-col v-show=\"true\" :span=\"22\">\n            <a-form-item\n              label=\"区域范围\"\n              labelAlign=\"right\"\n              :labelCol=\"{ span: 4 }\"\n              style=\"margin-bottom: 0\"\n              required\n            >\n              <a-space>\n                <a-form-item\n                  name=\"areaStart\"\n                  :rules=\"[{ required: true, message: '请选择区域范围' }]\"\n                >\n                  <a-input-number v-model:value=\"formState.areaStart\" :min=\"1\" :max=\"100000\" />\n                </a-form-item>\n                <span\n                  style=\"\n                    display: inline-block;\n                    height: 32px;\n                    margin-bottom: 24px;\n                    line-height: 32px;\n                  \"\n                  >-</span\n                >\n                <a-form-item\n                  name=\"areaEnd\"\n                  :rules=\"[{ required: true, message: '请选择区域范围' }]\"\n                >\n                  <a-input-number v-model:value=\"formState.areaEnd\" :min=\"1\" :max=\"100000\" />\n                </a-form-item>\n              </a-space>\n            </a-form-item>\n          </a-col>\n        </a-row>\n        <a-row :gutter=\"24\">\n          <a-col v-show=\"true\" :span=\"22\">\n            <a-form-item\n              label=\"设备范围\"\n              labelAlign=\"right\"\n              :labelCol=\"{ span: 4 }\"\n              style=\"margin-bottom: 0\"\n              required\n            >\n              <a-space>\n                <a-form-item\n                  name=\"codeStart\"\n                  :rules=\"[{ required: true, message: '请选择设备范围' }]\"\n                >\n                  <a-input-number v-model:value=\"formState.codeStart\" :min=\"1\" :max=\"100000\" />\n                </a-form-item>\n                <span\n                  style=\"\n                    display: inline-block;\n                    height: 32px;\n                    margin-bottom: 24px;\n                    line-height: 32px;\n                  \"\n                  >-</span\n                >\n                <a-form-item\n                  name=\"codeEnd\"\n                  :rules=\"[{ required: true, message: '请选择设备范围' }]\"\n                >\n                  <a-input-number v-model:value=\"formState.codeEnd\" :min=\"1\" :max=\"100000\" />\n                </a-form-item>\n              </a-space>\n            </a-form-item>\n          </a-col>\n        </a-row>\n        <a-row :gutter=\"24\">\n          <a-col v-show=\"true\" :span=\"22\">\n            <a-form-item\n              label=\"设备型号\"\n              name=\"modelCode\"\n              labelAlign=\"right\"\n              :labelCol=\"{ span: 4 }\"\n              :rules=\"[{ required: true, message: '请选择设备型号' }]\"\n            >\n              <a-select\n                v-model:value=\"formState.modelCode\"\n                allow-clear\n                style=\"width: 100%\"\n                placeholder=\"请选择设备型号\"\n                :options=\"modelOptions\"\n                @change=\"handleChange\"\n              />\n            </a-form-item>\n          </a-col>\n        </a-row>\n        <a-row :gutter=\"24\">\n          <a-col v-show=\"true\" :span=\"22\">\n            <a-form-item\n              label=\"最大接入组串\"\n              name=\"maxPvstringNums\"\n              labelAlign=\"right\"\n              :labelCol=\"{ span: 4 }\"\n              :rules=\"[{ required: true, message: '请输入数字' }]\"\n            >\n              <a-input-number v-model:value=\"formState.maxPvstringNums\" />\n            </a-form-item>\n          </a-col>\n        </a-row>\n        <a-divider orientation=\"left\" orientation-margin=\"10px\">组串配置</a-divider>\n\n        <a-row>\n          <a-col v-show=\"true\" :span=\"22\">\n            <a-form-item\n              label=\"组串范围\"\n              labelAlign=\"right\"\n              :labelCol=\"{ span: 4 }\"\n              style=\"margin-bottom: 0\"\n              required\n            >\n              <a-space>\n                <a-form-item\n                  name=\"strInfomStart\"\n                  :rules=\"[{ required: true, message: '请输入组串范围' }]\"\n                >\n                  <a-input-number\n                    v-model:value=\"formState.strInfomStart\"\n                    :min=\"1\"\n                    :max=\"formState.maxPvstringNums\"\n                  />\n                </a-form-item>\n                <span\n                  style=\"\n                    display: inline-block;\n                    height: 32px;\n                    margin-bottom: 24px;\n                    line-height: 32px;\n                  \"\n                  >-</span\n                >\n                <a-form-item\n                  name=\"strInfomEnd\"\n                  :rules=\"[{ required: true, message: '请输入组串范围' }]\"\n                >\n                  <a-input-number\n                    v-model:value=\"formState.strInfomEnd\"\n                    :min=\"1\"\n                    :max=\"formState.maxPvstringNums\"\n                  />\n                </a-form-item>\n              </a-space>\n            </a-form-item>\n          </a-col>\n          <a-col v-show=\"true\" :span=\"11\">\n            <a-form-item\n              label=\"组件类型\"\n              name=\"pvModuleType\"\n              labelAlign=\"right\"\n              :labelCol=\"{ span: 8 }\"\n            >\n              <DictSelectBox\n                style=\"width: 100%\"\n                v-model:value=\"formState.pvModuleType\"\n                :type=\"`pvModuleType`\"\n              />\n            </a-form-item>\n          </a-col>\n          <a-col v-show=\"true\" :span=\"11\">\n            <a-form-item\n              label=\"组件型号\"\n              name=\"pvModuleModel\"\n              labelAlign=\"right\"\n              :labelCol=\"{ span: 8 }\"\n            >\n              <a-input v-model:value=\"formState.pvModuleModel\" />\n            </a-form-item>\n          </a-col>\n          <a-col v-show=\"true\" :span=\"11\">\n            <a-form-item\n              label=\"组件数(块/串)\"\n              name=\"moduleNum\"\n              labelAlign=\"right\"\n              :labelCol=\"{ span: 8 }\"\n              :rules=\"[{ required: true, message: '请输入数字' }]\"\n            >\n              <a-input-number v-model:value=\"formState.moduleNum\" />\n            </a-form-item>\n          </a-col>\n          <a-col v-show=\"true\" :span=\"11\">\n            <a-form-item\n              label=\"组件功率(W)\"\n              name=\"pvModuleCapacity\"\n              labelAlign=\"right\"\n              :labelCol=\"{ span: 8 }\"\n              :rules=\"[{ required: true, message: '请输入数字' }]\"\n            >\n              <a-input-number v-model:value=\"formState.pvModuleCapacity\" />\n            </a-form-item>\n          </a-col>\n        </a-row>\n      </a-form>\n    </Dialog>\n    <!-- 组串详情弹窗 -->\n    <deviceDetail\n      ref=\"deviceDetailRef\"\n      v-model:visible=\"deviceDetailVisible\"\n      :record=\"deviceDetailRecord\"\n      @cancel-detail=\"cancelDetail\"\n    />\n\n    <div v-if=\"loadingFlag\" class=\"dialog-mask\"> </div>\n  </PageWrapper>\n</template>\n<script lang=\"ts\" setup>\n  import { computed, onMounted, reactive, ref } from 'vue';\n  import { BasicTable, useTable, TableAction, EditRecordRow } from '/@/components/Table';\n  import { TreeItem } from '/@/components/Tree';\n  import { PageWrapper } from '/@/components/Page';\n  import { useModal } from '/@/components/Modal';\n  import deviceDetail from './deviceDetail.vue';\n  import DictSelectBox from '@/components/Framework/Combox/DictSelectBox.vue';\n  import CommonTree from '@/components/Framework/Tree/CommonTree.vue';\n  import { message, FormInstance } from 'ant-design-vue';\n  import { IconEnum } from '@/enums/appEnum';\n  import { jsonToSheetXlsx } from '/@/components/Excel';\n  import Dialog from '@/components/Framework/Modal/Dialog.vue';\n  import { exportExcelFile } from '@/utils/file/download';\n  import { cloneDeep } from 'lodash-es';\n  import {\n    getDeviceList,\n    getDevicePage,\n    insertDevice,\n    updateDevice,\n    getTreeData,\n    deleteDevice,\n    getOtherColumns,\n    searchFormSchema,\n    getModelByType,\n    getAreaList,\n    getModelList,\n    exportDevice,\n    getNodeByEsn,\n  } from './deviceSet';\n  import { useI18n } from '@/hooks/web/useI18n';\n  import { useMessage } from '@/hooks/web/useMessage';\n  import { urlToPath } from '/@/utils/route';\n  import componentSetting from '/@/settings/componentSetting';\n\n  const { t } = useI18n();\n  const { params: routeQuery } = urlToPath();\n  const { createConfirm } = useMessage();\n  const loadingFlag = ref<boolean>(false);\n  const scrollHeight = computed(() => document.documentElement.clientHeight - 222);\n  // 左侧电站树数据\n  const searchInfo = reactive<Recordable>({}); // 查询信息\n  const treeData = ref<TreeItem[]>([]);\n  const areaList = ref<SelectProps['modelOptions']>([]); // 区域数据\n  const modelOptions = ref<SelectProps['modelOptions']>([]); //设备型号\n  const selectedNode = reactive({\n    stationId: '',\n    category: '',\n    deviceType: '',\n    nodeType: '',\n    nodeId: '',\n    nodeName: '',\n  });\n  const otherVisible = ref<boolean>(false);\n  const unInverterVisible = ref<boolean>(false);\n  const inverterVisible = ref<boolean>(false);\n  const deviceDetailVisible = ref<boolean>(false);\n  const deviceDetailRecord = ref<any>(null);\n  const currentEditKeyRef = ref('');\n  const selectTitle = ref('');\n  const deviceDetailRef = ref();\n  const modalOptions = { width: 1200, height: 1200, visible: true }; // 弹框属性\n  const [registerModal, { openModal }] = useModal();\n  //电站分期\n  const pageSizeInfo = reactive({});\n  const checkedKeys = ref<Array<string | number>>([]); // 复选框的选择的数据\n  const formState = reactive({\n    deviceType: '',\n    deviceTypeName: '',\n    stationId: '',\n    areaStart: '',\n    areaEnd: '',\n    codeStart: '',\n    codeEnd: '',\n    deviceStart: '',\n    deviceEnd: '',\n    modelCode: '',\n    maxPvstringNums: '',\n    strInfomStart: '',\n    strInfomEnd: '',\n    pvModuleType: '', // 组件类型\n    pvModuleModel: '', // 组件型号\n    moduleNum: '', // 组件块数\n    pvModuleCapacity: '', // 组件功率\n    modalType: '', //弹框类型：\n  });\n  const deviceList = ref();\n  const unInverterFormRef = ref<FormInstance>();\n  const otherFormRef = ref<FormInstance>();\n  const inverterFormRef = ref<FormInstance>();\n  const expandedKeys = ref<Array<string>>([]);\n  const selectedKeys = ref<Array<string>>([]);\n  const nodeType = ref('inverter');\n  const inverterColumn = ref([\n    {\n      title: '区域名称',\n      dataIndex: 'areaId',\n      width: 100,\n      editRow: true,\n      editComponent: 'Select',\n      sorter: true,\n      showSorterTooltip: false,\n      align: 'center',\n      resizable: true,\n      editComponentProps: {\n        options: areaList,\n        labelField: 'label',\n        valueField: 'value',\n      },\n    },\n    {\n      title: '设备编码',\n      dataIndex: 'esn',\n      sorter: true,\n      showSorterTooltip: false,\n      resizable: true,\n      align: 'center',\n      width: 160,\n    },\n    {\n      title: '设备名称',\n      dataIndex: 'name',\n      sorter: true,\n      showSorterTooltip: false,\n      resizable: true,\n      align: 'center',\n      width: 100,\n      editRow: true,\n    },\n    {\n      title: '设备型号',\n      dataIndex: 'modelCode',\n      editRow: true,\n      editComponent: 'Select',\n      sorter: true,\n      showSorterTooltip: false,\n      resizable: true,\n      editComponentProps: {\n        options: modelOptions,\n        labelField: 'label',\n        valueField: 'value',\n      },\n      width: 260,\n      customHeaderCell: () => {\n        return { style: { textAlign: 'center' } };\n      },\n      customCell: (value, record, index) => {\n        return { style: { textAlign: 'left' } };\n      },\n    },\n    {\n      title: 'PV容量(kW)',\n      dataIndex: 'pvTotal',\n      sorter: true,\n      showSorterTooltip: false,\n      resizable: true,\n      customHeaderCell: () => {\n        return { style: { textAlign: 'center' } };\n      },\n      customCell: (value, record, index) => {\n        return { style: { textAlign: 'right' } };\n      },\n      width: 120,\n    },\n    {\n      title: '最大接入组串数',\n      dataIndex: 'maxPvstringNums',\n      sorter: true,\n      showSorterTooltip: false,\n      resizable: true,\n      customHeaderCell: () => {\n        return { style: { textAlign: 'center' } };\n      },\n      customCell: (value, record, index) => {\n        return { style: { textAlign: 'right' } };\n      },\n      width: 140,\n    },\n    {\n      title: '实际接入数',\n      dataIndex: 'actualPvstringNums',\n      sorter: true,\n      showSorterTooltip: false,\n      resizable: true,\n      customHeaderCell: () => {\n        return { style: { textAlign: 'center' } };\n      },\n      customCell: (value, record, index) => {\n        return { style: { textAlign: 'right' } };\n      },\n      width: 100,\n    },\n    {\n      title: '接入端口',\n      dataIndex: 'actualPort',\n      customHeaderCell: () => {\n        return { style: { textAlign: 'center' } };\n      },\n      customCell: (value, record, index) => {\n        return { style: { textAlign: 'left' } };\n      },\n    },\n    {\n      title: '操作',\n      dataIndex: 'operation',\n      align: 'center',\n      resizable: true,\n    },\n  ]);\n  // 集中式逆变器列头\n  const unInverterColumn = [\n    {\n      title: '区域名称',\n      dataIndex: 'areaId',\n      width: 120,\n      editRow: true,\n      align: 'center',\n      editComponent: 'Select',\n      sorter: true,\n      showSorterTooltip: false,\n      resizable: true,\n      editComponentProps: {\n        options: areaList,\n        labelField: 'label',\n        valueField: 'value',\n      },\n    },\n    {\n      title: '设备编码',\n      dataIndex: 'esn',\n      sorter: true,\n      showSorterTooltip: false,\n      width: 200,\n      align: 'center',\n      resizable: true,\n    },\n    {\n      title: '设备名称',\n      dataIndex: 'name',\n      sorter: true,\n      showSorterTooltip: false,\n      resizable: true,\n      editRow: true,\n      align: 'center',\n      width: 200,\n    },\n    {\n      title: '设备型号',\n      dataIndex: 'modelCode',\n      editRow: true,\n      sorter: true,\n      showSorterTooltip: false,\n      resizable: true,\n      editComponent: 'Select',\n      editComponentProps: {\n        options: modelOptions,\n        labelField: 'label',\n        valueField: 'value',\n      },\n    },\n    {\n      title: 'PV容量(kW)',\n      dataIndex: 'pvTotal',\n      editComponent: 'InputNumber',\n      sorter: true,\n      showSorterTooltip: false,\n      resizable: true,\n      width: 150,\n      editRow: true,\n      align: 'right',\n      headAlign: 'center',\n    },\n    {\n      title: '操作',\n      dataIndex: 'operation',\n      align: 'center',\n      resizable: true,\n      width: 200,\n    },\n  ];\n  // 其他设备列头\n  const otherColumn = [\n    {\n      title: '设备编码',\n      dataIndex: 'esn',\n      align: 'center',\n      sorter: true,\n      showSorterTooltip: false,\n      resizable: true,\n    },\n    {\n      title: '设备名称',\n      dataIndex: 'name',\n      align: 'center',\n      sorter: true,\n      showSorterTooltip: false,\n      resizable: true,\n      editRow: true,\n      width: 200,\n    },\n    {\n      title: '设备型号',\n      dataIndex: 'modelCode',\n      sorter: true,\n      showSorterTooltip: false,\n      resizable: true,\n      editRow: true,\n      align: 'left',\n      headAlign: 'center',\n    },\n    {\n      title: '操作',\n      dataIndex: 'operation',\n      align: 'center',\n      width: 200,\n      resizable: true,\n    },\n  ];\n  const getDeviceListByParam = async () => {\n    // 查询时删除数据选中的状态\n    setTimeout(() => {\n      checkedKeys.value = [];\n    }, 100);\n    if (selectedKeys.value?.length == 0) {\n      return;\n    }\n    // 获取查询信息\n    searchInfo.pageNo = pageSizeInfo.pageNo;\n    searchInfo.pageSize = pageSizeInfo.pageSize;\n    searchInfo.sortField = pageSizeInfo.sortField;\n    searchInfo.sortOrder = pageSizeInfo.sortOrder;\n\n    let data = await getDevicePage(searchInfo);\n    deviceList.value = data.result.list;\n    pagination.value.total = data.result.total;\n    return deviceList;\n  };\n\n  const pagination = ref({\n    defaultPageSize: 20,\n    showTotal: (total) => `共${total}条数据`,\n    pageSizeOptions: ['20', '50', '100', '200'],\n    total: 0, //总条数\n    position: ['bottomRight'],\n    showSizeChanger: componentSetting?.table?.showSizeChanger,\n    showQuickJumper: componentSetting?.table?.showQuickJumper,\n  });\n\n  const tableChange: TableProps['onChange'] = (\n    pag: { pageSize: number; current: number },\n    filter,\n    sorter,\n  ) => {\n    pageSizeInfo.pageNo = pag.current;\n    pageSizeInfo.pageSize = pag.pageSize;\n    if (sorter.order) {\n      pageSizeInfo.sortField = sorter.field;\n      pageSizeInfo.sortOrder = sorter.order.replace('end', '');\n    } else {\n      pageSizeInfo.sortField = '';\n      pageSizeInfo.sortOrder = '';\n    }\n    getDeviceListByParam();\n  };\n\n  const selectChange = (selectedRowKeys: string[]) => {\n    checkedKeys.value = selectedRowKeys;\n  };\n\n  // 关闭组串弹窗，刷新列表\n  function cancelDetail() {\n    loadingFlag.value = false;\n    getDeviceListByParam();\n  }\n\n  const hasSelected = computed(() => checkedKeys.value.length > 0);\n\n  // 保存光伏区下非组串式逆变器和汇流箱的数据\n  function saveUnInverter() {\n    formState.modalType = 'unInverterModal';\n    console.log(formState);\n    unInverterFormRef.value.validateFields().then(() => {\n      // unInverterFormRef?.value?.validate('areaEnd').then(() => {\n      loadingFlag.value = true;\n      insertDevice(formState)\n        .then(() => {\n          message.success('创建成功');\n          getDeviceListByParam();\n          //关闭弹窗\n          loadingFlag.value = false;\n          unInverterVisible.value = false;\n        })\n        .catch(() => {\n          loadingFlag.value = false;\n        });\n      // });\n      // TODO 新增数据\n    });\n  }\n  function cancelUnInverter() {\n    unInverterVisible.value = false;\n  }\n\n  // 保存升压站、储能设备相关的数据\n  function saveOther() {\n    formState.modalType = 'otherModal';\n    console.log(formState);\n    otherFormRef.value.validateFields().then(() => {\n      // TODO 新增数据\n      loadingFlag.value = true;\n      insertDevice(formState)\n        .then(() => {\n          // 情况form\n          message.success('创建成功');\n          getDeviceListByParam();\n          //关闭弹窗\n          loadingFlag.value = false;\n          otherVisible.value = false;\n        })\n        .catch(() => {\n          loadingFlag.value = false;\n        });\n    });\n  }\n  function cancelOther() {\n    otherVisible.value = false;\n  }\n  // 保存组串式，汇流箱器数据\n  function saveInverter() {\n    formState.modalType = 'inverterModal';\n    console.log(formState);\n    inverterFormRef.value.validateFields().then(() => {\n      // TODO 新增数据\n      loadingFlag.value = true;\n      insertDevice(formState)\n        .then(() => {\n          message.success('创建成功');\n          getDeviceListByParam();\n          //关闭弹窗\n          loadingFlag.value = false;\n          inverterVisible.value = false;\n        })\n        .catch(() => {\n          loadingFlag.value = false;\n        });\n    });\n  }\n  function cancelInverter() {\n    inverterVisible.value = false;\n  }\n  // 查询左侧电站树数据\n  async function queryDeptTreeList() {\n    const deptList = (await getTreeData()) as unknown as TreeItem[];\n    treeData.value = deptList.result;\n  }\n\n  // 添加\n  function handleCreate() {\n    if (selectedNode.nodeKindId != 'type') {\n      message.error('请选择设备类型。');\n      return;\n    }\n    if (modelOptions.value.length == 0) {\n      message.error('请先添加设备型号。');\n      return;\n    }\n    // 加载设备型号选择框数据\n    // getModelByType({ stationId: selectedNode.stationId, deviceType: selectedNode.deviceType }).then(\n    //   (data) => {\n    //     if (data.result.length == 0) {\n    //       message.message('请先添加设备型号。');\n    //       return;\n    //     } else {\n    //       let options = [];\n    //       data.result.forEach((element) => {\n    //         options.push({ label: element.name, value: element.code });\n    //       });\n    //       modelOptions.value = options;\n    //     }\n    //   },\n    // );\n    selectTitle.value = '添加-' + selectedNode.name;\n\n    if (selectedNode.category == 'PvAreaDev') {\n      if (selectedNode.deviceType == 'StringFormation' || selectedNode.deviceType == 'CombinerDc') {\n        // 光伏区下面的逆变器\n        showModel('inverter');\n      } else {\n        // 光伏区下面非逆变器\n        showModel('unInverter');\n      }\n    } else {\n      // 升压站，储能设备\n      showModel('other');\n    }\n  }\n\n  // 展示对应弹窗\n  function showModel(visibleName: String) {\n    inverterVisible.value = false;\n    otherVisible.value = false;\n    unInverterVisible.value = false;\n\n    formState.areaStart = null;\n    formState.codeStart = null;\n    formState.areaEnd = null;\n    formState.codeEnd = null;\n    formState.modelCode = null;\n\n    if (visibleName == 'inverter') {\n      inverterFormRef.value?.resetFields();\n      formState.strInfomEnd = null;\n      formState.maxPvstringNums = null;\n      formState.strInfomStart = null;\n      formState.strInfomEnd = null;\n      formState.pvModuleType = null;\n      formState.pvModuleModel = null;\n      formState.moduleNum = null;\n      formState.pvModuleCapacity = null;\n      inverterVisible.value = true;\n    }\n    if (visibleName == 'other') {\n      otherFormRef.value?.resetFields();\n\n      otherVisible.value = true;\n    }\n    if (visibleName == 'unInverter') {\n      unInverterFormRef.value?.resetFields();\n\n      unInverterVisible.value = true;\n    }\n  }\n  // 删除\n  function handleDel() {\n    createConfirm({\n      title: '提示',\n      iconType: 'warning',\n      content: '确定要删除选中记录？',\n      async onOk() {\n        deleteDevice(checkedKeys.value).then(() => {\n          message.success('已删除。');\n          getDeviceListByParam();\n        });\n      },\n    });\n  }\n  // 导出\n  function exportList() {\n    if (deviceList.value?.length > 0) {\n      createConfirm({\n        title: '提示',\n        iconType: 'warning',\n        content: '确定要导出所有记录？',\n        async onOk() {\n          searchInfo.fileName = '设备数据.xls';\n          let areaInfo = {\n            title: '区域名称',\n            dataIndex: 'areaName',\n          };\n          if (nodeType.value == 'inverter') {\n            searchInfo.excelList = inverterColumn;\n            searchInfo.excelList[0] = areaInfo;\n          } else if (nodeType.value == 'unInverter') {\n            searchInfo.excelList = unInverterColumn;\n            searchInfo.excelList[0] = areaInfo;\n          } else {\n            searchInfo.excelList = otherColumn;\n          }\n          await exportDevice(searchInfo).then((res) => {\n            exportExcelFile(res?.data, searchInfo.fileName);\n          });\n          searchInfo.fileName = null;\n        },\n      });\n    } else {\n      message.warning('无数据，不能导出');\n      return;\n    }\n  }\n\n  // 左侧树菜单选中事件\n  async function handleSelect(node) {\n    let startTime = new Date().getTime();\n    if (node != null) {\n      selectedNode.stationId = node.powerStationId;\n      selectedNode.category = node.deviceCategory;\n      selectedNode.deviceType = node.deviceType;\n      selectedNode.nodeKindId = node.nodeKindId;\n      selectedNode.id = node.id;\n      selectedNode.name = node.name;\n    }\n    if (node.nodeKindId == 'type') {\n      searchInfo.deviceCategory = node.deviceCategory;\n      searchInfo.deviceType = node.deviceType;\n      searchInfo.stationId = node.powerStationId;\n      searchInfo.orgId = null;\n      formState.stationId = node.powerStationId;\n      formState.deviceType = node.deviceType;\n      let keyTemp = [];\n      keyTemp.push(node.id);\n      selectedKeys.value = keyTemp;\n    }\n    // 根据选择的树节点信息重新加载表格数据\n    if (node.deviceType != null) {\n      // 光伏区下面的逆变器\n      await initAreaList(node.powerStationId);\n      await initDeviceModel(node.powerStationId, node.deviceType);\n      let initOverNow = new Date().getTime();\n      if (selectedNode.deviceType == 'StringFormation' || selectedNode.deviceType == 'CombinerDc') {\n        nodeType.value = 'inverter';\n      } else if (selectedNode.deviceType == 'Concentrate') {\n        // 光伏区下面非逆变器\n        nodeType.value = 'unInverter';\n      } else {\n        nodeType.value = 'other';\n      }\n      getDeviceListByParam();\n    }\n  }\n  // 初始化区域列表数据\n  const initAreaList = async (stationId: string) => {\n    let param = { stationId: stationId };\n    const data = await getAreaList(param);\n    let areaTemp = [];\n    data.result.forEach((element) => {\n      areaTemp.push({ label: element.name, value: element.id });\n    });\n    areaList.value = areaTemp;\n  };\n  // 初始化设备型号列表\n  const initDeviceModel = async (stationId: string, deviceType: string) => {\n    let param = { stationId: stationId, deviceType: deviceType };\n    const data = await getModelByType(param);\n    if (data.result.length == 0) {\n      modelOptions.value = [];\n      return;\n    } else {\n      let options = [];\n      data.result.forEach((element) => {\n        options.push({ label: element.name, value: element.code });\n      });\n      modelOptions.value = options;\n    }\n  };\n\n  // 重置\n  function resetFrom() {\n    searchInfo.areaName = null;\n    searchInfo.deviceEsn = null;\n    searchInfo.deviceName = null;\n  }\n\n  // 查询\n  function searchList() {\n    getDeviceListByParam();\n  }\n\n  const editableData: UnwrapRef<Record<string, DataItem>> = reactive({});\n  const editableDataYx: UnwrapRef<Record<string, DataItem>> = reactive({});\n  //  行编辑\n  function edit(key: string) {\n    editableData[key] = cloneDeep(deviceList.value.filter((item) => key === item.id)[0]);\n  }\n  // 行数据编辑后保存\n  async function save(editableData: any, record: any) {\n    let saveData = editableData[record.id];\n    message.loading({ content: '正在保存...', duration: 0, key: 'saving' });\n\n    try {\n      //TODO 此处将数据提交给服务器保存\n      updateDevice(saveData).then(() => {\n        getDeviceListByParam();\n      });\n      // 保存之后提交编辑状态\n      const pass = record.onEdit?.(false, true);\n      if (pass) {\n        currentEditKeyRef.value = '';\n        record.onEdit?.(false, false);\n      }\n      message.success({ content: '数据已保存', key: 'saving' });\n    } catch (error) {\n      message.error({ content: '保存失败', key: 'saving' });\n    }\n\n    delete editableData[record.id];\n  }\n\n  //  遥测关闭行编辑\n  function cancel(record: any, key: number) {\n    delete editableData[key];\n    if (record.id == '') {\n      modelInfoYcList.value = modelInfoYcList.value.filter((item) => item.key !== key);\n    }\n  }\n  // 打开组串详情\n  function handleDetail(record: EditRecordRow) {\n    // deviceDetailVisible.value = true;\n    deviceDetailRef.value.openModal();\n    deviceDetailRecord.value = record;\n  }\n\n  // 跳转后前端展开树节点的逻辑\n  let existTreeId = false;\n  const recursion = (data, keyMap, treeId) => {\n    for (let i = 0; i < data.length; i++) {\n      const item = data[i];\n      let keys = keyMap[item.parentId];\n      if (!keys || keys.length == 0) {\n        keys = [];\n      }\n      keys.push(item.id);\n      keyMap[item.id] = keys;\n      delete keyMap[item.parentId];\n      if (existTreeId) {\n        continue;\n      } else {\n        existTreeId = item.id === treeId;\n      }\n      if (item.children && item.children.length > 0) {\n        recursion(item.children, keyMap, treeId);\n      }\n    }\n  };\n\n  const setTreeNode = async (treeId: string) => {\n    if (!treeId) {\n      return;\n    }\n    setTimeout(async () => {\n      let keyMap = {};\n      recursion(treeData.value, keyMap, treeId);\n      expandedKeys.value = keyMap[treeId];\n      selectedKeys.value = [treeId];\n    }, 500);\n  };\n\n  const dealNode = async (ens: String) => {\n    let node = await getNodeByEsn({ esn: ens });\n    selectedKeys.value = node.result.selectedKeys;\n    expandedKeys.value = node.result.expandedKeys;\n    handleSelect(node.result.selectedNode);\n  };\n  // 启动执行代码\n  onMounted(async () => {\n    await queryDeptTreeList();\n    if (routeQuery.deviceEsn != null) {\n      searchInfo.deviceEsn = routeQuery.deviceEsn;\n      dealNode(routeQuery.deviceEsn);\n    }\n    // setTreeNode(routeQuery.treeId);\n  });\n</script>\n<style lang=\"less\" scoped>\n  .tab-button-div {\n    height: 56px;\n    margin-top: 10px;\n    margin-right: 10px;\n    margin-left: 10px;\n    padding: 12px;\n  }\n\n  .tab-button {\n    margin-right: 12px;\n  }\n\n  .tab-table-div {\n    height: calc(100vh - 86px) !important;\n    margin: 10px;\n    padding-right: 16px;\n    padding-left: 16px;\n    overflow: auto;\n\n    :deep(.ant-tabs-top > .ant-tabs-nav) {\n      margin-bottom: 1px;\n    }\n\n    :deep(.ant-tabs-content-holder) {\n      padding: 0 16px;\n    }\n\n    :deep(.ant-table-body) {\n      height: calc(100vh - 76px - 56px - 56px - 40px - 2px + 19px);\n    }\n\n    :deep(.ant-pagination) {\n      margin: 10px 0;\n    }\n  }\n\n  .dialog-loading {\n    position: absolute;\n    z-index: 1000 !important;\n    top: 45%;\n    left: 45%;\n  }\n\n  .dialog-mask {\n    position: absolute;\n    z-index: 1001 !important;\n    top: -1px;\n    width: 100%;\n    height: 100%;\n    opacity: 0.3;\n    background: #ccc;\n  }\n\n  .form-subtitle-box {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    margin: 10px 0;\n    padding: 9px 16px 0;\n\n    .title-left {\n      display: flex;\n      align-items: center;\n      font-size: 14px;\n      font-weight: 500;\n      line-height: 24px;\n    }\n\n    .title-right {\n      :deep(.ant-btn) {\n        margin-right: 10px;\n\n        &:last-child {\n          margin-right: 0;\n        }\n      }\n    }\n  }\n\n  .ant-row-rtl .tabs-extra-demo-button {\n    margin-right: 5px;\n    margin-left: 16px;\n  }\n\n  .editable-row-operations a {\n    margin-right: 8px;\n  }\n\n  .left-tree-layout {\n    flex-shrink: 0;\n    width: 298px;\n    border-radius: 2px;\n  }\n\n  .right-table-layout {\n    width: calc(100% - 308px);\n  }\n\n  .fix-basic-table {\n    :deep(&.vben-basic-table .ant-table-wrapper) {\n      padding: 10px 16px 12px;\n    }\n\n    :deep(.table-settings) {\n      margin-right: 0;\n    }\n\n    :deep(.table-settings .anticon-setting) {\n      margin-right: 0;\n    }\n  }\n</style>\n"],"names":["t","useI18n","routeQuery","urlToPath","createConfirm","useMessage","loadingFlag","ref","computed","searchInfo","reactive","treeData","areaList","modelOptions","selectedNode","otherVisible","unInverterVisible","inverterVisible","deviceDetailVisible","deviceDetailRecord","currentEditKeyRef","selectTitle","deviceDetailRef","useModal","pageSizeInfo","checkedKeys","formState","deviceList","unInverterFormRef","otherFormRef","inverterFormRef","expandedKeys","selectedKeys","nodeType","inverterColumn","value","record","index","unInverterColumn","otherColumn","getDeviceListByParam","__async","_a","data","getDevicePage","pagination","total","_b","componentSetting","_d","_c","tableChange","pag","filter","sorter","selectChange","selectedRowKeys","cancelDetail","hasSelected","saveUnInverter","insertDevice","message","cancelUnInverter","saveOther","cancelOther","saveInverter","cancelInverter","queryDeptTreeList","deptList","getTreeData","handleCreate","showModel","visibleName","handleDel","deleteDevice","exportList","areaInfo","exportDevice","res","exportExcelFile","handleSelect","node","keyTemp","initAreaList","initDeviceModel","stationId","getAreaList","areaTemp","element","deviceType","getModelByType","options","resetFrom","searchList","editableData","edit","key","cloneDeep","item","save","saveData","updateDevice","error","cancel","handleDetail","dealNode","ens","getNodeByEsn","onMounted"],"mappings":"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"}