var ee=Object.defineProperty,te=Object.defineProperties;var oe=Object.getOwnPropertyDescriptors;var M=Object.getOwnPropertySymbols;var ne=Object.prototype.hasOwnProperty,ae=Object.prototype.propertyIsEnumerable;var V=(s,t,a)=>t in s?ee(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a,E=(s,t)=>{for(var a in t||(t={}))ne.call(t,a)&&V(s,a,t[a]);if(M)for(var a of M(t))ae.call(t,a)&&V(s,a,t[a]);return s},j=(s,t)=>te(s,oe(t));var Z=(s,t,a)=>new Promise((r,m)=>{var P=g=>{try{p(a.next(g))}catch(_){m(_)}},F=g=>{try{p(a.throw(g))}catch(_){m(_)}},p=g=>g.done?r(g.value):Promise.resolve(g.value).then(P,F);p((a=a.apply(s,t)).next())});import{u as U,c as se,_ as re,aT as q,aU as ie,aJ as le,b9 as ce,p as h,aZ as ue,aj as fe,aK as J}from"./index.js";import{d as X,Z as x,_ as z,$ as A,R as H,a5 as T,u as f,a6 as O,k as $,q as N,w as Q,G as ge,M as de,a8 as pe,p as he,e as y,x as me,v as _e,a9 as G,ag as be,ae as ve,aa as W,ai as ye,ap as He,F as Fe,E as we,ad as Ce,a7 as $e,ac as K}from"./vue-71d1abb3.js";import{a as Pe}from"./useContentViewHeight-7f845167.js";import{u as ke}from"./useWindowSizeFn-13b1b8a2.js";import{_ as L,bx as Re}from"./antd-15ac76ed.js";const Se=X({name:"PageFooter",inheritAttrs:!1,__name:"PageFooter",setup(s){const{prefixCls:t}=U("page-footer"),{getCalcContentWidth:a}=se();return(r,m)=>(x(),z("div",{class:T(f(t)),style:O({width:f(a)})},[A("div",{class:T(`${f(t)}__left`)},[H(r.$slots,"left",{},void 0,!0)],2),H(r.$slots,"default",{},void 0,!0),A("div",{class:T(`${f(t)}__right`)},[H(r.$slots,"right",{},void 0,!0)],2)],6))}});const Y=re(Se,[["__scopeId","data-v-7277d5d2"]]);function Be(s,t,a,r,m=0,P=$(0)){const F=$(null),{footerHeightRef:p}=Pe();let g={useLayoutFooter:!0};const _=l=>{g=l};function D(){N(()=>{R()})}function w(l,S="all"){var v,C,o,u;function b(e){return Number(e.replace(/[^\d]/g,""))}let c=0;const d="0px";if(l){const e=getComputedStyle(l),n=b((v=e==null?void 0:e.marginTop)!=null?v:d),i=b((C=e==null?void 0:e.marginBottom)!=null?C:d),B=b((o=e==null?void 0:e.paddingTop)!=null?o:d),I=b((u=e==null?void 0:e.paddingBottom)!=null?u:d);S==="all"?(c+=n,c+=i,c+=B,c+=I):S==="top"?(c+=n,c+=B):(c+=i,c+=I)}return c}function k(l){return l==null?null:l instanceof HTMLDivElement?l:l.$el}function R(){return Z(this,null,function*(){var u;if(!s.value)return;yield N();const l=k(f(t));if(!l)return;const{bottomIncludeBody:S}=ie(l);let b=0;a.forEach(e=>{var n,i;b+=(i=(n=k(f(e)))==null?void 0:n.offsetHeight)!=null?i:0});let c=(u=w(l))!=null?u:0;r.forEach(e=>{c+=w(k(f(e)))});let d=0;function v(e,n){if(e&&n){const i=e.parentElement;i&&(le(n)?i.classList.contains(n)?d+=w(i,"bottom"):(d+=w(i,"bottom"),v(i,n)):ce(n)&&n>0&&(d+=w(i,"bottom"),v(i,--n)))}}ge(m)?v(l,f(m)):v(l,m);let C=S-f(p)-f(P)-b-c-d;const o=()=>{var e;(e=g.elements)==null||e.forEach(n=>{var i,B;C+=(B=(i=k(f(n)))==null?void 0:i.offsetHeight)!=null?B:0})};g.useLayoutFooter&&f(p)>0,o(),F.value=C})}return q(()=>{N(()=>{R()})}),ke(()=>{R()},{wait:50,immediate:!0}),Q(()=>[p.value],()=>{R()},{flush:"post",immediate:!0}),{redoHeight:D,setCompensation:_,contentHeight:F}}const xe=X({name:"PageWrapper",inheritAttrs:!1,__name:"PageWrapper",props:{title:h.string,dense:h.bool,ghost:h.bool,content:h.string,contentStyle:{type:Object},contentBackground:h.bool,contentFullHeight:h.bool.def(!1),contentClass:h.string,detail:{type:Boolean,default:!1},fixedHeight:h.bool,upwardSpace:h.oneOfType([h.number,h.string]).def(0)},setup(s){const t=s,a=de(),r=pe(),m=$(null),P=$(null),F=$(null),p=$(null),g=$(!1),{prefixCls:_}=U("page-wrapper");he(ue,y(()=>t.fixedHeight));const D=y(()=>t.contentFullHeight),w=y(()=>t.upwardSpace),{redoHeight:k,setCompensation:R,contentHeight:l}=Be(D,m,[P,p],[F],w);R({useLayoutFooter:!0,elements:[p]});const S=y(()=>{var n;const o={[`${_}--dense`]:t.dense},u={"main-layout":window.self===window.top},e=(n=a.class)!=null?n:{};return[_,o,u,e]}),b=y(()=>t.content||(r==null?void 0:r.headerContent)||t.title||d.value.length),c=y(()=>(r==null?void 0:r.leftFooter)||(r==null?void 0:r.rightFooter)),d=y(()=>Object.keys(L(r,"default","leftFooter","rightFooter","headerContent"))),v=y(()=>{const{contentFullHeight:o,contentStyle:u,fixedHeight:e}=t;if(!o)return E({},u);const n=`${f(l)}px`;return E(j(E({},u),{minHeight:n}),e?{height:n}:{})}),C=y(()=>{const{contentBackground:o,contentClass:u,detail:e}=t;return[`${_}-content`,u,e?"detail-content":"",{[`${_}-content-bg`]:o}]});return Q(()=>[c.value],()=>{k()},{flush:"post",immediate:!0}),q(()=>{try{const{params:o}=fe(),u=o.global_disabled=="true"||o.page_readonly=="true";g.value=u,o.__name__&&(window.document.title=o.__name__)}catch(o){}}),(o,u)=>{const e=me("global-disabled");return _e((x(),z("div",{class:T(S.value),ref_key:"wrapperRef",ref:m},[b.value?(x(),G(f(Re),$e({key:0,ghost:s.ghost,title:s.title},f(L)(o.$attrs,"class"),{ref_key:"headerRef",ref:P}),be({default:W(()=>[s.content?(x(),z(Fe,{key:0},[we(Ce(s.content),1)],64)):H(o.$slots,"headerContent",{key:1})]),_:2},[ve(d.value,n=>({name:n,fn:W(i=>[H(o.$slots,n,ye(He(i||{})))])}))]),1040,["ghost","title"])):K("",!0),A("div",{class:T(["overflow-hidden",C.value]),style:O(v.value),ref_key:"contentRef",ref:F},[H(o.$slots,"default")],6),c.value?(x(),G(Y,{key:1,ref_key:"footerRef",ref:p},{left:W(()=>[H(o.$slots,"leftFooter")]),right:W(()=>[H(o.$slots,"rightFooter")]),_:3},512)):K("",!0)],2)),[[e,g.value]])}}});const Ae=J(Y),Ie=J(xe);export{Ie as P,Ae as a};
//# sourceMappingURL=index-20519caf.js.map
