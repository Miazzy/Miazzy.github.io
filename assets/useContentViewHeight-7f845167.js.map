{"version":3,"file":"useContentViewHeight-7f845167.js","sources":["../../src/hooks/component/usePageContext.ts","../../src/layouts/default/content/useContentViewHeight.ts"],"sourcesContent":["import type { InjectionKey, ComputedRef, Ref } from 'vue';\nimport { createContext, useContext } from '/@/hooks/core/useContext';\n\nexport interface PageContextProps {\n  contentHeight: ComputedRef<number>;\n  pageHeight: Ref<number>;\n  setPageHeight: (height: number) => Promise<void>;\n}\n\nconst key: InjectionKey<PageContextProps> = Symbol();\n\nexport function createPageContext(context: PageContextProps) {\n  return createContext<PageContextProps>(context, key, { native: true });\n}\n\nexport function usePageContext() {\n  return useContext<PageContextProps>(key);\n}\n","import { ref, computed, unref } from 'vue';\nimport { createPageContext } from '/@/hooks/component/usePageContext';\nimport { useWindowSizeFn } from '@vben/hooks';\n\nconst headerHeightRef = ref(0);\nconst footerHeightRef = ref(0);\n\nexport function useLayoutHeight() {\n  function setHeaderHeight(val) {\n    headerHeightRef.value = val;\n  }\n  function setFooterHeight(val) {\n    footerHeightRef.value = val;\n  }\n  return { headerHeightRef, footerHeightRef, setHeaderHeight, setFooterHeight };\n}\n\nexport function useContentViewHeight() {\n  const contentHeight = ref(window.innerHeight);\n  const pageHeight = ref(window.innerHeight);\n  const getViewHeight = computed(() => {\n    return unref(contentHeight) - unref(headerHeightRef) - unref(footerHeightRef) || 0;\n  });\n\n  useWindowSizeFn(\n    () => {\n      contentHeight.value = window.innerHeight;\n    },\n    { wait: 100, immediate: true },\n  );\n\n  async function setPageHeight(height: number) {\n    pageHeight.value = height;\n  }\n\n  createPageContext({\n    contentHeight: getViewHeight,\n    setPageHeight,\n    pageHeight,\n  });\n}\n"],"names":["key","createPageContext","context","createContext","headerHeightRef","ref","footerHeightRef","useLayoutHeight","setHeaderHeight","val","setFooterHeight","useContentViewHeight","contentHeight","pageHeight","getViewHeight","computed","unref","useWindowSizeFn","setPageHeight","height","__async"],"mappings":"kVASA,MAAMA,EAAsC,OAAO,EAE5C,SAASC,EAAkBC,EAA2B,CAC3D,OAAOC,EAAgCD,EAASF,EAAK,CAAE,OAAQ,GAAM,CACvE,CCTA,MAAMI,EAAkBC,EAAI,CAAC,EACvBC,EAAkBD,EAAI,CAAC,EAEtB,SAASE,GAAkB,CAChC,SAASC,EAAgBC,EAAK,CAC5BL,EAAgB,MAAQK,CAC1B,CACA,SAASC,EAAgBD,EAAK,CAC5BH,EAAgB,MAAQG,CAC1B,CACA,MAAO,CAAE,gBAAAL,EAAiB,gBAAAE,EAAiB,gBAAAE,EAAiB,gBAAAE,CAAgB,CAC9E,CAEO,SAASC,GAAuB,CAC/B,MAAAC,EAAgBP,EAAI,OAAO,WAAW,EACtCQ,EAAaR,EAAI,OAAO,WAAW,EACnCS,EAAgBC,EAAS,IACtBC,EAAMJ,CAAa,EAAII,EAAMZ,CAAe,EAAIY,EAAMV,CAAe,GAAK,CAClF,EAEDW,EACE,IAAM,CACJL,EAAc,MAAQ,OAAO,WAC/B,EACA,CAAE,KAAM,IAAK,UAAW,EAAK,CAAA,EAG/B,SAAeM,EAAcC,EAAgB,QAAAC,EAAA,sBAC3CP,EAAW,MAAQM,CACrB,GAEkBlB,EAAA,CAChB,cAAea,EACf,cAAAI,EACA,WAAAL,CAAA,CACD,CACH"}