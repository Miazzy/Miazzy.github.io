var I=(y,d,r)=>new Promise((_,u)=>{var c=t=>{try{n(r.next(t))}catch(i){u(i)}},m=t=>{try{n(r.throw(t))}catch(i){u(i)}},n=t=>t.done?_(t.value):Promise.resolve(t.value).then(c,m);n((r=r.apply(y,d)).next())});import{c4 as S,aj as U,c5 as $,c6 as E,bS as T,I as M,_ as B}from"./index.js";import{d as F,k as s,e as v,o as L,al as z,Z as V,_ as W,$ as f,a5 as g,f as D}from"./vue-71d1abb3.js";import"./antd-15ac76ed.js";const j={class:"component-container"},G={class:"form station-selector-box"},H=["src"],P=F({__name:"meta2d",setup(y){const d=s(!1),r=s(),_=s(),u=s(""),c=s(""),m=s({children:"children",label:"name",value:"id"}),n=s(""),t=s(""),i=s(),k=s(),x=new Map,C=v(()=>d.value?"status-on":"status-off"),w=v(()=>d.value?"status-off":"status-on"),R=v(()=>c.value||n.value?"frame-block":"frame-none"),N=v(()=>{const l=c.value?encodeURIComponent(c.value):"",a=n.value?encodeURIComponent(n.value):"",o=t.value?encodeURIComponent(t.value):"";return`${S.RENDER_ENGINE_URL}?id=${l}&nodeId=${a}&stationID=${o}&token=${u.value}`}),b=(l,a)=>I(this,null,function*(){try{n.value=a.nodeId?a.nodeId:a.nodeID,t.value=a.parentId}catch(o){}}),p=(l,a=!0)=>{var o;for(let e of l)if(e!=null&&e.children)x.set(e.id,e==null?void 0:e.children),p(e==null?void 0:e.children);else{const h=x.get(e.id);h&&a?e.children=h:(!e.nodeID||!e.nodeId)&&(e.nodeID=(o=h[0])==null?void 0:o.id)}};return L(()=>I(this,null,function*(){const{params:l}=U(),a=yield $({}),o=yield E();p(a),p(o,!1),k.value=[...o],c.value=l.id,u.value=T(),setTimeout(()=>{d.value=!0},300)})),(l,a)=>{const o=z("a-tree-select");return V(),W("div",{class:"iframe-container",ref_key:"container",ref:r},[f("div",{class:g(["skeleton-container",w.value])},null,2),f("div",j,[f("div",G,[D(M,{class:"icon-left",icon:"mdi:house-city",color:"#1890FF",size:15}),D(o,{value:i.value,"onUpdate:value":a[0]||(a[0]=e=>i.value=e),"show-search":"",style:{width:"200px",margin:"0 0 0 8px"},"dropdown-style":{maxHeight:"800px",overflow:"auto"},placeholder:"请选择电站数据...","allow-clear":"","tree-default-expand-all":!1,"tree-data":k.value,"field-names":m.value,"tree-node-filter-prop":"name",onSelect:b},null,8,["value","tree-data","field-names"])])]),f("div",{class:g(["frame-container",R.value])},[f("iframe",{class:g(["frame-main",C.value]),ref_key:"iframe",ref:_,src:N.value}," ",10,H)],2)],512)}}});const K=B(P,[["__scopeId","data-v-1b08f740"]]);export{K as default};
//# sourceMappingURL=meta2d-6d610ec1.js.map
