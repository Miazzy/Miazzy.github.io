import{B as P}from"./BasicTable-0434a334.js";import{T as q}from"./BasicForm.vue_vue_type_style_index_0_lang-1ba7be9e.js";import"./index-085d06c7.js";import{u as A}from"./useTable-109483b3.js";import{a0 as L}from"./antd-15ac76ed.js";import{b as M,av as p}from"./index.js";import"./index-316f6ffb.js";import{u as J}from"./useRender-21ce56fb.js";import{g as W,u as Z,c as $,a as j,d as z}from"./index-ef0d8f76.js";import{d as G,k as m,r as H,al as r,Z as C,a9 as h,aa as n,$ as K,f as a,u as i,E as Q,ac as X,J as Y}from"./vue-71d1abb3.js";import"./useForm-dea3ed18.js";import"./uniqBy-92d3bc7f.js";import"./useWindowSizeFn-13b1b8a2.js";import"./index-f4fc48e6.js";import"./useTabs-2b062e85.js";import"./download-03e71dd5.js";import"./index-5d49b7a7.js";import"./SearchBox-22bb02d6.js";import"./UploadBox-636ecf02.js";import"./Dialog-0a006d82.js";import"./DictSelectBox.vue_vue_type_script_setup_true_lang-e03e9fe8.js";import"./OrganDialog-dd1023ce.js";import"./sortable.esm-4ae27e0b.js";import"./dict-c04c0dd8.js";const ee=[{title:"编码",dataIndex:"code",width:160},{title:"名称",dataIndex:"name",width:160},{title:"规则",dataIndex:"rule",width:160},{title:"当前值",dataIndex:"currentValue",width:160},{title:"创建时间",dataIndex:"createTime",width:180,customRender:({text:f})=>J.renderDate(f)}],te=[{label:"编码",field:"code",component:"Input",colProps:{span:8}},{label:"名称",field:"name",component:"Input",colProps:{span:8}}],ae={class:"process-box"},Te=G({name:"CodeBuildRule",__name:"index",setup(f){const{t:x}=M(),[I,{getForm:oe,reload:g}]=A({title:"单据编号规则列表",api:W,columns:ee,formConfig:{labelWidth:120,schemas:te},useSearchForm:!0,showTableSetting:!0,actionColumn:{width:140,title:x("common.operate"),dataIndex:"action",fixed:"right"}}),R={span:4},k={span:14},u=m(!1),w=m(!1),d=m("新增单据编号规则"),_=()=>{u.value=!0},V=l=>{t.id="",t.code="",t.name="",t.rule="",t.currentValue=""},B=l=>{console.log(l),b.value.validate().then(()=>{const e=Y(t);e.id?Z(e):$(e),g(),u.value=!1}).catch(e=>{console.log("error",e)})};function T(){d.value="新增单据编号规则",_()}function D(l){d.value="修改单据编号规则",_(),j(l.id).then(e=>{t.id=e.id,t.code=e.code,t.name=e.name,t.rule=e.rule,t.currentValue=e.currentValue})}function E(l){L.confirm({title:"确认操作",content:"请确认是否删除此流程数据项？",onOk(){z(l.id).then(()=>{g()})}})}const b=m(),t=H({id:"",code:"",name:"",rule:"",currentValue:1}),y={code:[{required:!0,message:"请输入编码",trigger:"change"},{min:10,max:32,message:"长度应该在10到32个字符",trigger:"change"}],name:[{required:!0,message:"请输入名称",trigger:"change"},{min:2,max:64,message:"长度应该在2到32个字符",trigger:"change"}],rule:[{max:128,message:"长度应该在128个字符以内",trigger:"blur"}]};return(l,e)=>{const U=r("a-button"),c=r("a-input"),s=r("a-form-item"),N=r("a-input-number"),S=r("a-form"),F=r("a-modal"),O=r("a-spin");return C(),h(O,{spinning:w.value,tip:"Loading..."},{default:n(()=>[K("div",ae,[a(i(P),{onRegister:i(I)},{toolbar:n(()=>[a(U,{type:"primary",preIcon:i(p).ADD,onClick:T},{default:n(()=>[Q(" 添加 ")]),_:1},8,["preIcon"])]),bodyCell:n(({column:o,record:v})=>[o.key==="action"?(C(),h(i(q),{key:0,actions:[{icon:i(p).EDIT,label:"编辑",onClick:D.bind(null,v)},{icon:i(p).DELETE,danger:!0,label:"删除",onClick:E.bind(null,v)}]},null,8,["actions"])):X("",!0)]),_:1},8,["onRegister"]),a(F,{visible:u.value,"onUpdate:visible":e[4]||(e[4]=o=>u.value=o),title:d.value,onOk:B,onCancel:V},{default:n(()=>[a(S,{ref_key:"formRef",ref:b,model:t,rules:y,"label-col":R,"wrapper-col":k},{default:n(()=>[a(s,{label:"编码",name:"code"},{default:n(()=>[a(c,{value:t.code,"onUpdate:value":e[0]||(e[0]=o=>t.code=o)},null,8,["value"])]),_:1}),a(s,{label:"名称",name:"name"},{default:n(()=>[a(c,{value:t.name,"onUpdate:value":e[1]||(e[1]=o=>t.name=o)},null,8,["value"])]),_:1}),a(s,{label:"编码规则",name:"rule"},{default:n(()=>[a(c,{value:t.rule,"onUpdate:value":e[2]||(e[2]=o=>t.rule=o)},null,8,["value"])]),_:1}),a(s,{label:"当前值",name:"currentValue"},{default:n(()=>[a(N,{value:t.currentValue,"onUpdate:value":e[3]||(e[3]=o=>t.currentValue=o),min:1,max:999999},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible","title"])])]),_:1},8,["spinning"])}}});export{Te as default};
//# sourceMappingURL=index-24984cee.js.map
