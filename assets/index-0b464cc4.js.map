{"version":3,"file":"index-0b464cc4.js","sources":["../../src/views/bi/reportform/index.ts","../../src/views/bi/reportform/index.vue"],"sourcesContent":["import { defHttp } from '/@/utils/http/axios';\nimport { BasicColumn } from '/@/components/Table';\n\nenum Api {\n  getReportFormPageData = '/bi/report-form/page',\n  getReportFormData = '/bi/report-form/get',\n  addReportFormData = '/bi/report-form/create',\n  updateReportFormData = '/bi/report-form/update',\n  deleteReportFormData = '/bi/report-form/delete',\n  treeData = '/baseset/index-storehouse/indexTree',\n}\n\n// 列表表头\nexport const columns: BasicColumn[] = [\n  {\n    key: 'name',\n    title: '报表名称',\n    dataIndex: 'name',\n    headAlign: 'center',\n    align: 'left',\n    width: 120,\n    resizable: true,\n    sorter: true,\n  },\n  {\n    key: 'chartTypeText',\n    title: '图表类型',\n    dataIndex: 'chartTypeText',\n    align: 'center',\n    width: 120,\n    resizable: true,\n    sorter: true,\n  },\n  {\n    key: 'reportRangeText',\n    title: '报表范围',\n    dataIndex: 'reportRangeText',\n    width: 120,\n    resizable: true,\n    sorter: true,\n  },\n  {\n    key: 'timeDimensionText',\n    title: '时间纬度',\n    dataIndex: 'timeDimensionText',\n    align: 'center',\n    width: 120,\n    resizable: true,\n    sorter: true,\n  },\n  {\n    key: 'creator',\n    title: '创建人',\n    dataIndex: 'creator',\n    align: 'center',\n    width: 120,\n    resizable: true,\n    sorter: true,\n  },\n  {\n    key: 'createTime',\n    title: '创建时间',\n    dataIndex: 'createTime',\n    align: 'center',\n    width: 120,\n    resizable: true,\n    sorter: true,\n  },\n  {\n    key: 'description',\n    title: '报表描述',\n    dataIndex: 'description',\n    headAlign: 'center',\n    align: 'left',\n    width: 120,\n    resizable: true,\n    sorter: true,\n  },\n];\n\n// 日期详细数据表头字段获取方法\nexport function getColumns(): BasicColumn[] {\n  return columns;\n}\n\nexport interface DeptListItem {\n  id: string;\n  materialCategoryId: string;\n  name: string;\n  code: string;\n  unit: number;\n  warrantyMonth: number;\n  status: number;\n}\n\n// 列表数据\nexport const getReportFormPageDataApi = (params) =>\n  defHttp.get(\n    {\n      url: Api.getReportFormPageData,\n      params,\n    },\n    { isOnlyResult: true },\n  );\n//id 查询数据\nexport const getReportFormDataApi = (params) =>\n  defHttp.get(\n    {\n      url: Api.getReportFormData,\n      params,\n    },\n    {},\n  );\n\n// 组织树数据\nexport const getTreeData = (params) =>\n  defHttp.get(\n    {\n      url: Api.treeData,\n      params,\n    },\n    {},\n  );\n\n// 新增\nexport const addReportFormDataApi = (params) =>\n  defHttp.post(\n    {\n      url: Api.addReportFormData,\n      params,\n    },\n    {},\n  );\n\n// 修改\nexport const updateReportFormDataApi = (params) =>\n  defHttp.put(\n    {\n      url: Api.updateReportFormData,\n      params,\n    },\n    {},\n  );\n\n// 删除\nexport const deleteReportFormDataApi = (params) =>\n  defHttp.delete(\n    {\n      url: Api.deleteReportFormData,\n      params,\n    },\n    {},\n  );\n","<template>\n  <PageWrapper dense contentFullHeight fixedHeight contentClass=\"flex\" style=\"position: relative\">\n    <div class=\"fix-basic-table\">\n      <div class=\"tab-button-div\">\n        <a-form\n          :model=\"searchInfo\"\n          name=\"searchInfo\"\n          layout=\"inline\"\n          autocomplete=\"off\"\n          class=\"search-form\"\n        >\n          <a-form-item\n            name=\"name\"\n            label=\"报表名称\"\n            :labelCol=\"{ span: 6 }\"\n            :rules=\"[{ required: false, message: '请输入报表名称' }]\"\n            style=\"width: 26.5%\"\n          >\n            <a-input v-model:value=\"searchInfo.name\" style=\"width: 100%\" />\n          </a-form-item>\n          <a-form-item\n            name=\"reportRange\"\n            label=\"报表范围\"\n            :labelCol=\"{ span: 6 }\"\n            :rules=\"[{ required: false, message: '请选择报表范围' }]\"\n            style=\"width: 26.5%\"\n          >\n            <DictSelectBox\n              v-model:value=\"searchInfo.reportRange\"\n              :multiple=\"`multiple`\"\n              :type=\"`reportRange`\"\n              @change=\"handleDictSelectBoxChange\"\n              :width=\"'100%'\"\n            />\n          </a-form-item>\n\n          <a-form-item class=\"search-btns\">\n            <a-button style=\"margin: 0 8px\" @click=\"resetSearchFrom\">重置</a-button>\n            <a-button type=\"primary\" class=\"tab-button\" @click=\"searchList\">查询</a-button>\n          </a-form-item>\n        </a-form>\n      </div>\n      <!-- 数据表格 -->\n      <div class=\"tab-table-div\">\n        <BasicTable\n          @register=\"registerTable\"\n          :searchInfo=\"searchInfo\"\n          @resize-column=\"(w, col) => (col.width = w)\"\n          @row-db-click=\"(record) => handleShowView(record)\"\n        >\n          <template #toolbar>\n            <a-button type=\"primary\" :preIcon=\"IconEnum.ADD\" @click=\"handleCreate\">添加</a-button>\n            <a-button type=\"primary\" :preIcon=\"IconEnum.EDIT\" @click=\"handleUpdate\">修改</a-button>\n            <a-button class=\"red-btn\" :preIcon=\"IconEnum.DELETE\" @click=\"handleDelete\"\n              >删除</a-button\n            >\n          </template>\n          <template #bodyCell=\"{ column, text, record }\">\n            <template v-if=\"column.key === 'action'\">\n              <TableAction\n                :actions=\"[\n                  {\n                    icon: IconEnum.LOG,\n                    label: '报表预览',\n                    onClick: handleView.bind(null, record),\n                  },\n                ]\"\n              />\n            </template>\n          </template>\n        </BasicTable>\n      </div>\n    </div>\n    <!-- 添加弹窗 -->\n    <Dialog\n      v-model:visible=\"open\"\n      :title=\"openTitle\"\n      ref=\"reportformDialog\"\n      @cancel=\"handleCancel\"\n      :maskClosable=\"false\"\n      style=\"padding-top: 80px\"\n      :width=\"700\"\n      :height=\"500\"\n    >\n      <div v-show=\"loadingFlag\" class=\"dialog-loading\">\n        <a-spin />\n      </div>\n\n      <a-form\n        :model=\"formState\"\n        name=\"createReport\"\n        labelAlign=\"center\"\n        v-bind=\"formItemLayout\"\n        ref=\"modalFormRef\"\n        style=\"height: 400px\"\n      >\n        <a-row :gutter=\"24\" style=\"margin-top: 16px; margin-left: -20px\">\n          <a-col v-show=\"true\" :span=\"23\">\n            <a-form-item\n              label=\"报表名称\"\n              name=\"name\"\n              :labelCol=\"{ span: 4 }\"\n              :wrapperCol=\"10\"\n              :rules=\"[{ required: true, message: '请输入报表名称' }]\"\n            >\n              <a-input v-model:value=\"formState.name\" style=\"width: 500px\" :disabled=\"isDisabled\" />\n            </a-form-item>\n\n            <a-form-item\n              label=\"报表描述\"\n              name=\"description\"\n              :labelCol=\"{ span: 4 }\"\n              :wrapperCol=\"15\"\n              :rules=\"[{ required: false, message: '请输入报表描述' }]\"\n            >\n              <a-input\n                v-model:value=\"formState.description\"\n                style=\"width: 500px\"\n                :disabled=\"isDisabled\"\n              />\n            </a-form-item>\n\n            <a-form-item\n              label=\"报表范围\"\n              name=\"reportRange\"\n              :labelCol=\"{ span: 4 }\"\n              :wrapperCol=\"15\"\n              :rules=\"[{ required: true, message: '请选择报表范围' }]\"\n            >\n              <DictSelectBox\n                :type=\"`reportRange`\"\n                v-model:value=\"formState.reportRange\"\n                :width=\"500\"\n                :disabled=\"isDisabled\"\n              />\n            </a-form-item>\n\n            <a-form-item\n              label=\"时间纬度\"\n              name=\"timeDimension\"\n              :labelCol=\"{ span: 4 }\"\n              :wrapperCol=\"15\"\n              :rules=\"[{ required: true, message: '请选择时间纬度' }]\"\n            >\n              <DictSelectBox\n                :type=\"`timeDimension`\"\n                v-model:value=\"formState.timeDimension\"\n                :width=\"500\"\n                @change=\"changeTimeDimension\"\n                :disabled=\"isDisabled\"\n              />\n            </a-form-item>\n\n            <a-form-item\n              label=\"图表类型\"\n              name=\"chartType\"\n              :labelCol=\"{ span: 4 }\"\n              :wrapperCol=\"15\"\n              :rules=\"[{ required: true, message: '请选择图表类型' }]\"\n            >\n              <DictSelectBox\n                :type=\"`chartType`\"\n                v-model:value=\"formState.chartType\"\n                :width=\"500\"\n                :disabled=\"isDisabled\"\n              />\n            </a-form-item>\n          </a-col>\n        </a-row>\n      </a-form>\n\n      <template #footer>\n        <a-button key=\"submit\" type=\"primary\" @click=\"nextStep\">下一步</a-button>\n        <a-button key=\"back\" @click=\"handleCancel\" style=\"margin-left: 10px\" v-if=\"!isDisabled\"\n          >取消</a-button\n        >\n      </template>\n    </Dialog>\n\n    <DataSelectDialog\n      :title=\"openTitle\"\n      v-model:visible=\"organCopyVisible\"\n      v-model:value=\"formState.reportIndexList\"\n      @update:visible=\"organCopyVisible = $event\"\n      :tdata=\"treeData\"\n      :tfields=\"{ key: 'nodeId', title: 'nodeName' }\"\n      :width=\"800\"\n      :height=\"600\"\n      extraFooterBtn=\"上一步\"\n      @cancel=\"handleCopyOrganCancel\"\n      @confirm=\"handleCopyOrganConfirm\"\n      @extra=\"handleExtra\"\n      :isEdit=\"!isDisabled\"\n      :showBtm=\"!isDisabled\"\n    />\n  </PageWrapper>\n</template>\n<script lang=\"ts\" setup>\n  import Dialog from '@/components/Framework/Modal/Dialog.vue';\n  import { onMounted, reactive, ref, toRaw, nextTick } from 'vue';\n  import { BasicTable, useTable, TableAction, SorterResult } from '/@/components/Table';\n  import { PageWrapper } from '/@/components/Page';\n  import { message, FormInstance } from 'ant-design-vue';\n  import { IconEnum } from '@/enums/appEnum';\n  import { addTabPage } from '@/utils/route';\n  import { assign } from 'lodash-es';\n  import DictSelectBox from '@/components/Framework/Combox/DictSelectBox.vue';\n  import DataSelectDialog from '@/components/Framework/Modal/DataSelectDialog.vue';\n  import {\n    getReportFormPageDataApi,\n    getReportFormDataApi,\n    addReportFormDataApi,\n    updateReportFormDataApi,\n    deleteReportFormDataApi,\n    columns,\n    getTreeData,\n  } from './index';\n  import { TreeItem } from '/@/components/Tree';\n  import { useMessage } from '@/hooks/web/useMessage';\n\n  let isDisabled = false;\n  const { createConfirm } = useMessage();\n  const searchInfo = reactive<any>({}); // 查询信息\n  const organCopyVisible = ref(false);\n  const modalFormRef = ref<FormInstance>();\n  const modalIndexRef = ref<FormInstance>();\n  const selectedRow = ref({});\n  const open = ref<boolean>(false);\n  const index = ref<boolean>(false);\n  const openTitle = ref<string>('添加报表');\n  const loadingFlag = ref<boolean>(false);\n  const treeData = ref<TreeItem[]>([]);\n  const reportformDialog = ref();\n  const formState = reactive({\n    id: '',\n    name: '',\n    description: '',\n    reportRange: '',\n    timeDimension: '',\n    chartType: '',\n    reportIndexList: null,\n  });\n\n  function handleDictSelectBoxChange(value, node, allNodes) {\n    let names = [];\n    node.forEach((val, idx, array) => {\n      names.push(val.label);\n    });\n  }\n\n  function handleView(record: any) {\n    // router.push(`/po/integrated/knowledge/detail?id=${record.id}` + `&readOnly=true`);\n    addTabPage(`/bi/reportform/preview/index?reportFormId=${record.id}&readOnly=true`);\n  }\n\n  const getDataListParam = async (pa) => {\n    let param = Object.assign(pa, searchInfo);\n    param.pageNo = pa.page;\n    let dataObj = await getReportFormPageDataApi(param);\n    clearSelectedRowKeys();\n    return dataObj;\n  };\n\n  const [registerTable, { reload, clearSelectedRowKeys }] = useTable({\n    title: '报表列表',\n    api: getDataListParam,\n    columns,\n    bordered: true,\n    useSearchForm: false,\n    rowSelection: { type: 'radio', onChange: onChange },\n    pagination: { pageSize: 50 },\n    showTableSetting: true,\n    tableSetting: { fullScreen: true },\n    showIndexColumn: true,\n    indexColumnProps: { fixed: 'left' },\n    fetchSetting: {\n      listField: 'list', // 请求返回结果list字段\n      pageField: 'page', // page字段\n      sizeField: 'pageSize', // pageSize字段\n      totalField: 'total', // 请求返回结果total字段\n    },\n    actionColumn: {\n      width: 80,\n      title: '操作',\n      dataIndex: 'action',\n    },\n    sortFn: (sortInfo: SorterResult) => {\n      if (sortInfo.order) {\n        searchInfo.sortField = sortInfo.field;\n        searchInfo.sortOrder = sortInfo.order.replace('end', '');\n      } else {\n        searchInfo.sortField = null;\n        searchInfo.sortOrder = null;\n      }\n    },\n  });\n\n  function onChange(data, b, c) {\n    selectedRow.value = b[0];\n  }\n  const formItemLayout = {\n    labelCol: {\n      xs: { span: 24 },\n      sm: { span: 4 },\n    },\n    wrapperCol: {\n      xs: { span: 24 },\n      sm: { span: 20 },\n    },\n  };\n\n  function resetForm() {\n    formState.id = '';\n    formState.name = '';\n    formState.description = '';\n    formState.reportRange = '';\n    formState.timeDimension = '';\n    formState.chartType = '';\n    formState.reportIndexList = null;\n  }\n\n  function resetSearchFrom() {\n    searchInfo.name = null;\n    searchInfo.reportRange = null;\n    reload();\n  }\n\n  function searchList() {\n    let reportRange = searchInfo.reportRange;\n    if (Array.isArray(searchInfo.reportRange)) {\n      if (searchInfo.reportRange.length > 0) {\n        let stn = searchInfo.reportRange.join('|');\n        searchInfo.reportRange = stn;\n      }\n    }\n    reload();\n    searchInfo.reportRange = reportRange;\n  }\n\n  function handleCreate() {\n    openTitle.value = '添加报表';\n    resetForm();\n    open.value = true;\n  }\n\n  function handleUpdate() {\n    isDisabled = false;\n    openTitle.value = '修改报表';\n    if (!selectedRow.value || !selectedRow.value.id) {\n      message.warn('请选择数据');\n      return;\n    }\n    getReportFormDataApi({ id: selectedRow.value.id }).then((data) => {\n      let row = data.result;\n      // formState.id = row.id;\n      // formState.name = row.name;\n      assign(formState, row);\n      open.value = true;\n    });\n  }\n\n  function handleShowView(record: any) {\n    isDisabled = true;\n    openTitle.value = '查看报表';\n\n    getReportFormDataApi({ id: record.id }).then((data) => {\n      let row = data.result;\n      // formState.id = row.id;\n      // formState.name = row.name;\n      assign(formState, row);\n      open.value = true;\n    });\n  }\n\n  function handleDelete() {\n    if (!selectedRow.value || !selectedRow.value.id) {\n      message.warn('请选择数据');\n      return;\n    }\n    createConfirm({\n      title: '提示',\n      iconType: 'warning',\n      content: '确定要删除选中记录？',\n      async onOk() {\n        deleteReportFormDataApi('?id=' + selectedRow.value.id).then((rsp) => {\n          if (rsp.code == '0') {\n            message.success('数据已删除。');\n            reload();\n          } else {\n            message.error('数据删除失败。');\n          }\n          loadingFlag.value = false;\n          open.value = false;\n        });\n      },\n    });\n  }\n  // 查询左侧树数据\n  async function queryTreeList() {\n    let dataGranularity = formState.timeDimension;\n    if (formState.timeDimension === 'week') {\n      dataGranularity = 'day';\n    } else if (formState.timeDimension === 'month') {\n      dataGranularity = 'month';\n    } else if (formState.timeDimension === 'quarter') {\n      dataGranularity = 'day,month';\n    } else if (formState.timeDimension === 'year') {\n      dataGranularity = 'day,month,year';\n    }\n    const typeList = await getTreeData({\n      dataGranularity: dataGranularity,\n      status: 1,\n    });\n    treeData.value = dig(typeList.result);\n  }\n\n  function dig(data) {\n    const list: TreeItem[] = [];\n    for (let i = 0; i < data.length; i++) {\n      const item = data[i];\n      const treeNode: TreeItem[][number] = {\n        name: item.name,\n        nodeId: item.id,\n        nodeName: item.name,\n        parentId: item.folderId,\n        disabled: item.kindId === 'index' ? false : true,\n      };\n\n      if (item.children && item.children.length > 0) {\n        treeNode.children = dig(item.children);\n      }\n\n      list.push(treeNode);\n    }\n    return list;\n  }\n\n  function nextStep() {\n    modalFormRef.value.validateFields().then(() => {\n      queryTreeList();\n      organCopyVisible.value = true;\n    });\n  }\n\n  function handleCancel() {\n    try {\n      organCopyVisible.value = false;\n      open.value = false;\n      reportformDialog.value?.closeModal(); // 开了两次 Dialog，需要通知关闭两次\n      reportformDialog.value?.closeModal();\n    } catch {\n      //\n    }\n  }\n\n  const handleCopyOrganCancel = () => {\n    organCopyVisible.value = false; // 关闭弹框\n    open.value = false;\n    reportformDialog.value?.closeModal();\n    reportformDialog.value?.closeModal();\n  };\n\n  const reportIndexList = ref<any>([]);\n  const handleCopyOrganConfirm = (nodeList) => {\n    reportIndexList.value.length = 0;\n    if (nodeList.length > 0) {\n      let nodeNames = [];\n      nodeList.forEach((data) => {\n        const node = {\n          indexStorehouseId: data.nodeId,\n          indexName: data.nodeName,\n        };\n        reportIndexList.value.push(node);\n        nodeNames.push(data.nodeName);\n      });\n      formState.reportIndex = nodeNames.join(',');\n    } else {\n      message.error('请选择指标。');\n      return;\n    }\n\n    formState.reportIndexList = reportIndexList.value;\n    loadingFlag.value = true;\n    if (formState.id == '') {\n      addReportFormDataApi(formState)\n        .then((rsp) => {\n          message.success('数据已保存。');\n          loadingFlag.value = false;\n          organCopyVisible.value = false; // 关闭弹框\n          open.value = false;\n          reportformDialog.value?.closeModal();\n          reportformDialog.value?.closeModal();\n          reload();\n        })\n        .then(() => {\n          resetForm();\n        });\n    } else {\n      updateReportFormDataApi(formState)\n        .then((rsp) => {\n          message.success('数据已更新。');\n          reload();\n          loadingFlag.value = false;\n          organCopyVisible.value = false; // 关闭弹框\n          open.value = false;\n          reportformDialog.value?.closeModal();\n          reportformDialog.value?.closeModal();\n        })\n        .then(() => {\n          resetForm();\n        });\n    }\n\n    //organCopyVisible.value = false; // 关闭弹框\n  };\n\n  function handleExtra() {\n    organCopyVisible.value = false; // 关闭弹框\n    open.value = false;\n    reportformDialog.value?.closeModal();\n    reportformDialog.value?.closeModal();\n    nextTick(() => {\n      open.value = true;\n    });\n  }\n\n  // 更改时间纬度 清空指标\n  const changeTimeDimension = () => {\n    formState.reportIndexList = [];\n  };\n\n  // 启动执行代码\n  onMounted(() => {});\n</script>\n<style lang=\"less\" scoped>\n  .tab-model {\n    margin-top: 10px;\n    margin-right: 10px;\n    margin-left: 10px;\n  }\n\n  .tab-button-div {\n    padding-top: 12px;\n    padding-bottom: 12px;\n\n    :deep(.ant-form-item-label) {\n      width: 120px;\n      max-width: 120px;\n      text-align-last: right;\n    }\n  }\n\n  .tab-table-div {\n    margin-top: 10px;\n\n    :deep(.ant-table-placeholder) {\n      height: 591px;\n    }\n  }\n\n  .tab-button {\n    margin-right: 5px;\n\n    &:last-child {\n      margin-right: 0;\n    }\n  }\n\n  .dialog-mask {\n    position: absolute;\n    z-index: 1001 !important;\n    top: -1px;\n    width: 100%;\n    height: 100%;\n    opacity: 0.3;\n  }\n\n  .search-form {\n    position: relative;\n\n    .search-btns {\n      position: absolute;\n      right: 0;\n      bottom: 0;\n    }\n  }\n\n  .fix-basic-table {\n    width: 100%;\n    padding: 10px;\n\n    :deep(&.vben-basic-table .ant-table-wrapper) {\n      padding: 10px 16px 12px;\n    }\n\n    :deep(.table-settings .anticon-setting) {\n      margin-right: 0;\n    }\n  }\n</style>\n"],"names":["columns","getReportFormPageDataApi","params","defHttp","getReportFormDataApi","getTreeData","addReportFormDataApi","updateReportFormDataApi","deleteReportFormDataApi","isDisabled","createConfirm","useMessage","searchInfo","reactive","organCopyVisible","ref","modalFormRef","selectedRow","open","openTitle","loadingFlag","treeData","reportformDialog","formState","handleDictSelectBoxChange","value","node","allNodes","names","val","idx","array","handleView","record","addTabPage","getDataListParam","pa","__async","param","dataObj","clearSelectedRowKeys","registerTable","reload","useTable","onChange","sortInfo","data","b","c","formItemLayout","resetForm","resetSearchFrom","searchList","reportRange","stn","handleCreate","handleUpdate","message","row","assign","handleShowView","handleDelete","rsp","queryTreeList","dataGranularity","typeList","dig","list","i","item","treeNode","nextStep","handleCancel","_a","_b","e","handleCopyOrganCancel","reportIndexList","handleCopyOrganConfirm","nodeList","nodeNames","handleExtra","nextTick","changeTimeDimension","onMounted"],"mappings":"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"}