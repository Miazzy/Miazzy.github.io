import{_ as L,o as w,p as S,u as P,a0 as E,a7 as T,b as V,s as x,ax as B}from"./index.js";import{k as $,Z as k,_ as g,R as C,ac as F,d as q,e as z,o as H,al as c,f as s,aa as h,$ as d,a5 as p,ad as W,F as Z}from"./vue-71d1abb3.js";import{D as j}from"./siteSetting-efd6ab5b.js";import{c as M,u as G}from"./index-56bc5635.js";import{b as J}from"./index-316f6ffb.js";import{h as K}from"./header-55b09394.js";import{d as Q}from"./default-avatar-s-529dcd14.js";import{a9 as I}from"./antd-15ac76ed.js";import"./useWindowSizeFn-13b1b8a2.js";const X={__name:"Dropdown",setup(e){const t=$(!1),u=()=>{t.value=!0},l=()=>{t.value=!0},a=()=>{setTimeout(()=>{t.value=!1},10)};return(n,r)=>(k(),g("div",{class:"dropdown",onMouseover:u},[C(n.$slots,"default",{},void 0,!0),t.value?(k(),g("div",{key:0,class:"dropdown-menu",onMouseover:l,onMouseleave:a,onClick:a},[C(n.$slots,"overlay",{},void 0,!0)],32)):F("",!0)],32))}},Y=L(X,[["__scopeId","data-v-0169426b"]]),ee=q({name:"UserDropdown",components:{Dropdown:Y,Menu:I,MenuItem:M(()=>w(()=>import("./DropMenuItem-055f07c2.js"),["assets/DropMenuItem-055f07c2.js","assets/index.js","assets/vue-71d1abb3.js","assets/antd-15ac76ed.js","assets/index-19166588.css"])),MenuDivider:I.Divider,LockAction:M(()=>w(()=>import("./LockModal-c55f20cc.js"),["assets/LockModal-c55f20cc.js","assets/index.js","assets/vue-71d1abb3.js","assets/antd-15ac76ed.js","assets/index-19166588.css","assets/index-316f6ffb.js","assets/useWindowSizeFn-13b1b8a2.js","assets/index-09707d18.css","assets/useForm-dea3ed18.js","assets/BasicForm.vue_vue_type_style_index_0_lang-1ba7be9e.js","assets/index-f4fc48e6.js","assets/index-7f5b8959.css","assets/useTabs-2b062e85.js","assets/download-03e71dd5.js","assets/index-5d49b7a7.js","assets/index-ba72e6bd.css","assets/SearchBox-22bb02d6.js","assets/SearchBox-cb19a4c3.css","assets/UploadBox-636ecf02.js","assets/Dialog-0a006d82.js","assets/Dialog-ea83e82b.css","assets/UploadBox-12fddeb7.css","assets/DictSelectBox.vue_vue_type_script_setup_true_lang-e03e9fe8.js","assets/OrganDialog-dd1023ce.js","assets/OrganDialog-74e6153d.css","assets/BasicForm-64bcaf86.css","assets/uniqBy-92d3bc7f.js","assets/lock-1ad68095.js","assets/header-55b09394.js","assets/LockModal-ca58db68.css"]))},props:{theme:S.oneOf(["dark","light"])},setup(){const{prefixCls:e}=P("header-user-dropdown"),{t}=V(),{getShowDoc:u,getUseLockPage:l}=G(),a=E(),n=$(""),r=(o,i=10)=>o!=null&&typeof o!="undefined"?typeof o=="string"&&o.length<=i?o:o.slice(0,i)+"...":"",_=z(()=>{const{realName:o="",username:i="",avatar:D,desc:A,user:v,roles:te=[]}=a.getUserInfo||{};return n.value=D,{realName:o||i||(v==null?void 0:v.id),avatar:D||K,desc:A}}),[f,{openModal:m}]=J();function y(){m(!0)}function b(){return document.querySelector("div#app .main-layout .app-header .user-info")}function U(){a.confirmLoginOut()}function N(){x(j)}function O(){B("/system/rbac/org/userProfile","个人信息")}function R(o){switch(o.key){case"logout":U();break;case"lock":y();break;case"doc":N();break;case"user":O();break}}return H(()=>{T.getInstance().listen("avatar-update-message",o=>{o!=null&&o.path&&(n.value=(o==null?void 0:o.path)||n.value)})}),{prefixCls:e,t,truncateName:r,getUserInfo:_,handleMenuClick:R,getShowDoc:u,register:f,handleLock:y,handleContainer:b,avatarURL:n,getUseLockPage:l,defaultAvatar:Q}}});const oe=["src"];function ne(e,t,u,l,a,n){const r=c("MenuItem"),_=c("Menu"),f=c("Dropdown"),m=c("LockAction");return k(),g(Z,null,[s(f,{placement:"bottom"},{overlay:h(()=>[s(_,{onClick:e.handleMenuClick},{default:h(()=>[s(r,{key:"user",text:e.truncateName(e.getUserInfo.realName),icon:"ph:user-thin"},null,8,["text"]),s(r,{key:"logout",text:e.t("layout.header.dropdownItemLoginOut"),icon:"ion:power-outline"},null,8,["text"])]),_:1},8,["onClick"])]),default:h(()=>[d("span",{class:p([[e.prefixCls,`${e.prefixCls}--${e.theme}`],"flex"])},[d("img",{class:p(`${e.prefixCls}__header`),src:e.avatarURL?e.avatarURL:e.defaultAvatar},null,10,oe),d("span",{class:p(`${e.prefixCls}__info hidden md:block`)},[d("span",{class:p([`${e.prefixCls}__name  `,"truncate"])},W(e.truncateName(e.getUserInfo.realName)),3)],2)],2)]),_:1}),s(m,{onRegister:e.register},null,8,["onRegister"])],64)}const _e=L(ee,[["render",ne]]);export{_e as default};
//# sourceMappingURL=index-9d26b837.js.map
