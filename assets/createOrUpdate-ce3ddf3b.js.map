{"version":3,"file":"createOrUpdate-ce3ddf3b.js","sources":["../../src/views/po/safety/vehicleexecution/createOrUpdate.ts","../../src/views/po/safety/vehicleexecution/createOrUpdate.vue"],"sourcesContent":["import { BasicColumn } from '@/components/Table';\nimport { defHttp } from '@/utils/http/axios';\n\nenum Api {\n  //查询模板内容\n  getSafeCheckIndexDtl = '/baseset/safeCheck/list-byCheckType',\n  addVehicleData = '/po/vehicle-execution/create',\n  updateVehicleData = '/po/vehicle-execution/update',\n  getVehicleData = '/po/vehicle-execution/get',\n  getVehicleDtlData = '/po/vehicle-execution/dtl/list',\n  getPlateNumber = '/po/vehicle-execution/getPlateNumber',\n  getStationPerson = '/baseset/common/list-stationPerson?stationId=',\n}\n\n// 查询安全检查模版明细列表\nexport function getSafeCheckIndexDtl(params) {\n  return defHttp.post({ url: Api.getSafeCheckIndexDtl, params });\n}\n\n//执行明细\nexport function getVehicleDtlData(params) {\n  return defHttp.get({ url: Api.getVehicleDtlData, params });\n}\n//执行单据\nexport function getVehicleData(params) {\n  return defHttp.get({ url: Api.getVehicleData, params });\n}\n\nexport function getStationPerson(stationId) {\n  return defHttp.post({ url: Api.getStationPerson + stationId });\n}\n\n// 新增\nexport function createSafeCheckVehicle(data) {\n  return defHttp.post({ url: Api.addVehicleData, data });\n}\n\n// 修改\nexport function updateSafeCheckVehicle(data) {\n  return defHttp.put({ url: Api.updateVehicleData, data });\n}\n\nexport function getPlateNumber(params) {\n  return defHttp.get({ url: Api.getPlateNumber, params });\n}\n\nexport const dtlColumns: BasicColumn[] = [\n  { title: '检查内容', dataIndex: 'indexContent', width: 160, align: 'left', headAlign: 'center' },\n  { slots: { title: 'result' },  dataIndex: 'result', width: 160, align: 'left' },\n  { slots: { title: 'needRectification' }, dataIndex: 'needRectification', width: 100 },\n  { title: '计划整改措施', dataIndex: 'measures', width: 160, align: 'left', headAlign: 'center' },\n  { title: '计划完成日期', dataIndex: 'deadlineDate', width: 160 },\n  { title: '隐患类别', dataIndex: 'hiddenDangerType', width: 160 },\n  { title: '检查附件', dataIndex: 'bizFileId', width: 160 },\n];\n","<template>\n  <PageWrapper dense contentFullHeight fixedHeight  contentClass=\"flex\" style=\"position: relative\">\n    <div class=\"load\">\n      <a-spin :spinning=\"formState.spinning\" tip=\"Loading...\">\n        <div class=\"process-box\">\n          <div class=\"header-box\">\n            <BillTitle :options=\"billTitleOptions\" />\n            <WfApproveBox @agree=\"flowOption.handleAgree\" @save=\"flowOption.handleSave\" @submit=\"flowOption.handleSubmit\" :processStatus=\"formState.status\" :processInstanceId=\"processInstanceId\"\n              :listenMessage=\"`vehicle-execution`\" />\n            <!-- <PrintButton style=\"margin-left: 10px\" v-if=\"formState.status === 2\" /> -->\n          </div>\n          <div class=\"content\">\n            <a-form :model=\"formState\" name=\"basic\" ref=\"formRef\" autocomplete=\"off\" @finish=\"onFinish\">\n              <a-card title=\"基本信息\" :bordered=\"false\">\n                <a-row :gutter=\"32\">\n                  <a-col :span=\"12\">\n                    <a-form-item label=\"电站名称\" name=\"stationName\" :labelCol=\"{ style: { width: '124px'} }\" :rules=\"[{ required: false }]\">\n                      <a-input v-model:value=\"formState.stationName\" disabled />\n                    </a-form-item>\n                  </a-col>\n\n                  <a-col :span=\"12\">\n                    <a-form-item label=\"识别代码\" name=\"identificationCode\" :labelCol=\"{ style: { width: '124px'} }\" :rules=\"[{ required: false }]\">\n                      <a-input v-model:value=\"formState.identificationCode\" disabled />\n                    </a-form-item>\n                  </a-col>\n                  <a-col :span=\"12\">\n                    <a-form-item label=\"车牌号\" name=\"vehicleId\" :labelCol=\"{ style: { width: '124px'} }\" :rules=\"[{ required: true,message: '车牌号不能为空' }]\">\n                      <a-select v-model:value=\"formState.vehicleId\" allowClear :options=\"plateNumberData\" :disabled=\"disabledInput\" @change=\"\n                      (id, item) => {\n                        formState.plateNumber = item.label;\n                        formState.vehicleId = item.value;\n                        formState.identificationCode = item.identificationCode;\n                      }\n                    \" />\n                    </a-form-item>\n                  </a-col>\n\n                  <a-col :span=\"12\">\n                    <a-form-item label=\"行驶公里数\" name=\"mileage\" :labelCol=\"{ style: { width: '124px'} }\" :rules=\"[{ required: true, message: '行驶公里数不能为空' }]\">\n                      <a-input-number v-model:value=\"formState.mileage\" :min=\"0\" :max=\"999999\" :disabled=\"disabledInput\" :step=\"0.01\" string-mode />\n                    </a-form-item>\n                  </a-col>\n\n                  <a-col :span=\"12\">\n                    <a-form-item label=\"检查开始时间\" name=\"startDate\" :labelCol=\"{ style: { width: '124px'} }\" :rules=\"[{ required: true, message: '检查开始时间' }]\">\n                      <a-date-picker v-model:value=\"formState.startDate\" show-time valueFormat=\"YYYY-MM-DD HH:mm\" format=\"YYYY-MM-DD HH:mm\" :disabled=\"disabledInput\" style=\"width: 100%\" />\n                    </a-form-item>\n                  </a-col>\n                  <a-col :span=\"12\">\n                    <a-form-item label=\"检查结束时间\" name=\"endDate\" :labelCol=\"{ style: { width: '124px'} }\" :rules=\"[{ required: true, message: '检查结束时间' }]\">\n                      <a-date-picker v-model:value=\"formState.endDate\" show-time valueFormat=\"YYYY-MM-DD HH:mm\" format=\"YYYY-MM-DD HH:mm\" :disabled=\"disabledInput\" style=\"width: 100%\" />\n                    </a-form-item>\n                  </a-col>\n\n                  <a-col :span=\"12\">\n                    <a-form-item label=\"检查人\" name=\"checkerId\" :labelCol=\"{ style: { width: '124px'} }\" :rules=\"[{ required: true, message: '检查人' }]\">\n                      <a-select v-model:value=\"formState.checkerId\" allowClear :options=\"checkerData\" :disabled=\"disabledInput\" @change=\"\n                      (id, item) => {\n                        formState.checkerId = id;\n                        formState.checkerName = item.label;\n                      }\n                    \" />\n                    </a-form-item>\n                  </a-col>\n                </a-row>\n              </a-card>\n              <a-card :bordered=\"false\">\n                <BasicTable title=\"检查项目\" @register=\"executionDtlTable\">\n                  <template #toolbar v-if=\"formState.status == 0 && !disabledInput\">\n                    <a-button @click=\"checkSituation\" :preIcon=\"IconEnum.EDIT\"> 检查情况 </a-button>\n                  </template>\n                  <template #result>\n                    <div class=\"customer_require\" style=\"text-align: center;\">检查情况</div>\n                  </template>\n                  <template #needRectification>\n                    <div class=\"customer_require\">是否需要整改</div>\n                  </template>\n                  <template #bodyCell=\"{ column, record }\">\n                    <template v-if=\"column.dataIndex === 'result'\">\n                      <a-input v-model:value=\"record[column.dataIndex]\" maxlength=\"128\" :disabled=\"disabledInput\" style=\"width: 100%\" />\n                    </template>\n                    <template v-if=\"column.dataIndex === 'needRectification'\">\n                      <a-select v-model:value=\"record[column.dataIndex]\" style=\"width: 100%\" allow-clear :disabled=\"disabledInput\">\n                        <a-select-option :value=\"0\">否</a-select-option>\n                        <a-select-option :value=\"1\">是</a-select-option>\n                      </a-select>\n                    </template>\n                    <template v-if=\"column.dataIndex === 'deadlineDate'\">\n                      <a-date-picker v-model:value=\"record[column.dataIndex]\" :disabled=\"disabledInput\" valueFormat=\"YYYY-MM-DD HH:mm\" format=\"YYYY-MM-DD HH:mm\" style=\"width: 100%\" />\n                    </template>\n                    <template v-if=\"column.dataIndex === 'measures'\">\n                      <a-input v-model:value=\"record[column.dataIndex]\" :disabled=\"disabledInput\" maxlength=\"512\" style=\"width: 100%\" />\n                    </template>\n                    <template v-if=\"column.dataIndex === 'hiddenDangerType'\">\n                      <DictSelectBox :type=\"`hidden_danger_type`\" :subtype=\"`vehicle`\" v-model:value=\"record[column.dataIndex]\" :disabled=\"disabledInput\" :width=\"160\" />\n                    </template>\n                    <template v-if=\"column.dataIndex === 'bizFileId'\">\n                      <UploadBox :width=\"800\" :height=\"550\" :maxCount=\"20\" :maxSize=\"100 * 1024 * 1024\" :application=\"`po`\" :module=\"`vehicleexecution`\" :vmode=\"formState.status == 0 ? `box` : `view`\"\n                        :bizId=\"record[column.dataIndex]\" />\n                    </template>\n                  </template>\n                </BasicTable>\n              </a-card>\n              <a-card title=\"检查结论\" :bordered=\"false\">\n                <a-row :gutter=\"32\">\n                  <a-col :span=\"12\">\n                    <a-form-item label=\"检查结论\" name=\"checkResult\" :labelCol=\"{ style: { width: '124px'} }\" :rules=\"[{ required: true, message: '检查结论不能为空' }]\">\n                      <DictSelectBox :type=\"`inspection_conclusion`\" v-model:value=\"formState.checkResult\" :disabled=\"disabledInput\" style=\"width: 100%\" />\n                    </a-form-item>\n                  </a-col>\n                  <a-col :span=\"24\">\n                    <a-form-item label=\"检查情况\" name=\"checkDescription\" :disabled=\"disabledInput\" :labelCol=\"{ style: { width: '124px'} }\" :rules=\"[{ required: true, message: '检查情况不能为空' }]\">\n                      <a-textarea v-model:value=\"formState.checkDescription\" :rows=\"3\" :disabled=\"disabledInput\" maxlength=\"1000\" />\n                    </a-form-item>\n                  </a-col>\n                </a-row>\n              </a-card>\n            </a-form>\n\n            <a-card title=\"附件上传\" :bordered=\"false\">\n              <UploadBox :width=\"800\" :height=\"550\" :maxCount=\"20\" :maxSize=\"100 * 1024 * 1024\" :application=\"`po`\" :module=\"`vehicleexecution`\" :vmode=\"formState.status == 0 ? `box` : `view`\" :bizId=\"formState.bizFileId\" />\n            </a-card>\n            <Dialog v-model:visible=\"open\" title=\"批量修改检查情况\" @ok=\"handleOk\" :width=\"300\" :height=\"217\" v-if=\"formState.status == 0\" :maskClosable=\"false\" overflowY=\"auto\">\n              <div>\n                <a-textarea v-model:value=\"situation\" :rows=\"3\" maxlength=\"128\" />\n              </div>\n            </Dialog>\n          </div>\n        </div>\n      </a-spin>\n    </div>\n  </PageWrapper>\n</template>\n<script lang=\"ts\" setup>\n  import { PageWrapper } from '/@/components/Page';\n  import { reactive, ref, onMounted, toRaw, computed } from 'vue';\n  import { urlToPath } from '/@/utils/route';\n  import Dialog from '@/components/Framework/Modal/Dialog.vue';\n  import { FormInstance } from 'ant-design-vue';\n  import {\n    createSafeCheckVehicle,\n    dtlColumns,\n    getSafeCheckIndexDtl,\n    getVehicleData,\n    getVehicleDtlData,\n    getStationPerson,\n    getPlateNumber,\n  } from './createOrUpdate';\n  import { BasicTable, useTable } from '@/components/Table';\n  // import PrintButton from '/@/components/Framework/Button/PrintButton.vue';\n  import DictSelectBox from '@/components/Framework/Combox/DictSelectBox.vue';\n  import BillTitle from '/@/components/Framework/BillTitle/BillTitle.vue';\n  import WfApproveBox from '/@/components/Framework/WorkFlow/WfApproveBox.vue';\n  import * as ProcessInstanceApi from '@/api/bpm/processInstance';\n  import { IconEnum } from '@/enums/appEnum';\n  import { buildShortUUID } from '@/utils/uuid';\n  import { closeCurrentTab } from '@/utils/route';\n  import UploadBox from '@/components/Framework/Combox/UploadBox.vue';\n  import { SysMessage } from '/@/hooks/web/useMessage';\n  import { MsgManager } from '/@/message/MsgManager';\n  import { useUserStore } from '/@/store/modules/user';\n\n  const userStore = useUserStore();\n  const userInfo = toRaw(userStore.getUserInfo);\n  const disabledInput = computed(() => {\n    return (\n      formState.status != 0 ||\n      (formState.status == 0 &&\n        formState.personMemberId != '' &&\n        formState.personMemberId.substring(0, 32) != userInfo.userId)\n    );\n  });\n  const open = ref<boolean>(false);\n  const isRequire = ref(true);\n\n  const situation = ref('');\n  const processInstanceId: any = ref('');\n  const formRef = ref<FormInstance>();\n  const checkerData: any = ref([]);\n  const plateNumberData: any = ref([]);\n  const billTitleOptions = reactive<any>({ subject: '车辆检查' });\n\n  let { params: query } = urlToPath() as any;\n  const formState: any = reactive({\n    id: query.id || '',\n    subject: '',\n    checkerId: '',\n    stationName: query.stationName || '',\n    stationId: query.stationId || '',\n    stationOrganName: query.stationOrganName || '',\n    stationOrganId: query.stationOrganId || '',\n    vehicleId: '',\n    plateNumber: '',\n    identificationCode: '',\n    personMemberId: '',\n    mileage: '',\n    startDate: '',\n    billCode: '',\n    fillinDate: '',\n    endDate: '',\n    checkerName: '',\n    dtl: {},\n    status: 0,\n    checkResult: '',\n    checkDescription: '',\n    spinning: false,\n    bizFileId: '',\n  });\n  const flowOption = {\n    handleAgree: (flowData) => {\n      console.log('同意', flowData);\n    },\n\n    handleSave: (flowData) => {\n      console.log('保存', flowData);\n      isRequire.value = false;\n      formState.status = 0;\n      onFinish();\n    },\n\n    handleSubmit: (flowData) => {\n      console.log('提交', flowData);\n      isRequire.value = true;\n      formState.status = 1;\n      const value = formRef.value;\n      if (!value) {\n        return;\n      }\n      value\n        .validateFields()\n        .then(() => {\n          onFinish();\n        })\n        .catch((e) => {\n          if (e.errorFields.length != 0) {\n            const errorList = document.querySelectorAll('.ant-form-item-has-error');\n            errorList[0].scrollIntoView({\n              block: 'center',\n              behavior: 'smooth',\n            });\n          }\n          console.log(e);\n          formState.status = 0;\n        });\n    },\n  };\n  const onFinish = () => {\n    formState.dtl = getDataSource();\n    formState.spinning = true;\n    createSafeCheckVehicle(formState)\n      .then((rsp) => {\n        if (rsp.result != '') {\n          formState.id = rsp.result;\n          SysMessage.getInstance().success(formState.status == 1 ? '提交成功.' : '保存成功.');\n          if (formState.status == 1) {\n            setTimeout(() => {\n              closeCurrentTab();\n              MsgManager.getInstance().sendMsg('vehicle-execution', {});\n            }, 100);\n          }\n        } else {\n          isRequire.value = false;\n\n          SysMessage.getInstance().error('保存失败.');\n        }\n        formState.spinning = false;\n      })\n      .catch((e) => {\n        isRequire.value = false;\n        formState.spinning = false;\n        formState.status = 0;\n        console.log(e);\n      });\n  };\n\n  const [executionDtlTable, { getDataSource, updateTableData, reload }] = useTable({\n    api: async () => {\n      let dataObj;\n      if (formState.id) {\n        dataObj = await getVehicleDtlData({ vehicleExecutionId: formState.id });\n      } else {\n        let rs = await getSafeCheckIndexDtl({ checkType: 'vehicle', usePage: 0 });\n        dataObj = { result: { list: [], total: rs.result.total } };\n\n        rs.result.list.forEach((e) => {\n          dataObj.result.list.push({\n            indexContent: e.description,\n            indexId: e.id,\n            indexItem: e.checkItem,\n            bizFileId: buildShortUUID(),\n            needRectification: 0,\n          });\n        });\n      }\n      return dataObj.result;\n    },\n    bordered: true,\n    columns: dtlColumns,\n    pagination: false,\n    useSearchForm: false,\n    showTableSetting: false,\n  });\n\n  const checkSituation = () => {\n    open.value = true;\n  };\n\n  const handleOk = () => {\n    let rows = getDataSource();\n    let i = 0;\n    rows.forEach(() => {\n      updateTableData(i, 'result', situation.value);\n      i++;\n    });\n    open.value = false;\n  };\n\n  // global\n  onMounted(async () => {\n    processInstanceId.value = query.processInstanceId;\n    if (!formState.id && query.processInstanceId) {\n      const processInstance = await ProcessInstanceApi.getProcessInstance(\n        query.processInstanceId as string,\n      );\n\n      formState.id = processInstance.businessKey;\n    }\n    getVehicleData({ id: formState.id })\n      .then((rsp) => {\n        let rs = rsp.result;\n\n        if (formState.id) {\n          for (let key in rs) {\n            formState[key] = rs[key];\n          }\n          formState.status = Number(rs.status);\n        } else {\n          formState.billCode = rs.billCode;\n          formState.personMemberName = rs.personMemberName;\n          formState.deptName = rs.deptName;\n          formState.fillinDate = rs.fillinDate;\n          formState.bizFileId = buildShortUUID();\n        }\n        let { billCode, fillinDate, personMemberName, deptName } = rs;\n        Object.assign(billTitleOptions, { billCode, fillinDate, personMemberName, deptName });\n        reload();\n      })\n      .then(() => {\n        if (formState.status == 0) {\n          getStationPerson(formState.stationId).then((rsp) => {\n            let tmp={};\n            rsp.result.forEach((e) => {\n              tmp[e.userId]=e.name;\n            });\n            for(let k in tmp){\n              checkerData.value.push({\n                label: tmp[k],\n                value: k,\n              });\n            }\n          });\n\n          getPlateNumber({ stationId: formState.stationId }).then((rsp) => {\n            rsp.result.forEach((e) => {\n              plateNumberData.value.push({\n                label: e.plateNumber,\n                value: e.vehicleId,\n                identificationCode: e.identificationCode,\n              });\n            });\n          });\n        } else {\n          checkerData.value.push({\n            label: formState.checkerName,\n            value: formState.checkerId,\n          });\n          plateNumberData.value.push({\n            label: formState.plateNumber,\n            value: formState.vehicleId,\n            identificationCode: formState.identificationCode,\n          });\n        }\n      });\n  });\n</script>\n<style lang=\"less\" scoped>\n  .customer_require::before {\n    content: '*';\n    display: inline-block;\n    margin-right: 4px;\n    color: #ff4d4f;\n    font-family: SimSun, sans-serif;\n    font-size: 14px;\n    line-height: 1;\n  }\n  \n</style>\n"],"names":["getSafeCheckIndexDtl","params","defHttp","getVehicleDtlData","getVehicleData","getStationPerson","stationId","createSafeCheckVehicle","data","getPlateNumber","dtlColumns","userStore","useUserStore","userInfo","toRaw","disabledInput","computed","formState","open","ref","isRequire","situation","processInstanceId","formRef","checkerData","plateNumberData","billTitleOptions","reactive","query","urlToPath","flowOption","flowData","onFinish","value","e","getDataSource","rsp","SysMessage","closeCurrentTab","MsgManager","executionDtlTable","updateTableData","reload","useTable","__async","dataObj","rs","buildShortUUID","checkSituation","handleOk","rows","i","onMounted","processInstance","ProcessInstanceApi.getProcessInstance","key","billCode","fillinDate","personMemberName","deptName","tmp","k"],"mappings":"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"}