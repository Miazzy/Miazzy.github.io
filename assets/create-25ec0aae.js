var va=Object.defineProperty;var fe=Object.getOwnPropertySymbols;var ga=Object.prototype.hasOwnProperty,ya=Object.prototype.propertyIsEnumerable;var ve=(k,M,_)=>M in k?va(k,M,{enumerable:!0,configurable:!0,writable:!0,value:_}):k[M]=_,ge=(k,M)=>{for(var _ in M||(M={}))ga.call(M,_)&&ve(k,_,M[_]);if(fe)for(var _ of fe(M))ya.call(M,_)&&ve(k,_,M[_]);return k};var T=(k,M,_)=>new Promise((L,Y)=>{var z=S=>{try{C(_.next(S))}catch(g){Y(g)}},t=S=>{try{C(_.throw(S))}catch(g){Y(g)}},C=S=>S.done?L(S.value):Promise.resolve(S.value).then(z,t);C((_=_.apply(k,M)).next())});import{d as wa,J as re,k as U,r as Q,e as Ia,o as Ma,al as x,Z as c,a9 as f,aa as l,$ as j,f as a,ac as v,v as m,A as p,u as I,E as O,ad as B,aG as ha,aH as _a}from"./vue-71d1abb3.js";import{b as Da,a0 as ka,ak as Ta,aD as Ya,av as E,aC as Ca,a7 as xa,at as ye,aB as Ua,_ as Sa}from"./index.js";import{D as Ha}from"./Dialog-0a006d82.js";import{B as G}from"./BasicTable-0434a334.js";import{T as J}from"./BasicForm.vue_vue_type_style_index_0_lang-1ba7be9e.js";import"./index-085d06c7.js";import{u as Z}from"./useTable-109483b3.js";import"./antd-15ac76ed.js";import{B as Na}from"./BillTitle-d17ab3e4.js";import{_ as we}from"./DictSelectBox.vue_vue_type_script_setup_true_lang-e03e9fe8.js";import{U as Ra}from"./UploadBox-636ecf02.js";import{W as qa}from"./WfApproveBox-a3448232.js";import{t as Pa,d as X,m as Aa,r as Oa,f as Ba,a as Ea,h as ja,i as La,j as za,k as Fa,l as Va,n as $a,o as Ka}from"./firstWorkTicket.data-40aca0cf.js";import{x as Wa}from"./index-66d20ba6.js";import Qa from"./CustomPrint-6ef48b80.js";import{a as q}from"./assign-37f1c13d.js";import"./useForm-dea3ed18.js";import"./uniqBy-92d3bc7f.js";import"./index-316f6ffb.js";import"./useWindowSizeFn-13b1b8a2.js";import"./index-f4fc48e6.js";import"./useTabs-2b062e85.js";import"./download-03e71dd5.js";import"./index-5d49b7a7.js";import"./SearchBox-22bb02d6.js";import"./OrganDialog-dd1023ce.js";import"./sortable.esm-4ae27e0b.js";import"./dict-c04c0dd8.js";import"./index.esm-c216ed00.js";import"./index-fda2d66c.js";import"./index-c0893416.js";import"./index-33af41d1.js";import"./tree-fc0e156a.js";import"./useRender-21ce56fb.js";import"./print-a0e9f882.js";const Ga=k=>(ha("data-v-81667946"),k=k(),_a(),k),Ja={class:"load"},Za={class:"process-box"},Xa={class:"header-box"},et={class:"content"},at=Ga(()=>j("br",null,null,-1)),tt=wa({__name:"create",setup(k){const{t:M}=Da(),_=ka(),L=re(_.getUserInfo),Y=Ta.getInstance().getQuery(),z=U(),t=Q({spinning:!1,status:0}),C=U([]),S=Q({subject:"电气第一种工作票申请"}),g=U(!0),d=Q({head:{show:!1,disabled:!0},stationMember:{show:!1,disabled:!0},manager:{show:!1,disabled:!0}}),P=U(!1),N=Q({}),ee=U(),ae=U(),F=U(),V=U(),de=U(""),Ie=U(Y.processInstanceId?void 0:"first-work-ticket"),Me=Ia(()=>!d.stationMember.disabled||!d.manager.disabled?"before":"default"),he=(s,e)=>{const n=e.replace("before","").toLowerCase();ie(s,n)},_e=(s,e,n)=>n!=="agree"?!0:!d.stationMember.disabled&&!le(s.opendTime,s.opstartTime)?(H("请确认操作开始时间和完成时间。"),!1):!0,De=()=>{ue("save",0)},ie=(s,e)=>T(this,null,function*(){const n=z.value;if(!n)return;if(e==="submit"||e==="agree"){let i=!0;if(yield n.validateFields().catch(h=>{var w;console.log("onSubmit=》error",h);const y=h.errorFields;if((w=document.querySelector(".ant-form-item-has-error"))==null||w.scrollIntoView({behavior:"smooth",block:"center"}),y&&y.length>0){H(y[0].errors[0]),i=!1;return}}),!i)return;const u=re(t);if(!le(u.endTime,u.startTime)){H("请确认计划工作开始时间和结束时间。");return}if(!_e(u,s,e))return}ue(e,e?null:1)}),ue=(s,e)=>T(this,null,function*(){t.spinning=!0;try{yield ke(s,e)}catch(n){t.spinning=!1,console.log("error",n)}});function te(s,e,n){if(s!==0)for(let r=0;r<e.length;r++){const i=e[r];for(const u in n)if(!Wa.trim(i[u])){const h=n[u]+"不能为空";throw H(h),new Error(h)}}}const ke=(s,e)=>T(this,null,function*(){Ce(["Id","Name"]);const n=re(t);e!=null&&e>-1&&(n.status=e);const r=R("Task");te(e,r,{title:"工作地点及设备名称",content:"工作内容"}),n.taskList=r;const i=Array();R("Measure").forEach(y=>{const w=q({},y);w.status==!0?w.status=1:w.status==!1&&(w.status=0),i.push(w)}),te(e,i,{sefetyTypeText:"安全类型",measure:"安全措施"}),n.measureList=i;const u=R("Matter");te(e,u,{matter:"工作地点保留带电部分或注意事项",measure:"补充工作地点保留带电部分和安全措施"}),n.matterList=u;const h=R("Record");if(e==1)for(let y=0;y<h.length;y++){const w=h[y];if(!w.startTime){H("开工时间不能为空");return}if(!w.endTime){H("收工时间不能为空");return}if(!le(w.endTime,w.startTime)){H("请确认每日任务详细记录开工时间和收工时间");return}}n.recordList=h,yield Ba(n).then(y=>{t.id=y.result,e==1&&(g.value=!0),de.value=s,t.spinning=!1,(e===0||e===1)&&Ye("操作成功"),Te(e)}).catch(()=>{t.spinning=!1})}),Te=s=>{(s===0||s===1)&&setTimeout(()=>{s===1&&Ca(),xa.getInstance().sendMsg("first-work-ticket",{})},200)},le=(s,e)=>{let n=new Date(Date.parse(s)),r=new Date(Date.parse(e));return n>r},H=s=>{ye.getInstance().error(s),t.spinning=!1},Ye=s=>{ye.getInstance().success(s)};function Ce(s){s.forEach(e=>{U(["teams","wteams","actPerson","upteams"]).value.forEach(r=>{const i=t[r+e+"s"];i&&i.length>0&&(t[r+e]=i.join(","))})})}function xe(s){s.forEach(e=>{U(["teams","wteams","actPerson","upteams"]).value.forEach(r=>{const i=t[r+e];i&&(t[r+e+"s"]=i.split(","))})})}const se=s=>{const e=ge({},t.processVariable),n=e.taskDefinitionKey===s&&e.assigneeId.indexOf(L.userId)>-1&&e.status===1,r=s.replace("Node","");d[r].disabled=!n},Ue=()=>{const s=t.taskInstances;s!=null&&s.length&&s.forEach(e=>{e.taskDefinitionKey==="headNode"&&(d.head.show=!0),e.taskDefinitionKey==="stationMemberNode"&&(d.stationMember.show=!0),e.taskDefinitionKey==="managerNode"&&(d.manager.show=!0)}),(t.status===2||t.status===3||t.status===5)&&(d.head.show=!0,d.stationMember.show=!0,d.manager.show=!0)},Se=()=>{se("headNode"),se("stationMemberNode"),se("managerNode");const s=(t.status===0||t.status===6)&&(!t.personMemberId||t.personMemberId.indexOf(L.userId)>-1);g.value=!s,Ue()},He=()=>T(this,null,function*(){var e;const s=yield Ea({id:Y.id});if(s.result){q(t,s.result),t.status=Number(t.status),xe(["Id","Name"]),g.value=t.status!=0,t.processInstanceId=(e=t.processVariable)==null?void 0:e.processInstanceId,t.processInstanceId||(t.processInstanceId=Y.processInstanceId);const{billCode:n,fillinDate:r,personMemberName:i,deptName:u}=s.result;Object.assign(S,{billCode:n,fillinDate:r,personMemberName:i,deptName:u}),Se()}}),Ne=s=>T(this,null,function*(){const e=yield $(s);return(yield Fa(e)).result}),Re=s=>T(this,null,function*(){const e=yield $(s),n=yield Va(e);return n.result&&n.result.forEach(r=>{r.status==1?r.status=!0:r.status==0&&(r.status=!1)}),n.result}),qe=s=>T(this,null,function*(){const e=yield $(s);return(yield $a(e)).result}),Pe=s=>T(this,null,function*(){const e=yield $(s);return(yield Ka(e)).result}),$=s=>T(this,null,function*(){const e=yield be();return{ticketId:s.ticketId?s.ticketId:e}}),[Ae,{setProps:Oe,getDataSource:Be}]=Z(q({dataSource:ee,columns:Pa},X)),[Ee,{setProps:je,getDataSource:Le,getSelectRows:ze}]=Z(q({dataSource:ae,rowSelection:{type:"radio"}},X)),[Fe,{setProps:Ve,getDataSource:$e}]=Z(q({dataSource:F,columns:Aa},X)),[Ke,{setProps:We,getDataSource:Qe}]=Z(q({dataSource:V,columns:Oa},X)),Ge=()=>T(this,null,function*(){ee.value=yield Ne({}),ae.value=yield Re({}),F.value=yield qe({}),V.value=yield Pe({})});function oe(s){me({},s)}function Je(){P.value=!0}function Ze(){const s=ze();if(s.length==0){H("请选择一行数据");return}const e=R("Measure");let n=0;const r=Array();for(let i=0;i<e.length;++i){const u=e[i];if(u.key===s[0].key){r.push(pe({sefetyType:u.sefetyType,sefetyTypeText:u.sefetyTypeText})),n=i+1;break}}e.splice(n,0,r[0])}function Xe(s,e){N.securityTypeText=e.label}function ea(){P.value=!1}function aa(){if(!N.securityType){H("请选择安全类型");return}R("Measure").forEach(n=>{if(n.sefetyType===N.securityType){const r="该安全类型已存在，请添加明细";throw H(r),new Error(r)}});const e={sefetyType:N.securityType,sefetyTypeText:N.securityTypeText};me(e,"Measure"),P.value=!1}function R(s){return s==="Task"?Be():s==="Measure"?Le():s==="Matter"?d.stationMember.disabled?F.value:$e():s==="Record"?d.stationMember.disabled?V.value:Qe():[]}function me(s,e){R(e).push(pe(s))}function pe(s){return s.editable=!0,s.isNew=!0,s.key=`${Date.now()}`,s}function K(s,e){const n=R(e);let r=n.indexOf(s);r!==-1&&n.splice(r,1)}function ta(s,e){t.teamsNames=e.map(n=>n.label)}function la(s,e){t.licensorName=e.label}function sa(s,e){t.wteamsNames=e.map(n=>n.label)}function oa(s,e){t.actPersonNames=e.map(n=>n.label)}function na(s,e){t.upteamsNames=e.map(n=>n.label)}function ra(s,e){t.operatorName=e.label}function da(s,e){t.tutorName=e.label}function ia(s,e){t.oppersonName=e.label}function ua(){ja("?stationId="+t.stationId).then(s=>{s.result&&s.result.length>0&&s.result.forEach(e=>{C.value.push({value:e.userId,label:e.name})})})}const ma=()=>T(this,null,function*(){const s=yield La({});s.result&&s.result.user&&(t.headId=s.result.user.id,t.headName=s.result.user.name)}),be=()=>T(this,null,function*(){let s=Y.id;if(!s&&Y.processInstanceId){const n=(yield Ua(Y.processInstanceId)).businessKey;Y.id=n,s=n}return s}),W=s=>({width:80,title:"操作",dataIndex:"action",ifShow:s}),pa=()=>{Oe({actionColumn:W(!g.value)}),je({columns:za(d),actionColumn:W(!g.value)}),d.stationMember.show&&(Ve({actionColumn:W(!d.stationMember.disabled)}),We({actionColumn:W(!d.stationMember.disabled)}))};return Ma(()=>T(this,null,function*(){Y.id=yield be(),yield He(),Y.id||(q(t,Y),g.value=!1,t.bizFileId=Ya(),yield ma()),pa(),ua(),Ge()})),(s,e)=>{const n=x("a-input"),r=x("a-form-item"),i=x("a-col"),u=x("a-row"),h=x("a-select"),y=x("a-date-picker"),w=x("a-card"),A=x("a-button"),ba=x("a-checkbox"),ne=x("a-textarea"),ce=x("a-form"),ca=x("a-spin"),fa=x("PageWrapper");return c(),f(fa,{detail:!0,dense:"",contentFullHeight:"",fixedHeight:"",contentClass:"fix-detail-page",style:{position:"relative"}},{default:l(()=>[j("div",Ja,[a(ca,{spinning:t.spinning,tip:"Loading..."},{default:l(()=>[j("div",Za,[j("div",Xa,[a(Na,{options:S},null,8,["options"]),a(qa,{onSave:De,onSubmit:ie,onBefore:he,processInstanceId:t.processInstanceId,processStatus:t.status,mode:Me.value,businessStatus:de.value,listenMessage:Ie.value},null,8,["processInstanceId","processStatus","mode","businessStatus","listenMessage"]),t.status==2?(c(),f(Qa,{key:0,path:"firstWorkTicket",params:{base:t,taskDetails:ee.value,measureDetails:ae.value,matterDetails:F.value,recordDetails:V.value}},null,8,["params"])):v("",!0)]),j("div",et,[a(ce,{ref_key:"formRef",ref:z,model:t,labelAlign:"right",autocomplete:"off"},{default:l(()=>[a(w,{title:"基本信息",bordered:!1},{default:l(()=>[a(u,{gutter:32},{default:l(()=>[m(a(i,{span:12},{default:l(()=>[a(r,{name:"stationName",label:"电站名称",labelCol:{class:"detail-label-8"}},{default:l(()=>[a(n,{value:t.stationName,"onUpdate:value":e[0]||(e[0]=o=>t.stationName=o),disabled:""},null,8,["value"])]),_:1})]),_:1},512),[[p,!0]]),m(a(i,{span:12},{default:l(()=>[a(r,{name:"ticketNumber",label:"工作票号",labelCol:{class:"detail-label-8"}},{default:l(()=>[a(n,{value:t.ticketNumber,"onUpdate:value":e[1]||(e[1]=o=>t.ticketNumber=o),disabled:""},null,8,["value"])]),_:1})]),_:1},512),[[p,!0]])]),_:1}),a(u,{gutter:32},{default:l(()=>[m(a(i,{span:12},{default:l(()=>[a(r,{name:"headName",label:"工作负责人",labelCol:{class:"detail-label-8"},rules:[{required:!1}]},{default:l(()=>[a(n,{value:t.headName,"onUpdate:value":e[2]||(e[2]=o=>t.headName=o),disabled:""},null,8,["value"])]),_:1})]),_:1},512),[[p,!0]]),m(a(i,{span:12},{default:l(()=>[a(r,{name:"teamsIds",label:"班组成员(内)",labelCol:{class:"detail-label-8"},rules:[{required:!1}]},{default:l(()=>[a(h,{value:t.teamsIds,"onUpdate:value":e[3]||(e[3]=o=>t.teamsIds=o),"show-search":"","allow-clear":"",mode:"multiple",style:{width:"100%"},options:C.value,onChange:ta,disabled:g.value},null,8,["value","options","disabled"])]),_:1})]),_:1},512),[[p,!0]])]),_:1}),a(u,{gutter:32},{default:l(()=>[m(a(i,{span:12},{default:l(()=>[a(r,{name:"outTeams",label:"班组成员(外)",labelCol:{class:"detail-label-8"},rules:[{required:!1}]},{default:l(()=>[a(n,{value:t.outTeams,"onUpdate:value":e[4]||(e[4]=o=>t.outTeams=o),maxlength:256,disabled:g.value},null,8,["value","disabled"])]),_:1})]),_:1},512),[[p,!0]])]),_:1}),a(u,{gutter:32},{default:l(()=>[m(a(i,{span:24},{default:l(()=>[a(r,{name:"subject",label:"电站设备名称",labelCol:{class:"detail-label-8"},rules:[{required:!0,message:"请输入电站设备名称"}]},{default:l(()=>[a(n,{value:t.subject,"onUpdate:value":e[5]||(e[5]=o=>t.subject=o),maxlength:100,disabled:g.value},null,8,["value","disabled"])]),_:1})]),_:1},512),[[p,!0]])]),_:1}),a(u,{gutter:32},{default:l(()=>[m(a(i,{span:12},{default:l(()=>[a(r,{name:"startTime",label:"计划工作开始时间",labelCol:{class:"detail-label-8"},rules:[{required:!0,message:"请输入计划工作开始时间"}]},{default:l(()=>[a(y,{value:t.startTime,"onUpdate:value":e[6]||(e[6]=o=>t.startTime=o),"show-time":"",format:"YYYY-MM-DD HH:mm","value-format":"YYYY-MM-DD HH:mm",style:"width: 100%",disabled:g.value},null,8,["value","disabled"])]),_:1})]),_:1},512),[[p,!0]]),m(a(i,{span:12},{default:l(()=>[a(r,{name:"endTime",label:"计划工作结束时间",labelCol:{class:"detail-label-8"},rules:[{required:!0,message:"请输入计划工作结束时间"}]},{default:l(()=>[a(y,{value:t.endTime,"onUpdate:value":e[7]||(e[7]=o=>t.endTime=o),"show-time":"",format:"YYYY-MM-DD HH:mm","value-format":"YYYY-MM-DD HH:mm",style:"width: 100%",disabled:g.value},null,8,["value","disabled"])]),_:1})]),_:1},512),[[p,!0]])]),_:1})]),_:1}),a(w,{bordered:!1},{default:l(()=>[a(I(G),{title:"工作任务",onRegister:I(Ae)},{toolbar:l(()=>[g.value?v("",!0):(c(),f(A,{key:0,type:"primary",preIcon:I(E).ADD,onClick:e[8]||(e[8]=o=>oe("Task"))},{default:l(()=>[O(B(I(M)("common.action.create")),1)]),_:1},8,["preIcon"]))]),bodyCell:l(({column:o,record:b})=>[o.dataIndex==="title"?(c(),f(n,{key:0,value:b[o.dataIndex],"onUpdate:value":D=>b[o.dataIndex]=D,maxlength:1e3,disabled:g.value},null,8,["value","onUpdate:value","disabled"])):v("",!0),o.dataIndex==="content"?(c(),f(n,{key:1,value:b[o.dataIndex],"onUpdate:value":D=>b[o.dataIndex]=D,maxlength:1e3,disabled:g.value},null,8,["value","onUpdate:value","disabled"])):v("",!0),o.dataIndex==="action"?(c(),f(I(J),{key:2,actions:[{tooltip:"删除",color:"error",icon:"ant-design:delete-outlined",ifShow:!g.value,onClick:K.bind(null,b,"Task")}]},null,8,["actions"])):v("",!0)]),_:1},8,["onRegister"])]),_:1}),a(w,{bordered:!1},{default:l(()=>[a(I(G),{title:"安全措施",onRegister:I(Ee)},{toolbar:l(()=>[g.value?v("",!0):(c(),f(A,{key:0,type:"primary",preIcon:I(E).ADD,onClick:e[9]||(e[9]=o=>Je())},{default:l(()=>[O(B(I(M)("common.action.create")),1)]),_:1},8,["preIcon"])),g.value?v("",!0):(c(),f(A,{key:1,type:"primary",preIcon:I(E).ADD,onClick:e[10]||(e[10]=o=>Ze())},{default:l(()=>[O(B(I(M)("common.action.create"))+"明细 ",1)]),_:1},8,["preIcon"]))]),bodyCell:l(({column:o,record:b})=>[o.dataIndex==="measure"?(c(),f(n,{key:0,value:b[o.dataIndex],"onUpdate:value":D=>b[o.dataIndex]=D,maxlength:1e3,disabled:g.value},null,8,["value","onUpdate:value","disabled"])):v("",!0),o.dataIndex==="status"?(c(),f(ba,{key:1,checked:b[o.dataIndex],"onUpdate:checked":D=>b[o.dataIndex]=D,disabled:d.stationMember.disabled},null,8,["checked","onUpdate:checked","disabled"])):v("",!0),o.dataIndex==="action"?(c(),f(I(J),{key:2,actions:[{tooltip:"删除",color:"error",icon:"ant-design:delete-outlined",ifShow:!g.value,onClick:K.bind(null,b,"Measure")}]},null,8,["actions"])):v("",!0)]),_:1},8,["onRegister"])]),_:1}),d.stationMember.show?(c(),f(w,{key:0,bordered:!1},{default:l(()=>[a(I(G),{title:"(补充)工作地点及注意事项",onRegister:I(Fe)},{toolbar:l(()=>[d.stationMember.disabled?v("",!0):(c(),f(A,{key:0,type:"primary",preIcon:I(E).ADD,onClick:e[11]||(e[11]=o=>oe("Matter"))},{default:l(()=>[O(B(I(M)("common.action.create")),1)]),_:1},8,["preIcon"]))]),bodyCell:l(({column:o,record:b})=>[o.dataIndex==="matter"?(c(),f(n,{key:0,value:b[o.dataIndex],"onUpdate:value":D=>b[o.dataIndex]=D,maxlength:1e3,disabled:d.stationMember.disabled},null,8,["value","onUpdate:value","disabled"])):v("",!0),o.dataIndex==="measure"?(c(),f(n,{key:1,value:b[o.dataIndex],"onUpdate:value":D=>b[o.dataIndex]=D,maxlength:1e3,disabled:d.stationMember.disabled},null,8,["value","onUpdate:value","disabled"])):v("",!0),o.dataIndex==="action"?(c(),f(I(J),{key:2,actions:[{tooltip:"删除",color:"error",icon:"ant-design:delete-outlined",ifShow:!d.stationMember.disabled,onClick:K.bind(null,b,"Matter")}]},null,8,["actions"])):v("",!0)]),_:1},8,["onRegister"])]),_:1})):v("",!0),d.stationMember.show?(c(),f(w,{key:1,title:"任务接收情况及人员变更与延期",bordered:!1},{default:l(()=>[a(u,{gutter:32},{default:l(()=>[m(a(i,{span:12},{default:l(()=>[a(r,{name:"licensorId",label:"工作许可人",labelCol:{class:"detail-label-8"},rules:[{required:!0,message:"请选择工作许可人"}]},{default:l(()=>[a(h,{value:t.licensorId,"onUpdate:value":e[12]||(e[12]=o=>t.licensorId=o),"show-search":"","allow-clear":"",style:{width:"100%"},options:C.value,onChange:la,disabled:d.stationMember.disabled},null,8,["value","options","disabled"])]),_:1})]),_:1},512),[[p,!0]]),m(a(i,{span:12},{default:l(()=>[a(r,{name:"licensorTime",label:"工作许可时间",labelCol:{class:"detail-label-8"},rules:[{required:!0,message:"请输入工作许可时间"}]},{default:l(()=>[a(y,{value:t.licensorTime,"onUpdate:value":e[13]||(e[13]=o=>t.licensorTime=o),"show-time":"",format:"YYYY-MM-DD HH:mm","value-format":"YYYY-MM-DD HH:mm",style:"width: 100%",disabled:d.stationMember.disabled},null,8,["value","disabled"])]),_:1})]),_:1},512),[[p,!0]])]),_:1}),a(u,{gutter:32},{default:l(()=>[m(a(i,{span:12},{default:l(()=>[a(r,{name:"wteamsIds",label:"实际班组成员",labelCol:{class:"detail-label-8"},rules:[{required:!0,message:"请选择实际班组成员"}]},{default:l(()=>[a(h,{value:t.wteamsIds,"onUpdate:value":e[14]||(e[14]=o=>t.wteamsIds=o),"show-search":"","allow-clear":"",mode:"multiple",style:{width:"100%"},options:C.value,onChange:sa,disabled:d.stationMember.disabled},null,8,["value","options","disabled"])]),_:1})]),_:1},512),[[p,!0]]),m(a(i,{span:12},{default:l(()=>[a(r,{name:"actPersonIds",label:"工作负责人变更",labelCol:{class:"detail-label-8"},rules:[{required:!1}]},{default:l(()=>[a(h,{value:t.actPersonIds,"onUpdate:value":e[15]||(e[15]=o=>t.actPersonIds=o),"show-search":"","allow-clear":"",mode:"multiple",style:{width:"100%"},options:C.value,onChange:oa,disabled:d.stationMember.disabled},null,8,["value","options","disabled"])]),_:1})]),_:1},512),[[p,!0]])]),_:1}),a(u,{gutter:32},{default:l(()=>[m(a(i,{span:12},{default:l(()=>[a(r,{name:"updateTime",label:"变更时间",labelCol:{class:"detail-label-8"},rules:[{required:!1}]},{default:l(()=>[a(y,{value:t.updateTime,"onUpdate:value":e[16]||(e[16]=o=>t.updateTime=o),"show-time":"",format:"YYYY-MM-DD HH:mm","value-format":"YYYY-MM-DD HH:mm",style:"width: 100%",disabled:d.stationMember.disabled},null,8,["value","disabled"])]),_:1})]),_:1},512),[[p,!0]]),m(a(i,{span:12},{default:l(()=>[a(r,{name:"upteamsIds",label:"作业人员变更",labelCol:{class:"detail-label-8"},rules:[{required:!1}]},{default:l(()=>[a(h,{value:t.upteamsIds,"onUpdate:value":e[17]||(e[17]=o=>t.upteamsIds=o),"show-search":"","allow-clear":"",mode:"multiple",style:{width:"100%"},options:C.value,onChange:na,disabled:d.stationMember.disabled},null,8,["value","options","disabled"])]),_:1})]),_:1},512),[[p,!0]])]),_:1}),a(u,{gutter:32},{default:l(()=>[m(a(i,{span:12},{default:l(()=>[a(r,{name:"delayTime",label:"任务延期至",labelCol:{class:"detail-label-8"},rules:[{required:!1}]},{default:l(()=>[a(y,{value:t.delayTime,"onUpdate:value":e[18]||(e[18]=o=>t.delayTime=o),"show-time":"",format:"YYYY-MM-DD HH:mm","value-format":"YYYY-MM-DD HH:mm",style:"width: 100%",disabled:d.stationMember.disabled},null,8,["value","disabled"])]),_:1})]),_:1},512),[[p,!0]])]),_:1})]),_:1})):v("",!0),d.stationMember.show?(c(),f(w,{key:2,bordered:!1},{default:l(()=>[a(I(G),{title:"每日任务详细记录",onRegister:I(Ke)},{toolbar:l(()=>[d.stationMember.disabled?v("",!0):(c(),f(A,{key:0,type:"primary",preIcon:I(E).ADD,onClick:e[19]||(e[19]=o=>oe("Record"))},{default:l(()=>[O(B(I(M)("common.action.create")),1)]),_:1},8,["preIcon"]))]),bodyCell:l(({column:o,record:b})=>[o.dataIndex==="startTime"?(c(),f(y,{key:0,value:b[o.dataIndex],"onUpdate:value":D=>b[o.dataIndex]=D,"show-time":"",format:"YYYY-MM-DD HH:mm","value-format":"YYYY-MM-DD HH:mm",style:"width: 100%",disabled:d.stationMember.disabled},null,8,["value","onUpdate:value","disabled"])):v("",!0),o.dataIndex==="endTime"?(c(),f(y,{key:1,value:b[o.dataIndex],"onUpdate:value":D=>b[o.dataIndex]=D,"show-time":"",format:"YYYY-MM-DD HH:mm","value-format":"YYYY-MM-DD HH:mm",style:"width: 100%",disabled:d.stationMember.disabled},null,8,["value","onUpdate:value","disabled"])):v("",!0),o.dataIndex==="remark"?(c(),f(n,{key:2,value:b[o.dataIndex],"onUpdate:value":D=>b[o.dataIndex]=D,maxlength:1e3,disabled:d.stationMember.disabled},null,8,["value","onUpdate:value","disabled"])):v("",!0),o.dataIndex==="action"?(c(),f(I(J),{key:3,actions:[{tooltip:"删除",color:"error",icon:"ant-design:delete-outlined",ifShow:!d.stationMember.disabled,onClick:K.bind(null,b,"Record")}]},null,8,["actions"])):v("",!0)]),_:1},8,["onRegister"]),at,a(u,{gutter:32},{default:l(()=>[m(a(i,{span:12},{default:l(()=>[a(r,{name:"workCompleteTime",label:"工作完成时间",labelCol:{class:"detail-label-8"},rules:[{required:!0,message:"请输入工作完成时间"}]},{default:l(()=>[a(y,{value:t.workCompleteTime,"onUpdate:value":e[20]||(e[20]=o=>t.workCompleteTime=o),"show-time":"",format:"YYYY-MM-DD HH:mm","value-format":"YYYY-MM-DD HH:mm",style:"width: 100%",disabled:d.stationMember.disabled},null,8,["value","disabled"])]),_:1})]),_:1},512),[[p,!0]])]),_:1}),a(u,{gutter:32},{default:l(()=>[m(a(i,{span:24},{default:l(()=>[a(r,{name:"completeResult",label:"完成情况",labelCol:{class:"detail-label-8"},rules:[{required:!1}]},{default:l(()=>[a(ne,{value:t.completeResult,"onUpdate:value":e[21]||(e[21]=o=>t.completeResult=o),"show-count":"",rows:4,maxlength:1e3,disabled:d.stationMember.disabled},null,8,["value","disabled"])]),_:1})]),_:1},512),[[p,!0]])]),_:1}),a(u,{gutter:32},{default:l(()=>[m(a(i,{span:24},{default:l(()=>[a(r,{name:"remark",label:"备注",labelCol:{class:"detail-label-8"},rules:[{required:!1}]},{default:l(()=>[a(ne,{value:t.remark,"onUpdate:value":e[22]||(e[22]=o=>t.remark=o),"show-count":"",rows:4,maxlength:1e3,disabled:d.stationMember.disabled},null,8,["value","disabled"])]),_:1})]),_:1},512),[[p,!0]])]),_:1})]),_:1})):v("",!0),d.stationMember.show?(c(),f(w,{key:3,title:"操作信息",bordered:!1},{default:l(()=>[a(u,{gutter:32},{default:l(()=>[m(a(i,{span:12},{default:l(()=>[a(r,{name:"operatorId",label:"操作人",labelCol:{class:"detail-label-8"},rules:[{required:!0,message:"请选择操作人"}]},{default:l(()=>[a(h,{value:t.operatorId,"onUpdate:value":e[23]||(e[23]=o=>t.operatorId=o),"show-search":"","allow-clear":"",style:{width:"100%"},options:C.value,onChange:ra,disabled:d.stationMember.disabled},null,8,["value","options","disabled"])]),_:1})]),_:1},512),[[p,!0]]),m(a(i,{span:12},{default:l(()=>[a(r,{name:"tutorId",label:"监护人",labelCol:{class:"detail-label-8"},rules:[{required:!1}]},{default:l(()=>[a(h,{value:t.tutorId,"onUpdate:value":e[24]||(e[24]=o=>t.tutorId=o),"show-search":"","allow-clear":"",style:{width:"100%"},options:C.value,onChange:da,disabled:d.stationMember.disabled},null,8,["value","options","disabled"])]),_:1})]),_:1},512),[[p,!0]])]),_:1}),a(u,{gutter:32},{default:l(()=>[m(a(i,{span:12},{default:l(()=>[a(r,{name:"oppersonId",label:"运维负责人",labelCol:{class:"detail-label-8"},rules:[{required:!0,message:"请选择运维负责人"}]},{default:l(()=>[a(h,{value:t.oppersonId,"onUpdate:value":e[25]||(e[25]=o=>t.oppersonId=o),"show-search":"","allow-clear":"",style:{width:"100%"},options:C.value,onChange:ia,disabled:d.stationMember.disabled},null,8,["value","options","disabled"])]),_:1})]),_:1},512),[[p,!0]])]),_:1}),a(u,{gutter:32},{default:l(()=>[m(a(i,{span:12},{default:l(()=>[a(r,{name:"opstartTime",label:"操作开始时间",labelCol:{class:"detail-label-8"},rules:[{required:!0,message:"请输入操作开始时间"}]},{default:l(()=>[a(y,{value:t.opstartTime,"onUpdate:value":e[26]||(e[26]=o=>t.opstartTime=o),"show-time":"",format:"YYYY-MM-DD HH:mm","value-format":"YYYY-MM-DD HH:mm",style:"width: 100%",disabled:d.stationMember.disabled},null,8,["value","disabled"])]),_:1})]),_:1},512),[[p,!0]]),m(a(i,{span:12},{default:l(()=>[a(r,{name:"opendTime",label:"操作完成时间",labelCol:{class:"detail-label-8"},rules:[{required:!0,message:"请输入操作完成时间"}]},{default:l(()=>[a(y,{value:t.opendTime,"onUpdate:value":e[27]||(e[27]=o=>t.opendTime=o),"show-time":"",format:"YYYY-MM-DD HH:mm","value-format":"YYYY-MM-DD HH:mm",style:"width: 100%",disabled:d.stationMember.disabled},null,8,["value","disabled"])]),_:1})]),_:1},512),[[p,!0]])]),_:1}),a(Ra,{width:800,height:550,maxCount:20,maxSize:100*1024*1024,application:"po",module:"firstworkticket",vmode:d.stationMember.disabled?"view":"box",bizId:t.bizFileId},null,8,["vmode","bizId"])]),_:1})):v("",!0),d.manager.show?(c(),f(w,{key:4,title:"合格性检查",bordered:!1},{default:l(()=>[a(u,{gutter:32},{default:l(()=>[m(a(i,{span:12},{default:l(()=>[a(r,{name:"result",label:"检查结论",labelCol:{class:"detail-label-8"},rules:[{required:!0,message:"请选择检查结论"}]},{default:l(()=>[a(we,{value:t.result,"onUpdate:value":e[28]||(e[28]=o=>t.result=o),type:"inspection_conclusion",disabled:d.manager.disabled},null,8,["value","disabled"])]),_:1})]),_:1},512),[[p,!0]]),m(a(i,{span:12},{default:l(()=>[a(r,{name:"checkTime",label:"检查时间",labelCol:{class:"detail-label-8"},rules:[{required:!0,message:"请输入检查时间"}]},{default:l(()=>[a(y,{value:t.checkTime,"onUpdate:value":e[29]||(e[29]=o=>t.checkTime=o),"show-time":"",format:"YYYY-MM-DD HH:mm","value-format":"YYYY-MM-DD HH:mm",style:"width: 100%",disabled:d.manager.disabled},null,8,["value","disabled"])]),_:1})]),_:1},512),[[p,!0]])]),_:1}),a(u,{gutter:32},{default:l(()=>[m(a(i,{span:24},{default:l(()=>[a(r,{name:"illustrate",label:"验证说明",labelCol:{class:"detail-label-8"},rules:[{required:!1}]},{default:l(()=>[a(ne,{value:t.illustrate,"onUpdate:value":e[30]||(e[30]=o=>t.illustrate=o),"show-count":"",rows:4,maxlength:1e3,disabled:d.manager.disabled},null,8,["value","disabled"])]),_:1})]),_:1},512),[[p,!0]])]),_:1})]),_:1})):v("",!0)]),_:1},8,["model"])])])]),_:1},8,["spinning"]),a(Ha,{visible:P.value,"onUpdate:visible":e[32]||(e[32]=o=>P.value=o),title:"选择安全类型",onOk:aa,onCancel:ea,width:460,height:200,smode:"normal",overflowY:"auto"},{default:l(()=>[a(ce,{ref:"modalFormRef",model:N},{default:l(()=>[a(u,{gutter:32},{default:l(()=>[m(a(i,{span:24},{default:l(()=>[a(r,{name:"securityType",label:"安全类型",labelCol:{class:"detail-label-8"},rules:[{required:!1}]},{default:l(()=>[a(we,{value:N.securityType,"onUpdate:value":e[31]||(e[31]=o=>N.securityType=o),type:"security_type",onChange:Xe},null,8,["value"])]),_:1})]),_:1},512),[[p,!0]])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible"])])]),_:1})}}});const Bt=Sa(tt,[["__scopeId","data-v-81667946"]]);export{Bt as default};
//# sourceMappingURL=create-25ec0aae.js.map
