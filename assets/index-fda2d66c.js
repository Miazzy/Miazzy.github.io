var we=Object.defineProperty,he=Object.defineProperties;var ye=Object.getOwnPropertyDescriptors;var U=Object.getOwnPropertySymbols;var me=Object.prototype.hasOwnProperty,De=Object.prototype.propertyIsEnumerable;var W=(e,o,s)=>o in e?we(e,o,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[o]=s,D=(e,o)=>{for(var s in o||(o={}))me.call(o,s)&&W(e,s,o[s]);if(U)for(var s of U(o))De.call(o,s)&&W(e,s,o[s]);return e},L=(e,o)=>he(e,ye(o));var Z=(e,o,s)=>new Promise((i,l)=>{var u=c=>{try{n(s.next(c))}catch(p){l(p)}},t=c=>{try{n(s.throw(c))}catch(p){l(p)}},n=c=>c.done?i(c.value):Promise.resolve(c.value).then(u,t);n((s=s.apply(e,o)).next())});import{b as ee,u as j,_ as q,aW as Ce,p as M,S as ke,a_ as ve,bq as G,b9 as $e,i as te,a7 as _,aH as se,bh as be,bp as oe,aK as Be}from"./index.js";import{d as A,e as w,al as C,Z as d,_ as B,F as Pe,R as f,a9 as S,aa as h,E as V,ad as O,a7 as F,ac as P,a5 as v,a6 as ne,$ as Q,f as R,k,g as I,u as a,J as b,w as X,q as re,x as Se,ag as Y,v as Te,ae as _e,ai as Oe,ap as Fe,r as ae,s as Ie}from"./vue-71d1abb3.js";import{bz as He,ay as Le,L as Me}from"./antd-15ac76ed.js";const{t:x}=ee(),le={confirmLoading:{type:Boolean},showCancelBtn:{type:Boolean,default:!0},cancelButtonProps:Object,cancelText:{type:String,default:x("common.cancelText")},showOkBtn:{type:Boolean,default:!0},okButtonProps:Object,okText:{type:String,default:x("common.okText")},okType:{type:String,default:"primary"},showFooter:{type:Boolean},footerHeight:{type:[String,Number],default:60}},Ve=D({isDetail:{type:Boolean},title:{type:String,default:""},loadingText:{type:String},showDetailBack:{type:Boolean,default:!0},visible:{type:Boolean},loading:{type:Boolean},maskClosable:{type:Boolean,default:!0},getContainer:{type:[Object,String]},closeFunc:{type:[Function,Object],default:null},destroyOnClose:{type:Boolean}},le),Re=A({name:"BasicDrawerFooter",props:L(D({},le),{height:{type:String,default:"60px"}}),emits:["ok","close"],setup(e,{emit:o}){const{prefixCls:s}=j("basic-drawer-footer"),i=w(()=>{const t=`${e.height}`;return{height:t,lineHeight:`calc(${t} - 1px)`}});function l(){o("ok")}function u(){o("close")}return{handleOk:l,prefixCls:s,handleClose:u,getStyle:i}}});function Ne(e,o,s,i,l,u){const t=C("a-button");return e.showFooter||e.$slots.footer?(d(),B("div",{key:0,class:v(e.prefixCls),style:ne(e.getStyle)},[e.$slots.footer?f(e.$slots,"footer",{key:1}):(d(),B(Pe,{key:0},[f(e.$slots,"insertFooter"),e.showCancelBtn?(d(),S(t,F({key:0},e.cancelButtonProps,{onClick:e.handleClose,class:"mr-2"}),{default:h(()=>[V(O(e.cancelText),1)]),_:1},16,["onClick"])):P("",!0),f(e.$slots,"centerFooter"),e.showOkBtn?(d(),S(t,F({key:1,type:e.okType,onClick:e.handleOk},e.okButtonProps,{class:"mr-2",loading:e.confirmLoading}),{default:h(()=>[V(O(e.okText),1)]),_:1},16,["type","onClick","loading"])):P("",!0),f(e.$slots,"appendFooter")],64))],6)):P("",!0)}const Ee=q(Re,[["render",Ne]]),je=A({name:"BasicDrawerHeader",components:{BasicTitle:Ce,ArrowLeftOutlined:He},props:{isDetail:M.bool,showDetailBack:M.bool,title:M.string},emits:["close"],setup(e,{emit:o}){const{prefixCls:s}=j("basic-drawer-header");function i(){o("close")}return{prefixCls:s,handleClose:i}}});const qe={key:1};function Ae(e,o,s,i,l,u){const t=C("BasicTitle"),n=C("ArrowLeftOutlined");return e.isDetail?(d(),B("div",{key:1,class:v([e.prefixCls,`${e.prefixCls}--detail`])},[Q("span",{class:v(`${e.prefixCls}__twrap`)},[e.showDetailBack?(d(),B("span",{key:0,onClick:o[0]||(o[0]=(...c)=>e.handleClose&&e.handleClose(...c))},[R(n,{class:v(`${e.prefixCls}__back`)},null,8,["class"])])):P("",!0),e.title?(d(),B("span",qe,O(e.title),1)):P("",!0)],2),Q("span",{class:v(`${e.prefixCls}__toolbar`)},[f(e.$slots,"titleToolbar")],2)],2)):(d(),S(t,{key:0,class:v(e.prefixCls)},{default:h(()=>[f(e.$slots,"title"),V(" "+O(e.$slots.title?"":e.title),1)]),_:3},8,["class"]))}const ze=q(je,[["render",Ae]]),Je=A({components:{Drawer:Le,ScrollContainer:ke,DrawerFooter:Ee,DrawerHeader:ze},inheritAttrs:!1,props:Ve,emits:["visible-change","ok","close","register"],setup(e,{emit:o}){const s=k(!1),i=ve(),l=k(null),{t:u}=ee(),{prefixVar:t,prefixCls:n}=j("basic-drawer"),c={setDrawerProps:de,emitVisible:void 0},p=I();p&&o("register",c,p.uid);const y=w(()=>G(b(e),a(l))),T=()=>{try{return window.self!==window.top}catch(r){return!0}},m=w(()=>{const r=L(D(D({placement:"right"},a(i)),a(y)),{visible:a(s)});r.title=void 0;const{isDetail:g,width:H,wrapClassName:J,getContainer:ge}=r;if(g){H||(r.width="100%");const K=`${n}__detail`;r.class=J?`${J} ${K}`:K,ge||(r.getContainer=`.${t}-layout-content`)}return r}),ie=w(()=>D(D({},i),a(m))),z=w(()=>{const{footerHeight:r,showFooter:g}=a(m);return g&&r?$e(r)?`${r}px`:`${r.replace("px","")}px`:"0px"}),ce=w(()=>({position:"relative",height:`calc(100% - ${a(z)})`})),ue=w(()=>{var r;return!!((r=a(m))!=null&&r.loading)});X(()=>e.visible,(r,g)=>{r!==g&&(s.value=r)},{deep:!0}),X(()=>s.value,r=>{re(()=>{o("visible-change",r)})});function pe(r){return Z(this,null,function*(){const{closeFunc:g}=a(m);if(o("close",r),g&&te(g)){const H=yield g();s.value=!H;return}T()&&_.getInstance().sendMsg("drawer-open",{type:"remove"}),s.value=!1})}function de(r){l.value=G(a(l)||{},r),Reflect.has(r,"visible")&&(s.value=!!r.visible)}function fe(){o("ok")}return{onClose:pe,t:u,prefixCls:n,getMergeProps:y,getScrollContentStyle:ce,getProps:m,getLoading:ue,getBindValues:ie,getFooterHeight:z,handleOk:fe}}});function Ke(e,o,s,i,l,u){const t=C("DrawerHeader"),n=C("ScrollContainer"),c=C("DrawerFooter"),p=C("Drawer"),y=Se("loading");return d(),S(p,F({class:e.prefixCls,onClose:e.onClose},e.getBindValues),Y({default:h(()=>[Te((d(),S(n,{style:ne(e.getScrollContentStyle),"loading-tip":e.loadingText||e.t("common.loadingText")},{default:h(()=>[f(e.$slots,"default")]),_:3},8,["style","loading-tip"])),[[y,e.getLoading]]),R(c,F(e.getProps,{onClose:e.onClose,onOk:e.handleOk,height:e.getFooterHeight}),Y({_:2},[_e(Object.keys(e.$slots),T=>({name:T,fn:h(m=>[f(e.$slots,T,Oe(Fe(m||{})))])}))]),1040,["onClose","onOk","height"])]),_:2},[e.$slots.title?{name:"title",fn:h(()=>[f(e.$slots,"title")]),key:"1"}:{name:"title",fn:h(()=>[R(t,{title:e.getMergeProps.title,isDetail:e.isDetail,showDetailBack:e.showDetailBack,onClose:e.onClose},{titleToolbar:h(()=>[f(e.$slots,"titleToolbar")]),_:3},8,["title","isDetail","showDetailBack","onClose"])]),key:"0"}]),1040,["class","onClose"])}const Ue=q(Je,[["render",Ke]]),$=ae({}),N=ae({}),E=()=>{try{return window.self!==window.top}catch(e){return!0}};function Xe(){if(!I())throw new Error("useDrawer() can only be used inside setup() or functional components!");const e=k(null),o=k(!1),s=k("");function i(t,n){se(()=>{e.value=null,o.value=null,$[a(s)]=null}),!(a(o)&&be()&&t===a(e))&&(s.value=n,e.value=t,o.value=!0,t.emitVisible=(c,p)=>{N[p]=c})}const l=()=>{const t=a(e);return t||oe("useDrawer instance is undefined!"),t},u={setDrawerProps:t=>{var n;(n=l())==null||n.setDrawerProps(t)},getVisible:w(()=>N[~~a(s)]),openDrawer:(t=!0,n,c=!0)=>{var y;if(E()&&_.getInstance().sendMsg("drawer-open",{type:"open"}),(y=l())==null||y.setDrawerProps({visible:t}),!n)return;if(c){$[a(s)]=null,$[a(s)]=b(n);return}Me(b($[a(s)]),b(n))||($[a(s)]=b(n))},closeDrawer:()=>{var t;E()&&_.getInstance().sendMsg("drawer-open",{type:"remove"}),(t=l())==null||t.setDrawerProps({visible:!1})}};return[i,u]}const Ye=e=>{const o=k(null),s=I(),i=k("");if(!I())throw new Error("useDrawerInner() can only be used inside setup() or functional components!");const l=()=>{const t=a(o);if(!t){oe("useDrawerInner instance is undefined!");return}return t},u=(t,n)=>{se(()=>{o.value=null}),i.value=n,o.value=t,s==null||s.emit("register",t,n)};return Ie(()=>{const t=$[a(i)];t&&(!e||!te(e)||re(()=>{e(t)}))}),[u,{changeLoading:(t=!0)=>{var n;(n=l())==null||n.setDrawerProps({loading:t})},changeOkLoading:(t=!0)=>{var n;(n=l())==null||n.setDrawerProps({confirmLoading:t})},getVisible:w(()=>N[~~a(i)]),closeDrawer:()=>{var t;(t=l())==null||t.setDrawerProps({visible:!1}),E()&&_.getInstance().sendMsg("drawer-open",{type:"remove"})},setDrawerProps:t=>{var n;(n=l())==null||n.setDrawerProps(t)}}]},xe=Be(Ue);export{xe as B,Ye as a,Xe as u};
//# sourceMappingURL=index-fda2d66c.js.map
