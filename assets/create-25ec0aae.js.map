{"version":3,"file":"create-25ec0aae.js","sources":["../../src/views/po/ticket/firstworkticket/create.vue"],"sourcesContent":["<template>\n  <PageWrapper\n    :detail=\"true\"\n    dense\n    contentFullHeight\n    fixedHeight\n    contentClass=\"fix-detail-page\"\n    style=\"position: relative\"\n  >\n    <div class=\"load\">\n      <a-spin :spinning=\"formState.spinning\" tip=\"Loading...\">\n        <div class=\"process-box\">\n          <!-- 标题和操作按钮 -->\n          <div class=\"header-box\">\n            <BillTitle :options=\"billTitleOption\" />\n            <WfApproveBox\n              @save=\"onSave\"\n              @submit=\"onSubmit\"\n              @before=\"onBefore\"\n              :processInstanceId=\"formState.processInstanceId\"\n              :processStatus=\"formState.status\"\n              :mode=\"getApproveBoxMode\"\n              :businessStatus=\"businessStatus\"\n              :listenMessage=\"listenMessage\"\n            />\n            <CustomPrint\n              v-if=\"formState.status == 2\"\n              path=\"firstWorkTicket\"\n              :params=\"{\n                base: formState,\n                taskDetails: taskDataSource,\n                measureDetails: measureDataSource,\n                matterDetails: matterDataSource,\n                recordDetails: recordDataSource,\n              }\"\n            />\n          </div>\n          <!-- 表单内容 -->\n          <div class=\"content\">\n            <a-form ref=\"formRef\" :model=\"formState\" labelAlign=\"right\" autocomplete=\"off\">\n              <a-card title=\"基本信息\" :bordered=\"false\">\n                <a-row :gutter=\"32\">\n                  <a-col v-show=\"true\" :span=\"12\">\n                    <a-form-item\n                      name=\"stationName\"\n                      label=\"电站名称\"\n                      :labelCol=\"{ class: 'detail-label-8' }\"\n                    >\n                      <a-input v-model:value=\"formState.stationName\" disabled />\n                    </a-form-item>\n                  </a-col>\n                  <a-col v-show=\"true\" :span=\"12\">\n                    <a-form-item\n                      name=\"ticketNumber\"\n                      label=\"工作票号\"\n                      :labelCol=\"{ class: 'detail-label-8' }\"\n                    >\n                      <a-input v-model:value=\"formState.ticketNumber\" disabled />\n                    </a-form-item>\n                  </a-col>\n                </a-row>\n\n                <a-row :gutter=\"32\">\n                  <a-col v-show=\"true\" :span=\"12\">\n                    <a-form-item\n                      name=\"headName\"\n                      label=\"工作负责人\"\n                      :labelCol=\"{ class: 'detail-label-8' }\"\n                      :rules=\"[{ required: false }]\"\n                    >\n                      <a-input v-model:value=\"formState.headName\" disabled />\n                    </a-form-item>\n                  </a-col>\n                  <a-col v-show=\"true\" :span=\"12\">\n                    <a-form-item\n                      name=\"teamsIds\"\n                      label=\"班组成员(内)\"\n                      :labelCol=\"{ class: 'detail-label-8' }\"\n                      :rules=\"[{ required: false }]\"\n                    >\n                      <a-select\n                        v-model:value=\"formState.teamsIds\"\n                        show-search\n                        allow-clear\n                        mode=\"multiple\"\n                        style=\"width: 100%\"\n                        :options=\"stationPersonOptions\"\n                        @change=\"handleChangeTeamsName\"\n                        :disabled=\"disabledInput\"\n                      />\n                    </a-form-item>\n                  </a-col>\n                </a-row>\n\n                <a-row :gutter=\"32\">\n                  <a-col v-show=\"true\" :span=\"12\">\n                    <a-form-item\n                      name=\"outTeams\"\n                      label=\"班组成员(外)\"\n                      :labelCol=\"{ class: 'detail-label-8' }\"\n                      :rules=\"[{ required: false }]\"\n                    >\n                      <a-input\n                        v-model:value=\"formState.outTeams\"\n                        :maxlength=\"256\"\n                        :disabled=\"disabledInput\"\n                      />\n                    </a-form-item>\n                  </a-col>\n                </a-row>\n\n                <a-row :gutter=\"32\">\n                  <a-col v-show=\"true\" :span=\"24\">\n                    <a-form-item\n                      name=\"subject\"\n                      label=\"电站设备名称\"\n                      :labelCol=\"{ class: 'detail-label-8' }\"\n                      :rules=\"[{ required: true, message: '请输入电站设备名称' }]\"\n                    >\n                      <a-input\n                        v-model:value=\"formState.subject\"\n                        :maxlength=\"100\"\n                        :disabled=\"disabledInput\"\n                      />\n                    </a-form-item>\n                  </a-col>\n                </a-row>\n\n                <a-row :gutter=\"32\">\n                  <a-col v-show=\"true\" :span=\"12\">\n                    <a-form-item\n                      name=\"startTime\"\n                      label=\"计划工作开始时间\"\n                      :labelCol=\"{ class: 'detail-label-8' }\"\n                      :rules=\"[{ required: true, message: '请输入计划工作开始时间' }]\"\n                    >\n                      <a-date-picker\n                        v-model:value=\"formState.startTime\"\n                        show-time\n                        format=\"YYYY-MM-DD HH:mm\"\n                        value-format=\"YYYY-MM-DD HH:mm\"\n                        :style=\"`width: 100%`\"\n                        :disabled=\"disabledInput\"\n                      />\n                    </a-form-item>\n                  </a-col>\n                  <a-col v-show=\"true\" :span=\"12\">\n                    <a-form-item\n                      name=\"endTime\"\n                      label=\"计划工作结束时间\"\n                      :labelCol=\"{ class: 'detail-label-8' }\"\n                      :rules=\"[{ required: true, message: '请输入计划工作结束时间' }]\"\n                    >\n                      <a-date-picker\n                        v-model:value=\"formState.endTime\"\n                        show-time\n                        format=\"YYYY-MM-DD HH:mm\"\n                        value-format=\"YYYY-MM-DD HH:mm\"\n                        :style=\"`width: 100%`\"\n                        :disabled=\"disabledInput\"\n                      />\n                    </a-form-item>\n                  </a-col>\n                </a-row>\n              </a-card>\n\n              <a-card :bordered=\"false\">\n                <BasicTable title=\"工作任务\" @register=\"registerTaskTable\">\n                  <template #toolbar>\n                    <a-button\n                      v-if=\"!disabledInput\"\n                      type=\"primary\"\n                      :preIcon=\"IconEnum.ADD\"\n                      @click=\"handleAddItem('Task')\"\n                    >\n                      {{ t('common.action.create') }}\n                    </a-button>\n                  </template>\n                  <template #bodyCell=\"{ column, record }\">\n                    <template v-if=\"column.dataIndex === 'title'\">\n                      <a-input\n                        v-model:value=\"record[column.dataIndex]\"\n                        :maxlength=\"1000\"\n                        :disabled=\"disabledInput\"\n                      />\n                    </template>\n                    <template v-if=\"column.dataIndex === 'content'\">\n                      <a-input\n                        v-model:value=\"record[column.dataIndex]\"\n                        :maxlength=\"1000\"\n                        :disabled=\"disabledInput\"\n                      />\n                    </template>\n                    <template v-if=\"column.dataIndex === 'action'\">\n                      <TableAction\n                        :actions=\"[\n                          {\n                            tooltip: '删除',\n                            color: 'error',\n                            icon: 'ant-design:delete-outlined',\n                            ifShow: !disabledInput,\n                            onClick: handleDeleteItem.bind(null, record, 'Task'),\n                          },\n                        ]\"\n                      />\n                    </template>\n                  </template>\n                </BasicTable>\n              </a-card>\n\n              <a-card :bordered=\"false\">\n                <BasicTable title=\"安全措施\" @register=\"registerMeasureTable\">\n                  <template #toolbar>\n                    <a-button\n                      v-if=\"!disabledInput\"\n                      type=\"primary\"\n                      :preIcon=\"IconEnum.ADD\"\n                      @click=\"handleAddMeasure()\"\n                    >\n                      {{ t('common.action.create') }}\n                    </a-button>\n                    <a-button\n                      v-if=\"!disabledInput\"\n                      type=\"primary\"\n                      :preIcon=\"IconEnum.ADD\"\n                      @click=\"handleAddMeasureDetail()\"\n                    >\n                      {{ t('common.action.create') }}明细\n                    </a-button>\n                  </template>\n                  <template #bodyCell=\"{ column, record }\">\n                    <template v-if=\"column.dataIndex === 'measure'\">\n                      <a-input\n                        v-model:value=\"record[column.dataIndex]\"\n                        :maxlength=\"1000\"\n                        :disabled=\"disabledInput\"\n                      />\n                    </template>\n                    <template v-if=\"column.dataIndex === 'status'\">\n                      <a-checkbox\n                        v-model:checked=\"record[column.dataIndex]\"\n                        :disabled=\"process.stationMember.disabled\"\n                      />\n                    </template>\n                    <template v-if=\"column.dataIndex === 'action'\">\n                      <TableAction\n                        :actions=\"[\n                          {\n                            tooltip: '删除',\n                            color: 'error',\n                            icon: 'ant-design:delete-outlined',\n                            ifShow: !disabledInput,\n                            onClick: handleDeleteItem.bind(null, record, 'Measure'),\n                          },\n                        ]\"\n                      />\n                    </template>\n                  </template>\n                </BasicTable>\n              </a-card>\n\n              <a-card v-if=\"process.stationMember.show\" :bordered=\"false\">\n                <BasicTable title=\"(补充)工作地点及注意事项\" @register=\"registerMatterTable\">\n                  <template #toolbar>\n                    <a-button\n                      v-if=\"!process.stationMember.disabled\"\n                      type=\"primary\"\n                      :preIcon=\"IconEnum.ADD\"\n                      @click=\"handleAddItem('Matter')\"\n                    >\n                      {{ t('common.action.create') }}\n                    </a-button>\n                  </template>\n                  <template #bodyCell=\"{ column, record }\">\n                    <template v-if=\"column.dataIndex === 'matter'\">\n                      <a-input\n                        v-model:value=\"record[column.dataIndex]\"\n                        :maxlength=\"1000\"\n                        :disabled=\"process.stationMember.disabled\"\n                      />\n                    </template>\n                    <template v-if=\"column.dataIndex === 'measure'\">\n                      <a-input\n                        v-model:value=\"record[column.dataIndex]\"\n                        :maxlength=\"1000\"\n                        :disabled=\"process.stationMember.disabled\"\n                      />\n                    </template>\n                    <template v-if=\"column.dataIndex === 'action'\">\n                      <TableAction\n                        :actions=\"[\n                          {\n                            tooltip: '删除',\n                            color: 'error',\n                            icon: 'ant-design:delete-outlined',\n                            ifShow: !process.stationMember.disabled,\n                            onClick: handleDeleteItem.bind(null, record, 'Matter'),\n                          },\n                        ]\"\n                      />\n                    </template>\n                  </template>\n                </BasicTable>\n              </a-card>\n\n              <a-card\n                v-if=\"process.stationMember.show\"\n                title=\"任务接收情况及人员变更与延期\"\n                :bordered=\"false\"\n              >\n                <a-row :gutter=\"32\">\n                  <a-col v-show=\"true\" :span=\"12\">\n                    <a-form-item\n                      name=\"licensorId\"\n                      label=\"工作许可人\"\n                      :labelCol=\"{ class: 'detail-label-8' }\"\n                      :rules=\"[{ required: true, message: '请选择工作许可人' }]\"\n                    >\n                      <a-select\n                        v-model:value=\"formState.licensorId\"\n                        show-search\n                        allow-clear\n                        style=\"width: 100%\"\n                        :options=\"stationPersonOptions\"\n                        @change=\"handleChangeLicensorName\"\n                        :disabled=\"process.stationMember.disabled\"\n                      />\n                    </a-form-item>\n                  </a-col>\n                  <a-col v-show=\"true\" :span=\"12\">\n                    <a-form-item\n                      name=\"licensorTime\"\n                      label=\"工作许可时间\"\n                      :labelCol=\"{ class: 'detail-label-8' }\"\n                      :rules=\"[{ required: true, message: '请输入工作许可时间' }]\"\n                    >\n                      <a-date-picker\n                        v-model:value=\"formState.licensorTime\"\n                        show-time\n                        format=\"YYYY-MM-DD HH:mm\"\n                        value-format=\"YYYY-MM-DD HH:mm\"\n                        :style=\"`width: 100%`\"\n                        :disabled=\"process.stationMember.disabled\"\n                      />\n                    </a-form-item>\n                  </a-col>\n                </a-row>\n\n                <a-row :gutter=\"32\">\n                  <a-col v-show=\"true\" :span=\"12\">\n                    <a-form-item\n                      name=\"wteamsIds\"\n                      label=\"实际班组成员\"\n                      :labelCol=\"{ class: 'detail-label-8' }\"\n                      :rules=\"[{ required: true, message: '请选择实际班组成员' }]\"\n                    >\n                      <a-select\n                        v-model:value=\"formState.wteamsIds\"\n                        show-search\n                        allow-clear\n                        mode=\"multiple\"\n                        style=\"width: 100%\"\n                        :options=\"stationPersonOptions\"\n                        @change=\"handleChangeWteamsName\"\n                        :disabled=\"process.stationMember.disabled\"\n                      />\n                    </a-form-item>\n                  </a-col>\n                  <a-col v-show=\"true\" :span=\"12\">\n                    <a-form-item\n                      name=\"actPersonIds\"\n                      label=\"工作负责人变更\"\n                      :labelCol=\"{ class: 'detail-label-8' }\"\n                      :rules=\"[{ required: false }]\"\n                    >\n                      <a-select\n                        v-model:value=\"formState.actPersonIds\"\n                        show-search\n                        allow-clear\n                        mode=\"multiple\"\n                        style=\"width: 100%\"\n                        :options=\"stationPersonOptions\"\n                        @change=\"handleChangeActPersonName\"\n                        :disabled=\"process.stationMember.disabled\"\n                      />\n                    </a-form-item>\n                  </a-col>\n                </a-row>\n\n                <a-row :gutter=\"32\">\n                  <a-col v-show=\"true\" :span=\"12\">\n                    <a-form-item\n                      name=\"updateTime\"\n                      label=\"变更时间\"\n                      :labelCol=\"{ class: 'detail-label-8' }\"\n                      :rules=\"[{ required: false }]\"\n                    >\n                      <a-date-picker\n                        v-model:value=\"formState.updateTime\"\n                        show-time\n                        format=\"YYYY-MM-DD HH:mm\"\n                        value-format=\"YYYY-MM-DD HH:mm\"\n                        :style=\"`width: 100%`\"\n                        :disabled=\"process.stationMember.disabled\"\n                      />\n                    </a-form-item>\n                  </a-col>\n                  <a-col v-show=\"true\" :span=\"12\">\n                    <a-form-item\n                      name=\"upteamsIds\"\n                      label=\"作业人员变更\"\n                      :labelCol=\"{ class: 'detail-label-8' }\"\n                      :rules=\"[{ required: false }]\"\n                    >\n                      <a-select\n                        v-model:value=\"formState.upteamsIds\"\n                        show-search\n                        allow-clear\n                        mode=\"multiple\"\n                        style=\"width: 100%\"\n                        :options=\"stationPersonOptions\"\n                        @change=\"handleChangeUpteamsName\"\n                        :disabled=\"process.stationMember.disabled\"\n                      />\n                    </a-form-item>\n                  </a-col>\n                </a-row>\n\n                <a-row :gutter=\"32\">\n                  <a-col v-show=\"true\" :span=\"12\">\n                    <a-form-item\n                      name=\"delayTime\"\n                      label=\"任务延期至\"\n                      :labelCol=\"{ class: 'detail-label-8' }\"\n                      :rules=\"[{ required: false }]\"\n                    >\n                      <a-date-picker\n                        v-model:value=\"formState.delayTime\"\n                        show-time\n                        format=\"YYYY-MM-DD HH:mm\"\n                        value-format=\"YYYY-MM-DD HH:mm\"\n                        :style=\"`width: 100%`\"\n                        :disabled=\"process.stationMember.disabled\"\n                      />\n                    </a-form-item>\n                  </a-col>\n                </a-row>\n              </a-card>\n\n              <a-card v-if=\"process.stationMember.show\" :bordered=\"false\">\n                <BasicTable title=\"每日任务详细记录\" @register=\"registerRecordTable\">\n                  <template #toolbar>\n                    <a-button\n                      v-if=\"!process.stationMember.disabled\"\n                      type=\"primary\"\n                      :preIcon=\"IconEnum.ADD\"\n                      @click=\"handleAddItem('Record')\"\n                    >\n                      {{ t('common.action.create') }}\n                    </a-button>\n                  </template>\n                  <template #bodyCell=\"{ column, record }\">\n                    <template v-if=\"column.dataIndex === 'startTime'\">\n                      <a-date-picker\n                        v-model:value=\"record[column.dataIndex]\"\n                        show-time\n                        format=\"YYYY-MM-DD HH:mm\"\n                        value-format=\"YYYY-MM-DD HH:mm\"\n                        :style=\"`width: 100%`\"\n                        :disabled=\"process.stationMember.disabled\"\n                      />\n                    </template>\n                    <template v-if=\"column.dataIndex === 'endTime'\">\n                      <a-date-picker\n                        v-model:value=\"record[column.dataIndex]\"\n                        show-time\n                        format=\"YYYY-MM-DD HH:mm\"\n                        value-format=\"YYYY-MM-DD HH:mm\"\n                        :style=\"`width: 100%`\"\n                        :disabled=\"process.stationMember.disabled\"\n                      />\n                    </template>\n                    <template v-if=\"column.dataIndex === 'remark'\">\n                      <a-input\n                        v-model:value=\"record[column.dataIndex]\"\n                        :maxlength=\"1000\"\n                        :disabled=\"process.stationMember.disabled\"\n                      />\n                    </template>\n                    <template v-if=\"column.dataIndex === 'action'\">\n                      <TableAction\n                        :actions=\"[\n                          {\n                            tooltip: '删除',\n                            color: 'error',\n                            icon: 'ant-design:delete-outlined',\n                            ifShow: !process.stationMember.disabled,\n                            onClick: handleDeleteItem.bind(null, record, 'Record'),\n                          },\n                        ]\"\n                      />\n                    </template>\n                  </template>\n                </BasicTable>\n\n                <br />\n                <a-row :gutter=\"32\">\n                  <a-col v-show=\"true\" :span=\"12\">\n                    <a-form-item\n                      name=\"workCompleteTime\"\n                      label=\"工作完成时间\"\n                      :labelCol=\"{ class: 'detail-label-8' }\"\n                      :rules=\"[{ required: true, message: '请输入工作完成时间' }]\"\n                    >\n                      <a-date-picker\n                        v-model:value=\"formState.workCompleteTime\"\n                        show-time\n                        format=\"YYYY-MM-DD HH:mm\"\n                        value-format=\"YYYY-MM-DD HH:mm\"\n                        :style=\"`width: 100%`\"\n                        :disabled=\"process.stationMember.disabled\"\n                      />\n                    </a-form-item>\n                  </a-col>\n                </a-row>\n\n                <a-row :gutter=\"32\">\n                  <a-col v-show=\"true\" :span=\"24\">\n                    <a-form-item\n                      name=\"completeResult\"\n                      label=\"完成情况\"\n                      :labelCol=\"{ class: 'detail-label-8' }\"\n                      :rules=\"[{ required: false }]\"\n                    >\n                      <a-textarea\n                        v-model:value=\"formState.completeResult\"\n                        show-count\n                        :rows=\"4\"\n                        :maxlength=\"1000\"\n                        :disabled=\"process.stationMember.disabled\"\n                      />\n                    </a-form-item>\n                  </a-col>\n                </a-row>\n\n                <a-row :gutter=\"32\">\n                  <a-col v-show=\"true\" :span=\"24\">\n                    <a-form-item\n                      name=\"remark\"\n                      label=\"备注\"\n                      :labelCol=\"{ class: 'detail-label-8' }\"\n                      :rules=\"[{ required: false }]\"\n                    >\n                      <a-textarea\n                        v-model:value=\"formState.remark\"\n                        show-count\n                        :rows=\"4\"\n                        :maxlength=\"1000\"\n                        :disabled=\"process.stationMember.disabled\"\n                      />\n                    </a-form-item>\n                  </a-col>\n                </a-row>\n              </a-card>\n\n              <a-card v-if=\"process.stationMember.show\" title=\"操作信息\" :bordered=\"false\">\n                <a-row :gutter=\"32\">\n                  <a-col v-show=\"true\" :span=\"12\">\n                    <a-form-item\n                      name=\"operatorId\"\n                      label=\"操作人\"\n                      :labelCol=\"{ class: 'detail-label-8' }\"\n                      :rules=\"[{ required: true, message: '请选择操作人' }]\"\n                    >\n                      <a-select\n                        v-model:value=\"formState.operatorId\"\n                        show-search\n                        allow-clear\n                        style=\"width: 100%\"\n                        :options=\"stationPersonOptions\"\n                        @change=\"handleChangeOperatorName\"\n                        :disabled=\"process.stationMember.disabled\"\n                      />\n                    </a-form-item>\n                  </a-col>\n                  <a-col v-show=\"true\" :span=\"12\">\n                    <a-form-item\n                      name=\"tutorId\"\n                      label=\"监护人\"\n                      :labelCol=\"{ class: 'detail-label-8' }\"\n                      :rules=\"[{ required: false }]\"\n                    >\n                      <a-select\n                        v-model:value=\"formState.tutorId\"\n                        show-search\n                        allow-clear\n                        style=\"width: 100%\"\n                        :options=\"stationPersonOptions\"\n                        @change=\"handleChangeTutorName\"\n                        :disabled=\"process.stationMember.disabled\"\n                      />\n                    </a-form-item>\n                  </a-col>\n                </a-row>\n\n                <a-row :gutter=\"32\"\n                  ><a-col v-show=\"true\" :span=\"12\">\n                    <a-form-item\n                      name=\"oppersonId\"\n                      label=\"运维负责人\"\n                      :labelCol=\"{ class: 'detail-label-8' }\"\n                      :rules=\"[{ required: true, message: '请选择运维负责人' }]\"\n                    >\n                      <a-select\n                        v-model:value=\"formState.oppersonId\"\n                        show-search\n                        allow-clear\n                        style=\"width: 100%\"\n                        :options=\"stationPersonOptions\"\n                        @change=\"handleChangeOppersonName\"\n                        :disabled=\"process.stationMember.disabled\"\n                      />\n                    </a-form-item>\n                  </a-col>\n                </a-row>\n\n                <a-row :gutter=\"32\">\n                  <a-col v-show=\"true\" :span=\"12\">\n                    <a-form-item\n                      name=\"opstartTime\"\n                      label=\"操作开始时间\"\n                      :labelCol=\"{ class: 'detail-label-8' }\"\n                      :rules=\"[{ required: true, message: '请输入操作开始时间' }]\"\n                    >\n                      <a-date-picker\n                        v-model:value=\"formState.opstartTime\"\n                        show-time\n                        format=\"YYYY-MM-DD HH:mm\"\n                        value-format=\"YYYY-MM-DD HH:mm\"\n                        :style=\"`width: 100%`\"\n                        :disabled=\"process.stationMember.disabled\"\n                      />\n                    </a-form-item>\n                  </a-col>\n                  <a-col v-show=\"true\" :span=\"12\">\n                    <a-form-item\n                      name=\"opendTime\"\n                      label=\"操作完成时间\"\n                      :labelCol=\"{ class: 'detail-label-8' }\"\n                      :rules=\"[{ required: true, message: '请输入操作完成时间' }]\"\n                    >\n                      <a-date-picker\n                        v-model:value=\"formState.opendTime\"\n                        show-time\n                        format=\"YYYY-MM-DD HH:mm\"\n                        value-format=\"YYYY-MM-DD HH:mm\"\n                        :style=\"`width: 100%`\"\n                        :disabled=\"process.stationMember.disabled\"\n                      />\n                    </a-form-item>\n                  </a-col>\n                </a-row>\n\n                <UploadBox\n                  :width=\"800\"\n                  :height=\"550\"\n                  :maxCount=\"20\"\n                  :maxSize=\"100 * 1024 * 1024\"\n                  :application=\"`po`\"\n                  :module=\"`firstworkticket`\"\n                  :vmode=\"process.stationMember.disabled ? `view` : `box`\"\n                  :bizId=\"formState.bizFileId\"\n                />\n              </a-card>\n\n              <a-card v-if=\"process.manager.show\" title=\"合格性检查\" :bordered=\"false\">\n                <a-row :gutter=\"32\">\n                  <a-col v-show=\"true\" :span=\"12\">\n                    <a-form-item\n                      name=\"result\"\n                      label=\"检查结论\"\n                      :labelCol=\"{ class: 'detail-label-8' }\"\n                      :rules=\"[{ required: true, message: '请选择检查结论' }]\"\n                    >\n                      <DictSelectBox\n                        v-model:value=\"formState.result\"\n                        :type=\"`inspection_conclusion`\"\n                        :disabled=\"process.manager.disabled\"\n                      />\n                    </a-form-item>\n                  </a-col>\n                  <a-col v-show=\"true\" :span=\"12\">\n                    <a-form-item\n                      name=\"checkTime\"\n                      label=\"检查时间\"\n                      :labelCol=\"{ class: 'detail-label-8' }\"\n                      :rules=\"[{ required: true, message: '请输入检查时间' }]\"\n                    >\n                      <a-date-picker\n                        v-model:value=\"formState.checkTime\"\n                        show-time\n                        format=\"YYYY-MM-DD HH:mm\"\n                        value-format=\"YYYY-MM-DD HH:mm\"\n                        :style=\"`width: 100%`\"\n                        :disabled=\"process.manager.disabled\"\n                      />\n                    </a-form-item>\n                  </a-col>\n                </a-row>\n                <a-row :gutter=\"32\">\n                  <a-col v-show=\"true\" :span=\"24\">\n                    <a-form-item\n                      name=\"illustrate\"\n                      label=\"验证说明\"\n                      :labelCol=\"{ class: 'detail-label-8' }\"\n                      :rules=\"[{ required: false }]\"\n                    >\n                      <a-textarea\n                        v-model:value=\"formState.illustrate\"\n                        show-count\n                        :rows=\"4\"\n                        :maxlength=\"1000\"\n                        :disabled=\"process.manager.disabled\"\n                      />\n                    </a-form-item>\n                  </a-col>\n                </a-row>\n              </a-card>\n            </a-form>\n          </div>\n        </div>\n      </a-spin>\n\n      <!-- 弹窗页面 -->\n      <Dialog\n        v-model:visible=\"securityTypeModal\"\n        title=\"选择安全类型\"\n        @ok=\"handleSecurityType\"\n        @cancel=\"cancelSecurityType\"\n        :width=\"460\"\n        :height=\"200\"\n        smode=\"normal\"\n        overflowY=\"auto\"\n      >\n        <a-form ref=\"modalFormRef\" :model=\"modalFormState\">\n          <a-row :gutter=\"32\">\n            <a-col v-show=\"true\" :span=\"24\">\n              <a-form-item\n                name=\"securityType\"\n                label=\"安全类型\"\n                :labelCol=\"{ class: 'detail-label-8' }\"\n                :rules=\"[{ required: false }]\"\n              >\n                <DictSelectBox\n                  v-model:value=\"modalFormState.securityType\"\n                  :type=\"`security_type`\"\n                  @change=\"handleChangeSecurityType\"\n                />\n              </a-form-item>\n            </a-col>\n          </a-row>\n        </a-form>\n      </Dialog>\n    </div>\n  </PageWrapper>\n</template>\n<script lang=\"ts\" setup>\n  import { onMounted, reactive, ref, UnwrapRef, toRaw, computed } from 'vue';\n  import { IconEnum } from '@/enums/appEnum';\n  import { useUserStore } from '/@/store/modules/user';\n  import { useI18n } from '@/hooks/web/useI18n';\n  import { ValidateErrorEntity } from 'ant-design-vue/es/form/interface';\n  import type { SelectProps } from 'ant-design-vue';\n  import { FormInstance } from 'ant-design-vue';\n  import { SysMessage } from '@/hooks/web/useMessage';\n  import Dialog from '@/components/Framework/Modal/Dialog.vue';\n  import { BasicTable, useTable, TableAction, EditRecordRow } from '/@/components/Table';\n  import BillTitle from '/@/components/Framework/BillTitle/BillTitle.vue';\n  import DictSelectBox from '@/components/Framework/Combox/DictSelectBox.vue';\n  import UploadBox from '@/components/Framework/Combox/UploadBox.vue';\n  import WfApproveBox from '/@/components/Framework/WorkFlow/WfApproveBox.vue';\n  import { buildShortUUID } from '@/utils/uuid';\n  import {\n    taskColumns,\n    getTaskList,\n    getMeasureColumns,\n    getMeasureList,\n    matterColumns,\n    getMatterList,\n    recordColumns,\n    getRecordList,\n    saveData,\n    getData,\n    getOrg,\n    getStationPerson,\n    detailTableProps,\n  } from './firstWorkTicket.data';\n  import * as ProcessInstanceApi from '@/api/bpm/processInstance';\n  import { assign } from 'lodash-es';\n  import { trim } from 'xe-utils';\n  import { closeCurrentTab } from '@/utils/route';\n  import { MsgManager } from '@/message/MsgManager';\n  import { Memory } from '@/router/index';\n  import CustomPrint from '../components/CustomPrint.vue';\n\n  const { t } = useI18n();\n  const userStore = useUserStore();\n  const userInfo = toRaw(userStore.getUserInfo);\n  const query = Memory.getInstance().getQuery();\n\n  const formRef = ref<FormInstance>();\n  const formState: UnwrapRef<any> = reactive({ spinning: false, status: 0 });\n  const stationPersonOptions = ref<SelectProps['options']>([]) as any;\n  const billTitleOption = reactive<any>({ subject: '电气第一种工作票申请' });\n  const disabledInput = ref<boolean>(true);\n  const process = reactive({\n    // 站长/值长节点\n    head: {\n      show: false,\n      disabled: true,\n    },\n    // 站内成员节点\n    stationMember: {\n      show: false,\n      disabled: true,\n    },\n    // 经理节点\n    manager: {\n      show: false,\n      disabled: true,\n    },\n  });\n  const securityTypeModal = ref<boolean>(false);\n  const modalFormState: UnwrapRef<any> = reactive({});\n  const taskDataSource = ref<any[]>();\n  const measureDataSource = ref<any[]>();\n  const matterDataSource = ref<any[]>();\n  const recordDataSource = ref<any[]>();\n\n  const businessStatus = ref<string>('');\n  const listenMessage = ref(query.processInstanceId ? undefined : 'first-work-ticket');\n  const getApproveBoxMode = computed(() => {\n    return !process.stationMember.disabled || !process.manager.disabled ? 'before' : 'default';\n  });\n  const onBefore = (flowData, beforeOperationType) => {\n    const action = beforeOperationType.replace('before', '').toLowerCase();\n    onSubmit(flowData, action);\n  };\n  const validateProcessForm = (formData, flowData, action) => {\n    if (action !== 'agree') {\n      return true;\n    }\n    // 过程数据校验\n    if (!process.stationMember.disabled) {\n      if (!compareDate(formData.opendTime, formData.opstartTime)) {\n        error('请确认操作开始时间和完成时间。');\n        return false;\n      }\n    }\n    return true;\n  };\n\n  const onSave = () => {\n    doSave('save', 0);\n  };\n\n  const onSubmit = async (flowData, action) => {\n    const value = formRef.value;\n    if (!value) {\n      return;\n    }\n    // 校验表单数据\n    if (action === 'submit' || action === 'agree') {\n      let pass = true;\n      await value.validateFields().catch((errorObj: ValidateErrorEntity<any>) => {\n        console.log('onSubmit=》error', errorObj);\n        const errorFields = errorObj.errorFields;\n        // 表单滚动到第一个报错处(antd),解决form中scrollToFirstError配置无效\n        document\n          .querySelector('.ant-form-item-has-error')\n          ?.scrollIntoView({ behavior: 'smooth', block: 'center' });\n        if (errorFields && errorFields.length > 0) {\n          error(errorFields[0].errors[0]);\n          pass = false;\n          return;\n        }\n      });\n      if (!pass) {\n        return;\n      }\n      const formData = toRaw(formState) as any;\n      if (!compareDate(formData.endTime, formData.startTime)) {\n        error('请确认计划工作开始时间和结束时间。');\n        return;\n      }\n      if (!validateProcessForm(formData, flowData, action)) {\n        return;\n      }\n    }\n    const status = action ? null : 1;\n    doSave(action, status);\n  };\n\n  const doSave = async (action, status) => {\n    formState.spinning = true;\n    try {\n      await saveBiz(action, status);\n    } catch (error) {\n      formState.spinning = false;\n      console.log('error', error);\n    }\n  };\n\n  function validateDetails(status: number, data, validateFields) {\n    if (status === 0) {\n      return;\n    }\n    for (let i = 0; i < data.length; i++) {\n      const item = data[i];\n      for (const key in validateFields) {\n        if (!trim(item[key])) {\n          const errorMessage = validateFields[key] + '不能为空';\n          error(errorMessage);\n          throw new Error(errorMessage);\n        }\n      }\n    }\n  }\n\n  const saveBiz = async (action, status) => {\n    convertStr(['Id', 'Name']);\n    const formData = toRaw(formState) as any;\n    if (status != null && status > -1) {\n      formData.status = status;\n    }\n\n    // 工作任务\n    const taskData = getDataSource('Task');\n    validateDetails(status, taskData, { title: '工作地点及设备名称', content: '工作内容' });\n    formData.taskList = taskData;\n\n    // 安全措施\n    const measureData = Array<any>();\n    getDataSource('Measure').forEach((item) => {\n      const itemRaw = assign({}, item);\n      if (itemRaw.status == true) {\n        itemRaw.status = 1;\n      } else if (itemRaw.status == false) {\n        itemRaw.status = 0;\n      }\n      measureData.push(itemRaw);\n    });\n    validateDetails(status, measureData, { sefetyTypeText: '安全类型', measure: '安全措施' });\n    formData.measureList = measureData;\n\n    // 注意事项\n    const matterData = getDataSource('Matter');\n    validateDetails(status, matterData, {\n      matter: '工作地点保留带电部分或注意事项',\n      measure: '补充工作地点保留带电部分和安全措施',\n    });\n    formData.matterList = matterData;\n\n    // 任务详细记录\n    const recordData = getDataSource('Record');\n    if (status == 1) {\n      for (let i = 0; i < recordData.length; i++) {\n        const item = recordData[i];\n        if (!item.startTime) {\n          error('开工时间不能为空');\n          return;\n        }\n        if (!item.endTime) {\n          error('收工时间不能为空');\n          return;\n        }\n        if (!compareDate(item.endTime, item.startTime)) {\n          error('请确认每日任务详细记录开工时间和收工时间');\n          return;\n        }\n      }\n    }\n    formData.recordList = recordData;\n\n    await saveData(formData)\n      .then((res) => {\n        formState.id = res.result;\n        if (status == 1) {\n          disabledInput.value = true;\n        }\n        businessStatus.value = action;\n        formState.spinning = false;\n        if (status === 0 || status === 1) {\n          success('操作成功');\n        }\n        reloadBizTable(status);\n      })\n      .catch(() => {\n        formState.spinning = false;\n      });\n  };\n\n  const reloadBizTable = (status: number) => {\n    if (status === 0 || status === 1) {\n      setTimeout(() => {\n        if (status === 1) {\n          closeCurrentTab();\n        }\n        MsgManager.getInstance().sendMsg('first-work-ticket', {});\n      }, 200);\n    }\n  };\n\n  const compareDate = (d1, d2) => {\n    let date1 = new Date(Date.parse(d1));\n    let date2 = new Date(Date.parse(d2));\n    return date1 > date2;\n  };\n\n  const error = (content) => {\n    SysMessage.getInstance().error(content);\n    formState.spinning = false;\n  };\n\n  const success = (content) => {\n    SysMessage.getInstance().success(content);\n  };\n\n  function convertStr(suffixs: Array<string>) {\n    suffixs.forEach((suffix) => {\n      const fields = ref<Array<string>>(['teams', 'wteams', 'actPerson', 'upteams']);\n      fields.value.forEach((item) => {\n        const value = formState[item + suffix + 's'];\n        if (value && value.length > 0) {\n          formState[item + suffix] = value.join(',');\n        }\n      });\n    });\n  }\n\n  function convertArr(suffixs: Array<string>) {\n    suffixs.forEach((suffix) => {\n      const fields = ref<Array<string>>(['teams', 'wteams', 'actPerson', 'upteams']);\n      fields.value.forEach((item) => {\n        const value = formState[item + suffix];\n        if (value) {\n          formState[item + suffix + 's'] = value.split(',');\n        }\n      });\n    });\n  }\n\n  const initNodeAuth = (node: string) => {\n    const processVariable = { ...formState.processVariable };\n    const isCurrentNodeAuth =\n      processVariable.taskDefinitionKey === node &&\n      processVariable.assigneeId.indexOf(userInfo.userId) > -1 &&\n      processVariable.status === 1;\n    const type = node.replace('Node', '');\n    process[type].disabled = !isCurrentNodeAuth;\n  };\n\n  // 处理任务实列节点是否显示\n  const handleTaskInstanceNode = () => {\n    const taskInstances = formState.taskInstances;\n    if (taskInstances?.length) {\n      taskInstances.forEach((item) => {\n        if (item.taskDefinitionKey === 'headNode') {\n          process.head.show = true;\n        }\n        if (item.taskDefinitionKey === 'stationMemberNode') {\n          process.stationMember.show = true;\n        }\n        if (item.taskDefinitionKey === 'managerNode') {\n          process.manager.show = true;\n        }\n      });\n    }\n    // 通过、不通过、终止业务节点全部显示\n    if (formState.status === 2 || formState.status === 3 || formState.status === 5) {\n      process.head.show = true;\n      process.stationMember.show = true;\n      process.manager.show = true;\n    }\n  };\n\n  const isEdit = () => {\n    // 站长/值长节点\n    initNodeAuth('headNode');\n    // 站内成员节点\n    initNodeAuth('stationMemberNode');\n    // 经理节点\n    initNodeAuth('managerNode');\n    // 申请节点\n    const isApply =\n      (formState.status === 0 || formState.status === 6) &&\n      (!formState.personMemberId || formState.personMemberId.indexOf(userInfo.userId) > -1);\n    disabledInput.value = !isApply;\n    // 处理任务实列节点是否显示\n    handleTaskInstanceNode();\n  };\n\n  const getRecordable = async () => {\n    const res = await getData({ id: query.id });\n    if (res.result) {\n      assign(formState, res.result);\n      formState.status = Number(formState.status);\n      convertArr(['Id', 'Name']);\n      disabledInput.value = formState.status != 0;\n      formState.processInstanceId = formState.processVariable?.processInstanceId;\n      if (!formState.processInstanceId) {\n        formState.processInstanceId = query.processInstanceId;\n      }\n      const { billCode, fillinDate, personMemberName, deptName } = res.result;\n      Object.assign(billTitleOption, { billCode, fillinDate, personMemberName, deptName });\n\n      isEdit();\n    }\n  };\n\n  const getTaskData = async (paramObj) => {\n    const param = await getDetailQueryParam(paramObj);\n    const dataObj = await getTaskList(param);\n    return dataObj.result;\n  };\n\n  const getMeasureData = async (paramObj) => {\n    const param = await getDetailQueryParam(paramObj);\n    const dataObj = await getMeasureList(param);\n    if (dataObj.result) {\n      dataObj.result.forEach((item) => {\n        if (item.status == 1) {\n          item.status = true;\n        } else if (item.status == 0) {\n          item.status = false;\n        }\n      });\n    }\n    return dataObj.result;\n  };\n\n  const getMatterData = async (paramObj) => {\n    const param = await getDetailQueryParam(paramObj);\n    const dataObj = await getMatterList(param);\n    return dataObj.result;\n  };\n\n  const getRecordData = async (paramObj) => {\n    const param = await getDetailQueryParam(paramObj);\n    const dataObj = await getRecordList(param);\n    return dataObj.result;\n  };\n\n  const getDetailQueryParam = async (paramObj) => {\n    const id = await getBizParamId();\n    return { ticketId: paramObj.ticketId ? paramObj.ticketId : id };\n  };\n\n  const [registerTaskTable, { setProps: setTaskProps, getDataSource: getTaskDataSource }] =\n    useTable(\n      assign(\n        {\n          dataSource: taskDataSource,\n          columns: taskColumns,\n        },\n        detailTableProps,\n      ),\n    );\n\n  const [\n    registerMeasureTable,\n    {\n      setProps: setMeasureProps,\n      getDataSource: getMeasureDataSource,\n      getSelectRows: getMeasureSelectRows,\n    },\n  ] = useTable(\n    assign(\n      {\n        dataSource: measureDataSource,\n        rowSelection: {\n          type: 'radio',\n        },\n      },\n      detailTableProps,\n    ),\n  );\n\n  const [registerMatterTable, { setProps: setMatterProps, getDataSource: getMatterDataSource }] =\n    useTable(\n      assign(\n        {\n          dataSource: matterDataSource,\n          columns: matterColumns,\n        },\n        detailTableProps,\n      ),\n    );\n\n  const [registerRecordTable, { setProps: setRecordProps, getDataSource: getRecordDataSource }] =\n    useTable(\n      assign(\n        {\n          dataSource: recordDataSource,\n          columns: recordColumns,\n        },\n        detailTableProps,\n      ),\n    );\n\n  const initTableData = async () => {\n    taskDataSource.value = await getTaskData({});\n    measureDataSource.value = await getMeasureData({});\n    matterDataSource.value = await getMatterData({});\n    recordDataSource.value = await getRecordData({});\n  };\n\n  function handleAddItem(type: string) {\n    const addRow: EditRecordRow = {};\n    pushItemRow(addRow, type);\n  }\n\n  function handleAddMeasure() {\n    securityTypeModal.value = true;\n  }\n\n  function handleAddMeasureDetail() {\n    const selectRows = getMeasureSelectRows();\n    if (selectRows.length == 0) {\n      error('请选择一行数据');\n      return;\n    }\n    const data = getDataSource('Measure');\n    let index = 0;\n    const addRows = Array<any>();\n    for (let i = 0; i < data.length; ++i) {\n      const item = data[i];\n      if (item.key === selectRows[0].key) {\n        addRows.push(\n          addRowOption({\n            sefetyType: item.sefetyType,\n            sefetyTypeText: item.sefetyTypeText,\n          }),\n        );\n        index = i + 1;\n        break;\n      }\n    }\n    data.splice(index, 0, addRows[0]);\n  }\n\n  function handleChangeSecurityType(value: string, node) {\n    modalFormState.securityTypeText = node.label;\n  }\n\n  function cancelSecurityType() {\n    securityTypeModal.value = false;\n  }\n\n  function handleSecurityType() {\n    if (!modalFormState.securityType) {\n      error('请选择安全类型');\n      return;\n    }\n    const data = getDataSource('Measure');\n    data.forEach((item) => {\n      if (item.sefetyType === modalFormState.securityType) {\n        const existMessage = '该安全类型已存在，请添加明细';\n        error(existMessage);\n        throw new Error(existMessage);\n      }\n    });\n    const addRow: EditRecordRow = {\n      sefetyType: modalFormState.securityType,\n      sefetyTypeText: modalFormState.securityTypeText,\n    };\n    pushItemRow(addRow, 'Measure');\n    securityTypeModal.value = false;\n  }\n\n  function getDataSource(type) {\n    if (type === 'Task') {\n      return getTaskDataSource();\n    }\n    if (type === 'Measure') {\n      return getMeasureDataSource();\n    }\n    if (type === 'Matter') {\n      return process.stationMember.disabled\n        ? (matterDataSource.value as any)\n        : getMatterDataSource();\n    }\n    if (type === 'Record') {\n      return process.stationMember.disabled\n        ? (recordDataSource.value as any)\n        : getRecordDataSource();\n    }\n    return [];\n  }\n\n  function pushItemRow(addRow: EditRecordRow, type: string) {\n    const data = getDataSource(type);\n    data.push(addRowOption(addRow));\n  }\n\n  function addRowOption(addRow: EditRecordRow) {\n    addRow.editable = true;\n    addRow.isNew = true;\n    addRow.key = `${Date.now()}`;\n    return addRow;\n  }\n\n  function handleDeleteItem(record, type) {\n    const data = getDataSource(type);\n    let index = data.indexOf(record);\n    if (index !== -1) {\n      data.splice(index, 1);\n    }\n  }\n\n  function handleChangeTeamsName(value: string, option) {\n    formState.teamsNames = option.map((item) => item.label);\n  }\n\n  function handleChangeLicensorName(value: string, option) {\n    formState.licensorName = option.label;\n  }\n\n  function handleChangeWteamsName(value: string, option) {\n    formState.wteamsNames = option.map((item) => item.label);\n  }\n\n  function handleChangeActPersonName(value: string, option) {\n    formState.actPersonNames = option.map((item) => item.label);\n  }\n\n  function handleChangeUpteamsName(value: string, option) {\n    formState.upteamsNames = option.map((item) => item.label);\n  }\n\n  function handleChangeOperatorName(value: string, option) {\n    formState.operatorName = option.label;\n  }\n\n  function handleChangeTutorName(value: string, option) {\n    formState.tutorName = option.label;\n  }\n\n  function handleChangeOppersonName(value: string, option) {\n    formState.oppersonName = option.label;\n  }\n\n  function initStationPersonOptions() {\n    getStationPerson('?stationId=' + formState.stationId).then((res) => {\n      if (res.result && res.result.length > 0) {\n        res.result.forEach((item) => {\n          stationPersonOptions.value.push({ value: item.userId, label: item.name });\n        });\n      }\n    });\n  }\n\n  const initUserOrg = async () => {\n    const res = await getOrg({});\n    if (res.result && res.result.user) {\n      formState.headId = res.result.user.id;\n      formState.headName = res.result.user.name;\n    }\n  };\n\n  const getBizParamId = async () => {\n    let id = query.id;\n    if (!id && query.processInstanceId) {\n      const processInstance = (await ProcessInstanceApi.getProcessInstance(\n        query.processInstanceId as string,\n      )) as any;\n      const businessKey = processInstance.businessKey;\n      query.id = businessKey;\n      id = businessKey;\n    }\n    return id;\n  };\n\n  const getActionColumn = (ifShow) => {\n    return {\n      width: 80,\n      title: '操作',\n      dataIndex: 'action',\n      ifShow: ifShow,\n    };\n  };\n\n  const setTableProps = () => {\n    setTaskProps({\n      actionColumn: getActionColumn(!disabledInput.value),\n    });\n\n    setMeasureProps({\n      columns: getMeasureColumns(process),\n      actionColumn: getActionColumn(!disabledInput.value),\n    });\n\n    if (process.stationMember.show) {\n      setMatterProps({\n        actionColumn: getActionColumn(!process.stationMember.disabled),\n      });\n\n      setRecordProps({\n        actionColumn: getActionColumn(!process.stationMember.disabled),\n      });\n    }\n  };\n\n  onMounted(async () => {\n    query.id = await getBizParamId();\n    await getRecordable();\n    if (!query.id) {\n      assign(formState, query);\n      disabledInput.value = false;\n      formState.bizFileId = buildShortUUID();\n      await initUserOrg();\n    }\n    setTableProps();\n    initStationPersonOptions();\n    initTableData();\n  });\n</script>\n<style lang=\"less\" scoped>\n  @import '/@/design/biz/bizForm.less';\n</style>\n"],"names":["t","useI18n","userStore","useUserStore","userInfo","toRaw","query","Memory","formRef","ref","formState","reactive","stationPersonOptions","billTitleOption","disabledInput","process","securityTypeModal","modalFormState","taskDataSource","measureDataSource","matterDataSource","recordDataSource","businessStatus","listenMessage","getApproveBoxMode","computed","onBefore","flowData","beforeOperationType","action","onSubmit","validateProcessForm","formData","compareDate","error","onSave","doSave","__async","value","pass","errorObj","errorFields","_a","status","saveBiz","validateDetails","data","validateFields","i","item","key","trim","errorMessage","convertStr","taskData","getDataSource","measureData","itemRaw","assign","matterData","recordData","saveData","res","success","reloadBizTable","closeCurrentTab","MsgManager","d1","d2","date1","date2","content","SysMessage","suffixs","suffix","convertArr","initNodeAuth","node","processVariable","__spreadValues","isCurrentNodeAuth","type","handleTaskInstanceNode","taskInstances","isEdit","isApply","getRecordable","getData","billCode","fillinDate","personMemberName","deptName","getTaskData","paramObj","param","getDetailQueryParam","getTaskList","getMeasureData","dataObj","getMeasureList","getMatterData","getMatterList","getRecordData","getRecordList","id","getBizParamId","registerTaskTable","setTaskProps","getTaskDataSource","useTable","taskColumns","detailTableProps","registerMeasureTable","setMeasureProps","getMeasureDataSource","getMeasureSelectRows","registerMatterTable","setMatterProps","getMatterDataSource","matterColumns","registerRecordTable","setRecordProps","getRecordDataSource","recordColumns","initTableData","handleAddItem","pushItemRow","handleAddMeasure","handleAddMeasureDetail","selectRows","index","addRows","addRowOption","handleChangeSecurityType","cancelSecurityType","handleSecurityType","existMessage","addRow","handleDeleteItem","record","handleChangeTeamsName","option","handleChangeLicensorName","handleChangeWteamsName","handleChangeActPersonName","handleChangeUpteamsName","handleChangeOperatorName","handleChangeTutorName","handleChangeOppersonName","initStationPersonOptions","getStationPerson","initUserOrg","getOrg","businessKey","ProcessInstanceApi.getProcessInstance","getActionColumn","ifShow","setTableProps","getMeasureColumns","onMounted","buildShortUUID"],"mappings":"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"}