var d=(b,y,c)=>new Promise((a,o)=>{var h=i=>{try{n(c.next(i))}catch(m){o(m)}},g=i=>{try{n(c.throw(i))}catch(m){o(m)}},n=i=>i.done?a(i.value):Promise.resolve(i.value).then(h,g);n((c=c.apply(b,y)).next())});import{d as M,r as P,k as r,w as x,o as G,al as K,Z as j,_ as H,$ as l,f as s,aa as D,v as V,A as C,a5 as w,a6 as S}from"./vue-71d1abb3.js";import{S as T}from"./SubtitleBar-001f5f49.js";import{I as B}from"./IndicatorGroup-e2cd29a8.js";import{E as J}from"./EchartPillarChart-9aa5a33e.js";import{_ as L}from"./EchartLineBarChart.vue_vue_type_style_index_0_lang-90edad95.js";import{_ as O}from"./EchartStackBarChart.vue_vue_type_style_index_0_lang-59d702ec.js";import{d as Q,e as W,f as X}from"./data-6d85554f.js";import{h as f}from"./utils-5bbca5df.js";import{a as Y}from"./index-8c718dee.js";import{am as U,_ as ee}from"./index.js";import{a as Z}from"./assign-37f1c13d.js";import"./index-d8a2358f.js";import"./install-58e0bd81.js";import"./NoData-1ab5cc7b.js";import"./antd-15ac76ed.js";const ae={class:"left-section section-box"},te={class:"section-bg"},le={style:{width:"100%",height:"2rem"}},se={style:{"margin-left":"0.16rem",transform:"scale(0.85)","transform-origin":"0 0"}},oe={class:"middle-section section-box"},ie={class:"section-bg"},ne={style:{width:"100%",height:"2rem"}},re={style:{"margin-left":"0.16rem",transform:"scale(0.85)","transform-origin":"0 0"}},ce={class:"right-section section-box"},ue={class:"section-bg"},de={style:{width:"100%",height:"2rem"}},me={style:{"margin-left":"0.16rem",transform:"scale(0.85)","transform-origin":"0 0"}},ve=M({__name:"BottomContent",props:{searchInfoByTime:{},tabStatus:{}},setup(b,{expose:y}){const c=b,a=P({selectVehicleValue:"station",selectEvalValue:"station",selectTrainingValue:"station"}),o=r([]),h=r(U());x(()=>c.searchInfoByTime,e=>{Z(a,e),i(),I(),N()}),G(()=>d(this,null,function*(){(yield Y({dictType:"cockpit_three_dimension"})).result.forEach(t=>{o.value.push({value:t.value,label:t.label})}),Z(a,c.searchInfoByTime)}));const g=r({}),n=r({barData:[],categories:[],units:["(次)"],colors:[["#078C5D","#68E4B8"],"#60C0C0","#60A0A0"],chartName:["车辆检查"]}),i=()=>d(this,null,function*(){a.dimension=a.selectVehicleValue;let e=yield Q(a);e.result&&(n.value.barData=e.result.barData,n.value.categories=e.result.categories,g.value=[{value:e.result.insurance,label:"保险即将到期(辆)"},{value:e.result.yearCheck,label:"即将年检(辆)"},{value:e.result.total,label:"车辆检查(次)"}])}),m=e=>{a.selectVehicleValue=e,i()},E=r({}),p=r({categories:[],barData:[[],[],[],[]],colors:[["#1C5C99","#4CAFF9"],["#105D3A","#55CFD0"],"#f39c12","#d81b60"],barNames:["电量","安全","运维","综合"]}),I=()=>d(this,null,function*(){a.dimension=a.selectEvalValue;let e=yield W(a);e.result&&(p.value.barData=e.result.barData,p.value.categories=e.result.categories,E.value=[{value:e.result.technology,label:"电量(分)"},{value:e.result.safety,label:"安全(分)"},{value:e.result.operation,label:"运维(分)"},{value:e.result.comprehensive,label:"综合(分)"}])}),A=e=>{a.selectEvalValue=e,I()},k=r({}),v=r({barData:[],categories:[],units:[["(次)"],["(人)"]],chartSeriesName:[["培训次数","参与人数"]]}),N=()=>d(this,null,function*(){a.dimension=a.selectTrainingValue;let e=yield X(a);e.result&&(v.value.barData=e.result.barData,v.value.categories=e.result.categories,k.value=[{value:e.result.total,label:"培训次数(次)"},{value:e.result.actualNumber,label:"参与人数(人)"}])}),$=e=>{a.selectTrainingValue=e,N()};function q(e){f("/bi/integrated/vehicle",{selectType:a.selectVehicleValue,id:e.data.id})}const R=(e,t)=>d(this,null,function*(){e==="vehicle"?(t===0||t===1||t===2)&&f("/bi/integrated/vehicle",{}):e==="training"&&f("/bi/integrated/trainingStatistics",{})});function F(e){f("/bi/integrated/trainingStatistics",{selectType:a.selectTrainingValue,id:e.data.id,name:e.data.fullName})}return y({handleUpdate:()=>{h.value=U()}}),(e,t)=>{const _=K("a-select");return j(),H("div",{class:"bottom-content",key:h.value},[l("div",ae,[l("div",te,[s(T,{subtitle:"车辆统计"},{default:D(()=>[V(s(_,{ref:"select",value:a.selectVehicleValue,"onUpdate:value":t[0]||(t[0]=u=>a.selectVehicleValue=u),options:o.value,style:{width:"1.2rem"},onChange:m},null,8,["value","options"]),[[C,o.value.length>1]])]),_:1}),s(B,{data:g.value,class:w(["indicator-group-layout",e.tabStatus==="on"?"":"fix-indicator-group-padding"]),style:S(e.tabStatus==="on"?"margin-top: -0.15rem":"margin-top: -0.2rem"),onClickItem:t[1]||(t[1]=(u,z)=>R("vehicle",z))},null,8,["data","style","class"]),l("div",le,[l("div",se,[s(J,{data:n.value,colors:n.value.colors,width:"36.14vw",height:e.tabStatus==="on"?"34.8vh":"39vh",name:n.value.chartName,onClickItem:q,dataZoomDisabled:!1,dataZoomDefaultValueRange:[0,5]},null,8,["data","colors","height","name"])])])])]),l("div",oe,[l("div",ie,[s(T,{subtitle:"考核评价"},{default:D(()=>[V(s(_,{ref:"select",value:a.selectEvalValue,"onUpdate:value":t[2]||(t[2]=u=>a.selectEvalValue=u),options:o.value,style:{width:"1.2rem"},onChange:A},null,8,["value","options"]),[[C,o.value.length>1]])]),_:1}),s(B,{data:E.value,style:S(e.tabStatus==="on"?"margin-top: -0.15rem":"margin-top: -0.2rem"),class:w(["indicator-group-layout2",e.tabStatus==="on"?"":"fix-indicator-group-padding"])},null,8,["data","style","class"]),l("div",ne,[l("div",re,[s(O,{data:p.value,colors:p.value.colors,ybgcolor:"#01B7D730",rotate:25,width:"36.14vw",height:e.tabStatus==="on"?"34.8vh":"39vh",dataZoomDisabled:!1,dataZoomDefaultValueRange:[0,5]},null,8,["data","colors","height"])])])])]),l("div",ce,[l("div",ue,[s(T,{subtitle:"培训统计"},{default:D(()=>[V(s(_,{ref:"select",value:a.selectTrainingValue,"onUpdate:value":t[3]||(t[3]=u=>a.selectTrainingValue=u),options:o.value,style:{width:"1.2rem"},onChange:$},null,8,["value","options"]),[[C,o.value.length>1]])]),_:1}),s(B,{data:k.value,style:S(e.tabStatus==="on"?"margin-top: -0.15rem":"margin-top: -0.2rem"),class:w(["indicator-group-layout3",e.tabStatus==="on"?"":"fix-indicator-group-padding"]),onClickItem:t[4]||(t[4]=u=>R("training"))},null,8,["data","style","class"]),l("div",de,[l("div",me,[s(L,{data:v.value,width:"36.14vw",height:e.tabStatus==="on"?"34.5vh":"39vh",category:v.value.categories,ybgcolor:"#01B7D730",name:v.value.chartSeriesName,onClickItem:F,dataZoomDisabled:!1,dataZoomDefaultValueRange:[0,5]},null,8,["data","height","category","name"])])])])])])}}});const Ne=ee(ve,[["__scopeId","data-v-d5aec997"]]);export{Ne as default};
//# sourceMappingURL=BottomContent-865b0acc.js.map
