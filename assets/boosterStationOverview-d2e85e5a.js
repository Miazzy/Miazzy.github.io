var c=(g,i,y)=>new Promise((R,T)=>{var f=p=>{try{d(y.next(p))}catch(x){T(x)}},_=p=>{try{d(y.throw(p))}catch(x){T(x)}},d=p=>p.done?R(p.value):Promise.resolve(p.value).then(f,_);d((y=y.apply(g,i)).next())});import{ad as S,I as se,_ as oe}from"./index.js";import ie from"./deviceItem-f8cae721.js";import le from"./realTimeInfo-0c08b872.js";import ne from"./deviceWarning-620b5d81.js";import ce from"./dataDetail-62a9c747.js";import re from"./dataComparison-458260e7.js";import{g as ue,c as ve,d as de,n as pe,e as me,f as ye}from"./monitorApi-44e70004.js";import{aC as fe,aD as _e,aE as w,aA as Y,ah as z}from"./antd-15ac76ed.js";import{d as he,k as t,r as be,o as ge,al as Te,Z as r,_ as m,$ as v,f as s,u,aa as o,E as G,F as O,ae as W,a9 as H,ad as $,ac as Z,aG as De,aH as xe}from"./vue-71d1abb3.js";import"./BasicTable-0434a334.js";import"./useForm-dea3ed18.js";import"./BasicForm.vue_vue_type_style_index_0_lang-1ba7be9e.js";import"./index-f4fc48e6.js";import"./index-316f6ffb.js";import"./useWindowSizeFn-13b1b8a2.js";import"./useTabs-2b062e85.js";import"./download-03e71dd5.js";import"./index-5d49b7a7.js";import"./SearchBox-22bb02d6.js";import"./UploadBox-636ecf02.js";import"./Dialog-0a006d82.js";import"./DictSelectBox.vue_vue_type_script_setup_true_lang-e03e9fe8.js";import"./OrganDialog-dd1023ce.js";import"./uniqBy-92d3bc7f.js";import"./index-085d06c7.js";import"./sortable.esm-4ae27e0b.js";import"./dict-c04c0dd8.js";import"./useTable-109483b3.js";import"./EchartLineChart.vue_vue_type_style_index_0_lang-c85cdf3b.js";import"./install-58e0bd81.js";import"./helper-474c7a04.js";import"./api-32c7505d.js";import"./index-74ac3212.js";import"./Export2Excel-389a8fc9.js";const E=g=>(De("data-v-acf1b7d0"),g=g(),xe(),g),ke={class:"booster-station-overview"},we={class:"area-box box-style"},Ie={class:"area-hearder-box"},Ce={class:"station-selector-box"},Se={class:"refresh-box"},Ee={key:0,class:"device-box box-style"},Re={class:"tab-bar-item"},Ne={key:0,class:"tab-tag"},Le={class:"device-tab-content"},Be={class:"device-list-box"},Oe={key:1,class:"data-info-box box-style",style:{position:"relative"}},Ae={key:0,class:"data-info-box box-style"},Fe=E(()=>v("div",{class:"tab-bar-item"}," 实时信息 ",-1)),Ke=E(()=>v("div",{class:"tab-bar-item"}," 设备告警 ",-1)),Pe=E(()=>v("div",{class:"tab-bar-item"}," 数据明细 ",-1)),Me=E(()=>v("div",{class:"tab-bar-item"}," 数据对比 ",-1)),Ue={key:1,class:"data-info-box box-style",style:{position:"relative"}},A="BOOSTER_REFRESH",Ve=he({__name:"boosterStationOverview",setup(g){const i=t(),y=t([]),R=t(),T=t(),f=t(),_=t(),d=t("1"),p=(e,a)=>c(this,null,function*(){i.value=e,b.value=null,yield F(),n.value=null,I()}),x=(e,a)=>a.name.indexOf(e)>=0,j=()=>c(this,null,function*(){let e=yield ue();e!=null&&e.length&&(y.value=e,i.value||(i.value=y.value[0].id,yield F(),I()))}),h=t([]),b=t(null),F=()=>c(this,null,function*(){let e=yield ve({stationId:i.value,deviceCategory:"BoostDev"}),a=yield de({stationId:i.value,deviceCategory:"BoostDev"});e!=null&&(h.value=e,b.value||(b.value=h.value[0].deviceType),a!=null&&h.value.forEach(D=>{D.alarmNum=a[D.deviceType]}))}),n=t(null),N=t([]),I=()=>c(this,null,function*(){if(!b.value)return;let e=yield pe({stationId:i.value,deviceType:b.value});try{e!=null&&(N.value=e.dataList,R.value=e.alarmNum,k.value||(n.value=e.dataList[0]),n.value||(n.value=e.dataList[0]),K(n.value))}catch(a){}}),L=t(!1),q=e=>c(this,null,function*(){L.value=!0,yield K(e)}),K=e=>c(this,null,function*(){if(n.value=e,L.value&&(d.value="1",L.value=!1,f.value&&f.value.clearTarget(),_.value&&_.value.clearTarget()),yield J(n.value),yield Q(n.value),k.value)switch(d.value){case"2":T.value&&T.value.reloadData(void 0,!1);break;case"3":f.value&&f.value.loadChartData();break;case"4":_.value&&_.value.loadBaseInfo()}}),C=t([]),J=e=>c(this,null,function*(){let a=yield me({stationId:i.value,esn:e.esn,dataType:1});C.value=a}),P=t([]),M=t(""),Q=e=>c(this,null,function*(){let a=yield ye({stationId:i.value,esn:e.esn,dataType:1});P.value=a.dataList,M.value=a.showTimeStr}),k=t(!0),U=()=>c(this,null,function*(){try{yield I()}catch(e){}}),X=e=>{var a;try{(a=e==null?void 0:e.target)!=null&&a.checked?S.getInstance().pushListTask(A,U,5e3):S.getInstance().removeListTask(A)}catch(D){}},ee=()=>c(this,null,function*(){I(),d.value="1"}),ae=be({right:[],hasStatus:!1});return ge(()=>{j(),S.getInstance().start(),k.value&&S.getInstance().pushListTask(A,U,5e3)}),(e,a)=>{var V;const D=Te("a-empty");return r(),m("div",ke,[v("div",we,[v("div",Ie,[v("div",Ce,[s(se,{class:"icon-left",icon:"mdi:house-city",color:"#1890FF",size:15}),s(u(fe),{style:{width:"200px"},value:i.value,"onUpdate:value":a[0]||(a[0]=l=>i.value=l),"show-search":"",options:y.value,"filter-option":x,fieldNames:{value:"id",label:"name"},onChange:p},null,8,["value","options"])]),v("div",Se,[s(u(_e),{checked:k.value,"onUpdate:checked":a[1]||(a[1]=l=>k.value=l),onChange:X},{default:o(()=>[G("自动刷新")]),_:1},8,["checked"])])])]),h.value.length>0?(r(),m("div",Ee,[s(u(Y),{class:"tab-style",activeKey:b.value,"onUpdate:activeKey":a[2]||(a[2]=l=>b.value=l),onChange:ee,size:"large"},{default:o(()=>[(r(!0),m(O,null,W(h.value,(l,Ye)=>(r(),H(u(w),{key:l.deviceType},{tab:o(()=>[v("div",Re,[G($(l.typeName)+" ",1),l.alarmNum>0?(r(),m("span",Ne,$(l.alarmNum),1)):Z("",!0)])]),default:o(()=>[v("div",Le,[v("div",Be,[(r(!0),m(O,null,W(N.value,(B,te)=>(r(),H(ie,{class:"device-item-layout",key:te,options:ae,data:B,deviceType:B.deviceType,onClick:ze=>q(B)},null,8,["options","data","deviceType","onClick"]))),128))])])]),_:2},1024))),128))]),_:1},8,["activeKey"])])):(r(),m("div",Oe,[s(D,{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},image:u(z).PRESENTED_IMAGE_SIMPLE},null,8,["image"])])),h.value.length>0?(r(),m(O,{key:2},[h.value.length>0&&((V=N.value)==null?void 0:V.length)>0?(r(),m("div",Ae,[s(u(Y),{class:"tab-style",activeKey:d.value,"onUpdate:activeKey":a[3]||(a[3]=l=>d.value=l),size:"large"},{default:o(()=>[s(u(w),{key:"1"},{tab:o(()=>[Fe]),default:o(()=>[s(le,{ycData:C.value,yxData:P.value,yxTime:M.value},null,8,["ycData","yxData","yxTime"])]),_:1}),s(u(w),{key:"2"},{tab:o(()=>[Ke]),default:o(()=>[s(ne,{ref_key:"warningRef",ref:T,esn:n.value.esn},null,8,["esn"])]),_:1}),s(u(w),{key:"3"},{tab:o(()=>[Pe]),default:o(()=>[s(ce,{ref_key:"dataDetailRef",ref:f,tableColumns:e.detailColumns,indexType:C.value,esn:n.value.esn,echartWidth:1900},null,8,["tableColumns","indexType","esn"])]),_:1}),s(u(w),{key:"4"},{tab:o(()=>[Me]),default:o(()=>[s(re,{ref_key:"comparisonRef",ref:_,tableColumns:e.detailColumns,indexType:C.value,esn:n.value.esn,echartWidth:1900},null,8,["tableColumns","indexType","esn"])]),_:1})]),_:1},8,["activeKey"])])):(r(),m("div",Ue,[s(D,{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},image:u(z).PRESENTED_IMAGE_SIMPLE},null,8,["image"])]))],64)):Z("",!0)])}}});const wa=oe(Ve,[["__scopeId","data-v-acf1b7d0"]]);export{wa as default};
//# sourceMappingURL=boosterStationOverview-d2e85e5a.js.map
