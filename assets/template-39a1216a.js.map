{"version":3,"file":"template-39a1216a.js","sources":["../../src/views/po/integrated/assessmentevaluation/template/template.ts"],"sourcesContent":["import { defHttp } from '/@/utils/http/axios';\nimport { BasicColumn, useRender } from '/@/components/Table';\n\nimport { useDictStoreWithOut } from '@/store/modules/dict';\n\nconst dictStore = useDictStoreWithOut();\nenum Api {\n  templatePage = '/po/evaluation-template/page',\n  saveTemplate = '/po/evaluation-template/create',\n  deleteTemplate = '/po/evaluation-index/delete',\n  getTemplateById = '/po/evaluation-template/get',\n  detailList = '/po/evaluation-template-dtl/list',\n  proportionList = '/po/score-proportion/list',\n  indexList = '/po/evaluation-index/list',\n  tmplateHisList = '/po/evaluation-template/hisList',\n}\n\nexport const searchFormSchema: FormSchema[] = [\n  {\n    field: 'billCode',\n    component: 'Input',\n    label: '单据编号',\n    required: false,\n  },\n  {\n    field: 'subject',\n    component: 'Input',\n    label: '主题',\n    colProps: {\n      span: 7,\n    },\n    required: false,\n  },\n  {\n    label: '状态',\n    field: 'status',\n    component: 'DictSelectBox',\n    componentProps: {\n      type: 'bpm_process_instance_result',\n    },\n    colProps: {\n      span: 7,\n    },\n  },\n];\n\nasync function getDic(type: string) {\n  const arr: any = [\n    {\n      dictType: '',\n      value: '',\n      label: '',\n      colorType: '',\n      cssClass: '',\n    },\n  ];\n  const map = await dictStore.fetchBackendData(type, {\n    type: type,\n  });\n  return arr.concat(map);\n}\n\n// 列表表头\nexport const columns: BasicColumn[] = [\n  {\n    title: '单据编号',\n    dataIndex: 'billCode',\n    align: 'center',\n    resizable: true,\n    width: 200,\n  },\n  {\n    title: '生效月份',\n    dataIndex: 'effectiveMonth',\n    width: 150,\n    sorter: true,\n    resizable: true,\n  },\n  {\n    title: '主题',\n    dataIndex: 'subject',\n    align: 'center',\n    resizable: true,\n    width: 500,\n  },\n  {\n    title: '创建人',\n    dataIndex: 'personMemberName',\n    align: 'center',\n    width: 150,\n    resizable: true,\n  },\n  {\n    title: '创建时间',\n    dataIndex: 'fillinDate',\n    align: 'center',\n    width: 200,\n    sorter: true,\n    resizable: true,\n  },\n  {\n    title: '审批状态',\n    dataIndex: 'status',\n    align: 'center',\n    resizable: true,\n    fixed: 'right',\n    customRender: ({ text, record }) => {\n      return useRender.renderFlowStatus(text, record.statusText);\n    },\n  },\n];\n// 模板明细表头\nexport function getDetailColumns() {\n  const dataColumns = [\n    {\n      title: '指标类别',\n      dataIndex: 'indexKindText',\n      align: 'center',\n      width: 80,\n    },\n    {\n      title: '指标编码',\n      dataIndex: 'indexCode',\n      align: 'center',\n      width: 100,\n    },\n    {\n      title: '指标名称',\n      dataIndex: 'indexName',\n      align: 'center',\n      width: 100,\n    },\n    {\n      title: '评价方式',\n      align: 'center',\n      dataIndex: 'evaluationMethodText',\n      width: 80,\n    },\n    {\n      title: '考核目标',\n      dataIndex: 'assessTarget',\n      align: 'left',\n      width: 150,\n    },\n    {\n      title: '评分规则',\n      dataIndex: 'scoreRuleDesc',\n      align: 'left',\n      width: 200,\n    },\n    {\n      title: '分值',\n      dataIndex: 'score',\n      align: 'center',\n      width: 60,\n    },\n    {\n      title: '附加分',\n      dataIndex: 'allowOverrunText',\n      align: 'center',\n      width: 60,\n    },\n    {\n      title: '附加分分值',\n      dataIndex: 'maxAdditionalScore',\n      align: 'center',\n      width: 80,\n    },\n  ];\n  return dataColumns;\n}\n\n// 指标选择弹窗表头\nexport function getIndexColumns() {\n  const dataColumns = [\n    {\n      title: '指标类别',\n      dataIndex: 'kindText',\n      align: 'center',\n      width: 80,\n    },\n    {\n      title: '指标编码',\n      dataIndex: 'code',\n      align: 'center',\n      width: 100,\n    },\n    {\n      title: '指标名称',\n      dataIndex: 'name',\n      align: 'center',\n      width: 100,\n    },\n    {\n      title: '评价方式',\n      align: 'center',\n      dataIndex: 'evaluationMethodText',\n      width: 80,\n    },\n    {\n      title: '考核目标',\n      dataIndex: 'assessTarget',\n      align: 'left',\n      width: 150,\n    },\n    {\n      title: '评分规则',\n      dataIndex: 'scoreRuleDesc',\n      align: 'left',\n      width: 200,\n    },\n  ];\n  return dataColumns;\n}\n\n// 模板占比表头\nexport function getproportionColumns() {\n  const dataColumns = [\n    {\n      title: '指标类别',\n      dataIndex: 'kindName',\n      align: 'center',\n      width: 180,\n    },\n    {\n      title: '分值',\n      dataIndex: 'presetScore',\n      align: 'center',\n      width: 180,\n    },\n    {\n      title: '占比',\n      dataIndex: 'proportion',\n      align: 'left',\n    },\n  ];\n  return dataColumns;\n}\n\n// 历史模板表头\nexport function getHisColumns() {\n  const dataColumns = [\n    {\n      title: '生效日期',\n      dataIndex: 'effectiveMonth',\n      align: 'center',\n      width: 120,\n    },\n    {\n      title: '主题',\n      dataIndex: 'subject',\n      align: 'center',\n      width: 200,\n    },\n    {\n      title: '创建人',\n      dataIndex: 'personMemberName',\n      align: 'center',\n      width: 100,\n    },\n    {\n      title: '创建时间',\n      align: 'center',\n      dataIndex: 'fillinDate',\n      width: 80,\n    },\n    {\n      title: '流程状态',\n      dataIndex: 'status',\n      align: 'left',\n      width: 150,\n    },\n  ];\n  return dataColumns;\n}\n\n// 列表数据\nexport const getDataList = (params) =>\n  defHttp.get(\n    {\n      url: Api.templatePage,\n      params,\n    },\n    { isOnlyResult: true },\n  );\n\n// 保存\nexport const saveTemplate = (params) =>\n  defHttp.post(\n    {\n      url: Api.saveTemplate,\n      params,\n    },\n    {},\n  );\n\n// 删除\nexport const deleteTemplate = (id) =>\n  defHttp.delete(\n    {\n      url: Api.deleteTemplate + '?id=' + id,\n    },\n    {},\n  );\n\n// 加载模板\nexport const getTemplate = (id) =>\n  defHttp.get(\n    {\n      url: Api.getTemplateById + '?id=' + id,\n    },\n    { isOnlyResult: true },\n  );\n\n// 明细列表数据\nexport const getDetailList = (params) =>\n  defHttp.get(\n    {\n      url: Api.detailList,\n      params,\n    },\n    { isOnlyResult: true },\n  );\n\n// 占比列表数据\nexport const getProportionList = (params) =>\n  defHttp.get(\n    {\n      url: Api.proportionList,\n      params,\n    },\n    {},\n  );\n\n// 获取指标列表\nexport const getIndexList = (params) =>\n  defHttp.get(\n    {\n      url: Api.indexList,\n      params,\n    },\n    {},\n  );\n\n// 获取历史模板列表\nexport const getTemplateHisList = (params) =>\n  defHttp.get(\n    {\n      url: Api.tmplateHisList,\n      params,\n    },\n    {},\n  );\n"],"names":["useDictStoreWithOut","searchFormSchema","columns","text","record","useRender","getDetailColumns","getIndexColumns","getproportionColumns","getHisColumns","getDataList","params","defHttp","saveTemplate","getTemplate","id","getDetailList","getIndexList","getTemplateHisList"],"mappings":"uOAKkBA,EAAoB,EAY/B,MAAMC,EAAiC,CAC5C,CACE,MAAO,WACP,UAAW,QACX,MAAO,OACP,SAAU,EACZ,EACA,CACE,MAAO,UACP,UAAW,QACX,MAAO,KACP,SAAU,CACR,KAAM,CACR,EACA,SAAU,EACZ,EACA,CACE,MAAO,KACP,MAAO,SACP,UAAW,gBACX,eAAgB,CACd,KAAM,6BACR,EACA,SAAU,CACR,KAAM,CACR,CACF,CACF,EAmBaC,EAAyB,CACpC,CACE,MAAO,OACP,UAAW,WACX,MAAO,SACP,UAAW,GACX,MAAO,GACT,EACA,CACE,MAAO,OACP,UAAW,iBACX,MAAO,IACP,OAAQ,GACR,UAAW,EACb,EACA,CACE,MAAO,KACP,UAAW,UACX,MAAO,SACP,UAAW,GACX,MAAO,GACT,EACA,CACE,MAAO,MACP,UAAW,mBACX,MAAO,SACP,MAAO,IACP,UAAW,EACb,EACA,CACE,MAAO,OACP,UAAW,aACX,MAAO,SACP,MAAO,IACP,OAAQ,GACR,UAAW,EACb,EACA,CACE,MAAO,OACP,UAAW,SACX,MAAO,SACP,UAAW,GACX,MAAO,QACP,aAAc,CAAC,CAAE,KAAAC,EAAM,OAAAC,KACdC,EAAU,iBAAiBF,EAAMC,EAAO,UAAU,CAE7D,CACF,EAEO,SAASE,GAAmB,CAyD1B,MAxDa,CAClB,CACE,MAAO,OACP,UAAW,gBACX,MAAO,SACP,MAAO,EACT,EACA,CACE,MAAO,OACP,UAAW,YACX,MAAO,SACP,MAAO,GACT,EACA,CACE,MAAO,OACP,UAAW,YACX,MAAO,SACP,MAAO,GACT,EACA,CACE,MAAO,OACP,MAAO,SACP,UAAW,uBACX,MAAO,EACT,EACA,CACE,MAAO,OACP,UAAW,eACX,MAAO,OACP,MAAO,GACT,EACA,CACE,MAAO,OACP,UAAW,gBACX,MAAO,OACP,MAAO,GACT,EACA,CACE,MAAO,KACP,UAAW,QACX,MAAO,SACP,MAAO,EACT,EACA,CACE,MAAO,MACP,UAAW,mBACX,MAAO,SACP,MAAO,EACT,EACA,CACE,MAAO,QACP,UAAW,qBACX,MAAO,SACP,MAAO,EACT,CAAA,CAGJ,CAGO,SAASC,GAAkB,CAuCzB,MAtCa,CAClB,CACE,MAAO,OACP,UAAW,WACX,MAAO,SACP,MAAO,EACT,EACA,CACE,MAAO,OACP,UAAW,OACX,MAAO,SACP,MAAO,GACT,EACA,CACE,MAAO,OACP,UAAW,OACX,MAAO,SACP,MAAO,GACT,EACA,CACE,MAAO,OACP,MAAO,SACP,UAAW,uBACX,MAAO,EACT,EACA,CACE,MAAO,OACP,UAAW,eACX,MAAO,OACP,MAAO,GACT,EACA,CACE,MAAO,OACP,UAAW,gBACX,MAAO,OACP,MAAO,GACT,CAAA,CAGJ,CAGO,SAASC,GAAuB,CAoB9B,MAnBa,CAClB,CACE,MAAO,OACP,UAAW,WACX,MAAO,SACP,MAAO,GACT,EACA,CACE,MAAO,KACP,UAAW,cACX,MAAO,SACP,MAAO,GACT,EACA,CACE,MAAO,KACP,UAAW,aACX,MAAO,MACT,CAAA,CAGJ,CAGO,SAASC,GAAgB,CAiCvB,MAhCa,CAClB,CACE,MAAO,OACP,UAAW,iBACX,MAAO,SACP,MAAO,GACT,EACA,CACE,MAAO,KACP,UAAW,UACX,MAAO,SACP,MAAO,GACT,EACA,CACE,MAAO,MACP,UAAW,mBACX,MAAO,SACP,MAAO,GACT,EACA,CACE,MAAO,OACP,MAAO,SACP,UAAW,aACX,MAAO,EACT,EACA,CACE,MAAO,OACP,UAAW,SACX,MAAO,OACP,MAAO,GACT,CAAA,CAGJ,CAGa,MAAAC,EAAeC,GAC1BC,EAAQ,IACN,CACE,IAAK,+BACL,OAAAD,CACF,EACA,CAAE,aAAc,EAAK,CACvB,EAGWE,EAAgBF,GAC3BC,EAAQ,KACN,CACE,IAAK,iCACL,OAAAD,CACF,EACA,CAAC,CACH,EAYWG,EAAeC,GAC1BH,EAAQ,IACN,CACE,IAAK,kCAA+BG,CACtC,EACA,CAAE,aAAc,EAAK,CACvB,EAGWC,EAAiBL,GAC5BC,EAAQ,IACN,CACE,IAAK,mCACL,OAAAD,CACF,EACA,CAAE,aAAc,EAAK,CACvB,EAaWM,EAAgBN,GAC3BC,EAAQ,IACN,CACE,IAAK,4BACL,OAAAD,CACF,EACA,CAAC,CACH,EAGWO,EAAsBP,GACjCC,EAAQ,IACN,CACE,IAAK,kCACL,OAAAD,CACF,EACA,CAAC,CACH"}