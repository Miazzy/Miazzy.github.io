{"version":3,"file":"energyStorageDevice-b5f6929c.js","sources":["../../src/views/monitor/energyStorage/energyStorageDevice.vue"],"sourcesContent":["<!--\n * @Description: 储能监视-EMS控制器/本地控制器/PCS/BMS\n * @Date: 2023-10-23 09:19:34\n * @LastEditTime: 2023-11-09 16:45:02\n * @FilePath: \\ygwl-framework\\src\\views\\monitor\\energyStorage\\energyStorageDevice.vue\n-->\n<template>\n  <div class=\"energy-storage-device\">\n    <div class=\"device-tab-box\">\n      <Tabs class=\"tab-style\" v-model:activeKey=\"activeDataTab\" size=\"large\">\n        <TabPane key=\"1\">\n          <template #tab>\n            <div class=\"tab-bar-item\">\n              实时信息\n            </div>\n          </template>\n          <RealTimeInfo :ycData=\"ycData\" :yxData=\"yxData\" :style=\"'height: calc(100vh - 80px)'\" />\n        </TabPane>\n        <TabPane key=\"2\">\n          <template #tab>\n            <div class=\"tab-bar-item\"> 设备告警 </div>\n          </template>\n          <DeviceWarning :esn=\"props.esn\" />\n        </TabPane>\n        <TabPane key=\"3\">\n          <template #tab>\n            <div class=\"tab-bar-item\"> 数据明细 </div>\n          </template>\n          <DataDetail :tableColumns=\"detailColumns\" :indexType=\"ycData\" :esn=\"props.esn\" :echartHeight=\"calcEchartsHeight()\" />\n        </TabPane>\n        <TabPane key=\"4\">\n          <template #tab>\n            <div class=\"tab-bar-item\"> 数据对比 </div>\n          </template>\n          <DataComparison :tableColumns=\"detailColumns\" :indexType=\"ycData\" :echartHeight=\"calcEchartsHeight()\" />\n        </TabPane>\n      </Tabs>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\" setup>\n  import { ref, onMounted } from 'vue';\n  import { Tabs, TabPane } from 'ant-design-vue';\n  import RealTimeInfo from '../component/realTimeInfo.vue';\n  import DeviceWarning from '../component/deviceWarning.vue';\n  import DataDetail from '../component/dataDetail.vue';\n  import DataComparison from '../component/dataComparison.vue';\n  import DeviceInfo from '../component/deviceInfo.vue';\n  import { getRealTimeYc, getRealTimeYx } from '../monitorApi.ts';\n\n  const activeDataTab = ref('1');\n  // 父组件穿过来的表格字段，指标列表\n  interface Props {\n    curStationId?: null;\n    esn?: null;\n  }\n  const props = withDefaults(defineProps<Props>(), {});\n  // 获取实时遥测数据\n  const ycData = ref([]);\n  const getYcData = async () => {\n    let res = await getRealTimeYc({\n      stationId: props.curStationId,\n      esn: props.esn,\n      dataType: 1,\n    });\n    ycData.value = res;\n  };\n\n  // 获取实时遥信数据\n  const yxData = ref([]);\n  const getYxData = async () => {\n    let res = await getRealTimeYx({\n      stationId: props.curStationId,\n      esn: props.esn,\n      dataType: 1,\n    });\n    yxData.value = res.dataList;\n  };\n\n  const loadDetailInfo = async () => {\n    getYcData();\n    getYxData();\n    activeDataTab.value = '1';\n  };\n\n  const calcEchartsHeight = () => {\n    return (document.body.clientHeight - 140)/0.85 - 20;\n  }\n\n  onMounted(() => {\n    loadDetailInfo();\n  });\n\n  defineExpose({\n    loadDetailInfo,\n  });\n</script>\n\n<style lang=\"less\">\n  @import '../style/themes.less';\n</style>\n\n<style lang=\"less\" scoped>\n  .energy-storage-device {\n    height: 100%;\n    padding-left: 10px;\n\n    .device-tab-box {\n      height: 100%;\n    }\n\n    .tab-style {\n      :deep(.ant-tabs-large > .ant-tabs-nav .ant-tabs-tab) {\n        padding: 16px 4px;\n        line-height: 22px;\n      }\n\n      :deep(.ant-tabs-nav) {\n        padding-left: 15px;\n      }\n\n      .tab-bar-item {\n        position: relative;\n\n        .tab-tag {\n          position: absolute;\n          top: -10px;\n          right: -20px;\n          width: 20px;\n          height: 20px;\n          border-radius: 10px;\n          background-color: #ff4d4f;\n          color: #fffefe;\n          font-size: 12px;\n          line-height: 20px;\n          text-align: center;\n        }\n      }\n    }\n\n    :deep(.tab-style.ant-tabs-top > .ant-tabs-nav) {\n      margin-bottom: 0;\n    }\n\n    :deep(.real-time-info-height.real-time-info .inner-box .right-part .info-list) {\n      height: 686px;\n    }\n\n    :deep(.real-time-info-height.real-time-info .inner-box .left-part .data-list) {\n      height: 686px;\n    }\n  }\n</style>\n"],"names":["activeDataTab","ref","ycData","getYcData","__async","res","getRealTimeYc","props","yxData","getYxData","getRealTimeYx","loadDetailInfo","calcEchartsHeight","onMounted","__expose"],"mappings":"23DAmDQA,EAAgBC,EAAI,GAAG,EAQvBC,EAASD,EAAI,CAAA,CAAE,EACfE,EAAY,IAAYC,EAAA,sBACxB,IAAAC,EAAM,MAAMC,EAAc,CAC5B,UAAWC,EAAM,aACjB,IAAKA,EAAM,IACX,SAAU,CAAA,CACX,EACDL,EAAO,MAAQG,CAAA,GAIXG,EAASP,EAAI,CAAA,CAAE,EACfQ,EAAY,IAAYL,EAAA,sBACxB,IAAAC,EAAM,MAAMK,EAAc,CAC5B,UAAWH,EAAM,aACjB,IAAKA,EAAM,IACX,SAAU,CAAA,CACX,EACDC,EAAO,MAAQH,EAAI,QAAA,GAGfM,EAAiB,IAAYP,EAAA,sBACvBD,IACAM,IACVT,EAAc,MAAQ,GAAA,GAGlBY,EAAoB,KAChB,SAAS,KAAK,aAAe,KAAK,IAAO,GAGnD,OAAAC,EAAU,IAAM,CACCF,GAAA,CAChB,EAEYG,EAAA,CACX,eAAAH,CAAA,CACD"}