{"version":3,"file":"TopInfoContent-bc12fd82.js","sources":["../../src/views/da/cockpit/overview/TopInfoContent.vue"],"sourcesContent":["<template>\n  <div class=\"top-info-content\">\n    <DataBoardItem title=\"今日发电量(万kWh)\" icon=\"dayGen\" :value=\"formState.dayGen\" />\n    <DataBoardItem title=\"今日收益(万元)\" icon=\"earnings\" :value=\"413.45\" />\n    <DataBoardItem\n      title=\"累计上网电量(万kWh)\"\n      icon=\"dayOnline\"\n      :value=\"formState.dayOnline\"\n      @clickValue=\"toBiReport('dayOnline')\"\n    />\n    <DataBoardItem\n      title=\"灾害预警(条)\"\n      icon=\"warningCount\"\n      :value=\"formState.warningCount\"\n      @clickValue=\"toBiReport('warningCount')\"\n    />\n  </div>\n</template>\n\n<script lang=\"ts\" setup>\n  import { ref, reactive, UnwrapRef, onMounted, watch } from 'vue';\n  import { assign } from 'min-dash';\n  import DataBoardItem from '/@/components/Framework/Chart/DataBoardItem.vue';\n  import * as OverviewApi from '@/api/da/cockpit/overview';\n  import { addTabPage } from '@/utils/route';\n\n  const props = defineProps({\n    searchInfoByTime: { type: Object, default: {} },\n  });\n  //搜索参数\n  const leftSearchInfo: UnwrapRef<any> = reactive({});\n  watch(\n    () => props.searchInfoByTime,\n    (value) => {\n      assign(leftSearchInfo, value);\n    },\n  );\n\n  const formState = reactive({\n    dayGen: 0,\n    dayOnline: 0,\n    warningCount: 0,\n  });\n\n  const toBiReport = async (type: string) => {\n    if (type === 'dayOnline') {\n      //累计上网\n      addTabPage('/bi/elec/powerContrast');\n    } else if (type === 'warningCount') {\n      //天气预警\n      addTabPage('/bi/safety/disasterWarning');\n    }\n  };\n\n  onMounted(async () => {\n    const powerStatByDay = await OverviewApi.powerStatByDay({\n      startMonth: leftSearchInfo.startMonth,\n      endMonth: leftSearchInfo.endMonth,\n    });\n    if (powerStatByDay) {\n      formState.dayGen = powerStatByDay.dayGen || 0;\n      formState.dayOnline = powerStatByDay.dayOnline || 0;\n    }\n    const otherInfo = await OverviewApi.otherInfo({\n      startMonth: leftSearchInfo.startMonth,\n      endMonth: leftSearchInfo.endMonth,\n    });\n    if (otherInfo) {\n      formState.warningCount = otherInfo.warningCount || 0;\n    }\n  });\n</script>\n\n<style lang=\"less\" scoped>\n  .top-info-content {\n    display: flex;\n    position: absolute;\n    z-index: 99;\n    top: 0.9rem;\n    left: 25vw;\n    justify-content: space-between;\n    width: 50vw;\n\n    :deep(.data-board-item) {\n      width: 11.98vw;\n      height: 10.09vh;\n\n      .title-box .value-text {\n        font-weight: 500;\n      }\n    }\n  }\n</style>\n"],"names":["leftSearchInfo","reactive","watch","props","value","assign","formState","toBiReport","type","__async","addTabPage","onMounted","powerStatByDay","OverviewApi.powerStatByDay","otherInfo","OverviewApi.otherInfo"],"mappings":"4oBA8BQA,EAAiCC,EAAS,CAAA,CAAE,EAClDC,EACE,IAAMC,EAAM,iBACXC,GAAU,CACTC,EAAOL,EAAgBI,CAAK,CAC9B,CAAA,EAGF,MAAME,EAAYL,EAAS,CACzB,OAAQ,EACR,UAAW,EACX,aAAc,CAAA,CACf,EAEKM,EAAoBC,GAAiBC,EAAA,sBACrCD,IAAS,YAEXE,EAAW,wBAAwB,EAC1BF,IAAS,gBAElBE,EAAW,4BAA4B,CACzC,GAGF,OAAAC,EAAU,IAAYF,EAAA,sBACd,MAAAG,EAAiB,MAAMC,EAA2B,CACtD,WAAYb,EAAe,WAC3B,SAAUA,EAAe,QAAA,CAC1B,EACGY,IACQN,EAAA,OAASM,EAAe,QAAU,EAClCN,EAAA,UAAYM,EAAe,WAAa,GAE9C,MAAAE,EAAY,MAAMC,EAAsB,CAC5C,WAAYf,EAAe,WAC3B,SAAUA,EAAe,QAAA,CAC1B,EACGc,IACQR,EAAA,aAAeQ,EAAU,cAAgB,EACrD,EACD"}