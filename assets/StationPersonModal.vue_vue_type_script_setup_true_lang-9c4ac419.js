var g=(d,f,o)=>new Promise((u,t)=>{var c=s=>{try{r(o.next(s))}catch(a){t(a)}},n=s=>{try{r(o.throw(s))}catch(a){t(a)}},r=s=>s.done?u(s.value):Promise.resolve(s.value).then(c,n);r((o=o.apply(d,f)).next())});import{a as M,B as P}from"./index-316f6ffb.js";import{u as b,B as I}from"./useForm-dea3ed18.js";import"./BasicForm.vue_vue_type_style_index_0_lang-1ba7be9e.js";import{d as S}from"./index-5d738211.js";import{d as k,k as l,e as w,u as i,Z as C,a9 as F,aa as L,f as R,a7 as x}from"./vue-71d1abb3.js";const T=k({name:"StationPersonModal",__name:"StationPersonModal",emits:["success","register"],setup(d,{emit:f}){const o=l(""),u=l(""),t=l(""),c=l([]),n=l([]),[r,{resetFields:s,validate:a}]=b({labelWidth:100,baseColProps:{span:24},schemas:[{field:"person",label:"人员",component:"SelectBox",componentProps:{data:n,multiple:!0,value:[],onChange:function(e,p){c.value=p.map(m=>m.label)}},required:!0}],showActionButtonGroup:!1}),[_,{setModalProps:v,closeModal:h}]=M(e=>g(this,null,function*(){if(s(),v({confirmLoading:!1}),o.value=e==null?void 0:e.title,u.value=e==null?void 0:e.type,t.value=e==null?void 0:e.stationId,!n.value.length){const p=yield S(t.value);n.value=p.map(m=>({label:m.name,value:m.userId}))}})),B=w(()=>i(o));function y(){return g(this,null,function*(){try{const e=yield a();v({confirmLoading:!0}),h(),f("success",{values:{type:u.value,personIds:e.person,personNames:c.value}})}finally{v({confirmLoading:!1})}})}return(e,p)=>(C(),F(i(P),x(e.$attrs,{onRegister:i(_),title:B.value,onOk:y}),{default:L(()=>[R(i(I),{onRegister:i(r)},null,8,["onRegister"])]),_:1},16,["onRegister","title"]))}});export{T as _};
//# sourceMappingURL=StationPersonModal.vue_vue_type_script_setup_true_lang-9c4ac419.js.map
