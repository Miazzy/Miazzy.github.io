{"version":3,"file":"indexModel-303590c3.js","sources":["../../src/views/po/integrated/assessmentevaluation/template/indexModel.vue"],"sourcesContent":["<template>\n  <BasicModal\n    sicModal\n    v-bind=\"$attrs\"\n    @register=\"registerModal\"\n    @cancel=\"cancelDetail\"\n    @ok=\"handleOk\"\n    title=\"评价指标\"\n    width=\"800px\"\n  >\n    <div class=\"tab-button-div\">\n      <a-form :model=\"searchInfo\" name=\"indexSearch\" layout=\"inline\" autocomplete=\"off\">\n        <a-form-item label=\"指标类别\" name=\"kind\" style=\"width: 22%; margin-left: 60px\">\n          <DictSelectBox\n            width=\"100%\"\n            v-model:value=\"searchInfo.kind\"\n            :type=\"`EvaluationIndexKind`\"\n          />\n        </a-form-item>\n        <a-form-item label=\"指标名称\" name=\"name\" style=\"width: 22%; margin-left: 60px\">\n          <a-input v-model:value=\"searchInfo.name\" />\n        </a-form-item>\n        <a-form-item label=\"评价方式\" name=\"evaluationMethod\" style=\"width: 22%; margin-left: 60px\">\n          <DictSelectBox\n            width=\"100%\"\n            :disabled=\"isEdit\"\n            v-model:value=\"searchInfo.evaluationMethod\"\n            :type=\"`evaluation_method`\"\n          />\n        </a-form-item>\n        <a-form-item class=\"tab-button\">\n          <a-button class=\"tab-button\" @click=\"resetFrom\">重置</a-button>\n          <a-button type=\"primary\" class=\"tab-button\" @click=\"searchList\">查询</a-button>\n        </a-form-item>\n      </a-form>\n    </div>\n    <a-table\n      :columns=\"indexColumns\"\n      :data-source=\"indexList\"\n      :pagination=\"false\"\n      size=\"small\"\n      bordered\n      rowKey=\"id\"\n      :row-selection=\"{ selectedRowKeys: state.selectedRowKeys, onChange: onSelectChange }\"\n      :scroll=\"{ x: 200, y: 600 }\"\n    />\n  </BasicModal>\n</template>\n<script lang=\"ts\" setup>\n  import { ref, reactive, defineEmits } from 'vue';\n  import DictSelectBox from '@/components/Framework/Combox/DictSelectBox.vue';\n  import { BasicModal, useModalInner } from '/@/components/Modal';\n  import { getIndexList, getIndexColumns } from './template';\n\n  // 父组件穿过来的值\n  interface Props {\n    fIndexList?: [];\n  }\n  const props = withDefaults(defineProps<Props>(), {});\n\n  const indexColumns = getIndexColumns();\n  let indexList = ref([]);\n  const searchInfo = reactive({});\n  const [registerModal, { setModalProps, closeModal }] = useModalInner(async () => {\n    setModalProps({ confirmLoading: false });\n    loadTableData();\n  });\n\n  const emit = defineEmits(['cancelDetail', 'handleOk']);\n  function cancelDetail() {\n    emit('cancelDetail');\n  }\n\n  function loadTableData() {\n    searchInfo.status = 1;\n    getIndexList(searchInfo).then((data) => {\n      indexList.value = data.result;\n    });\n  }\n  function handleOk() {\n    console.info(state.selectedRowKeys);\n    let selectedIndex = indexList.value.filter(\n      (item) => state.selectedRowKeys.indexOf(item.id) != -1,\n    );\n    emit('selectedIndex', selectedIndex);\n    emit('handleOk');\n    closeModal();\n  }\n\n  // 多选框\n\n  type Key = string | number;\n  const state = reactive<{\n    selectedRowKeys: Key[];\n    loading: boolean;\n  }>({\n    selectedRowKeys: [], // Check here to configure the default column\n    loading: false,\n  });\n\n  // 多选框相关\n  const onSelectChange = (selectedRowKeys: Key[]) => {\n    state.selectedRowKeys = selectedRowKeys;\n  };\n\n  // 查询\n  function searchList() {\n    loadTableData();\n  }\n  /**\n   * 重置\n   */\n  function resetFrom() {\n    searchInfo.kind = null;\n    searchInfo.name = null;\n    searchInfo.evaluationMethod = null;\n  }\n</script>\n\n<style lang=\"less\" scoped>\n  .tabs-extra-demo-button {\n    margin-right: 16px;\n  }\n\n  .tab-model {\n    margin-top: 16px;\n    margin-left: 16px;\n  }\n\n  .tab-button-div {\n    padding: 12px;\n  }\n\n  .tab-button {\n    margin-right: 5px;\n  }\n\n  .tab-table-div {\n    height: 728px;\n    margin-top: 16px;\n    margin-bottom: 16px;\n    padding-left: 14px;\n    overflow: auto;\n    background: white;\n  }\n\n  .ant-row-rtl .tabs-extra-demo-button {\n    margin-right: 5px;\n    margin-left: 16px;\n  }\n</style>\n"],"names":["indexColumns","getIndexColumns","indexList","ref","searchInfo","reactive","registerModal","setModalProps","closeModal","useModalInner","__async","loadTableData","cancelDetail","emit","getIndexList","data","handleOk","state","selectedIndex","item","onSelectChange","selectedRowKeys","searchList","resetFrom"],"mappings":"2oCA4DE,MAAMA,EAAeC,IACjB,IAAAC,EAAYC,EAAI,CAAA,CAAE,EAChB,MAAAC,EAAaC,EAAS,CAAA,CAAE,EACxB,CAACC,EAAe,CAAE,cAAAC,EAAe,WAAAC,CAAY,CAAA,EAAIC,EAAc,IAAYC,EAAA,sBACjEH,EAAA,CAAE,eAAgB,EAAA,CAAO,EACzBI,GAAA,EACf,EAGD,SAASC,GAAe,CACtBC,EAAK,cAAc,CACrB,CAEA,SAASF,GAAgB,CACvBP,EAAW,OAAS,EACpBU,EAAaV,CAAU,EAAE,KAAMW,GAAS,CACtCb,EAAU,MAAQa,EAAK,MAAA,CACxB,CACH,CACA,SAASC,GAAW,CACV,QAAA,KAAKC,EAAM,eAAe,EAC9B,IAAAC,EAAgBhB,EAAU,MAAM,OACjCiB,GAASF,EAAM,gBAAgB,QAAQE,EAAK,EAAE,GAAK,EAAA,EAEtDN,EAAK,gBAAiBK,CAAa,EACnCL,EAAK,UAAU,EACJL,GACb,CAKA,MAAMS,EAAQZ,EAGX,CACD,gBAAiB,CAAC,EAClB,QAAS,EAAA,CACV,EAGKe,EAAkBC,GAA2B,CACjDJ,EAAM,gBAAkBI,CAAA,EAI1B,SAASC,GAAa,CACNX,GAChB,CAIA,SAASY,GAAY,CACnBnB,EAAW,KAAO,KAClBA,EAAW,KAAO,KAClBA,EAAW,iBAAmB,IAChC"}