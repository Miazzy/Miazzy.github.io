{"version":3,"file":"realTimeInfo-0c08b872.js","sources":["../../src/views/monitor/component/realTimeInfo.vue"],"sourcesContent":["<template>\n  <div class=\"real-time-info\" :style=\"props.boxStyle\">\n    <div class=\"inner-box\">\n      <div class=\"left-part\" v-if=\"ycDataList.length > 0\">\n        <div class=\"part-header\">\n          <div class=\"header-left\">\n            <span class=\"header-icon\"></span>\n            <span class=\"header-text\">遥测</span>\n          </div>\n          <div class=\"header-right\">{{ ycDateTime }}</div>\n        </div>\n        <div class=\"part-content\">\n          <div class=\"data-list-box\">\n            <ul class=\"data-list\" v-for=\"(item, index) in formatYcData\" :key=\"index\">\n              <li class=\"data-item\" v-for=\"(n, i) in item\" :key=\"i\">\n                <span class=\"data-label align-center\">\n                  {{ n.addressDesc }}{{ n.unit ? `(${n.unit})` : '' }}\n                </span>\n                <span class=\"data-value align-right\" :class=\"{ 'red-text': n.isAlarm == 1 }\">\n                  {{ n.data }}\n                </span>\n              </li>\n            </ul>\n          </div>\n        </div>\n      </div>\n      <div class=\"right-part\" v-if=\"props.yxData.length > 0\">\n        <div class=\"part-header\">\n          <div class=\"header-left\">\n            <span class=\"header-icon\"></span>\n            <span class=\"header-text\">遥信</span>\n          </div>\n          <div class=\"header-right\">{{ yxTimeRef }}</div>\n        </div>\n        <div class=\"part-content\" style=\"overflow: auto\">\n          <div class=\"info-list\" v-for=\"(item, index) in formatYxData\" :key=\"index\">\n            <div\n              class=\"info-item\"\n              :class=\"{ 'red-bg': n.is_alarm == 1, blink: n.isAlarmNow == 1 }\"\n              v-for=\"(n, i) in item\"\n              :key=\"i\"\n              >{{ n.addressDesc }}</div\n            >\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\" setup>\n  import { ref, onMounted, watch, computed } from 'vue';\n  import Dialog from '@/components/Framework/Modal/Dialog.vue';\n  import DeviceWarning from '../../component/deviceWarning.vue';\n  import DataDetail from '../../component/dataDetail.vue';\n  import DataComparison from '../../component/dataComparison.vue';\n  import { formatToDateTime } from '@/utils/dateUtil';\n\n  const props = defineProps({\n    yxTime: { type: String, default: '' },\n    width: { type: Number, default: 1080 }, // 弹框宽度\n    height: { type: Number, default: 800 }, // 弹框高度\n    ycData: { type: Array, default: [] }, // 遥测实时数据\n    yxData: { type: Array, default: [] }, // 遥信实时数据\n    boxStyle: { type: String, default: '' },\n  });\n\n  const yxTimeRef = ref('');\n\n  watch(\n    () => props.ycData,\n    (newValue) => {\n      dealTime();\n    },\n  );\n\n  watch(\n    () => props.yxTime,\n    (newValue) => {\n      yxTimeRef.value = props.yxTime;\n    },\n  );\n\n  // 时间\n  const ycDateTime = ref('');\n  const ycDataList = ref([]);\n  // 处理遥测遥信时间；\n  const dealTime = () => {\n    ycDataList.value = props.ycData.filter((item) => item.addressField != 'time');\n    let time = props.ycData.filter((item) => item.addressField == 'time');\n    if (time?.length > 0) {\n      ycDateTime.value = time[0].data;\n    }\n  };\n\n  // 遥测遥信数据(除时间)分两列\n  const halfSliceArr = (data: Array) => {\n    let newArr = data.filter((item) => item.addressField !== 'time');\n    let sliceIndex = Math.ceil(newArr.length / 2);\n    let result = [];\n    if (newArr.slice(0, sliceIndex)?.length) {\n      result.push(newArr.slice(0, sliceIndex));\n    }\n    if (newArr.slice(sliceIndex)?.length) {\n      result.push(newArr.slice(sliceIndex));\n    }\n    return result;\n  };\n  const formatYcData = computed(() => {\n    return halfSliceArr(props.ycData);\n  });\n  const formatYxData = computed(() => {\n    return halfSliceArr(props.yxData);\n  });\n\n  onMounted(() => {\n    yxTimeRef.value = props.yxTime;\n  });\n</script>\n\n<style lang=\"less\">\n  @import '../style/themes.less';\n</style>\n\n<style lang=\"less\" scoped>\n  .real-time-info {\n    padding: 18px 16px 16px;\n\n    .inner-box {\n      display: flex;\n      border-radius: 2px;\n\n      .part-header {\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        padding: 20px 16px 0;\n        line-height: 1;\n\n        .header-left {\n          display: flex;\n          align-items: center;\n\n          .header-icon {\n            width: 3px;\n            height: 16px;\n            margin-right: 10px;\n          }\n\n          .header-text {\n            font-size: 14px;\n          }\n        }\n\n        .header-right {\n          font-size: 12px;\n        }\n      }\n\n      .left-part {\n        width: 50%;\n\n        .data-list-box {\n          display: flex;\n          height: calc(100vh - 160px);\n          margin-bottom: 0;\n          padding: 12px 18px 0 10px;\n          overflow-y: auto;\n\n          .data-list {\n            width: 50%;\n            height: fit-content;\n\n            .data-item {\n              display: flex;\n              font-size: 12px;\n              line-height: 1;\n              text-align: left;\n\n              & > span {\n                height: 31px;\n                padding: 0 6px;\n              }\n\n              .data-label {\n                flex: 5;\n              }\n\n              .data-value {\n                flex: 6;\n              }\n\n              .align-center {\n                display: flex;\n                align-items: center;\n              }\n\n              .align-right {\n                display: flex;\n                align-items: center;\n                justify-content: right;\n              }\n            }\n          }\n        }\n      }\n\n      .right-part {\n        width: 50%;\n\n        .part-content {\n          display: flex;\n          padding: 18px 16px 0;\n        }\n\n        .info-list {\n          width: 50%;\n          height: calc(100vh - 160px);\n\n          .info-item {\n            width: calc(100% - 4px);\n            height: 32px;\n            margin: 0 4px 4px 0;\n            background-color: #63d575;\n            font-size: 14px;\n            line-height: 32px;\n            text-align: center;\n\n            &.red-bg {\n              background-color: #ed706b;\n            }\n          }\n        }\n      }\n    }\n  }\n\n  @keyframes blink {\n    0% {\n      background-color: #ed706b; /* 完全不透明 */\n    }\n\n    50% {\n      background-color: transparent; /* 完全透明 */\n    }\n\n    100% {\n      background-color: #ed706b; /* 再次变为不透明 */\n    }\n  }\n\n  .blink {\n    animation: blink 0.5s infinite; /* 每0.5秒执行一次，无限次数 */\n  }\n</style>\n"],"names":["yxTimeRef","ref","watch","props","newValue","dealTime","ycDateTime","ycDataList","item","time","halfSliceArr","data","newArr","sliceIndex","result","_a","_b","formatYcData","computed","formatYxData","onMounted"],"mappings":"mhCAmEQA,EAAYC,EAAI,EAAE,EAExBC,EACE,IAAMC,EAAM,OACXC,GAAa,CACHC,GACX,CAAA,EAGFH,EACE,IAAMC,EAAM,OACXC,GAAa,CACZJ,EAAU,MAAQG,EAAM,MAC1B,CAAA,EAII,MAAAG,EAAaL,EAAI,EAAE,EACnBM,EAAaN,EAAI,CAAA,CAAE,EAEnBI,EAAW,IAAM,CACVE,EAAA,MAAQJ,EAAM,OAAO,OAAQK,GAASA,EAAK,cAAgB,MAAM,EACxE,IAAAC,EAAON,EAAM,OAAO,OAAQK,GAASA,EAAK,cAAgB,MAAM,GAChEC,GAAA,YAAAA,EAAM,QAAS,IACNH,EAAA,MAAQG,EAAK,CAAC,EAAE,KAC7B,EAIIC,EAAgBC,GAAgB,SACpC,IAAIC,EAASD,EAAK,OAAQH,GAASA,EAAK,eAAiB,MAAM,EAC3DK,EAAa,KAAK,KAAKD,EAAO,OAAS,CAAC,EACxCE,EAAS,CAAA,EACb,OAAIC,EAAAH,EAAO,MAAM,EAAGC,CAAU,IAA1B,MAAAE,EAA6B,QAC/BD,EAAO,KAAKF,EAAO,MAAM,EAAGC,CAAU,CAAC,GAErCG,EAAAJ,EAAO,MAAMC,CAAU,IAAvB,MAAAG,EAA0B,QAC5BF,EAAO,KAAKF,EAAO,MAAMC,CAAU,CAAC,EAE/BC,CAAA,EAEHG,EAAeC,EAAS,IACrBR,EAAaP,EAAM,MAAM,CACjC,EACKgB,EAAeD,EAAS,IACrBR,EAAaP,EAAM,MAAM,CACjC,EAED,OAAAiB,EAAU,IAAM,CACdpB,EAAU,MAAQG,EAAM,MAAA,CACzB"}