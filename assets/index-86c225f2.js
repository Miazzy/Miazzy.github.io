var y=(i,e,u)=>new Promise((h,n)=>{var g=s=>{try{d(u.next(s))}catch(c){n(c)}},b=s=>{try{d(u.throw(s))}catch(c){n(c)}},d=s=>s.done?h(s.value):Promise.resolve(s.value).then(g,b);d((u=u.apply(i,e)).next())});import{B as R}from"./BasicTable-0434a334.js";import{T as z}from"./BasicForm.vue_vue_type_style_index_0_lang-1ba7be9e.js";import"./index-085d06c7.js";import{u as H}from"./useTable-109483b3.js";import"./antd-15ac76ed.js";import{a5 as V,a7 as N,av as O,_ as P}from"./index.js";import{P as q}from"./index-20519caf.js";import"./index-316f6ffb.js";import{u as E}from"./useRender-21ce56fb.js";import U from"./Schedule-729c0814.js";import{_ as j}from"./DictSelectBox.vue_vue_type_script_setup_true_lang-e03e9fe8.js";import{h as A}from"./moment-4717c495.js";import{d as W,r as T,k as C,o as $,al as m,Z as D,_ as G,$ as _,f as a,aa as r,E as Y,u as p,a9 as K,ac as Z,F as J}from"./vue-71d1abb3.js";import"./useForm-dea3ed18.js";import"./uniqBy-92d3bc7f.js";import"./useWindowSizeFn-13b1b8a2.js";import"./index-f4fc48e6.js";import"./useTabs-2b062e85.js";import"./download-03e71dd5.js";import"./index-5d49b7a7.js";import"./SearchBox-22bb02d6.js";import"./UploadBox-636ecf02.js";import"./Dialog-0a006d82.js";import"./OrganDialog-dd1023ce.js";import"./sortable.esm-4ae27e0b.js";import"./dict-c04c0dd8.js";import"./useContentViewHeight-7f845167.js";import"./assign-37f1c13d.js";function Q(){return[{title:"提醒",dataIndex:"content",width:330,headAlign:"center",align:"left",resizable:!0,sorter:!0,customHeaderCell:i=>({class:"text-center"})},{title:"开始时间",dataIndex:"startTime",width:100,resizable:!0,sorter:!0,customRender:({text:i})=>E.renderDate(i,"YYYY-MM-DD HH:mm")},{title:"创建人",dataIndex:"creator",width:120,resizable:!0,sorter:!0}]}const X=i=>V.get({url:"/oa/calendar-schedule/page",params:i},{}),ee={class:"w-6/6 tab-model"},te={class:"tab-button-div"},ae={class:"tab-table-div"},ne=W({__name:"index",setup(i){const e=T({content:null,startDate:null,endDate:null,status:null}),u=C();function h(t){u.value.handleView({id:t.id,type:t.type})}const n=T({searchTime:null}),g=Q(),b=C([]),d=()=>y(this,null,function*(){let t=yield X(e);return b.value=t.result,t.result}),s={baseColProps:{lg:6,md:8},labelWidth:90,schemas:[]},[c,{reload:v,getPaginationRef:k}]=H({title:"日程安排列表",api:()=>y(this,null,function*(){const t=k();return e.pageNo=t.current,e.pageSize=t.pageSize,yield d()}),columns:g,useSearchForm:!1,formConfig:s,showTableSetting:!0,bordered:!0,rowKey:"id",actionColumn:{width:160,title:"操作",dataIndex:"action"},sortFn:t=>{t.order?(e.sortField=t.field,e.sortOrder=t.order.replace("end","")):(e.sortField=null,e.sortOrder=null)}});function M(){e.content=null,e.startDate=null,e.endDate=null,e.status=null,n.searchTime=null,v()}function S(){n.searchTime!=null&&(e.startDate=n.searchTime[0],e.endDate=n.searchTime[1]),v()}return $(()=>{let t=A(new Date).format("YYYY-MM-DD");n.searchTime=[t,t],e.startDate=n.searchTime[0],e.endDate=n.searchTime[1],N.getInstance().listen("setMeeting",function(){setTimeout(()=>{v()},500)})}),(t,o)=>{const F=m("a-range-picker"),f=m("a-form-item"),I=m("a-input"),w=m("a-button"),B=m("a-form");return D(),G(J,null,[_("div",null,[a(p(q),{dense:"",contentFullHeight:"",fixedHeight:"",contentClass:"flex",style:{position:"relative"}},{default:r(()=>[_("div",ee,[_("div",te,[a(B,{model:e,name:"searchInfo",layout:"inline",autocomplete:"off",class:"search-form"},{default:r(()=>[a(f,{name:"startDate",label:"日期",labelCol:{span:6},rules:[{required:!1,message:"请选择日期"}],style:{width:"26.5%"}},{default:r(()=>[a(F,{value:n.searchTime,"onUpdate:value":o[0]||(o[0]=l=>n.searchTime=l),format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",style:{width:"100%"}},null,8,["value"])]),_:1}),a(f,{name:"status",label:"状态",labelCol:{span:12},rules:[{required:!1,message:"请输入状态"}],style:{width:"26.5%"}},{default:r(()=>[a(j,{type:"ScheduleStatus",value:e.status,"onUpdate:value":o[1]||(o[1]=l=>e.status=l),width:"100%"},null,8,["value"])]),_:1}),a(f,{name:"content",label:"内容",labelCol:{span:12},rules:[{required:!1,message:"请输入内容"}],style:{width:"26.5%"}},{default:r(()=>[a(I,{value:e.content,"onUpdate:value":o[2]||(o[2]=l=>e.content=l),placeholder:"请输入内容",style:{width:"100%"}},null,8,["value"])]),_:1}),a(f,{class:"search-btns"},{default:r(()=>[a(w,{style:{margin:"0 8px"},onClick:M},{default:r(()=>[Y("重置")]),_:1}),a(w,{type:"primary",class:"tab-button",onClick:S},{default:r(()=>[Y("查询")]),_:1})]),_:1})]),_:1},8,["model"])]),_("div",ae,[a(p(R),{onRegister:p(c),class:"w-1/1 xl:w-1/1",height:630,onResizeColumn:o[3]||(o[3]=(l,x)=>x.width=l)},{bodyCell:r(({column:l,text:x,record:L})=>[l.key==="action"?(D(),K(p(z),{key:0,actions:[{icon:p(O).LOG,label:"查看",onClick:h.bind(null,L)}]},null,8,["actions"])):Z("",!0)]),_:1},8,["onRegister"])])])]),_:1})]),a(U,{ref_key:"schedule",ref:u},null,512)],64)}}});const Le=P(ne,[["__scopeId","data-v-92dc493d"]]);export{Le as default};
//# sourceMappingURL=index-86c225f2.js.map
