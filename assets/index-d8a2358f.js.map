{"version":3,"file":"index-d8a2358f.js","sources":["../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/label/LabelManager.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/label/installLabelLayout.js","../../node_modules/.pnpm/zrender@5.4.4/node_modules/zrender/lib/canvas/Layer.js","../../node_modules/.pnpm/zrender@5.4.4/node_modules/zrender/lib/canvas/Painter.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/renderer/installCanvasRenderer.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/tree/layoutHelper.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/tree/TreeView.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/data/helper/linkSeriesData.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/data/Tree.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/helper/treeHelper.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/tree/TreeSeries.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/tree/traversalHelper.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/tree/treeLayout.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/tree/treeVisual.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/tree/treeAction.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/tree/install.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/treemap/treemapAction.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/helper/enableAriaDecalForTree.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/treemap/TreemapSeries.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/treemap/Breadcrumb.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/util/animation.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/treemap/TreemapView.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/treemap/treemapVisual.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/treemap/treemapLayout.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/treemap/install.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/graph/categoryFilter.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/graph/categoryVisual.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/graph/edgeVisual.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/helper/multipleGraphEdgeHelper.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/graph/simpleLayoutHelper.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/graph/simpleLayout.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/graph/graphHelper.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/graph/circularLayoutHelper.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/graph/circularLayout.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/graph/forceHelper.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/graph/forceLayout.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/graph/createView.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/helper/LinePath.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/helper/Line.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/helper/LineDraw.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/graph/adjustEdge.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/graph/GraphView.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/data/Graph.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/helper/createGraphFromNodeEdge.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/graph/GraphSeries.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/graph/install.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/gauge/PointerPath.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/gauge/GaugeView.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/gauge/GaugeSeries.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/gauge/install.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/funnel/FunnelView.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/funnel/FunnelSeries.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/funnel/funnelLayout.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/funnel/install.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/parallel/ParallelView.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/parallel/ParallelSeries.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/parallel/parallelVisual.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/parallel/install.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/sankey/SankeyView.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/sankey/SankeySeries.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/sankey/sankeyLayout.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/sankey/sankeyVisual.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/sankey/install.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/helper/whiskerBoxCommon.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/boxplot/BoxplotSeries.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/boxplot/BoxplotView.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/boxplot/boxplotLayout.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/boxplot/prepareBoxplotData.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/boxplot/boxplotTransform.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/boxplot/install.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/candlestick/CandlestickView.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/candlestick/CandlestickSeries.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/candlestick/preprocessor.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/candlestick/candlestickVisual.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/candlestick/candlestickLayout.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/candlestick/install.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/helper/EffectSymbol.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/effectScatter/EffectScatterView.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/effectScatter/EffectScatterSeries.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/effectScatter/install.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/helper/EffectLine.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/helper/Polyline.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/helper/EffectPolyline.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/helper/LargeLineDraw.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/lines/linesLayout.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/lines/LinesView.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/lines/LinesSeries.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/lines/linesVisual.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/lines/install.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/heatmap/HeatmapLayer.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/heatmap/HeatmapView.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/heatmap/HeatmapSeries.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/heatmap/install.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/themeRiver/ThemeRiverView.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/themeRiver/ThemeRiverSeries.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/themeRiver/themeRiverLayout.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/themeRiver/install.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/sunburst/SunburstPiece.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/sunburst/sunburstAction.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/sunburst/SunburstView.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/sunburst/SunburstSeries.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/sunburst/sunburstLayout.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/sunburst/sunburstVisual.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/sunburst/install.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/custom/CustomSeries.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/coord/cartesian/prepareCustom.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/coord/geo/prepareCustom.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/coord/single/prepareCustom.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/coord/polar/prepareCustom.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/coord/calendar/prepareCustom.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/custom/CustomView.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/chart/custom/install.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/coord/single/singleAxisHelper.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/component/axis/SingleAxisView.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/coord/single/AxisModel.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/coord/single/SingleAxis.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/coord/single/Single.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/coord/single/singleCreator.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/component/axisPointer/SingleAxisPointer.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/component/singleAxis/install.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/component/brush/preprocessor.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/component/brush/selector.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/component/brush/visualEncoding.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/component/brush/BrushView.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/component/brush/BrushModel.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/component/toolbox/feature/Brush.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/component/brush/install.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/component/marker/checkMarkerInSeries.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/component/marker/MarkerModel.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/component/marker/MarkPointModel.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/component/marker/markerHelper.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/component/marker/MarkerView.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/component/marker/MarkPointView.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/component/marker/installMarkPoint.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/component/marker/MarkLineModel.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/component/marker/MarkLineView.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/component/marker/installMarkLine.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/component/marker/MarkAreaModel.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/component/marker/MarkAreaView.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/component/marker/installMarkArea.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/util/conditionalExpression.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/component/transform/filterTransform.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/component/transform/sortTransform.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/component/transform/install.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/component/dataset/install.js","../../node_modules/.pnpm/zrender@5.4.4/node_modules/zrender/lib/tool/convertPath.js","../../node_modules/.pnpm/zrender@5.4.4/node_modules/zrender/lib/tool/dividePath.js","../../node_modules/.pnpm/zrender@5.4.4/node_modules/zrender/lib/tool/morphPath.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/animation/morphTransitionHelper.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/lib/animation/universalTransition.js","../../node_modules/.pnpm/echarts@5.4.3/node_modules/echarts/index.js"],"sourcesContent":["\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\n// TODO: move labels out of viewport.\nimport { BoundingRect, updateProps, initProps, isElementRemoved } from '../util/graphic.js';\nimport { getECData } from '../util/innerStore.js';\nimport { parsePercent } from '../util/number.js';\nimport Transformable from 'zrender/lib/core/Transformable.js';\nimport { updateLabelLinePoints, setLabelLineStyle, getLabelLineStatesModels } from './labelGuideHelper.js';\nimport { makeInner } from '../util/model.js';\nimport { retrieve2, each, keys, isFunction, filter, indexOf } from 'zrender/lib/core/util.js';\nimport { prepareLayoutList, hideOverlap, shiftLayoutOnX, shiftLayoutOnY } from './labelLayoutHelper.js';\nimport { labelInner, animateLabelValue } from './labelStyle.js';\nimport { normalizeRadian } from 'zrender/lib/contain/util.js';\n\nfunction cloneArr(points) {\n  if (points) {\n    var newPoints = [];\n\n    for (var i = 0; i < points.length; i++) {\n      newPoints.push(points[i].slice());\n    }\n\n    return newPoints;\n  }\n}\n\nfunction prepareLayoutCallbackParams(labelItem, hostEl) {\n  var label = labelItem.label;\n  var labelLine = hostEl && hostEl.getTextGuideLine();\n  return {\n    dataIndex: labelItem.dataIndex,\n    dataType: labelItem.dataType,\n    seriesIndex: labelItem.seriesModel.seriesIndex,\n    text: labelItem.label.style.text,\n    rect: labelItem.hostRect,\n    labelRect: labelItem.rect,\n    // x: labelAttr.x,\n    // y: labelAttr.y,\n    align: label.style.align,\n    verticalAlign: label.style.verticalAlign,\n    labelLinePoints: cloneArr(labelLine && labelLine.shape.points)\n  };\n}\n\nvar LABEL_OPTION_TO_STYLE_KEYS = ['align', 'verticalAlign', 'width', 'height', 'fontSize'];\nvar dummyTransformable = new Transformable();\nvar labelLayoutInnerStore = makeInner();\nvar labelLineAnimationStore = makeInner();\n\nfunction extendWithKeys(target, source, keys) {\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n\n    if (source[key] != null) {\n      target[key] = source[key];\n    }\n  }\n}\n\nvar LABEL_LAYOUT_PROPS = ['x', 'y', 'rotation'];\n\nvar LabelManager =\n/** @class */\nfunction () {\n  function LabelManager() {\n    this._labelList = [];\n    this._chartViewList = [];\n  }\n\n  LabelManager.prototype.clearLabels = function () {\n    this._labelList = [];\n    this._chartViewList = [];\n  };\n  /**\r\n   * Add label to manager\r\n   */\n\n\n  LabelManager.prototype._addLabel = function (dataIndex, dataType, seriesModel, label, layoutOption) {\n    var labelStyle = label.style;\n    var hostEl = label.__hostTarget;\n    var textConfig = hostEl.textConfig || {}; // TODO: If label is in other state.\n\n    var labelTransform = label.getComputedTransform();\n    var labelRect = label.getBoundingRect().plain();\n    BoundingRect.applyTransform(labelRect, labelRect, labelTransform);\n\n    if (labelTransform) {\n      dummyTransformable.setLocalTransform(labelTransform);\n    } else {\n      // Identity transform.\n      dummyTransformable.x = dummyTransformable.y = dummyTransformable.rotation = dummyTransformable.originX = dummyTransformable.originY = 0;\n      dummyTransformable.scaleX = dummyTransformable.scaleY = 1;\n    }\n\n    dummyTransformable.rotation = normalizeRadian(dummyTransformable.rotation);\n    var host = label.__hostTarget;\n    var hostRect;\n\n    if (host) {\n      hostRect = host.getBoundingRect().plain();\n      var transform = host.getComputedTransform();\n      BoundingRect.applyTransform(hostRect, hostRect, transform);\n    }\n\n    var labelGuide = hostRect && host.getTextGuideLine();\n\n    this._labelList.push({\n      label: label,\n      labelLine: labelGuide,\n      seriesModel: seriesModel,\n      dataIndex: dataIndex,\n      dataType: dataType,\n      layoutOption: layoutOption,\n      computedLayoutOption: null,\n      rect: labelRect,\n      hostRect: hostRect,\n      // Label with lower priority will be hidden when overlapped\n      // Use rect size as default priority\n      priority: hostRect ? hostRect.width * hostRect.height : 0,\n      // Save default label attributes.\n      // For restore if developers want get back to default value in callback.\n      defaultAttr: {\n        ignore: label.ignore,\n        labelGuideIgnore: labelGuide && labelGuide.ignore,\n        x: dummyTransformable.x,\n        y: dummyTransformable.y,\n        scaleX: dummyTransformable.scaleX,\n        scaleY: dummyTransformable.scaleY,\n        rotation: dummyTransformable.rotation,\n        style: {\n          x: labelStyle.x,\n          y: labelStyle.y,\n          align: labelStyle.align,\n          verticalAlign: labelStyle.verticalAlign,\n          width: labelStyle.width,\n          height: labelStyle.height,\n          fontSize: labelStyle.fontSize\n        },\n        cursor: label.cursor,\n        attachedPos: textConfig.position,\n        attachedRot: textConfig.rotation\n      }\n    });\n  };\n\n  LabelManager.prototype.addLabelsOfSeries = function (chartView) {\n    var _this = this;\n\n    this._chartViewList.push(chartView);\n\n    var seriesModel = chartView.__model;\n    var layoutOption = seriesModel.get('labelLayout');\n    /**\r\n     * Ignore layouting if it's not specified anything.\r\n     */\n\n    if (!(isFunction(layoutOption) || keys(layoutOption).length)) {\n      return;\n    }\n\n    chartView.group.traverse(function (child) {\n      if (child.ignore) {\n        return true; // Stop traverse descendants.\n      } // Only support label being hosted on graphic elements.\n\n\n      var textEl = child.getTextContent();\n      var ecData = getECData(child); // Can only attach the text on the element with dataIndex\n\n      if (textEl && !textEl.disableLabelLayout) {\n        _this._addLabel(ecData.dataIndex, ecData.dataType, seriesModel, textEl, layoutOption);\n      }\n    });\n  };\n\n  LabelManager.prototype.updateLayoutConfig = function (api) {\n    var width = api.getWidth();\n    var height = api.getHeight();\n\n    function createDragHandler(el, labelLineModel) {\n      return function () {\n        updateLabelLinePoints(el, labelLineModel);\n      };\n    }\n\n    for (var i = 0; i < this._labelList.length; i++) {\n      var labelItem = this._labelList[i];\n      var label = labelItem.label;\n      var hostEl = label.__hostTarget;\n      var defaultLabelAttr = labelItem.defaultAttr;\n      var layoutOption = void 0; // TODO A global layout option?\n\n      if (isFunction(labelItem.layoutOption)) {\n        layoutOption = labelItem.layoutOption(prepareLayoutCallbackParams(labelItem, hostEl));\n      } else {\n        layoutOption = labelItem.layoutOption;\n      }\n\n      layoutOption = layoutOption || {};\n      labelItem.computedLayoutOption = layoutOption;\n      var degreeToRadian = Math.PI / 180; // TODO hostEl should always exists.\n      // Or label should not have parent because the x, y is all in global space.\n\n      if (hostEl) {\n        hostEl.setTextConfig({\n          // Force to set local false.\n          local: false,\n          // Ignore position and rotation config on the host el if x or y is changed.\n          position: layoutOption.x != null || layoutOption.y != null ? null : defaultLabelAttr.attachedPos,\n          // Ignore rotation config on the host el if rotation is changed.\n          rotation: layoutOption.rotate != null ? layoutOption.rotate * degreeToRadian : defaultLabelAttr.attachedRot,\n          offset: [layoutOption.dx || 0, layoutOption.dy || 0]\n        });\n      }\n\n      var needsUpdateLabelLine = false;\n\n      if (layoutOption.x != null) {\n        // TODO width of chart view.\n        label.x = parsePercent(layoutOption.x, width);\n        label.setStyle('x', 0); // Ignore movement in style. TODO: origin.\n\n        needsUpdateLabelLine = true;\n      } else {\n        label.x = defaultLabelAttr.x;\n        label.setStyle('x', defaultLabelAttr.style.x);\n      }\n\n      if (layoutOption.y != null) {\n        // TODO height of chart view.\n        label.y = parsePercent(layoutOption.y, height);\n        label.setStyle('y', 0); // Ignore movement in style.\n\n        needsUpdateLabelLine = true;\n      } else {\n        label.y = defaultLabelAttr.y;\n        label.setStyle('y', defaultLabelAttr.style.y);\n      }\n\n      if (layoutOption.labelLinePoints) {\n        var guideLine = hostEl.getTextGuideLine();\n\n        if (guideLine) {\n          guideLine.setShape({\n            points: layoutOption.labelLinePoints\n          }); // Not update\n\n          needsUpdateLabelLine = false;\n        }\n      }\n\n      var labelLayoutStore = labelLayoutInnerStore(label);\n      labelLayoutStore.needsUpdateLabelLine = needsUpdateLabelLine;\n      label.rotation = layoutOption.rotate != null ? layoutOption.rotate * degreeToRadian : defaultLabelAttr.rotation;\n      label.scaleX = defaultLabelAttr.scaleX;\n      label.scaleY = defaultLabelAttr.scaleY;\n\n      for (var k = 0; k < LABEL_OPTION_TO_STYLE_KEYS.length; k++) {\n        var key = LABEL_OPTION_TO_STYLE_KEYS[k];\n        label.setStyle(key, layoutOption[key] != null ? layoutOption[key] : defaultLabelAttr.style[key]);\n      }\n\n      if (layoutOption.draggable) {\n        label.draggable = true;\n        label.cursor = 'move';\n\n        if (hostEl) {\n          var hostModel = labelItem.seriesModel;\n\n          if (labelItem.dataIndex != null) {\n            var data = labelItem.seriesModel.getData(labelItem.dataType);\n            hostModel = data.getItemModel(labelItem.dataIndex);\n          }\n\n          label.on('drag', createDragHandler(hostEl, hostModel.getModel('labelLine')));\n        }\n      } else {\n        // TODO Other drag functions?\n        label.off('drag');\n        label.cursor = defaultLabelAttr.cursor;\n      }\n    }\n  };\n\n  LabelManager.prototype.layout = function (api) {\n    var width = api.getWidth();\n    var height = api.getHeight();\n    var labelList = prepareLayoutList(this._labelList);\n    var labelsNeedsAdjustOnX = filter(labelList, function (item) {\n      return item.layoutOption.moveOverlap === 'shiftX';\n    });\n    var labelsNeedsAdjustOnY = filter(labelList, function (item) {\n      return item.layoutOption.moveOverlap === 'shiftY';\n    });\n    shiftLayoutOnX(labelsNeedsAdjustOnX, 0, width);\n    shiftLayoutOnY(labelsNeedsAdjustOnY, 0, height);\n    var labelsNeedsHideOverlap = filter(labelList, function (item) {\n      return item.layoutOption.hideOverlap;\n    });\n    hideOverlap(labelsNeedsHideOverlap);\n  };\n  /**\r\n   * Process all labels. Not only labels with layoutOption.\r\n   */\n\n\n  LabelManager.prototype.processLabelsOverall = function () {\n    var _this = this;\n\n    each(this._chartViewList, function (chartView) {\n      var seriesModel = chartView.__model;\n      var ignoreLabelLineUpdate = chartView.ignoreLabelLineUpdate;\n      var animationEnabled = seriesModel.isAnimationEnabled();\n      chartView.group.traverse(function (child) {\n        if (child.ignore && !child.forceLabelAnimation) {\n          return true; // Stop traverse descendants.\n        }\n\n        var needsUpdateLabelLine = !ignoreLabelLineUpdate;\n        var label = child.getTextContent();\n\n        if (!needsUpdateLabelLine && label) {\n          needsUpdateLabelLine = labelLayoutInnerStore(label).needsUpdateLabelLine;\n        }\n\n        if (needsUpdateLabelLine) {\n          _this._updateLabelLine(child, seriesModel);\n        }\n\n        if (animationEnabled) {\n          _this._animateLabels(child, seriesModel);\n        }\n      });\n    });\n  };\n\n  LabelManager.prototype._updateLabelLine = function (el, seriesModel) {\n    // Only support label being hosted on graphic elements.\n    var textEl = el.getTextContent(); // Update label line style.\n\n    var ecData = getECData(el);\n    var dataIndex = ecData.dataIndex; // Only support labelLine on the labels represent data.\n\n    if (textEl && dataIndex != null) {\n      var data = seriesModel.getData(ecData.dataType);\n      var itemModel = data.getItemModel(dataIndex);\n      var defaultStyle = {};\n      var visualStyle = data.getItemVisual(dataIndex, 'style');\n\n      if (visualStyle) {\n        var visualType = data.getVisual('drawType'); // Default to be same with main color\n\n        defaultStyle.stroke = visualStyle[visualType];\n      }\n\n      var labelLineModel = itemModel.getModel('labelLine');\n      setLabelLineStyle(el, getLabelLineStatesModels(itemModel), defaultStyle);\n      updateLabelLinePoints(el, labelLineModel);\n    }\n  };\n\n  LabelManager.prototype._animateLabels = function (el, seriesModel) {\n    var textEl = el.getTextContent();\n    var guideLine = el.getTextGuideLine(); // Animate\n\n    if (textEl // `forceLabelAnimation` has the highest priority\n    && (el.forceLabelAnimation || !textEl.ignore && !textEl.invisible && !el.disableLabelAnimation && !isElementRemoved(el))) {\n      var layoutStore = labelLayoutInnerStore(textEl);\n      var oldLayout = layoutStore.oldLayout;\n      var ecData = getECData(el);\n      var dataIndex = ecData.dataIndex;\n      var newProps = {\n        x: textEl.x,\n        y: textEl.y,\n        rotation: textEl.rotation\n      };\n      var data = seriesModel.getData(ecData.dataType);\n\n      if (!oldLayout) {\n        textEl.attr(newProps); // Disable fade in animation if value animation is enabled.\n\n        if (!labelInner(textEl).valueAnimation) {\n          var oldOpacity = retrieve2(textEl.style.opacity, 1); // Fade in animation\n\n          textEl.style.opacity = 0;\n          initProps(textEl, {\n            style: {\n              opacity: oldOpacity\n            }\n          }, seriesModel, dataIndex);\n        }\n      } else {\n        textEl.attr(oldLayout); // Make sure the animation from is in the right status.\n\n        var prevStates = el.prevStates;\n\n        if (prevStates) {\n          if (indexOf(prevStates, 'select') >= 0) {\n            textEl.attr(layoutStore.oldLayoutSelect);\n          }\n\n          if (indexOf(prevStates, 'emphasis') >= 0) {\n            textEl.attr(layoutStore.oldLayoutEmphasis);\n          }\n        }\n\n        updateProps(textEl, newProps, seriesModel, dataIndex);\n      }\n\n      layoutStore.oldLayout = newProps;\n\n      if (textEl.states.select) {\n        var layoutSelect = layoutStore.oldLayoutSelect = {};\n        extendWithKeys(layoutSelect, newProps, LABEL_LAYOUT_PROPS);\n        extendWithKeys(layoutSelect, textEl.states.select, LABEL_LAYOUT_PROPS);\n      }\n\n      if (textEl.states.emphasis) {\n        var layoutEmphasis = layoutStore.oldLayoutEmphasis = {};\n        extendWithKeys(layoutEmphasis, newProps, LABEL_LAYOUT_PROPS);\n        extendWithKeys(layoutEmphasis, textEl.states.emphasis, LABEL_LAYOUT_PROPS);\n      }\n\n      animateLabelValue(textEl, dataIndex, data, seriesModel, seriesModel);\n    }\n\n    if (guideLine && !guideLine.ignore && !guideLine.invisible) {\n      var layoutStore = labelLineAnimationStore(guideLine);\n      var oldLayout = layoutStore.oldLayout;\n      var newLayout = {\n        points: guideLine.shape.points\n      };\n\n      if (!oldLayout) {\n        guideLine.setShape(newLayout);\n        guideLine.style.strokePercent = 0;\n        initProps(guideLine, {\n          style: {\n            strokePercent: 1\n          }\n        }, seriesModel);\n      } else {\n        guideLine.attr({\n          shape: oldLayout\n        });\n        updateProps(guideLine, {\n          shape: newLayout\n        }, seriesModel);\n      }\n\n      layoutStore.oldLayout = newLayout;\n    }\n  };\n\n  return LabelManager;\n}();\n\nexport default LabelManager;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { makeInner } from '../util/model.js';\nimport LabelManager from './LabelManager.js';\nvar getLabelManager = makeInner();\nexport function installLabelLayout(registers) {\n  registers.registerUpdateLifecycle('series:beforeupdate', function (ecModel, api, params) {\n    // TODO api provide an namespace that can save stuff per instance\n    var labelManager = getLabelManager(api).labelManager;\n\n    if (!labelManager) {\n      labelManager = getLabelManager(api).labelManager = new LabelManager();\n    }\n\n    labelManager.clearLabels();\n  });\n  registers.registerUpdateLifecycle('series:layoutlabels', function (ecModel, api, params) {\n    var labelManager = getLabelManager(api).labelManager;\n    params.updatedSeries.forEach(function (series) {\n      labelManager.addLabelsOfSeries(api.getViewOfSeriesModel(series));\n    });\n    labelManager.updateLayoutConfig(api);\n    labelManager.layout(api);\n    labelManager.processLabelsOverall();\n  });\n}","import { __extends } from \"tslib\";\nimport * as util from '../core/util.js';\nimport { devicePixelRatio } from '../config.js';\nimport Eventful from '../core/Eventful.js';\nimport { getCanvasGradient } from './helper.js';\nimport { createCanvasPattern } from './graphic.js';\nimport BoundingRect from '../core/BoundingRect.js';\nimport { REDRAW_BIT } from '../graphic/constants.js';\nimport { platformApi } from '../core/platform.js';\nfunction createDom(id, painter, dpr) {\n    var newDom = platformApi.createCanvas();\n    var width = painter.getWidth();\n    var height = painter.getHeight();\n    var newDomStyle = newDom.style;\n    if (newDomStyle) {\n        newDomStyle.position = 'absolute';\n        newDomStyle.left = '0';\n        newDomStyle.top = '0';\n        newDomStyle.width = width + 'px';\n        newDomStyle.height = height + 'px';\n        newDom.setAttribute('data-zr-dom-id', id);\n    }\n    newDom.width = width * dpr;\n    newDom.height = height * dpr;\n    return newDom;\n}\n;\nvar Layer = (function (_super) {\n    __extends(Layer, _super);\n    function Layer(id, painter, dpr) {\n        var _this = _super.call(this) || this;\n        _this.motionBlur = false;\n        _this.lastFrameAlpha = 0.7;\n        _this.dpr = 1;\n        _this.virtual = false;\n        _this.config = {};\n        _this.incremental = false;\n        _this.zlevel = 0;\n        _this.maxRepaintRectCount = 5;\n        _this.__dirty = true;\n        _this.__firstTimePaint = true;\n        _this.__used = false;\n        _this.__drawIndex = 0;\n        _this.__startIndex = 0;\n        _this.__endIndex = 0;\n        _this.__prevStartIndex = null;\n        _this.__prevEndIndex = null;\n        var dom;\n        dpr = dpr || devicePixelRatio;\n        if (typeof id === 'string') {\n            dom = createDom(id, painter, dpr);\n        }\n        else if (util.isObject(id)) {\n            dom = id;\n            id = dom.id;\n        }\n        _this.id = id;\n        _this.dom = dom;\n        var domStyle = dom.style;\n        if (domStyle) {\n            util.disableUserSelect(dom);\n            dom.onselectstart = function () { return false; };\n            domStyle.padding = '0';\n            domStyle.margin = '0';\n            domStyle.borderWidth = '0';\n        }\n        _this.painter = painter;\n        _this.dpr = dpr;\n        return _this;\n    }\n    Layer.prototype.getElementCount = function () {\n        return this.__endIndex - this.__startIndex;\n    };\n    Layer.prototype.afterBrush = function () {\n        this.__prevStartIndex = this.__startIndex;\n        this.__prevEndIndex = this.__endIndex;\n    };\n    Layer.prototype.initContext = function () {\n        this.ctx = this.dom.getContext('2d');\n        this.ctx.dpr = this.dpr;\n    };\n    Layer.prototype.setUnpainted = function () {\n        this.__firstTimePaint = true;\n    };\n    Layer.prototype.createBackBuffer = function () {\n        var dpr = this.dpr;\n        this.domBack = createDom('back-' + this.id, this.painter, dpr);\n        this.ctxBack = this.domBack.getContext('2d');\n        if (dpr !== 1) {\n            this.ctxBack.scale(dpr, dpr);\n        }\n    };\n    Layer.prototype.createRepaintRects = function (displayList, prevList, viewWidth, viewHeight) {\n        if (this.__firstTimePaint) {\n            this.__firstTimePaint = false;\n            return null;\n        }\n        var mergedRepaintRects = [];\n        var maxRepaintRectCount = this.maxRepaintRectCount;\n        var full = false;\n        var pendingRect = new BoundingRect(0, 0, 0, 0);\n        function addRectToMergePool(rect) {\n            if (!rect.isFinite() || rect.isZero()) {\n                return;\n            }\n            if (mergedRepaintRects.length === 0) {\n                var boundingRect = new BoundingRect(0, 0, 0, 0);\n                boundingRect.copy(rect);\n                mergedRepaintRects.push(boundingRect);\n            }\n            else {\n                var isMerged = false;\n                var minDeltaArea = Infinity;\n                var bestRectToMergeIdx = 0;\n                for (var i = 0; i < mergedRepaintRects.length; ++i) {\n                    var mergedRect = mergedRepaintRects[i];\n                    if (mergedRect.intersect(rect)) {\n                        var pendingRect_1 = new BoundingRect(0, 0, 0, 0);\n                        pendingRect_1.copy(mergedRect);\n                        pendingRect_1.union(rect);\n                        mergedRepaintRects[i] = pendingRect_1;\n                        isMerged = true;\n                        break;\n                    }\n                    else if (full) {\n                        pendingRect.copy(rect);\n                        pendingRect.union(mergedRect);\n                        var aArea = rect.width * rect.height;\n                        var bArea = mergedRect.width * mergedRect.height;\n                        var pendingArea = pendingRect.width * pendingRect.height;\n                        var deltaArea = pendingArea - aArea - bArea;\n                        if (deltaArea < minDeltaArea) {\n                            minDeltaArea = deltaArea;\n                            bestRectToMergeIdx = i;\n                        }\n                    }\n                }\n                if (full) {\n                    mergedRepaintRects[bestRectToMergeIdx].union(rect);\n                    isMerged = true;\n                }\n                if (!isMerged) {\n                    var boundingRect = new BoundingRect(0, 0, 0, 0);\n                    boundingRect.copy(rect);\n                    mergedRepaintRects.push(boundingRect);\n                }\n                if (!full) {\n                    full = mergedRepaintRects.length >= maxRepaintRectCount;\n                }\n            }\n        }\n        for (var i = this.__startIndex; i < this.__endIndex; ++i) {\n            var el = displayList[i];\n            if (el) {\n                var shouldPaint = el.shouldBePainted(viewWidth, viewHeight, true, true);\n                var prevRect = el.__isRendered && ((el.__dirty & REDRAW_BIT) || !shouldPaint)\n                    ? el.getPrevPaintRect()\n                    : null;\n                if (prevRect) {\n                    addRectToMergePool(prevRect);\n                }\n                var curRect = shouldPaint && ((el.__dirty & REDRAW_BIT) || !el.__isRendered)\n                    ? el.getPaintRect()\n                    : null;\n                if (curRect) {\n                    addRectToMergePool(curRect);\n                }\n            }\n        }\n        for (var i = this.__prevStartIndex; i < this.__prevEndIndex; ++i) {\n            var el = prevList[i];\n            var shouldPaint = el.shouldBePainted(viewWidth, viewHeight, true, true);\n            if (el && (!shouldPaint || !el.__zr) && el.__isRendered) {\n                var prevRect = el.getPrevPaintRect();\n                if (prevRect) {\n                    addRectToMergePool(prevRect);\n                }\n            }\n        }\n        var hasIntersections;\n        do {\n            hasIntersections = false;\n            for (var i = 0; i < mergedRepaintRects.length;) {\n                if (mergedRepaintRects[i].isZero()) {\n                    mergedRepaintRects.splice(i, 1);\n                    continue;\n                }\n                for (var j = i + 1; j < mergedRepaintRects.length;) {\n                    if (mergedRepaintRects[i].intersect(mergedRepaintRects[j])) {\n                        hasIntersections = true;\n                        mergedRepaintRects[i].union(mergedRepaintRects[j]);\n                        mergedRepaintRects.splice(j, 1);\n                    }\n                    else {\n                        j++;\n                    }\n                }\n                i++;\n            }\n        } while (hasIntersections);\n        this._paintRects = mergedRepaintRects;\n        return mergedRepaintRects;\n    };\n    Layer.prototype.debugGetPaintRects = function () {\n        return (this._paintRects || []).slice();\n    };\n    Layer.prototype.resize = function (width, height) {\n        var dpr = this.dpr;\n        var dom = this.dom;\n        var domStyle = dom.style;\n        var domBack = this.domBack;\n        if (domStyle) {\n            domStyle.width = width + 'px';\n            domStyle.height = height + 'px';\n        }\n        dom.width = width * dpr;\n        dom.height = height * dpr;\n        if (domBack) {\n            domBack.width = width * dpr;\n            domBack.height = height * dpr;\n            if (dpr !== 1) {\n                this.ctxBack.scale(dpr, dpr);\n            }\n        }\n    };\n    Layer.prototype.clear = function (clearAll, clearColor, repaintRects) {\n        var dom = this.dom;\n        var ctx = this.ctx;\n        var width = dom.width;\n        var height = dom.height;\n        clearColor = clearColor || this.clearColor;\n        var haveMotionBLur = this.motionBlur && !clearAll;\n        var lastFrameAlpha = this.lastFrameAlpha;\n        var dpr = this.dpr;\n        var self = this;\n        if (haveMotionBLur) {\n            if (!this.domBack) {\n                this.createBackBuffer();\n            }\n            this.ctxBack.globalCompositeOperation = 'copy';\n            this.ctxBack.drawImage(dom, 0, 0, width / dpr, height / dpr);\n        }\n        var domBack = this.domBack;\n        function doClear(x, y, width, height) {\n            ctx.clearRect(x, y, width, height);\n            if (clearColor && clearColor !== 'transparent') {\n                var clearColorGradientOrPattern = void 0;\n                if (util.isGradientObject(clearColor)) {\n                    var shouldCache = clearColor.global || (clearColor.__width === width\n                        && clearColor.__height === height);\n                    clearColorGradientOrPattern = shouldCache\n                        && clearColor.__canvasGradient\n                        || getCanvasGradient(ctx, clearColor, {\n                            x: 0,\n                            y: 0,\n                            width: width,\n                            height: height\n                        });\n                    clearColor.__canvasGradient = clearColorGradientOrPattern;\n                    clearColor.__width = width;\n                    clearColor.__height = height;\n                }\n                else if (util.isImagePatternObject(clearColor)) {\n                    clearColor.scaleX = clearColor.scaleX || dpr;\n                    clearColor.scaleY = clearColor.scaleY || dpr;\n                    clearColorGradientOrPattern = createCanvasPattern(ctx, clearColor, {\n                        dirty: function () {\n                            self.setUnpainted();\n                            self.__painter.refresh();\n                        }\n                    });\n                }\n                ctx.save();\n                ctx.fillStyle = clearColorGradientOrPattern || clearColor;\n                ctx.fillRect(x, y, width, height);\n                ctx.restore();\n            }\n            if (haveMotionBLur) {\n                ctx.save();\n                ctx.globalAlpha = lastFrameAlpha;\n                ctx.drawImage(domBack, x, y, width, height);\n                ctx.restore();\n            }\n        }\n        ;\n        if (!repaintRects || haveMotionBLur) {\n            doClear(0, 0, width, height);\n        }\n        else if (repaintRects.length) {\n            util.each(repaintRects, function (rect) {\n                doClear(rect.x * dpr, rect.y * dpr, rect.width * dpr, rect.height * dpr);\n            });\n        }\n    };\n    return Layer;\n}(Eventful));\nexport default Layer;\n","import { devicePixelRatio } from '../config.js';\nimport * as util from '../core/util.js';\nimport Layer from './Layer.js';\nimport requestAnimationFrame from '../animation/requestAnimationFrame.js';\nimport env from '../core/env.js';\nimport { brush, brushSingle } from './graphic.js';\nimport { REDRAW_BIT } from '../graphic/constants.js';\nimport { getSize } from './helper.js';\nvar HOVER_LAYER_ZLEVEL = 1e5;\nvar CANVAS_ZLEVEL = 314159;\nvar EL_AFTER_INCREMENTAL_INC = 0.01;\nvar INCREMENTAL_INC = 0.001;\nfunction isLayerValid(layer) {\n    if (!layer) {\n        return false;\n    }\n    if (layer.__builtin__) {\n        return true;\n    }\n    if (typeof (layer.resize) !== 'function'\n        || typeof (layer.refresh) !== 'function') {\n        return false;\n    }\n    return true;\n}\nfunction createRoot(width, height) {\n    var domRoot = document.createElement('div');\n    domRoot.style.cssText = [\n        'position:relative',\n        'width:' + width + 'px',\n        'height:' + height + 'px',\n        'padding:0',\n        'margin:0',\n        'border-width:0'\n    ].join(';') + ';';\n    return domRoot;\n}\nvar CanvasPainter = (function () {\n    function CanvasPainter(root, storage, opts, id) {\n        this.type = 'canvas';\n        this._zlevelList = [];\n        this._prevDisplayList = [];\n        this._layers = {};\n        this._layerConfig = {};\n        this._needsManuallyCompositing = false;\n        this.type = 'canvas';\n        var singleCanvas = !root.nodeName\n            || root.nodeName.toUpperCase() === 'CANVAS';\n        this._opts = opts = util.extend({}, opts || {});\n        this.dpr = opts.devicePixelRatio || devicePixelRatio;\n        this._singleCanvas = singleCanvas;\n        this.root = root;\n        var rootStyle = root.style;\n        if (rootStyle) {\n            util.disableUserSelect(root);\n            root.innerHTML = '';\n        }\n        this.storage = storage;\n        var zlevelList = this._zlevelList;\n        this._prevDisplayList = [];\n        var layers = this._layers;\n        if (!singleCanvas) {\n            this._width = getSize(root, 0, opts);\n            this._height = getSize(root, 1, opts);\n            var domRoot = this._domRoot = createRoot(this._width, this._height);\n            root.appendChild(domRoot);\n        }\n        else {\n            var rootCanvas = root;\n            var width = rootCanvas.width;\n            var height = rootCanvas.height;\n            if (opts.width != null) {\n                width = opts.width;\n            }\n            if (opts.height != null) {\n                height = opts.height;\n            }\n            this.dpr = opts.devicePixelRatio || 1;\n            rootCanvas.width = width * this.dpr;\n            rootCanvas.height = height * this.dpr;\n            this._width = width;\n            this._height = height;\n            var mainLayer = new Layer(rootCanvas, this, this.dpr);\n            mainLayer.__builtin__ = true;\n            mainLayer.initContext();\n            layers[CANVAS_ZLEVEL] = mainLayer;\n            mainLayer.zlevel = CANVAS_ZLEVEL;\n            zlevelList.push(CANVAS_ZLEVEL);\n            this._domRoot = root;\n        }\n    }\n    CanvasPainter.prototype.getType = function () {\n        return 'canvas';\n    };\n    CanvasPainter.prototype.isSingleCanvas = function () {\n        return this._singleCanvas;\n    };\n    CanvasPainter.prototype.getViewportRoot = function () {\n        return this._domRoot;\n    };\n    CanvasPainter.prototype.getViewportRootOffset = function () {\n        var viewportRoot = this.getViewportRoot();\n        if (viewportRoot) {\n            return {\n                offsetLeft: viewportRoot.offsetLeft || 0,\n                offsetTop: viewportRoot.offsetTop || 0\n            };\n        }\n    };\n    CanvasPainter.prototype.refresh = function (paintAll) {\n        var list = this.storage.getDisplayList(true);\n        var prevList = this._prevDisplayList;\n        var zlevelList = this._zlevelList;\n        this._redrawId = Math.random();\n        this._paintList(list, prevList, paintAll, this._redrawId);\n        for (var i = 0; i < zlevelList.length; i++) {\n            var z = zlevelList[i];\n            var layer = this._layers[z];\n            if (!layer.__builtin__ && layer.refresh) {\n                var clearColor = i === 0 ? this._backgroundColor : null;\n                layer.refresh(clearColor);\n            }\n        }\n        if (this._opts.useDirtyRect) {\n            this._prevDisplayList = list.slice();\n        }\n        return this;\n    };\n    CanvasPainter.prototype.refreshHover = function () {\n        this._paintHoverList(this.storage.getDisplayList(false));\n    };\n    CanvasPainter.prototype._paintHoverList = function (list) {\n        var len = list.length;\n        var hoverLayer = this._hoverlayer;\n        hoverLayer && hoverLayer.clear();\n        if (!len) {\n            return;\n        }\n        var scope = {\n            inHover: true,\n            viewWidth: this._width,\n            viewHeight: this._height\n        };\n        var ctx;\n        for (var i = 0; i < len; i++) {\n            var el = list[i];\n            if (el.__inHover) {\n                if (!hoverLayer) {\n                    hoverLayer = this._hoverlayer = this.getLayer(HOVER_LAYER_ZLEVEL);\n                }\n                if (!ctx) {\n                    ctx = hoverLayer.ctx;\n                    ctx.save();\n                }\n                brush(ctx, el, scope, i === len - 1);\n            }\n        }\n        if (ctx) {\n            ctx.restore();\n        }\n    };\n    CanvasPainter.prototype.getHoverLayer = function () {\n        return this.getLayer(HOVER_LAYER_ZLEVEL);\n    };\n    CanvasPainter.prototype.paintOne = function (ctx, el) {\n        brushSingle(ctx, el);\n    };\n    CanvasPainter.prototype._paintList = function (list, prevList, paintAll, redrawId) {\n        if (this._redrawId !== redrawId) {\n            return;\n        }\n        paintAll = paintAll || false;\n        this._updateLayerStatus(list);\n        var _a = this._doPaintList(list, prevList, paintAll), finished = _a.finished, needsRefreshHover = _a.needsRefreshHover;\n        if (this._needsManuallyCompositing) {\n            this._compositeManually();\n        }\n        if (needsRefreshHover) {\n            this._paintHoverList(list);\n        }\n        if (!finished) {\n            var self_1 = this;\n            requestAnimationFrame(function () {\n                self_1._paintList(list, prevList, paintAll, redrawId);\n            });\n        }\n        else {\n            this.eachLayer(function (layer) {\n                layer.afterBrush && layer.afterBrush();\n            });\n        }\n    };\n    CanvasPainter.prototype._compositeManually = function () {\n        var ctx = this.getLayer(CANVAS_ZLEVEL).ctx;\n        var width = this._domRoot.width;\n        var height = this._domRoot.height;\n        ctx.clearRect(0, 0, width, height);\n        this.eachBuiltinLayer(function (layer) {\n            if (layer.virtual) {\n                ctx.drawImage(layer.dom, 0, 0, width, height);\n            }\n        });\n    };\n    CanvasPainter.prototype._doPaintList = function (list, prevList, paintAll) {\n        var _this = this;\n        var layerList = [];\n        var useDirtyRect = this._opts.useDirtyRect;\n        for (var zi = 0; zi < this._zlevelList.length; zi++) {\n            var zlevel = this._zlevelList[zi];\n            var layer = this._layers[zlevel];\n            if (layer.__builtin__\n                && layer !== this._hoverlayer\n                && (layer.__dirty || paintAll)) {\n                layerList.push(layer);\n            }\n        }\n        var finished = true;\n        var needsRefreshHover = false;\n        var _loop_1 = function (k) {\n            var layer = layerList[k];\n            var ctx = layer.ctx;\n            var repaintRects = useDirtyRect\n                && layer.createRepaintRects(list, prevList, this_1._width, this_1._height);\n            var start = paintAll ? layer.__startIndex : layer.__drawIndex;\n            var useTimer = !paintAll && layer.incremental && Date.now;\n            var startTime = useTimer && Date.now();\n            var clearColor = layer.zlevel === this_1._zlevelList[0]\n                ? this_1._backgroundColor : null;\n            if (layer.__startIndex === layer.__endIndex) {\n                layer.clear(false, clearColor, repaintRects);\n            }\n            else if (start === layer.__startIndex) {\n                var firstEl = list[start];\n                if (!firstEl.incremental || !firstEl.notClear || paintAll) {\n                    layer.clear(false, clearColor, repaintRects);\n                }\n            }\n            if (start === -1) {\n                console.error('For some unknown reason. drawIndex is -1');\n                start = layer.__startIndex;\n            }\n            var i;\n            var repaint = function (repaintRect) {\n                var scope = {\n                    inHover: false,\n                    allClipped: false,\n                    prevEl: null,\n                    viewWidth: _this._width,\n                    viewHeight: _this._height\n                };\n                for (i = start; i < layer.__endIndex; i++) {\n                    var el = list[i];\n                    if (el.__inHover) {\n                        needsRefreshHover = true;\n                    }\n                    _this._doPaintEl(el, layer, useDirtyRect, repaintRect, scope, i === layer.__endIndex - 1);\n                    if (useTimer) {\n                        var dTime = Date.now() - startTime;\n                        if (dTime > 15) {\n                            break;\n                        }\n                    }\n                }\n                if (scope.prevElClipPaths) {\n                    ctx.restore();\n                }\n            };\n            if (repaintRects) {\n                if (repaintRects.length === 0) {\n                    i = layer.__endIndex;\n                }\n                else {\n                    var dpr = this_1.dpr;\n                    for (var r = 0; r < repaintRects.length; ++r) {\n                        var rect = repaintRects[r];\n                        ctx.save();\n                        ctx.beginPath();\n                        ctx.rect(rect.x * dpr, rect.y * dpr, rect.width * dpr, rect.height * dpr);\n                        ctx.clip();\n                        repaint(rect);\n                        ctx.restore();\n                    }\n                }\n            }\n            else {\n                ctx.save();\n                repaint();\n                ctx.restore();\n            }\n            layer.__drawIndex = i;\n            if (layer.__drawIndex < layer.__endIndex) {\n                finished = false;\n            }\n        };\n        var this_1 = this;\n        for (var k = 0; k < layerList.length; k++) {\n            _loop_1(k);\n        }\n        if (env.wxa) {\n            util.each(this._layers, function (layer) {\n                if (layer && layer.ctx && layer.ctx.draw) {\n                    layer.ctx.draw();\n                }\n            });\n        }\n        return {\n            finished: finished,\n            needsRefreshHover: needsRefreshHover\n        };\n    };\n    CanvasPainter.prototype._doPaintEl = function (el, currentLayer, useDirtyRect, repaintRect, scope, isLast) {\n        var ctx = currentLayer.ctx;\n        if (useDirtyRect) {\n            var paintRect = el.getPaintRect();\n            if (!repaintRect || paintRect && paintRect.intersect(repaintRect)) {\n                brush(ctx, el, scope, isLast);\n                el.setPrevPaintRect(paintRect);\n            }\n        }\n        else {\n            brush(ctx, el, scope, isLast);\n        }\n    };\n    CanvasPainter.prototype.getLayer = function (zlevel, virtual) {\n        if (this._singleCanvas && !this._needsManuallyCompositing) {\n            zlevel = CANVAS_ZLEVEL;\n        }\n        var layer = this._layers[zlevel];\n        if (!layer) {\n            layer = new Layer('zr_' + zlevel, this, this.dpr);\n            layer.zlevel = zlevel;\n            layer.__builtin__ = true;\n            if (this._layerConfig[zlevel]) {\n                util.merge(layer, this._layerConfig[zlevel], true);\n            }\n            else if (this._layerConfig[zlevel - EL_AFTER_INCREMENTAL_INC]) {\n                util.merge(layer, this._layerConfig[zlevel - EL_AFTER_INCREMENTAL_INC], true);\n            }\n            if (virtual) {\n                layer.virtual = virtual;\n            }\n            this.insertLayer(zlevel, layer);\n            layer.initContext();\n        }\n        return layer;\n    };\n    CanvasPainter.prototype.insertLayer = function (zlevel, layer) {\n        var layersMap = this._layers;\n        var zlevelList = this._zlevelList;\n        var len = zlevelList.length;\n        var domRoot = this._domRoot;\n        var prevLayer = null;\n        var i = -1;\n        if (layersMap[zlevel]) {\n            if (process.env.NODE_ENV !== 'production') {\n                util.logError('ZLevel ' + zlevel + ' has been used already');\n            }\n            return;\n        }\n        if (!isLayerValid(layer)) {\n            if (process.env.NODE_ENV !== 'production') {\n                util.logError('Layer of zlevel ' + zlevel + ' is not valid');\n            }\n            return;\n        }\n        if (len > 0 && zlevel > zlevelList[0]) {\n            for (i = 0; i < len - 1; i++) {\n                if (zlevelList[i] < zlevel\n                    && zlevelList[i + 1] > zlevel) {\n                    break;\n                }\n            }\n            prevLayer = layersMap[zlevelList[i]];\n        }\n        zlevelList.splice(i + 1, 0, zlevel);\n        layersMap[zlevel] = layer;\n        if (!layer.virtual) {\n            if (prevLayer) {\n                var prevDom = prevLayer.dom;\n                if (prevDom.nextSibling) {\n                    domRoot.insertBefore(layer.dom, prevDom.nextSibling);\n                }\n                else {\n                    domRoot.appendChild(layer.dom);\n                }\n            }\n            else {\n                if (domRoot.firstChild) {\n                    domRoot.insertBefore(layer.dom, domRoot.firstChild);\n                }\n                else {\n                    domRoot.appendChild(layer.dom);\n                }\n            }\n        }\n        layer.__painter = this;\n    };\n    CanvasPainter.prototype.eachLayer = function (cb, context) {\n        var zlevelList = this._zlevelList;\n        for (var i = 0; i < zlevelList.length; i++) {\n            var z = zlevelList[i];\n            cb.call(context, this._layers[z], z);\n        }\n    };\n    CanvasPainter.prototype.eachBuiltinLayer = function (cb, context) {\n        var zlevelList = this._zlevelList;\n        for (var i = 0; i < zlevelList.length; i++) {\n            var z = zlevelList[i];\n            var layer = this._layers[z];\n            if (layer.__builtin__) {\n                cb.call(context, layer, z);\n            }\n        }\n    };\n    CanvasPainter.prototype.eachOtherLayer = function (cb, context) {\n        var zlevelList = this._zlevelList;\n        for (var i = 0; i < zlevelList.length; i++) {\n            var z = zlevelList[i];\n            var layer = this._layers[z];\n            if (!layer.__builtin__) {\n                cb.call(context, layer, z);\n            }\n        }\n    };\n    CanvasPainter.prototype.getLayers = function () {\n        return this._layers;\n    };\n    CanvasPainter.prototype._updateLayerStatus = function (list) {\n        this.eachBuiltinLayer(function (layer, z) {\n            layer.__dirty = layer.__used = false;\n        });\n        function updatePrevLayer(idx) {\n            if (prevLayer) {\n                if (prevLayer.__endIndex !== idx) {\n                    prevLayer.__dirty = true;\n                }\n                prevLayer.__endIndex = idx;\n            }\n        }\n        if (this._singleCanvas) {\n            for (var i_1 = 1; i_1 < list.length; i_1++) {\n                var el = list[i_1];\n                if (el.zlevel !== list[i_1 - 1].zlevel || el.incremental) {\n                    this._needsManuallyCompositing = true;\n                    break;\n                }\n            }\n        }\n        var prevLayer = null;\n        var incrementalLayerCount = 0;\n        var prevZlevel;\n        var i;\n        for (i = 0; i < list.length; i++) {\n            var el = list[i];\n            var zlevel = el.zlevel;\n            var layer = void 0;\n            if (prevZlevel !== zlevel) {\n                prevZlevel = zlevel;\n                incrementalLayerCount = 0;\n            }\n            if (el.incremental) {\n                layer = this.getLayer(zlevel + INCREMENTAL_INC, this._needsManuallyCompositing);\n                layer.incremental = true;\n                incrementalLayerCount = 1;\n            }\n            else {\n                layer = this.getLayer(zlevel + (incrementalLayerCount > 0 ? EL_AFTER_INCREMENTAL_INC : 0), this._needsManuallyCompositing);\n            }\n            if (!layer.__builtin__) {\n                util.logError('ZLevel ' + zlevel + ' has been used by unkown layer ' + layer.id);\n            }\n            if (layer !== prevLayer) {\n                layer.__used = true;\n                if (layer.__startIndex !== i) {\n                    layer.__dirty = true;\n                }\n                layer.__startIndex = i;\n                if (!layer.incremental) {\n                    layer.__drawIndex = i;\n                }\n                else {\n                    layer.__drawIndex = -1;\n                }\n                updatePrevLayer(i);\n                prevLayer = layer;\n            }\n            if ((el.__dirty & REDRAW_BIT) && !el.__inHover) {\n                layer.__dirty = true;\n                if (layer.incremental && layer.__drawIndex < 0) {\n                    layer.__drawIndex = i;\n                }\n            }\n        }\n        updatePrevLayer(i);\n        this.eachBuiltinLayer(function (layer, z) {\n            if (!layer.__used && layer.getElementCount() > 0) {\n                layer.__dirty = true;\n                layer.__startIndex = layer.__endIndex = layer.__drawIndex = 0;\n            }\n            if (layer.__dirty && layer.__drawIndex < 0) {\n                layer.__drawIndex = layer.__startIndex;\n            }\n        });\n    };\n    CanvasPainter.prototype.clear = function () {\n        this.eachBuiltinLayer(this._clearLayer);\n        return this;\n    };\n    CanvasPainter.prototype._clearLayer = function (layer) {\n        layer.clear();\n    };\n    CanvasPainter.prototype.setBackgroundColor = function (backgroundColor) {\n        this._backgroundColor = backgroundColor;\n        util.each(this._layers, function (layer) {\n            layer.setUnpainted();\n        });\n    };\n    CanvasPainter.prototype.configLayer = function (zlevel, config) {\n        if (config) {\n            var layerConfig = this._layerConfig;\n            if (!layerConfig[zlevel]) {\n                layerConfig[zlevel] = config;\n            }\n            else {\n                util.merge(layerConfig[zlevel], config, true);\n            }\n            for (var i = 0; i < this._zlevelList.length; i++) {\n                var _zlevel = this._zlevelList[i];\n                if (_zlevel === zlevel || _zlevel === zlevel + EL_AFTER_INCREMENTAL_INC) {\n                    var layer = this._layers[_zlevel];\n                    util.merge(layer, layerConfig[zlevel], true);\n                }\n            }\n        }\n    };\n    CanvasPainter.prototype.delLayer = function (zlevel) {\n        var layers = this._layers;\n        var zlevelList = this._zlevelList;\n        var layer = layers[zlevel];\n        if (!layer) {\n            return;\n        }\n        layer.dom.parentNode.removeChild(layer.dom);\n        delete layers[zlevel];\n        zlevelList.splice(util.indexOf(zlevelList, zlevel), 1);\n    };\n    CanvasPainter.prototype.resize = function (width, height) {\n        if (!this._domRoot.style) {\n            if (width == null || height == null) {\n                return;\n            }\n            this._width = width;\n            this._height = height;\n            this.getLayer(CANVAS_ZLEVEL).resize(width, height);\n        }\n        else {\n            var domRoot = this._domRoot;\n            domRoot.style.display = 'none';\n            var opts = this._opts;\n            var root = this.root;\n            width != null && (opts.width = width);\n            height != null && (opts.height = height);\n            width = getSize(root, 0, opts);\n            height = getSize(root, 1, opts);\n            domRoot.style.display = '';\n            if (this._width !== width || height !== this._height) {\n                domRoot.style.width = width + 'px';\n                domRoot.style.height = height + 'px';\n                for (var id in this._layers) {\n                    if (this._layers.hasOwnProperty(id)) {\n                        this._layers[id].resize(width, height);\n                    }\n                }\n                this.refresh(true);\n            }\n            this._width = width;\n            this._height = height;\n        }\n        return this;\n    };\n    CanvasPainter.prototype.clearLayer = function (zlevel) {\n        var layer = this._layers[zlevel];\n        if (layer) {\n            layer.clear();\n        }\n    };\n    CanvasPainter.prototype.dispose = function () {\n        this.root.innerHTML = '';\n        this.root =\n            this.storage =\n                this._domRoot =\n                    this._layers = null;\n    };\n    CanvasPainter.prototype.getRenderedCanvas = function (opts) {\n        opts = opts || {};\n        if (this._singleCanvas && !this._compositeManually) {\n            return this._layers[CANVAS_ZLEVEL].dom;\n        }\n        var imageLayer = new Layer('image', this, opts.pixelRatio || this.dpr);\n        imageLayer.initContext();\n        imageLayer.clear(false, opts.backgroundColor || this._backgroundColor);\n        var ctx = imageLayer.ctx;\n        if (opts.pixelRatio <= this.dpr) {\n            this.refresh();\n            var width_1 = imageLayer.dom.width;\n            var height_1 = imageLayer.dom.height;\n            this.eachLayer(function (layer) {\n                if (layer.__builtin__) {\n                    ctx.drawImage(layer.dom, 0, 0, width_1, height_1);\n                }\n                else if (layer.renderToCanvas) {\n                    ctx.save();\n                    layer.renderToCanvas(ctx);\n                    ctx.restore();\n                }\n            });\n        }\n        else {\n            var scope = {\n                inHover: false,\n                viewWidth: this._width,\n                viewHeight: this._height\n            };\n            var displayList = this.storage.getDisplayList(true);\n            for (var i = 0, len = displayList.length; i < len; i++) {\n                var el = displayList[i];\n                brush(ctx, el, scope, i === len - 1);\n            }\n        }\n        return imageLayer.dom;\n    };\n    CanvasPainter.prototype.getWidth = function () {\n        return this._width;\n    };\n    CanvasPainter.prototype.getHeight = function () {\n        return this._height;\n    };\n    return CanvasPainter;\n}());\nexport default CanvasPainter;\n;\n","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport CanvasPainter from 'zrender/lib/canvas/Painter.js';\nexport function install(registers) {\n  registers.registerPainter('canvas', CanvasPainter);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\n\n/*\r\n* A third-party license is embedded for some of the code in this file:\r\n* The tree layoutHelper implementation was originally copied from\r\n* \"d3.js\"(https://github.com/d3/d3-hierarchy) with\r\n* some modifications made for this project.\r\n* (see more details in the comment of the specific method below.)\r\n* The use of the source code of this file is also subject to the terms\r\n* and consitions of the licence of \"d3.js\" (BSD-3Clause, see\r\n* </licenses/LICENSE-d3>).\r\n*/\n\n/**\r\n * @file The layout algorithm of node-link tree diagrams. Here we using Reingold-Tilford algorithm to drawing\r\n *       the tree.\r\n */\nimport * as layout from '../../util/layout.js';\n/**\r\n * Initialize all computational message for following algorithm.\r\n */\n\nexport function init(inRoot) {\n  var root = inRoot;\n  root.hierNode = {\n    defaultAncestor: null,\n    ancestor: root,\n    prelim: 0,\n    modifier: 0,\n    change: 0,\n    shift: 0,\n    i: 0,\n    thread: null\n  };\n  var nodes = [root];\n  var node;\n  var children;\n\n  while (node = nodes.pop()) {\n    // jshint ignore:line\n    children = node.children;\n\n    if (node.isExpand && children.length) {\n      var n = children.length;\n\n      for (var i = n - 1; i >= 0; i--) {\n        var child = children[i];\n        child.hierNode = {\n          defaultAncestor: null,\n          ancestor: child,\n          prelim: 0,\n          modifier: 0,\n          change: 0,\n          shift: 0,\n          i: i,\n          thread: null\n        };\n        nodes.push(child);\n      }\n    }\n  }\n}\n/**\r\n * The implementation of this function was originally copied from \"d3.js\"\r\n * <https://github.com/d3/d3-hierarchy/blob/4c1f038f2725d6eae2e49b61d01456400694bac4/src/tree.js>\r\n * with some modifications made for this program.\r\n * See the license statement at the head of this file.\r\n *\r\n * Computes a preliminary x coordinate for node. Before that, this function is\r\n * applied recursively to the children of node, as well as the function\r\n * apportion(). After spacing out the children by calling executeShifts(), the\r\n * node is placed to the midpoint of its outermost children.\r\n */\n\nexport function firstWalk(node, separation) {\n  var children = node.isExpand ? node.children : [];\n  var siblings = node.parentNode.children;\n  var subtreeW = node.hierNode.i ? siblings[node.hierNode.i - 1] : null;\n\n  if (children.length) {\n    executeShifts(node);\n    var midPoint = (children[0].hierNode.prelim + children[children.length - 1].hierNode.prelim) / 2;\n\n    if (subtreeW) {\n      node.hierNode.prelim = subtreeW.hierNode.prelim + separation(node, subtreeW);\n      node.hierNode.modifier = node.hierNode.prelim - midPoint;\n    } else {\n      node.hierNode.prelim = midPoint;\n    }\n  } else if (subtreeW) {\n    node.hierNode.prelim = subtreeW.hierNode.prelim + separation(node, subtreeW);\n  }\n\n  node.parentNode.hierNode.defaultAncestor = apportion(node, subtreeW, node.parentNode.hierNode.defaultAncestor || siblings[0], separation);\n}\n/**\r\n * The implementation of this function was originally copied from \"d3.js\"\r\n * <https://github.com/d3/d3-hierarchy/blob/4c1f038f2725d6eae2e49b61d01456400694bac4/src/tree.js>\r\n * with some modifications made for this program.\r\n * See the license statement at the head of this file.\r\n *\r\n * Computes all real x-coordinates by summing up the modifiers recursively.\r\n */\n\nexport function secondWalk(node) {\n  var nodeX = node.hierNode.prelim + node.parentNode.hierNode.modifier;\n  node.setLayout({\n    x: nodeX\n  }, true);\n  node.hierNode.modifier += node.parentNode.hierNode.modifier;\n}\nexport function separation(cb) {\n  return arguments.length ? cb : defaultSeparation;\n}\n/**\r\n * Transform the common coordinate to radial coordinate.\r\n */\n\nexport function radialCoordinate(rad, r) {\n  rad -= Math.PI / 2;\n  return {\n    x: r * Math.cos(rad),\n    y: r * Math.sin(rad)\n  };\n}\n/**\r\n * Get the layout position of the whole view.\r\n */\n\nexport function getViewRect(seriesModel, api) {\n  return layout.getLayoutRect(seriesModel.getBoxLayoutParams(), {\n    width: api.getWidth(),\n    height: api.getHeight()\n  });\n}\n/**\r\n * All other shifts, applied to the smaller subtrees between w- and w+, are\r\n * performed by this function.\r\n *\r\n * The implementation of this function was originally copied from \"d3.js\"\r\n * <https://github.com/d3/d3-hierarchy/blob/4c1f038f2725d6eae2e49b61d01456400694bac4/src/tree.js>\r\n * with some modifications made for this program.\r\n * See the license statement at the head of this file.\r\n */\n\nfunction executeShifts(node) {\n  var children = node.children;\n  var n = children.length;\n  var shift = 0;\n  var change = 0;\n\n  while (--n >= 0) {\n    var child = children[n];\n    child.hierNode.prelim += shift;\n    child.hierNode.modifier += shift;\n    change += child.hierNode.change;\n    shift += child.hierNode.shift + change;\n  }\n}\n/**\r\n * The implementation of this function was originally copied from \"d3.js\"\r\n * <https://github.com/d3/d3-hierarchy/blob/4c1f038f2725d6eae2e49b61d01456400694bac4/src/tree.js>\r\n * with some modifications made for this program.\r\n * See the license statement at the head of this file.\r\n *\r\n * The core of the algorithm. Here, a new subtree is combined with the\r\n * previous subtrees. Threads are used to traverse the inside and outside\r\n * contours of the left and right subtree up to the highest common level.\r\n * Whenever two nodes of the inside contours conflict, we compute the left\r\n * one of the greatest uncommon ancestors using the function nextAncestor()\r\n * and call moveSubtree() to shift the subtree and prepare the shifts of\r\n * smaller subtrees. Finally, we add a new thread (if necessary).\r\n */\n\n\nfunction apportion(subtreeV, subtreeW, ancestor, separation) {\n  if (subtreeW) {\n    var nodeOutRight = subtreeV;\n    var nodeInRight = subtreeV;\n    var nodeOutLeft = nodeInRight.parentNode.children[0];\n    var nodeInLeft = subtreeW;\n    var sumOutRight = nodeOutRight.hierNode.modifier;\n    var sumInRight = nodeInRight.hierNode.modifier;\n    var sumOutLeft = nodeOutLeft.hierNode.modifier;\n    var sumInLeft = nodeInLeft.hierNode.modifier;\n\n    while (nodeInLeft = nextRight(nodeInLeft), nodeInRight = nextLeft(nodeInRight), nodeInLeft && nodeInRight) {\n      nodeOutRight = nextRight(nodeOutRight);\n      nodeOutLeft = nextLeft(nodeOutLeft);\n      nodeOutRight.hierNode.ancestor = subtreeV;\n      var shift = nodeInLeft.hierNode.prelim + sumInLeft - nodeInRight.hierNode.prelim - sumInRight + separation(nodeInLeft, nodeInRight);\n\n      if (shift > 0) {\n        moveSubtree(nextAncestor(nodeInLeft, subtreeV, ancestor), subtreeV, shift);\n        sumInRight += shift;\n        sumOutRight += shift;\n      }\n\n      sumInLeft += nodeInLeft.hierNode.modifier;\n      sumInRight += nodeInRight.hierNode.modifier;\n      sumOutRight += nodeOutRight.hierNode.modifier;\n      sumOutLeft += nodeOutLeft.hierNode.modifier;\n    }\n\n    if (nodeInLeft && !nextRight(nodeOutRight)) {\n      nodeOutRight.hierNode.thread = nodeInLeft;\n      nodeOutRight.hierNode.modifier += sumInLeft - sumOutRight;\n    }\n\n    if (nodeInRight && !nextLeft(nodeOutLeft)) {\n      nodeOutLeft.hierNode.thread = nodeInRight;\n      nodeOutLeft.hierNode.modifier += sumInRight - sumOutLeft;\n      ancestor = subtreeV;\n    }\n  }\n\n  return ancestor;\n}\n/**\r\n * This function is used to traverse the right contour of a subtree.\r\n * It returns the rightmost child of node or the thread of node. The function\r\n * returns null if and only if node is on the highest depth of its subtree.\r\n */\n\n\nfunction nextRight(node) {\n  var children = node.children;\n  return children.length && node.isExpand ? children[children.length - 1] : node.hierNode.thread;\n}\n/**\r\n * This function is used to traverse the left contour of a subtree (or a subforest).\r\n * It returns the leftmost child of node or the thread of node. The function\r\n * returns null if and only if node is on the highest depth of its subtree.\r\n */\n\n\nfunction nextLeft(node) {\n  var children = node.children;\n  return children.length && node.isExpand ? children[0] : node.hierNode.thread;\n}\n/**\r\n * If nodeInLeft’s ancestor is a sibling of node, returns nodeInLeft’s ancestor.\r\n * Otherwise, returns the specified ancestor.\r\n */\n\n\nfunction nextAncestor(nodeInLeft, node, ancestor) {\n  return nodeInLeft.hierNode.ancestor.parentNode === node.parentNode ? nodeInLeft.hierNode.ancestor : ancestor;\n}\n/**\r\n * The implementation of this function was originally copied from \"d3.js\"\r\n * <https://github.com/d3/d3-hierarchy/blob/4c1f038f2725d6eae2e49b61d01456400694bac4/src/tree.js>\r\n * with some modifications made for this program.\r\n * See the license statement at the head of this file.\r\n *\r\n * Shifts the current subtree rooted at wr.\r\n * This is done by increasing prelim(w+) and modifier(w+) by shift.\r\n */\n\n\nfunction moveSubtree(wl, wr, shift) {\n  var change = shift / (wr.hierNode.i - wl.hierNode.i);\n  wr.hierNode.change -= change;\n  wr.hierNode.shift += shift;\n  wr.hierNode.modifier += shift;\n  wr.hierNode.prelim += shift;\n  wl.hierNode.change += change;\n}\n/**\r\n * The implementation of this function was originally copied from \"d3.js\"\r\n * <https://github.com/d3/d3-hierarchy/blob/4c1f038f2725d6eae2e49b61d01456400694bac4/src/tree.js>\r\n * with some modifications made for this program.\r\n * See the license statement at the head of this file.\r\n */\n\n\nfunction defaultSeparation(node1, node2) {\n  return node1.parentNode === node2.parentNode ? 1 : 2;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as graphic from '../../util/graphic.js';\nimport { getECData } from '../../util/innerStore.js';\nimport SymbolClz from '../helper/Symbol.js';\nimport { radialCoordinate } from './layoutHelper.js';\nimport * as bbox from 'zrender/lib/core/bbox.js';\nimport View from '../../coord/View.js';\nimport * as roamHelper from '../../component/helper/roamHelper.js';\nimport RoamController from '../../component/helper/RoamController.js';\nimport { onIrrelevantElement } from '../../component/helper/cursorHelper.js';\nimport { parsePercent } from '../../util/number.js';\nimport ChartView from '../../view/Chart.js';\nimport Path from 'zrender/lib/graphic/Path.js';\nimport { setStatesStylesFromModel, setStatesFlag, setDefaultStateProxy, HOVER_STATE_BLUR } from '../../util/states.js';\n\nvar TreeEdgeShape =\n/** @class */\nfunction () {\n  function TreeEdgeShape() {\n    this.parentPoint = [];\n    this.childPoints = [];\n  }\n\n  return TreeEdgeShape;\n}();\n\nvar TreePath =\n/** @class */\nfunction (_super) {\n  __extends(TreePath, _super);\n\n  function TreePath(opts) {\n    return _super.call(this, opts) || this;\n  }\n\n  TreePath.prototype.getDefaultStyle = function () {\n    return {\n      stroke: '#000',\n      fill: null\n    };\n  };\n\n  TreePath.prototype.getDefaultShape = function () {\n    return new TreeEdgeShape();\n  };\n\n  TreePath.prototype.buildPath = function (ctx, shape) {\n    var childPoints = shape.childPoints;\n    var childLen = childPoints.length;\n    var parentPoint = shape.parentPoint;\n    var firstChildPos = childPoints[0];\n    var lastChildPos = childPoints[childLen - 1];\n\n    if (childLen === 1) {\n      ctx.moveTo(parentPoint[0], parentPoint[1]);\n      ctx.lineTo(firstChildPos[0], firstChildPos[1]);\n      return;\n    }\n\n    var orient = shape.orient;\n    var forkDim = orient === 'TB' || orient === 'BT' ? 0 : 1;\n    var otherDim = 1 - forkDim;\n    var forkPosition = parsePercent(shape.forkPosition, 1);\n    var tmpPoint = [];\n    tmpPoint[forkDim] = parentPoint[forkDim];\n    tmpPoint[otherDim] = parentPoint[otherDim] + (lastChildPos[otherDim] - parentPoint[otherDim]) * forkPosition;\n    ctx.moveTo(parentPoint[0], parentPoint[1]);\n    ctx.lineTo(tmpPoint[0], tmpPoint[1]);\n    ctx.moveTo(firstChildPos[0], firstChildPos[1]);\n    tmpPoint[forkDim] = firstChildPos[forkDim];\n    ctx.lineTo(tmpPoint[0], tmpPoint[1]);\n    tmpPoint[forkDim] = lastChildPos[forkDim];\n    ctx.lineTo(tmpPoint[0], tmpPoint[1]);\n    ctx.lineTo(lastChildPos[0], lastChildPos[1]);\n\n    for (var i = 1; i < childLen - 1; i++) {\n      var point = childPoints[i];\n      ctx.moveTo(point[0], point[1]);\n      tmpPoint[forkDim] = point[forkDim];\n      ctx.lineTo(tmpPoint[0], tmpPoint[1]);\n    }\n  };\n\n  return TreePath;\n}(Path);\n\nvar TreeView =\n/** @class */\nfunction (_super) {\n  __extends(TreeView, _super);\n\n  function TreeView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = TreeView.type;\n    _this._mainGroup = new graphic.Group();\n    return _this;\n  }\n\n  TreeView.prototype.init = function (ecModel, api) {\n    this._controller = new RoamController(api.getZr());\n    this._controllerHost = {\n      target: this.group\n    };\n    this.group.add(this._mainGroup);\n  };\n\n  TreeView.prototype.render = function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData();\n    var layoutInfo = seriesModel.layoutInfo;\n    var group = this._mainGroup;\n    var layout = seriesModel.get('layout');\n\n    if (layout === 'radial') {\n      group.x = layoutInfo.x + layoutInfo.width / 2;\n      group.y = layoutInfo.y + layoutInfo.height / 2;\n    } else {\n      group.x = layoutInfo.x;\n      group.y = layoutInfo.y;\n    }\n\n    this._updateViewCoordSys(seriesModel, api);\n\n    this._updateController(seriesModel, ecModel, api);\n\n    var oldData = this._data;\n    data.diff(oldData).add(function (newIdx) {\n      if (symbolNeedsDraw(data, newIdx)) {\n        // Create node and edge\n        updateNode(data, newIdx, null, group, seriesModel);\n      }\n    }).update(function (newIdx, oldIdx) {\n      var symbolEl = oldData.getItemGraphicEl(oldIdx);\n\n      if (!symbolNeedsDraw(data, newIdx)) {\n        symbolEl && removeNode(oldData, oldIdx, symbolEl, group, seriesModel);\n        return;\n      } // Update node and edge\n\n\n      updateNode(data, newIdx, symbolEl, group, seriesModel);\n    }).remove(function (oldIdx) {\n      var symbolEl = oldData.getItemGraphicEl(oldIdx); // When remove a collapsed node of subtree, since the collapsed\n      // node haven't been initialized with a symbol element,\n      // you can't found it's symbol element through index.\n      // so if we want to remove the symbol element we should insure\n      // that the symbol element is not null.\n\n      if (symbolEl) {\n        removeNode(oldData, oldIdx, symbolEl, group, seriesModel);\n      }\n    }).execute();\n    this._nodeScaleRatio = seriesModel.get('nodeScaleRatio');\n\n    this._updateNodeAndLinkScale(seriesModel);\n\n    if (seriesModel.get('expandAndCollapse') === true) {\n      data.eachItemGraphicEl(function (el, dataIndex) {\n        el.off('click').on('click', function () {\n          api.dispatchAction({\n            type: 'treeExpandAndCollapse',\n            seriesId: seriesModel.id,\n            dataIndex: dataIndex\n          });\n        });\n      });\n    }\n\n    this._data = data;\n  };\n\n  TreeView.prototype._updateViewCoordSys = function (seriesModel, api) {\n    var data = seriesModel.getData();\n    var points = [];\n    data.each(function (idx) {\n      var layout = data.getItemLayout(idx);\n\n      if (layout && !isNaN(layout.x) && !isNaN(layout.y)) {\n        points.push([+layout.x, +layout.y]);\n      }\n    });\n    var min = [];\n    var max = [];\n    bbox.fromPoints(points, min, max); // If don't Store min max when collapse the root node after roam,\n    // the root node will disappear.\n\n    var oldMin = this._min;\n    var oldMax = this._max; // If width or height is 0\n\n    if (max[0] - min[0] === 0) {\n      min[0] = oldMin ? oldMin[0] : min[0] - 1;\n      max[0] = oldMax ? oldMax[0] : max[0] + 1;\n    }\n\n    if (max[1] - min[1] === 0) {\n      min[1] = oldMin ? oldMin[1] : min[1] - 1;\n      max[1] = oldMax ? oldMax[1] : max[1] + 1;\n    }\n\n    var viewCoordSys = seriesModel.coordinateSystem = new View();\n    viewCoordSys.zoomLimit = seriesModel.get('scaleLimit');\n    viewCoordSys.setBoundingRect(min[0], min[1], max[0] - min[0], max[1] - min[1]);\n    viewCoordSys.setCenter(seriesModel.get('center'), api);\n    viewCoordSys.setZoom(seriesModel.get('zoom')); // Here we use viewCoordSys just for computing the 'position' and 'scale' of the group\n\n    this.group.attr({\n      x: viewCoordSys.x,\n      y: viewCoordSys.y,\n      scaleX: viewCoordSys.scaleX,\n      scaleY: viewCoordSys.scaleY\n    });\n    this._min = min;\n    this._max = max;\n  };\n\n  TreeView.prototype._updateController = function (seriesModel, ecModel, api) {\n    var _this = this;\n\n    var controller = this._controller;\n    var controllerHost = this._controllerHost;\n    var group = this.group;\n    controller.setPointerChecker(function (e, x, y) {\n      var rect = group.getBoundingRect();\n      rect.applyTransform(group.transform);\n      return rect.contain(x, y) && !onIrrelevantElement(e, api, seriesModel);\n    });\n    controller.enable(seriesModel.get('roam'));\n    controllerHost.zoomLimit = seriesModel.get('scaleLimit');\n    controllerHost.zoom = seriesModel.coordinateSystem.getZoom();\n    controller.off('pan').off('zoom').on('pan', function (e) {\n      roamHelper.updateViewOnPan(controllerHost, e.dx, e.dy);\n      api.dispatchAction({\n        seriesId: seriesModel.id,\n        type: 'treeRoam',\n        dx: e.dx,\n        dy: e.dy\n      });\n    }).on('zoom', function (e) {\n      roamHelper.updateViewOnZoom(controllerHost, e.scale, e.originX, e.originY);\n      api.dispatchAction({\n        seriesId: seriesModel.id,\n        type: 'treeRoam',\n        zoom: e.scale,\n        originX: e.originX,\n        originY: e.originY\n      });\n\n      _this._updateNodeAndLinkScale(seriesModel); // Only update label layout on zoom\n\n\n      api.updateLabelLayout();\n    });\n  };\n\n  TreeView.prototype._updateNodeAndLinkScale = function (seriesModel) {\n    var data = seriesModel.getData();\n\n    var nodeScale = this._getNodeGlobalScale(seriesModel);\n\n    data.eachItemGraphicEl(function (el, idx) {\n      el.setSymbolScale(nodeScale);\n    });\n  };\n\n  TreeView.prototype._getNodeGlobalScale = function (seriesModel) {\n    var coordSys = seriesModel.coordinateSystem;\n\n    if (coordSys.type !== 'view') {\n      return 1;\n    }\n\n    var nodeScaleRatio = this._nodeScaleRatio;\n    var groupZoom = coordSys.scaleX || 1; // Scale node when zoom changes\n\n    var roamZoom = coordSys.getZoom();\n    var nodeScale = (roamZoom - 1) * nodeScaleRatio + 1;\n    return nodeScale / groupZoom;\n  };\n\n  TreeView.prototype.dispose = function () {\n    this._controller && this._controller.dispose();\n    this._controllerHost = null;\n  };\n\n  TreeView.prototype.remove = function () {\n    this._mainGroup.removeAll();\n\n    this._data = null;\n  };\n\n  TreeView.type = 'tree';\n  return TreeView;\n}(ChartView);\n\nfunction symbolNeedsDraw(data, dataIndex) {\n  var layout = data.getItemLayout(dataIndex);\n  return layout && !isNaN(layout.x) && !isNaN(layout.y);\n}\n\nfunction updateNode(data, dataIndex, symbolEl, group, seriesModel) {\n  var isInit = !symbolEl;\n  var node = data.tree.getNodeByDataIndex(dataIndex);\n  var itemModel = node.getModel();\n  var visualColor = node.getVisual('style').fill;\n  var symbolInnerColor = node.isExpand === false && node.children.length !== 0 ? visualColor : '#fff';\n  var virtualRoot = data.tree.root;\n  var source = node.parentNode === virtualRoot ? node : node.parentNode || node;\n  var sourceSymbolEl = data.getItemGraphicEl(source.dataIndex);\n  var sourceLayout = source.getLayout();\n  var sourceOldLayout = sourceSymbolEl ? {\n    x: sourceSymbolEl.__oldX,\n    y: sourceSymbolEl.__oldY,\n    rawX: sourceSymbolEl.__radialOldRawX,\n    rawY: sourceSymbolEl.__radialOldRawY\n  } : sourceLayout;\n  var targetLayout = node.getLayout();\n\n  if (isInit) {\n    symbolEl = new SymbolClz(data, dataIndex, null, {\n      symbolInnerColor: symbolInnerColor,\n      useNameLabel: true\n    });\n    symbolEl.x = sourceOldLayout.x;\n    symbolEl.y = sourceOldLayout.y;\n  } else {\n    symbolEl.updateData(data, dataIndex, null, {\n      symbolInnerColor: symbolInnerColor,\n      useNameLabel: true\n    });\n  }\n\n  symbolEl.__radialOldRawX = symbolEl.__radialRawX;\n  symbolEl.__radialOldRawY = symbolEl.__radialRawY;\n  symbolEl.__radialRawX = targetLayout.rawX;\n  symbolEl.__radialRawY = targetLayout.rawY;\n  group.add(symbolEl);\n  data.setItemGraphicEl(dataIndex, symbolEl);\n  symbolEl.__oldX = symbolEl.x;\n  symbolEl.__oldY = symbolEl.y;\n  graphic.updateProps(symbolEl, {\n    x: targetLayout.x,\n    y: targetLayout.y\n  }, seriesModel);\n  var symbolPath = symbolEl.getSymbolPath();\n\n  if (seriesModel.get('layout') === 'radial') {\n    var realRoot = virtualRoot.children[0];\n    var rootLayout = realRoot.getLayout();\n    var length_1 = realRoot.children.length;\n    var rad = void 0;\n    var isLeft = void 0;\n\n    if (targetLayout.x === rootLayout.x && node.isExpand === true && realRoot.children.length) {\n      var center = {\n        x: (realRoot.children[0].getLayout().x + realRoot.children[length_1 - 1].getLayout().x) / 2,\n        y: (realRoot.children[0].getLayout().y + realRoot.children[length_1 - 1].getLayout().y) / 2\n      };\n      rad = Math.atan2(center.y - rootLayout.y, center.x - rootLayout.x);\n\n      if (rad < 0) {\n        rad = Math.PI * 2 + rad;\n      }\n\n      isLeft = center.x < rootLayout.x;\n\n      if (isLeft) {\n        rad = rad - Math.PI;\n      }\n    } else {\n      rad = Math.atan2(targetLayout.y - rootLayout.y, targetLayout.x - rootLayout.x);\n\n      if (rad < 0) {\n        rad = Math.PI * 2 + rad;\n      }\n\n      if (node.children.length === 0 || node.children.length !== 0 && node.isExpand === false) {\n        isLeft = targetLayout.x < rootLayout.x;\n\n        if (isLeft) {\n          rad = rad - Math.PI;\n        }\n      } else {\n        isLeft = targetLayout.x > rootLayout.x;\n\n        if (!isLeft) {\n          rad = rad - Math.PI;\n        }\n      }\n    }\n\n    var textPosition = isLeft ? 'left' : 'right';\n    var normalLabelModel = itemModel.getModel('label');\n    var rotate = normalLabelModel.get('rotate');\n    var labelRotateRadian = rotate * (Math.PI / 180);\n    var textContent = symbolPath.getTextContent();\n\n    if (textContent) {\n      symbolPath.setTextConfig({\n        position: normalLabelModel.get('position') || textPosition,\n        rotation: rotate == null ? -rad : labelRotateRadian,\n        origin: 'center'\n      });\n      textContent.setStyle('verticalAlign', 'middle');\n    }\n  } // Handle status\n\n\n  var focus = itemModel.get(['emphasis', 'focus']);\n  var focusDataIndices = focus === 'relative' ? zrUtil.concatArray(node.getAncestorsIndices(), node.getDescendantIndices()) : focus === 'ancestor' ? node.getAncestorsIndices() : focus === 'descendant' ? node.getDescendantIndices() : null;\n\n  if (focusDataIndices) {\n    // Modify the focus to data indices.\n    getECData(symbolEl).focus = focusDataIndices;\n  }\n\n  drawEdge(seriesModel, node, virtualRoot, symbolEl, sourceOldLayout, sourceLayout, targetLayout, group);\n\n  if (symbolEl.__edge) {\n    symbolEl.onHoverStateChange = function (toState) {\n      if (toState !== 'blur') {\n        // NOTE: Ensure the parent elements will been blurred firstly.\n        // According to the return of getAncestorsIndices and getDescendantIndices\n        // TODO: A bit tricky.\n        var parentEl = node.parentNode && data.getItemGraphicEl(node.parentNode.dataIndex);\n\n        if (!(parentEl && parentEl.hoverState === HOVER_STATE_BLUR)) {\n          setStatesFlag(symbolEl.__edge, toState);\n        }\n      }\n    };\n  }\n}\n\nfunction drawEdge(seriesModel, node, virtualRoot, symbolEl, sourceOldLayout, sourceLayout, targetLayout, group) {\n  var itemModel = node.getModel();\n  var edgeShape = seriesModel.get('edgeShape');\n  var layout = seriesModel.get('layout');\n  var orient = seriesModel.getOrient();\n  var curvature = seriesModel.get(['lineStyle', 'curveness']);\n  var edgeForkPosition = seriesModel.get('edgeForkPosition');\n  var lineStyle = itemModel.getModel('lineStyle').getLineStyle();\n  var edge = symbolEl.__edge; // curve edge from node -> parent\n  // polyline edge from node -> children\n\n  if (edgeShape === 'curve') {\n    if (node.parentNode && node.parentNode !== virtualRoot) {\n      if (!edge) {\n        edge = symbolEl.__edge = new graphic.BezierCurve({\n          shape: getEdgeShape(layout, orient, curvature, sourceOldLayout, sourceOldLayout)\n        });\n      }\n\n      graphic.updateProps(edge, {\n        shape: getEdgeShape(layout, orient, curvature, sourceLayout, targetLayout)\n      }, seriesModel);\n    }\n  } else if (edgeShape === 'polyline') {\n    if (layout === 'orthogonal') {\n      if (node !== virtualRoot && node.children && node.children.length !== 0 && node.isExpand === true) {\n        var children = node.children;\n        var childPoints = [];\n\n        for (var i = 0; i < children.length; i++) {\n          var childLayout = children[i].getLayout();\n          childPoints.push([childLayout.x, childLayout.y]);\n        }\n\n        if (!edge) {\n          edge = symbolEl.__edge = new TreePath({\n            shape: {\n              parentPoint: [targetLayout.x, targetLayout.y],\n              childPoints: [[targetLayout.x, targetLayout.y]],\n              orient: orient,\n              forkPosition: edgeForkPosition\n            }\n          });\n        }\n\n        graphic.updateProps(edge, {\n          shape: {\n            parentPoint: [targetLayout.x, targetLayout.y],\n            childPoints: childPoints\n          }\n        }, seriesModel);\n      }\n    } else {\n      if (process.env.NODE_ENV !== 'production') {\n        throw new Error('The polyline edgeShape can only be used in orthogonal layout');\n      }\n    }\n  } // show all edge when edgeShape is 'curve', filter node `isExpand` is false when edgeShape is 'polyline'\n\n\n  if (edge && !(edgeShape === 'polyline' && !node.isExpand)) {\n    edge.useStyle(zrUtil.defaults({\n      strokeNoScale: true,\n      fill: null\n    }, lineStyle));\n    setStatesStylesFromModel(edge, itemModel, 'lineStyle');\n    setDefaultStateProxy(edge);\n    group.add(edge);\n  }\n}\n\nfunction removeNodeEdge(node, data, group, seriesModel, removeAnimationOpt) {\n  var virtualRoot = data.tree.root;\n\n  var _a = getSourceNode(virtualRoot, node),\n      source = _a.source,\n      sourceLayout = _a.sourceLayout;\n\n  var symbolEl = data.getItemGraphicEl(node.dataIndex);\n\n  if (!symbolEl) {\n    return;\n  }\n\n  var sourceSymbolEl = data.getItemGraphicEl(source.dataIndex);\n  var sourceEdge = sourceSymbolEl.__edge; // 1. when expand the sub tree, delete the children node should delete the edge of\n  // the source at the same time. because the polyline edge shape is only owned by the source.\n  // 2.when the node is the only children of the source, delete the node should delete the edge of\n  // the source at the same time. the same reason as above.\n\n  var edge = symbolEl.__edge || (source.isExpand === false || source.children.length === 1 ? sourceEdge : undefined);\n  var edgeShape = seriesModel.get('edgeShape');\n  var layoutOpt = seriesModel.get('layout');\n  var orient = seriesModel.get('orient');\n  var curvature = seriesModel.get(['lineStyle', 'curveness']);\n\n  if (edge) {\n    if (edgeShape === 'curve') {\n      graphic.removeElement(edge, {\n        shape: getEdgeShape(layoutOpt, orient, curvature, sourceLayout, sourceLayout),\n        style: {\n          opacity: 0\n        }\n      }, seriesModel, {\n        cb: function () {\n          group.remove(edge);\n        },\n        removeOpt: removeAnimationOpt\n      });\n    } else if (edgeShape === 'polyline' && seriesModel.get('layout') === 'orthogonal') {\n      graphic.removeElement(edge, {\n        shape: {\n          parentPoint: [sourceLayout.x, sourceLayout.y],\n          childPoints: [[sourceLayout.x, sourceLayout.y]]\n        },\n        style: {\n          opacity: 0\n        }\n      }, seriesModel, {\n        cb: function () {\n          group.remove(edge);\n        },\n        removeOpt: removeAnimationOpt\n      });\n    }\n  }\n}\n\nfunction getSourceNode(virtualRoot, node) {\n  var source = node.parentNode === virtualRoot ? node : node.parentNode || node;\n  var sourceLayout;\n\n  while (sourceLayout = source.getLayout(), sourceLayout == null) {\n    source = source.parentNode === virtualRoot ? source : source.parentNode || source;\n  }\n\n  return {\n    source: source,\n    sourceLayout: sourceLayout\n  };\n}\n\nfunction removeNode(data, dataIndex, symbolEl, group, seriesModel) {\n  var node = data.tree.getNodeByDataIndex(dataIndex);\n  var virtualRoot = data.tree.root;\n  var sourceLayout = getSourceNode(virtualRoot, node).sourceLayout; // Use same duration and easing with update to have more consistent animation.\n\n  var removeAnimationOpt = {\n    duration: seriesModel.get('animationDurationUpdate'),\n    easing: seriesModel.get('animationEasingUpdate')\n  };\n  graphic.removeElement(symbolEl, {\n    x: sourceLayout.x + 1,\n    y: sourceLayout.y + 1\n  }, seriesModel, {\n    cb: function () {\n      group.remove(symbolEl);\n      data.setItemGraphicEl(dataIndex, null);\n    },\n    removeOpt: removeAnimationOpt\n  });\n  symbolEl.fadeOut(null, data.hostModel, {\n    fadeLabel: true,\n    animation: removeAnimationOpt\n  }); // remove edge as parent node\n\n  node.children.forEach(function (childNode) {\n    removeNodeEdge(childNode, data, group, seriesModel, removeAnimationOpt);\n  }); // remove edge as child node\n\n  removeNodeEdge(node, data, group, seriesModel, removeAnimationOpt);\n}\n\nfunction getEdgeShape(layoutOpt, orient, curvature, sourceLayout, targetLayout) {\n  var cpx1;\n  var cpy1;\n  var cpx2;\n  var cpy2;\n  var x1;\n  var x2;\n  var y1;\n  var y2;\n\n  if (layoutOpt === 'radial') {\n    x1 = sourceLayout.rawX;\n    y1 = sourceLayout.rawY;\n    x2 = targetLayout.rawX;\n    y2 = targetLayout.rawY;\n    var radialCoor1 = radialCoordinate(x1, y1);\n    var radialCoor2 = radialCoordinate(x1, y1 + (y2 - y1) * curvature);\n    var radialCoor3 = radialCoordinate(x2, y2 + (y1 - y2) * curvature);\n    var radialCoor4 = radialCoordinate(x2, y2);\n    return {\n      x1: radialCoor1.x || 0,\n      y1: radialCoor1.y || 0,\n      x2: radialCoor4.x || 0,\n      y2: radialCoor4.y || 0,\n      cpx1: radialCoor2.x || 0,\n      cpy1: radialCoor2.y || 0,\n      cpx2: radialCoor3.x || 0,\n      cpy2: radialCoor3.y || 0\n    };\n  } else {\n    x1 = sourceLayout.x;\n    y1 = sourceLayout.y;\n    x2 = targetLayout.x;\n    y2 = targetLayout.y;\n\n    if (orient === 'LR' || orient === 'RL') {\n      cpx1 = x1 + (x2 - x1) * curvature;\n      cpy1 = y1;\n      cpx2 = x2 + (x1 - x2) * curvature;\n      cpy2 = y2;\n    }\n\n    if (orient === 'TB' || orient === 'BT') {\n      cpx1 = x1;\n      cpy1 = y1 + (y2 - y1) * curvature;\n      cpx2 = x2;\n      cpy2 = y2 + (y1 - y2) * curvature;\n    }\n  }\n\n  return {\n    x1: x1,\n    y1: y1,\n    x2: x2,\n    y2: y2,\n    cpx1: cpx1,\n    cpy1: cpy1,\n    cpx2: cpx2,\n    cpy2: cpy2\n  };\n}\n\nexport default TreeView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\n\n/**\r\n * Link lists and struct (graph or tree)\r\n */\nimport { curry, each, assert, extend, map, keys } from 'zrender/lib/core/util.js';\nimport { makeInner } from '../../util/model.js';\nvar inner = makeInner();\n\nfunction linkSeriesData(opt) {\n  var mainData = opt.mainData;\n  var datas = opt.datas;\n\n  if (!datas) {\n    datas = {\n      main: mainData\n    };\n    opt.datasAttr = {\n      main: 'data'\n    };\n  }\n\n  opt.datas = opt.mainData = null;\n  linkAll(mainData, datas, opt); // Porxy data original methods.\n\n  each(datas, function (data) {\n    each(mainData.TRANSFERABLE_METHODS, function (methodName) {\n      data.wrapMethod(methodName, curry(transferInjection, opt));\n    });\n  }); // Beyond transfer, additional features should be added to `cloneShallow`.\n\n  mainData.wrapMethod('cloneShallow', curry(cloneShallowInjection, opt)); // Only mainData trigger change, because struct.update may trigger\n  // another changable methods, which may bring about dead lock.\n\n  each(mainData.CHANGABLE_METHODS, function (methodName) {\n    mainData.wrapMethod(methodName, curry(changeInjection, opt));\n  }); // Make sure datas contains mainData.\n\n  assert(datas[mainData.dataType] === mainData);\n}\n\nfunction transferInjection(opt, res) {\n  if (isMainData(this)) {\n    // Transfer datas to new main data.\n    var datas = extend({}, inner(this).datas);\n    datas[this.dataType] = res;\n    linkAll(res, datas, opt);\n  } else {\n    // Modify the reference in main data to point newData.\n    linkSingle(res, this.dataType, inner(this).mainData, opt);\n  }\n\n  return res;\n}\n\nfunction changeInjection(opt, res) {\n  opt.struct && opt.struct.update();\n  return res;\n}\n\nfunction cloneShallowInjection(opt, res) {\n  // cloneShallow, which brings about some fragilities, may be inappropriate\n  // to be exposed as an API. So for implementation simplicity we can make\n  // the restriction that cloneShallow of not-mainData should not be invoked\n  // outside, but only be invoked here.\n  each(inner(res).datas, function (data, dataType) {\n    data !== res && linkSingle(data.cloneShallow(), dataType, res, opt);\n  });\n  return res;\n}\n/**\r\n * Supplement method to List.\r\n *\r\n * @public\r\n * @param [dataType] If not specified, return mainData.\r\n */\n\n\nfunction getLinkedData(dataType) {\n  var mainData = inner(this).mainData;\n  return dataType == null || mainData == null ? mainData : inner(mainData).datas[dataType];\n}\n/**\r\n * Get list of all linked data\r\n */\n\n\nfunction getLinkedDataAll() {\n  var mainData = inner(this).mainData;\n  return mainData == null ? [{\n    data: mainData\n  }] : map(keys(inner(mainData).datas), function (type) {\n    return {\n      type: type,\n      data: inner(mainData).datas[type]\n    };\n  });\n}\n\nfunction isMainData(data) {\n  return inner(data).mainData === data;\n}\n\nfunction linkAll(mainData, datas, opt) {\n  inner(mainData).datas = {};\n  each(datas, function (data, dataType) {\n    linkSingle(data, dataType, mainData, opt);\n  });\n}\n\nfunction linkSingle(data, dataType, mainData, opt) {\n  inner(mainData).datas[dataType] = data;\n  inner(data).mainData = mainData;\n  data.dataType = dataType;\n\n  if (opt.struct) {\n    data[opt.structAttr] = opt.struct;\n    opt.struct[opt.datasAttr[dataType]] = data;\n  } // Supplement method.\n\n\n  data.getLinkedData = getLinkedData;\n  data.getLinkedDataAll = getLinkedDataAll;\n}\n\nexport default linkSeriesData;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\n\n/**\r\n * Tree data structure\r\n */\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport linkSeriesData from './helper/linkSeriesData.js';\nimport SeriesData from './SeriesData.js';\nimport prepareSeriesDataSchema from './helper/createDimensions.js';\nimport { convertOptionIdName } from '../util/model.js';\n\nvar TreeNode =\n/** @class */\nfunction () {\n  function TreeNode(name, hostTree) {\n    this.depth = 0;\n    this.height = 0;\n    /**\r\n     * Reference to list item.\r\n     * Do not persistent dataIndex outside,\r\n     * besause it may be changed by list.\r\n     * If dataIndex -1,\r\n     * this node is logical deleted (filtered) in list.\r\n     */\n\n    this.dataIndex = -1;\n    this.children = [];\n    this.viewChildren = [];\n    this.isExpand = false;\n    this.name = name || '';\n    this.hostTree = hostTree;\n  }\n  /**\r\n   * The node is removed.\r\n   */\n\n\n  TreeNode.prototype.isRemoved = function () {\n    return this.dataIndex < 0;\n  };\n\n  TreeNode.prototype.eachNode = function (options, cb, context) {\n    if (zrUtil.isFunction(options)) {\n      context = cb;\n      cb = options;\n      options = null;\n    }\n\n    options = options || {};\n\n    if (zrUtil.isString(options)) {\n      options = {\n        order: options\n      };\n    }\n\n    var order = options.order || 'preorder';\n    var children = this[options.attr || 'children'];\n    var suppressVisitSub;\n    order === 'preorder' && (suppressVisitSub = cb.call(context, this));\n\n    for (var i = 0; !suppressVisitSub && i < children.length; i++) {\n      children[i].eachNode(options, cb, context);\n    }\n\n    order === 'postorder' && cb.call(context, this);\n  };\n  /**\r\n   * Update depth and height of this subtree.\r\n   */\n\n\n  TreeNode.prototype.updateDepthAndHeight = function (depth) {\n    var height = 0;\n    this.depth = depth;\n\n    for (var i = 0; i < this.children.length; i++) {\n      var child = this.children[i];\n      child.updateDepthAndHeight(depth + 1);\n\n      if (child.height > height) {\n        height = child.height;\n      }\n    }\n\n    this.height = height + 1;\n  };\n\n  TreeNode.prototype.getNodeById = function (id) {\n    if (this.getId() === id) {\n      return this;\n    }\n\n    for (var i = 0, children = this.children, len = children.length; i < len; i++) {\n      var res = children[i].getNodeById(id);\n\n      if (res) {\n        return res;\n      }\n    }\n  };\n\n  TreeNode.prototype.contains = function (node) {\n    if (node === this) {\n      return true;\n    }\n\n    for (var i = 0, children = this.children, len = children.length; i < len; i++) {\n      var res = children[i].contains(node);\n\n      if (res) {\n        return res;\n      }\n    }\n  };\n  /**\r\n   * @param includeSelf Default false.\r\n   * @return order: [root, child, grandchild, ...]\r\n   */\n\n\n  TreeNode.prototype.getAncestors = function (includeSelf) {\n    var ancestors = [];\n    var node = includeSelf ? this : this.parentNode;\n\n    while (node) {\n      ancestors.push(node);\n      node = node.parentNode;\n    }\n\n    ancestors.reverse();\n    return ancestors;\n  };\n\n  TreeNode.prototype.getAncestorsIndices = function () {\n    var indices = [];\n    var currNode = this;\n\n    while (currNode) {\n      indices.push(currNode.dataIndex);\n      currNode = currNode.parentNode;\n    }\n\n    indices.reverse();\n    return indices;\n  };\n\n  TreeNode.prototype.getDescendantIndices = function () {\n    var indices = [];\n    this.eachNode(function (childNode) {\n      indices.push(childNode.dataIndex);\n    });\n    return indices;\n  };\n\n  TreeNode.prototype.getValue = function (dimension) {\n    var data = this.hostTree.data;\n    return data.getStore().get(data.getDimensionIndex(dimension || 'value'), this.dataIndex);\n  };\n\n  TreeNode.prototype.setLayout = function (layout, merge) {\n    this.dataIndex >= 0 && this.hostTree.data.setItemLayout(this.dataIndex, layout, merge);\n  };\n  /**\r\n   * @return {Object} layout\r\n   */\n\n\n  TreeNode.prototype.getLayout = function () {\n    return this.hostTree.data.getItemLayout(this.dataIndex);\n  }; // @depcrecated\n  // getModel<T = unknown, S extends keyof T = keyof T>(path: S): Model<T[S]>\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  TreeNode.prototype.getModel = function (path) {\n    if (this.dataIndex < 0) {\n      return;\n    }\n\n    var hostTree = this.hostTree;\n    var itemModel = hostTree.data.getItemModel(this.dataIndex);\n    return itemModel.getModel(path);\n  }; // TODO: TYPE More specific model\n\n\n  TreeNode.prototype.getLevelModel = function () {\n    return (this.hostTree.levelModels || [])[this.depth];\n  };\n\n  TreeNode.prototype.setVisual = function (key, value) {\n    this.dataIndex >= 0 && this.hostTree.data.setItemVisual(this.dataIndex, key, value);\n  };\n  /**\r\n   * Get item visual\r\n   * FIXME: make return type better\r\n   */\n\n\n  TreeNode.prototype.getVisual = function (key) {\n    return this.hostTree.data.getItemVisual(this.dataIndex, key);\n  };\n\n  TreeNode.prototype.getRawIndex = function () {\n    return this.hostTree.data.getRawIndex(this.dataIndex);\n  };\n\n  TreeNode.prototype.getId = function () {\n    return this.hostTree.data.getId(this.dataIndex);\n  };\n  /**\r\n   * index in parent's children\r\n   */\n\n\n  TreeNode.prototype.getChildIndex = function () {\n    if (this.parentNode) {\n      var children = this.parentNode.children;\n\n      for (var i = 0; i < children.length; ++i) {\n        if (children[i] === this) {\n          return i;\n        }\n      }\n\n      return -1;\n    }\n\n    return -1;\n  };\n  /**\r\n   * if this is an ancestor of another node\r\n   *\r\n   * @param node another node\r\n   * @return if is ancestor\r\n   */\n\n\n  TreeNode.prototype.isAncestorOf = function (node) {\n    var parent = node.parentNode;\n\n    while (parent) {\n      if (parent === this) {\n        return true;\n      }\n\n      parent = parent.parentNode;\n    }\n\n    return false;\n  };\n  /**\r\n   * if this is an descendant of another node\r\n   *\r\n   * @param node another node\r\n   * @return if is descendant\r\n   */\n\n\n  TreeNode.prototype.isDescendantOf = function (node) {\n    return node !== this && node.isAncestorOf(this);\n  };\n\n  return TreeNode;\n}();\n\nexport { TreeNode };\n;\n\nvar Tree =\n/** @class */\nfunction () {\n  function Tree(hostModel) {\n    this.type = 'tree';\n    this._nodes = [];\n    this.hostModel = hostModel;\n  }\n\n  Tree.prototype.eachNode = function (options, cb, context) {\n    this.root.eachNode(options, cb, context);\n  };\n\n  Tree.prototype.getNodeByDataIndex = function (dataIndex) {\n    var rawIndex = this.data.getRawIndex(dataIndex);\n    return this._nodes[rawIndex];\n  };\n\n  Tree.prototype.getNodeById = function (name) {\n    return this.root.getNodeById(name);\n  };\n  /**\r\n   * Update item available by list,\r\n   * when list has been performed options like 'filterSelf' or 'map'.\r\n   */\n\n\n  Tree.prototype.update = function () {\n    var data = this.data;\n    var nodes = this._nodes;\n\n    for (var i = 0, len = nodes.length; i < len; i++) {\n      nodes[i].dataIndex = -1;\n    }\n\n    for (var i = 0, len = data.count(); i < len; i++) {\n      nodes[data.getRawIndex(i)].dataIndex = i;\n    }\n  };\n  /**\r\n   * Clear all layouts\r\n   */\n\n\n  Tree.prototype.clearLayouts = function () {\n    this.data.clearItemLayouts();\n  };\n  /**\r\n   * data node format:\r\n   * {\r\n   *     name: ...\r\n   *     value: ...\r\n   *     children: [\r\n   *         {\r\n   *             name: ...\r\n   *             value: ...\r\n   *             children: ...\r\n   *         },\r\n   *         ...\r\n   *     ]\r\n   * }\r\n   */\n\n\n  Tree.createTree = function (dataRoot, hostModel, beforeLink) {\n    var tree = new Tree(hostModel);\n    var listData = [];\n    var dimMax = 1;\n    buildHierarchy(dataRoot);\n\n    function buildHierarchy(dataNode, parentNode) {\n      var value = dataNode.value;\n      dimMax = Math.max(dimMax, zrUtil.isArray(value) ? value.length : 1);\n      listData.push(dataNode);\n      var node = new TreeNode(convertOptionIdName(dataNode.name, ''), tree);\n      parentNode ? addChild(node, parentNode) : tree.root = node;\n\n      tree._nodes.push(node);\n\n      var children = dataNode.children;\n\n      if (children) {\n        for (var i = 0; i < children.length; i++) {\n          buildHierarchy(children[i], node);\n        }\n      }\n    }\n\n    tree.root.updateDepthAndHeight(0);\n    var dimensions = prepareSeriesDataSchema(listData, {\n      coordDimensions: ['value'],\n      dimensionsCount: dimMax\n    }).dimensions;\n    var list = new SeriesData(dimensions, hostModel);\n    list.initData(listData);\n    beforeLink && beforeLink(list);\n    linkSeriesData({\n      mainData: list,\n      struct: tree,\n      structAttr: 'tree'\n    });\n    tree.update();\n    return tree;\n  };\n\n  return Tree;\n}();\n/**\r\n * It is needed to consider the mess of 'list', 'hostModel' when creating a TreeNote,\r\n * so this function is not ready and not necessary to be public.\r\n */\n\n\nfunction addChild(child, node) {\n  var children = node.children;\n\n  if (child.parentNode === node) {\n    return;\n  }\n\n  children.push(child);\n  child.parentNode = node;\n}\n\nexport default Tree;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nexport function retrieveTargetInfo(payload, validPayloadTypes, seriesModel) {\n  if (payload && zrUtil.indexOf(validPayloadTypes, payload.type) >= 0) {\n    var root = seriesModel.getData().tree.root;\n    var targetNode = payload.targetNode;\n\n    if (zrUtil.isString(targetNode)) {\n      targetNode = root.getNodeById(targetNode);\n    }\n\n    if (targetNode && root.contains(targetNode)) {\n      return {\n        node: targetNode\n      };\n    }\n\n    var targetNodeId = payload.targetNodeId;\n\n    if (targetNodeId != null && (targetNode = root.getNodeById(targetNodeId))) {\n      return {\n        node: targetNode\n      };\n    }\n  }\n} // Not includes the given node at the last item.\n\nexport function getPathToRoot(node) {\n  var path = [];\n\n  while (node) {\n    node = node.parentNode;\n    node && path.push(node);\n  }\n\n  return path.reverse();\n}\nexport function aboveViewRoot(viewRoot, node) {\n  var viewPath = getPathToRoot(viewRoot);\n  return zrUtil.indexOf(viewPath, node) >= 0;\n} // From root to the input node (the input node will be included).\n\nexport function wrapTreePathInfo(node, seriesModel) {\n  var treePathInfo = [];\n\n  while (node) {\n    var nodeDataIndex = node.dataIndex;\n    treePathInfo.push({\n      name: node.name,\n      dataIndex: nodeDataIndex,\n      value: seriesModel.getRawValue(nodeDataIndex)\n    });\n    node = node.parentNode;\n  }\n\n  treePathInfo.reverse();\n  return treePathInfo;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport SeriesModel from '../../model/Series.js';\nimport Tree from '../../data/Tree.js';\nimport Model from '../../model/Model.js';\nimport { createTooltipMarkup } from '../../component/tooltip/tooltipMarkup.js';\nimport { wrapTreePathInfo } from '../helper/treeHelper.js';\n\nvar TreeSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(TreeSeriesModel, _super);\n\n  function TreeSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.hasSymbolVisual = true; // Do it self.\n\n    _this.ignoreStyleOnData = true;\n    return _this;\n  }\n  /**\r\n   * Init a tree data structure from data in option series\r\n   */\n\n\n  TreeSeriesModel.prototype.getInitialData = function (option) {\n    // create a virtual root\n    var root = {\n      name: option.name,\n      children: option.data\n    };\n    var leaves = option.leaves || {};\n    var leavesModel = new Model(leaves, this, this.ecModel);\n    var tree = Tree.createTree(root, this, beforeLink);\n\n    function beforeLink(nodeData) {\n      nodeData.wrapMethod('getItemModel', function (model, idx) {\n        var node = tree.getNodeByDataIndex(idx);\n\n        if (!(node && node.children.length && node.isExpand)) {\n          model.parentModel = leavesModel;\n        }\n\n        return model;\n      });\n    }\n\n    var treeDepth = 0;\n    tree.eachNode('preorder', function (node) {\n      if (node.depth > treeDepth) {\n        treeDepth = node.depth;\n      }\n    });\n    var expandAndCollapse = option.expandAndCollapse;\n    var expandTreeDepth = expandAndCollapse && option.initialTreeDepth >= 0 ? option.initialTreeDepth : treeDepth;\n    tree.root.eachNode('preorder', function (node) {\n      var item = node.hostTree.data.getRawDataItem(node.dataIndex); // Add item.collapsed != null, because users can collapse node original in the series.data.\n\n      node.isExpand = item && item.collapsed != null ? !item.collapsed : node.depth <= expandTreeDepth;\n    });\n    return tree.data;\n  };\n  /**\r\n   * Make the configuration 'orient' backward compatibly, with 'horizontal = LR', 'vertical = TB'.\r\n   * @returns {string} orient\r\n   */\n\n\n  TreeSeriesModel.prototype.getOrient = function () {\n    var orient = this.get('orient');\n\n    if (orient === 'horizontal') {\n      orient = 'LR';\n    } else if (orient === 'vertical') {\n      orient = 'TB';\n    }\n\n    return orient;\n  };\n\n  TreeSeriesModel.prototype.setZoom = function (zoom) {\n    this.option.zoom = zoom;\n  };\n\n  TreeSeriesModel.prototype.setCenter = function (center) {\n    this.option.center = center;\n  };\n\n  TreeSeriesModel.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\n    var tree = this.getData().tree;\n    var realRoot = tree.root.children[0];\n    var node = tree.getNodeByDataIndex(dataIndex);\n    var value = node.getValue();\n    var name = node.name;\n\n    while (node && node !== realRoot) {\n      name = node.parentNode.name + '.' + name;\n      node = node.parentNode;\n    }\n\n    return createTooltipMarkup('nameValue', {\n      name: name,\n      value: value,\n      noValue: isNaN(value) || value == null\n    });\n  }; // Add tree path to tooltip param\n\n\n  TreeSeriesModel.prototype.getDataParams = function (dataIndex) {\n    var params = _super.prototype.getDataParams.apply(this, arguments);\n\n    var node = this.getData().tree.getNodeByDataIndex(dataIndex);\n    params.treeAncestors = wrapTreePathInfo(node, this);\n    params.collapsed = !node.isExpand;\n    return params;\n  };\n\n  TreeSeriesModel.type = 'series.tree'; // can support the position parameters 'left', 'top','right','bottom', 'width',\n  // 'height' in the setOption() with 'merge' mode normal.\n\n  TreeSeriesModel.layoutMode = 'box';\n  TreeSeriesModel.defaultOption = {\n    // zlevel: 0,\n    z: 2,\n    coordinateSystem: 'view',\n    // the position of the whole view\n    left: '12%',\n    top: '12%',\n    right: '12%',\n    bottom: '12%',\n    // the layout of the tree, two value can be selected, 'orthogonal' or 'radial'\n    layout: 'orthogonal',\n    // value can be 'polyline'\n    edgeShape: 'curve',\n    edgeForkPosition: '50%',\n    // true | false | 'move' | 'scale', see module:component/helper/RoamController.\n    roam: false,\n    // Symbol size scale ratio in roam\n    nodeScaleRatio: 0.4,\n    // Default on center of graph\n    center: null,\n    zoom: 1,\n    orient: 'LR',\n    symbol: 'emptyCircle',\n    symbolSize: 7,\n    expandAndCollapse: true,\n    initialTreeDepth: 2,\n    lineStyle: {\n      color: '#ccc',\n      width: 1.5,\n      curveness: 0.5\n    },\n    itemStyle: {\n      color: 'lightsteelblue',\n      // borderColor: '#c23531',\n      borderWidth: 1.5\n    },\n    label: {\n      show: true\n    },\n    animationEasing: 'linear',\n    animationDuration: 700,\n    animationDurationUpdate: 500\n  };\n  return TreeSeriesModel;\n}(SeriesModel);\n\nexport default TreeSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\n\n/**\r\n * Traverse the tree from bottom to top and do something\r\n */\nfunction eachAfter(root, callback, separation) {\n  var nodes = [root];\n  var next = [];\n  var node;\n\n  while (node = nodes.pop()) {\n    // jshint ignore:line\n    next.push(node);\n\n    if (node.isExpand) {\n      var children = node.children;\n\n      if (children.length) {\n        for (var i = 0; i < children.length; i++) {\n          nodes.push(children[i]);\n        }\n      }\n    }\n  }\n\n  while (node = next.pop()) {\n    // jshint ignore:line\n    callback(node, separation);\n  }\n}\n/**\r\n * Traverse the tree from top to bottom and do something\r\n */\n\n\nfunction eachBefore(root, callback) {\n  var nodes = [root];\n  var node;\n\n  while (node = nodes.pop()) {\n    // jshint ignore:line\n    callback(node);\n\n    if (node.isExpand) {\n      var children = node.children;\n\n      if (children.length) {\n        for (var i = children.length - 1; i >= 0; i--) {\n          nodes.push(children[i]);\n        }\n      }\n    }\n  }\n}\n\nexport { eachAfter, eachBefore };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { eachAfter, eachBefore } from './traversalHelper.js';\nimport { init, firstWalk, secondWalk, separation as sep, radialCoordinate, getViewRect } from './layoutHelper.js';\nexport default function treeLayout(ecModel, api) {\n  ecModel.eachSeriesByType('tree', function (seriesModel) {\n    commonLayout(seriesModel, api);\n  });\n}\n\nfunction commonLayout(seriesModel, api) {\n  var layoutInfo = getViewRect(seriesModel, api);\n  seriesModel.layoutInfo = layoutInfo;\n  var layout = seriesModel.get('layout');\n  var width = 0;\n  var height = 0;\n  var separation = null;\n\n  if (layout === 'radial') {\n    width = 2 * Math.PI;\n    height = Math.min(layoutInfo.height, layoutInfo.width) / 2;\n    separation = sep(function (node1, node2) {\n      return (node1.parentNode === node2.parentNode ? 1 : 2) / node1.depth;\n    });\n  } else {\n    width = layoutInfo.width;\n    height = layoutInfo.height;\n    separation = sep();\n  }\n\n  var virtualRoot = seriesModel.getData().tree.root;\n  var realRoot = virtualRoot.children[0];\n\n  if (realRoot) {\n    init(virtualRoot);\n    eachAfter(realRoot, firstWalk, separation);\n    virtualRoot.hierNode.modifier = -realRoot.hierNode.prelim;\n    eachBefore(realRoot, secondWalk);\n    var left_1 = realRoot;\n    var right_1 = realRoot;\n    var bottom_1 = realRoot;\n    eachBefore(realRoot, function (node) {\n      var x = node.getLayout().x;\n\n      if (x < left_1.getLayout().x) {\n        left_1 = node;\n      }\n\n      if (x > right_1.getLayout().x) {\n        right_1 = node;\n      }\n\n      if (node.depth > bottom_1.depth) {\n        bottom_1 = node;\n      }\n    });\n    var delta = left_1 === right_1 ? 1 : separation(left_1, right_1) / 2;\n    var tx_1 = delta - left_1.getLayout().x;\n    var kx_1 = 0;\n    var ky_1 = 0;\n    var coorX_1 = 0;\n    var coorY_1 = 0;\n\n    if (layout === 'radial') {\n      kx_1 = width / (right_1.getLayout().x + delta + tx_1); // here we use (node.depth - 1), bucause the real root's depth is 1\n\n      ky_1 = height / (bottom_1.depth - 1 || 1);\n      eachBefore(realRoot, function (node) {\n        coorX_1 = (node.getLayout().x + tx_1) * kx_1;\n        coorY_1 = (node.depth - 1) * ky_1;\n        var finalCoor = radialCoordinate(coorX_1, coorY_1);\n        node.setLayout({\n          x: finalCoor.x,\n          y: finalCoor.y,\n          rawX: coorX_1,\n          rawY: coorY_1\n        }, true);\n      });\n    } else {\n      var orient_1 = seriesModel.getOrient();\n\n      if (orient_1 === 'RL' || orient_1 === 'LR') {\n        ky_1 = height / (right_1.getLayout().x + delta + tx_1);\n        kx_1 = width / (bottom_1.depth - 1 || 1);\n        eachBefore(realRoot, function (node) {\n          coorY_1 = (node.getLayout().x + tx_1) * ky_1;\n          coorX_1 = orient_1 === 'LR' ? (node.depth - 1) * kx_1 : width - (node.depth - 1) * kx_1;\n          node.setLayout({\n            x: coorX_1,\n            y: coorY_1\n          }, true);\n        });\n      } else if (orient_1 === 'TB' || orient_1 === 'BT') {\n        kx_1 = width / (right_1.getLayout().x + delta + tx_1);\n        ky_1 = height / (bottom_1.depth - 1 || 1);\n        eachBefore(realRoot, function (node) {\n          coorX_1 = (node.getLayout().x + tx_1) * kx_1;\n          coorY_1 = orient_1 === 'TB' ? (node.depth - 1) * ky_1 : height - (node.depth - 1) * ky_1;\n          node.setLayout({\n            x: coorX_1,\n            y: coorY_1\n          }, true);\n        });\n      }\n    }\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { extend } from 'zrender/lib/core/util.js';\nexport default function treeVisual(ecModel) {\n  ecModel.eachSeriesByType('tree', function (seriesModel) {\n    var data = seriesModel.getData();\n    var tree = data.tree;\n    tree.eachNode(function (node) {\n      var model = node.getModel(); // TODO Optimize\n\n      var style = model.getModel('itemStyle').getItemStyle();\n      var existsStyle = data.ensureUniqueItemVisual(node.dataIndex, 'style');\n      extend(existsStyle, style);\n    });\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { updateCenterAndZoom } from '../../action/roamHelper.js';\nexport function installTreeAction(registers) {\n  registers.registerAction({\n    type: 'treeExpandAndCollapse',\n    event: 'treeExpandAndCollapse',\n    update: 'update'\n  }, function (payload, ecModel) {\n    ecModel.eachComponent({\n      mainType: 'series',\n      subType: 'tree',\n      query: payload\n    }, function (seriesModel) {\n      var dataIndex = payload.dataIndex;\n      var tree = seriesModel.getData().tree;\n      var node = tree.getNodeByDataIndex(dataIndex);\n      node.isExpand = !node.isExpand;\n    });\n  });\n  registers.registerAction({\n    type: 'treeRoam',\n    event: 'treeRoam',\n    // Here we set 'none' instead of 'update', because roam action\n    // just need to update the transform matrix without having to recalculate\n    // the layout. So don't need to go through the whole update process, such\n    // as 'dataPrcocess', 'coordSystemUpdate', 'layout' and so on.\n    update: 'none'\n  }, function (payload, ecModel, api) {\n    ecModel.eachComponent({\n      mainType: 'series',\n      subType: 'tree',\n      query: payload\n    }, function (seriesModel) {\n      var coordSys = seriesModel.coordinateSystem;\n      var res = updateCenterAndZoom(coordSys, payload, undefined, api);\n      seriesModel.setCenter && seriesModel.setCenter(res.center);\n      seriesModel.setZoom && seriesModel.setZoom(res.zoom);\n    });\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport TreeView from './TreeView.js';\nimport TreeSeriesModel from './TreeSeries.js';\nimport treeLayout from './treeLayout.js';\nimport treeVisual from './treeVisual.js';\nimport { installTreeAction } from './treeAction.js';\nexport function install(registers) {\n  registers.registerChartView(TreeView);\n  registers.registerSeriesModel(TreeSeriesModel);\n  registers.registerLayout(treeLayout);\n  registers.registerVisual(treeVisual);\n  installTreeAction(registers);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as helper from '../helper/treeHelper.js';\nimport { noop } from 'zrender/lib/core/util.js';\nvar actionTypes = ['treemapZoomToNode', 'treemapRender', 'treemapMove'];\nexport function installTreemapAction(registers) {\n  for (var i = 0; i < actionTypes.length; i++) {\n    registers.registerAction({\n      type: actionTypes[i],\n      update: 'updateView'\n    }, noop);\n  }\n\n  registers.registerAction({\n    type: 'treemapRootToNode',\n    update: 'updateView'\n  }, function (payload, ecModel) {\n    ecModel.eachComponent({\n      mainType: 'series',\n      subType: 'treemap',\n      query: payload\n    }, handleRootToNode);\n\n    function handleRootToNode(model, index) {\n      var types = ['treemapZoomToNode', 'treemapRootToNode'];\n      var targetInfo = helper.retrieveTargetInfo(payload, types, model);\n\n      if (targetInfo) {\n        var originViewRoot = model.getViewRoot();\n\n        if (originViewRoot) {\n          payload.direction = helper.aboveViewRoot(originViewRoot, targetInfo.node) ? 'rollUp' : 'drillDown';\n        }\n\n        model.resetViewRoot(targetInfo.node);\n      }\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { getDecalFromPalette } from '../../model/mixin/palette.js';\nexport default function enableAriaDecalForTree(seriesModel) {\n  var data = seriesModel.getData();\n  var tree = data.tree;\n  var decalPaletteScope = {};\n  tree.eachNode(function (node) {\n    // Use decal of level 1 node\n    var current = node;\n\n    while (current && current.depth > 1) {\n      current = current.parentNode;\n    }\n\n    var decal = getDecalFromPalette(seriesModel.ecModel, current.name || current.dataIndex + '', decalPaletteScope);\n    node.setVisual('decal', decal);\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport SeriesModel from '../../model/Series.js';\nimport Tree from '../../data/Tree.js';\nimport Model from '../../model/Model.js';\nimport { wrapTreePathInfo } from '../helper/treeHelper.js';\nimport { normalizeToArray } from '../../util/model.js';\nimport { createTooltipMarkup } from '../../component/tooltip/tooltipMarkup.js';\nimport enableAriaDecalForTree from '../helper/enableAriaDecalForTree.js';\n\nvar TreemapSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(TreemapSeriesModel, _super);\n\n  function TreemapSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = TreemapSeriesModel.type;\n    _this.preventUsingHoverLayer = true;\n    return _this;\n  }\n  /**\r\n   * @override\r\n   */\n\n\n  TreemapSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    // Create a virtual root.\n    var root = {\n      name: option.name,\n      children: option.data\n    };\n    completeTreeValue(root);\n    var levels = option.levels || []; // Used in \"visual priority\" in `treemapVisual.js`.\n    // This way is a little tricky, must satisfy the precondition:\n    //   1. There is no `treeNode.getModel('itemStyle.xxx')` used.\n    //   2. The `Model.prototype.getModel()` will not use any clone-like way.\n\n    var designatedVisualItemStyle = this.designatedVisualItemStyle = {};\n    var designatedVisualModel = new Model({\n      itemStyle: designatedVisualItemStyle\n    }, this, ecModel);\n    levels = option.levels = setDefault(levels, ecModel);\n    var levelModels = zrUtil.map(levels || [], function (levelDefine) {\n      return new Model(levelDefine, designatedVisualModel, ecModel);\n    }, this); // Make sure always a new tree is created when setOption,\n    // in TreemapView, we check whether oldTree === newTree\n    // to choose mappings approach among old shapes and new shapes.\n\n    var tree = Tree.createTree(root, this, beforeLink);\n\n    function beforeLink(nodeData) {\n      nodeData.wrapMethod('getItemModel', function (model, idx) {\n        var node = tree.getNodeByDataIndex(idx);\n        var levelModel = node ? levelModels[node.depth] : null; // If no levelModel, we also need `designatedVisualModel`.\n\n        model.parentModel = levelModel || designatedVisualModel;\n        return model;\n      });\n    }\n\n    return tree.data;\n  };\n\n  TreemapSeriesModel.prototype.optionUpdated = function () {\n    this.resetViewRoot();\n  };\n  /**\r\n   * @override\r\n   * @param {number} dataIndex\r\n   * @param {boolean} [mutipleSeries=false]\r\n   */\n\n\n  TreemapSeriesModel.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\n    var data = this.getData();\n    var value = this.getRawValue(dataIndex);\n    var name = data.getName(dataIndex);\n    return createTooltipMarkup('nameValue', {\n      name: name,\n      value: value\n    });\n  };\n  /**\r\n   * Add tree path to tooltip param\r\n   *\r\n   * @override\r\n   * @param {number} dataIndex\r\n   * @return {Object}\r\n   */\n\n\n  TreemapSeriesModel.prototype.getDataParams = function (dataIndex) {\n    var params = _super.prototype.getDataParams.apply(this, arguments);\n\n    var node = this.getData().tree.getNodeByDataIndex(dataIndex);\n    params.treeAncestors = wrapTreePathInfo(node, this); // compatitable the previous code.\n\n    params.treePathInfo = params.treeAncestors;\n    return params;\n  };\n  /**\r\n   * @public\r\n   * @param {Object} layoutInfo {\r\n   *                                x: containerGroup x\r\n   *                                y: containerGroup y\r\n   *                                width: containerGroup width\r\n   *                                height: containerGroup height\r\n   *                            }\r\n   */\n\n\n  TreemapSeriesModel.prototype.setLayoutInfo = function (layoutInfo) {\n    /**\r\n     * @readOnly\r\n     * @type {Object}\r\n     */\n    this.layoutInfo = this.layoutInfo || {};\n    zrUtil.extend(this.layoutInfo, layoutInfo);\n  };\n  /**\r\n   * @param  {string} id\r\n   * @return {number} index\r\n   */\n\n\n  TreemapSeriesModel.prototype.mapIdToIndex = function (id) {\n    // A feature is implemented:\n    // index is monotone increasing with the sequence of\n    // input id at the first time.\n    // This feature can make sure that each data item and its\n    // mapped color have the same index between data list and\n    // color list at the beginning, which is useful for user\n    // to adjust data-color mapping.\n\n    /**\r\n     * @private\r\n     * @type {Object}\r\n     */\n    var idIndexMap = this._idIndexMap;\n\n    if (!idIndexMap) {\n      idIndexMap = this._idIndexMap = zrUtil.createHashMap();\n      /**\r\n       * @private\r\n       * @type {number}\r\n       */\n\n      this._idIndexMapCount = 0;\n    }\n\n    var index = idIndexMap.get(id);\n\n    if (index == null) {\n      idIndexMap.set(id, index = this._idIndexMapCount++);\n    }\n\n    return index;\n  };\n\n  TreemapSeriesModel.prototype.getViewRoot = function () {\n    return this._viewRoot;\n  };\n\n  TreemapSeriesModel.prototype.resetViewRoot = function (viewRoot) {\n    viewRoot ? this._viewRoot = viewRoot : viewRoot = this._viewRoot;\n    var root = this.getRawData().tree.root;\n\n    if (!viewRoot || viewRoot !== root && !root.contains(viewRoot)) {\n      this._viewRoot = root;\n    }\n  };\n\n  TreemapSeriesModel.prototype.enableAriaDecal = function () {\n    enableAriaDecalForTree(this);\n  };\n\n  TreemapSeriesModel.type = 'series.treemap';\n  TreemapSeriesModel.layoutMode = 'box';\n  TreemapSeriesModel.defaultOption = {\n    // Disable progressive rendering\n    progressive: 0,\n    // size: ['80%', '80%'],            // deprecated, compatible with ec2.\n    left: 'center',\n    top: 'middle',\n    width: '80%',\n    height: '80%',\n    sort: true,\n    clipWindow: 'origin',\n    squareRatio: 0.5 * (1 + Math.sqrt(5)),\n    leafDepth: null,\n    drillDownIcon: '▶',\n    // to align specialized icon. ▷▶❒❐▼✚\n    zoomToNodeRatio: 0.32 * 0.32,\n    roam: true,\n    nodeClick: 'zoomToNode',\n    animation: true,\n    animationDurationUpdate: 900,\n    animationEasing: 'quinticInOut',\n    breadcrumb: {\n      show: true,\n      height: 22,\n      left: 'center',\n      top: 'bottom',\n      // right\n      // bottom\n      emptyItemWidth: 25,\n      itemStyle: {\n        color: 'rgba(0,0,0,0.7)',\n        textStyle: {\n          color: '#fff'\n        }\n      },\n      emphasis: {\n        itemStyle: {\n          color: 'rgba(0,0,0,0.9)' // '#5793f3',\n\n        }\n      }\n    },\n    label: {\n      show: true,\n      // Do not use textDistance, for ellipsis rect just the same as treemap node rect.\n      distance: 0,\n      padding: 5,\n      position: 'inside',\n      // formatter: null,\n      color: '#fff',\n      overflow: 'truncate' // align\n      // verticalAlign\n\n    },\n    upperLabel: {\n      show: false,\n      position: [0, '50%'],\n      height: 20,\n      // formatter: null,\n      // color: '#fff',\n      overflow: 'truncate',\n      // align: null,\n      verticalAlign: 'middle'\n    },\n    itemStyle: {\n      color: null,\n      colorAlpha: null,\n      colorSaturation: null,\n      borderWidth: 0,\n      gapWidth: 0,\n      borderColor: '#fff',\n      borderColorSaturation: null // If specified, borderColor will be ineffective, and the\n      // border color is evaluated by color of current node and\n      // borderColorSaturation.\n\n    },\n    emphasis: {\n      upperLabel: {\n        show: true,\n        position: [0, '50%'],\n        overflow: 'truncate',\n        verticalAlign: 'middle'\n      }\n    },\n    visualDimension: 0,\n    visualMin: null,\n    visualMax: null,\n    color: [],\n    // level[n].color (if necessary).\n    // + Specify color list of each level. level[0].color would be global\n    // color list if not specified. (see method `setDefault`).\n    // + But set as a empty array to forbid fetch color from global palette\n    // when using nodeModel.get('color'), otherwise nodes on deep level\n    // will always has color palette set and are not able to inherit color\n    // from parent node.\n    // + TreemapSeries.color can not be set as 'none', otherwise effect\n    // legend color fetching (see seriesColor.js).\n    colorAlpha: null,\n    colorSaturation: null,\n    colorMappingBy: 'index',\n    visibleMin: 10,\n    // be rendered. Only works when sort is 'asc' or 'desc'.\n    childrenVisibleMin: null,\n    // grandchildren will not show.\n    // Why grandchildren? If not grandchildren but children,\n    // some siblings show children and some not,\n    // the appearance may be mess and not consistent,\n    levels: [] // Each item: {\n    //     visibleMin, itemStyle, visualDimension, label\n    // }\n\n  };\n  return TreemapSeriesModel;\n}(SeriesModel);\n/**\r\n * @param {Object} dataNode\r\n */\n\n\nfunction completeTreeValue(dataNode) {\n  // Postorder travel tree.\n  // If value of none-leaf node is not set,\n  // calculate it by suming up the value of all children.\n  var sum = 0;\n  zrUtil.each(dataNode.children, function (child) {\n    completeTreeValue(child);\n    var childValue = child.value;\n    zrUtil.isArray(childValue) && (childValue = childValue[0]);\n    sum += childValue;\n  });\n  var thisValue = dataNode.value;\n\n  if (zrUtil.isArray(thisValue)) {\n    thisValue = thisValue[0];\n  }\n\n  if (thisValue == null || isNaN(thisValue)) {\n    thisValue = sum;\n  } // Value should not less than 0.\n\n\n  if (thisValue < 0) {\n    thisValue = 0;\n  }\n\n  zrUtil.isArray(dataNode.value) ? dataNode.value[0] = thisValue : dataNode.value = thisValue;\n}\n/**\r\n * set default to level configuration\r\n */\n\n\nfunction setDefault(levels, ecModel) {\n  var globalColorList = normalizeToArray(ecModel.get('color'));\n  var globalDecalList = normalizeToArray(ecModel.get(['aria', 'decal', 'decals']));\n\n  if (!globalColorList) {\n    return;\n  }\n\n  levels = levels || [];\n  var hasColorDefine;\n  var hasDecalDefine;\n  zrUtil.each(levels, function (levelDefine) {\n    var model = new Model(levelDefine);\n    var modelColor = model.get('color');\n    var modelDecal = model.get('decal');\n\n    if (model.get(['itemStyle', 'color']) || modelColor && modelColor !== 'none') {\n      hasColorDefine = true;\n    }\n\n    if (model.get(['itemStyle', 'decal']) || modelDecal && modelDecal !== 'none') {\n      hasDecalDefine = true;\n    }\n  });\n  var level0 = levels[0] || (levels[0] = {});\n\n  if (!hasColorDefine) {\n    level0.color = globalColorList.slice();\n  }\n\n  if (!hasDecalDefine && globalDecalList) {\n    level0.decal = globalDecalList.slice();\n  }\n\n  return levels;\n}\n\nexport default TreemapSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as graphic from '../../util/graphic.js';\nimport { getECData } from '../../util/innerStore.js';\nimport * as layout from '../../util/layout.js';\nimport { wrapTreePathInfo } from '../helper/treeHelper.js';\nimport { curry, defaults } from 'zrender/lib/core/util.js';\nimport { convertOptionIdName } from '../../util/model.js';\nimport { toggleHoverEmphasis, Z2_EMPHASIS_LIFT } from '../../util/states.js';\nimport { createTextStyle } from '../../label/labelStyle.js';\nvar TEXT_PADDING = 8;\nvar ITEM_GAP = 8;\nvar ARRAY_LENGTH = 5;\n\nvar Breadcrumb =\n/** @class */\nfunction () {\n  function Breadcrumb(containerGroup) {\n    this.group = new graphic.Group();\n    containerGroup.add(this.group);\n  }\n\n  Breadcrumb.prototype.render = function (seriesModel, api, targetNode, onSelect) {\n    var model = seriesModel.getModel('breadcrumb');\n    var thisGroup = this.group;\n    thisGroup.removeAll();\n\n    if (!model.get('show') || !targetNode) {\n      return;\n    }\n\n    var normalStyleModel = model.getModel('itemStyle');\n    var emphasisModel = model.getModel('emphasis');\n    var textStyleModel = normalStyleModel.getModel('textStyle');\n    var emphasisTextStyleModel = emphasisModel.getModel(['itemStyle', 'textStyle']);\n    var layoutParam = {\n      pos: {\n        left: model.get('left'),\n        right: model.get('right'),\n        top: model.get('top'),\n        bottom: model.get('bottom')\n      },\n      box: {\n        width: api.getWidth(),\n        height: api.getHeight()\n      },\n      emptyItemWidth: model.get('emptyItemWidth'),\n      totalWidth: 0,\n      renderList: []\n    };\n\n    this._prepare(targetNode, layoutParam, textStyleModel);\n\n    this._renderContent(seriesModel, layoutParam, normalStyleModel, emphasisModel, textStyleModel, emphasisTextStyleModel, onSelect);\n\n    layout.positionElement(thisGroup, layoutParam.pos, layoutParam.box);\n  };\n  /**\r\n   * Prepare render list and total width\r\n   * @private\r\n   */\n\n\n  Breadcrumb.prototype._prepare = function (targetNode, layoutParam, textStyleModel) {\n    for (var node = targetNode; node; node = node.parentNode) {\n      var text = convertOptionIdName(node.getModel().get('name'), '');\n      var textRect = textStyleModel.getTextRect(text);\n      var itemWidth = Math.max(textRect.width + TEXT_PADDING * 2, layoutParam.emptyItemWidth);\n      layoutParam.totalWidth += itemWidth + ITEM_GAP;\n      layoutParam.renderList.push({\n        node: node,\n        text: text,\n        width: itemWidth\n      });\n    }\n  };\n  /**\r\n   * @private\r\n   */\n\n\n  Breadcrumb.prototype._renderContent = function (seriesModel, layoutParam, normalStyleModel, emphasisModel, textStyleModel, emphasisTextStyleModel, onSelect) {\n    // Start rendering.\n    var lastX = 0;\n    var emptyItemWidth = layoutParam.emptyItemWidth;\n    var height = seriesModel.get(['breadcrumb', 'height']);\n    var availableSize = layout.getAvailableSize(layoutParam.pos, layoutParam.box);\n    var totalWidth = layoutParam.totalWidth;\n    var renderList = layoutParam.renderList;\n    var emphasisItemStyle = emphasisModel.getModel('itemStyle').getItemStyle();\n\n    for (var i = renderList.length - 1; i >= 0; i--) {\n      var item = renderList[i];\n      var itemNode = item.node;\n      var itemWidth = item.width;\n      var text = item.text; // Hdie text and shorten width if necessary.\n\n      if (totalWidth > availableSize.width) {\n        totalWidth -= itemWidth - emptyItemWidth;\n        itemWidth = emptyItemWidth;\n        text = null;\n      }\n\n      var el = new graphic.Polygon({\n        shape: {\n          points: makeItemPoints(lastX, 0, itemWidth, height, i === renderList.length - 1, i === 0)\n        },\n        style: defaults(normalStyleModel.getItemStyle(), {\n          lineJoin: 'bevel'\n        }),\n        textContent: new graphic.Text({\n          style: createTextStyle(textStyleModel, {\n            text: text\n          })\n        }),\n        textConfig: {\n          position: 'inside'\n        },\n        z2: Z2_EMPHASIS_LIFT * 1e4,\n        onclick: curry(onSelect, itemNode)\n      });\n      el.disableLabelAnimation = true;\n      el.getTextContent().ensureState('emphasis').style = createTextStyle(emphasisTextStyleModel, {\n        text: text\n      });\n      el.ensureState('emphasis').style = emphasisItemStyle;\n      toggleHoverEmphasis(el, emphasisModel.get('focus'), emphasisModel.get('blurScope'), emphasisModel.get('disabled'));\n      this.group.add(el);\n      packEventData(el, seriesModel, itemNode);\n      lastX += itemWidth + ITEM_GAP;\n    }\n  };\n\n  Breadcrumb.prototype.remove = function () {\n    this.group.removeAll();\n  };\n\n  return Breadcrumb;\n}();\n\nfunction makeItemPoints(x, y, itemWidth, itemHeight, head, tail) {\n  var points = [[head ? x : x - ARRAY_LENGTH, y], [x + itemWidth, y], [x + itemWidth, y + itemHeight], [head ? x : x - ARRAY_LENGTH, y + itemHeight]];\n  !tail && points.splice(2, 0, [x + itemWidth + ARRAY_LENGTH, y + itemHeight / 2]);\n  !head && points.push([x, y + itemHeight / 2]);\n  return points;\n} // Package custom mouse event.\n\n\nfunction packEventData(el, seriesModel, itemNode) {\n  getECData(el).eventData = {\n    componentType: 'series',\n    componentSubType: 'treemap',\n    componentIndex: seriesModel.componentIndex,\n    seriesIndex: seriesModel.seriesIndex,\n    seriesName: seriesModel.name,\n    seriesType: 'treemap',\n    selfType: 'breadcrumb',\n    nodeData: {\n      dataIndex: itemNode && itemNode.dataIndex,\n      name: itemNode && itemNode.name\n    },\n    treePathInfo: itemNode && wrapTreePathInfo(itemNode, seriesModel)\n  };\n}\n\nexport default Breadcrumb;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\n\n/**\r\n * Animate multiple elements with a single done-callback.\r\n *\r\n * @example\r\n *  animation\r\n *      .createWrap()\r\n *      .add(el1, {x: 10, y: 10})\r\n *      .add(el2, {shape: {width: 500}, style: {fill: 'red'}}, 400)\r\n *      .done(function () { // done })\r\n *      .start('cubicOut');\r\n */\nvar AnimationWrap =\n/** @class */\nfunction () {\n  function AnimationWrap() {\n    this._storage = [];\n    this._elExistsMap = {};\n  }\n  /**\r\n   * Caution: a el can only be added once, otherwise 'done'\r\n   * might not be called. This method checks this (by el.id),\r\n   * suppresses adding and returns false when existing el found.\r\n   *\r\n   * @return Whether adding succeeded.\r\n   */\n\n\n  AnimationWrap.prototype.add = function (el, target, duration, delay, easing) {\n    if (this._elExistsMap[el.id]) {\n      return false;\n    }\n\n    this._elExistsMap[el.id] = true;\n\n    this._storage.push({\n      el: el,\n      target: target,\n      duration: duration,\n      delay: delay,\n      easing: easing\n    });\n\n    return true;\n  };\n  /**\r\n   * Only execute when animation done/aborted.\r\n   */\n\n\n  AnimationWrap.prototype.finished = function (callback) {\n    this._finishedCallback = callback;\n    return this;\n  };\n  /**\r\n   * Will stop exist animation firstly.\r\n   */\n\n\n  AnimationWrap.prototype.start = function () {\n    var _this = this;\n\n    var count = this._storage.length;\n\n    var checkTerminate = function () {\n      count--;\n\n      if (count <= 0) {\n        // Guard.\n        _this._storage.length = 0;\n        _this._elExistsMap = {};\n        _this._finishedCallback && _this._finishedCallback();\n      }\n    };\n\n    for (var i = 0, len = this._storage.length; i < len; i++) {\n      var item = this._storage[i];\n      item.el.animateTo(item.target, {\n        duration: item.duration,\n        delay: item.delay,\n        easing: item.easing,\n        setToFinal: true,\n        done: checkTerminate,\n        aborted: checkTerminate\n      });\n    }\n\n    return this;\n  };\n\n  return AnimationWrap;\n}();\n\nexport function createWrap() {\n  return new AnimationWrap();\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport { bind, each, indexOf, curry, extend, normalizeCssArray, isFunction } from 'zrender/lib/core/util.js';\nimport * as graphic from '../../util/graphic.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { isHighDownDispatcher, setAsHighDownDispatcher, setDefaultStateProxy, enableHoverFocus, Z2_EMPHASIS_LIFT } from '../../util/states.js';\nimport DataDiffer from '../../data/DataDiffer.js';\nimport * as helper from '../helper/treeHelper.js';\nimport Breadcrumb from './Breadcrumb.js';\nimport RoamController from '../../component/helper/RoamController.js';\nimport BoundingRect from 'zrender/lib/core/BoundingRect.js';\nimport * as matrix from 'zrender/lib/core/matrix.js';\nimport * as animationUtil from '../../util/animation.js';\nimport makeStyleMapper from '../../model/mixin/makeStyleMapper.js';\nimport ChartView from '../../view/Chart.js';\nimport Displayable from 'zrender/lib/graphic/Displayable.js';\nimport { makeInner, convertOptionIdName } from '../../util/model.js';\nimport { windowOpen } from '../../util/format.js';\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle.js';\nvar Group = graphic.Group;\nvar Rect = graphic.Rect;\nvar DRAG_THRESHOLD = 3;\nvar PATH_LABEL_NOAMAL = 'label';\nvar PATH_UPPERLABEL_NORMAL = 'upperLabel'; // Should larger than emphasis states lift z\n\nvar Z2_BASE = Z2_EMPHASIS_LIFT * 10; // Should bigger than every z2.\n\nvar Z2_BG = Z2_EMPHASIS_LIFT * 2;\nvar Z2_CONTENT = Z2_EMPHASIS_LIFT * 3;\nvar getStateItemStyle = makeStyleMapper([['fill', 'color'], // `borderColor` and `borderWidth` has been occupied,\n// so use `stroke` to indicate the stroke of the rect.\n['stroke', 'strokeColor'], ['lineWidth', 'strokeWidth'], ['shadowBlur'], ['shadowOffsetX'], ['shadowOffsetY'], ['shadowColor'] // Option decal is in `DecalObject` but style.decal is in `PatternObject`.\n// So do not transfer decal directly.\n]);\n\nvar getItemStyleNormal = function (model) {\n  // Normal style props should include emphasis style props.\n  var itemStyle = getStateItemStyle(model); // Clear styles set by emphasis.\n\n  itemStyle.stroke = itemStyle.fill = itemStyle.lineWidth = null;\n  return itemStyle;\n};\n\nvar inner = makeInner();\n\nvar TreemapView =\n/** @class */\nfunction (_super) {\n  __extends(TreemapView, _super);\n\n  function TreemapView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = TreemapView.type;\n    _this._state = 'ready';\n    _this._storage = createStorage();\n    return _this;\n  }\n  /**\r\n   * @override\r\n   */\n\n\n  TreemapView.prototype.render = function (seriesModel, ecModel, api, payload) {\n    var models = ecModel.findComponents({\n      mainType: 'series',\n      subType: 'treemap',\n      query: payload\n    });\n\n    if (indexOf(models, seriesModel) < 0) {\n      return;\n    }\n\n    this.seriesModel = seriesModel;\n    this.api = api;\n    this.ecModel = ecModel;\n    var types = ['treemapZoomToNode', 'treemapRootToNode'];\n    var targetInfo = helper.retrieveTargetInfo(payload, types, seriesModel);\n    var payloadType = payload && payload.type;\n    var layoutInfo = seriesModel.layoutInfo;\n    var isInit = !this._oldTree;\n    var thisStorage = this._storage; // Mark new root when action is treemapRootToNode.\n\n    var reRoot = payloadType === 'treemapRootToNode' && targetInfo && thisStorage ? {\n      rootNodeGroup: thisStorage.nodeGroup[targetInfo.node.getRawIndex()],\n      direction: payload.direction\n    } : null;\n\n    var containerGroup = this._giveContainerGroup(layoutInfo);\n\n    var hasAnimation = seriesModel.get('animation');\n\n    var renderResult = this._doRender(containerGroup, seriesModel, reRoot);\n\n    hasAnimation && !isInit && (!payloadType || payloadType === 'treemapZoomToNode' || payloadType === 'treemapRootToNode') ? this._doAnimation(containerGroup, renderResult, seriesModel, reRoot) : renderResult.renderFinally();\n\n    this._resetController(api);\n\n    this._renderBreadcrumb(seriesModel, api, targetInfo);\n  };\n\n  TreemapView.prototype._giveContainerGroup = function (layoutInfo) {\n    var containerGroup = this._containerGroup;\n\n    if (!containerGroup) {\n      // FIXME\n      // 加一层containerGroup是为了clip，但是现在clip功能并没有实现。\n      containerGroup = this._containerGroup = new Group();\n\n      this._initEvents(containerGroup);\n\n      this.group.add(containerGroup);\n    }\n\n    containerGroup.x = layoutInfo.x;\n    containerGroup.y = layoutInfo.y;\n    return containerGroup;\n  };\n\n  TreemapView.prototype._doRender = function (containerGroup, seriesModel, reRoot) {\n    var thisTree = seriesModel.getData().tree;\n    var oldTree = this._oldTree; // Clear last shape records.\n\n    var lastsForAnimation = createStorage();\n    var thisStorage = createStorage();\n    var oldStorage = this._storage;\n    var willInvisibleEls = [];\n\n    function doRenderNode(thisNode, oldNode, parentGroup, depth) {\n      return renderNode(seriesModel, thisStorage, oldStorage, reRoot, lastsForAnimation, willInvisibleEls, thisNode, oldNode, parentGroup, depth);\n    } // Notice: When thisTree and oldTree are the same tree (see list.cloneShallow),\n    // the oldTree is actually losted, so we cannot find all of the old graphic\n    // elements from tree. So we use this strategy: make element storage, move\n    // from old storage to new storage, clear old storage.\n\n\n    dualTravel(thisTree.root ? [thisTree.root] : [], oldTree && oldTree.root ? [oldTree.root] : [], containerGroup, thisTree === oldTree || !oldTree, 0); // Process all removing.\n\n    var willDeleteEls = clearStorage(oldStorage);\n    this._oldTree = thisTree;\n    this._storage = thisStorage;\n    return {\n      lastsForAnimation: lastsForAnimation,\n      willDeleteEls: willDeleteEls,\n      renderFinally: renderFinally\n    };\n\n    function dualTravel(thisViewChildren, oldViewChildren, parentGroup, sameTree, depth) {\n      // When 'render' is triggered by action,\n      // 'this' and 'old' may be the same tree,\n      // we use rawIndex in that case.\n      if (sameTree) {\n        oldViewChildren = thisViewChildren;\n        each(thisViewChildren, function (child, index) {\n          !child.isRemoved() && processNode(index, index);\n        });\n      } // Diff hierarchically (diff only in each subtree, but not whole).\n      // because, consistency of view is important.\n      else {\n          new DataDiffer(oldViewChildren, thisViewChildren, getKey, getKey).add(processNode).update(processNode).remove(curry(processNode, null)).execute();\n        }\n\n      function getKey(node) {\n        // Identify by name or raw index.\n        return node.getId();\n      }\n\n      function processNode(newIndex, oldIndex) {\n        var thisNode = newIndex != null ? thisViewChildren[newIndex] : null;\n        var oldNode = oldIndex != null ? oldViewChildren[oldIndex] : null;\n        var group = doRenderNode(thisNode, oldNode, parentGroup, depth);\n        group && dualTravel(thisNode && thisNode.viewChildren || [], oldNode && oldNode.viewChildren || [], group, sameTree, depth + 1);\n      }\n    }\n\n    function clearStorage(storage) {\n      var willDeleteEls = createStorage();\n      storage && each(storage, function (store, storageName) {\n        var delEls = willDeleteEls[storageName];\n        each(store, function (el) {\n          el && (delEls.push(el), inner(el).willDelete = true);\n        });\n      });\n      return willDeleteEls;\n    }\n\n    function renderFinally() {\n      each(willDeleteEls, function (els) {\n        each(els, function (el) {\n          el.parent && el.parent.remove(el);\n        });\n      });\n      each(willInvisibleEls, function (el) {\n        el.invisible = true; // Setting invisible is for optimizing, so no need to set dirty,\n        // just mark as invisible.\n\n        el.dirty();\n      });\n    }\n  };\n\n  TreemapView.prototype._doAnimation = function (containerGroup, renderResult, seriesModel, reRoot) {\n    var durationOption = seriesModel.get('animationDurationUpdate');\n    var easingOption = seriesModel.get('animationEasing'); // TODO: do not support function until necessary.\n\n    var duration = (isFunction(durationOption) ? 0 : durationOption) || 0;\n    var easing = (isFunction(easingOption) ? null : easingOption) || 'cubicOut';\n    var animationWrap = animationUtil.createWrap(); // Make delete animations.\n\n    each(renderResult.willDeleteEls, function (store, storageName) {\n      each(store, function (el, rawIndex) {\n        if (el.invisible) {\n          return;\n        }\n\n        var parent = el.parent; // Always has parent, and parent is nodeGroup.\n\n        var target;\n        var innerStore = inner(parent);\n\n        if (reRoot && reRoot.direction === 'drillDown') {\n          target = parent === reRoot.rootNodeGroup // This is the content element of view root.\n          // Only `content` will enter this branch, because\n          // `background` and `nodeGroup` will not be deleted.\n          ? {\n            shape: {\n              x: 0,\n              y: 0,\n              width: innerStore.nodeWidth,\n              height: innerStore.nodeHeight\n            },\n            style: {\n              opacity: 0\n            }\n          } // Others.\n          : {\n            style: {\n              opacity: 0\n            }\n          };\n        } else {\n          var targetX = 0;\n          var targetY = 0;\n\n          if (!innerStore.willDelete) {\n            // Let node animate to right-bottom corner, cooperating with fadeout,\n            // which is appropriate for user understanding.\n            // Divided by 2 for reRoot rolling up effect.\n            targetX = innerStore.nodeWidth / 2;\n            targetY = innerStore.nodeHeight / 2;\n          }\n\n          target = storageName === 'nodeGroup' ? {\n            x: targetX,\n            y: targetY,\n            style: {\n              opacity: 0\n            }\n          } : {\n            shape: {\n              x: targetX,\n              y: targetY,\n              width: 0,\n              height: 0\n            },\n            style: {\n              opacity: 0\n            }\n          };\n        } // TODO: do not support delay until necessary.\n\n\n        target && animationWrap.add(el, target, duration, 0, easing);\n      });\n    }); // Make other animations\n\n    each(this._storage, function (store, storageName) {\n      each(store, function (el, rawIndex) {\n        var last = renderResult.lastsForAnimation[storageName][rawIndex];\n        var target = {};\n\n        if (!last) {\n          return;\n        }\n\n        if (el instanceof graphic.Group) {\n          if (last.oldX != null) {\n            target.x = el.x;\n            target.y = el.y;\n            el.x = last.oldX;\n            el.y = last.oldY;\n          }\n        } else {\n          if (last.oldShape) {\n            target.shape = extend({}, el.shape);\n            el.setShape(last.oldShape);\n          }\n\n          if (last.fadein) {\n            el.setStyle('opacity', 0);\n            target.style = {\n              opacity: 1\n            };\n          } // When animation is stopped for succedent animation starting,\n          // el.style.opacity might not be 1\n          else if (el.style.opacity !== 1) {\n              target.style = {\n                opacity: 1\n              };\n            }\n        }\n\n        animationWrap.add(el, target, duration, 0, easing);\n      });\n    }, this);\n    this._state = 'animating';\n    animationWrap.finished(bind(function () {\n      this._state = 'ready';\n      renderResult.renderFinally();\n    }, this)).start();\n  };\n\n  TreemapView.prototype._resetController = function (api) {\n    var controller = this._controller; // Init controller.\n\n    if (!controller) {\n      controller = this._controller = new RoamController(api.getZr());\n      controller.enable(this.seriesModel.get('roam'));\n      controller.on('pan', bind(this._onPan, this));\n      controller.on('zoom', bind(this._onZoom, this));\n    }\n\n    var rect = new BoundingRect(0, 0, api.getWidth(), api.getHeight());\n    controller.setPointerChecker(function (e, x, y) {\n      return rect.contain(x, y);\n    });\n  };\n\n  TreemapView.prototype._clearController = function () {\n    var controller = this._controller;\n\n    if (controller) {\n      controller.dispose();\n      controller = null;\n    }\n  };\n\n  TreemapView.prototype._onPan = function (e) {\n    if (this._state !== 'animating' && (Math.abs(e.dx) > DRAG_THRESHOLD || Math.abs(e.dy) > DRAG_THRESHOLD)) {\n      // These param must not be cached.\n      var root = this.seriesModel.getData().tree.root;\n\n      if (!root) {\n        return;\n      }\n\n      var rootLayout = root.getLayout();\n\n      if (!rootLayout) {\n        return;\n      }\n\n      this.api.dispatchAction({\n        type: 'treemapMove',\n        from: this.uid,\n        seriesId: this.seriesModel.id,\n        rootRect: {\n          x: rootLayout.x + e.dx,\n          y: rootLayout.y + e.dy,\n          width: rootLayout.width,\n          height: rootLayout.height\n        }\n      });\n    }\n  };\n\n  TreemapView.prototype._onZoom = function (e) {\n    var mouseX = e.originX;\n    var mouseY = e.originY;\n\n    if (this._state !== 'animating') {\n      // These param must not be cached.\n      var root = this.seriesModel.getData().tree.root;\n\n      if (!root) {\n        return;\n      }\n\n      var rootLayout = root.getLayout();\n\n      if (!rootLayout) {\n        return;\n      }\n\n      var rect = new BoundingRect(rootLayout.x, rootLayout.y, rootLayout.width, rootLayout.height);\n      var layoutInfo = this.seriesModel.layoutInfo; // Transform mouse coord from global to containerGroup.\n\n      mouseX -= layoutInfo.x;\n      mouseY -= layoutInfo.y; // Scale root bounding rect.\n\n      var m = matrix.create();\n      matrix.translate(m, m, [-mouseX, -mouseY]);\n      matrix.scale(m, m, [e.scale, e.scale]);\n      matrix.translate(m, m, [mouseX, mouseY]);\n      rect.applyTransform(m);\n      this.api.dispatchAction({\n        type: 'treemapRender',\n        from: this.uid,\n        seriesId: this.seriesModel.id,\n        rootRect: {\n          x: rect.x,\n          y: rect.y,\n          width: rect.width,\n          height: rect.height\n        }\n      });\n    }\n  };\n\n  TreemapView.prototype._initEvents = function (containerGroup) {\n    var _this = this;\n\n    containerGroup.on('click', function (e) {\n      if (_this._state !== 'ready') {\n        return;\n      }\n\n      var nodeClick = _this.seriesModel.get('nodeClick', true);\n\n      if (!nodeClick) {\n        return;\n      }\n\n      var targetInfo = _this.findTarget(e.offsetX, e.offsetY);\n\n      if (!targetInfo) {\n        return;\n      }\n\n      var node = targetInfo.node;\n\n      if (node.getLayout().isLeafRoot) {\n        _this._rootToNode(targetInfo);\n      } else {\n        if (nodeClick === 'zoomToNode') {\n          _this._zoomToNode(targetInfo);\n        } else if (nodeClick === 'link') {\n          var itemModel = node.hostTree.data.getItemModel(node.dataIndex);\n          var link = itemModel.get('link', true);\n          var linkTarget = itemModel.get('target', true) || 'blank';\n          link && windowOpen(link, linkTarget);\n        }\n      }\n    }, this);\n  };\n\n  TreemapView.prototype._renderBreadcrumb = function (seriesModel, api, targetInfo) {\n    var _this = this;\n\n    if (!targetInfo) {\n      targetInfo = seriesModel.get('leafDepth', true) != null ? {\n        node: seriesModel.getViewRoot()\n      } // FIXME\n      // better way?\n      // Find breadcrumb tail on center of containerGroup.\n      : this.findTarget(api.getWidth() / 2, api.getHeight() / 2);\n\n      if (!targetInfo) {\n        targetInfo = {\n          node: seriesModel.getData().tree.root\n        };\n      }\n    }\n\n    (this._breadcrumb || (this._breadcrumb = new Breadcrumb(this.group))).render(seriesModel, api, targetInfo.node, function (node) {\n      if (_this._state !== 'animating') {\n        helper.aboveViewRoot(seriesModel.getViewRoot(), node) ? _this._rootToNode({\n          node: node\n        }) : _this._zoomToNode({\n          node: node\n        });\n      }\n    });\n  };\n  /**\r\n   * @override\r\n   */\n\n\n  TreemapView.prototype.remove = function () {\n    this._clearController();\n\n    this._containerGroup && this._containerGroup.removeAll();\n    this._storage = createStorage();\n    this._state = 'ready';\n    this._breadcrumb && this._breadcrumb.remove();\n  };\n\n  TreemapView.prototype.dispose = function () {\n    this._clearController();\n  };\n\n  TreemapView.prototype._zoomToNode = function (targetInfo) {\n    this.api.dispatchAction({\n      type: 'treemapZoomToNode',\n      from: this.uid,\n      seriesId: this.seriesModel.id,\n      targetNode: targetInfo.node\n    });\n  };\n\n  TreemapView.prototype._rootToNode = function (targetInfo) {\n    this.api.dispatchAction({\n      type: 'treemapRootToNode',\n      from: this.uid,\n      seriesId: this.seriesModel.id,\n      targetNode: targetInfo.node\n    });\n  };\n  /**\r\n   * @public\r\n   * @param {number} x Global coord x.\r\n   * @param {number} y Global coord y.\r\n   * @return {Object} info If not found, return undefined;\r\n   * @return {number} info.node Target node.\r\n   * @return {number} info.offsetX x refer to target node.\r\n   * @return {number} info.offsetY y refer to target node.\r\n   */\n\n\n  TreemapView.prototype.findTarget = function (x, y) {\n    var targetInfo;\n    var viewRoot = this.seriesModel.getViewRoot();\n    viewRoot.eachNode({\n      attr: 'viewChildren',\n      order: 'preorder'\n    }, function (node) {\n      var bgEl = this._storage.background[node.getRawIndex()]; // If invisible, there might be no element.\n\n\n      if (bgEl) {\n        var point = bgEl.transformCoordToLocal(x, y);\n        var shape = bgEl.shape; // For performance consideration, don't use 'getBoundingRect'.\n\n        if (shape.x <= point[0] && point[0] <= shape.x + shape.width && shape.y <= point[1] && point[1] <= shape.y + shape.height) {\n          targetInfo = {\n            node: node,\n            offsetX: point[0],\n            offsetY: point[1]\n          };\n        } else {\n          return false; // Suppress visit subtree.\n        }\n      }\n    }, this);\n    return targetInfo;\n  };\n\n  TreemapView.type = 'treemap';\n  return TreemapView;\n}(ChartView);\n/**\r\n * @inner\r\n */\n\n\nfunction createStorage() {\n  return {\n    nodeGroup: [],\n    background: [],\n    content: []\n  };\n}\n/**\r\n * @inner\r\n * @return Return undefined means do not travel further.\r\n */\n\n\nfunction renderNode(seriesModel, thisStorage, oldStorage, reRoot, lastsForAnimation, willInvisibleEls, thisNode, oldNode, parentGroup, depth) {\n  // Whether under viewRoot.\n  if (!thisNode) {\n    // Deleting nodes will be performed finally. This method just find\n    // element from old storage, or create new element, set them to new\n    // storage, and set styles.\n    return;\n  } // -------------------------------------------------------------------\n  // Start of closure variables available in \"Procedures in renderNode\".\n\n\n  var thisLayout = thisNode.getLayout();\n  var data = seriesModel.getData();\n  var nodeModel = thisNode.getModel(); // Only for enabling highlight/downplay. Clear firstly.\n  // Because some node will not be rendered.\n\n  data.setItemGraphicEl(thisNode.dataIndex, null);\n\n  if (!thisLayout || !thisLayout.isInView) {\n    return;\n  }\n\n  var thisWidth = thisLayout.width;\n  var thisHeight = thisLayout.height;\n  var borderWidth = thisLayout.borderWidth;\n  var thisInvisible = thisLayout.invisible;\n  var thisRawIndex = thisNode.getRawIndex();\n  var oldRawIndex = oldNode && oldNode.getRawIndex();\n  var thisViewChildren = thisNode.viewChildren;\n  var upperHeight = thisLayout.upperHeight;\n  var isParent = thisViewChildren && thisViewChildren.length;\n  var itemStyleNormalModel = nodeModel.getModel('itemStyle');\n  var itemStyleEmphasisModel = nodeModel.getModel(['emphasis', 'itemStyle']);\n  var itemStyleBlurModel = nodeModel.getModel(['blur', 'itemStyle']);\n  var itemStyleSelectModel = nodeModel.getModel(['select', 'itemStyle']);\n  var borderRadius = itemStyleNormalModel.get('borderRadius') || 0; // End of closure ariables available in \"Procedures in renderNode\".\n  // -----------------------------------------------------------------\n  // Node group\n\n  var group = giveGraphic('nodeGroup', Group);\n\n  if (!group) {\n    return;\n  }\n\n  parentGroup.add(group); // x,y are not set when el is above view root.\n\n  group.x = thisLayout.x || 0;\n  group.y = thisLayout.y || 0;\n  group.markRedraw();\n  inner(group).nodeWidth = thisWidth;\n  inner(group).nodeHeight = thisHeight;\n\n  if (thisLayout.isAboveViewRoot) {\n    return group;\n  } // Background\n\n\n  var bg = giveGraphic('background', Rect, depth, Z2_BG);\n  bg && renderBackground(group, bg, isParent && thisLayout.upperLabelHeight);\n  var emphasisModel = nodeModel.getModel('emphasis');\n  var focus = emphasisModel.get('focus');\n  var blurScope = emphasisModel.get('blurScope');\n  var isDisabled = emphasisModel.get('disabled');\n  var focusOrIndices = focus === 'ancestor' ? thisNode.getAncestorsIndices() : focus === 'descendant' ? thisNode.getDescendantIndices() : focus; // No children, render content.\n\n  if (isParent) {\n    // Because of the implementation about \"traverse\" in graphic hover style, we\n    // can not set hover listener on the \"group\" of non-leaf node. Otherwise the\n    // hover event from the descendents will be listenered.\n    if (isHighDownDispatcher(group)) {\n      setAsHighDownDispatcher(group, false);\n    }\n\n    if (bg) {\n      setAsHighDownDispatcher(bg, !isDisabled); // Only for enabling highlight/downplay.\n\n      data.setItemGraphicEl(thisNode.dataIndex, bg);\n      enableHoverFocus(bg, focusOrIndices, blurScope);\n    }\n  } else {\n    var content = giveGraphic('content', Rect, depth, Z2_CONTENT);\n    content && renderContent(group, content);\n    bg.disableMorphing = true;\n\n    if (bg && isHighDownDispatcher(bg)) {\n      setAsHighDownDispatcher(bg, false);\n    }\n\n    setAsHighDownDispatcher(group, !isDisabled); // Only for enabling highlight/downplay.\n\n    data.setItemGraphicEl(thisNode.dataIndex, group);\n    enableHoverFocus(group, focusOrIndices, blurScope);\n  }\n\n  return group; // ----------------------------\n  // | Procedures in renderNode |\n  // ----------------------------\n\n  function renderBackground(group, bg, useUpperLabel) {\n    var ecData = getECData(bg); // For tooltip.\n\n    ecData.dataIndex = thisNode.dataIndex;\n    ecData.seriesIndex = seriesModel.seriesIndex;\n    bg.setShape({\n      x: 0,\n      y: 0,\n      width: thisWidth,\n      height: thisHeight,\n      r: borderRadius\n    });\n\n    if (thisInvisible) {\n      // If invisible, do not set visual, otherwise the element will\n      // change immediately before animation. We think it is OK to\n      // remain its origin color when moving out of the view window.\n      processInvisible(bg);\n    } else {\n      bg.invisible = false;\n      var style = thisNode.getVisual('style');\n      var visualBorderColor = style.stroke;\n      var normalStyle = getItemStyleNormal(itemStyleNormalModel);\n      normalStyle.fill = visualBorderColor;\n      var emphasisStyle = getStateItemStyle(itemStyleEmphasisModel);\n      emphasisStyle.fill = itemStyleEmphasisModel.get('borderColor');\n      var blurStyle = getStateItemStyle(itemStyleBlurModel);\n      blurStyle.fill = itemStyleBlurModel.get('borderColor');\n      var selectStyle = getStateItemStyle(itemStyleSelectModel);\n      selectStyle.fill = itemStyleSelectModel.get('borderColor');\n\n      if (useUpperLabel) {\n        var upperLabelWidth = thisWidth - 2 * borderWidth;\n        prepareText( // PENDING: convert ZRColor to ColorString for text.\n        bg, visualBorderColor, style.opacity, {\n          x: borderWidth,\n          y: 0,\n          width: upperLabelWidth,\n          height: upperHeight\n        });\n      } // For old bg.\n      else {\n          bg.removeTextContent();\n        }\n\n      bg.setStyle(normalStyle);\n      bg.ensureState('emphasis').style = emphasisStyle;\n      bg.ensureState('blur').style = blurStyle;\n      bg.ensureState('select').style = selectStyle;\n      setDefaultStateProxy(bg);\n    }\n\n    group.add(bg);\n  }\n\n  function renderContent(group, content) {\n    var ecData = getECData(content); // For tooltip.\n\n    ecData.dataIndex = thisNode.dataIndex;\n    ecData.seriesIndex = seriesModel.seriesIndex;\n    var contentWidth = Math.max(thisWidth - 2 * borderWidth, 0);\n    var contentHeight = Math.max(thisHeight - 2 * borderWidth, 0);\n    content.culling = true;\n    content.setShape({\n      x: borderWidth,\n      y: borderWidth,\n      width: contentWidth,\n      height: contentHeight,\n      r: borderRadius\n    });\n\n    if (thisInvisible) {\n      // If invisible, do not set visual, otherwise the element will\n      // change immediately before animation. We think it is OK to\n      // remain its origin color when moving out of the view window.\n      processInvisible(content);\n    } else {\n      content.invisible = false;\n      var nodeStyle = thisNode.getVisual('style');\n      var visualColor = nodeStyle.fill;\n      var normalStyle = getItemStyleNormal(itemStyleNormalModel);\n      normalStyle.fill = visualColor;\n      normalStyle.decal = nodeStyle.decal;\n      var emphasisStyle = getStateItemStyle(itemStyleEmphasisModel);\n      var blurStyle = getStateItemStyle(itemStyleBlurModel);\n      var selectStyle = getStateItemStyle(itemStyleSelectModel); // PENDING: convert ZRColor to ColorString for text.\n\n      prepareText(content, visualColor, nodeStyle.opacity, null);\n      content.setStyle(normalStyle);\n      content.ensureState('emphasis').style = emphasisStyle;\n      content.ensureState('blur').style = blurStyle;\n      content.ensureState('select').style = selectStyle;\n      setDefaultStateProxy(content);\n    }\n\n    group.add(content);\n  }\n\n  function processInvisible(element) {\n    // Delay invisible setting utill animation finished,\n    // avoid element vanish suddenly before animation.\n    !element.invisible && willInvisibleEls.push(element);\n  }\n\n  function prepareText(rectEl, visualColor, visualOpacity, // Can be null/undefined\n  upperLabelRect) {\n    var normalLabelModel = nodeModel.getModel(upperLabelRect ? PATH_UPPERLABEL_NORMAL : PATH_LABEL_NOAMAL);\n    var defaultText = convertOptionIdName(nodeModel.get('name'), null);\n    var isShow = normalLabelModel.getShallow('show');\n    setLabelStyle(rectEl, getLabelStatesModels(nodeModel, upperLabelRect ? PATH_UPPERLABEL_NORMAL : PATH_LABEL_NOAMAL), {\n      defaultText: isShow ? defaultText : null,\n      inheritColor: visualColor,\n      defaultOpacity: visualOpacity,\n      labelFetcher: seriesModel,\n      labelDataIndex: thisNode.dataIndex\n    });\n    var textEl = rectEl.getTextContent();\n\n    if (!textEl) {\n      return;\n    }\n\n    var textStyle = textEl.style;\n    var textPadding = normalizeCssArray(textStyle.padding || 0);\n\n    if (upperLabelRect) {\n      rectEl.setTextConfig({\n        layoutRect: upperLabelRect\n      });\n      textEl.disableLabelLayout = true;\n    }\n\n    textEl.beforeUpdate = function () {\n      var width = Math.max((upperLabelRect ? upperLabelRect.width : rectEl.shape.width) - textPadding[1] - textPadding[3], 0);\n      var height = Math.max((upperLabelRect ? upperLabelRect.height : rectEl.shape.height) - textPadding[0] - textPadding[2], 0);\n\n      if (textStyle.width !== width || textStyle.height !== height) {\n        textEl.setStyle({\n          width: width,\n          height: height\n        });\n      }\n    };\n\n    textStyle.truncateMinChar = 2;\n    textStyle.lineOverflow = 'truncate';\n    addDrillDownIcon(textStyle, upperLabelRect, thisLayout);\n    var textEmphasisState = textEl.getState('emphasis');\n    addDrillDownIcon(textEmphasisState ? textEmphasisState.style : null, upperLabelRect, thisLayout);\n  }\n\n  function addDrillDownIcon(style, upperLabelRect, thisLayout) {\n    var text = style ? style.text : null;\n\n    if (!upperLabelRect && thisLayout.isLeafRoot && text != null) {\n      var iconChar = seriesModel.get('drillDownIcon', true);\n      style.text = iconChar ? iconChar + ' ' + text : text;\n    }\n  }\n\n  function giveGraphic(storageName, Ctor, depth, z) {\n    var element = oldRawIndex != null && oldStorage[storageName][oldRawIndex];\n    var lasts = lastsForAnimation[storageName];\n\n    if (element) {\n      // Remove from oldStorage\n      oldStorage[storageName][oldRawIndex] = null;\n      prepareAnimationWhenHasOld(lasts, element);\n    } // If invisible and no old element, do not create new element (for optimizing).\n    else if (!thisInvisible) {\n        element = new Ctor();\n\n        if (element instanceof Displayable) {\n          element.z2 = calculateZ2(depth, z);\n        }\n\n        prepareAnimationWhenNoOld(lasts, element);\n      } // Set to thisStorage\n\n\n    return thisStorage[storageName][thisRawIndex] = element;\n  }\n\n  function prepareAnimationWhenHasOld(lasts, element) {\n    var lastCfg = lasts[thisRawIndex] = {};\n\n    if (element instanceof Group) {\n      lastCfg.oldX = element.x;\n      lastCfg.oldY = element.y;\n    } else {\n      lastCfg.oldShape = extend({}, element.shape);\n    }\n  } // If a element is new, we need to find the animation start point carefully,\n  // otherwise it will looks strange when 'zoomToNode'.\n\n\n  function prepareAnimationWhenNoOld(lasts, element) {\n    var lastCfg = lasts[thisRawIndex] = {};\n    var parentNode = thisNode.parentNode;\n    var isGroup = element instanceof graphic.Group;\n\n    if (parentNode && (!reRoot || reRoot.direction === 'drillDown')) {\n      var parentOldX = 0;\n      var parentOldY = 0; // New nodes appear from right-bottom corner in 'zoomToNode' animation.\n      // For convenience, get old bounding rect from background.\n\n      var parentOldBg = lastsForAnimation.background[parentNode.getRawIndex()];\n\n      if (!reRoot && parentOldBg && parentOldBg.oldShape) {\n        parentOldX = parentOldBg.oldShape.width;\n        parentOldY = parentOldBg.oldShape.height;\n      } // When no parent old shape found, its parent is new too,\n      // so we can just use {x:0, y:0}.\n\n\n      if (isGroup) {\n        lastCfg.oldX = 0;\n        lastCfg.oldY = parentOldY;\n      } else {\n        lastCfg.oldShape = {\n          x: parentOldX,\n          y: parentOldY,\n          width: 0,\n          height: 0\n        };\n      }\n    } // Fade in, user can be aware that these nodes are new.\n\n\n    lastCfg.fadein = !isGroup;\n  }\n} // We cannot set all background with the same z, because the behaviour of\n// drill down and roll up differ background creation sequence from tree\n// hierarchy sequence, which cause lower background elements to overlap\n// upper ones. So we calculate z based on depth.\n// Moreover, we try to shrink down z interval to [0, 1] to avoid that\n// treemap with large z overlaps other components.\n\n\nfunction calculateZ2(depth, z2InLevel) {\n  return depth * Z2_BASE + z2InLevel;\n}\n\nexport default TreemapView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport VisualMapping from '../../visual/VisualMapping.js';\nimport { each, extend, isArray } from 'zrender/lib/core/util.js';\nimport { modifyHSL, modifyAlpha } from 'zrender/lib/tool/color.js';\nimport { makeInner } from '../../util/model.js';\nvar ITEM_STYLE_NORMAL = 'itemStyle';\nvar inner = makeInner();\nexport default {\n  seriesType: 'treemap',\n  reset: function (seriesModel) {\n    var tree = seriesModel.getData().tree;\n    var root = tree.root;\n\n    if (root.isRemoved()) {\n      return;\n    }\n\n    travelTree(root, // Visual should calculate from tree root but not view root.\n    {}, seriesModel.getViewRoot().getAncestors(), seriesModel);\n  }\n};\n\nfunction travelTree(node, designatedVisual, viewRootAncestors, seriesModel) {\n  var nodeModel = node.getModel();\n  var nodeLayout = node.getLayout();\n  var data = node.hostTree.data; // Optimize\n\n  if (!nodeLayout || nodeLayout.invisible || !nodeLayout.isInView) {\n    return;\n  }\n\n  var nodeItemStyleModel = nodeModel.getModel(ITEM_STYLE_NORMAL);\n  var visuals = buildVisuals(nodeItemStyleModel, designatedVisual, seriesModel);\n  var existsStyle = data.ensureUniqueItemVisual(node.dataIndex, 'style'); // calculate border color\n\n  var borderColor = nodeItemStyleModel.get('borderColor');\n  var borderColorSaturation = nodeItemStyleModel.get('borderColorSaturation');\n  var thisNodeColor;\n\n  if (borderColorSaturation != null) {\n    // For performance, do not always execute 'calculateColor'.\n    thisNodeColor = calculateColor(visuals);\n    borderColor = calculateBorderColor(borderColorSaturation, thisNodeColor);\n  }\n\n  existsStyle.stroke = borderColor;\n  var viewChildren = node.viewChildren;\n\n  if (!viewChildren || !viewChildren.length) {\n    thisNodeColor = calculateColor(visuals); // Apply visual to this node.\n\n    existsStyle.fill = thisNodeColor;\n  } else {\n    var mapping_1 = buildVisualMapping(node, nodeModel, nodeLayout, nodeItemStyleModel, visuals, viewChildren); // Designate visual to children.\n\n    each(viewChildren, function (child, index) {\n      // If higher than viewRoot, only ancestors of viewRoot is needed to visit.\n      if (child.depth >= viewRootAncestors.length || child === viewRootAncestors[child.depth]) {\n        var childVisual = mapVisual(nodeModel, visuals, child, index, mapping_1, seriesModel);\n        travelTree(child, childVisual, viewRootAncestors, seriesModel);\n      }\n    });\n  }\n}\n\nfunction buildVisuals(nodeItemStyleModel, designatedVisual, seriesModel) {\n  var visuals = extend({}, designatedVisual);\n  var designatedVisualItemStyle = seriesModel.designatedVisualItemStyle;\n  each(['color', 'colorAlpha', 'colorSaturation'], function (visualName) {\n    // Priority: thisNode > thisLevel > parentNodeDesignated > seriesModel\n    designatedVisualItemStyle[visualName] = designatedVisual[visualName];\n    var val = nodeItemStyleModel.get(visualName);\n    designatedVisualItemStyle[visualName] = null;\n    val != null && (visuals[visualName] = val);\n  });\n  return visuals;\n}\n\nfunction calculateColor(visuals) {\n  var color = getValueVisualDefine(visuals, 'color');\n\n  if (color) {\n    var colorAlpha = getValueVisualDefine(visuals, 'colorAlpha');\n    var colorSaturation = getValueVisualDefine(visuals, 'colorSaturation');\n\n    if (colorSaturation) {\n      color = modifyHSL(color, null, null, colorSaturation);\n    }\n\n    if (colorAlpha) {\n      color = modifyAlpha(color, colorAlpha);\n    }\n\n    return color;\n  }\n}\n\nfunction calculateBorderColor(borderColorSaturation, thisNodeColor) {\n  return thisNodeColor != null // Can only be string\n  ? modifyHSL(thisNodeColor, null, null, borderColorSaturation) : null;\n}\n\nfunction getValueVisualDefine(visuals, name) {\n  var value = visuals[name];\n\n  if (value != null && value !== 'none') {\n    return value;\n  }\n}\n\nfunction buildVisualMapping(node, nodeModel, nodeLayout, nodeItemStyleModel, visuals, viewChildren) {\n  if (!viewChildren || !viewChildren.length) {\n    return;\n  }\n\n  var rangeVisual = getRangeVisual(nodeModel, 'color') || visuals.color != null && visuals.color !== 'none' && (getRangeVisual(nodeModel, 'colorAlpha') || getRangeVisual(nodeModel, 'colorSaturation'));\n\n  if (!rangeVisual) {\n    return;\n  }\n\n  var visualMin = nodeModel.get('visualMin');\n  var visualMax = nodeModel.get('visualMax');\n  var dataExtent = nodeLayout.dataExtent.slice();\n  visualMin != null && visualMin < dataExtent[0] && (dataExtent[0] = visualMin);\n  visualMax != null && visualMax > dataExtent[1] && (dataExtent[1] = visualMax);\n  var colorMappingBy = nodeModel.get('colorMappingBy');\n  var opt = {\n    type: rangeVisual.name,\n    dataExtent: dataExtent,\n    visual: rangeVisual.range\n  };\n\n  if (opt.type === 'color' && (colorMappingBy === 'index' || colorMappingBy === 'id')) {\n    opt.mappingMethod = 'category';\n    opt.loop = true; // categories is ordinal, so do not set opt.categories.\n  } else {\n    opt.mappingMethod = 'linear';\n  }\n\n  var mapping = new VisualMapping(opt);\n  inner(mapping).drColorMappingBy = colorMappingBy;\n  return mapping;\n} // Notice: If we don't have the attribute 'colorRange', but only use\n// attribute 'color' to represent both concepts of 'colorRange' and 'color',\n// (It means 'colorRange' when 'color' is Array, means 'color' when not array),\n// this problem will be encountered:\n// If a level-1 node doesn't have children, and its siblings have children,\n// and colorRange is set on level-1, then the node cannot be colored.\n// So we separate 'colorRange' and 'color' to different attributes.\n\n\nfunction getRangeVisual(nodeModel, name) {\n  // 'colorRange', 'colorARange', 'colorSRange'.\n  // If not exists on this node, fetch from levels and series.\n  var range = nodeModel.get(name);\n  return isArray(range) && range.length ? {\n    name: name,\n    range: range\n  } : null;\n}\n\nfunction mapVisual(nodeModel, visuals, child, index, mapping, seriesModel) {\n  var childVisuals = extend({}, visuals);\n\n  if (mapping) {\n    // Only support color, colorAlpha, colorSaturation.\n    var mappingType = mapping.type;\n    var colorMappingBy = mappingType === 'color' && inner(mapping).drColorMappingBy;\n    var value = colorMappingBy === 'index' ? index : colorMappingBy === 'id' ? seriesModel.mapIdToIndex(child.getId()) : child.getValue(nodeModel.get('visualDimension'));\n    childVisuals[mappingType] = mapping.mapValueToVisual(value);\n  }\n\n  return childVisuals;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\n\n/*\r\n* A third-party license is embedded for some of the code in this file:\r\n* The treemap layout implementation was originally copied from\r\n* \"d3.js\" with some modifications made for this project.\r\n* (See more details in the comment of the method \"squarify\" below.)\r\n* The use of the source code of this file is also subject to the terms\r\n* and consitions of the license of \"d3.js\" (BSD-3Clause, see\r\n* </licenses/LICENSE-d3>).\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport BoundingRect from 'zrender/lib/core/BoundingRect.js';\nimport { parsePercent, MAX_SAFE_INTEGER } from '../../util/number.js';\nimport * as layout from '../../util/layout.js';\nimport * as helper from '../helper/treeHelper.js';\nvar mathMax = Math.max;\nvar mathMin = Math.min;\nvar retrieveValue = zrUtil.retrieve;\nvar each = zrUtil.each;\nvar PATH_BORDER_WIDTH = ['itemStyle', 'borderWidth'];\nvar PATH_GAP_WIDTH = ['itemStyle', 'gapWidth'];\nvar PATH_UPPER_LABEL_SHOW = ['upperLabel', 'show'];\nvar PATH_UPPER_LABEL_HEIGHT = ['upperLabel', 'height'];\n;\n/**\r\n * @public\r\n */\n\nexport default {\n  seriesType: 'treemap',\n  reset: function (seriesModel, ecModel, api, payload) {\n    // Layout result in each node:\n    // {x, y, width, height, area, borderWidth}\n    var ecWidth = api.getWidth();\n    var ecHeight = api.getHeight();\n    var seriesOption = seriesModel.option;\n    var layoutInfo = layout.getLayoutRect(seriesModel.getBoxLayoutParams(), {\n      width: api.getWidth(),\n      height: api.getHeight()\n    });\n    var size = seriesOption.size || []; // Compatible with ec2.\n\n    var containerWidth = parsePercent(retrieveValue(layoutInfo.width, size[0]), ecWidth);\n    var containerHeight = parsePercent(retrieveValue(layoutInfo.height, size[1]), ecHeight); // Fetch payload info.\n\n    var payloadType = payload && payload.type;\n    var types = ['treemapZoomToNode', 'treemapRootToNode'];\n    var targetInfo = helper.retrieveTargetInfo(payload, types, seriesModel);\n    var rootRect = payloadType === 'treemapRender' || payloadType === 'treemapMove' ? payload.rootRect : null;\n    var viewRoot = seriesModel.getViewRoot();\n    var viewAbovePath = helper.getPathToRoot(viewRoot);\n\n    if (payloadType !== 'treemapMove') {\n      var rootSize = payloadType === 'treemapZoomToNode' ? estimateRootSize(seriesModel, targetInfo, viewRoot, containerWidth, containerHeight) : rootRect ? [rootRect.width, rootRect.height] : [containerWidth, containerHeight];\n      var sort_1 = seriesOption.sort;\n\n      if (sort_1 && sort_1 !== 'asc' && sort_1 !== 'desc') {\n        // Default to be desc order.\n        sort_1 = 'desc';\n      }\n\n      var options = {\n        squareRatio: seriesOption.squareRatio,\n        sort: sort_1,\n        leafDepth: seriesOption.leafDepth\n      }; // layout should be cleared because using updateView but not update.\n\n      viewRoot.hostTree.clearLayouts(); // TODO\n      // optimize: if out of view clip, do not layout.\n      // But take care that if do not render node out of view clip,\n      // how to calculate start po\n\n      var viewRootLayout_1 = {\n        x: 0,\n        y: 0,\n        width: rootSize[0],\n        height: rootSize[1],\n        area: rootSize[0] * rootSize[1]\n      };\n      viewRoot.setLayout(viewRootLayout_1);\n      squarify(viewRoot, options, false, 0); // Supplement layout.\n\n      viewRootLayout_1 = viewRoot.getLayout();\n      each(viewAbovePath, function (node, index) {\n        var childValue = (viewAbovePath[index + 1] || viewRoot).getValue();\n        node.setLayout(zrUtil.extend({\n          dataExtent: [childValue, childValue],\n          borderWidth: 0,\n          upperHeight: 0\n        }, viewRootLayout_1));\n      });\n    }\n\n    var treeRoot = seriesModel.getData().tree.root;\n    treeRoot.setLayout(calculateRootPosition(layoutInfo, rootRect, targetInfo), true);\n    seriesModel.setLayoutInfo(layoutInfo); // FIXME\n    // 现在没有clip功能，暂时取ec高宽。\n\n    prunning(treeRoot, // Transform to base element coordinate system.\n    new BoundingRect(-layoutInfo.x, -layoutInfo.y, ecWidth, ecHeight), viewAbovePath, viewRoot, 0);\n  }\n};\n/**\r\n * Layout treemap with squarify algorithm.\r\n * The original presentation of this algorithm\r\n * was made by Mark Bruls, Kees Huizing, and Jarke J. van Wijk\r\n * <https://graphics.ethz.ch/teaching/scivis_common/Literature/squarifiedTreeMaps.pdf>.\r\n * The implementation of this algorithm was originally copied from \"d3.js\"\r\n * <https://github.com/d3/d3/blob/9cc9a875e636a1dcf36cc1e07bdf77e1ad6e2c74/src/layout/treemap.js>\r\n * with some modifications made for this program.\r\n * See the license statement at the head of this file.\r\n *\r\n * @protected\r\n * @param {module:echarts/data/Tree~TreeNode} node\r\n * @param {Object} options\r\n * @param {string} options.sort 'asc' or 'desc'\r\n * @param {number} options.squareRatio\r\n * @param {boolean} hideChildren\r\n * @param {number} depth\r\n */\n\nfunction squarify(node, options, hideChildren, depth) {\n  var width;\n  var height;\n\n  if (node.isRemoved()) {\n    return;\n  }\n\n  var thisLayout = node.getLayout();\n  width = thisLayout.width;\n  height = thisLayout.height; // Considering border and gap\n\n  var nodeModel = node.getModel();\n  var borderWidth = nodeModel.get(PATH_BORDER_WIDTH);\n  var halfGapWidth = nodeModel.get(PATH_GAP_WIDTH) / 2;\n  var upperLabelHeight = getUpperLabelHeight(nodeModel);\n  var upperHeight = Math.max(borderWidth, upperLabelHeight);\n  var layoutOffset = borderWidth - halfGapWidth;\n  var layoutOffsetUpper = upperHeight - halfGapWidth;\n  node.setLayout({\n    borderWidth: borderWidth,\n    upperHeight: upperHeight,\n    upperLabelHeight: upperLabelHeight\n  }, true);\n  width = mathMax(width - 2 * layoutOffset, 0);\n  height = mathMax(height - layoutOffset - layoutOffsetUpper, 0);\n  var totalArea = width * height;\n  var viewChildren = initChildren(node, nodeModel, totalArea, options, hideChildren, depth);\n\n  if (!viewChildren.length) {\n    return;\n  }\n\n  var rect = {\n    x: layoutOffset,\n    y: layoutOffsetUpper,\n    width: width,\n    height: height\n  };\n  var rowFixedLength = mathMin(width, height);\n  var best = Infinity; // the best row score so far\n\n  var row = [];\n  row.area = 0;\n\n  for (var i = 0, len = viewChildren.length; i < len;) {\n    var child = viewChildren[i];\n    row.push(child);\n    row.area += child.getLayout().area;\n    var score = worst(row, rowFixedLength, options.squareRatio); // continue with this orientation\n\n    if (score <= best) {\n      i++;\n      best = score;\n    } // abort, and try a different orientation\n    else {\n        row.area -= row.pop().getLayout().area;\n        position(row, rowFixedLength, rect, halfGapWidth, false);\n        rowFixedLength = mathMin(rect.width, rect.height);\n        row.length = row.area = 0;\n        best = Infinity;\n      }\n  }\n\n  if (row.length) {\n    position(row, rowFixedLength, rect, halfGapWidth, true);\n  }\n\n  if (!hideChildren) {\n    var childrenVisibleMin = nodeModel.get('childrenVisibleMin');\n\n    if (childrenVisibleMin != null && totalArea < childrenVisibleMin) {\n      hideChildren = true;\n    }\n  }\n\n  for (var i = 0, len = viewChildren.length; i < len; i++) {\n    squarify(viewChildren[i], options, hideChildren, depth + 1);\n  }\n}\n/**\r\n * Set area to each child, and calculate data extent for visual coding.\r\n */\n\n\nfunction initChildren(node, nodeModel, totalArea, options, hideChildren, depth) {\n  var viewChildren = node.children || [];\n  var orderBy = options.sort;\n  orderBy !== 'asc' && orderBy !== 'desc' && (orderBy = null);\n  var overLeafDepth = options.leafDepth != null && options.leafDepth <= depth; // leafDepth has higher priority.\n\n  if (hideChildren && !overLeafDepth) {\n    return node.viewChildren = [];\n  } // Sort children, order by desc.\n\n\n  viewChildren = zrUtil.filter(viewChildren, function (child) {\n    return !child.isRemoved();\n  });\n  sort(viewChildren, orderBy);\n  var info = statistic(nodeModel, viewChildren, orderBy);\n\n  if (info.sum === 0) {\n    return node.viewChildren = [];\n  }\n\n  info.sum = filterByThreshold(nodeModel, totalArea, info.sum, orderBy, viewChildren);\n\n  if (info.sum === 0) {\n    return node.viewChildren = [];\n  } // Set area to each child.\n\n\n  for (var i = 0, len = viewChildren.length; i < len; i++) {\n    var area = viewChildren[i].getValue() / info.sum * totalArea; // Do not use setLayout({...}, true), because it is needed to clear last layout.\n\n    viewChildren[i].setLayout({\n      area: area\n    });\n  }\n\n  if (overLeafDepth) {\n    viewChildren.length && node.setLayout({\n      isLeafRoot: true\n    }, true);\n    viewChildren.length = 0;\n  }\n\n  node.viewChildren = viewChildren;\n  node.setLayout({\n    dataExtent: info.dataExtent\n  }, true);\n  return viewChildren;\n}\n/**\r\n * Consider 'visibleMin'. Modify viewChildren and get new sum.\r\n */\n\n\nfunction filterByThreshold(nodeModel, totalArea, sum, orderBy, orderedChildren) {\n  // visibleMin is not supported yet when no option.sort.\n  if (!orderBy) {\n    return sum;\n  }\n\n  var visibleMin = nodeModel.get('visibleMin');\n  var len = orderedChildren.length;\n  var deletePoint = len; // Always travel from little value to big value.\n\n  for (var i = len - 1; i >= 0; i--) {\n    var value = orderedChildren[orderBy === 'asc' ? len - i - 1 : i].getValue();\n\n    if (value / sum * totalArea < visibleMin) {\n      deletePoint = i;\n      sum -= value;\n    }\n  }\n\n  orderBy === 'asc' ? orderedChildren.splice(0, len - deletePoint) : orderedChildren.splice(deletePoint, len - deletePoint);\n  return sum;\n}\n/**\r\n * Sort\r\n */\n\n\nfunction sort(viewChildren, orderBy) {\n  if (orderBy) {\n    viewChildren.sort(function (a, b) {\n      var diff = orderBy === 'asc' ? a.getValue() - b.getValue() : b.getValue() - a.getValue();\n      return diff === 0 ? orderBy === 'asc' ? a.dataIndex - b.dataIndex : b.dataIndex - a.dataIndex : diff;\n    });\n  }\n\n  return viewChildren;\n}\n/**\r\n * Statistic\r\n */\n\n\nfunction statistic(nodeModel, children, orderBy) {\n  // Calculate sum.\n  var sum = 0;\n\n  for (var i = 0, len = children.length; i < len; i++) {\n    sum += children[i].getValue();\n  } // Statistic data extent for latter visual coding.\n  // Notice: data extent should be calculate based on raw children\n  // but not filtered view children, otherwise visual mapping will not\n  // be stable when zoom (where children is filtered by visibleMin).\n\n\n  var dimension = nodeModel.get('visualDimension');\n  var dataExtent; // The same as area dimension.\n\n  if (!children || !children.length) {\n    dataExtent = [NaN, NaN];\n  } else if (dimension === 'value' && orderBy) {\n    dataExtent = [children[children.length - 1].getValue(), children[0].getValue()];\n    orderBy === 'asc' && dataExtent.reverse();\n  } // Other dimension.\n  else {\n      dataExtent = [Infinity, -Infinity];\n      each(children, function (child) {\n        var value = child.getValue(dimension);\n        value < dataExtent[0] && (dataExtent[0] = value);\n        value > dataExtent[1] && (dataExtent[1] = value);\n      });\n    }\n\n  return {\n    sum: sum,\n    dataExtent: dataExtent\n  };\n}\n/**\r\n * Computes the score for the specified row,\r\n * as the worst aspect ratio.\r\n */\n\n\nfunction worst(row, rowFixedLength, ratio) {\n  var areaMax = 0;\n  var areaMin = Infinity;\n\n  for (var i = 0, area = void 0, len = row.length; i < len; i++) {\n    area = row[i].getLayout().area;\n\n    if (area) {\n      area < areaMin && (areaMin = area);\n      area > areaMax && (areaMax = area);\n    }\n  }\n\n  var squareArea = row.area * row.area;\n  var f = rowFixedLength * rowFixedLength * ratio;\n  return squareArea ? mathMax(f * areaMax / squareArea, squareArea / (f * areaMin)) : Infinity;\n}\n/**\r\n * Positions the specified row of nodes. Modifies `rect`.\r\n */\n\n\nfunction position(row, rowFixedLength, rect, halfGapWidth, flush) {\n  // When rowFixedLength === rect.width,\n  // it is horizontal subdivision,\n  // rowFixedLength is the width of the subdivision,\n  // rowOtherLength is the height of the subdivision,\n  // and nodes will be positioned from left to right.\n  // wh[idx0WhenH] means: when horizontal,\n  //      wh[idx0WhenH] => wh[0] => 'width'.\n  //      xy[idx1WhenH] => xy[1] => 'y'.\n  var idx0WhenH = rowFixedLength === rect.width ? 0 : 1;\n  var idx1WhenH = 1 - idx0WhenH;\n  var xy = ['x', 'y'];\n  var wh = ['width', 'height'];\n  var last = rect[xy[idx0WhenH]];\n  var rowOtherLength = rowFixedLength ? row.area / rowFixedLength : 0;\n\n  if (flush || rowOtherLength > rect[wh[idx1WhenH]]) {\n    rowOtherLength = rect[wh[idx1WhenH]]; // over+underflow\n  }\n\n  for (var i = 0, rowLen = row.length; i < rowLen; i++) {\n    var node = row[i];\n    var nodeLayout = {};\n    var step = rowOtherLength ? node.getLayout().area / rowOtherLength : 0;\n    var wh1 = nodeLayout[wh[idx1WhenH]] = mathMax(rowOtherLength - 2 * halfGapWidth, 0); // We use Math.max/min to avoid negative width/height when considering gap width.\n\n    var remain = rect[xy[idx0WhenH]] + rect[wh[idx0WhenH]] - last;\n    var modWH = i === rowLen - 1 || remain < step ? remain : step;\n    var wh0 = nodeLayout[wh[idx0WhenH]] = mathMax(modWH - 2 * halfGapWidth, 0);\n    nodeLayout[xy[idx1WhenH]] = rect[xy[idx1WhenH]] + mathMin(halfGapWidth, wh1 / 2);\n    nodeLayout[xy[idx0WhenH]] = last + mathMin(halfGapWidth, wh0 / 2);\n    last += modWH;\n    node.setLayout(nodeLayout, true);\n  }\n\n  rect[xy[idx1WhenH]] += rowOtherLength;\n  rect[wh[idx1WhenH]] -= rowOtherLength;\n} // Return [containerWidth, containerHeight] as default.\n\n\nfunction estimateRootSize(seriesModel, targetInfo, viewRoot, containerWidth, containerHeight) {\n  // If targetInfo.node exists, we zoom to the node,\n  // so estimate whole width and height by target node.\n  var currNode = (targetInfo || {}).node;\n  var defaultSize = [containerWidth, containerHeight];\n\n  if (!currNode || currNode === viewRoot) {\n    return defaultSize;\n  }\n\n  var parent;\n  var viewArea = containerWidth * containerHeight;\n  var area = viewArea * seriesModel.option.zoomToNodeRatio;\n\n  while (parent = currNode.parentNode) {\n    // jshint ignore:line\n    var sum = 0;\n    var siblings = parent.children;\n\n    for (var i = 0, len = siblings.length; i < len; i++) {\n      sum += siblings[i].getValue();\n    }\n\n    var currNodeValue = currNode.getValue();\n\n    if (currNodeValue === 0) {\n      return defaultSize;\n    }\n\n    area *= sum / currNodeValue; // Considering border, suppose aspect ratio is 1.\n\n    var parentModel = parent.getModel();\n    var borderWidth = parentModel.get(PATH_BORDER_WIDTH);\n    var upperHeight = Math.max(borderWidth, getUpperLabelHeight(parentModel));\n    area += 4 * borderWidth * borderWidth + (3 * borderWidth + upperHeight) * Math.pow(area, 0.5);\n    area > MAX_SAFE_INTEGER && (area = MAX_SAFE_INTEGER);\n    currNode = parent;\n  }\n\n  area < viewArea && (area = viewArea);\n  var scale = Math.pow(area / viewArea, 0.5);\n  return [containerWidth * scale, containerHeight * scale];\n} // Root position based on coord of containerGroup\n\n\nfunction calculateRootPosition(layoutInfo, rootRect, targetInfo) {\n  if (rootRect) {\n    return {\n      x: rootRect.x,\n      y: rootRect.y\n    };\n  }\n\n  var defaultPosition = {\n    x: 0,\n    y: 0\n  };\n\n  if (!targetInfo) {\n    return defaultPosition;\n  } // If targetInfo is fetched by 'retrieveTargetInfo',\n  // old tree and new tree are the same tree,\n  // so the node still exists and we can visit it.\n\n\n  var targetNode = targetInfo.node;\n  var layout = targetNode.getLayout();\n\n  if (!layout) {\n    return defaultPosition;\n  } // Transform coord from local to container.\n\n\n  var targetCenter = [layout.width / 2, layout.height / 2];\n  var node = targetNode;\n\n  while (node) {\n    var nodeLayout = node.getLayout();\n    targetCenter[0] += nodeLayout.x;\n    targetCenter[1] += nodeLayout.y;\n    node = node.parentNode;\n  }\n\n  return {\n    x: layoutInfo.width / 2 - targetCenter[0],\n    y: layoutInfo.height / 2 - targetCenter[1]\n  };\n} // Mark nodes visible for prunning when visual coding and rendering.\n// Prunning depends on layout and root position, so we have to do it after layout.\n\n\nfunction prunning(node, clipRect, viewAbovePath, viewRoot, depth) {\n  var nodeLayout = node.getLayout();\n  var nodeInViewAbovePath = viewAbovePath[depth];\n  var isAboveViewRoot = nodeInViewAbovePath && nodeInViewAbovePath === node;\n\n  if (nodeInViewAbovePath && !isAboveViewRoot || depth === viewAbovePath.length && node !== viewRoot) {\n    return;\n  }\n\n  node.setLayout({\n    // isInView means: viewRoot sub tree + viewAbovePath\n    isInView: true,\n    // invisible only means: outside view clip so that the node can not\n    // see but still layout for animation preparation but not render.\n    invisible: !isAboveViewRoot && !clipRect.intersect(nodeLayout),\n    isAboveViewRoot: isAboveViewRoot\n  }, true); // Transform to child coordinate.\n\n  var childClipRect = new BoundingRect(clipRect.x - nodeLayout.x, clipRect.y - nodeLayout.y, clipRect.width, clipRect.height);\n  each(node.viewChildren || [], function (child) {\n    prunning(child, childClipRect, viewAbovePath, viewRoot, depth + 1);\n  });\n}\n\nfunction getUpperLabelHeight(model) {\n  return model.get(PATH_UPPER_LABEL_SHOW) ? model.get(PATH_UPPER_LABEL_HEIGHT) : 0;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { installTreemapAction } from './treemapAction.js';\nimport TreemapSeriesModel from './TreemapSeries.js';\nimport TreemapView from './TreemapView.js';\nimport treemapVisual from './treemapVisual.js';\nimport treemapLayout from './treemapLayout.js';\nexport function install(registers) {\n  registers.registerSeriesModel(TreemapSeriesModel);\n  registers.registerChartView(TreemapView);\n  registers.registerVisual(treemapVisual);\n  registers.registerLayout(treemapLayout);\n  installTreemapAction(registers);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { isNumber } from 'zrender/lib/core/util.js';\nexport default function categoryFilter(ecModel) {\n  var legendModels = ecModel.findComponents({\n    mainType: 'legend'\n  });\n\n  if (!legendModels || !legendModels.length) {\n    return;\n  }\n\n  ecModel.eachSeriesByType('graph', function (graphSeries) {\n    var categoriesData = graphSeries.getCategoriesData();\n    var graph = graphSeries.getGraph();\n    var data = graph.data;\n    var categoryNames = categoriesData.mapArray(categoriesData.getName);\n    data.filterSelf(function (idx) {\n      var model = data.getItemModel(idx);\n      var category = model.getShallow('category');\n\n      if (category != null) {\n        if (isNumber(category)) {\n          category = categoryNames[category];\n        } // If in any legend component the status is not selected.\n\n\n        for (var i = 0; i < legendModels.length; i++) {\n          if (!legendModels[i].isSelected(category)) {\n            return false;\n          }\n        }\n      }\n\n      return true;\n    });\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { extend, isString } from 'zrender/lib/core/util.js';\nexport default function categoryVisual(ecModel) {\n  var paletteScope = {};\n  ecModel.eachSeriesByType('graph', function (seriesModel) {\n    var categoriesData = seriesModel.getCategoriesData();\n    var data = seriesModel.getData();\n    var categoryNameIdxMap = {};\n    categoriesData.each(function (idx) {\n      var name = categoriesData.getName(idx); // Add prefix to avoid conflict with Object.prototype.\n\n      categoryNameIdxMap['ec-' + name] = idx;\n      var itemModel = categoriesData.getItemModel(idx);\n      var style = itemModel.getModel('itemStyle').getItemStyle();\n\n      if (!style.fill) {\n        // Get color from palette.\n        style.fill = seriesModel.getColorFromPalette(name, paletteScope);\n      }\n\n      categoriesData.setItemVisual(idx, 'style', style);\n      var symbolVisualList = ['symbol', 'symbolSize', 'symbolKeepAspect'];\n\n      for (var i = 0; i < symbolVisualList.length; i++) {\n        var symbolVisual = itemModel.getShallow(symbolVisualList[i], true);\n\n        if (symbolVisual != null) {\n          categoriesData.setItemVisual(idx, symbolVisualList[i], symbolVisual);\n        }\n      }\n    }); // Assign category color to visual\n\n    if (categoriesData.count()) {\n      data.each(function (idx) {\n        var model = data.getItemModel(idx);\n        var categoryIdx = model.getShallow('category');\n\n        if (categoryIdx != null) {\n          if (isString(categoryIdx)) {\n            categoryIdx = categoryNameIdxMap['ec-' + categoryIdx];\n          }\n\n          var categoryStyle = categoriesData.getItemVisual(categoryIdx, 'style');\n          var style = data.ensureUniqueItemVisual(idx, 'style');\n          extend(style, categoryStyle);\n          var visualList = ['symbol', 'symbolSize', 'symbolKeepAspect'];\n\n          for (var i = 0; i < visualList.length; i++) {\n            data.setItemVisual(idx, visualList[i], categoriesData.getItemVisual(categoryIdx, visualList[i]));\n          }\n        }\n      });\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { extend } from 'zrender/lib/core/util.js';\n\nfunction normalize(a) {\n  if (!(a instanceof Array)) {\n    a = [a, a];\n  }\n\n  return a;\n}\n\nexport default function graphEdgeVisual(ecModel) {\n  ecModel.eachSeriesByType('graph', function (seriesModel) {\n    var graph = seriesModel.getGraph();\n    var edgeData = seriesModel.getEdgeData();\n    var symbolType = normalize(seriesModel.get('edgeSymbol'));\n    var symbolSize = normalize(seriesModel.get('edgeSymbolSize')); // const colorQuery = ['lineStyle', 'color'] as const;\n    // const opacityQuery = ['lineStyle', 'opacity'] as const;\n\n    edgeData.setVisual('fromSymbol', symbolType && symbolType[0]);\n    edgeData.setVisual('toSymbol', symbolType && symbolType[1]);\n    edgeData.setVisual('fromSymbolSize', symbolSize && symbolSize[0]);\n    edgeData.setVisual('toSymbolSize', symbolSize && symbolSize[1]);\n    edgeData.setVisual('style', seriesModel.getModel('lineStyle').getLineStyle());\n    edgeData.each(function (idx) {\n      var itemModel = edgeData.getItemModel(idx);\n      var edge = graph.getEdgeByIndex(idx);\n      var symbolType = normalize(itemModel.getShallow('symbol', true));\n      var symbolSize = normalize(itemModel.getShallow('symbolSize', true)); // Edge visual must after node visual\n\n      var style = itemModel.getModel('lineStyle').getLineStyle();\n      var existsStyle = edgeData.ensureUniqueItemVisual(idx, 'style');\n      extend(existsStyle, style);\n\n      switch (existsStyle.stroke) {\n        case 'source':\n          {\n            var nodeStyle = edge.node1.getVisual('style');\n            existsStyle.stroke = nodeStyle && nodeStyle.fill;\n            break;\n          }\n\n        case 'target':\n          {\n            var nodeStyle = edge.node2.getVisual('style');\n            existsStyle.stroke = nodeStyle && nodeStyle.fill;\n            break;\n          }\n      }\n\n      symbolType[0] && edge.setVisual('fromSymbol', symbolType[0]);\n      symbolType[1] && edge.setVisual('toSymbol', symbolType[1]);\n      symbolSize[0] && edge.setVisual('fromSymbolSize', symbolSize[0]);\n      symbolSize[1] && edge.setVisual('toSymbolSize', symbolSize[1]);\n    });\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\n// @ts-nocheck\nimport * as zrUtil from 'zrender/lib/core/util.js';\nvar KEY_DELIMITER = '-->';\n/**\r\n * params handler\r\n * @param {module:echarts/model/SeriesModel} seriesModel\r\n * @returns {*}\r\n */\n\nvar getAutoCurvenessParams = function (seriesModel) {\n  return seriesModel.get('autoCurveness') || null;\n};\n/**\r\n * Generate a list of edge curvatures, 20 is the default\r\n * @param {module:echarts/model/SeriesModel} seriesModel\r\n * @param {number} appendLength\r\n * @return  20 => [0, -0.2, 0.2, -0.4, 0.4, -0.6, 0.6, -0.8, 0.8, -1, 1, -1.2, 1.2, -1.4, 1.4, -1.6, 1.6, -1.8, 1.8, -2]\r\n */\n\n\nvar createCurveness = function (seriesModel, appendLength) {\n  var autoCurvenessParmas = getAutoCurvenessParams(seriesModel);\n  var length = 20;\n  var curvenessList = []; // handler the function set\n\n  if (zrUtil.isNumber(autoCurvenessParmas)) {\n    length = autoCurvenessParmas;\n  } else if (zrUtil.isArray(autoCurvenessParmas)) {\n    seriesModel.__curvenessList = autoCurvenessParmas;\n    return;\n  } // append length\n\n\n  if (appendLength > length) {\n    length = appendLength;\n  } // make sure the length is even\n\n\n  var len = length % 2 ? length + 2 : length + 3;\n  curvenessList = [];\n\n  for (var i = 0; i < len; i++) {\n    curvenessList.push((i % 2 ? i + 1 : i) / 10 * (i % 2 ? -1 : 1));\n  }\n\n  seriesModel.__curvenessList = curvenessList;\n};\n/**\r\n * Create different cache key data in the positive and negative directions, in order to set the curvature later\r\n * @param {number|string|module:echarts/data/Graph.Node} n1\r\n * @param {number|string|module:echarts/data/Graph.Node} n2\r\n * @param {module:echarts/model/SeriesModel} seriesModel\r\n * @returns {string} key\r\n */\n\n\nvar getKeyOfEdges = function (n1, n2, seriesModel) {\n  var source = [n1.id, n1.dataIndex].join('.');\n  var target = [n2.id, n2.dataIndex].join('.');\n  return [seriesModel.uid, source, target].join(KEY_DELIMITER);\n};\n/**\r\n * get opposite key\r\n * @param {string} key\r\n * @returns {string}\r\n */\n\n\nvar getOppositeKey = function (key) {\n  var keys = key.split(KEY_DELIMITER);\n  return [keys[0], keys[2], keys[1]].join(KEY_DELIMITER);\n};\n/**\r\n * get edgeMap with key\r\n * @param edge\r\n * @param {module:echarts/model/SeriesModel} seriesModel\r\n */\n\n\nvar getEdgeFromMap = function (edge, seriesModel) {\n  var key = getKeyOfEdges(edge.node1, edge.node2, seriesModel);\n  return seriesModel.__edgeMap[key];\n};\n/**\r\n * calculate all cases total length\r\n * @param edge\r\n * @param seriesModel\r\n * @returns {number}\r\n */\n\n\nvar getTotalLengthBetweenNodes = function (edge, seriesModel) {\n  var len = getEdgeMapLengthWithKey(getKeyOfEdges(edge.node1, edge.node2, seriesModel), seriesModel);\n  var lenV = getEdgeMapLengthWithKey(getKeyOfEdges(edge.node2, edge.node1, seriesModel), seriesModel);\n  return len + lenV;\n};\n/**\r\n *\r\n * @param key\r\n */\n\n\nvar getEdgeMapLengthWithKey = function (key, seriesModel) {\n  var edgeMap = seriesModel.__edgeMap;\n  return edgeMap[key] ? edgeMap[key].length : 0;\n};\n/**\r\n * Count the number of edges between the same two points, used to obtain the curvature table and the parity of the edge\r\n * @see /graph/GraphSeries.js@getInitialData\r\n * @param {module:echarts/model/SeriesModel} seriesModel\r\n */\n\n\nexport function initCurvenessList(seriesModel) {\n  if (!getAutoCurvenessParams(seriesModel)) {\n    return;\n  }\n\n  seriesModel.__curvenessList = [];\n  seriesModel.__edgeMap = {}; // calc the array of curveness List\n\n  createCurveness(seriesModel);\n}\n/**\r\n * set edgeMap with key\r\n * @param {number|string|module:echarts/data/Graph.Node} n1\r\n * @param {number|string|module:echarts/data/Graph.Node} n2\r\n * @param {module:echarts/model/SeriesModel} seriesModel\r\n * @param {number} index\r\n */\n\nexport function createEdgeMapForCurveness(n1, n2, seriesModel, index) {\n  if (!getAutoCurvenessParams(seriesModel)) {\n    return;\n  }\n\n  var key = getKeyOfEdges(n1, n2, seriesModel);\n  var edgeMap = seriesModel.__edgeMap;\n  var oppositeEdges = edgeMap[getOppositeKey(key)]; // set direction\n\n  if (edgeMap[key] && !oppositeEdges) {\n    edgeMap[key].isForward = true;\n  } else if (oppositeEdges && edgeMap[key]) {\n    oppositeEdges.isForward = true;\n    edgeMap[key].isForward = false;\n  }\n\n  edgeMap[key] = edgeMap[key] || [];\n  edgeMap[key].push(index);\n}\n/**\r\n * get curvature for edge\r\n * @param edge\r\n * @param {module:echarts/model/SeriesModel} seriesModel\r\n * @param index\r\n */\n\nexport function getCurvenessForEdge(edge, seriesModel, index, needReverse) {\n  var autoCurvenessParams = getAutoCurvenessParams(seriesModel);\n  var isArrayParam = zrUtil.isArray(autoCurvenessParams);\n\n  if (!autoCurvenessParams) {\n    return null;\n  }\n\n  var edgeArray = getEdgeFromMap(edge, seriesModel);\n\n  if (!edgeArray) {\n    return null;\n  }\n\n  var edgeIndex = -1;\n\n  for (var i = 0; i < edgeArray.length; i++) {\n    if (edgeArray[i] === index) {\n      edgeIndex = i;\n      break;\n    }\n  } // if totalLen is Longer createCurveness\n\n\n  var totalLen = getTotalLengthBetweenNodes(edge, seriesModel);\n  createCurveness(seriesModel, totalLen);\n  edge.lineStyle = edge.lineStyle || {}; // if is opposite edge, must set curvenss to opposite number\n\n  var curKey = getKeyOfEdges(edge.node1, edge.node2, seriesModel);\n  var curvenessList = seriesModel.__curvenessList; // if pass array no need parity\n\n  var parityCorrection = isArrayParam ? 0 : totalLen % 2 ? 0 : 1;\n\n  if (!edgeArray.isForward) {\n    // the opposite edge show outside\n    var oppositeKey = getOppositeKey(curKey);\n    var len = getEdgeMapLengthWithKey(oppositeKey, seriesModel);\n    var resValue = curvenessList[edgeIndex + len + parityCorrection]; // isNeedReverse, simple, force type need reverse the curveness in the junction of the forword and the opposite\n\n    if (needReverse) {\n      // set as array may make the parity handle with the len of opposite\n      if (isArrayParam) {\n        if (autoCurvenessParams && autoCurvenessParams[0] === 0) {\n          return (len + parityCorrection) % 2 ? resValue : -resValue;\n        } else {\n          return ((len % 2 ? 0 : 1) + parityCorrection) % 2 ? resValue : -resValue;\n        }\n      } else {\n        return (len + parityCorrection) % 2 ? resValue : -resValue;\n      }\n    } else {\n      return curvenessList[edgeIndex + len + parityCorrection];\n    }\n  } else {\n    return curvenessList[parityCorrection + edgeIndex];\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as vec2 from 'zrender/lib/core/vector.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { getCurvenessForEdge } from '../helper/multipleGraphEdgeHelper.js';\nexport function simpleLayout(seriesModel) {\n  var coordSys = seriesModel.coordinateSystem;\n\n  if (coordSys && coordSys.type !== 'view') {\n    return;\n  }\n\n  var graph = seriesModel.getGraph();\n  graph.eachNode(function (node) {\n    var model = node.getModel();\n    node.setLayout([+model.get('x'), +model.get('y')]);\n  });\n  simpleLayoutEdge(graph, seriesModel);\n}\nexport function simpleLayoutEdge(graph, seriesModel) {\n  graph.eachEdge(function (edge, index) {\n    var curveness = zrUtil.retrieve3(edge.getModel().get(['lineStyle', 'curveness']), -getCurvenessForEdge(edge, seriesModel, index, true), 0);\n    var p1 = vec2.clone(edge.node1.getLayout());\n    var p2 = vec2.clone(edge.node2.getLayout());\n    var points = [p1, p2];\n\n    if (+curveness) {\n      points.push([(p1[0] + p2[0]) / 2 - (p1[1] - p2[1]) * curveness, (p1[1] + p2[1]) / 2 - (p2[0] - p1[0]) * curveness]);\n    }\n\n    edge.setLayout(points);\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { each } from 'zrender/lib/core/util.js';\nimport { simpleLayout, simpleLayoutEdge } from './simpleLayoutHelper.js';\nexport default function graphSimpleLayout(ecModel, api) {\n  ecModel.eachSeriesByType('graph', function (seriesModel) {\n    var layout = seriesModel.get('layout');\n    var coordSys = seriesModel.coordinateSystem;\n\n    if (coordSys && coordSys.type !== 'view') {\n      var data_1 = seriesModel.getData();\n      var dimensions_1 = [];\n      each(coordSys.dimensions, function (coordDim) {\n        dimensions_1 = dimensions_1.concat(data_1.mapDimensionsAll(coordDim));\n      });\n\n      for (var dataIndex = 0; dataIndex < data_1.count(); dataIndex++) {\n        var value = [];\n        var hasValue = false;\n\n        for (var i = 0; i < dimensions_1.length; i++) {\n          var val = data_1.get(dimensions_1[i], dataIndex);\n\n          if (!isNaN(val)) {\n            hasValue = true;\n          }\n\n          value.push(val);\n        }\n\n        if (hasValue) {\n          data_1.setItemLayout(dataIndex, coordSys.dataToPoint(value));\n        } else {\n          // Also {Array.<number>}, not undefined to avoid if...else... statement\n          data_1.setItemLayout(dataIndex, [NaN, NaN]);\n        }\n      }\n\n      simpleLayoutEdge(data_1.graph, seriesModel);\n    } else if (!layout || layout === 'none') {\n      simpleLayout(seriesModel);\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nexport function getNodeGlobalScale(seriesModel) {\n  var coordSys = seriesModel.coordinateSystem;\n\n  if (coordSys.type !== 'view') {\n    return 1;\n  }\n\n  var nodeScaleRatio = seriesModel.option.nodeScaleRatio;\n  var groupZoom = coordSys.scaleX; // Scale node when zoom changes\n\n  var roamZoom = coordSys.getZoom();\n  var nodeScale = (roamZoom - 1) * nodeScaleRatio + 1;\n  return nodeScale / groupZoom;\n}\nexport function getSymbolSize(node) {\n  var symbolSize = node.getVisual('symbolSize');\n\n  if (symbolSize instanceof Array) {\n    symbolSize = (symbolSize[0] + symbolSize[1]) / 2;\n  }\n\n  return +symbolSize;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as vec2 from 'zrender/lib/core/vector.js';\nimport { getSymbolSize, getNodeGlobalScale } from './graphHelper.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { getCurvenessForEdge } from '../helper/multipleGraphEdgeHelper.js';\nvar PI = Math.PI;\nvar _symbolRadiansHalf = [];\n/**\r\n * `basedOn` can be:\r\n * 'value':\r\n *     This layout is not accurate and have same bad case. For example,\r\n *     if the min value is very smaller than the max value, the nodes\r\n *     with the min value probably overlap even though there is enough\r\n *     space to layout them. So we only use this approach in the as the\r\n *     init layout of the force layout.\r\n *     FIXME\r\n *     Probably we do not need this method any more but use\r\n *     `basedOn: 'symbolSize'` in force layout if\r\n *     delay its init operations to GraphView.\r\n * 'symbolSize':\r\n *     This approach work only if all of the symbol size calculated.\r\n *     That is, the progressive rendering is not applied to graph.\r\n *     FIXME\r\n *     If progressive rendering is applied to graph some day,\r\n *     probably we have to use `basedOn: 'value'`.\r\n */\n\nexport function circularLayout(seriesModel, basedOn, draggingNode, pointer) {\n  var coordSys = seriesModel.coordinateSystem;\n\n  if (coordSys && coordSys.type !== 'view') {\n    return;\n  }\n\n  var rect = coordSys.getBoundingRect();\n  var nodeData = seriesModel.getData();\n  var graph = nodeData.graph;\n  var cx = rect.width / 2 + rect.x;\n  var cy = rect.height / 2 + rect.y;\n  var r = Math.min(rect.width, rect.height) / 2;\n  var count = nodeData.count();\n  nodeData.setLayout({\n    cx: cx,\n    cy: cy\n  });\n\n  if (!count) {\n    return;\n  }\n\n  if (draggingNode) {\n    var _a = coordSys.pointToData(pointer),\n        tempX = _a[0],\n        tempY = _a[1];\n\n    var v = [tempX - cx, tempY - cy];\n    vec2.normalize(v, v);\n    vec2.scale(v, v, r);\n    draggingNode.setLayout([cx + v[0], cy + v[1]], true);\n    var circularRotateLabel = seriesModel.get(['circular', 'rotateLabel']);\n    rotateNodeLabel(draggingNode, circularRotateLabel, cx, cy);\n  }\n\n  _layoutNodesBasedOn[basedOn](seriesModel, graph, nodeData, r, cx, cy, count);\n\n  graph.eachEdge(function (edge, index) {\n    var curveness = zrUtil.retrieve3(edge.getModel().get(['lineStyle', 'curveness']), getCurvenessForEdge(edge, seriesModel, index), 0);\n    var p1 = vec2.clone(edge.node1.getLayout());\n    var p2 = vec2.clone(edge.node2.getLayout());\n    var cp1;\n    var x12 = (p1[0] + p2[0]) / 2;\n    var y12 = (p1[1] + p2[1]) / 2;\n\n    if (+curveness) {\n      curveness *= 3;\n      cp1 = [cx * curveness + x12 * (1 - curveness), cy * curveness + y12 * (1 - curveness)];\n    }\n\n    edge.setLayout([p1, p2, cp1]);\n  });\n}\nvar _layoutNodesBasedOn = {\n  value: function (seriesModel, graph, nodeData, r, cx, cy, count) {\n    var angle = 0;\n    var sum = nodeData.getSum('value');\n    var unitAngle = Math.PI * 2 / (sum || count);\n    graph.eachNode(function (node) {\n      var value = node.getValue('value');\n      var radianHalf = unitAngle * (sum ? value : 1) / 2;\n      angle += radianHalf;\n      node.setLayout([r * Math.cos(angle) + cx, r * Math.sin(angle) + cy]);\n      angle += radianHalf;\n    });\n  },\n  symbolSize: function (seriesModel, graph, nodeData, r, cx, cy, count) {\n    var sumRadian = 0;\n    _symbolRadiansHalf.length = count;\n    var nodeScale = getNodeGlobalScale(seriesModel);\n    graph.eachNode(function (node) {\n      var symbolSize = getSymbolSize(node); // Normally this case will not happen, but we still add\n      // some the defensive code (2px is an arbitrary value).\n\n      isNaN(symbolSize) && (symbolSize = 2);\n      symbolSize < 0 && (symbolSize = 0);\n      symbolSize *= nodeScale;\n      var symbolRadianHalf = Math.asin(symbolSize / 2 / r); // when `symbolSize / 2` is bigger than `r`.\n\n      isNaN(symbolRadianHalf) && (symbolRadianHalf = PI / 2);\n      _symbolRadiansHalf[node.dataIndex] = symbolRadianHalf;\n      sumRadian += symbolRadianHalf * 2;\n    });\n    var halfRemainRadian = (2 * PI - sumRadian) / count / 2;\n    var angle = 0;\n    graph.eachNode(function (node) {\n      var radianHalf = halfRemainRadian + _symbolRadiansHalf[node.dataIndex];\n      angle += radianHalf; // init circular layout for\n      // 1. layout undefined node\n      // 2. not fixed node\n\n      (!node.getLayout() || !node.getLayout().fixed) && node.setLayout([r * Math.cos(angle) + cx, r * Math.sin(angle) + cy]);\n      angle += radianHalf;\n    });\n  }\n};\nexport function rotateNodeLabel(node, circularRotateLabel, cx, cy) {\n  var el = node.getGraphicEl(); // need to check if el exists. '-' value may not create node element.\n\n  if (!el) {\n    return;\n  }\n\n  var nodeModel = node.getModel();\n  var labelRotate = nodeModel.get(['label', 'rotate']) || 0;\n  var symbolPath = el.getSymbolPath();\n\n  if (circularRotateLabel) {\n    var pos = node.getLayout();\n    var rad = Math.atan2(pos[1] - cy, pos[0] - cx);\n\n    if (rad < 0) {\n      rad = Math.PI * 2 + rad;\n    }\n\n    var isLeft = pos[0] < cx;\n\n    if (isLeft) {\n      rad = rad - Math.PI;\n    }\n\n    var textPosition = isLeft ? 'left' : 'right';\n    symbolPath.setTextConfig({\n      rotation: -rad,\n      position: textPosition,\n      origin: 'center'\n    });\n    var emphasisState = symbolPath.ensureState('emphasis');\n    zrUtil.extend(emphasisState.textConfig || (emphasisState.textConfig = {}), {\n      position: textPosition\n    });\n  } else {\n    symbolPath.setTextConfig({\n      rotation: labelRotate *= Math.PI / 180\n    });\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { circularLayout } from './circularLayoutHelper.js';\nexport default function graphCircularLayout(ecModel) {\n  ecModel.eachSeriesByType('graph', function (seriesModel) {\n    if (seriesModel.get('layout') === 'circular') {\n      circularLayout(seriesModel, 'symbolSize');\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\n\n/*\r\n* A third-party license is embedded for some of the code in this file:\r\n* Some formulas were originally copied from \"d3.js\" with some\r\n* modifications made for this project.\r\n* (See more details in the comment of the method \"step\" below.)\r\n* The use of the source code of this file is also subject to the terms\r\n* and consitions of the license of \"d3.js\" (BSD-3Clause, see\r\n* </licenses/LICENSE-d3>).\r\n*/\nimport * as vec2 from 'zrender/lib/core/vector.js';\nvar scaleAndAdd = vec2.scaleAndAdd; // function adjacentNode(n, e) {\n//     return e.n1 === n ? e.n2 : e.n1;\n// }\n\nexport function forceLayout(inNodes, inEdges, opts) {\n  var nodes = inNodes;\n  var edges = inEdges;\n  var rect = opts.rect;\n  var width = rect.width;\n  var height = rect.height;\n  var center = [rect.x + width / 2, rect.y + height / 2]; // let scale = opts.scale || 1;\n\n  var gravity = opts.gravity == null ? 0.1 : opts.gravity; // for (let i = 0; i < edges.length; i++) {\n  //     let e = edges[i];\n  //     let n1 = e.n1;\n  //     let n2 = e.n2;\n  //     n1.edges = n1.edges || [];\n  //     n2.edges = n2.edges || [];\n  //     n1.edges.push(e);\n  //     n2.edges.push(e);\n  // }\n  // Init position\n\n  for (var i = 0; i < nodes.length; i++) {\n    var n = nodes[i];\n\n    if (!n.p) {\n      n.p = vec2.create(width * (Math.random() - 0.5) + center[0], height * (Math.random() - 0.5) + center[1]);\n    }\n\n    n.pp = vec2.clone(n.p);\n    n.edges = null;\n  } // Formula in 'Graph Drawing by Force-directed Placement'\n  // let k = scale * Math.sqrt(width * height / nodes.length);\n  // let k2 = k * k;\n\n\n  var initialFriction = opts.friction == null ? 0.6 : opts.friction;\n  var friction = initialFriction;\n  var beforeStepCallback;\n  var afterStepCallback;\n  return {\n    warmUp: function () {\n      friction = initialFriction * 0.8;\n    },\n    setFixed: function (idx) {\n      nodes[idx].fixed = true;\n    },\n    setUnfixed: function (idx) {\n      nodes[idx].fixed = false;\n    },\n\n    /**\r\n     * Before step hook\r\n     */\n    beforeStep: function (cb) {\n      beforeStepCallback = cb;\n    },\n\n    /**\r\n     * After step hook\r\n     */\n    afterStep: function (cb) {\n      afterStepCallback = cb;\n    },\n\n    /**\r\n     * Some formulas were originally copied from \"d3.js\"\r\n     * https://github.com/d3/d3/blob/b516d77fb8566b576088e73410437494717ada26/src/layout/force.js\r\n     * with some modifications made for this project.\r\n     * See the license statement at the head of this file.\r\n     */\n    step: function (cb) {\n      beforeStepCallback && beforeStepCallback(nodes, edges);\n      var v12 = [];\n      var nLen = nodes.length;\n\n      for (var i = 0; i < edges.length; i++) {\n        var e = edges[i];\n\n        if (e.ignoreForceLayout) {\n          continue;\n        }\n\n        var n1 = e.n1;\n        var n2 = e.n2;\n        vec2.sub(v12, n2.p, n1.p);\n        var d = vec2.len(v12) - e.d;\n        var w = n2.w / (n1.w + n2.w);\n\n        if (isNaN(w)) {\n          w = 0;\n        }\n\n        vec2.normalize(v12, v12);\n        !n1.fixed && scaleAndAdd(n1.p, n1.p, v12, w * d * friction);\n        !n2.fixed && scaleAndAdd(n2.p, n2.p, v12, -(1 - w) * d * friction);\n      } // Gravity\n\n\n      for (var i = 0; i < nLen; i++) {\n        var n = nodes[i];\n\n        if (!n.fixed) {\n          vec2.sub(v12, center, n.p); // let d = vec2.len(v12);\n          // vec2.scale(v12, v12, 1 / d);\n          // let gravityFactor = gravity;\n\n          scaleAndAdd(n.p, n.p, v12, gravity * friction);\n        }\n      } // Repulsive\n      // PENDING\n\n\n      for (var i = 0; i < nLen; i++) {\n        var n1 = nodes[i];\n\n        for (var j = i + 1; j < nLen; j++) {\n          var n2 = nodes[j];\n          vec2.sub(v12, n2.p, n1.p);\n          var d = vec2.len(v12);\n\n          if (d === 0) {\n            // Random repulse\n            vec2.set(v12, Math.random() - 0.5, Math.random() - 0.5);\n            d = 1;\n          }\n\n          var repFact = (n1.rep + n2.rep) / d / d;\n          !n1.fixed && scaleAndAdd(n1.pp, n1.pp, v12, repFact);\n          !n2.fixed && scaleAndAdd(n2.pp, n2.pp, v12, -repFact);\n        }\n      }\n\n      var v = [];\n\n      for (var i = 0; i < nLen; i++) {\n        var n = nodes[i];\n\n        if (!n.fixed) {\n          vec2.sub(v, n.p, n.pp);\n          scaleAndAdd(n.p, n.p, v, friction);\n          vec2.copy(n.pp, n.p);\n        }\n      }\n\n      friction = friction * 0.992;\n      var finished = friction < 0.01;\n      afterStepCallback && afterStepCallback(nodes, edges, finished);\n      cb && cb(finished);\n    }\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { forceLayout } from './forceHelper.js';\nimport { simpleLayout } from './simpleLayoutHelper.js';\nimport { circularLayout } from './circularLayoutHelper.js';\nimport { linearMap } from '../../util/number.js';\nimport * as vec2 from 'zrender/lib/core/vector.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { getCurvenessForEdge } from '../helper/multipleGraphEdgeHelper.js';\nexport default function graphForceLayout(ecModel) {\n  ecModel.eachSeriesByType('graph', function (graphSeries) {\n    var coordSys = graphSeries.coordinateSystem;\n\n    if (coordSys && coordSys.type !== 'view') {\n      return;\n    }\n\n    if (graphSeries.get('layout') === 'force') {\n      var preservedPoints_1 = graphSeries.preservedPoints || {};\n      var graph_1 = graphSeries.getGraph();\n      var nodeData_1 = graph_1.data;\n      var edgeData = graph_1.edgeData;\n      var forceModel = graphSeries.getModel('force');\n      var initLayout = forceModel.get('initLayout');\n\n      if (graphSeries.preservedPoints) {\n        nodeData_1.each(function (idx) {\n          var id = nodeData_1.getId(idx);\n          nodeData_1.setItemLayout(idx, preservedPoints_1[id] || [NaN, NaN]);\n        });\n      } else if (!initLayout || initLayout === 'none') {\n        simpleLayout(graphSeries);\n      } else if (initLayout === 'circular') {\n        circularLayout(graphSeries, 'value');\n      }\n\n      var nodeDataExtent_1 = nodeData_1.getDataExtent('value');\n      var edgeDataExtent_1 = edgeData.getDataExtent('value'); // let edgeDataExtent = edgeData.getDataExtent('value');\n\n      var repulsion = forceModel.get('repulsion');\n      var edgeLength = forceModel.get('edgeLength');\n      var repulsionArr_1 = zrUtil.isArray(repulsion) ? repulsion : [repulsion, repulsion];\n      var edgeLengthArr_1 = zrUtil.isArray(edgeLength) ? edgeLength : [edgeLength, edgeLength]; // Larger value has smaller length\n\n      edgeLengthArr_1 = [edgeLengthArr_1[1], edgeLengthArr_1[0]];\n      var nodes_1 = nodeData_1.mapArray('value', function (value, idx) {\n        var point = nodeData_1.getItemLayout(idx);\n        var rep = linearMap(value, nodeDataExtent_1, repulsionArr_1);\n\n        if (isNaN(rep)) {\n          rep = (repulsionArr_1[0] + repulsionArr_1[1]) / 2;\n        }\n\n        return {\n          w: rep,\n          rep: rep,\n          fixed: nodeData_1.getItemModel(idx).get('fixed'),\n          p: !point || isNaN(point[0]) || isNaN(point[1]) ? null : point\n        };\n      });\n      var edges = edgeData.mapArray('value', function (value, idx) {\n        var edge = graph_1.getEdgeByIndex(idx);\n        var d = linearMap(value, edgeDataExtent_1, edgeLengthArr_1);\n\n        if (isNaN(d)) {\n          d = (edgeLengthArr_1[0] + edgeLengthArr_1[1]) / 2;\n        }\n\n        var edgeModel = edge.getModel();\n        var curveness = zrUtil.retrieve3(edge.getModel().get(['lineStyle', 'curveness']), -getCurvenessForEdge(edge, graphSeries, idx, true), 0);\n        return {\n          n1: nodes_1[edge.node1.dataIndex],\n          n2: nodes_1[edge.node2.dataIndex],\n          d: d,\n          curveness: curveness,\n          ignoreForceLayout: edgeModel.get('ignoreForceLayout')\n        };\n      }); // let coordSys = graphSeries.coordinateSystem;\n\n      var rect = coordSys.getBoundingRect();\n      var forceInstance = forceLayout(nodes_1, edges, {\n        rect: rect,\n        gravity: forceModel.get('gravity'),\n        friction: forceModel.get('friction')\n      });\n      forceInstance.beforeStep(function (nodes, edges) {\n        for (var i = 0, l = nodes.length; i < l; i++) {\n          if (nodes[i].fixed) {\n            // Write back to layout instance\n            vec2.copy(nodes[i].p, graph_1.getNodeByIndex(i).getLayout());\n          }\n        }\n      });\n      forceInstance.afterStep(function (nodes, edges, stopped) {\n        for (var i = 0, l = nodes.length; i < l; i++) {\n          if (!nodes[i].fixed) {\n            graph_1.getNodeByIndex(i).setLayout(nodes[i].p);\n          }\n\n          preservedPoints_1[nodeData_1.getId(i)] = nodes[i].p;\n        }\n\n        for (var i = 0, l = edges.length; i < l; i++) {\n          var e = edges[i];\n          var edge = graph_1.getEdgeByIndex(i);\n          var p1 = e.n1.p;\n          var p2 = e.n2.p;\n          var points = edge.getLayout();\n          points = points ? points.slice() : [];\n          points[0] = points[0] || [];\n          points[1] = points[1] || [];\n          vec2.copy(points[0], p1);\n          vec2.copy(points[1], p2);\n\n          if (+e.curveness) {\n            points[2] = [(p1[0] + p2[0]) / 2 - (p1[1] - p2[1]) * e.curveness, (p1[1] + p2[1]) / 2 - (p2[0] - p1[0]) * e.curveness];\n          }\n\n          edge.setLayout(points);\n        }\n      });\n      graphSeries.forceLayout = forceInstance;\n      graphSeries.preservedPoints = preservedPoints_1; // Step to get the layout\n\n      forceInstance.step();\n    } else {\n      // Remove prev injected forceLayout instance\n      graphSeries.forceLayout = null;\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\n// FIXME Where to create the simple view coordinate system\nimport View from '../../coord/View.js';\nimport { getLayoutRect } from '../../util/layout.js';\nimport * as bbox from 'zrender/lib/core/bbox.js';\nimport { extend } from 'zrender/lib/core/util.js';\n\nfunction getViewRect(seriesModel, api, aspect) {\n  var option = extend(seriesModel.getBoxLayoutParams(), {\n    aspect: aspect\n  });\n  return getLayoutRect(option, {\n    width: api.getWidth(),\n    height: api.getHeight()\n  });\n}\n\nexport default function createViewCoordSys(ecModel, api) {\n  var viewList = [];\n  ecModel.eachSeriesByType('graph', function (seriesModel) {\n    var coordSysType = seriesModel.get('coordinateSystem');\n\n    if (!coordSysType || coordSysType === 'view') {\n      var data_1 = seriesModel.getData();\n      var positions = data_1.mapArray(function (idx) {\n        var itemModel = data_1.getItemModel(idx);\n        return [+itemModel.get('x'), +itemModel.get('y')];\n      });\n      var min = [];\n      var max = [];\n      bbox.fromPoints(positions, min, max); // If width or height is 0\n\n      if (max[0] - min[0] === 0) {\n        max[0] += 1;\n        min[0] -= 1;\n      }\n\n      if (max[1] - min[1] === 0) {\n        max[1] += 1;\n        min[1] -= 1;\n      }\n\n      var aspect = (max[0] - min[0]) / (max[1] - min[1]); // FIXME If get view rect after data processed?\n\n      var viewRect = getViewRect(seriesModel, api, aspect); // Position may be NaN, use view rect instead\n\n      if (isNaN(aspect)) {\n        min = [viewRect.x, viewRect.y];\n        max = [viewRect.x + viewRect.width, viewRect.y + viewRect.height];\n      }\n\n      var bbWidth = max[0] - min[0];\n      var bbHeight = max[1] - min[1];\n      var viewWidth = viewRect.width;\n      var viewHeight = viewRect.height;\n      var viewCoordSys = seriesModel.coordinateSystem = new View();\n      viewCoordSys.zoomLimit = seriesModel.get('scaleLimit');\n      viewCoordSys.setBoundingRect(min[0], min[1], bbWidth, bbHeight);\n      viewCoordSys.setViewRect(viewRect.x, viewRect.y, viewWidth, viewHeight); // Update roam info\n\n      viewCoordSys.setCenter(seriesModel.get('center'), api);\n      viewCoordSys.setZoom(seriesModel.get('zoom'));\n      viewList.push(viewCoordSys);\n    }\n  });\n  return viewList;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\n/**\r\n * Line path for bezier and straight line draw\r\n */\n\nimport * as graphic from '../../util/graphic.js';\nimport * as vec2 from 'zrender/lib/core/vector.js';\nvar straightLineProto = graphic.Line.prototype;\nvar bezierCurveProto = graphic.BezierCurve.prototype;\n\nvar StraightLineShape =\n/** @class */\nfunction () {\n  function StraightLineShape() {\n    // Start point\n    this.x1 = 0;\n    this.y1 = 0; // End point\n\n    this.x2 = 0;\n    this.y2 = 0;\n    this.percent = 1;\n  }\n\n  return StraightLineShape;\n}();\n\nvar CurveShape =\n/** @class */\nfunction (_super) {\n  __extends(CurveShape, _super);\n\n  function CurveShape() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  return CurveShape;\n}(StraightLineShape);\n\nfunction isStraightLine(shape) {\n  return isNaN(+shape.cpx1) || isNaN(+shape.cpy1);\n}\n\nvar ECLinePath =\n/** @class */\nfunction (_super) {\n  __extends(ECLinePath, _super);\n\n  function ECLinePath(opts) {\n    var _this = _super.call(this, opts) || this;\n\n    _this.type = 'ec-line';\n    return _this;\n  }\n\n  ECLinePath.prototype.getDefaultStyle = function () {\n    return {\n      stroke: '#000',\n      fill: null\n    };\n  };\n\n  ECLinePath.prototype.getDefaultShape = function () {\n    return new StraightLineShape();\n  };\n\n  ECLinePath.prototype.buildPath = function (ctx, shape) {\n    if (isStraightLine(shape)) {\n      straightLineProto.buildPath.call(this, ctx, shape);\n    } else {\n      bezierCurveProto.buildPath.call(this, ctx, shape);\n    }\n  };\n\n  ECLinePath.prototype.pointAt = function (t) {\n    if (isStraightLine(this.shape)) {\n      return straightLineProto.pointAt.call(this, t);\n    } else {\n      return bezierCurveProto.pointAt.call(this, t);\n    }\n  };\n\n  ECLinePath.prototype.tangentAt = function (t) {\n    var shape = this.shape;\n    var p = isStraightLine(shape) ? [shape.x2 - shape.x1, shape.y2 - shape.y1] : bezierCurveProto.tangentAt.call(this, t);\n    return vec2.normalize(p, p);\n  };\n\n  return ECLinePath;\n}(graphic.Path);\n\nexport default ECLinePath;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport { isArray, each } from 'zrender/lib/core/util.js';\nimport * as vector from 'zrender/lib/core/vector.js';\nimport * as symbolUtil from '../../util/symbol.js';\nimport ECLinePath from './LinePath.js';\nimport * as graphic from '../../util/graphic.js';\nimport { toggleHoverEmphasis, enterEmphasis, leaveEmphasis, SPECIAL_STATES } from '../../util/states.js';\nimport { getLabelStatesModels, setLabelStyle } from '../../label/labelStyle.js';\nimport { round } from '../../util/number.js';\nvar SYMBOL_CATEGORIES = ['fromSymbol', 'toSymbol'];\n\nfunction makeSymbolTypeKey(symbolCategory) {\n  return '_' + symbolCategory + 'Type';\n}\n\nfunction makeSymbolTypeValue(name, lineData, idx) {\n  var symbolType = lineData.getItemVisual(idx, name);\n\n  if (!symbolType || symbolType === 'none') {\n    return symbolType;\n  }\n\n  var symbolSize = lineData.getItemVisual(idx, name + 'Size');\n  var symbolRotate = lineData.getItemVisual(idx, name + 'Rotate');\n  var symbolOffset = lineData.getItemVisual(idx, name + 'Offset');\n  var symbolKeepAspect = lineData.getItemVisual(idx, name + 'KeepAspect');\n  var symbolSizeArr = symbolUtil.normalizeSymbolSize(symbolSize);\n  var symbolOffsetArr = symbolUtil.normalizeSymbolOffset(symbolOffset || 0, symbolSizeArr);\n  return symbolType + symbolSizeArr + symbolOffsetArr + (symbolRotate || '') + (symbolKeepAspect || '');\n}\n/**\r\n * @inner\r\n */\n\n\nfunction createSymbol(name, lineData, idx) {\n  var symbolType = lineData.getItemVisual(idx, name);\n\n  if (!symbolType || symbolType === 'none') {\n    return;\n  }\n\n  var symbolSize = lineData.getItemVisual(idx, name + 'Size');\n  var symbolRotate = lineData.getItemVisual(idx, name + 'Rotate');\n  var symbolOffset = lineData.getItemVisual(idx, name + 'Offset');\n  var symbolKeepAspect = lineData.getItemVisual(idx, name + 'KeepAspect');\n  var symbolSizeArr = symbolUtil.normalizeSymbolSize(symbolSize);\n  var symbolOffsetArr = symbolUtil.normalizeSymbolOffset(symbolOffset || 0, symbolSizeArr);\n  var symbolPath = symbolUtil.createSymbol(symbolType, -symbolSizeArr[0] / 2 + symbolOffsetArr[0], -symbolSizeArr[1] / 2 + symbolOffsetArr[1], symbolSizeArr[0], symbolSizeArr[1], null, symbolKeepAspect);\n  symbolPath.__specifiedRotation = symbolRotate == null || isNaN(symbolRotate) ? void 0 : +symbolRotate * Math.PI / 180 || 0;\n  symbolPath.name = name;\n  return symbolPath;\n}\n\nfunction createLine(points) {\n  var line = new ECLinePath({\n    name: 'line',\n    subPixelOptimize: true\n  });\n  setLinePoints(line.shape, points);\n  return line;\n}\n\nfunction setLinePoints(targetShape, points) {\n  targetShape.x1 = points[0][0];\n  targetShape.y1 = points[0][1];\n  targetShape.x2 = points[1][0];\n  targetShape.y2 = points[1][1];\n  targetShape.percent = 1;\n  var cp1 = points[2];\n\n  if (cp1) {\n    targetShape.cpx1 = cp1[0];\n    targetShape.cpy1 = cp1[1];\n  } else {\n    targetShape.cpx1 = NaN;\n    targetShape.cpy1 = NaN;\n  }\n}\n\nvar Line =\n/** @class */\nfunction (_super) {\n  __extends(Line, _super);\n\n  function Line(lineData, idx, seriesScope) {\n    var _this = _super.call(this) || this;\n\n    _this._createLine(lineData, idx, seriesScope);\n\n    return _this;\n  }\n\n  Line.prototype._createLine = function (lineData, idx, seriesScope) {\n    var seriesModel = lineData.hostModel;\n    var linePoints = lineData.getItemLayout(idx);\n    var line = createLine(linePoints);\n    line.shape.percent = 0;\n    graphic.initProps(line, {\n      shape: {\n        percent: 1\n      }\n    }, seriesModel, idx);\n    this.add(line);\n    each(SYMBOL_CATEGORIES, function (symbolCategory) {\n      var symbol = createSymbol(symbolCategory, lineData, idx); // symbols must added after line to make sure\n      // it will be updated after line#update.\n      // Or symbol position and rotation update in line#beforeUpdate will be one frame slow\n\n      this.add(symbol);\n      this[makeSymbolTypeKey(symbolCategory)] = makeSymbolTypeValue(symbolCategory, lineData, idx);\n    }, this);\n\n    this._updateCommonStl(lineData, idx, seriesScope);\n  }; // TODO More strict on the List type in parameters?\n\n\n  Line.prototype.updateData = function (lineData, idx, seriesScope) {\n    var seriesModel = lineData.hostModel;\n    var line = this.childOfName('line');\n    var linePoints = lineData.getItemLayout(idx);\n    var target = {\n      shape: {}\n    };\n    setLinePoints(target.shape, linePoints);\n    graphic.updateProps(line, target, seriesModel, idx);\n    each(SYMBOL_CATEGORIES, function (symbolCategory) {\n      var symbolType = makeSymbolTypeValue(symbolCategory, lineData, idx);\n      var key = makeSymbolTypeKey(symbolCategory); // Symbol changed\n\n      if (this[key] !== symbolType) {\n        this.remove(this.childOfName(symbolCategory));\n        var symbol = createSymbol(symbolCategory, lineData, idx);\n        this.add(symbol);\n      }\n\n      this[key] = symbolType;\n    }, this);\n\n    this._updateCommonStl(lineData, idx, seriesScope);\n  };\n\n  ;\n\n  Line.prototype.getLinePath = function () {\n    return this.childAt(0);\n  };\n\n  Line.prototype._updateCommonStl = function (lineData, idx, seriesScope) {\n    var seriesModel = lineData.hostModel;\n    var line = this.childOfName('line');\n    var emphasisLineStyle = seriesScope && seriesScope.emphasisLineStyle;\n    var blurLineStyle = seriesScope && seriesScope.blurLineStyle;\n    var selectLineStyle = seriesScope && seriesScope.selectLineStyle;\n    var labelStatesModels = seriesScope && seriesScope.labelStatesModels;\n    var emphasisDisabled = seriesScope && seriesScope.emphasisDisabled;\n    var focus = seriesScope && seriesScope.focus;\n    var blurScope = seriesScope && seriesScope.blurScope; // Optimization for large dataset\n\n    if (!seriesScope || lineData.hasItemOption) {\n      var itemModel = lineData.getItemModel(idx);\n      var emphasisModel = itemModel.getModel('emphasis');\n      emphasisLineStyle = emphasisModel.getModel('lineStyle').getLineStyle();\n      blurLineStyle = itemModel.getModel(['blur', 'lineStyle']).getLineStyle();\n      selectLineStyle = itemModel.getModel(['select', 'lineStyle']).getLineStyle();\n      emphasisDisabled = emphasisModel.get('disabled');\n      focus = emphasisModel.get('focus');\n      blurScope = emphasisModel.get('blurScope');\n      labelStatesModels = getLabelStatesModels(itemModel);\n    }\n\n    var lineStyle = lineData.getItemVisual(idx, 'style');\n    var visualColor = lineStyle.stroke;\n    line.useStyle(lineStyle);\n    line.style.fill = null;\n    line.style.strokeNoScale = true;\n    line.ensureState('emphasis').style = emphasisLineStyle;\n    line.ensureState('blur').style = blurLineStyle;\n    line.ensureState('select').style = selectLineStyle; // Update symbol\n\n    each(SYMBOL_CATEGORIES, function (symbolCategory) {\n      var symbol = this.childOfName(symbolCategory);\n\n      if (symbol) {\n        // Share opacity and color with line.\n        symbol.setColor(visualColor);\n        symbol.style.opacity = lineStyle.opacity;\n\n        for (var i = 0; i < SPECIAL_STATES.length; i++) {\n          var stateName = SPECIAL_STATES[i];\n          var lineState = line.getState(stateName);\n\n          if (lineState) {\n            var lineStateStyle = lineState.style || {};\n            var state = symbol.ensureState(stateName);\n            var stateStyle = state.style || (state.style = {});\n\n            if (lineStateStyle.stroke != null) {\n              stateStyle[symbol.__isEmptyBrush ? 'stroke' : 'fill'] = lineStateStyle.stroke;\n            }\n\n            if (lineStateStyle.opacity != null) {\n              stateStyle.opacity = lineStateStyle.opacity;\n            }\n          }\n        }\n\n        symbol.markRedraw();\n      }\n    }, this);\n    var rawVal = seriesModel.getRawValue(idx);\n    setLabelStyle(this, labelStatesModels, {\n      labelDataIndex: idx,\n      labelFetcher: {\n        getFormattedLabel: function (dataIndex, stateName) {\n          return seriesModel.getFormattedLabel(dataIndex, stateName, lineData.dataType);\n        }\n      },\n      inheritColor: visualColor || '#000',\n      defaultOpacity: lineStyle.opacity,\n      defaultText: (rawVal == null ? lineData.getName(idx) : isFinite(rawVal) ? round(rawVal) : rawVal) + ''\n    });\n    var label = this.getTextContent(); // Always set `textStyle` even if `normalStyle.text` is null, because default\n    // values have to be set on `normalStyle`.\n\n    if (label) {\n      var labelNormalModel = labelStatesModels.normal;\n      label.__align = label.style.align;\n      label.__verticalAlign = label.style.verticalAlign; // 'start', 'middle', 'end'\n\n      label.__position = labelNormalModel.get('position') || 'middle';\n      var distance = labelNormalModel.get('distance');\n\n      if (!isArray(distance)) {\n        distance = [distance, distance];\n      }\n\n      label.__labelDistance = distance;\n    }\n\n    this.setTextConfig({\n      position: null,\n      local: true,\n      inside: false // Can't be inside for stroke element.\n\n    });\n    toggleHoverEmphasis(this, focus, blurScope, emphasisDisabled);\n  };\n\n  Line.prototype.highlight = function () {\n    enterEmphasis(this);\n  };\n\n  Line.prototype.downplay = function () {\n    leaveEmphasis(this);\n  };\n\n  Line.prototype.updateLayout = function (lineData, idx) {\n    this.setLinePoints(lineData.getItemLayout(idx));\n  };\n\n  Line.prototype.setLinePoints = function (points) {\n    var linePath = this.childOfName('line');\n    setLinePoints(linePath.shape, points);\n    linePath.dirty();\n  };\n\n  Line.prototype.beforeUpdate = function () {\n    var lineGroup = this;\n    var symbolFrom = lineGroup.childOfName('fromSymbol');\n    var symbolTo = lineGroup.childOfName('toSymbol');\n    var label = lineGroup.getTextContent(); // Quick reject\n\n    if (!symbolFrom && !symbolTo && (!label || label.ignore)) {\n      return;\n    }\n\n    var invScale = 1;\n    var parentNode = this.parent;\n\n    while (parentNode) {\n      if (parentNode.scaleX) {\n        invScale /= parentNode.scaleX;\n      }\n\n      parentNode = parentNode.parent;\n    }\n\n    var line = lineGroup.childOfName('line'); // If line not changed\n    // FIXME Parent scale changed\n\n    if (!this.__dirty && !line.__dirty) {\n      return;\n    }\n\n    var percent = line.shape.percent;\n    var fromPos = line.pointAt(0);\n    var toPos = line.pointAt(percent);\n    var d = vector.sub([], toPos, fromPos);\n    vector.normalize(d, d);\n\n    function setSymbolRotation(symbol, percent) {\n      // Fix #12388\n      // when symbol is set to be 'arrow' in markLine,\n      // symbolRotate value will be ignored, and compulsively use tangent angle.\n      // rotate by default if symbol rotation is not specified\n      var specifiedRotation = symbol.__specifiedRotation;\n\n      if (specifiedRotation == null) {\n        var tangent = line.tangentAt(percent);\n        symbol.attr('rotation', (percent === 1 ? -1 : 1) * Math.PI / 2 - Math.atan2(tangent[1], tangent[0]));\n      } else {\n        symbol.attr('rotation', specifiedRotation);\n      }\n    }\n\n    if (symbolFrom) {\n      symbolFrom.setPosition(fromPos);\n      setSymbolRotation(symbolFrom, 0);\n      symbolFrom.scaleX = symbolFrom.scaleY = invScale * percent;\n      symbolFrom.markRedraw();\n    }\n\n    if (symbolTo) {\n      symbolTo.setPosition(toPos);\n      setSymbolRotation(symbolTo, 1);\n      symbolTo.scaleX = symbolTo.scaleY = invScale * percent;\n      symbolTo.markRedraw();\n    }\n\n    if (label && !label.ignore) {\n      label.x = label.y = 0;\n      label.originX = label.originY = 0;\n      var textAlign = void 0;\n      var textVerticalAlign = void 0;\n      var distance = label.__labelDistance;\n      var distanceX = distance[0] * invScale;\n      var distanceY = distance[1] * invScale;\n      var halfPercent = percent / 2;\n      var tangent = line.tangentAt(halfPercent);\n      var n = [tangent[1], -tangent[0]];\n      var cp = line.pointAt(halfPercent);\n\n      if (n[1] > 0) {\n        n[0] = -n[0];\n        n[1] = -n[1];\n      }\n\n      var dir = tangent[0] < 0 ? -1 : 1;\n\n      if (label.__position !== 'start' && label.__position !== 'end') {\n        var rotation = -Math.atan2(tangent[1], tangent[0]);\n\n        if (toPos[0] < fromPos[0]) {\n          rotation = Math.PI + rotation;\n        }\n\n        label.rotation = rotation;\n      }\n\n      var dy = void 0;\n\n      switch (label.__position) {\n        case 'insideStartTop':\n        case 'insideMiddleTop':\n        case 'insideEndTop':\n        case 'middle':\n          dy = -distanceY;\n          textVerticalAlign = 'bottom';\n          break;\n\n        case 'insideStartBottom':\n        case 'insideMiddleBottom':\n        case 'insideEndBottom':\n          dy = distanceY;\n          textVerticalAlign = 'top';\n          break;\n\n        default:\n          dy = 0;\n          textVerticalAlign = 'middle';\n      }\n\n      switch (label.__position) {\n        case 'end':\n          label.x = d[0] * distanceX + toPos[0];\n          label.y = d[1] * distanceY + toPos[1];\n          textAlign = d[0] > 0.8 ? 'left' : d[0] < -0.8 ? 'right' : 'center';\n          textVerticalAlign = d[1] > 0.8 ? 'top' : d[1] < -0.8 ? 'bottom' : 'middle';\n          break;\n\n        case 'start':\n          label.x = -d[0] * distanceX + fromPos[0];\n          label.y = -d[1] * distanceY + fromPos[1];\n          textAlign = d[0] > 0.8 ? 'right' : d[0] < -0.8 ? 'left' : 'center';\n          textVerticalAlign = d[1] > 0.8 ? 'bottom' : d[1] < -0.8 ? 'top' : 'middle';\n          break;\n\n        case 'insideStartTop':\n        case 'insideStart':\n        case 'insideStartBottom':\n          label.x = distanceX * dir + fromPos[0];\n          label.y = fromPos[1] + dy;\n          textAlign = tangent[0] < 0 ? 'right' : 'left';\n          label.originX = -distanceX * dir;\n          label.originY = -dy;\n          break;\n\n        case 'insideMiddleTop':\n        case 'insideMiddle':\n        case 'insideMiddleBottom':\n        case 'middle':\n          label.x = cp[0];\n          label.y = cp[1] + dy;\n          textAlign = 'center';\n          label.originY = -dy;\n          break;\n\n        case 'insideEndTop':\n        case 'insideEnd':\n        case 'insideEndBottom':\n          label.x = -distanceX * dir + toPos[0];\n          label.y = toPos[1] + dy;\n          textAlign = tangent[0] >= 0 ? 'right' : 'left';\n          label.originX = distanceX * dir;\n          label.originY = -dy;\n          break;\n      }\n\n      label.scaleX = label.scaleY = invScale;\n      label.setStyle({\n        // Use the user specified text align and baseline first\n        verticalAlign: label.__verticalAlign || textVerticalAlign,\n        align: label.__align || textAlign\n      });\n    }\n  };\n\n  return Line;\n}(graphic.Group);\n\nexport default Line;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as graphic from '../../util/graphic.js';\nimport LineGroup from './Line.js';\nimport { getLabelStatesModels } from '../../label/labelStyle.js';\n\nvar LineDraw =\n/** @class */\nfunction () {\n  function LineDraw(LineCtor) {\n    this.group = new graphic.Group();\n    this._LineCtor = LineCtor || LineGroup;\n  }\n\n  LineDraw.prototype.updateData = function (lineData) {\n    var _this = this; // Remove progressive els.\n\n\n    this._progressiveEls = null;\n    var lineDraw = this;\n    var group = lineDraw.group;\n    var oldLineData = lineDraw._lineData;\n    lineDraw._lineData = lineData; // There is no oldLineData only when first rendering or switching from\n    // stream mode to normal mode, where previous elements should be removed.\n\n    if (!oldLineData) {\n      group.removeAll();\n    }\n\n    var seriesScope = makeSeriesScope(lineData);\n    lineData.diff(oldLineData).add(function (idx) {\n      _this._doAdd(lineData, idx, seriesScope);\n    }).update(function (newIdx, oldIdx) {\n      _this._doUpdate(oldLineData, lineData, oldIdx, newIdx, seriesScope);\n    }).remove(function (idx) {\n      group.remove(oldLineData.getItemGraphicEl(idx));\n    }).execute();\n  };\n\n  ;\n\n  LineDraw.prototype.updateLayout = function () {\n    var lineData = this._lineData; // Do not support update layout in incremental mode.\n\n    if (!lineData) {\n      return;\n    }\n\n    lineData.eachItemGraphicEl(function (el, idx) {\n      el.updateLayout(lineData, idx);\n    }, this);\n  };\n\n  ;\n\n  LineDraw.prototype.incrementalPrepareUpdate = function (lineData) {\n    this._seriesScope = makeSeriesScope(lineData);\n    this._lineData = null;\n    this.group.removeAll();\n  };\n\n  ;\n\n  LineDraw.prototype.incrementalUpdate = function (taskParams, lineData) {\n    this._progressiveEls = [];\n\n    function updateIncrementalAndHover(el) {\n      if (!el.isGroup && !isEffectObject(el)) {\n        el.incremental = true;\n        el.ensureState('emphasis').hoverLayer = true;\n      }\n    }\n\n    for (var idx = taskParams.start; idx < taskParams.end; idx++) {\n      var itemLayout = lineData.getItemLayout(idx);\n\n      if (lineNeedsDraw(itemLayout)) {\n        var el = new this._LineCtor(lineData, idx, this._seriesScope);\n        el.traverse(updateIncrementalAndHover);\n        this.group.add(el);\n        lineData.setItemGraphicEl(idx, el);\n\n        this._progressiveEls.push(el);\n      }\n    }\n  };\n\n  ;\n\n  LineDraw.prototype.remove = function () {\n    this.group.removeAll();\n  };\n\n  ;\n\n  LineDraw.prototype.eachRendered = function (cb) {\n    graphic.traverseElements(this._progressiveEls || this.group, cb);\n  };\n\n  LineDraw.prototype._doAdd = function (lineData, idx, seriesScope) {\n    var itemLayout = lineData.getItemLayout(idx);\n\n    if (!lineNeedsDraw(itemLayout)) {\n      return;\n    }\n\n    var el = new this._LineCtor(lineData, idx, seriesScope);\n    lineData.setItemGraphicEl(idx, el);\n    this.group.add(el);\n  };\n\n  LineDraw.prototype._doUpdate = function (oldLineData, newLineData, oldIdx, newIdx, seriesScope) {\n    var itemEl = oldLineData.getItemGraphicEl(oldIdx);\n\n    if (!lineNeedsDraw(newLineData.getItemLayout(newIdx))) {\n      this.group.remove(itemEl);\n      return;\n    }\n\n    if (!itemEl) {\n      itemEl = new this._LineCtor(newLineData, newIdx, seriesScope);\n    } else {\n      itemEl.updateData(newLineData, newIdx, seriesScope);\n    }\n\n    newLineData.setItemGraphicEl(newIdx, itemEl);\n    this.group.add(itemEl);\n  };\n\n  return LineDraw;\n}();\n\nfunction isEffectObject(el) {\n  return el.animators && el.animators.length > 0;\n}\n\nfunction makeSeriesScope(lineData) {\n  var hostModel = lineData.hostModel;\n  var emphasisModel = hostModel.getModel('emphasis');\n  return {\n    lineStyle: hostModel.getModel('lineStyle').getLineStyle(),\n    emphasisLineStyle: emphasisModel.getModel(['lineStyle']).getLineStyle(),\n    blurLineStyle: hostModel.getModel(['blur', 'lineStyle']).getLineStyle(),\n    selectLineStyle: hostModel.getModel(['select', 'lineStyle']).getLineStyle(),\n    emphasisDisabled: emphasisModel.get('disabled'),\n    blurScope: emphasisModel.get('blurScope'),\n    focus: emphasisModel.get('focus'),\n    labelStatesModels: getLabelStatesModels(hostModel)\n  };\n}\n\nfunction isPointNaN(pt) {\n  return isNaN(pt[0]) || isNaN(pt[1]);\n}\n\nfunction lineNeedsDraw(pts) {\n  return pts && !isPointNaN(pts[0]) && !isPointNaN(pts[1]);\n}\n\nexport default LineDraw;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as curveTool from 'zrender/lib/core/curve.js';\nimport * as vec2 from 'zrender/lib/core/vector.js';\nimport { getSymbolSize } from './graphHelper.js';\nvar v1 = [];\nvar v2 = [];\nvar v3 = [];\nvar quadraticAt = curveTool.quadraticAt;\nvar v2DistSquare = vec2.distSquare;\nvar mathAbs = Math.abs;\n\nfunction intersectCurveCircle(curvePoints, center, radius) {\n  var p0 = curvePoints[0];\n  var p1 = curvePoints[1];\n  var p2 = curvePoints[2];\n  var d = Infinity;\n  var t;\n  var radiusSquare = radius * radius;\n  var interval = 0.1;\n\n  for (var _t = 0.1; _t <= 0.9; _t += 0.1) {\n    v1[0] = quadraticAt(p0[0], p1[0], p2[0], _t);\n    v1[1] = quadraticAt(p0[1], p1[1], p2[1], _t);\n    var diff = mathAbs(v2DistSquare(v1, center) - radiusSquare);\n\n    if (diff < d) {\n      d = diff;\n      t = _t;\n    }\n  } // Assume the segment is monotone，Find root through Bisection method\n  // At most 32 iteration\n\n\n  for (var i = 0; i < 32; i++) {\n    // let prev = t - interval;\n    var next = t + interval; // v1[0] = quadraticAt(p0[0], p1[0], p2[0], prev);\n    // v1[1] = quadraticAt(p0[1], p1[1], p2[1], prev);\n\n    v2[0] = quadraticAt(p0[0], p1[0], p2[0], t);\n    v2[1] = quadraticAt(p0[1], p1[1], p2[1], t);\n    v3[0] = quadraticAt(p0[0], p1[0], p2[0], next);\n    v3[1] = quadraticAt(p0[1], p1[1], p2[1], next);\n    var diff = v2DistSquare(v2, center) - radiusSquare;\n\n    if (mathAbs(diff) < 1e-2) {\n      break;\n    } // let prevDiff = v2DistSquare(v1, center) - radiusSquare;\n\n\n    var nextDiff = v2DistSquare(v3, center) - radiusSquare;\n    interval /= 2;\n\n    if (diff < 0) {\n      if (nextDiff >= 0) {\n        t = t + interval;\n      } else {\n        t = t - interval;\n      }\n    } else {\n      if (nextDiff >= 0) {\n        t = t - interval;\n      } else {\n        t = t + interval;\n      }\n    }\n  }\n\n  return t;\n} // Adjust edge to avoid\n\n\nexport default function adjustEdge(graph, scale) {\n  var tmp0 = [];\n  var quadraticSubdivide = curveTool.quadraticSubdivide;\n  var pts = [[], [], []];\n  var pts2 = [[], []];\n  var v = [];\n  scale /= 2;\n  graph.eachEdge(function (edge, idx) {\n    var linePoints = edge.getLayout();\n    var fromSymbol = edge.getVisual('fromSymbol');\n    var toSymbol = edge.getVisual('toSymbol');\n\n    if (!linePoints.__original) {\n      linePoints.__original = [vec2.clone(linePoints[0]), vec2.clone(linePoints[1])];\n\n      if (linePoints[2]) {\n        linePoints.__original.push(vec2.clone(linePoints[2]));\n      }\n    }\n\n    var originalPoints = linePoints.__original; // Quadratic curve\n\n    if (linePoints[2] != null) {\n      vec2.copy(pts[0], originalPoints[0]);\n      vec2.copy(pts[1], originalPoints[2]);\n      vec2.copy(pts[2], originalPoints[1]);\n\n      if (fromSymbol && fromSymbol !== 'none') {\n        var symbolSize = getSymbolSize(edge.node1);\n        var t = intersectCurveCircle(pts, originalPoints[0], symbolSize * scale); // Subdivide and get the second\n\n        quadraticSubdivide(pts[0][0], pts[1][0], pts[2][0], t, tmp0);\n        pts[0][0] = tmp0[3];\n        pts[1][0] = tmp0[4];\n        quadraticSubdivide(pts[0][1], pts[1][1], pts[2][1], t, tmp0);\n        pts[0][1] = tmp0[3];\n        pts[1][1] = tmp0[4];\n      }\n\n      if (toSymbol && toSymbol !== 'none') {\n        var symbolSize = getSymbolSize(edge.node2);\n        var t = intersectCurveCircle(pts, originalPoints[1], symbolSize * scale); // Subdivide and get the first\n\n        quadraticSubdivide(pts[0][0], pts[1][0], pts[2][0], t, tmp0);\n        pts[1][0] = tmp0[1];\n        pts[2][0] = tmp0[2];\n        quadraticSubdivide(pts[0][1], pts[1][1], pts[2][1], t, tmp0);\n        pts[1][1] = tmp0[1];\n        pts[2][1] = tmp0[2];\n      } // Copy back to layout\n\n\n      vec2.copy(linePoints[0], pts[0]);\n      vec2.copy(linePoints[1], pts[2]);\n      vec2.copy(linePoints[2], pts[1]);\n    } // Line\n    else {\n        vec2.copy(pts2[0], originalPoints[0]);\n        vec2.copy(pts2[1], originalPoints[1]);\n        vec2.sub(v, pts2[1], pts2[0]);\n        vec2.normalize(v, v);\n\n        if (fromSymbol && fromSymbol !== 'none') {\n          var symbolSize = getSymbolSize(edge.node1);\n          vec2.scaleAndAdd(pts2[0], pts2[0], v, symbolSize * scale);\n        }\n\n        if (toSymbol && toSymbol !== 'none') {\n          var symbolSize = getSymbolSize(edge.node2);\n          vec2.scaleAndAdd(pts2[1], pts2[1], v, -symbolSize * scale);\n        }\n\n        vec2.copy(linePoints[0], pts2[0]);\n        vec2.copy(linePoints[1], pts2[1]);\n      }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport SymbolDraw from '../helper/SymbolDraw.js';\nimport LineDraw from '../helper/LineDraw.js';\nimport RoamController from '../../component/helper/RoamController.js';\nimport * as roamHelper from '../../component/helper/roamHelper.js';\nimport { onIrrelevantElement } from '../../component/helper/cursorHelper.js';\nimport * as graphic from '../../util/graphic.js';\nimport adjustEdge from './adjustEdge.js';\nimport { getNodeGlobalScale } from './graphHelper.js';\nimport ChartView from '../../view/Chart.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { simpleLayoutEdge } from './simpleLayoutHelper.js';\nimport { circularLayout, rotateNodeLabel } from './circularLayoutHelper.js';\n\nfunction isViewCoordSys(coordSys) {\n  return coordSys.type === 'view';\n}\n\nvar GraphView =\n/** @class */\nfunction (_super) {\n  __extends(GraphView, _super);\n\n  function GraphView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = GraphView.type;\n    return _this;\n  }\n\n  GraphView.prototype.init = function (ecModel, api) {\n    var symbolDraw = new SymbolDraw();\n    var lineDraw = new LineDraw();\n    var group = this.group;\n    this._controller = new RoamController(api.getZr());\n    this._controllerHost = {\n      target: group\n    };\n    group.add(symbolDraw.group);\n    group.add(lineDraw.group);\n    this._symbolDraw = symbolDraw;\n    this._lineDraw = lineDraw;\n    this._firstRender = true;\n  };\n\n  GraphView.prototype.render = function (seriesModel, ecModel, api) {\n    var _this = this;\n\n    var coordSys = seriesModel.coordinateSystem;\n    this._model = seriesModel;\n    var symbolDraw = this._symbolDraw;\n    var lineDraw = this._lineDraw;\n    var group = this.group;\n\n    if (isViewCoordSys(coordSys)) {\n      var groupNewProp = {\n        x: coordSys.x,\n        y: coordSys.y,\n        scaleX: coordSys.scaleX,\n        scaleY: coordSys.scaleY\n      };\n\n      if (this._firstRender) {\n        group.attr(groupNewProp);\n      } else {\n        graphic.updateProps(group, groupNewProp, seriesModel);\n      }\n    } // Fix edge contact point with node\n\n\n    adjustEdge(seriesModel.getGraph(), getNodeGlobalScale(seriesModel));\n    var data = seriesModel.getData();\n    symbolDraw.updateData(data);\n    var edgeData = seriesModel.getEdgeData(); // TODO: TYPE\n\n    lineDraw.updateData(edgeData);\n\n    this._updateNodeAndLinkScale();\n\n    this._updateController(seriesModel, ecModel, api);\n\n    clearTimeout(this._layoutTimeout);\n    var forceLayout = seriesModel.forceLayout;\n    var layoutAnimation = seriesModel.get(['force', 'layoutAnimation']);\n\n    if (forceLayout) {\n      this._startForceLayoutIteration(forceLayout, layoutAnimation);\n    }\n\n    var layout = seriesModel.get('layout');\n    data.graph.eachNode(function (node) {\n      var idx = node.dataIndex;\n      var el = node.getGraphicEl();\n      var itemModel = node.getModel();\n\n      if (!el) {\n        return;\n      } // Update draggable\n\n\n      el.off('drag').off('dragend');\n      var draggable = itemModel.get('draggable');\n\n      if (draggable) {\n        el.on('drag', function (e) {\n          switch (layout) {\n            case 'force':\n              forceLayout.warmUp();\n              !_this._layouting && _this._startForceLayoutIteration(forceLayout, layoutAnimation);\n              forceLayout.setFixed(idx); // Write position back to layout\n\n              data.setItemLayout(idx, [el.x, el.y]);\n              break;\n\n            case 'circular':\n              data.setItemLayout(idx, [el.x, el.y]); // mark node fixed\n\n              node.setLayout({\n                fixed: true\n              }, true); // recalculate circular layout\n\n              circularLayout(seriesModel, 'symbolSize', node, [e.offsetX, e.offsetY]);\n\n              _this.updateLayout(seriesModel);\n\n              break;\n\n            case 'none':\n            default:\n              data.setItemLayout(idx, [el.x, el.y]); // update edge\n\n              simpleLayoutEdge(seriesModel.getGraph(), seriesModel);\n\n              _this.updateLayout(seriesModel);\n\n              break;\n          }\n        }).on('dragend', function () {\n          if (forceLayout) {\n            forceLayout.setUnfixed(idx);\n          }\n        });\n      }\n\n      el.setDraggable(draggable, !!itemModel.get('cursor'));\n      var focus = itemModel.get(['emphasis', 'focus']);\n\n      if (focus === 'adjacency') {\n        getECData(el).focus = node.getAdjacentDataIndices();\n      }\n    });\n    data.graph.eachEdge(function (edge) {\n      var el = edge.getGraphicEl();\n      var focus = edge.getModel().get(['emphasis', 'focus']);\n\n      if (!el) {\n        return;\n      }\n\n      if (focus === 'adjacency') {\n        getECData(el).focus = {\n          edge: [edge.dataIndex],\n          node: [edge.node1.dataIndex, edge.node2.dataIndex]\n        };\n      }\n    });\n    var circularRotateLabel = seriesModel.get('layout') === 'circular' && seriesModel.get(['circular', 'rotateLabel']);\n    var cx = data.getLayout('cx');\n    var cy = data.getLayout('cy');\n    data.graph.eachNode(function (node) {\n      rotateNodeLabel(node, circularRotateLabel, cx, cy);\n    });\n    this._firstRender = false;\n  };\n\n  GraphView.prototype.dispose = function () {\n    this._controller && this._controller.dispose();\n    this._controllerHost = null;\n  };\n\n  GraphView.prototype._startForceLayoutIteration = function (forceLayout, layoutAnimation) {\n    var self = this;\n\n    (function step() {\n      forceLayout.step(function (stopped) {\n        self.updateLayout(self._model);\n        (self._layouting = !stopped) && (layoutAnimation ? self._layoutTimeout = setTimeout(step, 16) : step());\n      });\n    })();\n  };\n\n  GraphView.prototype._updateController = function (seriesModel, ecModel, api) {\n    var _this = this;\n\n    var controller = this._controller;\n    var controllerHost = this._controllerHost;\n    var group = this.group;\n    controller.setPointerChecker(function (e, x, y) {\n      var rect = group.getBoundingRect();\n      rect.applyTransform(group.transform);\n      return rect.contain(x, y) && !onIrrelevantElement(e, api, seriesModel);\n    });\n\n    if (!isViewCoordSys(seriesModel.coordinateSystem)) {\n      controller.disable();\n      return;\n    }\n\n    controller.enable(seriesModel.get('roam'));\n    controllerHost.zoomLimit = seriesModel.get('scaleLimit');\n    controllerHost.zoom = seriesModel.coordinateSystem.getZoom();\n    controller.off('pan').off('zoom').on('pan', function (e) {\n      roamHelper.updateViewOnPan(controllerHost, e.dx, e.dy);\n      api.dispatchAction({\n        seriesId: seriesModel.id,\n        type: 'graphRoam',\n        dx: e.dx,\n        dy: e.dy\n      });\n    }).on('zoom', function (e) {\n      roamHelper.updateViewOnZoom(controllerHost, e.scale, e.originX, e.originY);\n      api.dispatchAction({\n        seriesId: seriesModel.id,\n        type: 'graphRoam',\n        zoom: e.scale,\n        originX: e.originX,\n        originY: e.originY\n      });\n\n      _this._updateNodeAndLinkScale();\n\n      adjustEdge(seriesModel.getGraph(), getNodeGlobalScale(seriesModel));\n\n      _this._lineDraw.updateLayout(); // Only update label layout on zoom\n\n\n      api.updateLabelLayout();\n    });\n  };\n\n  GraphView.prototype._updateNodeAndLinkScale = function () {\n    var seriesModel = this._model;\n    var data = seriesModel.getData();\n    var nodeScale = getNodeGlobalScale(seriesModel);\n    data.eachItemGraphicEl(function (el, idx) {\n      el && el.setSymbolScale(nodeScale);\n    });\n  };\n\n  GraphView.prototype.updateLayout = function (seriesModel) {\n    adjustEdge(seriesModel.getGraph(), getNodeGlobalScale(seriesModel));\n\n    this._symbolDraw.updateLayout();\n\n    this._lineDraw.updateLayout();\n  };\n\n  GraphView.prototype.remove = function (ecModel, api) {\n    this._symbolDraw && this._symbolDraw.remove();\n    this._lineDraw && this._lineDraw.remove();\n  };\n\n  GraphView.type = 'graph';\n  return GraphView;\n}(ChartView);\n\nexport default GraphView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js'; // id may be function name of Object, add a prefix to avoid this problem.\n\nfunction generateNodeKey(id) {\n  return '_EC_' + id;\n}\n\nvar Graph =\n/** @class */\nfunction () {\n  function Graph(directed) {\n    this.type = 'graph';\n    this.nodes = [];\n    this.edges = [];\n    this._nodesMap = {};\n    /**\r\n     * @type {Object.<string, module:echarts/data/Graph.Edge>}\r\n     * @private\r\n     */\n\n    this._edgesMap = {};\n    this._directed = directed || false;\n  }\n  /**\r\n   * If is directed graph\r\n   */\n\n\n  Graph.prototype.isDirected = function () {\n    return this._directed;\n  };\n\n  ;\n  /**\r\n   * Add a new node\r\n   */\n\n  Graph.prototype.addNode = function (id, dataIndex) {\n    id = id == null ? '' + dataIndex : '' + id;\n    var nodesMap = this._nodesMap;\n\n    if (nodesMap[generateNodeKey(id)]) {\n      if (process.env.NODE_ENV !== 'production') {\n        console.error('Graph nodes have duplicate name or id');\n      }\n\n      return;\n    }\n\n    var node = new GraphNode(id, dataIndex);\n    node.hostGraph = this;\n    this.nodes.push(node);\n    nodesMap[generateNodeKey(id)] = node;\n    return node;\n  };\n\n  ;\n  /**\r\n   * Get node by data index\r\n   */\n\n  Graph.prototype.getNodeByIndex = function (dataIndex) {\n    var rawIdx = this.data.getRawIndex(dataIndex);\n    return this.nodes[rawIdx];\n  };\n\n  ;\n  /**\r\n   * Get node by id\r\n   */\n\n  Graph.prototype.getNodeById = function (id) {\n    return this._nodesMap[generateNodeKey(id)];\n  };\n\n  ;\n  /**\r\n   * Add a new edge\r\n   */\n\n  Graph.prototype.addEdge = function (n1, n2, dataIndex) {\n    var nodesMap = this._nodesMap;\n    var edgesMap = this._edgesMap; // PENDING\n\n    if (zrUtil.isNumber(n1)) {\n      n1 = this.nodes[n1];\n    }\n\n    if (zrUtil.isNumber(n2)) {\n      n2 = this.nodes[n2];\n    }\n\n    if (!(n1 instanceof GraphNode)) {\n      n1 = nodesMap[generateNodeKey(n1)];\n    }\n\n    if (!(n2 instanceof GraphNode)) {\n      n2 = nodesMap[generateNodeKey(n2)];\n    }\n\n    if (!n1 || !n2) {\n      return;\n    }\n\n    var key = n1.id + '-' + n2.id;\n    var edge = new GraphEdge(n1, n2, dataIndex);\n    edge.hostGraph = this;\n\n    if (this._directed) {\n      n1.outEdges.push(edge);\n      n2.inEdges.push(edge);\n    }\n\n    n1.edges.push(edge);\n\n    if (n1 !== n2) {\n      n2.edges.push(edge);\n    }\n\n    this.edges.push(edge);\n    edgesMap[key] = edge;\n    return edge;\n  };\n\n  ;\n  /**\r\n   * Get edge by data index\r\n   */\n\n  Graph.prototype.getEdgeByIndex = function (dataIndex) {\n    var rawIdx = this.edgeData.getRawIndex(dataIndex);\n    return this.edges[rawIdx];\n  };\n\n  ;\n  /**\r\n   * Get edge by two linked nodes\r\n   */\n\n  Graph.prototype.getEdge = function (n1, n2) {\n    if (n1 instanceof GraphNode) {\n      n1 = n1.id;\n    }\n\n    if (n2 instanceof GraphNode) {\n      n2 = n2.id;\n    }\n\n    var edgesMap = this._edgesMap;\n\n    if (this._directed) {\n      return edgesMap[n1 + '-' + n2];\n    } else {\n      return edgesMap[n1 + '-' + n2] || edgesMap[n2 + '-' + n1];\n    }\n  };\n\n  ;\n  /**\r\n   * Iterate all nodes\r\n   */\n\n  Graph.prototype.eachNode = function (cb, context) {\n    var nodes = this.nodes;\n    var len = nodes.length;\n\n    for (var i = 0; i < len; i++) {\n      if (nodes[i].dataIndex >= 0) {\n        cb.call(context, nodes[i], i);\n      }\n    }\n  };\n\n  ;\n  /**\r\n   * Iterate all edges\r\n   */\n\n  Graph.prototype.eachEdge = function (cb, context) {\n    var edges = this.edges;\n    var len = edges.length;\n\n    for (var i = 0; i < len; i++) {\n      if (edges[i].dataIndex >= 0 && edges[i].node1.dataIndex >= 0 && edges[i].node2.dataIndex >= 0) {\n        cb.call(context, edges[i], i);\n      }\n    }\n  };\n\n  ;\n  /**\r\n   * Breadth first traverse\r\n   * Return true to stop traversing\r\n   */\n\n  Graph.prototype.breadthFirstTraverse = function (cb, startNode, direction, context) {\n    if (!(startNode instanceof GraphNode)) {\n      startNode = this._nodesMap[generateNodeKey(startNode)];\n    }\n\n    if (!startNode) {\n      return;\n    }\n\n    var edgeType = direction === 'out' ? 'outEdges' : direction === 'in' ? 'inEdges' : 'edges';\n\n    for (var i = 0; i < this.nodes.length; i++) {\n      this.nodes[i].__visited = false;\n    }\n\n    if (cb.call(context, startNode, null)) {\n      return;\n    }\n\n    var queue = [startNode];\n\n    while (queue.length) {\n      var currentNode = queue.shift();\n      var edges = currentNode[edgeType];\n\n      for (var i = 0; i < edges.length; i++) {\n        var e = edges[i];\n        var otherNode = e.node1 === currentNode ? e.node2 : e.node1;\n\n        if (!otherNode.__visited) {\n          if (cb.call(context, otherNode, currentNode)) {\n            // Stop traversing\n            return;\n          }\n\n          queue.push(otherNode);\n          otherNode.__visited = true;\n        }\n      }\n    }\n  };\n\n  ; // TODO\n  // depthFirstTraverse(\n  //     cb, startNode, direction, context\n  // ) {\n  // };\n  // Filter update\n\n  Graph.prototype.update = function () {\n    var data = this.data;\n    var edgeData = this.edgeData;\n    var nodes = this.nodes;\n    var edges = this.edges;\n\n    for (var i = 0, len = nodes.length; i < len; i++) {\n      nodes[i].dataIndex = -1;\n    }\n\n    for (var i = 0, len = data.count(); i < len; i++) {\n      nodes[data.getRawIndex(i)].dataIndex = i;\n    }\n\n    edgeData.filterSelf(function (idx) {\n      var edge = edges[edgeData.getRawIndex(idx)];\n      return edge.node1.dataIndex >= 0 && edge.node2.dataIndex >= 0;\n    }); // Update edge\n\n    for (var i = 0, len = edges.length; i < len; i++) {\n      edges[i].dataIndex = -1;\n    }\n\n    for (var i = 0, len = edgeData.count(); i < len; i++) {\n      edges[edgeData.getRawIndex(i)].dataIndex = i;\n    }\n  };\n\n  ;\n  /**\r\n   * @return {module:echarts/data/Graph}\r\n   */\n\n  Graph.prototype.clone = function () {\n    var graph = new Graph(this._directed);\n    var nodes = this.nodes;\n    var edges = this.edges;\n\n    for (var i = 0; i < nodes.length; i++) {\n      graph.addNode(nodes[i].id, nodes[i].dataIndex);\n    }\n\n    for (var i = 0; i < edges.length; i++) {\n      var e = edges[i];\n      graph.addEdge(e.node1.id, e.node2.id, e.dataIndex);\n    }\n\n    return graph;\n  };\n\n  ;\n  return Graph;\n}();\n\nvar GraphNode =\n/** @class */\nfunction () {\n  function GraphNode(id, dataIndex) {\n    this.inEdges = [];\n    this.outEdges = [];\n    this.edges = [];\n    this.dataIndex = -1;\n    this.id = id == null ? '' : id;\n    this.dataIndex = dataIndex == null ? -1 : dataIndex;\n  }\n  /**\r\n   * @return {number}\r\n   */\n\n\n  GraphNode.prototype.degree = function () {\n    return this.edges.length;\n  };\n  /**\r\n   * @return {number}\r\n   */\n\n\n  GraphNode.prototype.inDegree = function () {\n    return this.inEdges.length;\n  };\n  /**\r\n  * @return {number}\r\n  */\n\n\n  GraphNode.prototype.outDegree = function () {\n    return this.outEdges.length;\n  };\n\n  GraphNode.prototype.getModel = function (path) {\n    if (this.dataIndex < 0) {\n      return;\n    }\n\n    var graph = this.hostGraph;\n    var itemModel = graph.data.getItemModel(this.dataIndex);\n    return itemModel.getModel(path);\n  };\n\n  GraphNode.prototype.getAdjacentDataIndices = function () {\n    var dataIndices = {\n      edge: [],\n      node: []\n    };\n\n    for (var i = 0; i < this.edges.length; i++) {\n      var adjacentEdge = this.edges[i];\n\n      if (adjacentEdge.dataIndex < 0) {\n        continue;\n      }\n\n      dataIndices.edge.push(adjacentEdge.dataIndex);\n      dataIndices.node.push(adjacentEdge.node1.dataIndex, adjacentEdge.node2.dataIndex);\n    }\n\n    return dataIndices;\n  };\n\n  GraphNode.prototype.getTrajectoryDataIndices = function () {\n    var connectedEdgesMap = zrUtil.createHashMap();\n    var connectedNodesMap = zrUtil.createHashMap();\n\n    for (var i = 0; i < this.edges.length; i++) {\n      var adjacentEdge = this.edges[i];\n\n      if (adjacentEdge.dataIndex < 0) {\n        continue;\n      }\n\n      connectedEdgesMap.set(adjacentEdge.dataIndex, true);\n      var sourceNodesQueue = [adjacentEdge.node1];\n      var targetNodesQueue = [adjacentEdge.node2];\n      var nodeIteratorIndex = 0;\n\n      while (nodeIteratorIndex < sourceNodesQueue.length) {\n        var sourceNode = sourceNodesQueue[nodeIteratorIndex];\n        nodeIteratorIndex++;\n        connectedNodesMap.set(sourceNode.dataIndex, true);\n\n        for (var j = 0; j < sourceNode.inEdges.length; j++) {\n          connectedEdgesMap.set(sourceNode.inEdges[j].dataIndex, true);\n          sourceNodesQueue.push(sourceNode.inEdges[j].node1);\n        }\n      }\n\n      nodeIteratorIndex = 0;\n\n      while (nodeIteratorIndex < targetNodesQueue.length) {\n        var targetNode = targetNodesQueue[nodeIteratorIndex];\n        nodeIteratorIndex++;\n        connectedNodesMap.set(targetNode.dataIndex, true);\n\n        for (var j = 0; j < targetNode.outEdges.length; j++) {\n          connectedEdgesMap.set(targetNode.outEdges[j].dataIndex, true);\n          targetNodesQueue.push(targetNode.outEdges[j].node2);\n        }\n      }\n    }\n\n    return {\n      edge: connectedEdgesMap.keys(),\n      node: connectedNodesMap.keys()\n    };\n  };\n\n  return GraphNode;\n}();\n\nvar GraphEdge =\n/** @class */\nfunction () {\n  function GraphEdge(n1, n2, dataIndex) {\n    this.dataIndex = -1;\n    this.node1 = n1;\n    this.node2 = n2;\n    this.dataIndex = dataIndex == null ? -1 : dataIndex;\n  } // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  GraphEdge.prototype.getModel = function (path) {\n    if (this.dataIndex < 0) {\n      return;\n    }\n\n    var graph = this.hostGraph;\n    var itemModel = graph.edgeData.getItemModel(this.dataIndex);\n    return itemModel.getModel(path);\n  };\n\n  GraphEdge.prototype.getAdjacentDataIndices = function () {\n    return {\n      edge: [this.dataIndex],\n      node: [this.node1.dataIndex, this.node2.dataIndex]\n    };\n  };\n\n  GraphEdge.prototype.getTrajectoryDataIndices = function () {\n    var connectedEdgesMap = zrUtil.createHashMap();\n    var connectedNodesMap = zrUtil.createHashMap();\n    connectedEdgesMap.set(this.dataIndex, true);\n    var sourceNodes = [this.node1];\n    var targetNodes = [this.node2];\n    var nodeIteratorIndex = 0;\n\n    while (nodeIteratorIndex < sourceNodes.length) {\n      var sourceNode = sourceNodes[nodeIteratorIndex];\n      nodeIteratorIndex++;\n      connectedNodesMap.set(sourceNode.dataIndex, true);\n\n      for (var j = 0; j < sourceNode.inEdges.length; j++) {\n        connectedEdgesMap.set(sourceNode.inEdges[j].dataIndex, true);\n        sourceNodes.push(sourceNode.inEdges[j].node1);\n      }\n    }\n\n    nodeIteratorIndex = 0;\n\n    while (nodeIteratorIndex < targetNodes.length) {\n      var targetNode = targetNodes[nodeIteratorIndex];\n      nodeIteratorIndex++;\n      connectedNodesMap.set(targetNode.dataIndex, true);\n\n      for (var j = 0; j < targetNode.outEdges.length; j++) {\n        connectedEdgesMap.set(targetNode.outEdges[j].dataIndex, true);\n        targetNodes.push(targetNode.outEdges[j].node2);\n      }\n    }\n\n    return {\n      edge: connectedEdgesMap.keys(),\n      node: connectedNodesMap.keys()\n    };\n  };\n\n  return GraphEdge;\n}();\n\nfunction createGraphDataProxyMixin(hostName, dataName) {\n  return {\n    /**\r\n     * @param Default 'value'. can be 'a', 'b', 'c', 'd', 'e'.\r\n     */\n    getValue: function (dimension) {\n      var data = this[hostName][dataName];\n      return data.getStore().get(data.getDimensionIndex(dimension || 'value'), this.dataIndex);\n    },\n    // TODO: TYPE stricter type.\n    setVisual: function (key, value) {\n      this.dataIndex >= 0 && this[hostName][dataName].setItemVisual(this.dataIndex, key, value);\n    },\n    getVisual: function (key) {\n      return this[hostName][dataName].getItemVisual(this.dataIndex, key);\n    },\n    setLayout: function (layout, merge) {\n      this.dataIndex >= 0 && this[hostName][dataName].setItemLayout(this.dataIndex, layout, merge);\n    },\n    getLayout: function () {\n      return this[hostName][dataName].getItemLayout(this.dataIndex);\n    },\n    getGraphicEl: function () {\n      return this[hostName][dataName].getItemGraphicEl(this.dataIndex);\n    },\n    getRawIndex: function () {\n      return this[hostName][dataName].getRawIndex(this.dataIndex);\n    }\n  };\n}\n\n;\n;\n;\nzrUtil.mixin(GraphNode, createGraphDataProxyMixin('hostGraph', 'data'));\nzrUtil.mixin(GraphEdge, createGraphDataProxyMixin('hostGraph', 'edgeData'));\nexport default Graph;\nexport { GraphNode, GraphEdge };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport SeriesData from '../../data/SeriesData.js';\nimport Graph from '../../data/Graph.js';\nimport linkSeriesData from '../../data/helper/linkSeriesData.js';\nimport prepareSeriesDataSchema from '../../data/helper/createDimensions.js';\nimport CoordinateSystem from '../../core/CoordinateSystem.js';\nimport createSeriesData from './createSeriesData.js';\nimport { convertOptionIdName } from '../../util/model.js';\nexport default function createGraphFromNodeEdge(nodes, edges, seriesModel, directed, beforeLink) {\n  // ??? TODO\n  // support dataset?\n  var graph = new Graph(directed);\n\n  for (var i = 0; i < nodes.length; i++) {\n    graph.addNode(zrUtil.retrieve( // Id, name, dataIndex\n    nodes[i].id, nodes[i].name, i), i);\n  }\n\n  var linkNameList = [];\n  var validEdges = [];\n  var linkCount = 0;\n\n  for (var i = 0; i < edges.length; i++) {\n    var link = edges[i];\n    var source = link.source;\n    var target = link.target; // addEdge may fail when source or target not exists\n\n    if (graph.addEdge(source, target, linkCount)) {\n      validEdges.push(link);\n      linkNameList.push(zrUtil.retrieve(convertOptionIdName(link.id, null), source + ' > ' + target));\n      linkCount++;\n    }\n  }\n\n  var coordSys = seriesModel.get('coordinateSystem');\n  var nodeData;\n\n  if (coordSys === 'cartesian2d' || coordSys === 'polar') {\n    nodeData = createSeriesData(nodes, seriesModel);\n  } else {\n    var coordSysCtor = CoordinateSystem.get(coordSys);\n    var coordDimensions = coordSysCtor ? coordSysCtor.dimensions || [] : []; // FIXME: Some geo do not need `value` dimenson, whereas `calendar` needs\n    // `value` dimension, but graph need `value` dimension. It's better to\n    // uniform this behavior.\n\n    if (zrUtil.indexOf(coordDimensions, 'value') < 0) {\n      coordDimensions.concat(['value']);\n    }\n\n    var dimensions = prepareSeriesDataSchema(nodes, {\n      coordDimensions: coordDimensions,\n      encodeDefine: seriesModel.getEncode()\n    }).dimensions;\n    nodeData = new SeriesData(dimensions, seriesModel);\n    nodeData.initData(nodes);\n  }\n\n  var edgeData = new SeriesData(['value'], seriesModel);\n  edgeData.initData(validEdges, linkNameList);\n  beforeLink && beforeLink(nodeData, edgeData);\n  linkSeriesData({\n    mainData: nodeData,\n    struct: graph,\n    structAttr: 'graph',\n    datas: {\n      node: nodeData,\n      edge: edgeData\n    },\n    datasAttr: {\n      node: 'data',\n      edge: 'edgeData'\n    }\n  }); // Update dataIndex of nodes and edges because invalid edge may be removed\n\n  graph.update();\n  return graph;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport SeriesData from '../../data/SeriesData.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { defaultEmphasis } from '../../util/model.js';\nimport Model from '../../model/Model.js';\nimport createGraphFromNodeEdge from '../helper/createGraphFromNodeEdge.js';\nimport LegendVisualProvider from '../../visual/LegendVisualProvider.js';\nimport SeriesModel from '../../model/Series.js';\nimport { createTooltipMarkup } from '../../component/tooltip/tooltipMarkup.js';\nimport { defaultSeriesFormatTooltip } from '../../component/tooltip/seriesFormatTooltip.js';\nimport { initCurvenessList, createEdgeMapForCurveness } from '../helper/multipleGraphEdgeHelper.js';\n\nvar GraphSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(GraphSeriesModel, _super);\n\n  function GraphSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = GraphSeriesModel.type;\n    _this.hasSymbolVisual = true;\n    return _this;\n  }\n\n  GraphSeriesModel.prototype.init = function (option) {\n    _super.prototype.init.apply(this, arguments);\n\n    var self = this;\n\n    function getCategoriesData() {\n      return self._categoriesData;\n    } // Provide data for legend select\n\n\n    this.legendVisualProvider = new LegendVisualProvider(getCategoriesData, getCategoriesData);\n    this.fillDataTextStyle(option.edges || option.links);\n\n    this._updateCategoriesData();\n  };\n\n  GraphSeriesModel.prototype.mergeOption = function (option) {\n    _super.prototype.mergeOption.apply(this, arguments);\n\n    this.fillDataTextStyle(option.edges || option.links);\n\n    this._updateCategoriesData();\n  };\n\n  GraphSeriesModel.prototype.mergeDefaultAndTheme = function (option) {\n    _super.prototype.mergeDefaultAndTheme.apply(this, arguments);\n\n    defaultEmphasis(option, 'edgeLabel', ['show']);\n  };\n\n  GraphSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    var edges = option.edges || option.links || [];\n    var nodes = option.data || option.nodes || [];\n    var self = this;\n\n    if (nodes && edges) {\n      // auto curveness\n      initCurvenessList(this);\n      var graph = createGraphFromNodeEdge(nodes, edges, this, true, beforeLink);\n      zrUtil.each(graph.edges, function (edge) {\n        createEdgeMapForCurveness(edge.node1, edge.node2, this, edge.dataIndex);\n      }, this);\n      return graph.data;\n    }\n\n    function beforeLink(nodeData, edgeData) {\n      // Overwrite nodeData.getItemModel to\n      nodeData.wrapMethod('getItemModel', function (model) {\n        var categoriesModels = self._categoriesModels;\n        var categoryIdx = model.getShallow('category');\n        var categoryModel = categoriesModels[categoryIdx];\n\n        if (categoryModel) {\n          categoryModel.parentModel = model.parentModel;\n          model.parentModel = categoryModel;\n        }\n\n        return model;\n      }); // TODO Inherit resolveParentPath by default in Model#getModel?\n\n      var oldGetModel = Model.prototype.getModel;\n\n      function newGetModel(path, parentModel) {\n        var model = oldGetModel.call(this, path, parentModel);\n        model.resolveParentPath = resolveParentPath;\n        return model;\n      }\n\n      edgeData.wrapMethod('getItemModel', function (model) {\n        model.resolveParentPath = resolveParentPath;\n        model.getModel = newGetModel;\n        return model;\n      });\n\n      function resolveParentPath(pathArr) {\n        if (pathArr && (pathArr[0] === 'label' || pathArr[1] === 'label')) {\n          var newPathArr = pathArr.slice();\n\n          if (pathArr[0] === 'label') {\n            newPathArr[0] = 'edgeLabel';\n          } else if (pathArr[1] === 'label') {\n            newPathArr[1] = 'edgeLabel';\n          }\n\n          return newPathArr;\n        }\n\n        return pathArr;\n      }\n    }\n  };\n\n  GraphSeriesModel.prototype.getGraph = function () {\n    return this.getData().graph;\n  };\n\n  GraphSeriesModel.prototype.getEdgeData = function () {\n    return this.getGraph().edgeData;\n  };\n\n  GraphSeriesModel.prototype.getCategoriesData = function () {\n    return this._categoriesData;\n  };\n\n  GraphSeriesModel.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\n    if (dataType === 'edge') {\n      var nodeData = this.getData();\n      var params = this.getDataParams(dataIndex, dataType);\n      var edge = nodeData.graph.getEdgeByIndex(dataIndex);\n      var sourceName = nodeData.getName(edge.node1.dataIndex);\n      var targetName = nodeData.getName(edge.node2.dataIndex);\n      var nameArr = [];\n      sourceName != null && nameArr.push(sourceName);\n      targetName != null && nameArr.push(targetName);\n      return createTooltipMarkup('nameValue', {\n        name: nameArr.join(' > '),\n        value: params.value,\n        noValue: params.value == null\n      });\n    } // dataType === 'node' or empty\n\n\n    var nodeMarkup = defaultSeriesFormatTooltip({\n      series: this,\n      dataIndex: dataIndex,\n      multipleSeries: multipleSeries\n    });\n    return nodeMarkup;\n  };\n\n  GraphSeriesModel.prototype._updateCategoriesData = function () {\n    var categories = zrUtil.map(this.option.categories || [], function (category) {\n      // Data must has value\n      return category.value != null ? category : zrUtil.extend({\n        value: 0\n      }, category);\n    });\n    var categoriesData = new SeriesData(['value'], this);\n    categoriesData.initData(categories);\n    this._categoriesData = categoriesData;\n    this._categoriesModels = categoriesData.mapArray(function (idx) {\n      return categoriesData.getItemModel(idx);\n    });\n  };\n\n  GraphSeriesModel.prototype.setZoom = function (zoom) {\n    this.option.zoom = zoom;\n  };\n\n  GraphSeriesModel.prototype.setCenter = function (center) {\n    this.option.center = center;\n  };\n\n  GraphSeriesModel.prototype.isAnimationEnabled = function () {\n    return _super.prototype.isAnimationEnabled.call(this) // Not enable animation when do force layout\n    && !(this.get('layout') === 'force' && this.get(['force', 'layoutAnimation']));\n  };\n\n  GraphSeriesModel.type = 'series.graph';\n  GraphSeriesModel.dependencies = ['grid', 'polar', 'geo', 'singleAxis', 'calendar'];\n  GraphSeriesModel.defaultOption = {\n    // zlevel: 0,\n    z: 2,\n    coordinateSystem: 'view',\n    // Default option for all coordinate systems\n    // xAxisIndex: 0,\n    // yAxisIndex: 0,\n    // polarIndex: 0,\n    // geoIndex: 0,\n    legendHoverLink: true,\n    layout: null,\n    // Configuration of circular layout\n    circular: {\n      rotateLabel: false\n    },\n    // Configuration of force directed layout\n    force: {\n      initLayout: null,\n      // Node repulsion. Can be an array to represent range.\n      repulsion: [0, 50],\n      gravity: 0.1,\n      // Initial friction\n      friction: 0.6,\n      // Edge length. Can be an array to represent range.\n      edgeLength: 30,\n      layoutAnimation: true\n    },\n    left: 'center',\n    top: 'center',\n    // right: null,\n    // bottom: null,\n    // width: '80%',\n    // height: '80%',\n    symbol: 'circle',\n    symbolSize: 10,\n    edgeSymbol: ['none', 'none'],\n    edgeSymbolSize: 10,\n    edgeLabel: {\n      position: 'middle',\n      distance: 5\n    },\n    draggable: false,\n    roam: false,\n    // Default on center of graph\n    center: null,\n    zoom: 1,\n    // Symbol size scale ratio in roam\n    nodeScaleRatio: 0.6,\n    // cursor: null,\n    // categories: [],\n    // data: []\n    // Or\n    // nodes: []\n    //\n    // links: []\n    // Or\n    // edges: []\n    label: {\n      show: false,\n      formatter: '{b}'\n    },\n    itemStyle: {},\n    lineStyle: {\n      color: '#aaa',\n      width: 1,\n      opacity: 0.5\n    },\n    emphasis: {\n      scale: true,\n      label: {\n        show: true\n      }\n    },\n    select: {\n      itemStyle: {\n        borderColor: '#212121'\n      }\n    }\n  };\n  return GraphSeriesModel;\n}(SeriesModel);\n\nexport default GraphSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport categoryFilter from './categoryFilter.js';\nimport categoryVisual from './categoryVisual.js';\nimport edgeVisual from './edgeVisual.js';\nimport simpleLayout from './simpleLayout.js';\nimport circularLayout from './circularLayout.js';\nimport forceLayout from './forceLayout.js';\nimport createView from './createView.js';\nimport View from '../../coord/View.js';\nimport GraphView from './GraphView.js';\nimport GraphSeriesModel from './GraphSeries.js';\nimport { updateCenterAndZoom } from '../../action/roamHelper.js';\nimport { noop } from 'zrender/lib/core/util.js';\nvar actionInfo = {\n  type: 'graphRoam',\n  event: 'graphRoam',\n  update: 'none'\n};\nexport function install(registers) {\n  registers.registerChartView(GraphView);\n  registers.registerSeriesModel(GraphSeriesModel);\n  registers.registerProcessor(categoryFilter);\n  registers.registerVisual(categoryVisual);\n  registers.registerVisual(edgeVisual);\n  registers.registerLayout(simpleLayout);\n  registers.registerLayout(registers.PRIORITY.VISUAL.POST_CHART_LAYOUT, circularLayout);\n  registers.registerLayout(forceLayout);\n  registers.registerCoordinateSystem('graphView', {\n    dimensions: View.dimensions,\n    create: createView\n  }); // Register legacy focus actions\n\n  registers.registerAction({\n    type: 'focusNodeAdjacency',\n    event: 'focusNodeAdjacency',\n    update: 'series:focusNodeAdjacency'\n  }, noop);\n  registers.registerAction({\n    type: 'unfocusNodeAdjacency',\n    event: 'unfocusNodeAdjacency',\n    update: 'series:unfocusNodeAdjacency'\n  }, noop); // Register roam action.\n\n  registers.registerAction(actionInfo, function (payload, ecModel, api) {\n    ecModel.eachComponent({\n      mainType: 'series',\n      query: payload\n    }, function (seriesModel) {\n      var coordSys = seriesModel.coordinateSystem;\n      var res = updateCenterAndZoom(coordSys, payload, undefined, api);\n      seriesModel.setCenter && seriesModel.setCenter(res.center);\n      seriesModel.setZoom && seriesModel.setZoom(res.zoom);\n    });\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport Path from 'zrender/lib/graphic/Path.js';\n\nvar PointerShape =\n/** @class */\nfunction () {\n  function PointerShape() {\n    this.angle = 0;\n    this.width = 10;\n    this.r = 10;\n    this.x = 0;\n    this.y = 0;\n  }\n\n  return PointerShape;\n}();\n\nvar PointerPath =\n/** @class */\nfunction (_super) {\n  __extends(PointerPath, _super);\n\n  function PointerPath(opts) {\n    var _this = _super.call(this, opts) || this;\n\n    _this.type = 'pointer';\n    return _this;\n  }\n\n  PointerPath.prototype.getDefaultShape = function () {\n    return new PointerShape();\n  };\n\n  PointerPath.prototype.buildPath = function (ctx, shape) {\n    var mathCos = Math.cos;\n    var mathSin = Math.sin;\n    var r = shape.r;\n    var width = shape.width;\n    var angle = shape.angle;\n    var x = shape.x - mathCos(angle) * width * (width >= r / 3 ? 1 : 2);\n    var y = shape.y - mathSin(angle) * width * (width >= r / 3 ? 1 : 2);\n    angle = shape.angle - Math.PI / 2;\n    ctx.moveTo(x, y);\n    ctx.lineTo(shape.x + mathCos(angle) * width, shape.y + mathSin(angle) * width);\n    ctx.lineTo(shape.x + mathCos(shape.angle) * r, shape.y + mathSin(shape.angle) * r);\n    ctx.lineTo(shape.x - mathCos(angle) * width, shape.y - mathSin(angle) * width);\n    ctx.lineTo(x, y);\n  };\n\n  return PointerPath;\n}(Path);\n\nexport default PointerPath;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport PointerPath from './PointerPath.js';\nimport * as graphic from '../../util/graphic.js';\nimport { setStatesStylesFromModel, toggleHoverEmphasis } from '../../util/states.js';\nimport { createTextStyle, setLabelValueAnimation, animateLabelValue } from '../../label/labelStyle.js';\nimport ChartView from '../../view/Chart.js';\nimport { parsePercent, round, linearMap } from '../../util/number.js';\nimport Sausage from '../../util/shape/sausage.js';\nimport { createSymbol } from '../../util/symbol.js';\nimport ZRImage from 'zrender/lib/graphic/Image.js';\nimport { extend, isFunction, isString, isNumber, each } from 'zrender/lib/core/util.js';\nimport { setCommonECData } from '../../util/innerStore.js';\nimport { normalizeArcAngles } from 'zrender/lib/core/PathProxy.js';\n\nfunction parsePosition(seriesModel, api) {\n  var center = seriesModel.get('center');\n  var width = api.getWidth();\n  var height = api.getHeight();\n  var size = Math.min(width, height);\n  var cx = parsePercent(center[0], api.getWidth());\n  var cy = parsePercent(center[1], api.getHeight());\n  var r = parsePercent(seriesModel.get('radius'), size / 2);\n  return {\n    cx: cx,\n    cy: cy,\n    r: r\n  };\n}\n\nfunction formatLabel(value, labelFormatter) {\n  var label = value == null ? '' : value + '';\n\n  if (labelFormatter) {\n    if (isString(labelFormatter)) {\n      label = labelFormatter.replace('{value}', label);\n    } else if (isFunction(labelFormatter)) {\n      label = labelFormatter(value);\n    }\n  }\n\n  return label;\n}\n\nvar GaugeView =\n/** @class */\nfunction (_super) {\n  __extends(GaugeView, _super);\n\n  function GaugeView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = GaugeView.type;\n    return _this;\n  }\n\n  GaugeView.prototype.render = function (seriesModel, ecModel, api) {\n    this.group.removeAll();\n    var colorList = seriesModel.get(['axisLine', 'lineStyle', 'color']);\n    var posInfo = parsePosition(seriesModel, api);\n\n    this._renderMain(seriesModel, ecModel, api, colorList, posInfo);\n\n    this._data = seriesModel.getData();\n  };\n\n  GaugeView.prototype.dispose = function () {};\n\n  GaugeView.prototype._renderMain = function (seriesModel, ecModel, api, colorList, posInfo) {\n    var group = this.group;\n    var clockwise = seriesModel.get('clockwise');\n    var startAngle = -seriesModel.get('startAngle') / 180 * Math.PI;\n    var endAngle = -seriesModel.get('endAngle') / 180 * Math.PI;\n    var axisLineModel = seriesModel.getModel('axisLine');\n    var roundCap = axisLineModel.get('roundCap');\n    var MainPath = roundCap ? Sausage : graphic.Sector;\n    var showAxis = axisLineModel.get('show');\n    var lineStyleModel = axisLineModel.getModel('lineStyle');\n    var axisLineWidth = lineStyleModel.get('width');\n    var angles = [startAngle, endAngle];\n    normalizeArcAngles(angles, !clockwise);\n    startAngle = angles[0];\n    endAngle = angles[1];\n    var angleRangeSpan = endAngle - startAngle;\n    var prevEndAngle = startAngle;\n    var sectors = [];\n\n    for (var i = 0; showAxis && i < colorList.length; i++) {\n      // Clamp\n      var percent = Math.min(Math.max(colorList[i][0], 0), 1);\n      endAngle = startAngle + angleRangeSpan * percent;\n      var sector = new MainPath({\n        shape: {\n          startAngle: prevEndAngle,\n          endAngle: endAngle,\n          cx: posInfo.cx,\n          cy: posInfo.cy,\n          clockwise: clockwise,\n          r0: posInfo.r - axisLineWidth,\n          r: posInfo.r\n        },\n        silent: true\n      });\n      sector.setStyle({\n        fill: colorList[i][1]\n      });\n      sector.setStyle(lineStyleModel.getLineStyle( // Because we use sector to simulate arc\n      // so the properties for stroking are useless\n      ['color', 'width']));\n      sectors.push(sector);\n      prevEndAngle = endAngle;\n    }\n\n    sectors.reverse();\n    each(sectors, function (sector) {\n      return group.add(sector);\n    });\n\n    var getColor = function (percent) {\n      // Less than 0\n      if (percent <= 0) {\n        return colorList[0][1];\n      }\n\n      var i;\n\n      for (i = 0; i < colorList.length; i++) {\n        if (colorList[i][0] >= percent && (i === 0 ? 0 : colorList[i - 1][0]) < percent) {\n          return colorList[i][1];\n        }\n      } // More than 1\n\n\n      return colorList[i - 1][1];\n    };\n\n    this._renderTicks(seriesModel, ecModel, api, getColor, posInfo, startAngle, endAngle, clockwise, axisLineWidth);\n\n    this._renderTitleAndDetail(seriesModel, ecModel, api, getColor, posInfo);\n\n    this._renderAnchor(seriesModel, posInfo);\n\n    this._renderPointer(seriesModel, ecModel, api, getColor, posInfo, startAngle, endAngle, clockwise, axisLineWidth);\n  };\n\n  GaugeView.prototype._renderTicks = function (seriesModel, ecModel, api, getColor, posInfo, startAngle, endAngle, clockwise, axisLineWidth) {\n    var group = this.group;\n    var cx = posInfo.cx;\n    var cy = posInfo.cy;\n    var r = posInfo.r;\n    var minVal = +seriesModel.get('min');\n    var maxVal = +seriesModel.get('max');\n    var splitLineModel = seriesModel.getModel('splitLine');\n    var tickModel = seriesModel.getModel('axisTick');\n    var labelModel = seriesModel.getModel('axisLabel');\n    var splitNumber = seriesModel.get('splitNumber');\n    var subSplitNumber = tickModel.get('splitNumber');\n    var splitLineLen = parsePercent(splitLineModel.get('length'), r);\n    var tickLen = parsePercent(tickModel.get('length'), r);\n    var angle = startAngle;\n    var step = (endAngle - startAngle) / splitNumber;\n    var subStep = step / subSplitNumber;\n    var splitLineStyle = splitLineModel.getModel('lineStyle').getLineStyle();\n    var tickLineStyle = tickModel.getModel('lineStyle').getLineStyle();\n    var splitLineDistance = splitLineModel.get('distance');\n    var unitX;\n    var unitY;\n\n    for (var i = 0; i <= splitNumber; i++) {\n      unitX = Math.cos(angle);\n      unitY = Math.sin(angle); // Split line\n\n      if (splitLineModel.get('show')) {\n        var distance = splitLineDistance ? splitLineDistance + axisLineWidth : axisLineWidth;\n        var splitLine = new graphic.Line({\n          shape: {\n            x1: unitX * (r - distance) + cx,\n            y1: unitY * (r - distance) + cy,\n            x2: unitX * (r - splitLineLen - distance) + cx,\n            y2: unitY * (r - splitLineLen - distance) + cy\n          },\n          style: splitLineStyle,\n          silent: true\n        });\n\n        if (splitLineStyle.stroke === 'auto') {\n          splitLine.setStyle({\n            stroke: getColor(i / splitNumber)\n          });\n        }\n\n        group.add(splitLine);\n      } // Label\n\n\n      if (labelModel.get('show')) {\n        var distance = labelModel.get('distance') + splitLineDistance;\n        var label = formatLabel(round(i / splitNumber * (maxVal - minVal) + minVal), labelModel.get('formatter'));\n        var autoColor = getColor(i / splitNumber);\n        var textStyleX = unitX * (r - splitLineLen - distance) + cx;\n        var textStyleY = unitY * (r - splitLineLen - distance) + cy;\n        var rotateType = labelModel.get('rotate');\n        var rotate = 0;\n\n        if (rotateType === 'radial') {\n          rotate = -angle + 2 * Math.PI;\n\n          if (rotate > Math.PI / 2) {\n            rotate += Math.PI;\n          }\n        } else if (rotateType === 'tangential') {\n          rotate = -angle - Math.PI / 2;\n        } else if (isNumber(rotateType)) {\n          rotate = rotateType * Math.PI / 180;\n        }\n\n        if (rotate === 0) {\n          group.add(new graphic.Text({\n            style: createTextStyle(labelModel, {\n              text: label,\n              x: textStyleX,\n              y: textStyleY,\n              verticalAlign: unitY < -0.8 ? 'top' : unitY > 0.8 ? 'bottom' : 'middle',\n              align: unitX < -0.4 ? 'left' : unitX > 0.4 ? 'right' : 'center'\n            }, {\n              inheritColor: autoColor\n            }),\n            silent: true\n          }));\n        } else {\n          group.add(new graphic.Text({\n            style: createTextStyle(labelModel, {\n              text: label,\n              x: textStyleX,\n              y: textStyleY,\n              verticalAlign: 'middle',\n              align: 'center'\n            }, {\n              inheritColor: autoColor\n            }),\n            silent: true,\n            originX: textStyleX,\n            originY: textStyleY,\n            rotation: rotate\n          }));\n        }\n      } // Axis tick\n\n\n      if (tickModel.get('show') && i !== splitNumber) {\n        var distance = tickModel.get('distance');\n        distance = distance ? distance + axisLineWidth : axisLineWidth;\n\n        for (var j = 0; j <= subSplitNumber; j++) {\n          unitX = Math.cos(angle);\n          unitY = Math.sin(angle);\n          var tickLine = new graphic.Line({\n            shape: {\n              x1: unitX * (r - distance) + cx,\n              y1: unitY * (r - distance) + cy,\n              x2: unitX * (r - tickLen - distance) + cx,\n              y2: unitY * (r - tickLen - distance) + cy\n            },\n            silent: true,\n            style: tickLineStyle\n          });\n\n          if (tickLineStyle.stroke === 'auto') {\n            tickLine.setStyle({\n              stroke: getColor((i + j / subSplitNumber) / splitNumber)\n            });\n          }\n\n          group.add(tickLine);\n          angle += subStep;\n        }\n\n        angle -= subStep;\n      } else {\n        angle += step;\n      }\n    }\n  };\n\n  GaugeView.prototype._renderPointer = function (seriesModel, ecModel, api, getColor, posInfo, startAngle, endAngle, clockwise, axisLineWidth) {\n    var group = this.group;\n    var oldData = this._data;\n    var oldProgressData = this._progressEls;\n    var progressList = [];\n    var showPointer = seriesModel.get(['pointer', 'show']);\n    var progressModel = seriesModel.getModel('progress');\n    var showProgress = progressModel.get('show');\n    var data = seriesModel.getData();\n    var valueDim = data.mapDimension('value');\n    var minVal = +seriesModel.get('min');\n    var maxVal = +seriesModel.get('max');\n    var valueExtent = [minVal, maxVal];\n    var angleExtent = [startAngle, endAngle];\n\n    function createPointer(idx, angle) {\n      var itemModel = data.getItemModel(idx);\n      var pointerModel = itemModel.getModel('pointer');\n      var pointerWidth = parsePercent(pointerModel.get('width'), posInfo.r);\n      var pointerLength = parsePercent(pointerModel.get('length'), posInfo.r);\n      var pointerStr = seriesModel.get(['pointer', 'icon']);\n      var pointerOffset = pointerModel.get('offsetCenter');\n      var pointerOffsetX = parsePercent(pointerOffset[0], posInfo.r);\n      var pointerOffsetY = parsePercent(pointerOffset[1], posInfo.r);\n      var pointerKeepAspect = pointerModel.get('keepAspect');\n      var pointer; // not exist icon type will be set 'rect'\n\n      if (pointerStr) {\n        pointer = createSymbol(pointerStr, pointerOffsetX - pointerWidth / 2, pointerOffsetY - pointerLength, pointerWidth, pointerLength, null, pointerKeepAspect);\n      } else {\n        pointer = new PointerPath({\n          shape: {\n            angle: -Math.PI / 2,\n            width: pointerWidth,\n            r: pointerLength,\n            x: pointerOffsetX,\n            y: pointerOffsetY\n          }\n        });\n      }\n\n      pointer.rotation = -(angle + Math.PI / 2);\n      pointer.x = posInfo.cx;\n      pointer.y = posInfo.cy;\n      return pointer;\n    }\n\n    function createProgress(idx, endAngle) {\n      var roundCap = progressModel.get('roundCap');\n      var ProgressPath = roundCap ? Sausage : graphic.Sector;\n      var isOverlap = progressModel.get('overlap');\n      var progressWidth = isOverlap ? progressModel.get('width') : axisLineWidth / data.count();\n      var r0 = isOverlap ? posInfo.r - progressWidth : posInfo.r - (idx + 1) * progressWidth;\n      var r = isOverlap ? posInfo.r : posInfo.r - idx * progressWidth;\n      var progress = new ProgressPath({\n        shape: {\n          startAngle: startAngle,\n          endAngle: endAngle,\n          cx: posInfo.cx,\n          cy: posInfo.cy,\n          clockwise: clockwise,\n          r0: r0,\n          r: r\n        }\n      });\n      isOverlap && (progress.z2 = maxVal - data.get(valueDim, idx) % maxVal);\n      return progress;\n    }\n\n    if (showProgress || showPointer) {\n      data.diff(oldData).add(function (idx) {\n        var val = data.get(valueDim, idx);\n\n        if (showPointer) {\n          var pointer = createPointer(idx, startAngle); // TODO hide pointer on NaN value?\n\n          graphic.initProps(pointer, {\n            rotation: -((isNaN(+val) ? angleExtent[0] : linearMap(val, valueExtent, angleExtent, true)) + Math.PI / 2)\n          }, seriesModel);\n          group.add(pointer);\n          data.setItemGraphicEl(idx, pointer);\n        }\n\n        if (showProgress) {\n          var progress = createProgress(idx, startAngle);\n          var isClip = progressModel.get('clip');\n          graphic.initProps(progress, {\n            shape: {\n              endAngle: linearMap(val, valueExtent, angleExtent, isClip)\n            }\n          }, seriesModel);\n          group.add(progress); // Add data index and series index for indexing the data by element\n          // Useful in tooltip\n\n          setCommonECData(seriesModel.seriesIndex, data.dataType, idx, progress);\n          progressList[idx] = progress;\n        }\n      }).update(function (newIdx, oldIdx) {\n        var val = data.get(valueDim, newIdx);\n\n        if (showPointer) {\n          var previousPointer = oldData.getItemGraphicEl(oldIdx);\n          var previousRotate = previousPointer ? previousPointer.rotation : startAngle;\n          var pointer = createPointer(newIdx, previousRotate);\n          pointer.rotation = previousRotate;\n          graphic.updateProps(pointer, {\n            rotation: -((isNaN(+val) ? angleExtent[0] : linearMap(val, valueExtent, angleExtent, true)) + Math.PI / 2)\n          }, seriesModel);\n          group.add(pointer);\n          data.setItemGraphicEl(newIdx, pointer);\n        }\n\n        if (showProgress) {\n          var previousProgress = oldProgressData[oldIdx];\n          var previousEndAngle = previousProgress ? previousProgress.shape.endAngle : startAngle;\n          var progress = createProgress(newIdx, previousEndAngle);\n          var isClip = progressModel.get('clip');\n          graphic.updateProps(progress, {\n            shape: {\n              endAngle: linearMap(val, valueExtent, angleExtent, isClip)\n            }\n          }, seriesModel);\n          group.add(progress); // Add data index and series index for indexing the data by element\n          // Useful in tooltip\n\n          setCommonECData(seriesModel.seriesIndex, data.dataType, newIdx, progress);\n          progressList[newIdx] = progress;\n        }\n      }).execute();\n      data.each(function (idx) {\n        var itemModel = data.getItemModel(idx);\n        var emphasisModel = itemModel.getModel('emphasis');\n        var focus = emphasisModel.get('focus');\n        var blurScope = emphasisModel.get('blurScope');\n        var emphasisDisabled = emphasisModel.get('disabled');\n\n        if (showPointer) {\n          var pointer = data.getItemGraphicEl(idx);\n          var symbolStyle = data.getItemVisual(idx, 'style');\n          var visualColor = symbolStyle.fill;\n\n          if (pointer instanceof ZRImage) {\n            var pathStyle = pointer.style;\n            pointer.useStyle(extend({\n              image: pathStyle.image,\n              x: pathStyle.x,\n              y: pathStyle.y,\n              width: pathStyle.width,\n              height: pathStyle.height\n            }, symbolStyle));\n          } else {\n            pointer.useStyle(symbolStyle);\n            pointer.type !== 'pointer' && pointer.setColor(visualColor);\n          }\n\n          pointer.setStyle(itemModel.getModel(['pointer', 'itemStyle']).getItemStyle());\n\n          if (pointer.style.fill === 'auto') {\n            pointer.setStyle('fill', getColor(linearMap(data.get(valueDim, idx), valueExtent, [0, 1], true)));\n          }\n\n          pointer.z2EmphasisLift = 0;\n          setStatesStylesFromModel(pointer, itemModel);\n          toggleHoverEmphasis(pointer, focus, blurScope, emphasisDisabled);\n        }\n\n        if (showProgress) {\n          var progress = progressList[idx];\n          progress.useStyle(data.getItemVisual(idx, 'style'));\n          progress.setStyle(itemModel.getModel(['progress', 'itemStyle']).getItemStyle());\n          progress.z2EmphasisLift = 0;\n          setStatesStylesFromModel(progress, itemModel);\n          toggleHoverEmphasis(progress, focus, blurScope, emphasisDisabled);\n        }\n      });\n      this._progressEls = progressList;\n    }\n  };\n\n  GaugeView.prototype._renderAnchor = function (seriesModel, posInfo) {\n    var anchorModel = seriesModel.getModel('anchor');\n    var showAnchor = anchorModel.get('show');\n\n    if (showAnchor) {\n      var anchorSize = anchorModel.get('size');\n      var anchorType = anchorModel.get('icon');\n      var offsetCenter = anchorModel.get('offsetCenter');\n      var anchorKeepAspect = anchorModel.get('keepAspect');\n      var anchor = createSymbol(anchorType, posInfo.cx - anchorSize / 2 + parsePercent(offsetCenter[0], posInfo.r), posInfo.cy - anchorSize / 2 + parsePercent(offsetCenter[1], posInfo.r), anchorSize, anchorSize, null, anchorKeepAspect);\n      anchor.z2 = anchorModel.get('showAbove') ? 1 : 0;\n      anchor.setStyle(anchorModel.getModel('itemStyle').getItemStyle());\n      this.group.add(anchor);\n    }\n  };\n\n  GaugeView.prototype._renderTitleAndDetail = function (seriesModel, ecModel, api, getColor, posInfo) {\n    var _this = this;\n\n    var data = seriesModel.getData();\n    var valueDim = data.mapDimension('value');\n    var minVal = +seriesModel.get('min');\n    var maxVal = +seriesModel.get('max');\n    var contentGroup = new graphic.Group();\n    var newTitleEls = [];\n    var newDetailEls = [];\n    var hasAnimation = seriesModel.isAnimationEnabled();\n    var showPointerAbove = seriesModel.get(['pointer', 'showAbove']);\n    data.diff(this._data).add(function (idx) {\n      newTitleEls[idx] = new graphic.Text({\n        silent: true\n      });\n      newDetailEls[idx] = new graphic.Text({\n        silent: true\n      });\n    }).update(function (idx, oldIdx) {\n      newTitleEls[idx] = _this._titleEls[oldIdx];\n      newDetailEls[idx] = _this._detailEls[oldIdx];\n    }).execute();\n    data.each(function (idx) {\n      var itemModel = data.getItemModel(idx);\n      var value = data.get(valueDim, idx);\n      var itemGroup = new graphic.Group();\n      var autoColor = getColor(linearMap(value, [minVal, maxVal], [0, 1], true));\n      var itemTitleModel = itemModel.getModel('title');\n\n      if (itemTitleModel.get('show')) {\n        var titleOffsetCenter = itemTitleModel.get('offsetCenter');\n        var titleX = posInfo.cx + parsePercent(titleOffsetCenter[0], posInfo.r);\n        var titleY = posInfo.cy + parsePercent(titleOffsetCenter[1], posInfo.r);\n        var labelEl = newTitleEls[idx];\n        labelEl.attr({\n          z2: showPointerAbove ? 0 : 2,\n          style: createTextStyle(itemTitleModel, {\n            x: titleX,\n            y: titleY,\n            text: data.getName(idx),\n            align: 'center',\n            verticalAlign: 'middle'\n          }, {\n            inheritColor: autoColor\n          })\n        });\n        itemGroup.add(labelEl);\n      }\n\n      var itemDetailModel = itemModel.getModel('detail');\n\n      if (itemDetailModel.get('show')) {\n        var detailOffsetCenter = itemDetailModel.get('offsetCenter');\n        var detailX = posInfo.cx + parsePercent(detailOffsetCenter[0], posInfo.r);\n        var detailY = posInfo.cy + parsePercent(detailOffsetCenter[1], posInfo.r);\n        var width = parsePercent(itemDetailModel.get('width'), posInfo.r);\n        var height = parsePercent(itemDetailModel.get('height'), posInfo.r);\n        var detailColor = seriesModel.get(['progress', 'show']) ? data.getItemVisual(idx, 'style').fill : autoColor;\n        var labelEl = newDetailEls[idx];\n        var formatter_1 = itemDetailModel.get('formatter');\n        labelEl.attr({\n          z2: showPointerAbove ? 0 : 2,\n          style: createTextStyle(itemDetailModel, {\n            x: detailX,\n            y: detailY,\n            text: formatLabel(value, formatter_1),\n            width: isNaN(width) ? null : width,\n            height: isNaN(height) ? null : height,\n            align: 'center',\n            verticalAlign: 'middle'\n          }, {\n            inheritColor: detailColor\n          })\n        });\n        setLabelValueAnimation(labelEl, {\n          normal: itemDetailModel\n        }, value, function (value) {\n          return formatLabel(value, formatter_1);\n        });\n        hasAnimation && animateLabelValue(labelEl, idx, data, seriesModel, {\n          getFormattedLabel: function (labelDataIndex, status, dataType, labelDimIndex, fmt, extendParams) {\n            return formatLabel(extendParams ? extendParams.interpolatedValue : value, formatter_1);\n          }\n        });\n        itemGroup.add(labelEl);\n      }\n\n      contentGroup.add(itemGroup);\n    });\n    this.group.add(contentGroup);\n    this._titleEls = newTitleEls;\n    this._detailEls = newDetailEls;\n  };\n\n  GaugeView.type = 'gauge';\n  return GaugeView;\n}(ChartView);\n\nexport default GaugeView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport createSeriesDataSimply from '../helper/createSeriesDataSimply.js';\nimport SeriesModel from '../../model/Series.js';\n\nvar GaugeSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(GaugeSeriesModel, _super);\n\n  function GaugeSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = GaugeSeriesModel.type;\n    _this.visualStyleAccessPath = 'itemStyle';\n    return _this;\n  }\n\n  GaugeSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    return createSeriesDataSimply(this, ['value']);\n  };\n\n  GaugeSeriesModel.type = 'series.gauge';\n  GaugeSeriesModel.defaultOption = {\n    // zlevel: 0,\n    z: 2,\n    colorBy: 'data',\n    // 默认全局居中\n    center: ['50%', '50%'],\n    legendHoverLink: true,\n    radius: '75%',\n    startAngle: 225,\n    endAngle: -45,\n    clockwise: true,\n    // 最小值\n    min: 0,\n    // 最大值\n    max: 100,\n    // 分割段数，默认为10\n    splitNumber: 10,\n    // 坐标轴线\n    axisLine: {\n      // 默认显示，属性show控制显示与否\n      show: true,\n      roundCap: false,\n      lineStyle: {\n        color: [[1, '#E6EBF8']],\n        width: 10\n      }\n    },\n    // 坐标轴线\n    progress: {\n      // 默认显示，属性show控制显示与否\n      show: false,\n      overlap: true,\n      width: 10,\n      roundCap: false,\n      clip: true\n    },\n    // 分隔线\n    splitLine: {\n      // 默认显示，属性show控制显示与否\n      show: true,\n      // 属性length控制线长\n      length: 10,\n      distance: 10,\n      // 属性lineStyle（详见lineStyle）控制线条样式\n      lineStyle: {\n        color: '#63677A',\n        width: 3,\n        type: 'solid'\n      }\n    },\n    // 坐标轴小标记\n    axisTick: {\n      // 属性show控制显示与否，默认不显示\n      show: true,\n      // 每份split细分多少段\n      splitNumber: 5,\n      // 属性length控制线长\n      length: 6,\n      distance: 10,\n      // 属性lineStyle控制线条样式\n      lineStyle: {\n        color: '#63677A',\n        width: 1,\n        type: 'solid'\n      }\n    },\n    axisLabel: {\n      show: true,\n      distance: 15,\n      // formatter: null,\n      color: '#464646',\n      fontSize: 12,\n      rotate: 0\n    },\n    pointer: {\n      icon: null,\n      offsetCenter: [0, 0],\n      show: true,\n      showAbove: true,\n      length: '60%',\n      width: 6,\n      keepAspect: false\n    },\n    anchor: {\n      show: false,\n      showAbove: false,\n      size: 6,\n      icon: 'circle',\n      offsetCenter: [0, 0],\n      keepAspect: false,\n      itemStyle: {\n        color: '#fff',\n        borderWidth: 0,\n        borderColor: '#5470c6'\n      }\n    },\n    title: {\n      show: true,\n      // x, y，单位px\n      offsetCenter: [0, '20%'],\n      // 其余属性默认使用全局文本样式，详见TEXTSTYLE\n      color: '#464646',\n      fontSize: 16,\n      valueAnimation: false\n    },\n    detail: {\n      show: true,\n      backgroundColor: 'rgba(0,0,0,0)',\n      borderWidth: 0,\n      borderColor: '#ccc',\n      width: 100,\n      height: null,\n      padding: [5, 10],\n      // x, y，单位px\n      offsetCenter: [0, '40%'],\n      // formatter: null,\n      // 其余属性默认使用全局文本样式，详见TEXTSTYLE\n      color: '#464646',\n      fontSize: 30,\n      fontWeight: 'bold',\n      lineHeight: 30,\n      valueAnimation: false\n    }\n  };\n  return GaugeSeriesModel;\n}(SeriesModel);\n\nexport default GaugeSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport GaugeView from './GaugeView.js';\nimport GaugeSeriesModel from './GaugeSeries.js';\nexport function install(registers) {\n  registers.registerChartView(GaugeView);\n  registers.registerSeriesModel(GaugeSeriesModel);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as graphic from '../../util/graphic.js';\nimport { setStatesStylesFromModel, toggleHoverEmphasis } from '../../util/states.js';\nimport ChartView from '../../view/Chart.js';\nimport { setLabelLineStyle, getLabelLineStatesModels } from '../../label/labelGuideHelper.js';\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle.js';\nimport { saveOldStyle } from '../../animation/basicTransition.js';\nvar opacityAccessPath = ['itemStyle', 'opacity'];\n/**\r\n * Piece of pie including Sector, Label, LabelLine\r\n */\n\nvar FunnelPiece =\n/** @class */\nfunction (_super) {\n  __extends(FunnelPiece, _super);\n\n  function FunnelPiece(data, idx) {\n    var _this = _super.call(this) || this;\n\n    var polygon = _this;\n    var labelLine = new graphic.Polyline();\n    var text = new graphic.Text();\n    polygon.setTextContent(text);\n\n    _this.setTextGuideLine(labelLine);\n\n    _this.updateData(data, idx, true);\n\n    return _this;\n  }\n\n  FunnelPiece.prototype.updateData = function (data, idx, firstCreate) {\n    var polygon = this;\n    var seriesModel = data.hostModel;\n    var itemModel = data.getItemModel(idx);\n    var layout = data.getItemLayout(idx);\n    var emphasisModel = itemModel.getModel('emphasis');\n    var opacity = itemModel.get(opacityAccessPath);\n    opacity = opacity == null ? 1 : opacity;\n\n    if (!firstCreate) {\n      saveOldStyle(polygon);\n    } // Update common style\n\n\n    polygon.useStyle(data.getItemVisual(idx, 'style'));\n    polygon.style.lineJoin = 'round';\n\n    if (firstCreate) {\n      polygon.setShape({\n        points: layout.points\n      });\n      polygon.style.opacity = 0;\n      graphic.initProps(polygon, {\n        style: {\n          opacity: opacity\n        }\n      }, seriesModel, idx);\n    } else {\n      graphic.updateProps(polygon, {\n        style: {\n          opacity: opacity\n        },\n        shape: {\n          points: layout.points\n        }\n      }, seriesModel, idx);\n    }\n\n    setStatesStylesFromModel(polygon, itemModel);\n\n    this._updateLabel(data, idx);\n\n    toggleHoverEmphasis(this, emphasisModel.get('focus'), emphasisModel.get('blurScope'), emphasisModel.get('disabled'));\n  };\n\n  FunnelPiece.prototype._updateLabel = function (data, idx) {\n    var polygon = this;\n    var labelLine = this.getTextGuideLine();\n    var labelText = polygon.getTextContent();\n    var seriesModel = data.hostModel;\n    var itemModel = data.getItemModel(idx);\n    var layout = data.getItemLayout(idx);\n    var labelLayout = layout.label;\n    var style = data.getItemVisual(idx, 'style');\n    var visualColor = style.fill;\n    setLabelStyle( // position will not be used in setLabelStyle\n    labelText, getLabelStatesModels(itemModel), {\n      labelFetcher: data.hostModel,\n      labelDataIndex: idx,\n      defaultOpacity: style.opacity,\n      defaultText: data.getName(idx)\n    }, {\n      normal: {\n        align: labelLayout.textAlign,\n        verticalAlign: labelLayout.verticalAlign\n      }\n    });\n    polygon.setTextConfig({\n      local: true,\n      inside: !!labelLayout.inside,\n      insideStroke: visualColor,\n      // insideFill: 'auto',\n      outsideFill: visualColor\n    });\n    var linePoints = labelLayout.linePoints;\n    labelLine.setShape({\n      points: linePoints\n    });\n    polygon.textGuideLineConfig = {\n      anchor: linePoints ? new graphic.Point(linePoints[0][0], linePoints[0][1]) : null\n    }; // Make sure update style on labelText after setLabelStyle.\n    // Because setLabelStyle will replace a new style on it.\n\n    graphic.updateProps(labelText, {\n      style: {\n        x: labelLayout.x,\n        y: labelLayout.y\n      }\n    }, seriesModel, idx);\n    labelText.attr({\n      rotation: labelLayout.rotation,\n      originX: labelLayout.x,\n      originY: labelLayout.y,\n      z2: 10\n    });\n    setLabelLineStyle(polygon, getLabelLineStatesModels(itemModel), {\n      // Default use item visual color\n      stroke: visualColor\n    });\n  };\n\n  return FunnelPiece;\n}(graphic.Polygon);\n\nvar FunnelView =\n/** @class */\nfunction (_super) {\n  __extends(FunnelView, _super);\n\n  function FunnelView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = FunnelView.type;\n    _this.ignoreLabelLineUpdate = true;\n    return _this;\n  }\n\n  FunnelView.prototype.render = function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData();\n    var oldData = this._data;\n    var group = this.group;\n    data.diff(oldData).add(function (idx) {\n      var funnelPiece = new FunnelPiece(data, idx);\n      data.setItemGraphicEl(idx, funnelPiece);\n      group.add(funnelPiece);\n    }).update(function (newIdx, oldIdx) {\n      var piece = oldData.getItemGraphicEl(oldIdx);\n      piece.updateData(data, newIdx);\n      group.add(piece);\n      data.setItemGraphicEl(newIdx, piece);\n    }).remove(function (idx) {\n      var piece = oldData.getItemGraphicEl(idx);\n      graphic.removeElementWithFadeOut(piece, seriesModel, idx);\n    }).execute();\n    this._data = data;\n  };\n\n  FunnelView.prototype.remove = function () {\n    this.group.removeAll();\n    this._data = null;\n  };\n\n  FunnelView.prototype.dispose = function () {};\n\n  FunnelView.type = 'funnel';\n  return FunnelView;\n}(ChartView);\n\nexport default FunnelView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport createSeriesDataSimply from '../helper/createSeriesDataSimply.js';\nimport { defaultEmphasis } from '../../util/model.js';\nimport { makeSeriesEncodeForNameBased } from '../../data/helper/sourceHelper.js';\nimport LegendVisualProvider from '../../visual/LegendVisualProvider.js';\nimport SeriesModel from '../../model/Series.js';\n\nvar FunnelSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(FunnelSeriesModel, _super);\n\n  function FunnelSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = FunnelSeriesModel.type;\n    return _this;\n  }\n\n  FunnelSeriesModel.prototype.init = function (option) {\n    _super.prototype.init.apply(this, arguments); // Enable legend selection for each data item\n    // Use a function instead of direct access because data reference may changed\n\n\n    this.legendVisualProvider = new LegendVisualProvider(zrUtil.bind(this.getData, this), zrUtil.bind(this.getRawData, this)); // Extend labelLine emphasis\n\n    this._defaultLabelLine(option);\n  };\n\n  FunnelSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    return createSeriesDataSimply(this, {\n      coordDimensions: ['value'],\n      encodeDefaulter: zrUtil.curry(makeSeriesEncodeForNameBased, this)\n    });\n  };\n\n  FunnelSeriesModel.prototype._defaultLabelLine = function (option) {\n    // Extend labelLine emphasis\n    defaultEmphasis(option, 'labelLine', ['show']);\n    var labelLineNormalOpt = option.labelLine;\n    var labelLineEmphasisOpt = option.emphasis.labelLine; // Not show label line if `label.normal.show = false`\n\n    labelLineNormalOpt.show = labelLineNormalOpt.show && option.label.show;\n    labelLineEmphasisOpt.show = labelLineEmphasisOpt.show && option.emphasis.label.show;\n  }; // Overwrite\n\n\n  FunnelSeriesModel.prototype.getDataParams = function (dataIndex) {\n    var data = this.getData();\n\n    var params = _super.prototype.getDataParams.call(this, dataIndex);\n\n    var valueDim = data.mapDimension('value');\n    var sum = data.getSum(valueDim); // Percent is 0 if sum is 0\n\n    params.percent = !sum ? 0 : +(data.get(valueDim, dataIndex) / sum * 100).toFixed(2);\n    params.$vars.push('percent');\n    return params;\n  };\n\n  FunnelSeriesModel.type = 'series.funnel';\n  FunnelSeriesModel.defaultOption = {\n    // zlevel: 0,                  // 一级层叠\n    z: 2,\n    legendHoverLink: true,\n    colorBy: 'data',\n    left: 80,\n    top: 60,\n    right: 80,\n    bottom: 60,\n    // width: {totalWidth} - left - right,\n    // height: {totalHeight} - top - bottom,\n    // 默认取数据最小最大值\n    // min: 0,\n    // max: 100,\n    minSize: '0%',\n    maxSize: '100%',\n    sort: 'descending',\n    orient: 'vertical',\n    gap: 0,\n    funnelAlign: 'center',\n    label: {\n      show: true,\n      position: 'outer' // formatter: 标签文本格式器，同Tooltip.formatter，不支持异步回调\n\n    },\n    labelLine: {\n      show: true,\n      length: 20,\n      lineStyle: {\n        // color: 各异,\n        width: 1\n      }\n    },\n    itemStyle: {\n      // color: 各异,\n      borderColor: '#fff',\n      borderWidth: 1\n    },\n    emphasis: {\n      label: {\n        show: true\n      }\n    },\n    select: {\n      itemStyle: {\n        borderColor: '#212121'\n      }\n    }\n  };\n  return FunnelSeriesModel;\n}(SeriesModel);\n\nexport default FunnelSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as layout from '../../util/layout.js';\nimport { parsePercent, linearMap } from '../../util/number.js';\nimport { isFunction } from 'zrender/lib/core/util.js';\n\nfunction getViewRect(seriesModel, api) {\n  return layout.getLayoutRect(seriesModel.getBoxLayoutParams(), {\n    width: api.getWidth(),\n    height: api.getHeight()\n  });\n}\n\nfunction getSortedIndices(data, sort) {\n  var valueDim = data.mapDimension('value');\n  var valueArr = data.mapArray(valueDim, function (val) {\n    return val;\n  });\n  var indices = [];\n  var isAscending = sort === 'ascending';\n\n  for (var i = 0, len = data.count(); i < len; i++) {\n    indices[i] = i;\n  } // Add custom sortable function & none sortable opetion by \"options.sort\"\n\n\n  if (isFunction(sort)) {\n    indices.sort(sort);\n  } else if (sort !== 'none') {\n    indices.sort(function (a, b) {\n      return isAscending ? valueArr[a] - valueArr[b] : valueArr[b] - valueArr[a];\n    });\n  }\n\n  return indices;\n}\n\nfunction labelLayout(data) {\n  var seriesModel = data.hostModel;\n  var orient = seriesModel.get('orient');\n  data.each(function (idx) {\n    var itemModel = data.getItemModel(idx);\n    var labelModel = itemModel.getModel('label');\n    var labelPosition = labelModel.get('position');\n    var labelLineModel = itemModel.getModel('labelLine');\n    var layout = data.getItemLayout(idx);\n    var points = layout.points;\n    var isLabelInside = labelPosition === 'inner' || labelPosition === 'inside' || labelPosition === 'center' || labelPosition === 'insideLeft' || labelPosition === 'insideRight';\n    var textAlign;\n    var textX;\n    var textY;\n    var linePoints;\n\n    if (isLabelInside) {\n      if (labelPosition === 'insideLeft') {\n        textX = (points[0][0] + points[3][0]) / 2 + 5;\n        textY = (points[0][1] + points[3][1]) / 2;\n        textAlign = 'left';\n      } else if (labelPosition === 'insideRight') {\n        textX = (points[1][0] + points[2][0]) / 2 - 5;\n        textY = (points[1][1] + points[2][1]) / 2;\n        textAlign = 'right';\n      } else {\n        textX = (points[0][0] + points[1][0] + points[2][0] + points[3][0]) / 4;\n        textY = (points[0][1] + points[1][1] + points[2][1] + points[3][1]) / 4;\n        textAlign = 'center';\n      }\n\n      linePoints = [[textX, textY], [textX, textY]];\n    } else {\n      var x1 = void 0;\n      var y1 = void 0;\n      var x2 = void 0;\n      var y2 = void 0;\n      var labelLineLen = labelLineModel.get('length');\n\n      if (process.env.NODE_ENV !== 'production') {\n        if (orient === 'vertical' && ['top', 'bottom'].indexOf(labelPosition) > -1) {\n          labelPosition = 'left';\n          console.warn('Position error: Funnel chart on vertical orient dose not support top and bottom.');\n        }\n\n        if (orient === 'horizontal' && ['left', 'right'].indexOf(labelPosition) > -1) {\n          labelPosition = 'bottom';\n          console.warn('Position error: Funnel chart on horizontal orient dose not support left and right.');\n        }\n      }\n\n      if (labelPosition === 'left') {\n        // Left side\n        x1 = (points[3][0] + points[0][0]) / 2;\n        y1 = (points[3][1] + points[0][1]) / 2;\n        x2 = x1 - labelLineLen;\n        textX = x2 - 5;\n        textAlign = 'right';\n      } else if (labelPosition === 'right') {\n        // Right side\n        x1 = (points[1][0] + points[2][0]) / 2;\n        y1 = (points[1][1] + points[2][1]) / 2;\n        x2 = x1 + labelLineLen;\n        textX = x2 + 5;\n        textAlign = 'left';\n      } else if (labelPosition === 'top') {\n        // Top side\n        x1 = (points[3][0] + points[0][0]) / 2;\n        y1 = (points[3][1] + points[0][1]) / 2;\n        y2 = y1 - labelLineLen;\n        textY = y2 - 5;\n        textAlign = 'center';\n      } else if (labelPosition === 'bottom') {\n        // Bottom side\n        x1 = (points[1][0] + points[2][0]) / 2;\n        y1 = (points[1][1] + points[2][1]) / 2;\n        y2 = y1 + labelLineLen;\n        textY = y2 + 5;\n        textAlign = 'center';\n      } else if (labelPosition === 'rightTop') {\n        // RightTop side\n        x1 = orient === 'horizontal' ? points[3][0] : points[1][0];\n        y1 = orient === 'horizontal' ? points[3][1] : points[1][1];\n\n        if (orient === 'horizontal') {\n          y2 = y1 - labelLineLen;\n          textY = y2 - 5;\n          textAlign = 'center';\n        } else {\n          x2 = x1 + labelLineLen;\n          textX = x2 + 5;\n          textAlign = 'top';\n        }\n      } else if (labelPosition === 'rightBottom') {\n        // RightBottom side\n        x1 = points[2][0];\n        y1 = points[2][1];\n\n        if (orient === 'horizontal') {\n          y2 = y1 + labelLineLen;\n          textY = y2 + 5;\n          textAlign = 'center';\n        } else {\n          x2 = x1 + labelLineLen;\n          textX = x2 + 5;\n          textAlign = 'bottom';\n        }\n      } else if (labelPosition === 'leftTop') {\n        // LeftTop side\n        x1 = points[0][0];\n        y1 = orient === 'horizontal' ? points[0][1] : points[1][1];\n\n        if (orient === 'horizontal') {\n          y2 = y1 - labelLineLen;\n          textY = y2 - 5;\n          textAlign = 'center';\n        } else {\n          x2 = x1 - labelLineLen;\n          textX = x2 - 5;\n          textAlign = 'right';\n        }\n      } else if (labelPosition === 'leftBottom') {\n        // LeftBottom side\n        x1 = orient === 'horizontal' ? points[1][0] : points[3][0];\n        y1 = orient === 'horizontal' ? points[1][1] : points[2][1];\n\n        if (orient === 'horizontal') {\n          y2 = y1 + labelLineLen;\n          textY = y2 + 5;\n          textAlign = 'center';\n        } else {\n          x2 = x1 - labelLineLen;\n          textX = x2 - 5;\n          textAlign = 'right';\n        }\n      } else {\n        // Right side or Bottom side\n        x1 = (points[1][0] + points[2][0]) / 2;\n        y1 = (points[1][1] + points[2][1]) / 2;\n\n        if (orient === 'horizontal') {\n          y2 = y1 + labelLineLen;\n          textY = y2 + 5;\n          textAlign = 'center';\n        } else {\n          x2 = x1 + labelLineLen;\n          textX = x2 + 5;\n          textAlign = 'left';\n        }\n      }\n\n      if (orient === 'horizontal') {\n        x2 = x1;\n        textX = x2;\n      } else {\n        y2 = y1;\n        textY = y2;\n      }\n\n      linePoints = [[x1, y1], [x2, y2]];\n    }\n\n    layout.label = {\n      linePoints: linePoints,\n      x: textX,\n      y: textY,\n      verticalAlign: 'middle',\n      textAlign: textAlign,\n      inside: isLabelInside\n    };\n  });\n}\n\nexport default function funnelLayout(ecModel, api) {\n  ecModel.eachSeriesByType('funnel', function (seriesModel) {\n    var data = seriesModel.getData();\n    var valueDim = data.mapDimension('value');\n    var sort = seriesModel.get('sort');\n    var viewRect = getViewRect(seriesModel, api);\n    var orient = seriesModel.get('orient');\n    var viewWidth = viewRect.width;\n    var viewHeight = viewRect.height;\n    var indices = getSortedIndices(data, sort);\n    var x = viewRect.x;\n    var y = viewRect.y;\n    var sizeExtent = orient === 'horizontal' ? [parsePercent(seriesModel.get('minSize'), viewHeight), parsePercent(seriesModel.get('maxSize'), viewHeight)] : [parsePercent(seriesModel.get('minSize'), viewWidth), parsePercent(seriesModel.get('maxSize'), viewWidth)];\n    var dataExtent = data.getDataExtent(valueDim);\n    var min = seriesModel.get('min');\n    var max = seriesModel.get('max');\n\n    if (min == null) {\n      min = Math.min(dataExtent[0], 0);\n    }\n\n    if (max == null) {\n      max = dataExtent[1];\n    }\n\n    var funnelAlign = seriesModel.get('funnelAlign');\n    var gap = seriesModel.get('gap');\n    var viewSize = orient === 'horizontal' ? viewWidth : viewHeight;\n    var itemSize = (viewSize - gap * (data.count() - 1)) / data.count();\n\n    var getLinePoints = function (idx, offset) {\n      // End point index is data.count() and we assign it 0\n      if (orient === 'horizontal') {\n        var val_1 = data.get(valueDim, idx) || 0;\n        var itemHeight = linearMap(val_1, [min, max], sizeExtent, true);\n        var y0 = void 0;\n\n        switch (funnelAlign) {\n          case 'top':\n            y0 = y;\n            break;\n\n          case 'center':\n            y0 = y + (viewHeight - itemHeight) / 2;\n            break;\n\n          case 'bottom':\n            y0 = y + (viewHeight - itemHeight);\n            break;\n        }\n\n        return [[offset, y0], [offset, y0 + itemHeight]];\n      }\n\n      var val = data.get(valueDim, idx) || 0;\n      var itemWidth = linearMap(val, [min, max], sizeExtent, true);\n      var x0;\n\n      switch (funnelAlign) {\n        case 'left':\n          x0 = x;\n          break;\n\n        case 'center':\n          x0 = x + (viewWidth - itemWidth) / 2;\n          break;\n\n        case 'right':\n          x0 = x + viewWidth - itemWidth;\n          break;\n      }\n\n      return [[x0, offset], [x0 + itemWidth, offset]];\n    };\n\n    if (sort === 'ascending') {\n      // From bottom to top\n      itemSize = -itemSize;\n      gap = -gap;\n\n      if (orient === 'horizontal') {\n        x += viewWidth;\n      } else {\n        y += viewHeight;\n      }\n\n      indices = indices.reverse();\n    }\n\n    for (var i = 0; i < indices.length; i++) {\n      var idx = indices[i];\n      var nextIdx = indices[i + 1];\n      var itemModel = data.getItemModel(idx);\n\n      if (orient === 'horizontal') {\n        var width = itemModel.get(['itemStyle', 'width']);\n\n        if (width == null) {\n          width = itemSize;\n        } else {\n          width = parsePercent(width, viewWidth);\n\n          if (sort === 'ascending') {\n            width = -width;\n          }\n        }\n\n        var start = getLinePoints(idx, x);\n        var end = getLinePoints(nextIdx, x + width);\n        x += width + gap;\n        data.setItemLayout(idx, {\n          points: start.concat(end.slice().reverse())\n        });\n      } else {\n        var height = itemModel.get(['itemStyle', 'height']);\n\n        if (height == null) {\n          height = itemSize;\n        } else {\n          height = parsePercent(height, viewHeight);\n\n          if (sort === 'ascending') {\n            height = -height;\n          }\n        }\n\n        var start = getLinePoints(idx, y);\n        var end = getLinePoints(nextIdx, y + height);\n        y += height + gap;\n        data.setItemLayout(idx, {\n          points: start.concat(end.slice().reverse())\n        });\n      }\n    }\n\n    labelLayout(data);\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport FunnelView from './FunnelView.js';\nimport FunnelSeriesModel from './FunnelSeries.js';\nimport funnelLayout from './funnelLayout.js';\nimport dataFilter from '../../processor/dataFilter.js';\nexport function install(registers) {\n  registers.registerChartView(FunnelView);\n  registers.registerSeriesModel(FunnelSeriesModel);\n  registers.registerLayout(funnelLayout);\n  registers.registerProcessor(dataFilter('funnel'));\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as graphic from '../../util/graphic.js';\nimport { setStatesStylesFromModel, toggleHoverEmphasis } from '../../util/states.js';\nimport ChartView from '../../view/Chart.js';\nimport { numericToNumber } from '../../util/number.js';\nimport { eqNaN } from 'zrender/lib/core/util.js';\nimport { saveOldStyle } from '../../animation/basicTransition.js';\nvar DEFAULT_SMOOTH = 0.3;\n\nvar ParallelView =\n/** @class */\nfunction (_super) {\n  __extends(ParallelView, _super);\n\n  function ParallelView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = ParallelView.type;\n    _this._dataGroup = new graphic.Group();\n    _this._initialized = false;\n    return _this;\n  }\n\n  ParallelView.prototype.init = function () {\n    this.group.add(this._dataGroup);\n  };\n  /**\r\n   * @override\r\n   */\n\n\n  ParallelView.prototype.render = function (seriesModel, ecModel, api, payload) {\n    // Clear previously rendered progressive elements.\n    this._progressiveEls = null;\n    var dataGroup = this._dataGroup;\n    var data = seriesModel.getData();\n    var oldData = this._data;\n    var coordSys = seriesModel.coordinateSystem;\n    var dimensions = coordSys.dimensions;\n    var seriesScope = makeSeriesScope(seriesModel);\n    data.diff(oldData).add(add).update(update).remove(remove).execute();\n\n    function add(newDataIndex) {\n      var line = addEl(data, dataGroup, newDataIndex, dimensions, coordSys);\n      updateElCommon(line, data, newDataIndex, seriesScope);\n    }\n\n    function update(newDataIndex, oldDataIndex) {\n      var line = oldData.getItemGraphicEl(oldDataIndex);\n      var points = createLinePoints(data, newDataIndex, dimensions, coordSys);\n      data.setItemGraphicEl(newDataIndex, line);\n      graphic.updateProps(line, {\n        shape: {\n          points: points\n        }\n      }, seriesModel, newDataIndex);\n      saveOldStyle(line);\n      updateElCommon(line, data, newDataIndex, seriesScope);\n    }\n\n    function remove(oldDataIndex) {\n      var line = oldData.getItemGraphicEl(oldDataIndex);\n      dataGroup.remove(line);\n    } // First create\n\n\n    if (!this._initialized) {\n      this._initialized = true;\n      var clipPath = createGridClipShape(coordSys, seriesModel, function () {\n        // Callback will be invoked immediately if there is no animation\n        setTimeout(function () {\n          dataGroup.removeClipPath();\n        });\n      });\n      dataGroup.setClipPath(clipPath);\n    }\n\n    this._data = data;\n  };\n\n  ParallelView.prototype.incrementalPrepareRender = function (seriesModel, ecModel, api) {\n    this._initialized = true;\n    this._data = null;\n\n    this._dataGroup.removeAll();\n  };\n\n  ParallelView.prototype.incrementalRender = function (taskParams, seriesModel, ecModel) {\n    var data = seriesModel.getData();\n    var coordSys = seriesModel.coordinateSystem;\n    var dimensions = coordSys.dimensions;\n    var seriesScope = makeSeriesScope(seriesModel);\n    var progressiveEls = this._progressiveEls = [];\n\n    for (var dataIndex = taskParams.start; dataIndex < taskParams.end; dataIndex++) {\n      var line = addEl(data, this._dataGroup, dataIndex, dimensions, coordSys);\n      line.incremental = true;\n      updateElCommon(line, data, dataIndex, seriesScope);\n      progressiveEls.push(line);\n    }\n  };\n\n  ParallelView.prototype.remove = function () {\n    this._dataGroup && this._dataGroup.removeAll();\n    this._data = null;\n  };\n\n  ParallelView.type = 'parallel';\n  return ParallelView;\n}(ChartView);\n\nfunction createGridClipShape(coordSys, seriesModel, cb) {\n  var parallelModel = coordSys.model;\n  var rect = coordSys.getRect();\n  var rectEl = new graphic.Rect({\n    shape: {\n      x: rect.x,\n      y: rect.y,\n      width: rect.width,\n      height: rect.height\n    }\n  });\n  var dim = parallelModel.get('layout') === 'horizontal' ? 'width' : 'height';\n  rectEl.setShape(dim, 0);\n  graphic.initProps(rectEl, {\n    shape: {\n      width: rect.width,\n      height: rect.height\n    }\n  }, seriesModel, cb);\n  return rectEl;\n}\n\nfunction createLinePoints(data, dataIndex, dimensions, coordSys) {\n  var points = [];\n\n  for (var i = 0; i < dimensions.length; i++) {\n    var dimName = dimensions[i];\n    var value = data.get(data.mapDimension(dimName), dataIndex);\n\n    if (!isEmptyValue(value, coordSys.getAxis(dimName).type)) {\n      points.push(coordSys.dataToPoint(value, dimName));\n    }\n  }\n\n  return points;\n}\n\nfunction addEl(data, dataGroup, dataIndex, dimensions, coordSys) {\n  var points = createLinePoints(data, dataIndex, dimensions, coordSys);\n  var line = new graphic.Polyline({\n    shape: {\n      points: points\n    },\n    // silent: true,\n    z2: 10\n  });\n  dataGroup.add(line);\n  data.setItemGraphicEl(dataIndex, line);\n  return line;\n}\n\nfunction makeSeriesScope(seriesModel) {\n  var smooth = seriesModel.get('smooth', true);\n  smooth === true && (smooth = DEFAULT_SMOOTH);\n  smooth = numericToNumber(smooth);\n  eqNaN(smooth) && (smooth = 0);\n  return {\n    smooth: smooth\n  };\n}\n\nfunction updateElCommon(el, data, dataIndex, seriesScope) {\n  el.useStyle(data.getItemVisual(dataIndex, 'style'));\n  el.style.fill = null;\n  el.setShape('smooth', seriesScope.smooth);\n  var itemModel = data.getItemModel(dataIndex);\n  var emphasisModel = itemModel.getModel('emphasis');\n  setStatesStylesFromModel(el, itemModel, 'lineStyle');\n  toggleHoverEmphasis(el, emphasisModel.get('focus'), emphasisModel.get('blurScope'), emphasisModel.get('disabled'));\n} // function simpleDiff(oldData, newData, dimensions) {\n//     let oldLen;\n//     if (!oldData\n//         || !oldData.__plProgressive\n//         || (oldLen = oldData.count()) !== newData.count()\n//     ) {\n//         return true;\n//     }\n//     let dimLen = dimensions.length;\n//     for (let i = 0; i < oldLen; i++) {\n//         for (let j = 0; j < dimLen; j++) {\n//             if (oldData.get(dimensions[j], i) !== newData.get(dimensions[j], i)) {\n//                 return true;\n//             }\n//         }\n//     }\n//     return false;\n// }\n// FIXME put in common util?\n\n\nfunction isEmptyValue(val, axisType) {\n  return axisType === 'category' ? val == null : val == null || isNaN(val); // axisType === 'value'\n}\n\nexport default ParallelView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport { each, bind } from 'zrender/lib/core/util.js';\nimport SeriesModel from '../../model/Series.js';\nimport createSeriesData from '../helper/createSeriesData.js';\n\nvar ParallelSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(ParallelSeriesModel, _super);\n\n  function ParallelSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = ParallelSeriesModel.type;\n    _this.visualStyleAccessPath = 'lineStyle';\n    _this.visualDrawType = 'stroke';\n    return _this;\n  }\n\n  ParallelSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    return createSeriesData(null, this, {\n      useEncodeDefaulter: bind(makeDefaultEncode, null, this)\n    });\n  };\n  /**\r\n   * User can get data raw indices on 'axisAreaSelected' event received.\r\n   *\r\n   * @return Raw indices\r\n   */\n\n\n  ParallelSeriesModel.prototype.getRawIndicesByActiveState = function (activeState) {\n    var coordSys = this.coordinateSystem;\n    var data = this.getData();\n    var indices = [];\n    coordSys.eachActiveState(data, function (theActiveState, dataIndex) {\n      if (activeState === theActiveState) {\n        indices.push(data.getRawIndex(dataIndex));\n      }\n    });\n    return indices;\n  };\n\n  ParallelSeriesModel.type = 'series.parallel';\n  ParallelSeriesModel.dependencies = ['parallel'];\n  ParallelSeriesModel.defaultOption = {\n    // zlevel: 0,\n    z: 2,\n    coordinateSystem: 'parallel',\n    parallelIndex: 0,\n    label: {\n      show: false\n    },\n    inactiveOpacity: 0.05,\n    activeOpacity: 1,\n    lineStyle: {\n      width: 1,\n      opacity: 0.45,\n      type: 'solid'\n    },\n    emphasis: {\n      label: {\n        show: false\n      }\n    },\n    progressive: 500,\n    smooth: false,\n    animationEasing: 'linear'\n  };\n  return ParallelSeriesModel;\n}(SeriesModel);\n\nfunction makeDefaultEncode(seriesModel) {\n  // The mapping of parallelAxis dimension to data dimension can\n  // be specified in parallelAxis.option.dim. For example, if\n  // parallelAxis.option.dim is 'dim3', it mapping to the third\n  // dimension of data. But `data.encode` has higher priority.\n  // Moreover, parallelModel.dimension should not be regarded as data\n  // dimensions. Consider dimensions = ['dim4', 'dim2', 'dim6'];\n  var parallelModel = seriesModel.ecModel.getComponent('parallel', seriesModel.get('parallelIndex'));\n\n  if (!parallelModel) {\n    return;\n  }\n\n  var encodeDefine = {};\n  each(parallelModel.dimensions, function (axisDim) {\n    var dataDimIndex = convertDimNameToNumber(axisDim);\n    encodeDefine[axisDim] = dataDimIndex;\n  });\n  return encodeDefine;\n}\n\nfunction convertDimNameToNumber(dimName) {\n  return +dimName.replace('dim', '');\n}\n\nexport default ParallelSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nvar opacityAccessPath = ['lineStyle', 'opacity'];\nvar parallelVisual = {\n  seriesType: 'parallel',\n  reset: function (seriesModel, ecModel) {\n    var coordSys = seriesModel.coordinateSystem;\n    var opacityMap = {\n      normal: seriesModel.get(['lineStyle', 'opacity']),\n      active: seriesModel.get('activeOpacity'),\n      inactive: seriesModel.get('inactiveOpacity')\n    };\n    return {\n      progress: function (params, data) {\n        coordSys.eachActiveState(data, function (activeState, dataIndex) {\n          var opacity = opacityMap[activeState];\n\n          if (activeState === 'normal' && data.hasItemOption) {\n            var itemOpacity = data.getItemModel(dataIndex).get(opacityAccessPath, true);\n            itemOpacity != null && (opacity = itemOpacity);\n          }\n\n          var existsStyle = data.ensureUniqueItemVisual(dataIndex, 'style');\n          existsStyle.opacity = opacity;\n        }, params.start, params.end);\n      }\n    };\n  }\n};\nexport default parallelVisual;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { use } from '../../extension.js';\nimport ParallelView from './ParallelView.js';\nimport ParallelSeriesModel from './ParallelSeries.js';\nimport parallelVisual from './parallelVisual.js';\nimport { install as installParallelComponent } from '../../component/parallel/install.js';\nexport function install(registers) {\n  use(installParallelComponent);\n  registers.registerChartView(ParallelView);\n  registers.registerSeriesModel(ParallelSeriesModel);\n  registers.registerVisual(registers.PRIORITY.VISUAL.BRUSH, parallelVisual);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as graphic from '../../util/graphic.js';\nimport { enterEmphasis, leaveEmphasis, toggleHoverEmphasis, setStatesStylesFromModel } from '../../util/states.js';\nimport ChartView from '../../view/Chart.js';\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { isString, retrieve3 } from 'zrender/lib/core/util.js';\n\nvar SankeyPathShape =\n/** @class */\nfunction () {\n  function SankeyPathShape() {\n    this.x1 = 0;\n    this.y1 = 0;\n    this.x2 = 0;\n    this.y2 = 0;\n    this.cpx1 = 0;\n    this.cpy1 = 0;\n    this.cpx2 = 0;\n    this.cpy2 = 0;\n    this.extent = 0;\n  }\n\n  return SankeyPathShape;\n}();\n\nvar SankeyPath =\n/** @class */\nfunction (_super) {\n  __extends(SankeyPath, _super);\n\n  function SankeyPath(opts) {\n    return _super.call(this, opts) || this;\n  }\n\n  SankeyPath.prototype.getDefaultShape = function () {\n    return new SankeyPathShape();\n  };\n\n  SankeyPath.prototype.buildPath = function (ctx, shape) {\n    var extent = shape.extent;\n    ctx.moveTo(shape.x1, shape.y1);\n    ctx.bezierCurveTo(shape.cpx1, shape.cpy1, shape.cpx2, shape.cpy2, shape.x2, shape.y2);\n\n    if (shape.orient === 'vertical') {\n      ctx.lineTo(shape.x2 + extent, shape.y2);\n      ctx.bezierCurveTo(shape.cpx2 + extent, shape.cpy2, shape.cpx1 + extent, shape.cpy1, shape.x1 + extent, shape.y1);\n    } else {\n      ctx.lineTo(shape.x2, shape.y2 + extent);\n      ctx.bezierCurveTo(shape.cpx2, shape.cpy2 + extent, shape.cpx1, shape.cpy1 + extent, shape.x1, shape.y1 + extent);\n    }\n\n    ctx.closePath();\n  };\n\n  SankeyPath.prototype.highlight = function () {\n    enterEmphasis(this);\n  };\n\n  SankeyPath.prototype.downplay = function () {\n    leaveEmphasis(this);\n  };\n\n  return SankeyPath;\n}(graphic.Path);\n\nvar SankeyView =\n/** @class */\nfunction (_super) {\n  __extends(SankeyView, _super);\n\n  function SankeyView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = SankeyView.type;\n    _this._focusAdjacencyDisabled = false;\n    return _this;\n  }\n\n  SankeyView.prototype.render = function (seriesModel, ecModel, api) {\n    var sankeyView = this;\n    var graph = seriesModel.getGraph();\n    var group = this.group;\n    var layoutInfo = seriesModel.layoutInfo; // view width\n\n    var width = layoutInfo.width; // view height\n\n    var height = layoutInfo.height;\n    var nodeData = seriesModel.getData();\n    var edgeData = seriesModel.getData('edge');\n    var orient = seriesModel.get('orient');\n    this._model = seriesModel;\n    group.removeAll();\n    group.x = layoutInfo.x;\n    group.y = layoutInfo.y; // generate a bezire Curve for each edge\n\n    graph.eachEdge(function (edge) {\n      var curve = new SankeyPath();\n      var ecData = getECData(curve);\n      ecData.dataIndex = edge.dataIndex;\n      ecData.seriesIndex = seriesModel.seriesIndex;\n      ecData.dataType = 'edge';\n      var edgeModel = edge.getModel();\n      var lineStyleModel = edgeModel.getModel('lineStyle');\n      var curvature = lineStyleModel.get('curveness');\n      var n1Layout = edge.node1.getLayout();\n      var node1Model = edge.node1.getModel();\n      var dragX1 = node1Model.get('localX');\n      var dragY1 = node1Model.get('localY');\n      var n2Layout = edge.node2.getLayout();\n      var node2Model = edge.node2.getModel();\n      var dragX2 = node2Model.get('localX');\n      var dragY2 = node2Model.get('localY');\n      var edgeLayout = edge.getLayout();\n      var x1;\n      var y1;\n      var x2;\n      var y2;\n      var cpx1;\n      var cpy1;\n      var cpx2;\n      var cpy2;\n      curve.shape.extent = Math.max(1, edgeLayout.dy);\n      curve.shape.orient = orient;\n\n      if (orient === 'vertical') {\n        x1 = (dragX1 != null ? dragX1 * width : n1Layout.x) + edgeLayout.sy;\n        y1 = (dragY1 != null ? dragY1 * height : n1Layout.y) + n1Layout.dy;\n        x2 = (dragX2 != null ? dragX2 * width : n2Layout.x) + edgeLayout.ty;\n        y2 = dragY2 != null ? dragY2 * height : n2Layout.y;\n        cpx1 = x1;\n        cpy1 = y1 * (1 - curvature) + y2 * curvature;\n        cpx2 = x2;\n        cpy2 = y1 * curvature + y2 * (1 - curvature);\n      } else {\n        x1 = (dragX1 != null ? dragX1 * width : n1Layout.x) + n1Layout.dx;\n        y1 = (dragY1 != null ? dragY1 * height : n1Layout.y) + edgeLayout.sy;\n        x2 = dragX2 != null ? dragX2 * width : n2Layout.x;\n        y2 = (dragY2 != null ? dragY2 * height : n2Layout.y) + edgeLayout.ty;\n        cpx1 = x1 * (1 - curvature) + x2 * curvature;\n        cpy1 = y1;\n        cpx2 = x1 * curvature + x2 * (1 - curvature);\n        cpy2 = y2;\n      }\n\n      curve.setShape({\n        x1: x1,\n        y1: y1,\n        x2: x2,\n        y2: y2,\n        cpx1: cpx1,\n        cpy1: cpy1,\n        cpx2: cpx2,\n        cpy2: cpy2\n      });\n      curve.useStyle(lineStyleModel.getItemStyle()); // Special color, use source node color or target node color\n\n      applyCurveStyle(curve.style, orient, edge);\n      var defaultEdgeLabelText = \"\" + edgeModel.get('value');\n      var edgeLabelStateModels = getLabelStatesModels(edgeModel, 'edgeLabel');\n      setLabelStyle(curve, edgeLabelStateModels, {\n        labelFetcher: {\n          getFormattedLabel: function (dataIndex, stateName, dataType, labelDimIndex, formatter, extendParams) {\n            return seriesModel.getFormattedLabel(dataIndex, stateName, 'edge', labelDimIndex, // ensure edgeLabel formatter is provided\n            // to prevent the inheritance from `label.formatter` of the series\n            retrieve3(formatter, edgeLabelStateModels.normal && edgeLabelStateModels.normal.get('formatter'), defaultEdgeLabelText), extendParams);\n          }\n        },\n        labelDataIndex: edge.dataIndex,\n        defaultText: defaultEdgeLabelText\n      });\n      curve.setTextConfig({\n        position: 'inside'\n      });\n      var emphasisModel = edgeModel.getModel('emphasis');\n      setStatesStylesFromModel(curve, edgeModel, 'lineStyle', function (model) {\n        var style = model.getItemStyle();\n        applyCurveStyle(style, orient, edge);\n        return style;\n      });\n      group.add(curve);\n      edgeData.setItemGraphicEl(edge.dataIndex, curve);\n      var focus = emphasisModel.get('focus');\n      toggleHoverEmphasis(curve, focus === 'adjacency' ? edge.getAdjacentDataIndices() : focus === 'trajectory' ? edge.getTrajectoryDataIndices() : focus, emphasisModel.get('blurScope'), emphasisModel.get('disabled'));\n    }); // Generate a rect for each node\n\n    graph.eachNode(function (node) {\n      var layout = node.getLayout();\n      var itemModel = node.getModel();\n      var dragX = itemModel.get('localX');\n      var dragY = itemModel.get('localY');\n      var emphasisModel = itemModel.getModel('emphasis');\n      var rect = new graphic.Rect({\n        shape: {\n          x: dragX != null ? dragX * width : layout.x,\n          y: dragY != null ? dragY * height : layout.y,\n          width: layout.dx,\n          height: layout.dy\n        },\n        style: itemModel.getModel('itemStyle').getItemStyle(),\n        z2: 10\n      });\n      setLabelStyle(rect, getLabelStatesModels(itemModel), {\n        labelFetcher: {\n          getFormattedLabel: function (dataIndex, stateName) {\n            return seriesModel.getFormattedLabel(dataIndex, stateName, 'node');\n          }\n        },\n        labelDataIndex: node.dataIndex,\n        defaultText: node.id\n      });\n      rect.disableLabelAnimation = true;\n      rect.setStyle('fill', node.getVisual('color'));\n      rect.setStyle('decal', node.getVisual('style').decal);\n      setStatesStylesFromModel(rect, itemModel);\n      group.add(rect);\n      nodeData.setItemGraphicEl(node.dataIndex, rect);\n      getECData(rect).dataType = 'node';\n      var focus = emphasisModel.get('focus');\n      toggleHoverEmphasis(rect, focus === 'adjacency' ? node.getAdjacentDataIndices() : focus === 'trajectory' ? node.getTrajectoryDataIndices() : focus, emphasisModel.get('blurScope'), emphasisModel.get('disabled'));\n    });\n    nodeData.eachItemGraphicEl(function (el, dataIndex) {\n      var itemModel = nodeData.getItemModel(dataIndex);\n\n      if (itemModel.get('draggable')) {\n        el.drift = function (dx, dy) {\n          sankeyView._focusAdjacencyDisabled = true;\n          this.shape.x += dx;\n          this.shape.y += dy;\n          this.dirty();\n          api.dispatchAction({\n            type: 'dragNode',\n            seriesId: seriesModel.id,\n            dataIndex: nodeData.getRawIndex(dataIndex),\n            localX: this.shape.x / width,\n            localY: this.shape.y / height\n          });\n        };\n\n        el.ondragend = function () {\n          sankeyView._focusAdjacencyDisabled = false;\n        };\n\n        el.draggable = true;\n        el.cursor = 'move';\n      }\n    });\n\n    if (!this._data && seriesModel.isAnimationEnabled()) {\n      group.setClipPath(createGridClipShape(group.getBoundingRect(), seriesModel, function () {\n        group.removeClipPath();\n      }));\n    }\n\n    this._data = seriesModel.getData();\n  };\n\n  SankeyView.prototype.dispose = function () {};\n\n  SankeyView.type = 'sankey';\n  return SankeyView;\n}(ChartView);\n/**\r\n * Special color, use source node color or target node color\r\n * @param curveProps curve's style to parse\r\n * @param orient direction\r\n * @param edge current curve data\r\n */\n\n\nfunction applyCurveStyle(curveProps, orient, edge) {\n  switch (curveProps.fill) {\n    case 'source':\n      curveProps.fill = edge.node1.getVisual('color');\n      curveProps.decal = edge.node1.getVisual('style').decal;\n      break;\n\n    case 'target':\n      curveProps.fill = edge.node2.getVisual('color');\n      curveProps.decal = edge.node2.getVisual('style').decal;\n      break;\n\n    case 'gradient':\n      var sourceColor = edge.node1.getVisual('color');\n      var targetColor = edge.node2.getVisual('color');\n\n      if (isString(sourceColor) && isString(targetColor)) {\n        curveProps.fill = new graphic.LinearGradient(0, 0, +(orient === 'horizontal'), +(orient === 'vertical'), [{\n          color: sourceColor,\n          offset: 0\n        }, {\n          color: targetColor,\n          offset: 1\n        }]);\n      }\n\n  }\n} // Add animation to the view\n\n\nfunction createGridClipShape(rect, seriesModel, cb) {\n  var rectEl = new graphic.Rect({\n    shape: {\n      x: rect.x - 10,\n      y: rect.y - 10,\n      width: 0,\n      height: rect.height + 20\n    }\n  });\n  graphic.initProps(rectEl, {\n    shape: {\n      width: rect.width + 20\n    }\n  }, seriesModel, cb);\n  return rectEl;\n}\n\nexport default SankeyView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport SeriesModel from '../../model/Series.js';\nimport createGraphFromNodeEdge from '../helper/createGraphFromNodeEdge.js';\nimport Model from '../../model/Model.js';\nimport { createTooltipMarkup } from '../../component/tooltip/tooltipMarkup.js';\n\nvar SankeySeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(SankeySeriesModel, _super);\n\n  function SankeySeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = SankeySeriesModel.type;\n    return _this;\n  }\n  /**\r\n   * Init a graph data structure from data in option series\r\n   */\n\n\n  SankeySeriesModel.prototype.getInitialData = function (option, ecModel) {\n    var links = option.edges || option.links;\n    var nodes = option.data || option.nodes;\n    var levels = option.levels;\n    this.levelModels = [];\n    var levelModels = this.levelModels;\n\n    for (var i = 0; i < levels.length; i++) {\n      if (levels[i].depth != null && levels[i].depth >= 0) {\n        levelModels[levels[i].depth] = new Model(levels[i], this, ecModel);\n      } else {\n        if (process.env.NODE_ENV !== 'production') {\n          throw new Error('levels[i].depth is mandatory and should be natural number');\n        }\n      }\n    }\n\n    if (nodes && links) {\n      var graph = createGraphFromNodeEdge(nodes, links, this, true, beforeLink);\n      return graph.data;\n    }\n\n    function beforeLink(nodeData, edgeData) {\n      nodeData.wrapMethod('getItemModel', function (model, idx) {\n        var seriesModel = model.parentModel;\n        var layout = seriesModel.getData().getItemLayout(idx);\n\n        if (layout) {\n          var nodeDepth = layout.depth;\n          var levelModel = seriesModel.levelModels[nodeDepth];\n\n          if (levelModel) {\n            model.parentModel = levelModel;\n          }\n        }\n\n        return model;\n      });\n      edgeData.wrapMethod('getItemModel', function (model, idx) {\n        var seriesModel = model.parentModel;\n        var edge = seriesModel.getGraph().getEdgeByIndex(idx);\n        var layout = edge.node1.getLayout();\n\n        if (layout) {\n          var depth = layout.depth;\n          var levelModel = seriesModel.levelModels[depth];\n\n          if (levelModel) {\n            model.parentModel = levelModel;\n          }\n        }\n\n        return model;\n      });\n    }\n  };\n\n  SankeySeriesModel.prototype.setNodePosition = function (dataIndex, localPosition) {\n    var nodes = this.option.data || this.option.nodes;\n    var dataItem = nodes[dataIndex];\n    dataItem.localX = localPosition[0];\n    dataItem.localY = localPosition[1];\n  };\n  /**\r\n   * Return the graphic data structure\r\n   *\r\n   * @return graphic data structure\r\n   */\n\n\n  SankeySeriesModel.prototype.getGraph = function () {\n    return this.getData().graph;\n  };\n  /**\r\n   * Get edge data of graphic data structure\r\n   *\r\n   * @return data structure of list\r\n   */\n\n\n  SankeySeriesModel.prototype.getEdgeData = function () {\n    return this.getGraph().edgeData;\n  };\n\n  SankeySeriesModel.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\n    function noValue(val) {\n      return isNaN(val) || val == null;\n    } // dataType === 'node' or empty do not show tooltip by default\n\n\n    if (dataType === 'edge') {\n      var params = this.getDataParams(dataIndex, dataType);\n      var rawDataOpt = params.data;\n      var edgeValue = params.value;\n      var edgeName = rawDataOpt.source + ' -- ' + rawDataOpt.target;\n      return createTooltipMarkup('nameValue', {\n        name: edgeName,\n        value: edgeValue,\n        noValue: noValue(edgeValue)\n      });\n    } // dataType === 'node'\n    else {\n        var node = this.getGraph().getNodeByIndex(dataIndex);\n        var value = node.getLayout().value;\n        var name_1 = this.getDataParams(dataIndex, dataType).data.name;\n        return createTooltipMarkup('nameValue', {\n          name: name_1 != null ? name_1 + '' : null,\n          value: value,\n          noValue: noValue(value)\n        });\n      }\n  };\n\n  SankeySeriesModel.prototype.optionUpdated = function () {}; // Override Series.getDataParams()\n\n\n  SankeySeriesModel.prototype.getDataParams = function (dataIndex, dataType) {\n    var params = _super.prototype.getDataParams.call(this, dataIndex, dataType);\n\n    if (params.value == null && dataType === 'node') {\n      var node = this.getGraph().getNodeByIndex(dataIndex);\n      var nodeValue = node.getLayout().value;\n      params.value = nodeValue;\n    }\n\n    return params;\n  };\n\n  SankeySeriesModel.type = 'series.sankey';\n  SankeySeriesModel.defaultOption = {\n    // zlevel: 0,\n    z: 2,\n    coordinateSystem: 'view',\n    left: '5%',\n    top: '5%',\n    right: '20%',\n    bottom: '5%',\n    orient: 'horizontal',\n    nodeWidth: 20,\n    nodeGap: 8,\n    draggable: true,\n    layoutIterations: 32,\n    label: {\n      show: true,\n      position: 'right',\n      fontSize: 12\n    },\n    edgeLabel: {\n      show: false,\n      fontSize: 12\n    },\n    levels: [],\n    nodeAlign: 'justify',\n    lineStyle: {\n      color: '#314656',\n      opacity: 0.2,\n      curveness: 0.5\n    },\n    emphasis: {\n      label: {\n        show: true\n      },\n      lineStyle: {\n        opacity: 0.5\n      }\n    },\n    select: {\n      itemStyle: {\n        borderColor: '#212121'\n      }\n    },\n    animationEasing: 'linear',\n    animationDuration: 1000\n  };\n  return SankeySeriesModel;\n}(SeriesModel);\n\nexport default SankeySeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as layout from '../../util/layout.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { groupData } from '../../util/model.js';\nexport default function sankeyLayout(ecModel, api) {\n  ecModel.eachSeriesByType('sankey', function (seriesModel) {\n    var nodeWidth = seriesModel.get('nodeWidth');\n    var nodeGap = seriesModel.get('nodeGap');\n    var layoutInfo = getViewRect(seriesModel, api);\n    seriesModel.layoutInfo = layoutInfo;\n    var width = layoutInfo.width;\n    var height = layoutInfo.height;\n    var graph = seriesModel.getGraph();\n    var nodes = graph.nodes;\n    var edges = graph.edges;\n    computeNodeValues(nodes);\n    var filteredNodes = zrUtil.filter(nodes, function (node) {\n      return node.getLayout().value === 0;\n    });\n    var iterations = filteredNodes.length !== 0 ? 0 : seriesModel.get('layoutIterations');\n    var orient = seriesModel.get('orient');\n    var nodeAlign = seriesModel.get('nodeAlign');\n    layoutSankey(nodes, edges, nodeWidth, nodeGap, width, height, iterations, orient, nodeAlign);\n  });\n}\n/**\r\n * Get the layout position of the whole view\r\n */\n\nfunction getViewRect(seriesModel, api) {\n  return layout.getLayoutRect(seriesModel.getBoxLayoutParams(), {\n    width: api.getWidth(),\n    height: api.getHeight()\n  });\n}\n\nfunction layoutSankey(nodes, edges, nodeWidth, nodeGap, width, height, iterations, orient, nodeAlign) {\n  computeNodeBreadths(nodes, edges, nodeWidth, width, height, orient, nodeAlign);\n  computeNodeDepths(nodes, edges, height, width, nodeGap, iterations, orient);\n  computeEdgeDepths(nodes, orient);\n}\n/**\r\n * Compute the value of each node by summing the associated edge's value\r\n */\n\n\nfunction computeNodeValues(nodes) {\n  zrUtil.each(nodes, function (node) {\n    var value1 = sum(node.outEdges, getEdgeValue);\n    var value2 = sum(node.inEdges, getEdgeValue);\n    var nodeRawValue = node.getValue() || 0;\n    var value = Math.max(value1, value2, nodeRawValue);\n    node.setLayout({\n      value: value\n    }, true);\n  });\n}\n/**\r\n * Compute the x-position for each node.\r\n *\r\n * Here we use Kahn algorithm to detect cycle when we traverse\r\n * the node to computer the initial x position.\r\n */\n\n\nfunction computeNodeBreadths(nodes, edges, nodeWidth, width, height, orient, nodeAlign) {\n  // Used to mark whether the edge is deleted. if it is deleted,\n  // the value is 0, otherwise it is 1.\n  var remainEdges = []; // Storage each node's indegree.\n\n  var indegreeArr = []; // Used to storage the node with indegree is equal to 0.\n\n  var zeroIndegrees = [];\n  var nextTargetNode = [];\n  var x = 0; // let kx = 0;\n\n  for (var i = 0; i < edges.length; i++) {\n    remainEdges[i] = 1;\n  }\n\n  for (var i = 0; i < nodes.length; i++) {\n    indegreeArr[i] = nodes[i].inEdges.length;\n\n    if (indegreeArr[i] === 0) {\n      zeroIndegrees.push(nodes[i]);\n    }\n  }\n\n  var maxNodeDepth = -1; // Traversing nodes using topological sorting to calculate the\n  // horizontal(if orient === 'horizontal') or vertical(if orient === 'vertical')\n  // position of the nodes.\n\n  while (zeroIndegrees.length) {\n    for (var idx = 0; idx < zeroIndegrees.length; idx++) {\n      var node = zeroIndegrees[idx];\n      var item = node.hostGraph.data.getRawDataItem(node.dataIndex);\n      var isItemDepth = item.depth != null && item.depth >= 0;\n\n      if (isItemDepth && item.depth > maxNodeDepth) {\n        maxNodeDepth = item.depth;\n      }\n\n      node.setLayout({\n        depth: isItemDepth ? item.depth : x\n      }, true);\n      orient === 'vertical' ? node.setLayout({\n        dy: nodeWidth\n      }, true) : node.setLayout({\n        dx: nodeWidth\n      }, true);\n\n      for (var edgeIdx = 0; edgeIdx < node.outEdges.length; edgeIdx++) {\n        var edge = node.outEdges[edgeIdx];\n        var indexEdge = edges.indexOf(edge);\n        remainEdges[indexEdge] = 0;\n        var targetNode = edge.node2;\n        var nodeIndex = nodes.indexOf(targetNode);\n\n        if (--indegreeArr[nodeIndex] === 0 && nextTargetNode.indexOf(targetNode) < 0) {\n          nextTargetNode.push(targetNode);\n        }\n      }\n    }\n\n    ++x;\n    zeroIndegrees = nextTargetNode;\n    nextTargetNode = [];\n  }\n\n  for (var i = 0; i < remainEdges.length; i++) {\n    if (remainEdges[i] === 1) {\n      throw new Error('Sankey is a DAG, the original data has cycle!');\n    }\n  }\n\n  var maxDepth = maxNodeDepth > x - 1 ? maxNodeDepth : x - 1;\n\n  if (nodeAlign && nodeAlign !== 'left') {\n    adjustNodeWithNodeAlign(nodes, nodeAlign, orient, maxDepth);\n  }\n\n  var kx = orient === 'vertical' ? (height - nodeWidth) / maxDepth : (width - nodeWidth) / maxDepth;\n  scaleNodeBreadths(nodes, kx, orient);\n}\n\nfunction isNodeDepth(node) {\n  var item = node.hostGraph.data.getRawDataItem(node.dataIndex);\n  return item.depth != null && item.depth >= 0;\n}\n\nfunction adjustNodeWithNodeAlign(nodes, nodeAlign, orient, maxDepth) {\n  if (nodeAlign === 'right') {\n    var nextSourceNode = [];\n    var remainNodes = nodes;\n    var nodeHeight = 0;\n\n    while (remainNodes.length) {\n      for (var i = 0; i < remainNodes.length; i++) {\n        var node = remainNodes[i];\n        node.setLayout({\n          skNodeHeight: nodeHeight\n        }, true);\n\n        for (var j = 0; j < node.inEdges.length; j++) {\n          var edge = node.inEdges[j];\n\n          if (nextSourceNode.indexOf(edge.node1) < 0) {\n            nextSourceNode.push(edge.node1);\n          }\n        }\n      }\n\n      remainNodes = nextSourceNode;\n      nextSourceNode = [];\n      ++nodeHeight;\n    }\n\n    zrUtil.each(nodes, function (node) {\n      if (!isNodeDepth(node)) {\n        node.setLayout({\n          depth: Math.max(0, maxDepth - node.getLayout().skNodeHeight)\n        }, true);\n      }\n    });\n  } else if (nodeAlign === 'justify') {\n    moveSinksRight(nodes, maxDepth);\n  }\n}\n/**\r\n * All the node without outEgdes are assigned maximum x-position and\r\n *     be aligned in the last column.\r\n *\r\n * @param nodes.  node of sankey view.\r\n * @param maxDepth.  use to assign to node without outEdges as x-position.\r\n */\n\n\nfunction moveSinksRight(nodes, maxDepth) {\n  zrUtil.each(nodes, function (node) {\n    if (!isNodeDepth(node) && !node.outEdges.length) {\n      node.setLayout({\n        depth: maxDepth\n      }, true);\n    }\n  });\n}\n/**\r\n * Scale node x-position to the width\r\n *\r\n * @param nodes  node of sankey view\r\n * @param kx   multiple used to scale nodes\r\n */\n\n\nfunction scaleNodeBreadths(nodes, kx, orient) {\n  zrUtil.each(nodes, function (node) {\n    var nodeDepth = node.getLayout().depth * kx;\n    orient === 'vertical' ? node.setLayout({\n      y: nodeDepth\n    }, true) : node.setLayout({\n      x: nodeDepth\n    }, true);\n  });\n}\n/**\r\n * Using Gauss-Seidel iterations method to compute the node depth(y-position)\r\n *\r\n * @param nodes  node of sankey view\r\n * @param edges  edge of sankey view\r\n * @param height  the whole height of the area to draw the view\r\n * @param nodeGap  the vertical distance between two nodes\r\n *     in the same column.\r\n * @param iterations  the number of iterations for the algorithm\r\n */\n\n\nfunction computeNodeDepths(nodes, edges, height, width, nodeGap, iterations, orient) {\n  var nodesByBreadth = prepareNodesByBreadth(nodes, orient);\n  initializeNodeDepth(nodesByBreadth, edges, height, width, nodeGap, orient);\n  resolveCollisions(nodesByBreadth, nodeGap, height, width, orient);\n\n  for (var alpha = 1; iterations > 0; iterations--) {\n    // 0.99 is a experience parameter, ensure that each iterations of\n    // changes as small as possible.\n    alpha *= 0.99;\n    relaxRightToLeft(nodesByBreadth, alpha, orient);\n    resolveCollisions(nodesByBreadth, nodeGap, height, width, orient);\n    relaxLeftToRight(nodesByBreadth, alpha, orient);\n    resolveCollisions(nodesByBreadth, nodeGap, height, width, orient);\n  }\n}\n\nfunction prepareNodesByBreadth(nodes, orient) {\n  var nodesByBreadth = [];\n  var keyAttr = orient === 'vertical' ? 'y' : 'x';\n  var groupResult = groupData(nodes, function (node) {\n    return node.getLayout()[keyAttr];\n  });\n  groupResult.keys.sort(function (a, b) {\n    return a - b;\n  });\n  zrUtil.each(groupResult.keys, function (key) {\n    nodesByBreadth.push(groupResult.buckets.get(key));\n  });\n  return nodesByBreadth;\n}\n/**\r\n * Compute the original y-position for each node\r\n */\n\n\nfunction initializeNodeDepth(nodesByBreadth, edges, height, width, nodeGap, orient) {\n  var minKy = Infinity;\n  zrUtil.each(nodesByBreadth, function (nodes) {\n    var n = nodes.length;\n    var sum = 0;\n    zrUtil.each(nodes, function (node) {\n      sum += node.getLayout().value;\n    });\n    var ky = orient === 'vertical' ? (width - (n - 1) * nodeGap) / sum : (height - (n - 1) * nodeGap) / sum;\n\n    if (ky < minKy) {\n      minKy = ky;\n    }\n  });\n  zrUtil.each(nodesByBreadth, function (nodes) {\n    zrUtil.each(nodes, function (node, i) {\n      var nodeDy = node.getLayout().value * minKy;\n\n      if (orient === 'vertical') {\n        node.setLayout({\n          x: i\n        }, true);\n        node.setLayout({\n          dx: nodeDy\n        }, true);\n      } else {\n        node.setLayout({\n          y: i\n        }, true);\n        node.setLayout({\n          dy: nodeDy\n        }, true);\n      }\n    });\n  });\n  zrUtil.each(edges, function (edge) {\n    var edgeDy = +edge.getValue() * minKy;\n    edge.setLayout({\n      dy: edgeDy\n    }, true);\n  });\n}\n/**\r\n * Resolve the collision of initialized depth (y-position)\r\n */\n\n\nfunction resolveCollisions(nodesByBreadth, nodeGap, height, width, orient) {\n  var keyAttr = orient === 'vertical' ? 'x' : 'y';\n  zrUtil.each(nodesByBreadth, function (nodes) {\n    nodes.sort(function (a, b) {\n      return a.getLayout()[keyAttr] - b.getLayout()[keyAttr];\n    });\n    var nodeX;\n    var node;\n    var dy;\n    var y0 = 0;\n    var n = nodes.length;\n    var nodeDyAttr = orient === 'vertical' ? 'dx' : 'dy';\n\n    for (var i = 0; i < n; i++) {\n      node = nodes[i];\n      dy = y0 - node.getLayout()[keyAttr];\n\n      if (dy > 0) {\n        nodeX = node.getLayout()[keyAttr] + dy;\n        orient === 'vertical' ? node.setLayout({\n          x: nodeX\n        }, true) : node.setLayout({\n          y: nodeX\n        }, true);\n      }\n\n      y0 = node.getLayout()[keyAttr] + node.getLayout()[nodeDyAttr] + nodeGap;\n    }\n\n    var viewWidth = orient === 'vertical' ? width : height; // If the bottommost node goes outside the bounds, push it back up\n\n    dy = y0 - nodeGap - viewWidth;\n\n    if (dy > 0) {\n      nodeX = node.getLayout()[keyAttr] - dy;\n      orient === 'vertical' ? node.setLayout({\n        x: nodeX\n      }, true) : node.setLayout({\n        y: nodeX\n      }, true);\n      y0 = nodeX;\n\n      for (var i = n - 2; i >= 0; --i) {\n        node = nodes[i];\n        dy = node.getLayout()[keyAttr] + node.getLayout()[nodeDyAttr] + nodeGap - y0;\n\n        if (dy > 0) {\n          nodeX = node.getLayout()[keyAttr] - dy;\n          orient === 'vertical' ? node.setLayout({\n            x: nodeX\n          }, true) : node.setLayout({\n            y: nodeX\n          }, true);\n        }\n\n        y0 = node.getLayout()[keyAttr];\n      }\n    }\n  });\n}\n/**\r\n * Change the y-position of the nodes, except most the right side nodes\r\n * @param nodesByBreadth\r\n * @param alpha  parameter used to adjust the nodes y-position\r\n */\n\n\nfunction relaxRightToLeft(nodesByBreadth, alpha, orient) {\n  zrUtil.each(nodesByBreadth.slice().reverse(), function (nodes) {\n    zrUtil.each(nodes, function (node) {\n      if (node.outEdges.length) {\n        var y = sum(node.outEdges, weightedTarget, orient) / sum(node.outEdges, getEdgeValue);\n\n        if (isNaN(y)) {\n          var len = node.outEdges.length;\n          y = len ? sum(node.outEdges, centerTarget, orient) / len : 0;\n        }\n\n        if (orient === 'vertical') {\n          var nodeX = node.getLayout().x + (y - center(node, orient)) * alpha;\n          node.setLayout({\n            x: nodeX\n          }, true);\n        } else {\n          var nodeY = node.getLayout().y + (y - center(node, orient)) * alpha;\n          node.setLayout({\n            y: nodeY\n          }, true);\n        }\n      }\n    });\n  });\n}\n\nfunction weightedTarget(edge, orient) {\n  return center(edge.node2, orient) * edge.getValue();\n}\n\nfunction centerTarget(edge, orient) {\n  return center(edge.node2, orient);\n}\n\nfunction weightedSource(edge, orient) {\n  return center(edge.node1, orient) * edge.getValue();\n}\n\nfunction centerSource(edge, orient) {\n  return center(edge.node1, orient);\n}\n\nfunction center(node, orient) {\n  return orient === 'vertical' ? node.getLayout().x + node.getLayout().dx / 2 : node.getLayout().y + node.getLayout().dy / 2;\n}\n\nfunction getEdgeValue(edge) {\n  return edge.getValue();\n}\n\nfunction sum(array, cb, orient) {\n  var sum = 0;\n  var len = array.length;\n  var i = -1;\n\n  while (++i < len) {\n    var value = +cb(array[i], orient);\n\n    if (!isNaN(value)) {\n      sum += value;\n    }\n  }\n\n  return sum;\n}\n/**\r\n * Change the y-position of the nodes, except most the left side nodes\r\n */\n\n\nfunction relaxLeftToRight(nodesByBreadth, alpha, orient) {\n  zrUtil.each(nodesByBreadth, function (nodes) {\n    zrUtil.each(nodes, function (node) {\n      if (node.inEdges.length) {\n        var y = sum(node.inEdges, weightedSource, orient) / sum(node.inEdges, getEdgeValue);\n\n        if (isNaN(y)) {\n          var len = node.inEdges.length;\n          y = len ? sum(node.inEdges, centerSource, orient) / len : 0;\n        }\n\n        if (orient === 'vertical') {\n          var nodeX = node.getLayout().x + (y - center(node, orient)) * alpha;\n          node.setLayout({\n            x: nodeX\n          }, true);\n        } else {\n          var nodeY = node.getLayout().y + (y - center(node, orient)) * alpha;\n          node.setLayout({\n            y: nodeY\n          }, true);\n        }\n      }\n    });\n  });\n}\n/**\r\n * Compute the depth(y-position) of each edge\r\n */\n\n\nfunction computeEdgeDepths(nodes, orient) {\n  var keyAttr = orient === 'vertical' ? 'x' : 'y';\n  zrUtil.each(nodes, function (node) {\n    node.outEdges.sort(function (a, b) {\n      return a.node2.getLayout()[keyAttr] - b.node2.getLayout()[keyAttr];\n    });\n    node.inEdges.sort(function (a, b) {\n      return a.node1.getLayout()[keyAttr] - b.node1.getLayout()[keyAttr];\n    });\n  });\n  zrUtil.each(nodes, function (node) {\n    var sy = 0;\n    var ty = 0;\n    zrUtil.each(node.outEdges, function (edge) {\n      edge.setLayout({\n        sy: sy\n      }, true);\n      sy += edge.getLayout().dy;\n    });\n    zrUtil.each(node.inEdges, function (edge) {\n      edge.setLayout({\n        ty: ty\n      }, true);\n      ty += edge.getLayout().dy;\n    });\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport VisualMapping from '../../visual/VisualMapping.js';\nexport default function sankeyVisual(ecModel) {\n  ecModel.eachSeriesByType('sankey', function (seriesModel) {\n    var graph = seriesModel.getGraph();\n    var nodes = graph.nodes;\n    var edges = graph.edges;\n\n    if (nodes.length) {\n      var minValue_1 = Infinity;\n      var maxValue_1 = -Infinity;\n      zrUtil.each(nodes, function (node) {\n        var nodeValue = node.getLayout().value;\n\n        if (nodeValue < minValue_1) {\n          minValue_1 = nodeValue;\n        }\n\n        if (nodeValue > maxValue_1) {\n          maxValue_1 = nodeValue;\n        }\n      });\n      zrUtil.each(nodes, function (node) {\n        var mapping = new VisualMapping({\n          type: 'color',\n          mappingMethod: 'linear',\n          dataExtent: [minValue_1, maxValue_1],\n          visual: seriesModel.get('color')\n        });\n        var mapValueToColor = mapping.mapValueToVisual(node.getLayout().value);\n        var customColor = node.getModel().get(['itemStyle', 'color']);\n\n        if (customColor != null) {\n          node.setVisual('color', customColor);\n          node.setVisual('style', {\n            fill: customColor\n          });\n        } else {\n          node.setVisual('color', mapValueToColor);\n          node.setVisual('style', {\n            fill: mapValueToColor\n          });\n        }\n      });\n    }\n\n    if (edges.length) {\n      zrUtil.each(edges, function (edge) {\n        var edgeStyle = edge.getModel().get('lineStyle');\n        edge.setVisual('style', edgeStyle);\n      });\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport SankeyView from './SankeyView.js';\nimport SankeySeriesModel from './SankeySeries.js';\nimport sankeyLayout from './sankeyLayout.js';\nimport sankeyVisual from './sankeyVisual.js';\nexport function install(registers) {\n  registers.registerChartView(SankeyView);\n  registers.registerSeriesModel(SankeySeriesModel);\n  registers.registerLayout(sankeyLayout);\n  registers.registerVisual(sankeyVisual);\n  registers.registerAction({\n    type: 'dragNode',\n    event: 'dragnode',\n    // here can only use 'update' now, other value is not support in echarts.\n    update: 'update'\n  }, function (payload, ecModel) {\n    ecModel.eachComponent({\n      mainType: 'series',\n      subType: 'sankey',\n      query: payload\n    }, function (seriesModel) {\n      seriesModel.setNodePosition(payload.dataIndex, [payload.localX, payload.localY]);\n    });\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport createSeriesDataSimply from './createSeriesDataSimply.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { getDimensionTypeByAxis } from '../../data/helper/dimensionHelper.js';\nimport { makeSeriesEncodeForAxisCoordSys } from '../../data/helper/sourceHelper.js';\n\nvar WhiskerBoxCommonMixin =\n/** @class */\nfunction () {\n  function WhiskerBoxCommonMixin() {}\n  /**\r\n   * @override\r\n   */\n\n\n  WhiskerBoxCommonMixin.prototype.getInitialData = function (option, ecModel) {\n    // When both types of xAxis and yAxis are 'value', layout is\n    // needed to be specified by user. Otherwise, layout can be\n    // judged by which axis is category.\n    var ordinalMeta;\n    var xAxisModel = ecModel.getComponent('xAxis', this.get('xAxisIndex'));\n    var yAxisModel = ecModel.getComponent('yAxis', this.get('yAxisIndex'));\n    var xAxisType = xAxisModel.get('type');\n    var yAxisType = yAxisModel.get('type');\n    var addOrdinal; // FIXME\n    // Consider time axis.\n\n    if (xAxisType === 'category') {\n      option.layout = 'horizontal';\n      ordinalMeta = xAxisModel.getOrdinalMeta();\n      addOrdinal = true;\n    } else if (yAxisType === 'category') {\n      option.layout = 'vertical';\n      ordinalMeta = yAxisModel.getOrdinalMeta();\n      addOrdinal = true;\n    } else {\n      option.layout = option.layout || 'horizontal';\n    }\n\n    var coordDims = ['x', 'y'];\n    var baseAxisDimIndex = option.layout === 'horizontal' ? 0 : 1;\n    var baseAxisDim = this._baseAxisDim = coordDims[baseAxisDimIndex];\n    var otherAxisDim = coordDims[1 - baseAxisDimIndex];\n    var axisModels = [xAxisModel, yAxisModel];\n    var baseAxisType = axisModels[baseAxisDimIndex].get('type');\n    var otherAxisType = axisModels[1 - baseAxisDimIndex].get('type');\n    var data = option.data; // Clone a new data for next setOption({}) usage.\n    // Avoid modifying current data will affect further update.\n\n    if (data && addOrdinal) {\n      var newOptionData_1 = [];\n      zrUtil.each(data, function (item, index) {\n        var newItem;\n\n        if (zrUtil.isArray(item)) {\n          newItem = item.slice(); // Modify current using data.\n\n          item.unshift(index);\n        } else if (zrUtil.isArray(item.value)) {\n          newItem = zrUtil.extend({}, item);\n          newItem.value = newItem.value.slice(); // Modify current using data.\n\n          item.value.unshift(index);\n        } else {\n          newItem = item;\n        }\n\n        newOptionData_1.push(newItem);\n      });\n      option.data = newOptionData_1;\n    }\n\n    var defaultValueDimensions = this.defaultValueDimensions;\n    var coordDimensions = [{\n      name: baseAxisDim,\n      type: getDimensionTypeByAxis(baseAxisType),\n      ordinalMeta: ordinalMeta,\n      otherDims: {\n        tooltip: false,\n        itemName: 0\n      },\n      dimsDef: ['base']\n    }, {\n      name: otherAxisDim,\n      type: getDimensionTypeByAxis(otherAxisType),\n      dimsDef: defaultValueDimensions.slice()\n    }];\n    return createSeriesDataSimply(this, {\n      coordDimensions: coordDimensions,\n      dimensionsCount: defaultValueDimensions.length + 1,\n      encodeDefaulter: zrUtil.curry(makeSeriesEncodeForAxisCoordSys, coordDimensions, this)\n    });\n  };\n  /**\r\n   * If horizontal, base axis is x, otherwise y.\r\n   * @override\r\n   */\n\n\n  WhiskerBoxCommonMixin.prototype.getBaseAxis = function () {\n    var dim = this._baseAxisDim;\n    return this.ecModel.getComponent(dim + 'Axis', this.get(dim + 'AxisIndex')).axis;\n  };\n\n  return WhiskerBoxCommonMixin;\n}();\n\n;\nexport { WhiskerBoxCommonMixin };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport SeriesModel from '../../model/Series.js';\nimport { WhiskerBoxCommonMixin } from '../helper/whiskerBoxCommon.js';\nimport { mixin } from 'zrender/lib/core/util.js';\n\nvar BoxplotSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(BoxplotSeriesModel, _super);\n\n  function BoxplotSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = BoxplotSeriesModel.type; // TODO\n    // box width represents group size, so dimension should have 'size'.\n\n    /**\r\n     * @see <https://en.wikipedia.org/wiki/Box_plot>\r\n     * The meanings of 'min' and 'max' depend on user,\r\n     * and echarts do not need to know it.\r\n     * @readOnly\r\n     */\n\n    _this.defaultValueDimensions = [{\n      name: 'min',\n      defaultTooltip: true\n    }, {\n      name: 'Q1',\n      defaultTooltip: true\n    }, {\n      name: 'median',\n      defaultTooltip: true\n    }, {\n      name: 'Q3',\n      defaultTooltip: true\n    }, {\n      name: 'max',\n      defaultTooltip: true\n    }];\n    _this.visualDrawType = 'stroke';\n    return _this;\n  }\n\n  BoxplotSeriesModel.type = 'series.boxplot';\n  BoxplotSeriesModel.dependencies = ['xAxis', 'yAxis', 'grid'];\n  BoxplotSeriesModel.defaultOption = {\n    // zlevel: 0,\n    z: 2,\n    coordinateSystem: 'cartesian2d',\n    legendHoverLink: true,\n    layout: null,\n    boxWidth: [7, 50],\n    itemStyle: {\n      color: '#fff',\n      borderWidth: 1\n    },\n    emphasis: {\n      scale: true,\n      itemStyle: {\n        borderWidth: 2,\n        shadowBlur: 5,\n        shadowOffsetX: 1,\n        shadowOffsetY: 1,\n        shadowColor: 'rgba(0,0,0,0.2)'\n      }\n    },\n    animationDuration: 800\n  };\n  return BoxplotSeriesModel;\n}(SeriesModel);\n\nmixin(BoxplotSeriesModel, WhiskerBoxCommonMixin, true);\nexport default BoxplotSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport ChartView from '../../view/Chart.js';\nimport * as graphic from '../../util/graphic.js';\nimport { setStatesStylesFromModel, toggleHoverEmphasis } from '../../util/states.js';\nimport Path from 'zrender/lib/graphic/Path.js';\nimport { saveOldStyle } from '../../animation/basicTransition.js';\n\nvar BoxplotView =\n/** @class */\nfunction (_super) {\n  __extends(BoxplotView, _super);\n\n  function BoxplotView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = BoxplotView.type;\n    return _this;\n  }\n\n  BoxplotView.prototype.render = function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData();\n    var group = this.group;\n    var oldData = this._data; // There is no old data only when first rendering or switching from\n    // stream mode to normal mode, where previous elements should be removed.\n\n    if (!this._data) {\n      group.removeAll();\n    }\n\n    var constDim = seriesModel.get('layout') === 'horizontal' ? 1 : 0;\n    data.diff(oldData).add(function (newIdx) {\n      if (data.hasValue(newIdx)) {\n        var itemLayout = data.getItemLayout(newIdx);\n        var symbolEl = createNormalBox(itemLayout, data, newIdx, constDim, true);\n        data.setItemGraphicEl(newIdx, symbolEl);\n        group.add(symbolEl);\n      }\n    }).update(function (newIdx, oldIdx) {\n      var symbolEl = oldData.getItemGraphicEl(oldIdx); // Empty data\n\n      if (!data.hasValue(newIdx)) {\n        group.remove(symbolEl);\n        return;\n      }\n\n      var itemLayout = data.getItemLayout(newIdx);\n\n      if (!symbolEl) {\n        symbolEl = createNormalBox(itemLayout, data, newIdx, constDim);\n      } else {\n        saveOldStyle(symbolEl);\n        updateNormalBoxData(itemLayout, symbolEl, data, newIdx);\n      }\n\n      group.add(symbolEl);\n      data.setItemGraphicEl(newIdx, symbolEl);\n    }).remove(function (oldIdx) {\n      var el = oldData.getItemGraphicEl(oldIdx);\n      el && group.remove(el);\n    }).execute();\n    this._data = data;\n  };\n\n  BoxplotView.prototype.remove = function (ecModel) {\n    var group = this.group;\n    var data = this._data;\n    this._data = null;\n    data && data.eachItemGraphicEl(function (el) {\n      el && group.remove(el);\n    });\n  };\n\n  BoxplotView.type = 'boxplot';\n  return BoxplotView;\n}(ChartView);\n\nvar BoxPathShape =\n/** @class */\nfunction () {\n  function BoxPathShape() {}\n\n  return BoxPathShape;\n}();\n\nvar BoxPath =\n/** @class */\nfunction (_super) {\n  __extends(BoxPath, _super);\n\n  function BoxPath(opts) {\n    var _this = _super.call(this, opts) || this;\n\n    _this.type = 'boxplotBoxPath';\n    return _this;\n  }\n\n  BoxPath.prototype.getDefaultShape = function () {\n    return new BoxPathShape();\n  };\n\n  BoxPath.prototype.buildPath = function (ctx, shape) {\n    var ends = shape.points;\n    var i = 0;\n    ctx.moveTo(ends[i][0], ends[i][1]);\n    i++;\n\n    for (; i < 4; i++) {\n      ctx.lineTo(ends[i][0], ends[i][1]);\n    }\n\n    ctx.closePath();\n\n    for (; i < ends.length; i++) {\n      ctx.moveTo(ends[i][0], ends[i][1]);\n      i++;\n      ctx.lineTo(ends[i][0], ends[i][1]);\n    }\n  };\n\n  return BoxPath;\n}(Path);\n\nfunction createNormalBox(itemLayout, data, dataIndex, constDim, isInit) {\n  var ends = itemLayout.ends;\n  var el = new BoxPath({\n    shape: {\n      points: isInit ? transInit(ends, constDim, itemLayout) : ends\n    }\n  });\n  updateNormalBoxData(itemLayout, el, data, dataIndex, isInit);\n  return el;\n}\n\nfunction updateNormalBoxData(itemLayout, el, data, dataIndex, isInit) {\n  var seriesModel = data.hostModel;\n  var updateMethod = graphic[isInit ? 'initProps' : 'updateProps'];\n  updateMethod(el, {\n    shape: {\n      points: itemLayout.ends\n    }\n  }, seriesModel, dataIndex);\n  el.useStyle(data.getItemVisual(dataIndex, 'style'));\n  el.style.strokeNoScale = true;\n  el.z2 = 100;\n  var itemModel = data.getItemModel(dataIndex);\n  var emphasisModel = itemModel.getModel('emphasis');\n  setStatesStylesFromModel(el, itemModel);\n  toggleHoverEmphasis(el, emphasisModel.get('focus'), emphasisModel.get('blurScope'), emphasisModel.get('disabled'));\n}\n\nfunction transInit(points, dim, itemLayout) {\n  return zrUtil.map(points, function (point) {\n    point = point.slice();\n    point[dim] = itemLayout.initBaseline;\n    return point;\n  });\n}\n\nexport default BoxplotView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { parsePercent } from '../../util/number.js';\nvar each = zrUtil.each;\nexport default function boxplotLayout(ecModel) {\n  var groupResult = groupSeriesByAxis(ecModel);\n  each(groupResult, function (groupItem) {\n    var seriesModels = groupItem.seriesModels;\n\n    if (!seriesModels.length) {\n      return;\n    }\n\n    calculateBase(groupItem);\n    each(seriesModels, function (seriesModel, idx) {\n      layoutSingleSeries(seriesModel, groupItem.boxOffsetList[idx], groupItem.boxWidthList[idx]);\n    });\n  });\n}\n/**\r\n * Group series by axis.\r\n */\n\nfunction groupSeriesByAxis(ecModel) {\n  var result = [];\n  var axisList = [];\n  ecModel.eachSeriesByType('boxplot', function (seriesModel) {\n    var baseAxis = seriesModel.getBaseAxis();\n    var idx = zrUtil.indexOf(axisList, baseAxis);\n\n    if (idx < 0) {\n      idx = axisList.length;\n      axisList[idx] = baseAxis;\n      result[idx] = {\n        axis: baseAxis,\n        seriesModels: []\n      };\n    }\n\n    result[idx].seriesModels.push(seriesModel);\n  });\n  return result;\n}\n/**\r\n * Calculate offset and box width for each series.\r\n */\n\n\nfunction calculateBase(groupItem) {\n  var baseAxis = groupItem.axis;\n  var seriesModels = groupItem.seriesModels;\n  var seriesCount = seriesModels.length;\n  var boxWidthList = groupItem.boxWidthList = [];\n  var boxOffsetList = groupItem.boxOffsetList = [];\n  var boundList = [];\n  var bandWidth;\n\n  if (baseAxis.type === 'category') {\n    bandWidth = baseAxis.getBandWidth();\n  } else {\n    var maxDataCount_1 = 0;\n    each(seriesModels, function (seriesModel) {\n      maxDataCount_1 = Math.max(maxDataCount_1, seriesModel.getData().count());\n    });\n    var extent = baseAxis.getExtent();\n    bandWidth = Math.abs(extent[1] - extent[0]) / maxDataCount_1;\n  }\n\n  each(seriesModels, function (seriesModel) {\n    var boxWidthBound = seriesModel.get('boxWidth');\n\n    if (!zrUtil.isArray(boxWidthBound)) {\n      boxWidthBound = [boxWidthBound, boxWidthBound];\n    }\n\n    boundList.push([parsePercent(boxWidthBound[0], bandWidth) || 0, parsePercent(boxWidthBound[1], bandWidth) || 0]);\n  });\n  var availableWidth = bandWidth * 0.8 - 2;\n  var boxGap = availableWidth / seriesCount * 0.3;\n  var boxWidth = (availableWidth - boxGap * (seriesCount - 1)) / seriesCount;\n  var base = boxWidth / 2 - availableWidth / 2;\n  each(seriesModels, function (seriesModel, idx) {\n    boxOffsetList.push(base);\n    base += boxGap + boxWidth;\n    boxWidthList.push(Math.min(Math.max(boxWidth, boundList[idx][0]), boundList[idx][1]));\n  });\n}\n/**\r\n * Calculate points location for each series.\r\n */\n\n\nfunction layoutSingleSeries(seriesModel, offset, boxWidth) {\n  var coordSys = seriesModel.coordinateSystem;\n  var data = seriesModel.getData();\n  var halfWidth = boxWidth / 2;\n  var cDimIdx = seriesModel.get('layout') === 'horizontal' ? 0 : 1;\n  var vDimIdx = 1 - cDimIdx;\n  var coordDims = ['x', 'y'];\n  var cDim = data.mapDimension(coordDims[cDimIdx]);\n  var vDims = data.mapDimensionsAll(coordDims[vDimIdx]);\n\n  if (cDim == null || vDims.length < 5) {\n    return;\n  }\n\n  for (var dataIndex = 0; dataIndex < data.count(); dataIndex++) {\n    var axisDimVal = data.get(cDim, dataIndex);\n    var median = getPoint(axisDimVal, vDims[2], dataIndex);\n    var end1 = getPoint(axisDimVal, vDims[0], dataIndex);\n    var end2 = getPoint(axisDimVal, vDims[1], dataIndex);\n    var end4 = getPoint(axisDimVal, vDims[3], dataIndex);\n    var end5 = getPoint(axisDimVal, vDims[4], dataIndex);\n    var ends = [];\n    addBodyEnd(ends, end2, false);\n    addBodyEnd(ends, end4, true);\n    ends.push(end1, end2, end5, end4);\n    layEndLine(ends, end1);\n    layEndLine(ends, end5);\n    layEndLine(ends, median);\n    data.setItemLayout(dataIndex, {\n      initBaseline: median[vDimIdx],\n      ends: ends\n    });\n  }\n\n  function getPoint(axisDimVal, dim, dataIndex) {\n    var val = data.get(dim, dataIndex);\n    var p = [];\n    p[cDimIdx] = axisDimVal;\n    p[vDimIdx] = val;\n    var point;\n\n    if (isNaN(axisDimVal) || isNaN(val)) {\n      point = [NaN, NaN];\n    } else {\n      point = coordSys.dataToPoint(p);\n      point[cDimIdx] += offset;\n    }\n\n    return point;\n  }\n\n  function addBodyEnd(ends, point, start) {\n    var point1 = point.slice();\n    var point2 = point.slice();\n    point1[cDimIdx] += halfWidth;\n    point2[cDimIdx] -= halfWidth;\n    start ? ends.push(point1, point2) : ends.push(point2, point1);\n  }\n\n  function layEndLine(ends, endCenter) {\n    var from = endCenter.slice();\n    var to = endCenter.slice();\n    from[cDimIdx] -= halfWidth;\n    to[cDimIdx] += halfWidth;\n    ends.push(from, to);\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { quantile, asc } from '../../util/number.js';\nimport { isFunction, isString } from 'zrender/lib/core/util.js';\n/**\r\n * See:\r\n *  <https://en.wikipedia.org/wiki/Box_plot#cite_note-frigge_hoaglin_iglewicz-2>\r\n *  <http://stat.ethz.ch/R-manual/R-devel/library/grDevices/html/boxplot.stats.html>\r\n *\r\n * Helper method for preparing data.\r\n *\r\n * @param rawData like\r\n *        [\r\n *            [12,232,443], (raw data set for the first box)\r\n *            [3843,5545,1232], (raw data set for the second box)\r\n *            ...\r\n *        ]\r\n * @param opt.boundIQR=1.5 Data less than min bound is outlier.\r\n *      default 1.5, means Q1 - 1.5 * (Q3 - Q1).\r\n *      If 'none'/0 passed, min bound will not be used.\r\n */\n\nexport default function prepareBoxplotData(rawData, opt) {\n  opt = opt || {};\n  var boxData = [];\n  var outliers = [];\n  var boundIQR = opt.boundIQR;\n  var useExtreme = boundIQR === 'none' || boundIQR === 0;\n\n  for (var i = 0; i < rawData.length; i++) {\n    var ascList = asc(rawData[i].slice());\n    var Q1 = quantile(ascList, 0.25);\n    var Q2 = quantile(ascList, 0.5);\n    var Q3 = quantile(ascList, 0.75);\n    var min = ascList[0];\n    var max = ascList[ascList.length - 1];\n    var bound = (boundIQR == null ? 1.5 : boundIQR) * (Q3 - Q1);\n    var low = useExtreme ? min : Math.max(min, Q1 - bound);\n    var high = useExtreme ? max : Math.min(max, Q3 + bound);\n    var itemNameFormatter = opt.itemNameFormatter;\n    var itemName = isFunction(itemNameFormatter) ? itemNameFormatter({\n      value: i\n    }) : isString(itemNameFormatter) ? itemNameFormatter.replace('{value}', i + '') : i + '';\n    boxData.push([itemName, low, Q1, Q2, Q3, high]);\n\n    for (var j = 0; j < ascList.length; j++) {\n      var dataItem = ascList[j];\n\n      if (dataItem < low || dataItem > high) {\n        var outlier = [itemName, dataItem];\n        outliers.push(outlier);\n      }\n    }\n  }\n\n  return {\n    boxData: boxData,\n    outliers: outliers\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport prepareBoxplotData from './prepareBoxplotData.js';\nimport { throwError, makePrintable } from '../../util/log.js';\nimport { SOURCE_FORMAT_ARRAY_ROWS } from '../../util/types.js';\nexport var boxplotTransform = {\n  type: 'echarts:boxplot',\n  transform: function transform(params) {\n    var upstream = params.upstream;\n\n    if (upstream.sourceFormat !== SOURCE_FORMAT_ARRAY_ROWS) {\n      var errMsg = '';\n\n      if (process.env.NODE_ENV !== 'production') {\n        errMsg = makePrintable('source data is not applicable for this boxplot transform. Expect number[][].');\n      }\n\n      throwError(errMsg);\n    }\n\n    var result = prepareBoxplotData(upstream.getRawData(), params.config);\n    return [{\n      dimensions: ['ItemName', 'Low', 'Q1', 'Q2', 'Q3', 'High'],\n      data: result.boxData\n    }, {\n      data: result.outliers\n    }];\n  }\n};","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport BoxplotSeriesModel from './BoxplotSeries.js';\nimport BoxplotView from './BoxplotView.js';\nimport boxplotLayout from './boxplotLayout.js';\nimport { boxplotTransform } from './boxplotTransform.js';\nexport function install(registers) {\n  registers.registerSeriesModel(BoxplotSeriesModel);\n  registers.registerChartView(BoxplotView);\n  registers.registerLayout(boxplotLayout);\n  registers.registerTransform(boxplotTransform);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport ChartView from '../../view/Chart.js';\nimport * as graphic from '../../util/graphic.js';\nimport { setStatesStylesFromModel } from '../../util/states.js';\nimport Path from 'zrender/lib/graphic/Path.js';\nimport { createClipPath } from '../helper/createClipPathFromCoordSys.js';\nimport { saveOldStyle } from '../../animation/basicTransition.js';\nvar SKIP_PROPS = ['color', 'borderColor'];\n\nvar CandlestickView =\n/** @class */\nfunction (_super) {\n  __extends(CandlestickView, _super);\n\n  function CandlestickView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = CandlestickView.type;\n    return _this;\n  }\n\n  CandlestickView.prototype.render = function (seriesModel, ecModel, api) {\n    // If there is clipPath created in large mode. Remove it.\n    this.group.removeClipPath(); // Clear previously rendered progressive elements.\n\n    this._progressiveEls = null;\n\n    this._updateDrawMode(seriesModel);\n\n    this._isLargeDraw ? this._renderLarge(seriesModel) : this._renderNormal(seriesModel);\n  };\n\n  CandlestickView.prototype.incrementalPrepareRender = function (seriesModel, ecModel, api) {\n    this._clear();\n\n    this._updateDrawMode(seriesModel);\n  };\n\n  CandlestickView.prototype.incrementalRender = function (params, seriesModel, ecModel, api) {\n    this._progressiveEls = [];\n    this._isLargeDraw ? this._incrementalRenderLarge(params, seriesModel) : this._incrementalRenderNormal(params, seriesModel);\n  };\n\n  CandlestickView.prototype.eachRendered = function (cb) {\n    graphic.traverseElements(this._progressiveEls || this.group, cb);\n  };\n\n  CandlestickView.prototype._updateDrawMode = function (seriesModel) {\n    var isLargeDraw = seriesModel.pipelineContext.large;\n\n    if (this._isLargeDraw == null || isLargeDraw !== this._isLargeDraw) {\n      this._isLargeDraw = isLargeDraw;\n\n      this._clear();\n    }\n  };\n\n  CandlestickView.prototype._renderNormal = function (seriesModel) {\n    var data = seriesModel.getData();\n    var oldData = this._data;\n    var group = this.group;\n    var isSimpleBox = data.getLayout('isSimpleBox');\n    var needsClip = seriesModel.get('clip', true);\n    var coord = seriesModel.coordinateSystem;\n    var clipArea = coord.getArea && coord.getArea(); // There is no old data only when first rendering or switching from\n    // stream mode to normal mode, where previous elements should be removed.\n\n    if (!this._data) {\n      group.removeAll();\n    }\n\n    data.diff(oldData).add(function (newIdx) {\n      if (data.hasValue(newIdx)) {\n        var itemLayout = data.getItemLayout(newIdx);\n\n        if (needsClip && isNormalBoxClipped(clipArea, itemLayout)) {\n          return;\n        }\n\n        var el = createNormalBox(itemLayout, newIdx, true);\n        graphic.initProps(el, {\n          shape: {\n            points: itemLayout.ends\n          }\n        }, seriesModel, newIdx);\n        setBoxCommon(el, data, newIdx, isSimpleBox);\n        group.add(el);\n        data.setItemGraphicEl(newIdx, el);\n      }\n    }).update(function (newIdx, oldIdx) {\n      var el = oldData.getItemGraphicEl(oldIdx); // Empty data\n\n      if (!data.hasValue(newIdx)) {\n        group.remove(el);\n        return;\n      }\n\n      var itemLayout = data.getItemLayout(newIdx);\n\n      if (needsClip && isNormalBoxClipped(clipArea, itemLayout)) {\n        group.remove(el);\n        return;\n      }\n\n      if (!el) {\n        el = createNormalBox(itemLayout, newIdx);\n      } else {\n        graphic.updateProps(el, {\n          shape: {\n            points: itemLayout.ends\n          }\n        }, seriesModel, newIdx);\n        saveOldStyle(el);\n      }\n\n      setBoxCommon(el, data, newIdx, isSimpleBox);\n      group.add(el);\n      data.setItemGraphicEl(newIdx, el);\n    }).remove(function (oldIdx) {\n      var el = oldData.getItemGraphicEl(oldIdx);\n      el && group.remove(el);\n    }).execute();\n    this._data = data;\n  };\n\n  CandlestickView.prototype._renderLarge = function (seriesModel) {\n    this._clear();\n\n    createLarge(seriesModel, this.group);\n    var clipPath = seriesModel.get('clip', true) ? createClipPath(seriesModel.coordinateSystem, false, seriesModel) : null;\n\n    if (clipPath) {\n      this.group.setClipPath(clipPath);\n    } else {\n      this.group.removeClipPath();\n    }\n  };\n\n  CandlestickView.prototype._incrementalRenderNormal = function (params, seriesModel) {\n    var data = seriesModel.getData();\n    var isSimpleBox = data.getLayout('isSimpleBox');\n    var dataIndex;\n\n    while ((dataIndex = params.next()) != null) {\n      var itemLayout = data.getItemLayout(dataIndex);\n      var el = createNormalBox(itemLayout, dataIndex);\n      setBoxCommon(el, data, dataIndex, isSimpleBox);\n      el.incremental = true;\n      this.group.add(el);\n\n      this._progressiveEls.push(el);\n    }\n  };\n\n  CandlestickView.prototype._incrementalRenderLarge = function (params, seriesModel) {\n    createLarge(seriesModel, this.group, this._progressiveEls, true);\n  };\n\n  CandlestickView.prototype.remove = function (ecModel) {\n    this._clear();\n  };\n\n  CandlestickView.prototype._clear = function () {\n    this.group.removeAll();\n    this._data = null;\n  };\n\n  CandlestickView.type = 'candlestick';\n  return CandlestickView;\n}(ChartView);\n\nvar NormalBoxPathShape =\n/** @class */\nfunction () {\n  function NormalBoxPathShape() {}\n\n  return NormalBoxPathShape;\n}();\n\nvar NormalBoxPath =\n/** @class */\nfunction (_super) {\n  __extends(NormalBoxPath, _super);\n\n  function NormalBoxPath(opts) {\n    var _this = _super.call(this, opts) || this;\n\n    _this.type = 'normalCandlestickBox';\n    return _this;\n  }\n\n  NormalBoxPath.prototype.getDefaultShape = function () {\n    return new NormalBoxPathShape();\n  };\n\n  NormalBoxPath.prototype.buildPath = function (ctx, shape) {\n    var ends = shape.points;\n\n    if (this.__simpleBox) {\n      ctx.moveTo(ends[4][0], ends[4][1]);\n      ctx.lineTo(ends[6][0], ends[6][1]);\n    } else {\n      ctx.moveTo(ends[0][0], ends[0][1]);\n      ctx.lineTo(ends[1][0], ends[1][1]);\n      ctx.lineTo(ends[2][0], ends[2][1]);\n      ctx.lineTo(ends[3][0], ends[3][1]);\n      ctx.closePath();\n      ctx.moveTo(ends[4][0], ends[4][1]);\n      ctx.lineTo(ends[5][0], ends[5][1]);\n      ctx.moveTo(ends[6][0], ends[6][1]);\n      ctx.lineTo(ends[7][0], ends[7][1]);\n    }\n  };\n\n  return NormalBoxPath;\n}(Path);\n\nfunction createNormalBox(itemLayout, dataIndex, isInit) {\n  var ends = itemLayout.ends;\n  return new NormalBoxPath({\n    shape: {\n      points: isInit ? transInit(ends, itemLayout) : ends\n    },\n    z2: 100\n  });\n}\n\nfunction isNormalBoxClipped(clipArea, itemLayout) {\n  var clipped = true;\n\n  for (var i = 0; i < itemLayout.ends.length; i++) {\n    // If any point are in the region.\n    if (clipArea.contain(itemLayout.ends[i][0], itemLayout.ends[i][1])) {\n      clipped = false;\n      break;\n    }\n  }\n\n  return clipped;\n}\n\nfunction setBoxCommon(el, data, dataIndex, isSimpleBox) {\n  var itemModel = data.getItemModel(dataIndex);\n  el.useStyle(data.getItemVisual(dataIndex, 'style'));\n  el.style.strokeNoScale = true;\n  el.__simpleBox = isSimpleBox;\n  setStatesStylesFromModel(el, itemModel);\n}\n\nfunction transInit(points, itemLayout) {\n  return zrUtil.map(points, function (point) {\n    point = point.slice();\n    point[1] = itemLayout.initBaseline;\n    return point;\n  });\n}\n\nvar LargeBoxPathShape =\n/** @class */\nfunction () {\n  function LargeBoxPathShape() {}\n\n  return LargeBoxPathShape;\n}();\n\nvar LargeBoxPath =\n/** @class */\nfunction (_super) {\n  __extends(LargeBoxPath, _super);\n\n  function LargeBoxPath(opts) {\n    var _this = _super.call(this, opts) || this;\n\n    _this.type = 'largeCandlestickBox';\n    return _this;\n  }\n\n  LargeBoxPath.prototype.getDefaultShape = function () {\n    return new LargeBoxPathShape();\n  };\n\n  LargeBoxPath.prototype.buildPath = function (ctx, shape) {\n    // Drawing lines is more efficient than drawing\n    // a whole line or drawing rects.\n    var points = shape.points;\n\n    for (var i = 0; i < points.length;) {\n      if (this.__sign === points[i++]) {\n        var x = points[i++];\n        ctx.moveTo(x, points[i++]);\n        ctx.lineTo(x, points[i++]);\n      } else {\n        i += 3;\n      }\n    }\n  };\n\n  return LargeBoxPath;\n}(Path);\n\nfunction createLarge(seriesModel, group, progressiveEls, incremental) {\n  var data = seriesModel.getData();\n  var largePoints = data.getLayout('largePoints');\n  var elP = new LargeBoxPath({\n    shape: {\n      points: largePoints\n    },\n    __sign: 1,\n    ignoreCoarsePointer: true\n  });\n  group.add(elP);\n  var elN = new LargeBoxPath({\n    shape: {\n      points: largePoints\n    },\n    __sign: -1,\n    ignoreCoarsePointer: true\n  });\n  group.add(elN);\n  var elDoji = new LargeBoxPath({\n    shape: {\n      points: largePoints\n    },\n    __sign: 0,\n    ignoreCoarsePointer: true\n  });\n  group.add(elDoji);\n  setLargeStyle(1, elP, seriesModel, data);\n  setLargeStyle(-1, elN, seriesModel, data);\n  setLargeStyle(0, elDoji, seriesModel, data);\n\n  if (incremental) {\n    elP.incremental = true;\n    elN.incremental = true;\n  }\n\n  if (progressiveEls) {\n    progressiveEls.push(elP, elN);\n  }\n}\n\nfunction setLargeStyle(sign, el, seriesModel, data) {\n  // TODO put in visual?\n  var borderColor = seriesModel.get(['itemStyle', sign > 0 ? 'borderColor' : 'borderColor0']) // Use color for border color by default.\n  || seriesModel.get(['itemStyle', sign > 0 ? 'color' : 'color0']);\n\n  if (sign === 0) {\n    borderColor = seriesModel.get(['itemStyle', 'borderColorDoji']);\n  } // Color must be excluded.\n  // Because symbol provide setColor individually to set fill and stroke\n\n\n  var itemStyle = seriesModel.getModel('itemStyle').getItemStyle(SKIP_PROPS);\n  el.useStyle(itemStyle);\n  el.style.fill = null;\n  el.style.stroke = borderColor;\n}\n\nexport default CandlestickView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport SeriesModel from '../../model/Series.js';\nimport { WhiskerBoxCommonMixin } from '../helper/whiskerBoxCommon.js';\nimport { mixin } from 'zrender/lib/core/util.js';\n\nvar CandlestickSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(CandlestickSeriesModel, _super);\n\n  function CandlestickSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = CandlestickSeriesModel.type;\n    _this.defaultValueDimensions = [{\n      name: 'open',\n      defaultTooltip: true\n    }, {\n      name: 'close',\n      defaultTooltip: true\n    }, {\n      name: 'lowest',\n      defaultTooltip: true\n    }, {\n      name: 'highest',\n      defaultTooltip: true\n    }];\n    return _this;\n  }\n  /**\r\n   * Get dimension for shadow in dataZoom\r\n   * @return dimension name\r\n   */\n\n\n  CandlestickSeriesModel.prototype.getShadowDim = function () {\n    return 'open';\n  };\n\n  CandlestickSeriesModel.prototype.brushSelector = function (dataIndex, data, selectors) {\n    var itemLayout = data.getItemLayout(dataIndex);\n    return itemLayout && selectors.rect(itemLayout.brushRect);\n  };\n\n  CandlestickSeriesModel.type = 'series.candlestick';\n  CandlestickSeriesModel.dependencies = ['xAxis', 'yAxis', 'grid'];\n  CandlestickSeriesModel.defaultOption = {\n    // zlevel: 0,\n    z: 2,\n    coordinateSystem: 'cartesian2d',\n    legendHoverLink: true,\n    // xAxisIndex: 0,\n    // yAxisIndex: 0,\n    layout: null,\n    clip: true,\n    itemStyle: {\n      color: '#eb5454',\n      color0: '#47b262',\n      borderColor: '#eb5454',\n      borderColor0: '#47b262',\n      borderColorDoji: null,\n      // borderColor: '#d24040',\n      // borderColor0: '#398f4f',\n      borderWidth: 1\n    },\n    emphasis: {\n      scale: true,\n      itemStyle: {\n        borderWidth: 2\n      }\n    },\n    barMaxWidth: null,\n    barMinWidth: null,\n    barWidth: null,\n    large: true,\n    largeThreshold: 600,\n    progressive: 3e3,\n    progressiveThreshold: 1e4,\n    progressiveChunkMode: 'mod',\n    animationEasing: 'linear',\n    animationDuration: 300\n  };\n  return CandlestickSeriesModel;\n}(SeriesModel);\n\nmixin(CandlestickSeriesModel, WhiskerBoxCommonMixin, true);\nexport default CandlestickSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nexport default function candlestickPreprocessor(option) {\n  if (!option || !zrUtil.isArray(option.series)) {\n    return;\n  } // Translate 'k' to 'candlestick'.\n\n\n  zrUtil.each(option.series, function (seriesItem) {\n    if (zrUtil.isObject(seriesItem) && seriesItem.type === 'k') {\n      seriesItem.type = 'candlestick';\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport createRenderPlanner from '../helper/createRenderPlanner.js';\nimport { extend } from 'zrender/lib/core/util.js';\nvar positiveBorderColorQuery = ['itemStyle', 'borderColor'];\nvar negativeBorderColorQuery = ['itemStyle', 'borderColor0'];\nvar dojiBorderColorQuery = ['itemStyle', 'borderColorDoji'];\nvar positiveColorQuery = ['itemStyle', 'color'];\nvar negativeColorQuery = ['itemStyle', 'color0'];\nvar candlestickVisual = {\n  seriesType: 'candlestick',\n  plan: createRenderPlanner(),\n  // For legend.\n  performRawSeries: true,\n  reset: function (seriesModel, ecModel) {\n    function getColor(sign, model) {\n      return model.get(sign > 0 ? positiveColorQuery : negativeColorQuery);\n    }\n\n    function getBorderColor(sign, model) {\n      return model.get(sign === 0 ? dojiBorderColorQuery : sign > 0 ? positiveBorderColorQuery : negativeBorderColorQuery);\n    } // Only visible series has each data be visual encoded\n\n\n    if (ecModel.isSeriesFiltered(seriesModel)) {\n      return;\n    }\n\n    var isLargeRender = seriesModel.pipelineContext.large;\n    return !isLargeRender && {\n      progress: function (params, data) {\n        var dataIndex;\n\n        while ((dataIndex = params.next()) != null) {\n          var itemModel = data.getItemModel(dataIndex);\n          var sign = data.getItemLayout(dataIndex).sign;\n          var style = itemModel.getItemStyle();\n          style.fill = getColor(sign, itemModel);\n          style.stroke = getBorderColor(sign, itemModel) || style.fill;\n          var existsStyle = data.ensureUniqueItemVisual(dataIndex, 'style');\n          extend(existsStyle, style);\n        }\n      }\n    };\n  }\n};\nexport default candlestickVisual;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { subPixelOptimize } from '../../util/graphic.js';\nimport createRenderPlanner from '../helper/createRenderPlanner.js';\nimport { parsePercent } from '../../util/number.js';\nimport { map, retrieve2 } from 'zrender/lib/core/util.js';\nimport { createFloat32Array } from '../../util/vendor.js';\nvar candlestickLayout = {\n  seriesType: 'candlestick',\n  plan: createRenderPlanner(),\n  reset: function (seriesModel) {\n    var coordSys = seriesModel.coordinateSystem;\n    var data = seriesModel.getData();\n    var candleWidth = calculateCandleWidth(seriesModel, data);\n    var cDimIdx = 0;\n    var vDimIdx = 1;\n    var coordDims = ['x', 'y'];\n    var cDimI = data.getDimensionIndex(data.mapDimension(coordDims[cDimIdx]));\n    var vDimsI = map(data.mapDimensionsAll(coordDims[vDimIdx]), data.getDimensionIndex, data);\n    var openDimI = vDimsI[0];\n    var closeDimI = vDimsI[1];\n    var lowestDimI = vDimsI[2];\n    var highestDimI = vDimsI[3];\n    data.setLayout({\n      candleWidth: candleWidth,\n      // The value is experimented visually.\n      isSimpleBox: candleWidth <= 1.3\n    });\n\n    if (cDimI < 0 || vDimsI.length < 4) {\n      return;\n    }\n\n    return {\n      progress: seriesModel.pipelineContext.large ? largeProgress : normalProgress\n    };\n\n    function normalProgress(params, data) {\n      var dataIndex;\n      var store = data.getStore();\n\n      while ((dataIndex = params.next()) != null) {\n        var axisDimVal = store.get(cDimI, dataIndex);\n        var openVal = store.get(openDimI, dataIndex);\n        var closeVal = store.get(closeDimI, dataIndex);\n        var lowestVal = store.get(lowestDimI, dataIndex);\n        var highestVal = store.get(highestDimI, dataIndex);\n        var ocLow = Math.min(openVal, closeVal);\n        var ocHigh = Math.max(openVal, closeVal);\n        var ocLowPoint = getPoint(ocLow, axisDimVal);\n        var ocHighPoint = getPoint(ocHigh, axisDimVal);\n        var lowestPoint = getPoint(lowestVal, axisDimVal);\n        var highestPoint = getPoint(highestVal, axisDimVal);\n        var ends = [];\n        addBodyEnd(ends, ocHighPoint, 0);\n        addBodyEnd(ends, ocLowPoint, 1);\n        ends.push(subPixelOptimizePoint(highestPoint), subPixelOptimizePoint(ocHighPoint), subPixelOptimizePoint(lowestPoint), subPixelOptimizePoint(ocLowPoint));\n        var itemModel = data.getItemModel(dataIndex);\n        var hasDojiColor = !!itemModel.get(['itemStyle', 'borderColorDoji']);\n        data.setItemLayout(dataIndex, {\n          sign: getSign(store, dataIndex, openVal, closeVal, closeDimI, hasDojiColor),\n          initBaseline: openVal > closeVal ? ocHighPoint[vDimIdx] : ocLowPoint[vDimIdx],\n          ends: ends,\n          brushRect: makeBrushRect(lowestVal, highestVal, axisDimVal)\n        });\n      }\n\n      function getPoint(val, axisDimVal) {\n        var p = [];\n        p[cDimIdx] = axisDimVal;\n        p[vDimIdx] = val;\n        return isNaN(axisDimVal) || isNaN(val) ? [NaN, NaN] : coordSys.dataToPoint(p);\n      }\n\n      function addBodyEnd(ends, point, start) {\n        var point1 = point.slice();\n        var point2 = point.slice();\n        point1[cDimIdx] = subPixelOptimize(point1[cDimIdx] + candleWidth / 2, 1, false);\n        point2[cDimIdx] = subPixelOptimize(point2[cDimIdx] - candleWidth / 2, 1, true);\n        start ? ends.push(point1, point2) : ends.push(point2, point1);\n      }\n\n      function makeBrushRect(lowestVal, highestVal, axisDimVal) {\n        var pmin = getPoint(lowestVal, axisDimVal);\n        var pmax = getPoint(highestVal, axisDimVal);\n        pmin[cDimIdx] -= candleWidth / 2;\n        pmax[cDimIdx] -= candleWidth / 2;\n        return {\n          x: pmin[0],\n          y: pmin[1],\n          width: vDimIdx ? candleWidth : pmax[0] - pmin[0],\n          height: vDimIdx ? pmax[1] - pmin[1] : candleWidth\n        };\n      }\n\n      function subPixelOptimizePoint(point) {\n        point[cDimIdx] = subPixelOptimize(point[cDimIdx], 1);\n        return point;\n      }\n    }\n\n    function largeProgress(params, data) {\n      // Structure: [sign, x, yhigh, ylow, sign, x, yhigh, ylow, ...]\n      var points = createFloat32Array(params.count * 4);\n      var offset = 0;\n      var point;\n      var tmpIn = [];\n      var tmpOut = [];\n      var dataIndex;\n      var store = data.getStore();\n      var hasDojiColor = !!seriesModel.get(['itemStyle', 'borderColorDoji']);\n\n      while ((dataIndex = params.next()) != null) {\n        var axisDimVal = store.get(cDimI, dataIndex);\n        var openVal = store.get(openDimI, dataIndex);\n        var closeVal = store.get(closeDimI, dataIndex);\n        var lowestVal = store.get(lowestDimI, dataIndex);\n        var highestVal = store.get(highestDimI, dataIndex);\n\n        if (isNaN(axisDimVal) || isNaN(lowestVal) || isNaN(highestVal)) {\n          points[offset++] = NaN;\n          offset += 3;\n          continue;\n        }\n\n        points[offset++] = getSign(store, dataIndex, openVal, closeVal, closeDimI, hasDojiColor);\n        tmpIn[cDimIdx] = axisDimVal;\n        tmpIn[vDimIdx] = lowestVal;\n        point = coordSys.dataToPoint(tmpIn, null, tmpOut);\n        points[offset++] = point ? point[0] : NaN;\n        points[offset++] = point ? point[1] : NaN;\n        tmpIn[vDimIdx] = highestVal;\n        point = coordSys.dataToPoint(tmpIn, null, tmpOut);\n        points[offset++] = point ? point[1] : NaN;\n      }\n\n      data.setLayout('largePoints', points);\n    }\n  }\n};\n/**\r\n * Get the sign of a single data.\r\n *\r\n * @returns 0 for doji with hasDojiColor: true,\r\n *          1 for positive,\r\n *          -1 for negative.\r\n */\n\nfunction getSign(store, dataIndex, openVal, closeVal, closeDimI, hasDojiColor) {\n  var sign;\n\n  if (openVal > closeVal) {\n    sign = -1;\n  } else if (openVal < closeVal) {\n    sign = 1;\n  } else {\n    sign = hasDojiColor // When doji color is set, use it instead of color/color0.\n    ? 0 : dataIndex > 0 // If close === open, compare with close of last record\n    ? store.get(closeDimI, dataIndex - 1) <= closeVal ? 1 : -1 : // No record of previous, set to be positive\n    1;\n  }\n\n  return sign;\n}\n\nfunction calculateCandleWidth(seriesModel, data) {\n  var baseAxis = seriesModel.getBaseAxis();\n  var extent;\n  var bandWidth = baseAxis.type === 'category' ? baseAxis.getBandWidth() : (extent = baseAxis.getExtent(), Math.abs(extent[1] - extent[0]) / data.count());\n  var barMaxWidth = parsePercent(retrieve2(seriesModel.get('barMaxWidth'), bandWidth), bandWidth);\n  var barMinWidth = parsePercent(retrieve2(seriesModel.get('barMinWidth'), 1), bandWidth);\n  var barWidth = seriesModel.get('barWidth');\n  return barWidth != null ? parsePercent(barWidth, bandWidth) // Put max outer to ensure bar visible in spite of overlap.\n  : Math.max(Math.min(bandWidth / 2, barMaxWidth), barMinWidth);\n}\n\nexport default candlestickLayout;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport CandlestickView from './CandlestickView.js';\nimport CandlestickSeriesModel from './CandlestickSeries.js';\nimport preprocessor from './preprocessor.js';\nimport candlestickVisual from './candlestickVisual.js';\nimport candlestickLayout from './candlestickLayout.js';\nexport function install(registers) {\n  registers.registerChartView(CandlestickView);\n  registers.registerSeriesModel(CandlestickSeriesModel);\n  registers.registerPreprocessor(preprocessor);\n  registers.registerVisual(candlestickVisual);\n  registers.registerLayout(candlestickLayout);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport { createSymbol, normalizeSymbolOffset, normalizeSymbolSize } from '../../util/symbol.js';\nimport { Group } from '../../util/graphic.js';\nimport { enterEmphasis, leaveEmphasis, toggleHoverEmphasis } from '../../util/states.js';\nimport SymbolClz from './Symbol.js';\n\nfunction updateRipplePath(rippleGroup, effectCfg) {\n  var color = effectCfg.rippleEffectColor || effectCfg.color;\n  rippleGroup.eachChild(function (ripplePath) {\n    ripplePath.attr({\n      z: effectCfg.z,\n      zlevel: effectCfg.zlevel,\n      style: {\n        stroke: effectCfg.brushType === 'stroke' ? color : null,\n        fill: effectCfg.brushType === 'fill' ? color : null\n      }\n    });\n  });\n}\n\nvar EffectSymbol =\n/** @class */\nfunction (_super) {\n  __extends(EffectSymbol, _super);\n\n  function EffectSymbol(data, idx) {\n    var _this = _super.call(this) || this;\n\n    var symbol = new SymbolClz(data, idx);\n    var rippleGroup = new Group();\n\n    _this.add(symbol);\n\n    _this.add(rippleGroup);\n\n    _this.updateData(data, idx);\n\n    return _this;\n  }\n\n  EffectSymbol.prototype.stopEffectAnimation = function () {\n    this.childAt(1).removeAll();\n  };\n\n  EffectSymbol.prototype.startEffectAnimation = function (effectCfg) {\n    var symbolType = effectCfg.symbolType;\n    var color = effectCfg.color;\n    var rippleNumber = effectCfg.rippleNumber;\n    var rippleGroup = this.childAt(1);\n\n    for (var i = 0; i < rippleNumber; i++) {\n      // If width/height are set too small (e.g., set to 1) on ios10\n      // and macOS Sierra, a circle stroke become a rect, no matter what\n      // the scale is set. So we set width/height as 2. See #4136.\n      var ripplePath = createSymbol(symbolType, -1, -1, 2, 2, color);\n      ripplePath.attr({\n        style: {\n          strokeNoScale: true\n        },\n        z2: 99,\n        silent: true,\n        scaleX: 0.5,\n        scaleY: 0.5\n      });\n      var delay = -i / rippleNumber * effectCfg.period + effectCfg.effectOffset;\n      ripplePath.animate('', true).when(effectCfg.period, {\n        scaleX: effectCfg.rippleScale / 2,\n        scaleY: effectCfg.rippleScale / 2\n      }).delay(delay).start();\n      ripplePath.animateStyle(true).when(effectCfg.period, {\n        opacity: 0\n      }).delay(delay).start();\n      rippleGroup.add(ripplePath);\n    }\n\n    updateRipplePath(rippleGroup, effectCfg);\n  };\n  /**\r\n   * Update effect symbol\r\n   */\n\n\n  EffectSymbol.prototype.updateEffectAnimation = function (effectCfg) {\n    var oldEffectCfg = this._effectCfg;\n    var rippleGroup = this.childAt(1); // Must reinitialize effect if following configuration changed\n\n    var DIFFICULT_PROPS = ['symbolType', 'period', 'rippleScale', 'rippleNumber'];\n\n    for (var i = 0; i < DIFFICULT_PROPS.length; i++) {\n      var propName = DIFFICULT_PROPS[i];\n\n      if (oldEffectCfg[propName] !== effectCfg[propName]) {\n        this.stopEffectAnimation();\n        this.startEffectAnimation(effectCfg);\n        return;\n      }\n    }\n\n    updateRipplePath(rippleGroup, effectCfg);\n  };\n  /**\r\n   * Highlight symbol\r\n   */\n\n\n  EffectSymbol.prototype.highlight = function () {\n    enterEmphasis(this);\n  };\n  /**\r\n   * Downplay symbol\r\n   */\n\n\n  EffectSymbol.prototype.downplay = function () {\n    leaveEmphasis(this);\n  };\n\n  EffectSymbol.prototype.getSymbolType = function () {\n    var symbol = this.childAt(0);\n    return symbol && symbol.getSymbolType();\n  };\n  /**\r\n   * Update symbol properties\r\n   */\n\n\n  EffectSymbol.prototype.updateData = function (data, idx) {\n    var _this = this;\n\n    var seriesModel = data.hostModel;\n    this.childAt(0).updateData(data, idx);\n    var rippleGroup = this.childAt(1);\n    var itemModel = data.getItemModel(idx);\n    var symbolType = data.getItemVisual(idx, 'symbol');\n    var symbolSize = normalizeSymbolSize(data.getItemVisual(idx, 'symbolSize'));\n    var symbolStyle = data.getItemVisual(idx, 'style');\n    var color = symbolStyle && symbolStyle.fill;\n    var emphasisModel = itemModel.getModel('emphasis');\n    rippleGroup.setScale(symbolSize);\n    rippleGroup.traverse(function (ripplePath) {\n      ripplePath.setStyle('fill', color);\n    });\n    var symbolOffset = normalizeSymbolOffset(data.getItemVisual(idx, 'symbolOffset'), symbolSize);\n\n    if (symbolOffset) {\n      rippleGroup.x = symbolOffset[0];\n      rippleGroup.y = symbolOffset[1];\n    }\n\n    var symbolRotate = data.getItemVisual(idx, 'symbolRotate');\n    rippleGroup.rotation = (symbolRotate || 0) * Math.PI / 180 || 0;\n    var effectCfg = {};\n    effectCfg.showEffectOn = seriesModel.get('showEffectOn');\n    effectCfg.rippleScale = itemModel.get(['rippleEffect', 'scale']);\n    effectCfg.brushType = itemModel.get(['rippleEffect', 'brushType']);\n    effectCfg.period = itemModel.get(['rippleEffect', 'period']) * 1000;\n    effectCfg.effectOffset = idx / data.count();\n    effectCfg.z = seriesModel.getShallow('z') || 0;\n    effectCfg.zlevel = seriesModel.getShallow('zlevel') || 0;\n    effectCfg.symbolType = symbolType;\n    effectCfg.color = color;\n    effectCfg.rippleEffectColor = itemModel.get(['rippleEffect', 'color']);\n    effectCfg.rippleNumber = itemModel.get(['rippleEffect', 'number']);\n\n    if (effectCfg.showEffectOn === 'render') {\n      this._effectCfg ? this.updateEffectAnimation(effectCfg) : this.startEffectAnimation(effectCfg);\n      this._effectCfg = effectCfg;\n    } else {\n      // Not keep old effect config\n      this._effectCfg = null;\n      this.stopEffectAnimation();\n\n      this.onHoverStateChange = function (toState) {\n        if (toState === 'emphasis') {\n          if (effectCfg.showEffectOn !== 'render') {\n            _this.startEffectAnimation(effectCfg);\n          }\n        } else if (toState === 'normal') {\n          if (effectCfg.showEffectOn !== 'render') {\n            _this.stopEffectAnimation();\n          }\n        }\n      };\n    }\n\n    this._effectCfg = effectCfg;\n    toggleHoverEmphasis(this, emphasisModel.get('focus'), emphasisModel.get('blurScope'), emphasisModel.get('disabled'));\n  };\n\n  ;\n\n  EffectSymbol.prototype.fadeOut = function (cb) {\n    cb && cb();\n  };\n\n  ;\n  return EffectSymbol;\n}(Group);\n\nexport default EffectSymbol;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport SymbolDraw from '../helper/SymbolDraw.js';\nimport EffectSymbol from '../helper/EffectSymbol.js';\nimport * as matrix from 'zrender/lib/core/matrix.js';\nimport pointsLayout from '../../layout/points.js';\nimport ChartView from '../../view/Chart.js';\n\nvar EffectScatterView =\n/** @class */\nfunction (_super) {\n  __extends(EffectScatterView, _super);\n\n  function EffectScatterView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = EffectScatterView.type;\n    return _this;\n  }\n\n  EffectScatterView.prototype.init = function () {\n    this._symbolDraw = new SymbolDraw(EffectSymbol);\n  };\n\n  EffectScatterView.prototype.render = function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData();\n    var effectSymbolDraw = this._symbolDraw;\n    effectSymbolDraw.updateData(data, {\n      clipShape: this._getClipShape(seriesModel)\n    });\n    this.group.add(effectSymbolDraw.group);\n  };\n\n  EffectScatterView.prototype._getClipShape = function (seriesModel) {\n    var coordSys = seriesModel.coordinateSystem;\n    var clipArea = coordSys && coordSys.getArea && coordSys.getArea();\n    return seriesModel.get('clip', true) ? clipArea : null;\n  };\n\n  EffectScatterView.prototype.updateTransform = function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData();\n    this.group.dirty();\n    var res = pointsLayout('').reset(seriesModel, ecModel, api);\n\n    if (res.progress) {\n      res.progress({\n        start: 0,\n        end: data.count(),\n        count: data.count()\n      }, data);\n    }\n\n    this._symbolDraw.updateLayout();\n  };\n\n  EffectScatterView.prototype._updateGroupTransform = function (seriesModel) {\n    var coordSys = seriesModel.coordinateSystem;\n\n    if (coordSys && coordSys.getRoamTransform) {\n      this.group.transform = matrix.clone(coordSys.getRoamTransform());\n      this.group.decomposeTransform();\n    }\n  };\n\n  EffectScatterView.prototype.remove = function (ecModel, api) {\n    this._symbolDraw && this._symbolDraw.remove(true);\n  };\n\n  EffectScatterView.type = 'effectScatter';\n  return EffectScatterView;\n}(ChartView);\n\nexport default EffectScatterView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport createSeriesData from '../helper/createSeriesData.js';\nimport SeriesModel from '../../model/Series.js';\n\nvar EffectScatterSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(EffectScatterSeriesModel, _super);\n\n  function EffectScatterSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = EffectScatterSeriesModel.type;\n    _this.hasSymbolVisual = true;\n    return _this;\n  }\n\n  EffectScatterSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    return createSeriesData(null, this, {\n      useEncodeDefaulter: true\n    });\n  };\n\n  EffectScatterSeriesModel.prototype.brushSelector = function (dataIndex, data, selectors) {\n    return selectors.point(data.getItemLayout(dataIndex));\n  };\n\n  EffectScatterSeriesModel.type = 'series.effectScatter';\n  EffectScatterSeriesModel.dependencies = ['grid', 'polar'];\n  EffectScatterSeriesModel.defaultOption = {\n    coordinateSystem: 'cartesian2d',\n    // zlevel: 0,\n    z: 2,\n    legendHoverLink: true,\n    effectType: 'ripple',\n    progressive: 0,\n    // When to show the effect, option: 'render'|'emphasis'\n    showEffectOn: 'render',\n    clip: true,\n    // Ripple effect config\n    rippleEffect: {\n      period: 4,\n      // Scale of ripple\n      scale: 2.5,\n      // Brush type can be fill or stroke\n      brushType: 'fill',\n      // Ripple number\n      number: 3\n    },\n    universalTransition: {\n      divideShape: 'clone'\n    },\n    // Cartesian coordinate system\n    // xAxisIndex: 0,\n    // yAxisIndex: 0,\n    // Polar coordinate system\n    // polarIndex: 0,\n    // Geo coordinate system\n    // geoIndex: 0,\n    // symbol: null,        // 图形类型\n    symbolSize: 10 // 图形大小，半宽（半径）参数，当图形为方向或菱形则总宽度为symbolSize * 2\n    // symbolRotate: null,  // 图形旋转控制\n    // itemStyle: {\n    //     opacity: 1\n    // }\n\n  };\n  return EffectScatterSeriesModel;\n}(SeriesModel);\n\nexport default EffectScatterSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport EffectScatterView from './EffectScatterView.js';\nimport EffectScatterSeriesModel from './EffectScatterSeries.js';\nimport layoutPoints from '../../layout/points.js';\nexport function install(registers) {\n  registers.registerChartView(EffectScatterView);\n  registers.registerSeriesModel(EffectScatterSeriesModel);\n  registers.registerLayout(layoutPoints('effectScatter'));\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\n/**\r\n * Provide effect for line\r\n */\n\nimport * as graphic from '../../util/graphic.js';\nimport Line from './Line.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { createSymbol } from '../../util/symbol.js';\nimport * as vec2 from 'zrender/lib/core/vector.js';\nimport * as curveUtil from 'zrender/lib/core/curve.js';\n\nvar EffectLine =\n/** @class */\nfunction (_super) {\n  __extends(EffectLine, _super);\n\n  function EffectLine(lineData, idx, seriesScope) {\n    var _this = _super.call(this) || this;\n\n    _this.add(_this.createLine(lineData, idx, seriesScope));\n\n    _this._updateEffectSymbol(lineData, idx);\n\n    return _this;\n  }\n\n  EffectLine.prototype.createLine = function (lineData, idx, seriesScope) {\n    return new Line(lineData, idx, seriesScope);\n  };\n\n  EffectLine.prototype._updateEffectSymbol = function (lineData, idx) {\n    var itemModel = lineData.getItemModel(idx);\n    var effectModel = itemModel.getModel('effect');\n    var size = effectModel.get('symbolSize');\n    var symbolType = effectModel.get('symbol');\n\n    if (!zrUtil.isArray(size)) {\n      size = [size, size];\n    }\n\n    var lineStyle = lineData.getItemVisual(idx, 'style');\n    var color = effectModel.get('color') || lineStyle && lineStyle.stroke;\n    var symbol = this.childAt(1);\n\n    if (this._symbolType !== symbolType) {\n      // Remove previous\n      this.remove(symbol);\n      symbol = createSymbol(symbolType, -0.5, -0.5, 1, 1, color);\n      symbol.z2 = 100;\n      symbol.culling = true;\n      this.add(symbol);\n    } // Symbol may be removed if loop is false\n\n\n    if (!symbol) {\n      return;\n    } // Shadow color is same with color in default\n\n\n    symbol.setStyle('shadowColor', color);\n    symbol.setStyle(effectModel.getItemStyle(['color']));\n    symbol.scaleX = size[0];\n    symbol.scaleY = size[1];\n    symbol.setColor(color);\n    this._symbolType = symbolType;\n    this._symbolScale = size;\n\n    this._updateEffectAnimation(lineData, effectModel, idx);\n  };\n\n  EffectLine.prototype._updateEffectAnimation = function (lineData, effectModel, idx) {\n    var symbol = this.childAt(1);\n\n    if (!symbol) {\n      return;\n    }\n\n    var points = lineData.getItemLayout(idx);\n    var period = effectModel.get('period') * 1000;\n    var loop = effectModel.get('loop');\n    var roundTrip = effectModel.get('roundTrip');\n    var constantSpeed = effectModel.get('constantSpeed');\n    var delayExpr = zrUtil.retrieve(effectModel.get('delay'), function (idx) {\n      return idx / lineData.count() * period / 3;\n    }); // Ignore when updating\n\n    symbol.ignore = true;\n\n    this._updateAnimationPoints(symbol, points);\n\n    if (constantSpeed > 0) {\n      period = this._getLineLength(symbol) / constantSpeed * 1000;\n    }\n\n    if (period !== this._period || loop !== this._loop || roundTrip !== this._roundTrip) {\n      symbol.stopAnimation();\n      var delayNum = void 0;\n\n      if (zrUtil.isFunction(delayExpr)) {\n        delayNum = delayExpr(idx);\n      } else {\n        delayNum = delayExpr;\n      }\n\n      if (symbol.__t > 0) {\n        delayNum = -period * symbol.__t;\n      }\n\n      this._animateSymbol(symbol, period, delayNum, loop, roundTrip);\n    }\n\n    this._period = period;\n    this._loop = loop;\n    this._roundTrip = roundTrip;\n  };\n\n  EffectLine.prototype._animateSymbol = function (symbol, period, delayNum, loop, roundTrip) {\n    if (period > 0) {\n      symbol.__t = 0;\n      var self_1 = this;\n      var animator = symbol.animate('', loop).when(roundTrip ? period * 2 : period, {\n        __t: roundTrip ? 2 : 1\n      }).delay(delayNum).during(function () {\n        self_1._updateSymbolPosition(symbol);\n      });\n\n      if (!loop) {\n        animator.done(function () {\n          self_1.remove(symbol);\n        });\n      }\n\n      animator.start();\n    }\n  };\n\n  EffectLine.prototype._getLineLength = function (symbol) {\n    // Not so accurate\n    return vec2.dist(symbol.__p1, symbol.__cp1) + vec2.dist(symbol.__cp1, symbol.__p2);\n  };\n\n  EffectLine.prototype._updateAnimationPoints = function (symbol, points) {\n    symbol.__p1 = points[0];\n    symbol.__p2 = points[1];\n    symbol.__cp1 = points[2] || [(points[0][0] + points[1][0]) / 2, (points[0][1] + points[1][1]) / 2];\n  };\n\n  EffectLine.prototype.updateData = function (lineData, idx, seriesScope) {\n    this.childAt(0).updateData(lineData, idx, seriesScope);\n\n    this._updateEffectSymbol(lineData, idx);\n  };\n\n  EffectLine.prototype._updateSymbolPosition = function (symbol) {\n    var p1 = symbol.__p1;\n    var p2 = symbol.__p2;\n    var cp1 = symbol.__cp1;\n    var t = symbol.__t < 1 ? symbol.__t : 2 - symbol.__t;\n    var pos = [symbol.x, symbol.y];\n    var lastPos = pos.slice();\n    var quadraticAt = curveUtil.quadraticAt;\n    var quadraticDerivativeAt = curveUtil.quadraticDerivativeAt;\n    pos[0] = quadraticAt(p1[0], cp1[0], p2[0], t);\n    pos[1] = quadraticAt(p1[1], cp1[1], p2[1], t); // Tangent\n\n    var tx = symbol.__t < 1 ? quadraticDerivativeAt(p1[0], cp1[0], p2[0], t) : quadraticDerivativeAt(p2[0], cp1[0], p1[0], 1 - t);\n    var ty = symbol.__t < 1 ? quadraticDerivativeAt(p1[1], cp1[1], p2[1], t) : quadraticDerivativeAt(p2[1], cp1[1], p1[1], 1 - t);\n    symbol.rotation = -Math.atan2(ty, tx) - Math.PI / 2; // enable continuity trail for 'line', 'rect', 'roundRect' symbolType\n\n    if (this._symbolType === 'line' || this._symbolType === 'rect' || this._symbolType === 'roundRect') {\n      if (symbol.__lastT !== undefined && symbol.__lastT < symbol.__t) {\n        symbol.scaleY = vec2.dist(lastPos, pos) * 1.05; // make sure the last segment render within endPoint\n\n        if (t === 1) {\n          pos[0] = lastPos[0] + (pos[0] - lastPos[0]) / 2;\n          pos[1] = lastPos[1] + (pos[1] - lastPos[1]) / 2;\n        }\n      } else if (symbol.__lastT === 1) {\n        // After first loop, symbol.__t does NOT start with 0, so connect p1 to pos directly.\n        symbol.scaleY = 2 * vec2.dist(p1, pos);\n      } else {\n        symbol.scaleY = this._symbolScale[1];\n      }\n    }\n\n    symbol.__lastT = symbol.__t;\n    symbol.ignore = false;\n    symbol.x = pos[0];\n    symbol.y = pos[1];\n  };\n\n  EffectLine.prototype.updateLayout = function (lineData, idx) {\n    this.childAt(0).updateLayout(lineData, idx);\n    var effectModel = lineData.getItemModel(idx).getModel('effect');\n\n    this._updateEffectAnimation(lineData, effectModel, idx);\n  };\n\n  return EffectLine;\n}(graphic.Group);\n\nexport default EffectLine;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as graphic from '../../util/graphic.js';\nimport { toggleHoverEmphasis } from '../../util/states.js';\n\nvar Polyline =\n/** @class */\nfunction (_super) {\n  __extends(Polyline, _super);\n\n  function Polyline(lineData, idx, seriesScope) {\n    var _this = _super.call(this) || this;\n\n    _this._createPolyline(lineData, idx, seriesScope);\n\n    return _this;\n  }\n\n  Polyline.prototype._createPolyline = function (lineData, idx, seriesScope) {\n    // let seriesModel = lineData.hostModel;\n    var points = lineData.getItemLayout(idx);\n    var line = new graphic.Polyline({\n      shape: {\n        points: points\n      }\n    });\n    this.add(line);\n\n    this._updateCommonStl(lineData, idx, seriesScope);\n  };\n\n  ;\n\n  Polyline.prototype.updateData = function (lineData, idx, seriesScope) {\n    var seriesModel = lineData.hostModel;\n    var line = this.childAt(0);\n    var target = {\n      shape: {\n        points: lineData.getItemLayout(idx)\n      }\n    };\n    graphic.updateProps(line, target, seriesModel, idx);\n\n    this._updateCommonStl(lineData, idx, seriesScope);\n  };\n\n  ;\n\n  Polyline.prototype._updateCommonStl = function (lineData, idx, seriesScope) {\n    var line = this.childAt(0);\n    var itemModel = lineData.getItemModel(idx);\n    var emphasisLineStyle = seriesScope && seriesScope.emphasisLineStyle;\n    var focus = seriesScope && seriesScope.focus;\n    var blurScope = seriesScope && seriesScope.blurScope;\n    var emphasisDisabled = seriesScope && seriesScope.emphasisDisabled;\n\n    if (!seriesScope || lineData.hasItemOption) {\n      var emphasisModel = itemModel.getModel('emphasis');\n      emphasisLineStyle = emphasisModel.getModel('lineStyle').getLineStyle();\n      emphasisDisabled = emphasisModel.get('disabled');\n      focus = emphasisModel.get('focus');\n      blurScope = emphasisModel.get('blurScope');\n    }\n\n    line.useStyle(lineData.getItemVisual(idx, 'style'));\n    line.style.fill = null;\n    line.style.strokeNoScale = true;\n    var lineEmphasisState = line.ensureState('emphasis');\n    lineEmphasisState.style = emphasisLineStyle;\n    toggleHoverEmphasis(this, focus, blurScope, emphasisDisabled);\n  };\n\n  ;\n\n  Polyline.prototype.updateLayout = function (lineData, idx) {\n    var polyline = this.childAt(0);\n    polyline.setShape('points', lineData.getItemLayout(idx));\n  };\n\n  ;\n  return Polyline;\n}(graphic.Group);\n\nexport default Polyline;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport Polyline from './Polyline.js';\nimport EffectLine from './EffectLine.js';\nimport * as vec2 from 'zrender/lib/core/vector.js';\n\nvar EffectPolyline =\n/** @class */\nfunction (_super) {\n  __extends(EffectPolyline, _super);\n\n  function EffectPolyline() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this._lastFrame = 0;\n    _this._lastFramePercent = 0;\n    return _this;\n  } // Override\n\n\n  EffectPolyline.prototype.createLine = function (lineData, idx, seriesScope) {\n    return new Polyline(lineData, idx, seriesScope);\n  };\n\n  ; // Override\n\n  EffectPolyline.prototype._updateAnimationPoints = function (symbol, points) {\n    this._points = points;\n    var accLenArr = [0];\n    var len = 0;\n\n    for (var i = 1; i < points.length; i++) {\n      var p1 = points[i - 1];\n      var p2 = points[i];\n      len += vec2.dist(p1, p2);\n      accLenArr.push(len);\n    }\n\n    if (len === 0) {\n      this._length = 0;\n      return;\n    }\n\n    for (var i = 0; i < accLenArr.length; i++) {\n      accLenArr[i] /= len;\n    }\n\n    this._offsets = accLenArr;\n    this._length = len;\n  };\n\n  ; // Override\n\n  EffectPolyline.prototype._getLineLength = function () {\n    return this._length;\n  };\n\n  ; // Override\n\n  EffectPolyline.prototype._updateSymbolPosition = function (symbol) {\n    var t = symbol.__t < 1 ? symbol.__t : 2 - symbol.__t;\n    var points = this._points;\n    var offsets = this._offsets;\n    var len = points.length;\n\n    if (!offsets) {\n      // Has length 0\n      return;\n    }\n\n    var lastFrame = this._lastFrame;\n    var frame;\n\n    if (t < this._lastFramePercent) {\n      // Start from the next frame\n      // PENDING start from lastFrame ?\n      var start = Math.min(lastFrame + 1, len - 1);\n\n      for (frame = start; frame >= 0; frame--) {\n        if (offsets[frame] <= t) {\n          break;\n        }\n      } // PENDING really need to do this ?\n\n\n      frame = Math.min(frame, len - 2);\n    } else {\n      for (frame = lastFrame; frame < len; frame++) {\n        if (offsets[frame] > t) {\n          break;\n        }\n      }\n\n      frame = Math.min(frame - 1, len - 2);\n    }\n\n    var p = (t - offsets[frame]) / (offsets[frame + 1] - offsets[frame]);\n    var p0 = points[frame];\n    var p1 = points[frame + 1];\n    symbol.x = p0[0] * (1 - p) + p * p1[0];\n    symbol.y = p0[1] * (1 - p) + p * p1[1];\n    var tx = symbol.__t < 1 ? p1[0] - p0[0] : p0[0] - p1[0];\n    var ty = symbol.__t < 1 ? p1[1] - p0[1] : p0[1] - p1[1];\n    symbol.rotation = -Math.atan2(ty, tx) - Math.PI / 2;\n    this._lastFrame = frame;\n    this._lastFramePercent = t;\n    symbol.ignore = false;\n  };\n\n  ;\n  return EffectPolyline;\n}(EffectLine);\n\nexport default EffectPolyline;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\"; // TODO Batch by color\n\nimport * as graphic from '../../util/graphic.js';\nimport * as lineContain from 'zrender/lib/contain/line.js';\nimport * as quadraticContain from 'zrender/lib/contain/quadratic.js';\nimport { getECData } from '../../util/innerStore.js';\n\nvar LargeLinesPathShape =\n/** @class */\nfunction () {\n  function LargeLinesPathShape() {\n    this.polyline = false;\n    this.curveness = 0;\n    this.segs = [];\n  }\n\n  return LargeLinesPathShape;\n}();\n\nvar LargeLinesPath =\n/** @class */\nfunction (_super) {\n  __extends(LargeLinesPath, _super);\n\n  function LargeLinesPath(opts) {\n    var _this = _super.call(this, opts) || this;\n\n    _this._off = 0;\n    _this.hoverDataIdx = -1;\n    return _this;\n  }\n\n  LargeLinesPath.prototype.reset = function () {\n    this.notClear = false;\n    this._off = 0;\n  };\n\n  LargeLinesPath.prototype.getDefaultStyle = function () {\n    return {\n      stroke: '#000',\n      fill: null\n    };\n  };\n\n  LargeLinesPath.prototype.getDefaultShape = function () {\n    return new LargeLinesPathShape();\n  };\n\n  LargeLinesPath.prototype.buildPath = function (ctx, shape) {\n    var segs = shape.segs;\n    var curveness = shape.curveness;\n    var i;\n\n    if (shape.polyline) {\n      for (i = this._off; i < segs.length;) {\n        var count = segs[i++];\n\n        if (count > 0) {\n          ctx.moveTo(segs[i++], segs[i++]);\n\n          for (var k = 1; k < count; k++) {\n            ctx.lineTo(segs[i++], segs[i++]);\n          }\n        }\n      }\n    } else {\n      for (i = this._off; i < segs.length;) {\n        var x0 = segs[i++];\n        var y0 = segs[i++];\n        var x1 = segs[i++];\n        var y1 = segs[i++];\n        ctx.moveTo(x0, y0);\n\n        if (curveness > 0) {\n          var x2 = (x0 + x1) / 2 - (y0 - y1) * curveness;\n          var y2 = (y0 + y1) / 2 - (x1 - x0) * curveness;\n          ctx.quadraticCurveTo(x2, y2, x1, y1);\n        } else {\n          ctx.lineTo(x1, y1);\n        }\n      }\n    }\n\n    if (this.incremental) {\n      this._off = i;\n      this.notClear = true;\n    }\n  };\n\n  LargeLinesPath.prototype.findDataIndex = function (x, y) {\n    var shape = this.shape;\n    var segs = shape.segs;\n    var curveness = shape.curveness;\n    var lineWidth = this.style.lineWidth;\n\n    if (shape.polyline) {\n      var dataIndex = 0;\n\n      for (var i = 0; i < segs.length;) {\n        var count = segs[i++];\n\n        if (count > 0) {\n          var x0 = segs[i++];\n          var y0 = segs[i++];\n\n          for (var k = 1; k < count; k++) {\n            var x1 = segs[i++];\n            var y1 = segs[i++];\n\n            if (lineContain.containStroke(x0, y0, x1, y1, lineWidth, x, y)) {\n              return dataIndex;\n            }\n          }\n        }\n\n        dataIndex++;\n      }\n    } else {\n      var dataIndex = 0;\n\n      for (var i = 0; i < segs.length;) {\n        var x0 = segs[i++];\n        var y0 = segs[i++];\n        var x1 = segs[i++];\n        var y1 = segs[i++];\n\n        if (curveness > 0) {\n          var x2 = (x0 + x1) / 2 - (y0 - y1) * curveness;\n          var y2 = (y0 + y1) / 2 - (x1 - x0) * curveness;\n\n          if (quadraticContain.containStroke(x0, y0, x2, y2, x1, y1, lineWidth, x, y)) {\n            return dataIndex;\n          }\n        } else {\n          if (lineContain.containStroke(x0, y0, x1, y1, lineWidth, x, y)) {\n            return dataIndex;\n          }\n        }\n\n        dataIndex++;\n      }\n    }\n\n    return -1;\n  };\n\n  LargeLinesPath.prototype.contain = function (x, y) {\n    var localPos = this.transformCoordToLocal(x, y);\n    var rect = this.getBoundingRect();\n    x = localPos[0];\n    y = localPos[1];\n\n    if (rect.contain(x, y)) {\n      // Cache found data index.\n      var dataIdx = this.hoverDataIdx = this.findDataIndex(x, y);\n      return dataIdx >= 0;\n    }\n\n    this.hoverDataIdx = -1;\n    return false;\n  };\n\n  LargeLinesPath.prototype.getBoundingRect = function () {\n    // Ignore stroke for large symbol draw.\n    var rect = this._rect;\n\n    if (!rect) {\n      var shape = this.shape;\n      var points = shape.segs;\n      var minX = Infinity;\n      var minY = Infinity;\n      var maxX = -Infinity;\n      var maxY = -Infinity;\n\n      for (var i = 0; i < points.length;) {\n        var x = points[i++];\n        var y = points[i++];\n        minX = Math.min(x, minX);\n        maxX = Math.max(x, maxX);\n        minY = Math.min(y, minY);\n        maxY = Math.max(y, maxY);\n      }\n\n      rect = this._rect = new graphic.BoundingRect(minX, minY, maxX, maxY);\n    }\n\n    return rect;\n  };\n\n  return LargeLinesPath;\n}(graphic.Path);\n\nvar LargeLineDraw =\n/** @class */\nfunction () {\n  function LargeLineDraw() {\n    this.group = new graphic.Group();\n  }\n  /**\r\n   * Update symbols draw by new data\r\n   */\n\n\n  LargeLineDraw.prototype.updateData = function (data) {\n    this._clear();\n\n    var lineEl = this._create();\n\n    lineEl.setShape({\n      segs: data.getLayout('linesPoints')\n    });\n\n    this._setCommon(lineEl, data);\n  };\n\n  ;\n  /**\r\n   * @override\r\n   */\n\n  LargeLineDraw.prototype.incrementalPrepareUpdate = function (data) {\n    this.group.removeAll();\n\n    this._clear();\n  };\n\n  ;\n  /**\r\n   * @override\r\n   */\n\n  LargeLineDraw.prototype.incrementalUpdate = function (taskParams, data) {\n    var lastAdded = this._newAdded[0];\n    var linePoints = data.getLayout('linesPoints');\n    var oldSegs = lastAdded && lastAdded.shape.segs; // Merging the exists. Each element has 1e4 points.\n    // Consider the performance balance between too much elements and too much points in one shape(may affect hover optimization)\n\n    if (oldSegs && oldSegs.length < 2e4) {\n      var oldLen = oldSegs.length;\n      var newSegs = new Float32Array(oldLen + linePoints.length); // Concat two array\n\n      newSegs.set(oldSegs);\n      newSegs.set(linePoints, oldLen);\n      lastAdded.setShape({\n        segs: newSegs\n      });\n    } else {\n      // Clear\n      this._newAdded = [];\n\n      var lineEl = this._create();\n\n      lineEl.incremental = true;\n      lineEl.setShape({\n        segs: linePoints\n      });\n\n      this._setCommon(lineEl, data);\n\n      lineEl.__startIndex = taskParams.start;\n    }\n  };\n  /**\r\n   * @override\r\n   */\n\n\n  LargeLineDraw.prototype.remove = function () {\n    this._clear();\n  };\n\n  LargeLineDraw.prototype.eachRendered = function (cb) {\n    this._newAdded[0] && cb(this._newAdded[0]);\n  };\n\n  LargeLineDraw.prototype._create = function () {\n    var lineEl = new LargeLinesPath({\n      cursor: 'default',\n      ignoreCoarsePointer: true\n    });\n\n    this._newAdded.push(lineEl);\n\n    this.group.add(lineEl);\n    return lineEl;\n  };\n\n  LargeLineDraw.prototype._setCommon = function (lineEl, data, isIncremental) {\n    var hostModel = data.hostModel;\n    lineEl.setShape({\n      polyline: hostModel.get('polyline'),\n      curveness: hostModel.get(['lineStyle', 'curveness'])\n    });\n    lineEl.useStyle(hostModel.getModel('lineStyle').getLineStyle());\n    lineEl.style.strokeNoScale = true;\n    var style = data.getVisual('style');\n\n    if (style && style.stroke) {\n      lineEl.setStyle('stroke', style.stroke);\n    }\n\n    lineEl.setStyle('fill', null);\n    var ecData = getECData(lineEl); // Enable tooltip\n    // PENDING May have performance issue when path is extremely large\n\n    ecData.seriesIndex = hostModel.seriesIndex;\n    lineEl.on('mousemove', function (e) {\n      ecData.dataIndex = null;\n      var dataIndex = lineEl.hoverDataIdx;\n\n      if (dataIndex > 0) {\n        // Provide dataIndex for tooltip\n        ecData.dataIndex = dataIndex + lineEl.__startIndex;\n      }\n    });\n  };\n\n  ;\n\n  LargeLineDraw.prototype._clear = function () {\n    this._newAdded = [];\n    this.group.removeAll();\n  };\n\n  ;\n  return LargeLineDraw;\n}();\n\nexport default LargeLineDraw;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\n\n/* global Float32Array */\nimport createRenderPlanner from '../helper/createRenderPlanner.js';\nimport { error } from '../../util/log.js';\nvar linesLayout = {\n  seriesType: 'lines',\n  plan: createRenderPlanner(),\n  reset: function (seriesModel) {\n    var coordSys = seriesModel.coordinateSystem;\n\n    if (!coordSys) {\n      if (process.env.NODE_ENV !== 'production') {\n        error('The lines series must have a coordinate system.');\n      }\n\n      return;\n    }\n\n    var isPolyline = seriesModel.get('polyline');\n    var isLarge = seriesModel.pipelineContext.large;\n    return {\n      progress: function (params, lineData) {\n        var lineCoords = [];\n\n        if (isLarge) {\n          var points = void 0;\n          var segCount = params.end - params.start;\n\n          if (isPolyline) {\n            var totalCoordsCount = 0;\n\n            for (var i = params.start; i < params.end; i++) {\n              totalCoordsCount += seriesModel.getLineCoordsCount(i);\n            }\n\n            points = new Float32Array(segCount + totalCoordsCount * 2);\n          } else {\n            points = new Float32Array(segCount * 4);\n          }\n\n          var offset = 0;\n          var pt = [];\n\n          for (var i = params.start; i < params.end; i++) {\n            var len = seriesModel.getLineCoords(i, lineCoords);\n\n            if (isPolyline) {\n              points[offset++] = len;\n            }\n\n            for (var k = 0; k < len; k++) {\n              pt = coordSys.dataToPoint(lineCoords[k], false, pt);\n              points[offset++] = pt[0];\n              points[offset++] = pt[1];\n            }\n          }\n\n          lineData.setLayout('linesPoints', points);\n        } else {\n          for (var i = params.start; i < params.end; i++) {\n            var itemModel = lineData.getItemModel(i);\n            var len = seriesModel.getLineCoords(i, lineCoords);\n            var pts = [];\n\n            if (isPolyline) {\n              for (var j = 0; j < len; j++) {\n                pts.push(coordSys.dataToPoint(lineCoords[j]));\n              }\n            } else {\n              pts[0] = coordSys.dataToPoint(lineCoords[0]);\n              pts[1] = coordSys.dataToPoint(lineCoords[1]);\n              var curveness = itemModel.get(['lineStyle', 'curveness']);\n\n              if (+curveness) {\n                pts[2] = [(pts[0][0] + pts[1][0]) / 2 - (pts[0][1] - pts[1][1]) * curveness, (pts[0][1] + pts[1][1]) / 2 - (pts[1][0] - pts[0][0]) * curveness];\n              }\n            }\n\n            lineData.setItemLayout(i, pts);\n          }\n        }\n      }\n    };\n  }\n};\nexport default linesLayout;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport LineDraw from '../helper/LineDraw.js';\nimport EffectLine from '../helper/EffectLine.js';\nimport Line from '../helper/Line.js';\nimport Polyline from '../helper/Polyline.js';\nimport EffectPolyline from '../helper/EffectPolyline.js';\nimport LargeLineDraw from '../helper/LargeLineDraw.js';\nimport linesLayout from './linesLayout.js';\nimport { createClipPath } from '../helper/createClipPathFromCoordSys.js';\nimport ChartView from '../../view/Chart.js';\n\nvar LinesView =\n/** @class */\nfunction (_super) {\n  __extends(LinesView, _super);\n\n  function LinesView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = LinesView.type;\n    return _this;\n  }\n\n  LinesView.prototype.render = function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData();\n\n    var lineDraw = this._updateLineDraw(data, seriesModel);\n\n    var zlevel = seriesModel.get('zlevel');\n    var trailLength = seriesModel.get(['effect', 'trailLength']);\n    var zr = api.getZr(); // Avoid the drag cause ghost shadow\n    // FIXME Better way ?\n    // SVG doesn't support\n\n    var isSvg = zr.painter.getType() === 'svg';\n\n    if (!isSvg) {\n      zr.painter.getLayer(zlevel).clear(true);\n    } // Config layer with motion blur\n\n\n    if (this._lastZlevel != null && !isSvg) {\n      zr.configLayer(this._lastZlevel, {\n        motionBlur: false\n      });\n    }\n\n    if (this._showEffect(seriesModel) && trailLength > 0) {\n      if (!isSvg) {\n        zr.configLayer(zlevel, {\n          motionBlur: true,\n          lastFrameAlpha: Math.max(Math.min(trailLength / 10 + 0.9, 1), 0)\n        });\n      } else if (process.env.NODE_ENV !== 'production') {\n        console.warn('SVG render mode doesn\\'t support lines with trail effect');\n      }\n    }\n\n    lineDraw.updateData(data);\n    var clipPath = seriesModel.get('clip', true) && createClipPath(seriesModel.coordinateSystem, false, seriesModel);\n\n    if (clipPath) {\n      this.group.setClipPath(clipPath);\n    } else {\n      this.group.removeClipPath();\n    }\n\n    this._lastZlevel = zlevel;\n    this._finished = true;\n  };\n\n  LinesView.prototype.incrementalPrepareRender = function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData();\n\n    var lineDraw = this._updateLineDraw(data, seriesModel);\n\n    lineDraw.incrementalPrepareUpdate(data);\n\n    this._clearLayer(api);\n\n    this._finished = false;\n  };\n\n  LinesView.prototype.incrementalRender = function (taskParams, seriesModel, ecModel) {\n    this._lineDraw.incrementalUpdate(taskParams, seriesModel.getData());\n\n    this._finished = taskParams.end === seriesModel.getData().count();\n  };\n\n  LinesView.prototype.eachRendered = function (cb) {\n    this._lineDraw && this._lineDraw.eachRendered(cb);\n  };\n\n  LinesView.prototype.updateTransform = function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData();\n    var pipelineContext = seriesModel.pipelineContext;\n\n    if (!this._finished || pipelineContext.large || pipelineContext.progressiveRender) {\n      // TODO Don't have to do update in large mode. Only do it when there are millions of data.\n      return {\n        update: true\n      };\n    } else {\n      // TODO Use same logic with ScatterView.\n      // Manually update layout\n      var res = linesLayout.reset(seriesModel, ecModel, api);\n\n      if (res.progress) {\n        res.progress({\n          start: 0,\n          end: data.count(),\n          count: data.count()\n        }, data);\n      } // Not in large mode\n\n\n      this._lineDraw.updateLayout();\n\n      this._clearLayer(api);\n    }\n  };\n\n  LinesView.prototype._updateLineDraw = function (data, seriesModel) {\n    var lineDraw = this._lineDraw;\n\n    var hasEffect = this._showEffect(seriesModel);\n\n    var isPolyline = !!seriesModel.get('polyline');\n    var pipelineContext = seriesModel.pipelineContext;\n    var isLargeDraw = pipelineContext.large;\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (hasEffect && isLargeDraw) {\n        console.warn('Large lines not support effect');\n      }\n    }\n\n    if (!lineDraw || hasEffect !== this._hasEffet || isPolyline !== this._isPolyline || isLargeDraw !== this._isLargeDraw) {\n      if (lineDraw) {\n        lineDraw.remove();\n      }\n\n      lineDraw = this._lineDraw = isLargeDraw ? new LargeLineDraw() : new LineDraw(isPolyline ? hasEffect ? EffectPolyline : Polyline : hasEffect ? EffectLine : Line);\n      this._hasEffet = hasEffect;\n      this._isPolyline = isPolyline;\n      this._isLargeDraw = isLargeDraw;\n    }\n\n    this.group.add(lineDraw.group);\n    return lineDraw;\n  };\n\n  LinesView.prototype._showEffect = function (seriesModel) {\n    return !!seriesModel.get(['effect', 'show']);\n  };\n\n  LinesView.prototype._clearLayer = function (api) {\n    // Not use motion when dragging or zooming\n    var zr = api.getZr();\n    var isSvg = zr.painter.getType() === 'svg';\n\n    if (!isSvg && this._lastZlevel != null) {\n      zr.painter.getLayer(this._lastZlevel).clear(true);\n    }\n  };\n\n  LinesView.prototype.remove = function (ecModel, api) {\n    this._lineDraw && this._lineDraw.remove();\n    this._lineDraw = null; // Clear motion when lineDraw is removed\n\n    this._clearLayer(api);\n  };\n\n  LinesView.prototype.dispose = function (ecModel, api) {\n    this.remove(ecModel, api);\n  };\n\n  LinesView.type = 'lines';\n  return LinesView;\n}(ChartView);\n\nexport default LinesView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\n/* global Uint32Array, Float64Array, Float32Array */\n\nimport SeriesModel from '../../model/Series.js';\nimport SeriesData from '../../data/SeriesData.js';\nimport { concatArray, mergeAll, map, isNumber } from 'zrender/lib/core/util.js';\nimport CoordinateSystem from '../../core/CoordinateSystem.js';\nimport { createTooltipMarkup } from '../../component/tooltip/tooltipMarkup.js';\nvar Uint32Arr = typeof Uint32Array === 'undefined' ? Array : Uint32Array;\nvar Float64Arr = typeof Float64Array === 'undefined' ? Array : Float64Array;\n\nfunction compatEc2(seriesOpt) {\n  var data = seriesOpt.data;\n\n  if (data && data[0] && data[0][0] && data[0][0].coord) {\n    if (process.env.NODE_ENV !== 'production') {\n      console.warn('Lines data configuration has been changed to' + ' { coords:[[1,2],[2,3]] }');\n    }\n\n    seriesOpt.data = map(data, function (itemOpt) {\n      var coords = [itemOpt[0].coord, itemOpt[1].coord];\n      var target = {\n        coords: coords\n      };\n\n      if (itemOpt[0].name) {\n        target.fromName = itemOpt[0].name;\n      }\n\n      if (itemOpt[1].name) {\n        target.toName = itemOpt[1].name;\n      }\n\n      return mergeAll([target, itemOpt[0], itemOpt[1]]);\n    });\n  }\n}\n\nvar LinesSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(LinesSeriesModel, _super);\n\n  function LinesSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = LinesSeriesModel.type;\n    _this.visualStyleAccessPath = 'lineStyle';\n    _this.visualDrawType = 'stroke';\n    return _this;\n  }\n\n  LinesSeriesModel.prototype.init = function (option) {\n    // The input data may be null/undefined.\n    option.data = option.data || []; // Not using preprocessor because mergeOption may not have series.type\n\n    compatEc2(option);\n\n    var result = this._processFlatCoordsArray(option.data);\n\n    this._flatCoords = result.flatCoords;\n    this._flatCoordsOffset = result.flatCoordsOffset;\n\n    if (result.flatCoords) {\n      option.data = new Float32Array(result.count);\n    }\n\n    _super.prototype.init.apply(this, arguments);\n  };\n\n  LinesSeriesModel.prototype.mergeOption = function (option) {\n    compatEc2(option);\n\n    if (option.data) {\n      // Only update when have option data to merge.\n      var result = this._processFlatCoordsArray(option.data);\n\n      this._flatCoords = result.flatCoords;\n      this._flatCoordsOffset = result.flatCoordsOffset;\n\n      if (result.flatCoords) {\n        option.data = new Float32Array(result.count);\n      }\n    }\n\n    _super.prototype.mergeOption.apply(this, arguments);\n  };\n\n  LinesSeriesModel.prototype.appendData = function (params) {\n    var result = this._processFlatCoordsArray(params.data);\n\n    if (result.flatCoords) {\n      if (!this._flatCoords) {\n        this._flatCoords = result.flatCoords;\n        this._flatCoordsOffset = result.flatCoordsOffset;\n      } else {\n        this._flatCoords = concatArray(this._flatCoords, result.flatCoords);\n        this._flatCoordsOffset = concatArray(this._flatCoordsOffset, result.flatCoordsOffset);\n      }\n\n      params.data = new Float32Array(result.count);\n    }\n\n    this.getRawData().appendData(params.data);\n  };\n\n  LinesSeriesModel.prototype._getCoordsFromItemModel = function (idx) {\n    var itemModel = this.getData().getItemModel(idx);\n    var coords = itemModel.option instanceof Array ? itemModel.option : itemModel.getShallow('coords');\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (!(coords instanceof Array && coords.length > 0 && coords[0] instanceof Array)) {\n        throw new Error('Invalid coords ' + JSON.stringify(coords) + '. Lines must have 2d coords array in data item.');\n      }\n    }\n\n    return coords;\n  };\n\n  LinesSeriesModel.prototype.getLineCoordsCount = function (idx) {\n    if (this._flatCoordsOffset) {\n      return this._flatCoordsOffset[idx * 2 + 1];\n    } else {\n      return this._getCoordsFromItemModel(idx).length;\n    }\n  };\n\n  LinesSeriesModel.prototype.getLineCoords = function (idx, out) {\n    if (this._flatCoordsOffset) {\n      var offset = this._flatCoordsOffset[idx * 2];\n      var len = this._flatCoordsOffset[idx * 2 + 1];\n\n      for (var i = 0; i < len; i++) {\n        out[i] = out[i] || [];\n        out[i][0] = this._flatCoords[offset + i * 2];\n        out[i][1] = this._flatCoords[offset + i * 2 + 1];\n      }\n\n      return len;\n    } else {\n      var coords = this._getCoordsFromItemModel(idx);\n\n      for (var i = 0; i < coords.length; i++) {\n        out[i] = out[i] || [];\n        out[i][0] = coords[i][0];\n        out[i][1] = coords[i][1];\n      }\n\n      return coords.length;\n    }\n  };\n\n  LinesSeriesModel.prototype._processFlatCoordsArray = function (data) {\n    var startOffset = 0;\n\n    if (this._flatCoords) {\n      startOffset = this._flatCoords.length;\n    } // Stored as a typed array. In format\n    // Points Count(2) | x | y | x | y | Points Count(3) | x |  y | x | y | x | y |\n\n\n    if (isNumber(data[0])) {\n      var len = data.length; // Store offset and len of each segment\n\n      var coordsOffsetAndLenStorage = new Uint32Arr(len);\n      var coordsStorage = new Float64Arr(len);\n      var coordsCursor = 0;\n      var offsetCursor = 0;\n      var dataCount = 0;\n\n      for (var i = 0; i < len;) {\n        dataCount++;\n        var count = data[i++]; // Offset\n\n        coordsOffsetAndLenStorage[offsetCursor++] = coordsCursor + startOffset; // Len\n\n        coordsOffsetAndLenStorage[offsetCursor++] = count;\n\n        for (var k = 0; k < count; k++) {\n          var x = data[i++];\n          var y = data[i++];\n          coordsStorage[coordsCursor++] = x;\n          coordsStorage[coordsCursor++] = y;\n\n          if (i > len) {\n            if (process.env.NODE_ENV !== 'production') {\n              throw new Error('Invalid data format.');\n            }\n          }\n        }\n      }\n\n      return {\n        flatCoordsOffset: new Uint32Array(coordsOffsetAndLenStorage.buffer, 0, offsetCursor),\n        flatCoords: coordsStorage,\n        count: dataCount\n      };\n    }\n\n    return {\n      flatCoordsOffset: null,\n      flatCoords: null,\n      count: data.length\n    };\n  };\n\n  LinesSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    if (process.env.NODE_ENV !== 'production') {\n      var CoordSys = CoordinateSystem.get(option.coordinateSystem);\n\n      if (!CoordSys) {\n        throw new Error('Unknown coordinate system ' + option.coordinateSystem);\n      }\n    }\n\n    var lineData = new SeriesData(['value'], this);\n    lineData.hasItemOption = false;\n    lineData.initData(option.data, [], function (dataItem, dimName, dataIndex, dimIndex) {\n      // dataItem is simply coords\n      if (dataItem instanceof Array) {\n        return NaN;\n      } else {\n        lineData.hasItemOption = true;\n        var value = dataItem.value;\n\n        if (value != null) {\n          return value instanceof Array ? value[dimIndex] : value;\n        }\n      }\n    });\n    return lineData;\n  };\n\n  LinesSeriesModel.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\n    var data = this.getData();\n    var itemModel = data.getItemModel(dataIndex);\n    var name = itemModel.get('name');\n\n    if (name) {\n      return name;\n    }\n\n    var fromName = itemModel.get('fromName');\n    var toName = itemModel.get('toName');\n    var nameArr = [];\n    fromName != null && nameArr.push(fromName);\n    toName != null && nameArr.push(toName);\n    return createTooltipMarkup('nameValue', {\n      name: nameArr.join(' > ')\n    });\n  };\n\n  LinesSeriesModel.prototype.preventIncremental = function () {\n    return !!this.get(['effect', 'show']);\n  };\n\n  LinesSeriesModel.prototype.getProgressive = function () {\n    var progressive = this.option.progressive;\n\n    if (progressive == null) {\n      return this.option.large ? 1e4 : this.get('progressive');\n    }\n\n    return progressive;\n  };\n\n  LinesSeriesModel.prototype.getProgressiveThreshold = function () {\n    var progressiveThreshold = this.option.progressiveThreshold;\n\n    if (progressiveThreshold == null) {\n      return this.option.large ? 2e4 : this.get('progressiveThreshold');\n    }\n\n    return progressiveThreshold;\n  };\n\n  LinesSeriesModel.prototype.getZLevelKey = function () {\n    var effectModel = this.getModel('effect');\n    var trailLength = effectModel.get('trailLength');\n    return this.getData().count() > this.getProgressiveThreshold() // Each progressive series has individual key.\n    ? this.id : effectModel.get('show') && trailLength > 0 ? trailLength + '' : '';\n  };\n\n  LinesSeriesModel.type = 'series.lines';\n  LinesSeriesModel.dependencies = ['grid', 'polar', 'geo', 'calendar'];\n  LinesSeriesModel.defaultOption = {\n    coordinateSystem: 'geo',\n    // zlevel: 0,\n    z: 2,\n    legendHoverLink: true,\n    // Cartesian coordinate system\n    xAxisIndex: 0,\n    yAxisIndex: 0,\n    symbol: ['none', 'none'],\n    symbolSize: [10, 10],\n    // Geo coordinate system\n    geoIndex: 0,\n    effect: {\n      show: false,\n      period: 4,\n      constantSpeed: 0,\n      symbol: 'circle',\n      symbolSize: 3,\n      loop: true,\n      trailLength: 0.2\n    },\n    large: false,\n    // Available when large is true\n    largeThreshold: 2000,\n    polyline: false,\n    clip: true,\n    label: {\n      show: false,\n      position: 'end' // distance: 5,\n      // formatter: 标签文本格式器，同Tooltip.formatter，不支持异步回调\n\n    },\n    lineStyle: {\n      opacity: 0.5\n    }\n  };\n  return LinesSeriesModel;\n}(SeriesModel);\n\nexport default LinesSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nfunction normalize(a) {\n  if (!(a instanceof Array)) {\n    a = [a, a];\n  }\n\n  return a;\n}\n\nvar linesVisual = {\n  seriesType: 'lines',\n  reset: function (seriesModel) {\n    var symbolType = normalize(seriesModel.get('symbol'));\n    var symbolSize = normalize(seriesModel.get('symbolSize'));\n    var data = seriesModel.getData();\n    data.setVisual('fromSymbol', symbolType && symbolType[0]);\n    data.setVisual('toSymbol', symbolType && symbolType[1]);\n    data.setVisual('fromSymbolSize', symbolSize && symbolSize[0]);\n    data.setVisual('toSymbolSize', symbolSize && symbolSize[1]);\n\n    function dataEach(data, idx) {\n      var itemModel = data.getItemModel(idx);\n      var symbolType = normalize(itemModel.getShallow('symbol', true));\n      var symbolSize = normalize(itemModel.getShallow('symbolSize', true));\n      symbolType[0] && data.setItemVisual(idx, 'fromSymbol', symbolType[0]);\n      symbolType[1] && data.setItemVisual(idx, 'toSymbol', symbolType[1]);\n      symbolSize[0] && data.setItemVisual(idx, 'fromSymbolSize', symbolSize[0]);\n      symbolSize[1] && data.setItemVisual(idx, 'toSymbolSize', symbolSize[1]);\n    }\n\n    return {\n      dataEach: data.hasItemOption ? dataEach : null\n    };\n  }\n};\nexport default linesVisual;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport LinesView from './LinesView.js';\nimport LinesSeriesModel from './LinesSeries.js';\nimport linesLayout from './linesLayout.js';\nimport linesVisual from './linesVisual.js';\nexport function install(registers) {\n  registers.registerChartView(LinesView);\n  registers.registerSeriesModel(LinesSeriesModel);\n  registers.registerLayout(linesLayout);\n  registers.registerVisual(linesVisual);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\n\n/* global Uint8ClampedArray */\nimport { platformApi } from 'zrender/lib/core/platform.js';\nvar GRADIENT_LEVELS = 256;\n\nvar HeatmapLayer =\n/** @class */\nfunction () {\n  function HeatmapLayer() {\n    this.blurSize = 30;\n    this.pointSize = 20;\n    this.maxOpacity = 1;\n    this.minOpacity = 0;\n    this._gradientPixels = {\n      inRange: null,\n      outOfRange: null\n    };\n    var canvas = platformApi.createCanvas();\n    this.canvas = canvas;\n  }\n  /**\r\n   * Renders Heatmap and returns the rendered canvas\r\n   * @param data array of data, each has x, y, value\r\n   * @param width canvas width\r\n   * @param height canvas height\r\n   */\n\n\n  HeatmapLayer.prototype.update = function (data, width, height, normalize, colorFunc, isInRange) {\n    var brush = this._getBrush();\n\n    var gradientInRange = this._getGradient(colorFunc, 'inRange');\n\n    var gradientOutOfRange = this._getGradient(colorFunc, 'outOfRange');\n\n    var r = this.pointSize + this.blurSize;\n    var canvas = this.canvas;\n    var ctx = canvas.getContext('2d');\n    var len = data.length;\n    canvas.width = width;\n    canvas.height = height;\n\n    for (var i = 0; i < len; ++i) {\n      var p = data[i];\n      var x = p[0];\n      var y = p[1];\n      var value = p[2]; // calculate alpha using value\n\n      var alpha = normalize(value); // draw with the circle brush with alpha\n\n      ctx.globalAlpha = alpha;\n      ctx.drawImage(brush, x - r, y - r);\n    }\n\n    if (!canvas.width || !canvas.height) {\n      // Avoid \"Uncaught DOMException: Failed to execute 'getImageData' on\n      // 'CanvasRenderingContext2D': The source height is 0.\"\n      return canvas;\n    } // colorize the canvas using alpha value and set with gradient\n\n\n    var imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n    var pixels = imageData.data;\n    var offset = 0;\n    var pixelLen = pixels.length;\n    var minOpacity = this.minOpacity;\n    var maxOpacity = this.maxOpacity;\n    var diffOpacity = maxOpacity - minOpacity;\n\n    while (offset < pixelLen) {\n      var alpha = pixels[offset + 3] / 256;\n      var gradientOffset = Math.floor(alpha * (GRADIENT_LEVELS - 1)) * 4; // Simple optimize to ignore the empty data\n\n      if (alpha > 0) {\n        var gradient = isInRange(alpha) ? gradientInRange : gradientOutOfRange; // Any alpha > 0 will be mapped to [minOpacity, maxOpacity]\n\n        alpha > 0 && (alpha = alpha * diffOpacity + minOpacity);\n        pixels[offset++] = gradient[gradientOffset];\n        pixels[offset++] = gradient[gradientOffset + 1];\n        pixels[offset++] = gradient[gradientOffset + 2];\n        pixels[offset++] = gradient[gradientOffset + 3] * alpha * 256;\n      } else {\n        offset += 4;\n      }\n    }\n\n    ctx.putImageData(imageData, 0, 0);\n    return canvas;\n  };\n  /**\r\n   * get canvas of a black circle brush used for canvas to draw later\r\n   */\n\n\n  HeatmapLayer.prototype._getBrush = function () {\n    var brushCanvas = this._brushCanvas || (this._brushCanvas = platformApi.createCanvas()); // set brush size\n\n    var r = this.pointSize + this.blurSize;\n    var d = r * 2;\n    brushCanvas.width = d;\n    brushCanvas.height = d;\n    var ctx = brushCanvas.getContext('2d');\n    ctx.clearRect(0, 0, d, d); // in order to render shadow without the distinct circle,\n    // draw the distinct circle in an invisible place,\n    // and use shadowOffset to draw shadow in the center of the canvas\n\n    ctx.shadowOffsetX = d;\n    ctx.shadowBlur = this.blurSize; // draw the shadow in black, and use alpha and shadow blur to generate\n    // color in color map\n\n    ctx.shadowColor = '#000'; // draw circle in the left to the canvas\n\n    ctx.beginPath();\n    ctx.arc(-r, r, this.pointSize, 0, Math.PI * 2, true);\n    ctx.closePath();\n    ctx.fill();\n    return brushCanvas;\n  };\n  /**\r\n   * get gradient color map\r\n   * @private\r\n   */\n\n\n  HeatmapLayer.prototype._getGradient = function (colorFunc, state) {\n    var gradientPixels = this._gradientPixels;\n    var pixelsSingleState = gradientPixels[state] || (gradientPixels[state] = new Uint8ClampedArray(256 * 4));\n    var color = [0, 0, 0, 0];\n    var off = 0;\n\n    for (var i = 0; i < 256; i++) {\n      colorFunc[state](i / 255, true, color);\n      pixelsSingleState[off++] = color[0];\n      pixelsSingleState[off++] = color[1];\n      pixelsSingleState[off++] = color[2];\n      pixelsSingleState[off++] = color[3];\n    }\n\n    return pixelsSingleState;\n  };\n\n  return HeatmapLayer;\n}();\n\nexport default HeatmapLayer;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as graphic from '../../util/graphic.js';\nimport { toggleHoverEmphasis } from '../../util/states.js';\nimport HeatmapLayer from './HeatmapLayer.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport ChartView from '../../view/Chart.js';\nimport { isCoordinateSystemType } from '../../coord/CoordinateSystem.js';\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle.js';\n\nfunction getIsInPiecewiseRange(dataExtent, pieceList, selected) {\n  var dataSpan = dataExtent[1] - dataExtent[0];\n  pieceList = zrUtil.map(pieceList, function (piece) {\n    return {\n      interval: [(piece.interval[0] - dataExtent[0]) / dataSpan, (piece.interval[1] - dataExtent[0]) / dataSpan]\n    };\n  });\n  var len = pieceList.length;\n  var lastIndex = 0;\n  return function (val) {\n    var i; // Try to find in the location of the last found\n\n    for (i = lastIndex; i < len; i++) {\n      var interval = pieceList[i].interval;\n\n      if (interval[0] <= val && val <= interval[1]) {\n        lastIndex = i;\n        break;\n      }\n    }\n\n    if (i === len) {\n      // Not found, back interation\n      for (i = lastIndex - 1; i >= 0; i--) {\n        var interval = pieceList[i].interval;\n\n        if (interval[0] <= val && val <= interval[1]) {\n          lastIndex = i;\n          break;\n        }\n      }\n    }\n\n    return i >= 0 && i < len && selected[i];\n  };\n}\n\nfunction getIsInContinuousRange(dataExtent, range) {\n  var dataSpan = dataExtent[1] - dataExtent[0];\n  range = [(range[0] - dataExtent[0]) / dataSpan, (range[1] - dataExtent[0]) / dataSpan];\n  return function (val) {\n    return val >= range[0] && val <= range[1];\n  };\n}\n\nfunction isGeoCoordSys(coordSys) {\n  var dimensions = coordSys.dimensions; // Not use coordSys.type === 'geo' because coordSys maybe extended\n\n  return dimensions[0] === 'lng' && dimensions[1] === 'lat';\n}\n\nvar HeatmapView =\n/** @class */\nfunction (_super) {\n  __extends(HeatmapView, _super);\n\n  function HeatmapView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = HeatmapView.type;\n    return _this;\n  }\n\n  HeatmapView.prototype.render = function (seriesModel, ecModel, api) {\n    var visualMapOfThisSeries;\n    ecModel.eachComponent('visualMap', function (visualMap) {\n      visualMap.eachTargetSeries(function (targetSeries) {\n        if (targetSeries === seriesModel) {\n          visualMapOfThisSeries = visualMap;\n        }\n      });\n    });\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (!visualMapOfThisSeries) {\n        throw new Error('Heatmap must use with visualMap');\n      }\n    } // Clear previously rendered progressive elements.\n\n\n    this._progressiveEls = null;\n    this.group.removeAll();\n    var coordSys = seriesModel.coordinateSystem;\n\n    if (coordSys.type === 'cartesian2d' || coordSys.type === 'calendar') {\n      this._renderOnCartesianAndCalendar(seriesModel, api, 0, seriesModel.getData().count());\n    } else if (isGeoCoordSys(coordSys)) {\n      this._renderOnGeo(coordSys, seriesModel, visualMapOfThisSeries, api);\n    }\n  };\n\n  HeatmapView.prototype.incrementalPrepareRender = function (seriesModel, ecModel, api) {\n    this.group.removeAll();\n  };\n\n  HeatmapView.prototype.incrementalRender = function (params, seriesModel, ecModel, api) {\n    var coordSys = seriesModel.coordinateSystem;\n\n    if (coordSys) {\n      // geo does not support incremental rendering?\n      if (isGeoCoordSys(coordSys)) {\n        this.render(seriesModel, ecModel, api);\n      } else {\n        this._progressiveEls = [];\n\n        this._renderOnCartesianAndCalendar(seriesModel, api, params.start, params.end, true);\n      }\n    }\n  };\n\n  HeatmapView.prototype.eachRendered = function (cb) {\n    graphic.traverseElements(this._progressiveEls || this.group, cb);\n  };\n\n  HeatmapView.prototype._renderOnCartesianAndCalendar = function (seriesModel, api, start, end, incremental) {\n    var coordSys = seriesModel.coordinateSystem;\n    var isCartesian2d = isCoordinateSystemType(coordSys, 'cartesian2d');\n    var width;\n    var height;\n    var xAxisExtent;\n    var yAxisExtent;\n\n    if (isCartesian2d) {\n      var xAxis = coordSys.getAxis('x');\n      var yAxis = coordSys.getAxis('y');\n\n      if (process.env.NODE_ENV !== 'production') {\n        if (!(xAxis.type === 'category' && yAxis.type === 'category')) {\n          throw new Error('Heatmap on cartesian must have two category axes');\n        }\n\n        if (!(xAxis.onBand && yAxis.onBand)) {\n          throw new Error('Heatmap on cartesian must have two axes with boundaryGap true');\n        }\n      } // add 0.5px to avoid the gaps\n\n\n      width = xAxis.getBandWidth() + .5;\n      height = yAxis.getBandWidth() + .5;\n      xAxisExtent = xAxis.scale.getExtent();\n      yAxisExtent = yAxis.scale.getExtent();\n    }\n\n    var group = this.group;\n    var data = seriesModel.getData();\n    var emphasisStyle = seriesModel.getModel(['emphasis', 'itemStyle']).getItemStyle();\n    var blurStyle = seriesModel.getModel(['blur', 'itemStyle']).getItemStyle();\n    var selectStyle = seriesModel.getModel(['select', 'itemStyle']).getItemStyle();\n    var borderRadius = seriesModel.get(['itemStyle', 'borderRadius']);\n    var labelStatesModels = getLabelStatesModels(seriesModel);\n    var emphasisModel = seriesModel.getModel('emphasis');\n    var focus = emphasisModel.get('focus');\n    var blurScope = emphasisModel.get('blurScope');\n    var emphasisDisabled = emphasisModel.get('disabled');\n    var dataDims = isCartesian2d ? [data.mapDimension('x'), data.mapDimension('y'), data.mapDimension('value')] : [data.mapDimension('time'), data.mapDimension('value')];\n\n    for (var idx = start; idx < end; idx++) {\n      var rect = void 0;\n      var style = data.getItemVisual(idx, 'style');\n\n      if (isCartesian2d) {\n        var dataDimX = data.get(dataDims[0], idx);\n        var dataDimY = data.get(dataDims[1], idx); // Ignore empty data and out of extent data\n\n        if (isNaN(data.get(dataDims[2], idx)) || isNaN(dataDimX) || isNaN(dataDimY) || dataDimX < xAxisExtent[0] || dataDimX > xAxisExtent[1] || dataDimY < yAxisExtent[0] || dataDimY > yAxisExtent[1]) {\n          continue;\n        }\n\n        var point = coordSys.dataToPoint([dataDimX, dataDimY]);\n        rect = new graphic.Rect({\n          shape: {\n            x: point[0] - width / 2,\n            y: point[1] - height / 2,\n            width: width,\n            height: height\n          },\n          style: style\n        });\n      } else {\n        // Ignore empty data\n        if (isNaN(data.get(dataDims[1], idx))) {\n          continue;\n        }\n\n        rect = new graphic.Rect({\n          z2: 1,\n          shape: coordSys.dataToRect([data.get(dataDims[0], idx)]).contentShape,\n          style: style\n        });\n      } // Optimization for large dataset\n\n\n      if (data.hasItemOption) {\n        var itemModel = data.getItemModel(idx);\n        var emphasisModel_1 = itemModel.getModel('emphasis');\n        emphasisStyle = emphasisModel_1.getModel('itemStyle').getItemStyle();\n        blurStyle = itemModel.getModel(['blur', 'itemStyle']).getItemStyle();\n        selectStyle = itemModel.getModel(['select', 'itemStyle']).getItemStyle(); // Each item value struct in the data would be firstly\n        // {\n        //     itemStyle: { borderRadius: [30, 30] },\n        //     value: [2022, 02, 22]\n        // }\n\n        borderRadius = itemModel.get(['itemStyle', 'borderRadius']);\n        focus = emphasisModel_1.get('focus');\n        blurScope = emphasisModel_1.get('blurScope');\n        emphasisDisabled = emphasisModel_1.get('disabled');\n        labelStatesModels = getLabelStatesModels(itemModel);\n      }\n\n      rect.shape.r = borderRadius;\n      var rawValue = seriesModel.getRawValue(idx);\n      var defaultText = '-';\n\n      if (rawValue && rawValue[2] != null) {\n        defaultText = rawValue[2] + '';\n      }\n\n      setLabelStyle(rect, labelStatesModels, {\n        labelFetcher: seriesModel,\n        labelDataIndex: idx,\n        defaultOpacity: style.opacity,\n        defaultText: defaultText\n      });\n      rect.ensureState('emphasis').style = emphasisStyle;\n      rect.ensureState('blur').style = blurStyle;\n      rect.ensureState('select').style = selectStyle;\n      toggleHoverEmphasis(rect, focus, blurScope, emphasisDisabled);\n      rect.incremental = incremental; // PENDING\n\n      if (incremental) {\n        // Rect must use hover layer if it's incremental.\n        rect.states.emphasis.hoverLayer = true;\n      }\n\n      group.add(rect);\n      data.setItemGraphicEl(idx, rect);\n\n      if (this._progressiveEls) {\n        this._progressiveEls.push(rect);\n      }\n    }\n  };\n\n  HeatmapView.prototype._renderOnGeo = function (geo, seriesModel, visualMapModel, api) {\n    var inRangeVisuals = visualMapModel.targetVisuals.inRange;\n    var outOfRangeVisuals = visualMapModel.targetVisuals.outOfRange; // if (!visualMapping) {\n    //     throw new Error('Data range must have color visuals');\n    // }\n\n    var data = seriesModel.getData();\n    var hmLayer = this._hmLayer || this._hmLayer || new HeatmapLayer();\n    hmLayer.blurSize = seriesModel.get('blurSize');\n    hmLayer.pointSize = seriesModel.get('pointSize');\n    hmLayer.minOpacity = seriesModel.get('minOpacity');\n    hmLayer.maxOpacity = seriesModel.get('maxOpacity');\n    var rect = geo.getViewRect().clone();\n    var roamTransform = geo.getRoamTransform();\n    rect.applyTransform(roamTransform); // Clamp on viewport\n\n    var x = Math.max(rect.x, 0);\n    var y = Math.max(rect.y, 0);\n    var x2 = Math.min(rect.width + rect.x, api.getWidth());\n    var y2 = Math.min(rect.height + rect.y, api.getHeight());\n    var width = x2 - x;\n    var height = y2 - y;\n    var dims = [data.mapDimension('lng'), data.mapDimension('lat'), data.mapDimension('value')];\n    var points = data.mapArray(dims, function (lng, lat, value) {\n      var pt = geo.dataToPoint([lng, lat]);\n      pt[0] -= x;\n      pt[1] -= y;\n      pt.push(value);\n      return pt;\n    });\n    var dataExtent = visualMapModel.getExtent();\n    var isInRange = visualMapModel.type === 'visualMap.continuous' ? getIsInContinuousRange(dataExtent, visualMapModel.option.range) : getIsInPiecewiseRange(dataExtent, visualMapModel.getPieceList(), visualMapModel.option.selected);\n    hmLayer.update(points, width, height, inRangeVisuals.color.getNormalizer(), {\n      inRange: inRangeVisuals.color.getColorMapper(),\n      outOfRange: outOfRangeVisuals.color.getColorMapper()\n    }, isInRange);\n    var img = new graphic.Image({\n      style: {\n        width: width,\n        height: height,\n        x: x,\n        y: y,\n        image: hmLayer.canvas\n      },\n      silent: true\n    });\n    this.group.add(img);\n  };\n\n  HeatmapView.type = 'heatmap';\n  return HeatmapView;\n}(ChartView);\n\nexport default HeatmapView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport SeriesModel from '../../model/Series.js';\nimport createSeriesData from '../helper/createSeriesData.js';\nimport CoordinateSystem from '../../core/CoordinateSystem.js';\n\nvar HeatmapSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(HeatmapSeriesModel, _super);\n\n  function HeatmapSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = HeatmapSeriesModel.type;\n    return _this;\n  }\n\n  HeatmapSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    return createSeriesData(null, this, {\n      generateCoord: 'value'\n    });\n  };\n\n  HeatmapSeriesModel.prototype.preventIncremental = function () {\n    var coordSysCreator = CoordinateSystem.get(this.get('coordinateSystem'));\n\n    if (coordSysCreator && coordSysCreator.dimensions) {\n      return coordSysCreator.dimensions[0] === 'lng' && coordSysCreator.dimensions[1] === 'lat';\n    }\n  };\n\n  HeatmapSeriesModel.type = 'series.heatmap';\n  HeatmapSeriesModel.dependencies = ['grid', 'geo', 'calendar'];\n  HeatmapSeriesModel.defaultOption = {\n    coordinateSystem: 'cartesian2d',\n    // zlevel: 0,\n    z: 2,\n    // Cartesian coordinate system\n    // xAxisIndex: 0,\n    // yAxisIndex: 0,\n    // Geo coordinate system\n    geoIndex: 0,\n    blurSize: 30,\n    pointSize: 20,\n    maxOpacity: 1,\n    minOpacity: 0,\n    select: {\n      itemStyle: {\n        borderColor: '#212121'\n      }\n    }\n  };\n  return HeatmapSeriesModel;\n}(SeriesModel);\n\nexport default HeatmapSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport HeatmapView from './HeatmapView.js';\nimport HeatmapSeriesModel from './HeatmapSeries.js';\nexport function install(registers) {\n  registers.registerChartView(HeatmapView);\n  registers.registerSeriesModel(HeatmapSeriesModel);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport { ECPolygon } from '../line/poly.js';\nimport * as graphic from '../../util/graphic.js';\nimport { setStatesStylesFromModel, toggleHoverEmphasis } from '../../util/states.js';\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle.js';\nimport { bind } from 'zrender/lib/core/util.js';\nimport DataDiffer from '../../data/DataDiffer.js';\nimport ChartView from '../../view/Chart.js';\nimport { saveOldStyle } from '../../animation/basicTransition.js';\n\nvar ThemeRiverView =\n/** @class */\nfunction (_super) {\n  __extends(ThemeRiverView, _super);\n\n  function ThemeRiverView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = ThemeRiverView.type;\n    _this._layers = [];\n    return _this;\n  }\n\n  ThemeRiverView.prototype.render = function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData();\n    var self = this;\n    var group = this.group;\n    var layersSeries = seriesModel.getLayerSeries();\n    var layoutInfo = data.getLayout('layoutInfo');\n    var rect = layoutInfo.rect;\n    var boundaryGap = layoutInfo.boundaryGap;\n    group.x = 0;\n    group.y = rect.y + boundaryGap[0];\n\n    function keyGetter(item) {\n      return item.name;\n    }\n\n    var dataDiffer = new DataDiffer(this._layersSeries || [], layersSeries, keyGetter, keyGetter);\n    var newLayersGroups = [];\n    dataDiffer.add(bind(process, this, 'add')).update(bind(process, this, 'update')).remove(bind(process, this, 'remove')).execute();\n\n    function process(status, idx, oldIdx) {\n      var oldLayersGroups = self._layers;\n\n      if (status === 'remove') {\n        group.remove(oldLayersGroups[idx]);\n        return;\n      }\n\n      var points0 = [];\n      var points1 = [];\n      var style;\n      var indices = layersSeries[idx].indices;\n      var j = 0;\n\n      for (; j < indices.length; j++) {\n        var layout = data.getItemLayout(indices[j]);\n        var x = layout.x;\n        var y0 = layout.y0;\n        var y = layout.y;\n        points0.push(x, y0);\n        points1.push(x, y0 + y);\n        style = data.getItemVisual(indices[j], 'style');\n      }\n\n      var polygon;\n      var textLayout = data.getItemLayout(indices[0]);\n      var labelModel = seriesModel.getModel('label');\n      var margin = labelModel.get('margin');\n      var emphasisModel = seriesModel.getModel('emphasis');\n\n      if (status === 'add') {\n        var layerGroup = newLayersGroups[idx] = new graphic.Group();\n        polygon = new ECPolygon({\n          shape: {\n            points: points0,\n            stackedOnPoints: points1,\n            smooth: 0.4,\n            stackedOnSmooth: 0.4,\n            smoothConstraint: false\n          },\n          z2: 0\n        });\n        layerGroup.add(polygon);\n        group.add(layerGroup);\n\n        if (seriesModel.isAnimationEnabled()) {\n          polygon.setClipPath(createGridClipShape(polygon.getBoundingRect(), seriesModel, function () {\n            polygon.removeClipPath();\n          }));\n        }\n      } else {\n        var layerGroup = oldLayersGroups[oldIdx];\n        polygon = layerGroup.childAt(0);\n        group.add(layerGroup);\n        newLayersGroups[idx] = layerGroup;\n        graphic.updateProps(polygon, {\n          shape: {\n            points: points0,\n            stackedOnPoints: points1\n          }\n        }, seriesModel);\n        saveOldStyle(polygon);\n      }\n\n      setLabelStyle(polygon, getLabelStatesModels(seriesModel), {\n        labelDataIndex: indices[j - 1],\n        defaultText: data.getName(indices[j - 1]),\n        inheritColor: style.fill\n      }, {\n        normal: {\n          verticalAlign: 'middle' // align: 'right'\n\n        }\n      });\n      polygon.setTextConfig({\n        position: null,\n        local: true\n      });\n      var labelEl = polygon.getTextContent(); // TODO More label position options.\n\n      if (labelEl) {\n        labelEl.x = textLayout.x - margin;\n        labelEl.y = textLayout.y0 + textLayout.y / 2;\n      }\n\n      polygon.useStyle(style);\n      data.setItemGraphicEl(idx, polygon);\n      setStatesStylesFromModel(polygon, seriesModel);\n      toggleHoverEmphasis(polygon, emphasisModel.get('focus'), emphasisModel.get('blurScope'), emphasisModel.get('disabled'));\n    }\n\n    this._layersSeries = layersSeries;\n    this._layers = newLayersGroups;\n  };\n\n  ThemeRiverView.type = 'themeRiver';\n  return ThemeRiverView;\n}(ChartView);\n\n; // add animation to the view\n\nfunction createGridClipShape(rect, seriesModel, cb) {\n  var rectEl = new graphic.Rect({\n    shape: {\n      x: rect.x - 10,\n      y: rect.y - 10,\n      width: 0,\n      height: rect.height + 20\n    }\n  });\n  graphic.initProps(rectEl, {\n    shape: {\n      x: rect.x - 50,\n      width: rect.width + 100,\n      height: rect.height + 20\n    }\n  }, seriesModel, cb);\n  return rectEl;\n}\n\nexport default ThemeRiverView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport SeriesModel from '../../model/Series.js';\nimport prepareSeriesDataSchema from '../../data/helper/createDimensions.js';\nimport { getDimensionTypeByAxis } from '../../data/helper/dimensionHelper.js';\nimport SeriesData from '../../data/SeriesData.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { groupData, SINGLE_REFERRING } from '../../util/model.js';\nimport LegendVisualProvider from '../../visual/LegendVisualProvider.js';\nimport { createTooltipMarkup } from '../../component/tooltip/tooltipMarkup.js';\nvar DATA_NAME_INDEX = 2;\n\nvar ThemeRiverSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(ThemeRiverSeriesModel, _super);\n\n  function ThemeRiverSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = ThemeRiverSeriesModel.type;\n    return _this;\n  }\n  /**\r\n   * @override\r\n   */\n\n\n  ThemeRiverSeriesModel.prototype.init = function (option) {\n    // eslint-disable-next-line\n    _super.prototype.init.apply(this, arguments); // Put this function here is for the sake of consistency of code style.\n    // Enable legend selection for each data item\n    // Use a function instead of direct access because data reference may changed\n\n\n    this.legendVisualProvider = new LegendVisualProvider(zrUtil.bind(this.getData, this), zrUtil.bind(this.getRawData, this));\n  };\n  /**\r\n   * If there is no value of a certain point in the time for some event,set it value to 0.\r\n   *\r\n   * @param {Array} data  initial data in the option\r\n   * @return {Array}\r\n   */\n\n\n  ThemeRiverSeriesModel.prototype.fixData = function (data) {\n    var rawDataLength = data.length;\n    /**\r\n     * Make sure every layer data get the same keys.\r\n     * The value index tells which layer has visited.\r\n     * {\r\n     *  2014/01/01: -1\r\n     * }\r\n     */\n\n    var timeValueKeys = {}; // grouped data by name\n\n    var groupResult = groupData(data, function (item) {\n      if (!timeValueKeys.hasOwnProperty(item[0] + '')) {\n        timeValueKeys[item[0] + ''] = -1;\n      }\n\n      return item[2];\n    });\n    var layerData = [];\n    groupResult.buckets.each(function (items, key) {\n      layerData.push({\n        name: key,\n        dataList: items\n      });\n    });\n    var layerNum = layerData.length;\n\n    for (var k = 0; k < layerNum; ++k) {\n      var name_1 = layerData[k].name;\n\n      for (var j = 0; j < layerData[k].dataList.length; ++j) {\n        var timeValue = layerData[k].dataList[j][0] + '';\n        timeValueKeys[timeValue] = k;\n      }\n\n      for (var timeValue in timeValueKeys) {\n        if (timeValueKeys.hasOwnProperty(timeValue) && timeValueKeys[timeValue] !== k) {\n          timeValueKeys[timeValue] = k;\n          data[rawDataLength] = [timeValue, 0, name_1];\n          rawDataLength++;\n        }\n      }\n    }\n\n    return data;\n  };\n  /**\r\n   * @override\r\n   * @param  option  the initial option that user gave\r\n   * @param  ecModel  the model object for themeRiver option\r\n   */\n\n\n  ThemeRiverSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    var singleAxisModel = this.getReferringComponents('singleAxis', SINGLE_REFERRING).models[0];\n    var axisType = singleAxisModel.get('type'); // filter the data item with the value of label is undefined\n\n    var filterData = zrUtil.filter(option.data, function (dataItem) {\n      return dataItem[2] !== undefined;\n    }); // ??? TODO design a stage to transfer data for themeRiver and lines?\n\n    var data = this.fixData(filterData || []);\n    var nameList = [];\n    var nameMap = this.nameMap = zrUtil.createHashMap();\n    var count = 0;\n\n    for (var i = 0; i < data.length; ++i) {\n      nameList.push(data[i][DATA_NAME_INDEX]);\n\n      if (!nameMap.get(data[i][DATA_NAME_INDEX])) {\n        nameMap.set(data[i][DATA_NAME_INDEX], count);\n        count++;\n      }\n    }\n\n    var dimensions = prepareSeriesDataSchema(data, {\n      coordDimensions: ['single'],\n      dimensionsDefine: [{\n        name: 'time',\n        type: getDimensionTypeByAxis(axisType)\n      }, {\n        name: 'value',\n        type: 'float'\n      }, {\n        name: 'name',\n        type: 'ordinal'\n      }],\n      encodeDefine: {\n        single: 0,\n        value: 1,\n        itemName: 2\n      }\n    }).dimensions;\n    var list = new SeriesData(dimensions, this);\n    list.initData(data);\n    return list;\n  };\n  /**\r\n   * The raw data is divided into multiple layers and each layer\r\n   *     has same name.\r\n   */\n\n\n  ThemeRiverSeriesModel.prototype.getLayerSeries = function () {\n    var data = this.getData();\n    var lenCount = data.count();\n    var indexArr = [];\n\n    for (var i = 0; i < lenCount; ++i) {\n      indexArr[i] = i;\n    }\n\n    var timeDim = data.mapDimension('single'); // data group by name\n\n    var groupResult = groupData(indexArr, function (index) {\n      return data.get('name', index);\n    });\n    var layerSeries = [];\n    groupResult.buckets.each(function (items, key) {\n      items.sort(function (index1, index2) {\n        return data.get(timeDim, index1) - data.get(timeDim, index2);\n      });\n      layerSeries.push({\n        name: key,\n        indices: items\n      });\n    });\n    return layerSeries;\n  };\n  /**\r\n   * Get data indices for show tooltip content\r\n   */\n\n\n  ThemeRiverSeriesModel.prototype.getAxisTooltipData = function (dim, value, baseAxis) {\n    if (!zrUtil.isArray(dim)) {\n      dim = dim ? [dim] : [];\n    }\n\n    var data = this.getData();\n    var layerSeries = this.getLayerSeries();\n    var indices = [];\n    var layerNum = layerSeries.length;\n    var nestestValue;\n\n    for (var i = 0; i < layerNum; ++i) {\n      var minDist = Number.MAX_VALUE;\n      var nearestIdx = -1;\n      var pointNum = layerSeries[i].indices.length;\n\n      for (var j = 0; j < pointNum; ++j) {\n        var theValue = data.get(dim[0], layerSeries[i].indices[j]);\n        var dist = Math.abs(theValue - value);\n\n        if (dist <= minDist) {\n          nestestValue = theValue;\n          minDist = dist;\n          nearestIdx = layerSeries[i].indices[j];\n        }\n      }\n\n      indices.push(nearestIdx);\n    }\n\n    return {\n      dataIndices: indices,\n      nestestValue: nestestValue\n    };\n  };\n\n  ThemeRiverSeriesModel.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\n    var data = this.getData();\n    var name = data.getName(dataIndex);\n    var value = data.get(data.mapDimension('value'), dataIndex);\n    return createTooltipMarkup('nameValue', {\n      name: name,\n      value: value\n    });\n  };\n\n  ThemeRiverSeriesModel.type = 'series.themeRiver';\n  ThemeRiverSeriesModel.dependencies = ['singleAxis'];\n  ThemeRiverSeriesModel.defaultOption = {\n    // zlevel: 0,\n    z: 2,\n    colorBy: 'data',\n    coordinateSystem: 'singleAxis',\n    // gap in axis's orthogonal orientation\n    boundaryGap: ['10%', '10%'],\n    // legendHoverLink: true,\n    singleAxisIndex: 0,\n    animationEasing: 'linear',\n    label: {\n      margin: 4,\n      show: true,\n      position: 'left',\n      fontSize: 11\n    },\n    emphasis: {\n      label: {\n        show: true\n      }\n    }\n  };\n  return ThemeRiverSeriesModel;\n}(SeriesModel);\n\nexport default ThemeRiverSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as numberUtil from '../../util/number.js';\nexport default function themeRiverLayout(ecModel, api) {\n  ecModel.eachSeriesByType('themeRiver', function (seriesModel) {\n    var data = seriesModel.getData();\n    var single = seriesModel.coordinateSystem;\n    var layoutInfo = {}; // use the axis boundingRect for view\n\n    var rect = single.getRect();\n    layoutInfo.rect = rect;\n    var boundaryGap = seriesModel.get('boundaryGap');\n    var axis = single.getAxis();\n    layoutInfo.boundaryGap = boundaryGap;\n\n    if (axis.orient === 'horizontal') {\n      boundaryGap[0] = numberUtil.parsePercent(boundaryGap[0], rect.height);\n      boundaryGap[1] = numberUtil.parsePercent(boundaryGap[1], rect.height);\n      var height = rect.height - boundaryGap[0] - boundaryGap[1];\n      doThemeRiverLayout(data, seriesModel, height);\n    } else {\n      boundaryGap[0] = numberUtil.parsePercent(boundaryGap[0], rect.width);\n      boundaryGap[1] = numberUtil.parsePercent(boundaryGap[1], rect.width);\n      var width = rect.width - boundaryGap[0] - boundaryGap[1];\n      doThemeRiverLayout(data, seriesModel, width);\n    }\n\n    data.setLayout('layoutInfo', layoutInfo);\n  });\n}\n/**\r\n * The layout information about themeriver\r\n *\r\n * @param data  data in the series\r\n * @param seriesModel  the model object of themeRiver series\r\n * @param height  value used to compute every series height\r\n */\n\nfunction doThemeRiverLayout(data, seriesModel, height) {\n  if (!data.count()) {\n    return;\n  }\n\n  var coordSys = seriesModel.coordinateSystem; // the data in each layer are organized into a series.\n\n  var layerSeries = seriesModel.getLayerSeries(); // the points in each layer.\n\n  var timeDim = data.mapDimension('single');\n  var valueDim = data.mapDimension('value');\n  var layerPoints = zrUtil.map(layerSeries, function (singleLayer) {\n    return zrUtil.map(singleLayer.indices, function (idx) {\n      var pt = coordSys.dataToPoint(data.get(timeDim, idx));\n      pt[1] = data.get(valueDim, idx);\n      return pt;\n    });\n  });\n  var base = computeBaseline(layerPoints);\n  var baseLine = base.y0;\n  var ky = height / base.max; // set layout information for each item.\n\n  var n = layerSeries.length;\n  var m = layerSeries[0].indices.length;\n  var baseY0;\n\n  for (var j = 0; j < m; ++j) {\n    baseY0 = baseLine[j] * ky;\n    data.setItemLayout(layerSeries[0].indices[j], {\n      layerIndex: 0,\n      x: layerPoints[0][j][0],\n      y0: baseY0,\n      y: layerPoints[0][j][1] * ky\n    });\n\n    for (var i = 1; i < n; ++i) {\n      baseY0 += layerPoints[i - 1][j][1] * ky;\n      data.setItemLayout(layerSeries[i].indices[j], {\n        layerIndex: i,\n        x: layerPoints[i][j][0],\n        y0: baseY0,\n        y: layerPoints[i][j][1] * ky\n      });\n    }\n  }\n}\n/**\r\n * Compute the baseLine of the rawdata\r\n * Inspired by Lee Byron's paper Stacked Graphs - Geometry & Aesthetics\r\n *\r\n * @param  data  the points in each layer\r\n */\n\n\nfunction computeBaseline(data) {\n  var layerNum = data.length;\n  var pointNum = data[0].length;\n  var sums = [];\n  var y0 = [];\n  var max = 0;\n\n  for (var i = 0; i < pointNum; ++i) {\n    var temp = 0;\n\n    for (var j = 0; j < layerNum; ++j) {\n      temp += data[j][i][1];\n    }\n\n    if (temp > max) {\n      max = temp;\n    }\n\n    sums.push(temp);\n  }\n\n  for (var k = 0; k < pointNum; ++k) {\n    y0[k] = (max - sums[k]) / 2;\n  }\n\n  max = 0;\n\n  for (var l = 0; l < pointNum; ++l) {\n    var sum = sums[l] + y0[l];\n\n    if (sum > max) {\n      max = sum;\n    }\n  }\n\n  return {\n    y0: y0,\n    max: max\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\nimport ThemeRiverView from './ThemeRiverView.js';\nimport ThemeRiverSeriesModel from './ThemeRiverSeries.js';\nimport themeRiverLayout from './themeRiverLayout.js';\nimport dataFilter from '../../processor/dataFilter.js';\nexport function install(registers) {\n  registers.registerChartView(ThemeRiverView);\n  registers.registerSeriesModel(ThemeRiverSeriesModel);\n  registers.registerLayout(themeRiverLayout);\n  registers.registerProcessor(dataFilter('themeRiver'));\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as graphic from '../../util/graphic.js';\nimport { toggleHoverEmphasis, SPECIAL_STATES, DISPLAY_STATES } from '../../util/states.js';\nimport { createTextStyle } from '../../label/labelStyle.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { getSectorCornerRadius } from '../helper/sectorHelper.js';\nimport { createOrUpdatePatternFromDecal } from '../../util/decal.js';\nimport { saveOldStyle } from '../../animation/basicTransition.js';\nimport { normalizeRadian } from 'zrender/lib/contain/util.js';\nvar DEFAULT_SECTOR_Z = 2;\nvar DEFAULT_TEXT_Z = 4;\n/**\r\n * Sunburstce of Sunburst including Sector, Label, LabelLine\r\n */\n\nvar SunburstPiece =\n/** @class */\nfunction (_super) {\n  __extends(SunburstPiece, _super);\n\n  function SunburstPiece(node, seriesModel, ecModel, api) {\n    var _this = _super.call(this) || this;\n\n    _this.z2 = DEFAULT_SECTOR_Z;\n    _this.textConfig = {\n      inside: true\n    };\n    getECData(_this).seriesIndex = seriesModel.seriesIndex;\n    var text = new graphic.Text({\n      z2: DEFAULT_TEXT_Z,\n      silent: node.getModel().get(['label', 'silent'])\n    });\n\n    _this.setTextContent(text);\n\n    _this.updateData(true, node, seriesModel, ecModel, api);\n\n    return _this;\n  }\n\n  SunburstPiece.prototype.updateData = function (firstCreate, node, // state: 'emphasis' | 'normal' | 'highlight' | 'downplay',\n  seriesModel, ecModel, api) {\n    this.node = node;\n    node.piece = this;\n    seriesModel = seriesModel || this._seriesModel;\n    ecModel = ecModel || this._ecModel;\n    var sector = this;\n    getECData(sector).dataIndex = node.dataIndex;\n    var itemModel = node.getModel();\n    var emphasisModel = itemModel.getModel('emphasis');\n    var layout = node.getLayout();\n    var sectorShape = zrUtil.extend({}, layout);\n    sectorShape.label = null;\n    var normalStyle = node.getVisual('style');\n    normalStyle.lineJoin = 'bevel';\n    var decal = node.getVisual('decal');\n\n    if (decal) {\n      normalStyle.decal = createOrUpdatePatternFromDecal(decal, api);\n    }\n\n    var cornerRadius = getSectorCornerRadius(itemModel.getModel('itemStyle'), sectorShape, true);\n    zrUtil.extend(sectorShape, cornerRadius);\n    zrUtil.each(SPECIAL_STATES, function (stateName) {\n      var state = sector.ensureState(stateName);\n      var itemStyleModel = itemModel.getModel([stateName, 'itemStyle']);\n      state.style = itemStyleModel.getItemStyle(); // border radius\n\n      var cornerRadius = getSectorCornerRadius(itemStyleModel, sectorShape);\n\n      if (cornerRadius) {\n        state.shape = cornerRadius;\n      }\n    });\n\n    if (firstCreate) {\n      sector.setShape(sectorShape);\n      sector.shape.r = layout.r0;\n      graphic.initProps(sector, {\n        shape: {\n          r: layout.r\n        }\n      }, seriesModel, node.dataIndex);\n    } else {\n      // Disable animation for gradient since no interpolation method\n      // is supported for gradient\n      graphic.updateProps(sector, {\n        shape: sectorShape\n      }, seriesModel);\n      saveOldStyle(sector);\n    }\n\n    sector.useStyle(normalStyle);\n\n    this._updateLabel(seriesModel);\n\n    var cursorStyle = itemModel.getShallow('cursor');\n    cursorStyle && sector.attr('cursor', cursorStyle);\n    this._seriesModel = seriesModel || this._seriesModel;\n    this._ecModel = ecModel || this._ecModel;\n    var focus = emphasisModel.get('focus');\n    var focusOrIndices = focus === 'ancestor' ? node.getAncestorsIndices() : focus === 'descendant' ? node.getDescendantIndices() : focus;\n    toggleHoverEmphasis(this, focusOrIndices, emphasisModel.get('blurScope'), emphasisModel.get('disabled'));\n  };\n\n  SunburstPiece.prototype._updateLabel = function (seriesModel) {\n    var _this = this;\n\n    var itemModel = this.node.getModel();\n    var normalLabelModel = itemModel.getModel('label');\n    var layout = this.node.getLayout();\n    var angle = layout.endAngle - layout.startAngle;\n    var midAngle = (layout.startAngle + layout.endAngle) / 2;\n    var dx = Math.cos(midAngle);\n    var dy = Math.sin(midAngle);\n    var sector = this;\n    var label = sector.getTextContent();\n    var dataIndex = this.node.dataIndex;\n    var labelMinAngle = normalLabelModel.get('minAngle') / 180 * Math.PI;\n    var isNormalShown = normalLabelModel.get('show') && !(labelMinAngle != null && Math.abs(angle) < labelMinAngle);\n    label.ignore = !isNormalShown; // TODO use setLabelStyle\n\n    zrUtil.each(DISPLAY_STATES, function (stateName) {\n      var labelStateModel = stateName === 'normal' ? itemModel.getModel('label') : itemModel.getModel([stateName, 'label']);\n      var isNormal = stateName === 'normal';\n      var state = isNormal ? label : label.ensureState(stateName);\n      var text = seriesModel.getFormattedLabel(dataIndex, stateName);\n\n      if (isNormal) {\n        text = text || _this.node.name;\n      }\n\n      state.style = createTextStyle(labelStateModel, {}, null, stateName !== 'normal', true);\n\n      if (text) {\n        state.style.text = text;\n      } // Not displaying text when angle is too small\n\n\n      var isShown = labelStateModel.get('show');\n\n      if (isShown != null && !isNormal) {\n        state.ignore = !isShown;\n      }\n\n      var labelPosition = getLabelAttr(labelStateModel, 'position');\n      var sectorState = isNormal ? sector : sector.states[stateName];\n      var labelColor = sectorState.style.fill;\n      sectorState.textConfig = {\n        outsideFill: labelStateModel.get('color') === 'inherit' ? labelColor : null,\n        inside: labelPosition !== 'outside'\n      };\n      var r;\n      var labelPadding = getLabelAttr(labelStateModel, 'distance') || 0;\n      var textAlign = getLabelAttr(labelStateModel, 'align');\n\n      if (labelPosition === 'outside') {\n        r = layout.r + labelPadding;\n        textAlign = midAngle > Math.PI / 2 ? 'right' : 'left';\n      } else {\n        if (!textAlign || textAlign === 'center') {\n          // Put label in the center if it's a circle\n          if (angle === 2 * Math.PI && layout.r0 === 0) {\n            r = 0;\n          } else {\n            r = (layout.r + layout.r0) / 2;\n          }\n\n          textAlign = 'center';\n        } else if (textAlign === 'left') {\n          r = layout.r0 + labelPadding;\n\n          if (midAngle > Math.PI / 2) {\n            textAlign = 'right';\n          }\n        } else if (textAlign === 'right') {\n          r = layout.r - labelPadding;\n\n          if (midAngle > Math.PI / 2) {\n            textAlign = 'left';\n          }\n        }\n      }\n\n      state.style.align = textAlign;\n      state.style.verticalAlign = getLabelAttr(labelStateModel, 'verticalAlign') || 'middle';\n      state.x = r * dx + layout.cx;\n      state.y = r * dy + layout.cy;\n      var rotateType = getLabelAttr(labelStateModel, 'rotate');\n      var rotate = 0;\n\n      if (rotateType === 'radial') {\n        rotate = normalizeRadian(-midAngle);\n\n        if (rotate > Math.PI / 2 && rotate < Math.PI * 1.5) {\n          rotate += Math.PI;\n        }\n      } else if (rotateType === 'tangential') {\n        rotate = Math.PI / 2 - midAngle;\n\n        if (rotate > Math.PI / 2) {\n          rotate -= Math.PI;\n        } else if (rotate < -Math.PI / 2) {\n          rotate += Math.PI;\n        }\n      } else if (zrUtil.isNumber(rotateType)) {\n        rotate = rotateType * Math.PI / 180;\n      }\n\n      state.rotation = normalizeRadian(rotate);\n    });\n\n    function getLabelAttr(model, name) {\n      var stateAttr = model.get(name);\n\n      if (stateAttr == null) {\n        return normalLabelModel.get(name);\n      }\n\n      return stateAttr;\n    }\n\n    label.dirtyStyle();\n  };\n\n  return SunburstPiece;\n}(graphic.Sector);\n\nexport default SunburstPiece;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { extend } from 'zrender/lib/core/util.js';\nimport { deprecateReplaceLog } from '../../util/log.js';\nimport { retrieveTargetInfo, aboveViewRoot } from '../helper/treeHelper.js';\nexport var ROOT_TO_NODE_ACTION = 'sunburstRootToNode';\nvar HIGHLIGHT_ACTION = 'sunburstHighlight';\nvar UNHIGHLIGHT_ACTION = 'sunburstUnhighlight';\nexport function installSunburstAction(registers) {\n  registers.registerAction({\n    type: ROOT_TO_NODE_ACTION,\n    update: 'updateView'\n  }, function (payload, ecModel) {\n    ecModel.eachComponent({\n      mainType: 'series',\n      subType: 'sunburst',\n      query: payload\n    }, handleRootToNode);\n\n    function handleRootToNode(model, index) {\n      var targetInfo = retrieveTargetInfo(payload, [ROOT_TO_NODE_ACTION], model);\n\n      if (targetInfo) {\n        var originViewRoot = model.getViewRoot();\n\n        if (originViewRoot) {\n          payload.direction = aboveViewRoot(originViewRoot, targetInfo.node) ? 'rollUp' : 'drillDown';\n        }\n\n        model.resetViewRoot(targetInfo.node);\n      }\n    }\n  });\n  registers.registerAction({\n    type: HIGHLIGHT_ACTION,\n    update: 'none'\n  }, function (payload, ecModel, api) {\n    // Clone\n    payload = extend({}, payload);\n    ecModel.eachComponent({\n      mainType: 'series',\n      subType: 'sunburst',\n      query: payload\n    }, handleHighlight);\n\n    function handleHighlight(model) {\n      var targetInfo = retrieveTargetInfo(payload, [HIGHLIGHT_ACTION], model);\n\n      if (targetInfo) {\n        payload.dataIndex = targetInfo.node.dataIndex;\n      }\n    }\n\n    if (process.env.NODE_ENV !== 'production') {\n      deprecateReplaceLog('sunburstHighlight', 'highlight');\n    } // Fast forward action\n\n\n    api.dispatchAction(extend(payload, {\n      type: 'highlight'\n    }));\n  });\n  registers.registerAction({\n    type: UNHIGHLIGHT_ACTION,\n    update: 'updateView'\n  }, function (payload, ecModel, api) {\n    payload = extend({}, payload);\n\n    if (process.env.NODE_ENV !== 'production') {\n      deprecateReplaceLog('sunburstUnhighlight', 'downplay');\n    }\n\n    api.dispatchAction(extend(payload, {\n      type: 'downplay'\n    }));\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport ChartView from '../../view/Chart.js';\nimport SunburstPiece from './SunburstPiece.js';\nimport DataDiffer from '../../data/DataDiffer.js';\nimport { ROOT_TO_NODE_ACTION } from './sunburstAction.js';\nimport { windowOpen } from '../../util/format.js';\n\nvar SunburstView =\n/** @class */\nfunction (_super) {\n  __extends(SunburstView, _super);\n\n  function SunburstView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = SunburstView.type;\n    return _this;\n  }\n\n  SunburstView.prototype.render = function (seriesModel, ecModel, api, // @ts-ignore\n  payload) {\n    var self = this;\n    this.seriesModel = seriesModel;\n    this.api = api;\n    this.ecModel = ecModel;\n    var data = seriesModel.getData();\n    var virtualRoot = data.tree.root;\n    var newRoot = seriesModel.getViewRoot();\n    var group = this.group;\n    var renderLabelForZeroData = seriesModel.get('renderLabelForZeroData');\n    var newChildren = [];\n    newRoot.eachNode(function (node) {\n      newChildren.push(node);\n    });\n    var oldChildren = this._oldChildren || [];\n    dualTravel(newChildren, oldChildren);\n    renderRollUp(virtualRoot, newRoot);\n\n    this._initEvents();\n\n    this._oldChildren = newChildren;\n\n    function dualTravel(newChildren, oldChildren) {\n      if (newChildren.length === 0 && oldChildren.length === 0) {\n        return;\n      }\n\n      new DataDiffer(oldChildren, newChildren, getKey, getKey).add(processNode).update(processNode).remove(zrUtil.curry(processNode, null)).execute();\n\n      function getKey(node) {\n        return node.getId();\n      }\n\n      function processNode(newIdx, oldIdx) {\n        var newNode = newIdx == null ? null : newChildren[newIdx];\n        var oldNode = oldIdx == null ? null : oldChildren[oldIdx];\n        doRenderNode(newNode, oldNode);\n      }\n    }\n\n    function doRenderNode(newNode, oldNode) {\n      if (!renderLabelForZeroData && newNode && !newNode.getValue()) {\n        // Not render data with value 0\n        newNode = null;\n      }\n\n      if (newNode !== virtualRoot && oldNode !== virtualRoot) {\n        if (oldNode && oldNode.piece) {\n          if (newNode) {\n            // Update\n            oldNode.piece.updateData(false, newNode, seriesModel, ecModel, api); // For tooltip\n\n            data.setItemGraphicEl(newNode.dataIndex, oldNode.piece);\n          } else {\n            // Remove\n            removeNode(oldNode);\n          }\n        } else if (newNode) {\n          // Add\n          var piece = new SunburstPiece(newNode, seriesModel, ecModel, api);\n          group.add(piece); // For tooltip\n\n          data.setItemGraphicEl(newNode.dataIndex, piece);\n        }\n      }\n    }\n\n    function removeNode(node) {\n      if (!node) {\n        return;\n      }\n\n      if (node.piece) {\n        group.remove(node.piece);\n        node.piece = null;\n      }\n    }\n\n    function renderRollUp(virtualRoot, viewRoot) {\n      if (viewRoot.depth > 0) {\n        // Render\n        if (self.virtualPiece) {\n          // Update\n          self.virtualPiece.updateData(false, virtualRoot, seriesModel, ecModel, api);\n        } else {\n          // Add\n          self.virtualPiece = new SunburstPiece(virtualRoot, seriesModel, ecModel, api);\n          group.add(self.virtualPiece);\n        } // TODO event scope\n\n\n        viewRoot.piece.off('click');\n        self.virtualPiece.on('click', function (e) {\n          self._rootToNode(viewRoot.parentNode);\n        });\n      } else if (self.virtualPiece) {\n        // Remove\n        group.remove(self.virtualPiece);\n        self.virtualPiece = null;\n      }\n    }\n  };\n  /**\r\n   * @private\r\n   */\n\n\n  SunburstView.prototype._initEvents = function () {\n    var _this = this;\n\n    this.group.off('click');\n    this.group.on('click', function (e) {\n      var targetFound = false;\n\n      var viewRoot = _this.seriesModel.getViewRoot();\n\n      viewRoot.eachNode(function (node) {\n        if (!targetFound && node.piece && node.piece === e.target) {\n          var nodeClick = node.getModel().get('nodeClick');\n\n          if (nodeClick === 'rootToNode') {\n            _this._rootToNode(node);\n          } else if (nodeClick === 'link') {\n            var itemModel = node.getModel();\n            var link = itemModel.get('link');\n\n            if (link) {\n              var linkTarget = itemModel.get('target', true) || '_blank';\n              windowOpen(link, linkTarget);\n            }\n          }\n\n          targetFound = true;\n        }\n      });\n    });\n  };\n  /**\r\n   * @private\r\n   */\n\n\n  SunburstView.prototype._rootToNode = function (node) {\n    if (node !== this.seriesModel.getViewRoot()) {\n      this.api.dispatchAction({\n        type: ROOT_TO_NODE_ACTION,\n        from: this.uid,\n        seriesId: this.seriesModel.id,\n        targetNode: node\n      });\n    }\n  };\n  /**\r\n   * @implement\r\n   */\n\n\n  SunburstView.prototype.containPoint = function (point, seriesModel) {\n    var treeRoot = seriesModel.getData();\n    var itemLayout = treeRoot.getItemLayout(0);\n\n    if (itemLayout) {\n      var dx = point[0] - itemLayout.cx;\n      var dy = point[1] - itemLayout.cy;\n      var radius = Math.sqrt(dx * dx + dy * dy);\n      return radius <= itemLayout.r && radius >= itemLayout.r0;\n    }\n  };\n\n  SunburstView.type = 'sunburst';\n  return SunburstView;\n}(ChartView);\n\nexport default SunburstView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport SeriesModel from '../../model/Series.js';\nimport Tree from '../../data/Tree.js';\nimport { wrapTreePathInfo } from '../helper/treeHelper.js';\nimport Model from '../../model/Model.js';\nimport enableAriaDecalForTree from '../helper/enableAriaDecalForTree.js';\n\nvar SunburstSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(SunburstSeriesModel, _super);\n\n  function SunburstSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = SunburstSeriesModel.type;\n    _this.ignoreStyleOnData = true;\n    return _this;\n  }\n\n  SunburstSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    // Create a virtual root.\n    var root = {\n      name: option.name,\n      children: option.data\n    };\n    completeTreeValue(root);\n    var levelModels = this._levelModels = zrUtil.map(option.levels || [], function (levelDefine) {\n      return new Model(levelDefine, this, ecModel);\n    }, this); // Make sure always a new tree is created when setOption,\n    // in TreemapView, we check whether oldTree === newTree\n    // to choose mappings approach among old shapes and new shapes.\n\n    var tree = Tree.createTree(root, this, beforeLink);\n\n    function beforeLink(nodeData) {\n      nodeData.wrapMethod('getItemModel', function (model, idx) {\n        var node = tree.getNodeByDataIndex(idx);\n        var levelModel = levelModels[node.depth];\n        levelModel && (model.parentModel = levelModel);\n        return model;\n      });\n    }\n\n    return tree.data;\n  };\n\n  SunburstSeriesModel.prototype.optionUpdated = function () {\n    this.resetViewRoot();\n  };\n  /*\r\n   * @override\r\n   */\n\n\n  SunburstSeriesModel.prototype.getDataParams = function (dataIndex) {\n    var params = _super.prototype.getDataParams.apply(this, arguments);\n\n    var node = this.getData().tree.getNodeByDataIndex(dataIndex);\n    params.treePathInfo = wrapTreePathInfo(node, this);\n    return params;\n  };\n\n  SunburstSeriesModel.prototype.getLevelModel = function (node) {\n    return this._levelModels && this._levelModels[node.depth];\n  };\n\n  SunburstSeriesModel.prototype.getViewRoot = function () {\n    return this._viewRoot;\n  };\n\n  SunburstSeriesModel.prototype.resetViewRoot = function (viewRoot) {\n    viewRoot ? this._viewRoot = viewRoot : viewRoot = this._viewRoot;\n    var root = this.getRawData().tree.root;\n\n    if (!viewRoot || viewRoot !== root && !root.contains(viewRoot)) {\n      this._viewRoot = root;\n    }\n  };\n\n  SunburstSeriesModel.prototype.enableAriaDecal = function () {\n    enableAriaDecalForTree(this);\n  };\n\n  SunburstSeriesModel.type = 'series.sunburst';\n  SunburstSeriesModel.defaultOption = {\n    // zlevel: 0,\n    z: 2,\n    // 默认全局居中\n    center: ['50%', '50%'],\n    radius: [0, '75%'],\n    // 默认顺时针\n    clockwise: true,\n    startAngle: 90,\n    // 最小角度改为0\n    minAngle: 0,\n    // If still show when all data zero.\n    stillShowZeroSum: true,\n    // 'rootToNode', 'link', or false\n    nodeClick: 'rootToNode',\n    renderLabelForZeroData: false,\n    label: {\n      // could be: 'radial', 'tangential', or 'none'\n      rotate: 'radial',\n      show: true,\n      opacity: 1,\n      // 'left' is for inner side of inside, and 'right' is for outer\n      // side for inside\n      align: 'center',\n      position: 'inside',\n      distance: 5,\n      silent: true\n    },\n    itemStyle: {\n      borderWidth: 1,\n      borderColor: 'white',\n      borderType: 'solid',\n      shadowBlur: 0,\n      shadowColor: 'rgba(0, 0, 0, 0.2)',\n      shadowOffsetX: 0,\n      shadowOffsetY: 0,\n      opacity: 1\n    },\n    emphasis: {\n      focus: 'descendant'\n    },\n    blur: {\n      itemStyle: {\n        opacity: 0.2\n      },\n      label: {\n        opacity: 0.1\n      }\n    },\n    // Animation type can be expansion, scale.\n    animationType: 'expansion',\n    animationDuration: 1000,\n    animationDurationUpdate: 500,\n    data: [],\n\n    /**\r\n     * Sort order.\r\n     *\r\n     * Valid values: 'desc', 'asc', null, or callback function.\r\n     * 'desc' and 'asc' for descend and ascendant order;\r\n     * null for not sorting;\r\n     * example of callback function:\r\n     * function(nodeA, nodeB) {\r\n     *     return nodeA.getValue() - nodeB.getValue();\r\n     * }\r\n     */\n    sort: 'desc'\n  };\n  return SunburstSeriesModel;\n}(SeriesModel);\n\nfunction completeTreeValue(dataNode) {\n  // Postorder travel tree.\n  // If value of none-leaf node is not set,\n  // calculate it by suming up the value of all children.\n  var sum = 0;\n  zrUtil.each(dataNode.children, function (child) {\n    completeTreeValue(child);\n    var childValue = child.value; // TODO First value of array must be a number\n\n    zrUtil.isArray(childValue) && (childValue = childValue[0]);\n    sum += childValue;\n  });\n  var thisValue = dataNode.value;\n\n  if (zrUtil.isArray(thisValue)) {\n    thisValue = thisValue[0];\n  }\n\n  if (thisValue == null || isNaN(thisValue)) {\n    thisValue = sum;\n  } // Value should not less than 0.\n\n\n  if (thisValue < 0) {\n    thisValue = 0;\n  }\n\n  zrUtil.isArray(dataNode.value) ? dataNode.value[0] = thisValue : dataNode.value = thisValue;\n}\n\nexport default SunburstSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { parsePercent } from '../../util/number.js';\nimport * as zrUtil from 'zrender/lib/core/util.js'; // let PI2 = Math.PI * 2;\n\nvar RADIAN = Math.PI / 180;\nexport default function sunburstLayout(seriesType, ecModel, api) {\n  ecModel.eachSeriesByType(seriesType, function (seriesModel) {\n    var center = seriesModel.get('center');\n    var radius = seriesModel.get('radius');\n\n    if (!zrUtil.isArray(radius)) {\n      radius = [0, radius];\n    }\n\n    if (!zrUtil.isArray(center)) {\n      center = [center, center];\n    }\n\n    var width = api.getWidth();\n    var height = api.getHeight();\n    var size = Math.min(width, height);\n    var cx = parsePercent(center[0], width);\n    var cy = parsePercent(center[1], height);\n    var r0 = parsePercent(radius[0], size / 2);\n    var r = parsePercent(radius[1], size / 2);\n    var startAngle = -seriesModel.get('startAngle') * RADIAN;\n    var minAngle = seriesModel.get('minAngle') * RADIAN;\n    var virtualRoot = seriesModel.getData().tree.root;\n    var treeRoot = seriesModel.getViewRoot();\n    var rootDepth = treeRoot.depth;\n    var sort = seriesModel.get('sort');\n\n    if (sort != null) {\n      initChildren(treeRoot, sort);\n    }\n\n    var validDataCount = 0;\n    zrUtil.each(treeRoot.children, function (child) {\n      !isNaN(child.getValue()) && validDataCount++;\n    });\n    var sum = treeRoot.getValue(); // Sum may be 0\n\n    var unitRadian = Math.PI / (sum || validDataCount) * 2;\n    var renderRollupNode = treeRoot.depth > 0;\n    var levels = treeRoot.height - (renderRollupNode ? -1 : 1);\n    var rPerLevel = (r - r0) / (levels || 1);\n    var clockwise = seriesModel.get('clockwise');\n    var stillShowZeroSum = seriesModel.get('stillShowZeroSum'); // In the case some sector angle is smaller than minAngle\n    // let restAngle = PI2;\n    // let valueSumLargerThanMinAngle = 0;\n\n    var dir = clockwise ? 1 : -1;\n    /**\r\n     * Render a tree\r\n     * @return increased angle\r\n     */\n\n    var renderNode = function (node, startAngle) {\n      if (!node) {\n        return;\n      }\n\n      var endAngle = startAngle; // Render self\n\n      if (node !== virtualRoot) {\n        // Tree node is virtual, so it doesn't need to be drawn\n        var value = node.getValue();\n        var angle = sum === 0 && stillShowZeroSum ? unitRadian : value * unitRadian;\n\n        if (angle < minAngle) {\n          angle = minAngle; // restAngle -= minAngle;\n        } // else {\n        //     valueSumLargerThanMinAngle += value;\n        // }\n\n\n        endAngle = startAngle + dir * angle;\n        var depth = node.depth - rootDepth - (renderRollupNode ? -1 : 1);\n        var rStart = r0 + rPerLevel * depth;\n        var rEnd = r0 + rPerLevel * (depth + 1);\n        var levelModel = seriesModel.getLevelModel(node);\n\n        if (levelModel) {\n          var r0_1 = levelModel.get('r0', true);\n          var r_1 = levelModel.get('r', true);\n          var radius_1 = levelModel.get('radius', true);\n\n          if (radius_1 != null) {\n            r0_1 = radius_1[0];\n            r_1 = radius_1[1];\n          }\n\n          r0_1 != null && (rStart = parsePercent(r0_1, size / 2));\n          r_1 != null && (rEnd = parsePercent(r_1, size / 2));\n        }\n\n        node.setLayout({\n          angle: angle,\n          startAngle: startAngle,\n          endAngle: endAngle,\n          clockwise: clockwise,\n          cx: cx,\n          cy: cy,\n          r0: rStart,\n          r: rEnd\n        });\n      } // Render children\n\n\n      if (node.children && node.children.length) {\n        // currentAngle = startAngle;\n        var siblingAngle_1 = 0;\n        zrUtil.each(node.children, function (node) {\n          siblingAngle_1 += renderNode(node, startAngle + siblingAngle_1);\n        });\n      }\n\n      return endAngle - startAngle;\n    }; // Virtual root node for roll up\n\n\n    if (renderRollupNode) {\n      var rStart = r0;\n      var rEnd = r0 + rPerLevel;\n      var angle = Math.PI * 2;\n      virtualRoot.setLayout({\n        angle: angle,\n        startAngle: startAngle,\n        endAngle: startAngle + angle,\n        clockwise: clockwise,\n        cx: cx,\n        cy: cy,\n        r0: rStart,\n        r: rEnd\n      });\n    }\n\n    renderNode(treeRoot, startAngle);\n  });\n}\n/**\r\n * Init node children by order and update visual\r\n */\n\nfunction initChildren(node, sortOrder) {\n  var children = node.children || [];\n  node.children = sort(children, sortOrder); // Init children recursively\n\n  if (children.length) {\n    zrUtil.each(node.children, function (child) {\n      initChildren(child, sortOrder);\n    });\n  }\n}\n/**\r\n * Sort children nodes\r\n *\r\n * @param {TreeNode[]}               children children of node to be sorted\r\n * @param {string | function | null} sort sort method\r\n *                                   See SunburstSeries.js for details.\r\n */\n\n\nfunction sort(children, sortOrder) {\n  if (zrUtil.isFunction(sortOrder)) {\n    var sortTargets = zrUtil.map(children, function (child, idx) {\n      var value = child.getValue();\n      return {\n        params: {\n          depth: child.depth,\n          height: child.height,\n          dataIndex: child.dataIndex,\n          getValue: function () {\n            return value;\n          }\n        },\n        index: idx\n      };\n    });\n    sortTargets.sort(function (a, b) {\n      return sortOrder(a.params, b.params);\n    });\n    return zrUtil.map(sortTargets, function (target) {\n      return children[target.index];\n    });\n  } else {\n    var isAsc_1 = sortOrder === 'asc';\n    return children.sort(function (a, b) {\n      var diff = (a.getValue() - b.getValue()) * (isAsc_1 ? 1 : -1);\n      return diff === 0 ? (a.dataIndex - b.dataIndex) * (isAsc_1 ? -1 : 1) : diff;\n    });\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { lift } from 'zrender/lib/tool/color.js';\nimport { extend, isString } from 'zrender/lib/core/util.js';\nexport default function sunburstVisual(ecModel) {\n  var paletteScope = {}; // Default color strategy\n\n  function pickColor(node, seriesModel, treeHeight) {\n    // Choose color from palette based on the first level.\n    var current = node;\n\n    while (current && current.depth > 1) {\n      current = current.parentNode;\n    }\n\n    var color = seriesModel.getColorFromPalette(current.name || current.dataIndex + '', paletteScope);\n\n    if (node.depth > 1 && isString(color)) {\n      // Lighter on the deeper level.\n      color = lift(color, (node.depth - 1) / (treeHeight - 1) * 0.5);\n    }\n\n    return color;\n  }\n\n  ecModel.eachSeriesByType('sunburst', function (seriesModel) {\n    var data = seriesModel.getData();\n    var tree = data.tree;\n    tree.eachNode(function (node) {\n      var model = node.getModel();\n      var style = model.getModel('itemStyle').getItemStyle();\n\n      if (!style.fill) {\n        style.fill = pickColor(node, seriesModel, tree.root.height);\n      }\n\n      var existsStyle = data.ensureUniqueItemVisual(node.dataIndex, 'style');\n      extend(existsStyle, style);\n    });\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport SunburstView from './SunburstView.js';\nimport SunburstSeriesModel from './SunburstSeries.js';\nimport sunburstLayout from './sunburstLayout.js';\nimport sunburstVisual from './sunburstVisual.js';\nimport dataFilter from '../../processor/dataFilter.js';\nimport { curry } from 'zrender/lib/core/util.js';\nimport { installSunburstAction } from './sunburstAction.js';\nexport function install(registers) {\n  registers.registerChartView(SunburstView);\n  registers.registerSeriesModel(SunburstSeriesModel);\n  registers.registerLayout(curry(sunburstLayout, 'sunburst'));\n  registers.registerProcessor(curry(dataFilter, 'sunburst'));\n  registers.registerVisual(sunburstVisual);\n  installSunburstAction(registers);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport createSeriesData from '../helper/createSeriesData.js';\nimport { makeInner } from '../../util/model.js';\nimport SeriesModel from '../../model/Series.js'; // Also compat with ec4, where\n// `visual('color') visual('borderColor')` is supported.\n\nexport var STYLE_VISUAL_TYPE = {\n  color: 'fill',\n  borderColor: 'stroke'\n};\nexport var NON_STYLE_VISUAL_PROPS = {\n  symbol: 1,\n  symbolSize: 1,\n  symbolKeepAspect: 1,\n  legendIcon: 1,\n  visualMeta: 1,\n  liftZ: 1,\n  decal: 1\n};\n;\nexport var customInnerStore = makeInner();\n\nvar CustomSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(CustomSeriesModel, _super);\n\n  function CustomSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = CustomSeriesModel.type;\n    return _this;\n  }\n\n  CustomSeriesModel.prototype.optionUpdated = function () {\n    this.currentZLevel = this.get('zlevel', true);\n    this.currentZ = this.get('z', true);\n  };\n\n  CustomSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    return createSeriesData(null, this);\n  };\n\n  CustomSeriesModel.prototype.getDataParams = function (dataIndex, dataType, el) {\n    var params = _super.prototype.getDataParams.call(this, dataIndex, dataType);\n\n    el && (params.info = customInnerStore(el).info);\n    return params;\n  };\n\n  CustomSeriesModel.type = 'series.custom';\n  CustomSeriesModel.dependencies = ['grid', 'polar', 'geo', 'singleAxis', 'calendar'];\n  CustomSeriesModel.defaultOption = {\n    coordinateSystem: 'cartesian2d',\n    // zlevel: 0,\n    z: 2,\n    legendHoverLink: true,\n    // Custom series will not clip by default.\n    // Some case will use custom series to draw label\n    // For example https://echarts.apache.org/examples/en/editor.html?c=custom-gantt-flight\n    clip: false // Cartesian coordinate system\n    // xAxisIndex: 0,\n    // yAxisIndex: 0,\n    // Polar coordinate system\n    // polarIndex: 0,\n    // Geo coordinate system\n    // geoIndex: 0,\n\n  };\n  return CustomSeriesModel;\n}(SeriesModel);\n\nexport default CustomSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\n\nfunction dataToCoordSize(dataSize, dataItem) {\n  // dataItem is necessary in log axis.\n  dataItem = dataItem || [0, 0];\n  return zrUtil.map(['x', 'y'], function (dim, dimIdx) {\n    var axis = this.getAxis(dim);\n    var val = dataItem[dimIdx];\n    var halfSize = dataSize[dimIdx] / 2;\n    return axis.type === 'category' ? axis.getBandWidth() : Math.abs(axis.dataToCoord(val - halfSize) - axis.dataToCoord(val + halfSize));\n  }, this);\n}\n\nexport default function cartesianPrepareCustom(coordSys) {\n  var rect = coordSys.master.getRect();\n  return {\n    coordSys: {\n      // The name exposed to user is always 'cartesian2d' but not 'grid'.\n      type: 'cartesian2d',\n      x: rect.x,\n      y: rect.y,\n      width: rect.width,\n      height: rect.height\n    },\n    api: {\n      coord: function (data) {\n        // do not provide \"out\" param\n        return coordSys.dataToPoint(data);\n      },\n      size: zrUtil.bind(dataToCoordSize, coordSys)\n    }\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\n\nfunction dataToCoordSize(dataSize, dataItem) {\n  dataItem = dataItem || [0, 0];\n  return zrUtil.map([0, 1], function (dimIdx) {\n    var val = dataItem[dimIdx];\n    var halfSize = dataSize[dimIdx] / 2;\n    var p1 = [];\n    var p2 = [];\n    p1[dimIdx] = val - halfSize;\n    p2[dimIdx] = val + halfSize;\n    p1[1 - dimIdx] = p2[1 - dimIdx] = dataItem[1 - dimIdx];\n    return Math.abs(this.dataToPoint(p1)[dimIdx] - this.dataToPoint(p2)[dimIdx]);\n  }, this);\n}\n\nexport default function geoPrepareCustom(coordSys) {\n  var rect = coordSys.getBoundingRect();\n  return {\n    coordSys: {\n      type: 'geo',\n      x: rect.x,\n      y: rect.y,\n      width: rect.width,\n      height: rect.height,\n      zoom: coordSys.getZoom()\n    },\n    api: {\n      coord: function (data) {\n        // do not provide \"out\" and noRoam param,\n        // Compatible with this usage:\n        // echarts.util.map(item.points, api.coord)\n        return coordSys.dataToPoint(data);\n      },\n      size: zrUtil.bind(dataToCoordSize, coordSys)\n    }\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { bind } from 'zrender/lib/core/util.js';\n\nfunction dataToCoordSize(dataSize, dataItem) {\n  // dataItem is necessary in log axis.\n  var axis = this.getAxis();\n  var val = dataItem instanceof Array ? dataItem[0] : dataItem;\n  var halfSize = (dataSize instanceof Array ? dataSize[0] : dataSize) / 2;\n  return axis.type === 'category' ? axis.getBandWidth() : Math.abs(axis.dataToCoord(val - halfSize) - axis.dataToCoord(val + halfSize));\n}\n\nexport default function singlePrepareCustom(coordSys) {\n  var rect = coordSys.getRect();\n  return {\n    coordSys: {\n      type: 'singleAxis',\n      x: rect.x,\n      y: rect.y,\n      width: rect.width,\n      height: rect.height\n    },\n    api: {\n      coord: function (val) {\n        // do not provide \"out\" param\n        return coordSys.dataToPoint(val);\n      },\n      size: bind(dataToCoordSize, coordSys)\n    }\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js'; // import AngleAxis from './AngleAxis.js';\n\nfunction dataToCoordSize(dataSize, dataItem) {\n  // dataItem is necessary in log axis.\n  dataItem = dataItem || [0, 0];\n  return zrUtil.map(['Radius', 'Angle'], function (dim, dimIdx) {\n    var getterName = 'get' + dim + 'Axis'; // TODO: TYPE Check Angle Axis\n\n    var axis = this[getterName]();\n    var val = dataItem[dimIdx];\n    var halfSize = dataSize[dimIdx] / 2;\n    var result = axis.type === 'category' ? axis.getBandWidth() : Math.abs(axis.dataToCoord(val - halfSize) - axis.dataToCoord(val + halfSize));\n\n    if (dim === 'Angle') {\n      result = result * Math.PI / 180;\n    }\n\n    return result;\n  }, this);\n}\n\nexport default function polarPrepareCustom(coordSys) {\n  var radiusAxis = coordSys.getRadiusAxis();\n  var angleAxis = coordSys.getAngleAxis();\n  var radius = radiusAxis.getExtent();\n  radius[0] > radius[1] && radius.reverse();\n  return {\n    coordSys: {\n      type: 'polar',\n      cx: coordSys.cx,\n      cy: coordSys.cy,\n      r: radius[1],\n      r0: radius[0]\n    },\n    api: {\n      coord: function (data) {\n        var radius = radiusAxis.dataToRadius(data[0]);\n        var angle = angleAxis.dataToAngle(data[1]);\n        var coord = coordSys.coordToPoint([radius, angle]);\n        coord.push(radius, angle * Math.PI / 180);\n        return coord;\n      },\n      size: zrUtil.bind(dataToCoordSize, coordSys)\n    }\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nexport default function calendarPrepareCustom(coordSys) {\n  var rect = coordSys.getRect();\n  var rangeInfo = coordSys.getRangeInfo();\n  return {\n    coordSys: {\n      type: 'calendar',\n      x: rect.x,\n      y: rect.y,\n      width: rect.width,\n      height: rect.height,\n      cellWidth: coordSys.getCellWidth(),\n      cellHeight: coordSys.getCellHeight(),\n      rangeInfo: {\n        start: rangeInfo.start,\n        end: rangeInfo.end,\n        weeks: rangeInfo.weeks,\n        dayCount: rangeInfo.allDay\n      }\n    },\n    api: {\n      coord: function (data, clamp) {\n        return coordSys.dataToPoint(data, clamp);\n      }\n    }\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport { hasOwn, assert, isString, retrieve2, retrieve3, defaults, each, indexOf } from 'zrender/lib/core/util.js';\nimport * as graphicUtil from '../../util/graphic.js';\nimport { setDefaultStateProxy, toggleHoverEmphasis } from '../../util/states.js';\nimport * as labelStyleHelper from '../../label/labelStyle.js';\nimport { getDefaultLabel } from '../helper/labelHelper.js';\nimport { getLayoutOnAxis } from '../../layout/barGrid.js';\nimport DataDiffer from '../../data/DataDiffer.js';\nimport ChartView from '../../view/Chart.js';\nimport { createClipPath } from '../helper/createClipPathFromCoordSys.js';\nimport prepareCartesian2d from '../../coord/cartesian/prepareCustom.js';\nimport prepareGeo from '../../coord/geo/prepareCustom.js';\nimport prepareSingleAxis from '../../coord/single/prepareCustom.js';\nimport preparePolar from '../../coord/polar/prepareCustom.js';\nimport prepareCalendar from '../../coord/calendar/prepareCustom.js';\nimport Displayable from 'zrender/lib/graphic/Displayable.js';\nimport { convertToEC4StyleForCustomSerise, isEC4CompatibleStyle, convertFromEC4CompatibleStyle, warnDeprecated } from '../../util/styleCompat.js';\nimport { throwError } from '../../util/log.js';\nimport { createOrUpdatePatternFromDecal } from '../../util/decal.js';\nimport { STYLE_VISUAL_TYPE, NON_STYLE_VISUAL_PROPS, customInnerStore } from './CustomSeries.js';\nimport { applyLeaveTransition, applyUpdateTransition } from '../../animation/customGraphicTransition.js';\nimport { applyKeyframeAnimation, stopPreviousKeyframeAnimationAndRestore } from '../../animation/customGraphicKeyframeAnimation.js';\nvar EMPHASIS = 'emphasis';\nvar NORMAL = 'normal';\nvar BLUR = 'blur';\nvar SELECT = 'select';\nvar STATES = [NORMAL, EMPHASIS, BLUR, SELECT];\nvar PATH_ITEM_STYLE = {\n  normal: ['itemStyle'],\n  emphasis: [EMPHASIS, 'itemStyle'],\n  blur: [BLUR, 'itemStyle'],\n  select: [SELECT, 'itemStyle']\n};\nvar PATH_LABEL = {\n  normal: ['label'],\n  emphasis: [EMPHASIS, 'label'],\n  blur: [BLUR, 'label'],\n  select: [SELECT, 'label']\n};\nvar DEFAULT_TRANSITION = ['x', 'y']; // Use prefix to avoid index to be the same as el.name,\n// which will cause weird update animation.\n\nvar GROUP_DIFF_PREFIX = 'e\\0\\0';\nvar attachedTxInfoTmp = {\n  normal: {},\n  emphasis: {},\n  blur: {},\n  select: {}\n};\n/**\r\n * To reduce total package size of each coordinate systems, the modules `prepareCustom`\r\n * of each coordinate systems are not required by each coordinate systems directly, but\r\n * required by the module `custom`.\r\n *\r\n * prepareInfoForCustomSeries {Function}: optional\r\n *     @return {Object} {coordSys: {...}, api: {\r\n *         coord: function (data, clamp) {}, // return point in global.\r\n *         size: function (dataSize, dataItem) {} // return size of each axis in coordSys.\r\n *     }}\r\n */\n\nvar prepareCustoms = {\n  cartesian2d: prepareCartesian2d,\n  geo: prepareGeo,\n  single: prepareSingleAxis,\n  polar: preparePolar,\n  calendar: prepareCalendar\n};\n\nfunction isPath(el) {\n  return el instanceof graphicUtil.Path;\n}\n\nfunction isDisplayable(el) {\n  return el instanceof Displayable;\n}\n\nfunction copyElement(sourceEl, targetEl) {\n  targetEl.copyTransform(sourceEl);\n\n  if (isDisplayable(targetEl) && isDisplayable(sourceEl)) {\n    targetEl.setStyle(sourceEl.style);\n    targetEl.z = sourceEl.z;\n    targetEl.z2 = sourceEl.z2;\n    targetEl.zlevel = sourceEl.zlevel;\n    targetEl.invisible = sourceEl.invisible;\n    targetEl.ignore = sourceEl.ignore;\n\n    if (isPath(targetEl) && isPath(sourceEl)) {\n      targetEl.setShape(sourceEl.shape);\n    }\n  }\n}\n\nvar CustomChartView =\n/** @class */\nfunction (_super) {\n  __extends(CustomChartView, _super);\n\n  function CustomChartView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = CustomChartView.type;\n    return _this;\n  }\n\n  CustomChartView.prototype.render = function (customSeries, ecModel, api, payload) {\n    // Clear previously rendered progressive elements.\n    this._progressiveEls = null;\n    var oldData = this._data;\n    var data = customSeries.getData();\n    var group = this.group;\n    var renderItem = makeRenderItem(customSeries, data, ecModel, api);\n\n    if (!oldData) {\n      // Previous render is incremental render or first render.\n      // Needs remove the incremental rendered elements.\n      group.removeAll();\n    }\n\n    data.diff(oldData).add(function (newIdx) {\n      createOrUpdateItem(api, null, newIdx, renderItem(newIdx, payload), customSeries, group, data);\n    }).remove(function (oldIdx) {\n      var el = oldData.getItemGraphicEl(oldIdx);\n      el && applyLeaveTransition(el, customInnerStore(el).option, customSeries);\n    }).update(function (newIdx, oldIdx) {\n      var oldEl = oldData.getItemGraphicEl(oldIdx);\n      createOrUpdateItem(api, oldEl, newIdx, renderItem(newIdx, payload), customSeries, group, data);\n    }).execute(); // Do clipping\n\n    var clipPath = customSeries.get('clip', true) ? createClipPath(customSeries.coordinateSystem, false, customSeries) : null;\n\n    if (clipPath) {\n      group.setClipPath(clipPath);\n    } else {\n      group.removeClipPath();\n    }\n\n    this._data = data;\n  };\n\n  CustomChartView.prototype.incrementalPrepareRender = function (customSeries, ecModel, api) {\n    this.group.removeAll();\n    this._data = null;\n  };\n\n  CustomChartView.prototype.incrementalRender = function (params, customSeries, ecModel, api, payload) {\n    var data = customSeries.getData();\n    var renderItem = makeRenderItem(customSeries, data, ecModel, api);\n    var progressiveEls = this._progressiveEls = [];\n\n    function setIncrementalAndHoverLayer(el) {\n      if (!el.isGroup) {\n        el.incremental = true;\n        el.ensureState('emphasis').hoverLayer = true;\n      }\n    }\n\n    for (var idx = params.start; idx < params.end; idx++) {\n      var el = createOrUpdateItem(null, null, idx, renderItem(idx, payload), customSeries, this.group, data);\n\n      if (el) {\n        el.traverse(setIncrementalAndHoverLayer);\n        progressiveEls.push(el);\n      }\n    }\n  };\n\n  CustomChartView.prototype.eachRendered = function (cb) {\n    graphicUtil.traverseElements(this._progressiveEls || this.group, cb);\n  };\n\n  CustomChartView.prototype.filterForExposedEvent = function (eventType, query, targetEl, packedEvent) {\n    var elementName = query.element;\n\n    if (elementName == null || targetEl.name === elementName) {\n      return true;\n    } // Enable to give a name on a group made by `renderItem`, and listen\n    // events that are triggered by its descendents.\n\n\n    while ((targetEl = targetEl.__hostTarget || targetEl.parent) && targetEl !== this.group) {\n      if (targetEl.name === elementName) {\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  CustomChartView.type = 'custom';\n  return CustomChartView;\n}(ChartView);\n\nexport default CustomChartView;\n\nfunction createEl(elOption) {\n  var graphicType = elOption.type;\n  var el; // Those graphic elements are not shapes. They should not be\n  // overwritten by users, so do them first.\n\n  if (graphicType === 'path') {\n    var shape = elOption.shape; // Using pathRect brings convenience to users sacle svg path.\n\n    var pathRect = shape.width != null && shape.height != null ? {\n      x: shape.x || 0,\n      y: shape.y || 0,\n      width: shape.width,\n      height: shape.height\n    } : null;\n    var pathData = getPathData(shape); // Path is also used for icon, so layout 'center' by default.\n\n    el = graphicUtil.makePath(pathData, null, pathRect, shape.layout || 'center');\n    customInnerStore(el).customPathData = pathData;\n  } else if (graphicType === 'image') {\n    el = new graphicUtil.Image({});\n    customInnerStore(el).customImagePath = elOption.style.image;\n  } else if (graphicType === 'text') {\n    el = new graphicUtil.Text({}); // customInnerStore(el).customText = (elOption.style as TextStyleProps).text;\n  } else if (graphicType === 'group') {\n    el = new graphicUtil.Group();\n  } else if (graphicType === 'compoundPath') {\n    throw new Error('\"compoundPath\" is not supported yet.');\n  } else {\n    var Clz = graphicUtil.getShapeClass(graphicType);\n\n    if (!Clz) {\n      var errMsg = '';\n\n      if (process.env.NODE_ENV !== 'production') {\n        errMsg = 'graphic type \"' + graphicType + '\" can not be found.';\n      }\n\n      throwError(errMsg);\n    }\n\n    el = new Clz();\n  }\n\n  customInnerStore(el).customGraphicType = graphicType;\n  el.name = elOption.name; // Compat ec4: the default z2 lift is 1. If changing the number,\n  // some cases probably be broken: hierarchy layout along z, like circle packing,\n  // where emphasis only intending to modify color/border rather than lift z2.\n\n  el.z2EmphasisLift = 1;\n  el.z2SelectLift = 1;\n  return el;\n}\n\nfunction updateElNormal( // Can be null/undefined\napi, el, dataIndex, elOption, attachedTxInfo, seriesModel, isInit) {\n  // Stop and restore before update any other attributes.\n  stopPreviousKeyframeAnimationAndRestore(el);\n  var txCfgOpt = attachedTxInfo && attachedTxInfo.normal.cfg;\n\n  if (txCfgOpt) {\n    // PENDING: whether use user object directly rather than clone?\n    // TODO:5.0 textConfig transition animation?\n    el.setTextConfig(txCfgOpt);\n  } // Default transition ['x', 'y']\n\n\n  if (elOption && elOption.transition == null) {\n    elOption.transition = DEFAULT_TRANSITION;\n  } // Do some normalization on style.\n\n\n  var styleOpt = elOption && elOption.style;\n\n  if (styleOpt) {\n    if (el.type === 'text') {\n      var textOptionStyle = styleOpt; // Compatible with ec4: if `textFill` or `textStroke` exists use them.\n\n      hasOwn(textOptionStyle, 'textFill') && (textOptionStyle.fill = textOptionStyle.textFill);\n      hasOwn(textOptionStyle, 'textStroke') && (textOptionStyle.stroke = textOptionStyle.textStroke);\n    }\n\n    var decalPattern = void 0;\n    var decalObj = isPath(el) ? styleOpt.decal : null;\n\n    if (api && decalObj) {\n      decalObj.dirty = true;\n      decalPattern = createOrUpdatePatternFromDecal(decalObj, api);\n    } // Always overwrite in case user specify this prop.\n\n\n    styleOpt.__decalPattern = decalPattern;\n  }\n\n  if (isDisplayable(el)) {\n    if (styleOpt) {\n      var decalPattern = styleOpt.__decalPattern;\n\n      if (decalPattern) {\n        styleOpt.decal = decalPattern;\n      }\n    }\n  }\n\n  applyUpdateTransition(el, elOption, seriesModel, {\n    dataIndex: dataIndex,\n    isInit: isInit,\n    clearStyle: true\n  });\n  applyKeyframeAnimation(el, elOption.keyframeAnimation, seriesModel);\n}\n\nfunction updateElOnState(state, el, elStateOpt, styleOpt, attachedTxInfo) {\n  var elDisplayable = el.isGroup ? null : el;\n  var txCfgOpt = attachedTxInfo && attachedTxInfo[state].cfg; // PENDING:5.0 support customize scale change and transition animation?\n\n  if (elDisplayable) {\n    // By default support auto lift color when hover whether `emphasis` specified.\n    var stateObj = elDisplayable.ensureState(state);\n\n    if (styleOpt === false) {\n      var existingEmphasisState = elDisplayable.getState(state);\n\n      if (existingEmphasisState) {\n        existingEmphasisState.style = null;\n      }\n    } else {\n      // style is needed to enable default emphasis.\n      stateObj.style = styleOpt || null;\n    } // If `elOption.styleEmphasis` or `elOption.emphasis.style` is `false`,\n    // remove hover style.\n    // If `elOption.textConfig` or `elOption.emphasis.textConfig` is null/undefined, it does not\n    // make sense. So for simplicity, we do not ditinguish `hasOwnProperty` and null/undefined.\n\n\n    if (txCfgOpt) {\n      stateObj.textConfig = txCfgOpt;\n    }\n\n    setDefaultStateProxy(elDisplayable);\n  }\n}\n\nfunction updateZ(el, elOption, seriesModel) {\n  // Group not support textContent and not support z yet.\n  if (el.isGroup) {\n    return;\n  }\n\n  var elDisplayable = el;\n  var currentZ = seriesModel.currentZ;\n  var currentZLevel = seriesModel.currentZLevel; // Always erase.\n\n  elDisplayable.z = currentZ;\n  elDisplayable.zlevel = currentZLevel; // z2 must not be null/undefined, otherwise sort error may occur.\n\n  var optZ2 = elOption.z2;\n  optZ2 != null && (elDisplayable.z2 = optZ2 || 0);\n\n  for (var i = 0; i < STATES.length; i++) {\n    updateZForEachState(elDisplayable, elOption, STATES[i]);\n  }\n}\n\nfunction updateZForEachState(elDisplayable, elOption, state) {\n  var isNormal = state === NORMAL;\n  var elStateOpt = isNormal ? elOption : retrieveStateOption(elOption, state);\n  var optZ2 = elStateOpt ? elStateOpt.z2 : null;\n  var stateObj;\n\n  if (optZ2 != null) {\n    // Do not `ensureState` until required.\n    stateObj = isNormal ? elDisplayable : elDisplayable.ensureState(state);\n    stateObj.z2 = optZ2 || 0;\n  }\n}\n\nfunction makeRenderItem(customSeries, data, ecModel, api) {\n  var renderItem = customSeries.get('renderItem');\n  var coordSys = customSeries.coordinateSystem;\n  var prepareResult = {};\n\n  if (coordSys) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(renderItem, 'series.render is required.');\n      assert(coordSys.prepareCustoms || prepareCustoms[coordSys.type], 'This coordSys does not support custom series.');\n    } // `coordSys.prepareCustoms` is used for external coord sys like bmap.\n\n\n    prepareResult = coordSys.prepareCustoms ? coordSys.prepareCustoms(coordSys) : prepareCustoms[coordSys.type](coordSys);\n  }\n\n  var userAPI = defaults({\n    getWidth: api.getWidth,\n    getHeight: api.getHeight,\n    getZr: api.getZr,\n    getDevicePixelRatio: api.getDevicePixelRatio,\n    value: value,\n    style: style,\n    ordinalRawValue: ordinalRawValue,\n    styleEmphasis: styleEmphasis,\n    visual: visual,\n    barLayout: barLayout,\n    currentSeriesIndices: currentSeriesIndices,\n    font: font\n  }, prepareResult.api || {});\n  var userParams = {\n    // The life cycle of context: current round of rendering.\n    // The global life cycle is probably not necessary, because\n    // user can store global status by themselves.\n    context: {},\n    seriesId: customSeries.id,\n    seriesName: customSeries.name,\n    seriesIndex: customSeries.seriesIndex,\n    coordSys: prepareResult.coordSys,\n    dataInsideLength: data.count(),\n    encode: wrapEncodeDef(customSeries.getData())\n  }; // If someday intending to refactor them to a class, should consider do not\n  // break change: currently these attribute member are encapsulated in a closure\n  // so that do not need to force user to call these method with a scope.\n  // Do not support call `api` asynchronously without dataIndexInside input.\n\n  var currDataIndexInside;\n  var currItemModel;\n  var currItemStyleModels = {};\n  var currLabelModels = {};\n  var seriesItemStyleModels = {};\n  var seriesLabelModels = {};\n\n  for (var i = 0; i < STATES.length; i++) {\n    var stateName = STATES[i];\n    seriesItemStyleModels[stateName] = customSeries.getModel(PATH_ITEM_STYLE[stateName]);\n    seriesLabelModels[stateName] = customSeries.getModel(PATH_LABEL[stateName]);\n  }\n\n  function getItemModel(dataIndexInside) {\n    return dataIndexInside === currDataIndexInside ? currItemModel || (currItemModel = data.getItemModel(dataIndexInside)) : data.getItemModel(dataIndexInside);\n  }\n\n  function getItemStyleModel(dataIndexInside, state) {\n    return !data.hasItemOption ? seriesItemStyleModels[state] : dataIndexInside === currDataIndexInside ? currItemStyleModels[state] || (currItemStyleModels[state] = getItemModel(dataIndexInside).getModel(PATH_ITEM_STYLE[state])) : getItemModel(dataIndexInside).getModel(PATH_ITEM_STYLE[state]);\n  }\n\n  function getLabelModel(dataIndexInside, state) {\n    return !data.hasItemOption ? seriesLabelModels[state] : dataIndexInside === currDataIndexInside ? currLabelModels[state] || (currLabelModels[state] = getItemModel(dataIndexInside).getModel(PATH_LABEL[state])) : getItemModel(dataIndexInside).getModel(PATH_LABEL[state]);\n  }\n\n  return function (dataIndexInside, payload) {\n    currDataIndexInside = dataIndexInside;\n    currItemModel = null;\n    currItemStyleModels = {};\n    currLabelModels = {};\n    return renderItem && renderItem(defaults({\n      dataIndexInside: dataIndexInside,\n      dataIndex: data.getRawIndex(dataIndexInside),\n      // Can be used for optimization when zoom or roam.\n      actionType: payload ? payload.type : null\n    }, userParams), userAPI);\n  };\n  /**\r\n   * @public\r\n   * @param dim by default 0.\r\n   * @param dataIndexInside by default `currDataIndexInside`.\r\n   */\n\n  function value(dim, dataIndexInside) {\n    dataIndexInside == null && (dataIndexInside = currDataIndexInside);\n    return data.getStore().get(data.getDimensionIndex(dim || 0), dataIndexInside);\n  }\n  /**\r\n   * @public\r\n   * @param dim by default 0.\r\n   * @param dataIndexInside by default `currDataIndexInside`.\r\n   */\n\n\n  function ordinalRawValue(dim, dataIndexInside) {\n    dataIndexInside == null && (dataIndexInside = currDataIndexInside);\n    dim = dim || 0;\n    var dimInfo = data.getDimensionInfo(dim);\n\n    if (!dimInfo) {\n      var dimIndex = data.getDimensionIndex(dim);\n      return dimIndex >= 0 ? data.getStore().get(dimIndex, dataIndexInside) : undefined;\n    }\n\n    var val = data.get(dimInfo.name, dataIndexInside);\n    var ordinalMeta = dimInfo && dimInfo.ordinalMeta;\n    return ordinalMeta ? ordinalMeta.categories[val] : val;\n  }\n  /**\r\n   * @deprecated The original intention of `api.style` is enable to set itemStyle\r\n   * like other series. But it is not necessary and not easy to give a strict definition\r\n   * of what it returns. And since echarts5 it needs to be make compat work. So\r\n   * deprecates it since echarts5.\r\n   *\r\n   * By default, `visual` is applied to style (to support visualMap).\r\n   * `visual.color` is applied at `fill`. If user want apply visual.color on `stroke`,\r\n   * it can be implemented as:\r\n   * `api.style({stroke: api.visual('color'), fill: null})`;\r\n   *\r\n   * [Compat]: since ec5, RectText has been separated from its hosts el.\r\n   * so `api.style()` will only return the style from `itemStyle` but not handle `label`\r\n   * any more. But `series.label` config is never published in doc.\r\n   * We still compat it in `api.style()`. But not encourage to use it and will still not\r\n   * to pulish it to doc.\r\n   * @public\r\n   * @param dataIndexInside by default `currDataIndexInside`.\r\n   */\n\n\n  function style(userProps, dataIndexInside) {\n    if (process.env.NODE_ENV !== 'production') {\n      warnDeprecated('api.style', 'Please write literal style directly instead.');\n    }\n\n    dataIndexInside == null && (dataIndexInside = currDataIndexInside);\n    var style = data.getItemVisual(dataIndexInside, 'style');\n    var visualColor = style && style.fill;\n    var opacity = style && style.opacity;\n    var itemStyle = getItemStyleModel(dataIndexInside, NORMAL).getItemStyle();\n    visualColor != null && (itemStyle.fill = visualColor);\n    opacity != null && (itemStyle.opacity = opacity);\n    var opt = {\n      inheritColor: isString(visualColor) ? visualColor : '#000'\n    };\n    var labelModel = getLabelModel(dataIndexInside, NORMAL); // Now that the feature of \"auto adjust text fill/stroke\" has been migrated to zrender\n    // since ec5, we should set `isAttached` as `false` here and make compat in\n    // `convertToEC4StyleForCustomSerise`.\n\n    var textStyle = labelStyleHelper.createTextStyle(labelModel, null, opt, false, true);\n    textStyle.text = labelModel.getShallow('show') ? retrieve2(customSeries.getFormattedLabel(dataIndexInside, NORMAL), getDefaultLabel(data, dataIndexInside)) : null;\n    var textConfig = labelStyleHelper.createTextConfig(labelModel, opt, false);\n    preFetchFromExtra(userProps, itemStyle);\n    itemStyle = convertToEC4StyleForCustomSerise(itemStyle, textStyle, textConfig);\n    userProps && applyUserPropsAfter(itemStyle, userProps);\n    itemStyle.legacy = true;\n    return itemStyle;\n  }\n  /**\r\n   * @deprecated The reason see `api.style()`\r\n   * @public\r\n   * @param dataIndexInside by default `currDataIndexInside`.\r\n   */\n\n\n  function styleEmphasis(userProps, dataIndexInside) {\n    if (process.env.NODE_ENV !== 'production') {\n      warnDeprecated('api.styleEmphasis', 'Please write literal style directly instead.');\n    }\n\n    dataIndexInside == null && (dataIndexInside = currDataIndexInside);\n    var itemStyle = getItemStyleModel(dataIndexInside, EMPHASIS).getItemStyle();\n    var labelModel = getLabelModel(dataIndexInside, EMPHASIS);\n    var textStyle = labelStyleHelper.createTextStyle(labelModel, null, null, true, true);\n    textStyle.text = labelModel.getShallow('show') ? retrieve3(customSeries.getFormattedLabel(dataIndexInside, EMPHASIS), customSeries.getFormattedLabel(dataIndexInside, NORMAL), getDefaultLabel(data, dataIndexInside)) : null;\n    var textConfig = labelStyleHelper.createTextConfig(labelModel, null, true);\n    preFetchFromExtra(userProps, itemStyle);\n    itemStyle = convertToEC4StyleForCustomSerise(itemStyle, textStyle, textConfig);\n    userProps && applyUserPropsAfter(itemStyle, userProps);\n    itemStyle.legacy = true;\n    return itemStyle;\n  }\n\n  function applyUserPropsAfter(itemStyle, extra) {\n    for (var key in extra) {\n      if (hasOwn(extra, key)) {\n        itemStyle[key] = extra[key];\n      }\n    }\n  }\n\n  function preFetchFromExtra(extra, itemStyle) {\n    // A trick to retrieve those props firstly, which are used to\n    // apply auto inside fill/stroke in `convertToEC4StyleForCustomSerise`.\n    // (It's not reasonable but only for a degree of compat)\n    if (extra) {\n      extra.textFill && (itemStyle.textFill = extra.textFill);\n      extra.textPosition && (itemStyle.textPosition = extra.textPosition);\n    }\n  }\n  /**\r\n   * @public\r\n   * @param dataIndexInside by default `currDataIndexInside`.\r\n   */\n\n\n  function visual(visualType, dataIndexInside) {\n    dataIndexInside == null && (dataIndexInside = currDataIndexInside);\n\n    if (hasOwn(STYLE_VISUAL_TYPE, visualType)) {\n      var style_1 = data.getItemVisual(dataIndexInside, 'style');\n      return style_1 ? style_1[STYLE_VISUAL_TYPE[visualType]] : null;\n    } // Only support these visuals. Other visual might be inner tricky\n    // for performance (like `style`), do not expose to users.\n\n\n    if (hasOwn(NON_STYLE_VISUAL_PROPS, visualType)) {\n      return data.getItemVisual(dataIndexInside, visualType);\n    }\n  }\n  /**\r\n   * @public\r\n   * @return If not support, return undefined.\r\n   */\n\n\n  function barLayout(opt) {\n    if (coordSys.type === 'cartesian2d') {\n      var baseAxis = coordSys.getBaseAxis();\n      return getLayoutOnAxis(defaults({\n        axis: baseAxis\n      }, opt));\n    }\n  }\n  /**\r\n   * @public\r\n   */\n\n\n  function currentSeriesIndices() {\n    return ecModel.getCurrentSeriesIndices();\n  }\n  /**\r\n   * @public\r\n   * @return font string\r\n   */\n\n\n  function font(opt) {\n    return labelStyleHelper.getFont(opt, ecModel);\n  }\n}\n\nfunction wrapEncodeDef(data) {\n  var encodeDef = {};\n  each(data.dimensions, function (dimName) {\n    var dimInfo = data.getDimensionInfo(dimName);\n\n    if (!dimInfo.isExtraCoord) {\n      var coordDim = dimInfo.coordDim;\n      var dataDims = encodeDef[coordDim] = encodeDef[coordDim] || [];\n      dataDims[dimInfo.coordDimIndex] = data.getDimensionIndex(dimName);\n    }\n  });\n  return encodeDef;\n}\n\nfunction createOrUpdateItem(api, existsEl, dataIndex, elOption, seriesModel, group, data) {\n  // [Rule]\n  // If `renderItem` returns `null`/`undefined`/`false`, remove the previous el if existing.\n  //     (It seems that violate the \"merge\" principle, but most of users probably intuitively\n  //     regard \"return;\" as \"show nothing element whatever\", so make a exception to meet the\n  //     most cases.)\n  // The rule or \"merge\" see [STRATEGY_MERGE].\n  // If `elOption` is `null`/`undefined`/`false` (when `renderItem` returns nothing).\n  if (!elOption) {\n    group.remove(existsEl);\n    return;\n  }\n\n  var el = doCreateOrUpdateEl(api, existsEl, dataIndex, elOption, seriesModel, group);\n  el && data.setItemGraphicEl(dataIndex, el);\n  el && toggleHoverEmphasis(el, elOption.focus, elOption.blurScope, elOption.emphasisDisabled);\n  return el;\n}\n\nfunction doCreateOrUpdateEl(api, existsEl, dataIndex, elOption, seriesModel, group) {\n  if (process.env.NODE_ENV !== 'production') {\n    assert(elOption, 'should not have an null/undefined element setting');\n  }\n\n  var toBeReplacedIdx = -1;\n  var oldEl = existsEl;\n\n  if (existsEl && doesElNeedRecreate(existsEl, elOption, seriesModel) // || (\n  //     // PENDING: even in one-to-one mapping case, if el is marked as morph,\n  //     // do not sure whether the el will be mapped to another el with different\n  //     // hierarchy in Group tree. So always recreate el rather than reuse the el.\n  //     morphHelper && morphHelper.isOneToOneFrom(el)\n  // )\n  ) {\n    // Should keep at the original index, otherwise \"merge by index\" will be incorrect.\n    toBeReplacedIdx = indexOf(group.childrenRef(), existsEl);\n    existsEl = null;\n  }\n\n  var isInit = !existsEl;\n  var el = existsEl;\n\n  if (!el) {\n    el = createEl(elOption);\n\n    if (oldEl) {\n      copyElement(oldEl, el);\n    }\n  } else {\n    // FIMXE:NEXT unified clearState?\n    // If in some case the performance issue arised, consider\n    // do not clearState but update cached normal state directly.\n    el.clearStates();\n  } // Need to set morph: false explictly to disable automatically morphing.\n\n\n  if (elOption.morph === false) {\n    el.disableMorphing = true;\n  } else if (el.disableMorphing) {\n    el.disableMorphing = false;\n  }\n\n  attachedTxInfoTmp.normal.cfg = attachedTxInfoTmp.normal.conOpt = attachedTxInfoTmp.emphasis.cfg = attachedTxInfoTmp.emphasis.conOpt = attachedTxInfoTmp.blur.cfg = attachedTxInfoTmp.blur.conOpt = attachedTxInfoTmp.select.cfg = attachedTxInfoTmp.select.conOpt = null;\n  attachedTxInfoTmp.isLegacy = false;\n  doCreateOrUpdateAttachedTx(el, dataIndex, elOption, seriesModel, isInit, attachedTxInfoTmp);\n  doCreateOrUpdateClipPath(el, dataIndex, elOption, seriesModel, isInit);\n  updateElNormal(api, el, dataIndex, elOption, attachedTxInfoTmp, seriesModel, isInit); // `elOption.info` enables user to mount some info on\n  // elements and use them in event handlers.\n  // Update them only when user specified, otherwise, remain.\n\n  hasOwn(elOption, 'info') && (customInnerStore(el).info = elOption.info);\n\n  for (var i = 0; i < STATES.length; i++) {\n    var stateName = STATES[i];\n\n    if (stateName !== NORMAL) {\n      var otherStateOpt = retrieveStateOption(elOption, stateName);\n      var otherStyleOpt = retrieveStyleOptionOnState(elOption, otherStateOpt, stateName);\n      updateElOnState(stateName, el, otherStateOpt, otherStyleOpt, attachedTxInfoTmp);\n    }\n  }\n\n  updateZ(el, elOption, seriesModel);\n\n  if (elOption.type === 'group') {\n    mergeChildren(api, el, dataIndex, elOption, seriesModel);\n  }\n\n  if (toBeReplacedIdx >= 0) {\n    group.replaceAt(el, toBeReplacedIdx);\n  } else {\n    group.add(el);\n  }\n\n  return el;\n} // `el` must not be null/undefined.\n\n\nfunction doesElNeedRecreate(el, elOption, seriesModel) {\n  var elInner = customInnerStore(el);\n  var elOptionType = elOption.type;\n  var elOptionShape = elOption.shape;\n  var elOptionStyle = elOption.style;\n  return (// Always create new if universal transition is enabled.\n    // Because we do transition after render. It needs to know what old element is. Replacement will loose it.\n    seriesModel.isUniversalTransitionEnabled() // If `elOptionType` is `null`, follow the merge principle.\n    || elOptionType != null && elOptionType !== elInner.customGraphicType || elOptionType === 'path' && hasOwnPathData(elOptionShape) && getPathData(elOptionShape) !== elInner.customPathData || elOptionType === 'image' && hasOwn(elOptionStyle, 'image') && elOptionStyle.image !== elInner.customImagePath // // FIXME test and remove this restriction?\n    // || (elOptionType === 'text'\n    //     && hasOwn(elOptionStyle, 'text')\n    //     && (elOptionStyle as TextStyleProps).text !== elInner.customText\n    // )\n\n  );\n}\n\nfunction doCreateOrUpdateClipPath(el, dataIndex, elOption, seriesModel, isInit) {\n  // Based on the \"merge\" principle, if no clipPath provided,\n  // do nothing. The exists clip will be totally removed only if\n  // `el.clipPath` is `false`. Otherwise it will be merged/replaced.\n  var clipPathOpt = elOption.clipPath;\n\n  if (clipPathOpt === false) {\n    if (el && el.getClipPath()) {\n      el.removeClipPath();\n    }\n  } else if (clipPathOpt) {\n    var clipPath = el.getClipPath();\n\n    if (clipPath && doesElNeedRecreate(clipPath, clipPathOpt, seriesModel)) {\n      clipPath = null;\n    }\n\n    if (!clipPath) {\n      clipPath = createEl(clipPathOpt);\n\n      if (process.env.NODE_ENV !== 'production') {\n        assert(isPath(clipPath), 'Only any type of `path` can be used in `clipPath`, rather than ' + clipPath.type + '.');\n      }\n\n      el.setClipPath(clipPath);\n    }\n\n    updateElNormal(null, clipPath, dataIndex, clipPathOpt, null, seriesModel, isInit);\n  } // If not define `clipPath` in option, do nothing unnecessary.\n\n}\n\nfunction doCreateOrUpdateAttachedTx(el, dataIndex, elOption, seriesModel, isInit, attachedTxInfo) {\n  // Group does not support textContent temporarily until necessary.\n  if (el.isGroup) {\n    return;\n  } // Normal must be called before emphasis, for `isLegacy` detection.\n\n\n  processTxInfo(elOption, null, attachedTxInfo);\n  processTxInfo(elOption, EMPHASIS, attachedTxInfo); // If `elOption.textConfig` or `elOption.textContent` is null/undefined, it does not make sense.\n  // So for simplicity, if \"elOption hasOwnProperty of them but be null/undefined\", we do not\n  // trade them as set to null to el.\n  // Especially:\n  // `elOption.textContent: false` means remove textContent.\n  // `elOption.textContent.emphasis.style: false` means remove the style from emphasis state.\n\n  var txConOptNormal = attachedTxInfo.normal.conOpt;\n  var txConOptEmphasis = attachedTxInfo.emphasis.conOpt;\n  var txConOptBlur = attachedTxInfo.blur.conOpt;\n  var txConOptSelect = attachedTxInfo.select.conOpt;\n\n  if (txConOptNormal != null || txConOptEmphasis != null || txConOptSelect != null || txConOptBlur != null) {\n    var textContent = el.getTextContent();\n\n    if (txConOptNormal === false) {\n      textContent && el.removeTextContent();\n    } else {\n      txConOptNormal = attachedTxInfo.normal.conOpt = txConOptNormal || {\n        type: 'text'\n      };\n\n      if (!textContent) {\n        textContent = createEl(txConOptNormal);\n        el.setTextContent(textContent);\n      } else {\n        // If in some case the performance issue arised, consider\n        // do not clearState but update cached normal state directly.\n        textContent.clearStates();\n      }\n\n      updateElNormal(null, textContent, dataIndex, txConOptNormal, null, seriesModel, isInit);\n      var txConStlOptNormal = txConOptNormal && txConOptNormal.style;\n\n      for (var i = 0; i < STATES.length; i++) {\n        var stateName = STATES[i];\n\n        if (stateName !== NORMAL) {\n          var txConOptOtherState = attachedTxInfo[stateName].conOpt;\n          updateElOnState(stateName, textContent, txConOptOtherState, retrieveStyleOptionOnState(txConOptNormal, txConOptOtherState, stateName), null);\n        }\n      }\n\n      txConStlOptNormal ? textContent.dirty() : textContent.markRedraw();\n    }\n  }\n}\n\nfunction processTxInfo(elOption, state, attachedTxInfo) {\n  var stateOpt = !state ? elOption : retrieveStateOption(elOption, state);\n  var styleOpt = !state ? elOption.style : retrieveStyleOptionOnState(elOption, stateOpt, EMPHASIS);\n  var elType = elOption.type;\n  var txCfg = stateOpt ? stateOpt.textConfig : null;\n  var txConOptNormal = elOption.textContent;\n  var txConOpt = !txConOptNormal ? null : !state ? txConOptNormal : retrieveStateOption(txConOptNormal, state);\n\n  if (styleOpt && ( // Because emphasis style has little info to detect legacy,\n  // if normal is legacy, emphasis is trade as legacy.\n  attachedTxInfo.isLegacy || isEC4CompatibleStyle(styleOpt, elType, !!txCfg, !!txConOpt))) {\n    attachedTxInfo.isLegacy = true;\n    var convertResult = convertFromEC4CompatibleStyle(styleOpt, elType, !state); // Explicitly specified `textConfig` and `textContent` has higher priority than\n    // the ones generated by legacy style. Otherwise if users use them and `api.style`\n    // at the same time, they not both work and hardly to known why.\n\n    if (!txCfg && convertResult.textConfig) {\n      txCfg = convertResult.textConfig;\n    }\n\n    if (!txConOpt && convertResult.textContent) {\n      txConOpt = convertResult.textContent;\n    }\n  }\n\n  if (!state && txConOpt) {\n    var txConOptNormal_1 = txConOpt; // `textContent: {type: 'text'}`, the \"type\" is easy to be missing. So we tolerate it.\n\n    !txConOptNormal_1.type && (txConOptNormal_1.type = 'text');\n\n    if (process.env.NODE_ENV !== 'production') {\n      // Do not tolerate incorrcet type for forward compat.\n      assert(txConOptNormal_1.type === 'text', 'textContent.type must be \"text\"');\n    }\n  }\n\n  var info = !state ? attachedTxInfo.normal : attachedTxInfo[state];\n  info.cfg = txCfg;\n  info.conOpt = txConOpt;\n}\n\nfunction retrieveStateOption(elOption, state) {\n  return !state ? elOption : elOption ? elOption[state] : null;\n}\n\nfunction retrieveStyleOptionOnState(stateOptionNormal, stateOption, state) {\n  var style = stateOption && stateOption.style;\n\n  if (style == null && state === EMPHASIS && stateOptionNormal) {\n    style = stateOptionNormal.styleEmphasis;\n  }\n\n  return style;\n} // Usage:\n// (1) By default, `elOption.$mergeChildren` is `'byIndex'`, which indicates\n//     that the existing children will not be removed, and enables the feature\n//     that update some of the props of some of the children simply by construct\n//     the returned children of `renderItem` like:\n//     `var children = group.children = []; children[3] = {opacity: 0.5};`\n// (2) If `elOption.$mergeChildren` is `'byName'`, add/update/remove children\n//     by child.name. But that might be lower performance.\n// (3) If `elOption.$mergeChildren` is `false`, the existing children will be\n//     replaced totally.\n// (4) If `!elOption.children`, following the \"merge\" principle, nothing will\n//     happen.\n// (5) If `elOption.$mergeChildren` is not `false` neither `'byName'` and the\n//     `el` is a group, and if any of the new child is null, it means to remove\n//     the element at the same index, if exists. On the other hand, if the new\n//     child is and empty object `{}`, it means to keep the element not changed.\n//\n// For implementation simpleness, do not provide a direct way to remove single\n// child (otherwise the total indices of the children array have to be modified).\n// User can remove a single child by setting its `ignore` to `true`.\n\n\nfunction mergeChildren(api, el, dataIndex, elOption, seriesModel) {\n  var newChildren = elOption.children;\n  var newLen = newChildren ? newChildren.length : 0;\n  var mergeChildren = elOption.$mergeChildren; // `diffChildrenByName` has been deprecated.\n\n  var byName = mergeChildren === 'byName' || elOption.diffChildrenByName;\n  var notMerge = mergeChildren === false; // For better performance on roam update, only enter if necessary.\n\n  if (!newLen && !byName && !notMerge) {\n    return;\n  }\n\n  if (byName) {\n    diffGroupChildren({\n      api: api,\n      oldChildren: el.children() || [],\n      newChildren: newChildren || [],\n      dataIndex: dataIndex,\n      seriesModel: seriesModel,\n      group: el\n    });\n    return;\n  }\n\n  notMerge && el.removeAll(); // Mapping children of a group simply by index, which\n  // might be better performance.\n\n  var index = 0;\n\n  for (; index < newLen; index++) {\n    var newChild = newChildren[index];\n    var oldChild = el.childAt(index);\n\n    if (newChild) {\n      if (newChild.ignore == null) {\n        // The old child is set to be ignored if null (see comments\n        // below). So we need to set ignore to be false back.\n        newChild.ignore = false;\n      }\n\n      doCreateOrUpdateEl(api, oldChild, dataIndex, newChild, seriesModel, el);\n    } else {\n      if (process.env.NODE_ENV !== 'production') {\n        assert(oldChild, 'renderItem should not return a group containing elements' + ' as null/undefined/{} if they do not exist before.');\n      } // If the new element option is null, it means to remove the old\n      // element. But we cannot really remove the element from the group\n      // directly, because the element order may not be stable when this\n      // element is added back. So we set the element to be ignored.\n\n\n      oldChild.ignore = true;\n    }\n  }\n\n  for (var i = el.childCount() - 1; i >= index; i--) {\n    var child = el.childAt(i);\n    removeChildFromGroup(el, child, seriesModel);\n  }\n}\n\nfunction removeChildFromGroup(group, child, seriesModel) {\n  // Do not support leave elements that are not mentioned in the latest\n  // `renderItem` return. Otherwise users may not have a clear and simple\n  // concept that how to control all of the elements.\n  child && applyLeaveTransition(child, customInnerStore(group).option, seriesModel);\n}\n\nfunction diffGroupChildren(context) {\n  new DataDiffer(context.oldChildren, context.newChildren, getKey, getKey, context).add(processAddUpdate).update(processAddUpdate).remove(processRemove).execute();\n}\n\nfunction getKey(item, idx) {\n  var name = item && item.name;\n  return name != null ? name : GROUP_DIFF_PREFIX + idx;\n}\n\nfunction processAddUpdate(newIndex, oldIndex) {\n  var context = this.context;\n  var childOption = newIndex != null ? context.newChildren[newIndex] : null;\n  var child = oldIndex != null ? context.oldChildren[oldIndex] : null;\n  doCreateOrUpdateEl(context.api, child, context.dataIndex, childOption, context.seriesModel, context.group);\n}\n\nfunction processRemove(oldIndex) {\n  var context = this.context;\n  var child = context.oldChildren[oldIndex];\n  child && applyLeaveTransition(child, customInnerStore(child).option, context.seriesModel);\n}\n/**\r\n * @return SVG Path data.\r\n */\n\n\nfunction getPathData(shape) {\n  // \"d\" follows the SVG convention.\n  return shape && (shape.pathData || shape.d);\n}\n\nfunction hasOwnPathData(shape) {\n  return shape && (hasOwn(shape, 'pathData') || hasOwn(shape, 'd'));\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport CustomSeriesModel from './CustomSeries.js';\nimport CustomChartView from './CustomView.js';\nexport function install(registers) {\n  registers.registerChartView(CustomChartView);\n  registers.registerSeriesModel(CustomSeriesModel);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nexport function layout(axisModel, opt) {\n  opt = opt || {};\n  var single = axisModel.coordinateSystem;\n  var axis = axisModel.axis;\n  var layout = {};\n  var axisPosition = axis.position;\n  var orient = axis.orient;\n  var rect = single.getRect();\n  var rectBound = [rect.x, rect.x + rect.width, rect.y, rect.y + rect.height];\n  var positionMap = {\n    horizontal: {\n      top: rectBound[2],\n      bottom: rectBound[3]\n    },\n    vertical: {\n      left: rectBound[0],\n      right: rectBound[1]\n    }\n  };\n  layout.position = [orient === 'vertical' ? positionMap.vertical[axisPosition] : rectBound[0], orient === 'horizontal' ? positionMap.horizontal[axisPosition] : rectBound[3]];\n  var r = {\n    horizontal: 0,\n    vertical: 1\n  };\n  layout.rotation = Math.PI / 2 * r[orient];\n  var directionMap = {\n    top: -1,\n    bottom: 1,\n    right: 1,\n    left: -1\n  };\n  layout.labelDirection = layout.tickDirection = layout.nameDirection = directionMap[axisPosition];\n\n  if (axisModel.get(['axisTick', 'inside'])) {\n    layout.tickDirection = -layout.tickDirection;\n  }\n\n  if (zrUtil.retrieve(opt.labelInside, axisModel.get(['axisLabel', 'inside']))) {\n    layout.labelDirection = -layout.labelDirection;\n  }\n\n  var labelRotation = opt.rotate;\n  labelRotation == null && (labelRotation = axisModel.get(['axisLabel', 'rotate']));\n  layout.labelRotation = axisPosition === 'top' ? -labelRotation : labelRotation;\n  layout.z2 = 1;\n  return layout;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport AxisBuilder from './AxisBuilder.js';\nimport * as graphic from '../../util/graphic.js';\nimport * as singleAxisHelper from '../../coord/single/singleAxisHelper.js';\nimport AxisView from './AxisView.js';\nimport { rectCoordAxisBuildSplitArea, rectCoordAxisHandleRemove } from './axisSplitHelper.js';\nvar axisBuilderAttrs = ['axisLine', 'axisTickLabel', 'axisName'];\nvar selfBuilderAttrs = ['splitArea', 'splitLine'];\n\nvar SingleAxisView =\n/** @class */\nfunction (_super) {\n  __extends(SingleAxisView, _super);\n\n  function SingleAxisView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = SingleAxisView.type;\n    _this.axisPointerClass = 'SingleAxisPointer';\n    return _this;\n  }\n\n  SingleAxisView.prototype.render = function (axisModel, ecModel, api, payload) {\n    var group = this.group;\n    group.removeAll();\n    var oldAxisGroup = this._axisGroup;\n    this._axisGroup = new graphic.Group();\n    var layout = singleAxisHelper.layout(axisModel);\n    var axisBuilder = new AxisBuilder(axisModel, layout);\n    zrUtil.each(axisBuilderAttrs, axisBuilder.add, axisBuilder);\n    group.add(this._axisGroup);\n    group.add(axisBuilder.getGroup());\n    zrUtil.each(selfBuilderAttrs, function (name) {\n      if (axisModel.get([name, 'show'])) {\n        axisElementBuilders[name](this, this.group, this._axisGroup, axisModel);\n      }\n    }, this);\n    graphic.groupTransition(oldAxisGroup, this._axisGroup, axisModel);\n\n    _super.prototype.render.call(this, axisModel, ecModel, api, payload);\n  };\n\n  SingleAxisView.prototype.remove = function () {\n    rectCoordAxisHandleRemove(this);\n  };\n\n  SingleAxisView.type = 'singleAxis';\n  return SingleAxisView;\n}(AxisView);\n\nvar axisElementBuilders = {\n  splitLine: function (axisView, group, axisGroup, axisModel) {\n    var axis = axisModel.axis;\n\n    if (axis.scale.isBlank()) {\n      return;\n    }\n\n    var splitLineModel = axisModel.getModel('splitLine');\n    var lineStyleModel = splitLineModel.getModel('lineStyle');\n    var lineColors = lineStyleModel.get('color');\n    lineColors = lineColors instanceof Array ? lineColors : [lineColors];\n    var lineWidth = lineStyleModel.get('width');\n    var gridRect = axisModel.coordinateSystem.getRect();\n    var isHorizontal = axis.isHorizontal();\n    var splitLines = [];\n    var lineCount = 0;\n    var ticksCoords = axis.getTicksCoords({\n      tickModel: splitLineModel\n    });\n    var p1 = [];\n    var p2 = [];\n\n    for (var i = 0; i < ticksCoords.length; ++i) {\n      var tickCoord = axis.toGlobalCoord(ticksCoords[i].coord);\n\n      if (isHorizontal) {\n        p1[0] = tickCoord;\n        p1[1] = gridRect.y;\n        p2[0] = tickCoord;\n        p2[1] = gridRect.y + gridRect.height;\n      } else {\n        p1[0] = gridRect.x;\n        p1[1] = tickCoord;\n        p2[0] = gridRect.x + gridRect.width;\n        p2[1] = tickCoord;\n      }\n\n      var line = new graphic.Line({\n        shape: {\n          x1: p1[0],\n          y1: p1[1],\n          x2: p2[0],\n          y2: p2[1]\n        },\n        silent: true\n      });\n      graphic.subPixelOptimizeLine(line.shape, lineWidth);\n      var colorIndex = lineCount++ % lineColors.length;\n      splitLines[colorIndex] = splitLines[colorIndex] || [];\n      splitLines[colorIndex].push(line);\n    }\n\n    var lineStyle = lineStyleModel.getLineStyle(['color']);\n\n    for (var i = 0; i < splitLines.length; ++i) {\n      group.add(graphic.mergePath(splitLines[i], {\n        style: zrUtil.defaults({\n          stroke: lineColors[i % lineColors.length]\n        }, lineStyle),\n        silent: true\n      }));\n    }\n  },\n  splitArea: function (axisView, group, axisGroup, axisModel) {\n    rectCoordAxisBuildSplitArea(axisView, axisGroup, axisModel, axisModel);\n  }\n};\nexport default SingleAxisView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport ComponentModel from '../../model/Component.js';\nimport { AxisModelCommonMixin } from '../axisModelCommonMixin.js';\nimport { mixin } from 'zrender/lib/core/util.js';\n\nvar SingleAxisModel =\n/** @class */\nfunction (_super) {\n  __extends(SingleAxisModel, _super);\n\n  function SingleAxisModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = SingleAxisModel.type;\n    return _this;\n  }\n\n  SingleAxisModel.prototype.getCoordSysModel = function () {\n    return this;\n  };\n\n  SingleAxisModel.type = 'singleAxis';\n  SingleAxisModel.layoutMode = 'box';\n  SingleAxisModel.defaultOption = {\n    left: '5%',\n    top: '5%',\n    right: '5%',\n    bottom: '5%',\n    type: 'value',\n    position: 'bottom',\n    orient: 'horizontal',\n    axisLine: {\n      show: true,\n      lineStyle: {\n        width: 1,\n        type: 'solid'\n      }\n    },\n    // Single coordinate system and single axis is the,\n    // which is used as the parent tooltip model.\n    // same model, so we set default tooltip show as true.\n    tooltip: {\n      show: true\n    },\n    axisTick: {\n      show: true,\n      length: 6,\n      lineStyle: {\n        width: 1\n      }\n    },\n    axisLabel: {\n      show: true,\n      interval: 'auto'\n    },\n    splitLine: {\n      show: true,\n      lineStyle: {\n        type: 'dashed',\n        opacity: 0.2\n      }\n    }\n  };\n  return SingleAxisModel;\n}(ComponentModel);\n\nmixin(SingleAxisModel, AxisModelCommonMixin.prototype);\nexport default SingleAxisModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport Axis from '../Axis.js';\n\nvar SingleAxis =\n/** @class */\nfunction (_super) {\n  __extends(SingleAxis, _super);\n\n  function SingleAxis(dim, scale, coordExtent, axisType, position) {\n    var _this = _super.call(this, dim, scale, coordExtent) || this;\n\n    _this.type = axisType || 'value';\n    _this.position = position || 'bottom';\n    return _this;\n  }\n  /**\r\n   * Judge the orient of the axis.\r\n   */\n\n\n  SingleAxis.prototype.isHorizontal = function () {\n    var position = this.position;\n    return position === 'top' || position === 'bottom';\n  };\n\n  SingleAxis.prototype.pointToData = function (point, clamp) {\n    return this.coordinateSystem.pointToData(point)[0];\n  };\n\n  return SingleAxis;\n}(Axis);\n\nexport default SingleAxis;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\n\n/**\r\n * Single coordinates system.\r\n */\nimport SingleAxis from './SingleAxis.js';\nimport * as axisHelper from '../axisHelper.js';\nimport { getLayoutRect } from '../../util/layout.js';\nimport { each } from 'zrender/lib/core/util.js';\nexport var singleDimensions = ['single'];\n/**\r\n * Create a single coordinates system.\r\n */\n\nvar Single =\n/** @class */\nfunction () {\n  function Single(axisModel, ecModel, api) {\n    this.type = 'single';\n    this.dimension = 'single';\n    /**\r\n     * Add it just for draw tooltip.\r\n     */\n\n    this.dimensions = singleDimensions;\n    this.axisPointerEnabled = true;\n    this.model = axisModel;\n\n    this._init(axisModel, ecModel, api);\n  }\n  /**\r\n   * Initialize single coordinate system.\r\n   */\n\n\n  Single.prototype._init = function (axisModel, ecModel, api) {\n    var dim = this.dimension;\n    var axis = new SingleAxis(dim, axisHelper.createScaleByModel(axisModel), [0, 0], axisModel.get('type'), axisModel.get('position'));\n    var isCategory = axis.type === 'category';\n    axis.onBand = isCategory && axisModel.get('boundaryGap');\n    axis.inverse = axisModel.get('inverse');\n    axis.orient = axisModel.get('orient');\n    axisModel.axis = axis;\n    axis.model = axisModel;\n    axis.coordinateSystem = this;\n    this._axis = axis;\n  };\n  /**\r\n   * Update axis scale after data processed\r\n   */\n\n\n  Single.prototype.update = function (ecModel, api) {\n    ecModel.eachSeries(function (seriesModel) {\n      if (seriesModel.coordinateSystem === this) {\n        var data_1 = seriesModel.getData();\n        each(data_1.mapDimensionsAll(this.dimension), function (dim) {\n          this._axis.scale.unionExtentFromData(data_1, dim);\n        }, this);\n        axisHelper.niceScaleExtent(this._axis.scale, this._axis.model);\n      }\n    }, this);\n  };\n  /**\r\n   * Resize the single coordinate system.\r\n   */\n\n\n  Single.prototype.resize = function (axisModel, api) {\n    this._rect = getLayoutRect({\n      left: axisModel.get('left'),\n      top: axisModel.get('top'),\n      right: axisModel.get('right'),\n      bottom: axisModel.get('bottom'),\n      width: axisModel.get('width'),\n      height: axisModel.get('height')\n    }, {\n      width: api.getWidth(),\n      height: api.getHeight()\n    });\n\n    this._adjustAxis();\n  };\n\n  Single.prototype.getRect = function () {\n    return this._rect;\n  };\n\n  Single.prototype._adjustAxis = function () {\n    var rect = this._rect;\n    var axis = this._axis;\n    var isHorizontal = axis.isHorizontal();\n    var extent = isHorizontal ? [0, rect.width] : [0, rect.height];\n    var idx = axis.inverse ? 1 : 0;\n    axis.setExtent(extent[idx], extent[1 - idx]);\n\n    this._updateAxisTransform(axis, isHorizontal ? rect.x : rect.y);\n  };\n\n  Single.prototype._updateAxisTransform = function (axis, coordBase) {\n    var axisExtent = axis.getExtent();\n    var extentSum = axisExtent[0] + axisExtent[1];\n    var isHorizontal = axis.isHorizontal();\n    axis.toGlobalCoord = isHorizontal ? function (coord) {\n      return coord + coordBase;\n    } : function (coord) {\n      return extentSum - coord + coordBase;\n    };\n    axis.toLocalCoord = isHorizontal ? function (coord) {\n      return coord - coordBase;\n    } : function (coord) {\n      return extentSum - coord + coordBase;\n    };\n  };\n  /**\r\n   * Get axis.\r\n   */\n\n\n  Single.prototype.getAxis = function () {\n    return this._axis;\n  };\n  /**\r\n   * Get axis, add it just for draw tooltip.\r\n   */\n\n\n  Single.prototype.getBaseAxis = function () {\n    return this._axis;\n  };\n\n  Single.prototype.getAxes = function () {\n    return [this._axis];\n  };\n\n  Single.prototype.getTooltipAxes = function () {\n    return {\n      baseAxes: [this.getAxis()],\n      // Empty otherAxes\n      otherAxes: []\n    };\n  };\n  /**\r\n   * If contain point.\r\n   */\n\n\n  Single.prototype.containPoint = function (point) {\n    var rect = this.getRect();\n    var axis = this.getAxis();\n    var orient = axis.orient;\n\n    if (orient === 'horizontal') {\n      return axis.contain(axis.toLocalCoord(point[0])) && point[1] >= rect.y && point[1] <= rect.y + rect.height;\n    } else {\n      return axis.contain(axis.toLocalCoord(point[1])) && point[0] >= rect.y && point[0] <= rect.y + rect.height;\n    }\n  };\n\n  Single.prototype.pointToData = function (point) {\n    var axis = this.getAxis();\n    return [axis.coordToData(axis.toLocalCoord(point[axis.orient === 'horizontal' ? 0 : 1]))];\n  };\n  /**\r\n   * Convert the series data to concrete point.\r\n   * Can be [val] | val\r\n   */\n\n\n  Single.prototype.dataToPoint = function (val) {\n    var axis = this.getAxis();\n    var rect = this.getRect();\n    var pt = [];\n    var idx = axis.orient === 'horizontal' ? 0 : 1;\n\n    if (val instanceof Array) {\n      val = val[0];\n    }\n\n    pt[idx] = axis.toGlobalCoord(axis.dataToCoord(+val));\n    pt[1 - idx] = idx === 0 ? rect.y + rect.height / 2 : rect.x + rect.width / 2;\n    return pt;\n  };\n\n  Single.prototype.convertToPixel = function (ecModel, finder, value) {\n    var coordSys = getCoordSys(finder);\n    return coordSys === this ? this.dataToPoint(value) : null;\n  };\n\n  Single.prototype.convertFromPixel = function (ecModel, finder, pixel) {\n    var coordSys = getCoordSys(finder);\n    return coordSys === this ? this.pointToData(pixel) : null;\n  };\n\n  return Single;\n}();\n\nfunction getCoordSys(finder) {\n  var seriesModel = finder.seriesModel;\n  var singleModel = finder.singleAxisModel;\n  return singleModel && singleModel.coordinateSystem || seriesModel && seriesModel.coordinateSystem;\n}\n\nexport default Single;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\n\n/**\r\n * Single coordinate system creator.\r\n */\nimport Single, { singleDimensions } from './Single.js';\nimport { SINGLE_REFERRING } from '../../util/model.js';\n/**\r\n * Create single coordinate system and inject it into seriesModel.\r\n */\n\nfunction create(ecModel, api) {\n  var singles = [];\n  ecModel.eachComponent('singleAxis', function (axisModel, idx) {\n    var single = new Single(axisModel, ecModel, api);\n    single.name = 'single_' + idx;\n    single.resize(axisModel, api);\n    axisModel.coordinateSystem = single;\n    singles.push(single);\n  });\n  ecModel.eachSeries(function (seriesModel) {\n    if (seriesModel.get('coordinateSystem') === 'singleAxis') {\n      var singleAxisModel = seriesModel.getReferringComponents('singleAxis', SINGLE_REFERRING).models[0];\n      seriesModel.coordinateSystem = singleAxisModel && singleAxisModel.coordinateSystem;\n    }\n  });\n  return singles;\n}\n\nvar singleCreator = {\n  create: create,\n  dimensions: singleDimensions\n};\nexport default singleCreator;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport BaseAxisPointer from './BaseAxisPointer.js';\nimport * as viewHelper from './viewHelper.js';\nimport * as singleAxisHelper from '../../coord/single/singleAxisHelper.js';\nvar XY = ['x', 'y'];\nvar WH = ['width', 'height'];\n\nvar SingleAxisPointer =\n/** @class */\nfunction (_super) {\n  __extends(SingleAxisPointer, _super);\n\n  function SingleAxisPointer() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  /**\r\n   * @override\r\n   */\n\n\n  SingleAxisPointer.prototype.makeElOption = function (elOption, value, axisModel, axisPointerModel, api) {\n    var axis = axisModel.axis;\n    var coordSys = axis.coordinateSystem;\n    var otherExtent = getGlobalExtent(coordSys, 1 - getPointDimIndex(axis));\n    var pixelValue = coordSys.dataToPoint(value)[0];\n    var axisPointerType = axisPointerModel.get('type');\n\n    if (axisPointerType && axisPointerType !== 'none') {\n      var elStyle = viewHelper.buildElStyle(axisPointerModel);\n      var pointerOption = pointerShapeBuilder[axisPointerType](axis, pixelValue, otherExtent);\n      pointerOption.style = elStyle;\n      elOption.graphicKey = pointerOption.type;\n      elOption.pointer = pointerOption;\n    }\n\n    var layoutInfo = singleAxisHelper.layout(axisModel);\n    viewHelper.buildCartesianSingleLabelElOption( // @ts-ignore\n    value, elOption, layoutInfo, axisModel, axisPointerModel, api);\n  };\n  /**\r\n   * @override\r\n   */\n\n\n  SingleAxisPointer.prototype.getHandleTransform = function (value, axisModel, axisPointerModel) {\n    var layoutInfo = singleAxisHelper.layout(axisModel, {\n      labelInside: false\n    }); // @ts-ignore\n\n    layoutInfo.labelMargin = axisPointerModel.get(['handle', 'margin']);\n    var position = viewHelper.getTransformedPosition(axisModel.axis, value, layoutInfo);\n    return {\n      x: position[0],\n      y: position[1],\n      rotation: layoutInfo.rotation + (layoutInfo.labelDirection < 0 ? Math.PI : 0)\n    };\n  };\n  /**\r\n   * @override\r\n   */\n\n\n  SingleAxisPointer.prototype.updateHandleTransform = function (transform, delta, axisModel, axisPointerModel) {\n    var axis = axisModel.axis;\n    var coordSys = axis.coordinateSystem;\n    var dimIndex = getPointDimIndex(axis);\n    var axisExtent = getGlobalExtent(coordSys, dimIndex);\n    var currPosition = [transform.x, transform.y];\n    currPosition[dimIndex] += delta[dimIndex];\n    currPosition[dimIndex] = Math.min(axisExtent[1], currPosition[dimIndex]);\n    currPosition[dimIndex] = Math.max(axisExtent[0], currPosition[dimIndex]);\n    var otherExtent = getGlobalExtent(coordSys, 1 - dimIndex);\n    var cursorOtherValue = (otherExtent[1] + otherExtent[0]) / 2;\n    var cursorPoint = [cursorOtherValue, cursorOtherValue];\n    cursorPoint[dimIndex] = currPosition[dimIndex];\n    return {\n      x: currPosition[0],\n      y: currPosition[1],\n      rotation: transform.rotation,\n      cursorPoint: cursorPoint,\n      tooltipOption: {\n        verticalAlign: 'middle'\n      }\n    };\n  };\n\n  return SingleAxisPointer;\n}(BaseAxisPointer);\n\nvar pointerShapeBuilder = {\n  line: function (axis, pixelValue, otherExtent) {\n    var targetShape = viewHelper.makeLineShape([pixelValue, otherExtent[0]], [pixelValue, otherExtent[1]], getPointDimIndex(axis));\n    return {\n      type: 'Line',\n      subPixelOptimize: true,\n      shape: targetShape\n    };\n  },\n  shadow: function (axis, pixelValue, otherExtent) {\n    var bandWidth = axis.getBandWidth();\n    var span = otherExtent[1] - otherExtent[0];\n    return {\n      type: 'Rect',\n      shape: viewHelper.makeRectShape([pixelValue - bandWidth / 2, otherExtent[0]], [bandWidth, span], getPointDimIndex(axis))\n    };\n  }\n};\n\nfunction getPointDimIndex(axis) {\n  return axis.isHorizontal() ? 0 : 1;\n}\n\nfunction getGlobalExtent(coordSys, dimIndex) {\n  var rect = coordSys.getRect();\n  return [rect[XY[dimIndex]], rect[XY[dimIndex]] + rect[WH[dimIndex]]];\n}\n\nexport default SingleAxisPointer;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport { use } from '../../extension.js';\nimport ComponentView from '../../view/Component.js';\nimport SingleAxisView from '../axis/SingleAxisView.js';\nimport axisModelCreator from '../../coord/axisModelCreator.js';\nimport SingleAxisModel from '../../coord/single/AxisModel.js';\nimport singleCreator from '../../coord/single/singleCreator.js';\nimport { install as installAxisPointer } from '../axisPointer/install.js';\nimport AxisView from '../axis/AxisView.js';\nimport SingleAxisPointer from '../axisPointer/SingleAxisPointer.js';\n\nvar SingleView =\n/** @class */\nfunction (_super) {\n  __extends(SingleView, _super);\n\n  function SingleView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = SingleView.type;\n    return _this;\n  }\n\n  SingleView.type = 'single';\n  return SingleView;\n}(ComponentView);\n\nexport function install(registers) {\n  use(installAxisPointer);\n  AxisView.registerAxisPointerClass('SingleAxisPointer', SingleAxisPointer);\n  registers.registerComponentView(SingleView); // Axis\n\n  registers.registerComponentView(SingleAxisView);\n  registers.registerComponentModel(SingleAxisModel);\n  axisModelCreator(registers, 'single', SingleAxisModel, SingleAxisModel.defaultOption);\n  registers.registerCoordinateSystem('single', singleCreator);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { normalizeToArray } from '../../util/model.js';\nvar DEFAULT_TOOLBOX_BTNS = ['rect', 'polygon', 'keep', 'clear'];\nexport default function brushPreprocessor(option, isNew) {\n  var brushComponents = normalizeToArray(option ? option.brush : []);\n\n  if (!brushComponents.length) {\n    return;\n  }\n\n  var brushComponentSpecifiedBtns = [];\n  zrUtil.each(brushComponents, function (brushOpt) {\n    var tbs = brushOpt.hasOwnProperty('toolbox') ? brushOpt.toolbox : [];\n\n    if (tbs instanceof Array) {\n      brushComponentSpecifiedBtns = brushComponentSpecifiedBtns.concat(tbs);\n    }\n  });\n  var toolbox = option && option.toolbox;\n\n  if (zrUtil.isArray(toolbox)) {\n    toolbox = toolbox[0];\n  }\n\n  if (!toolbox) {\n    toolbox = {\n      feature: {}\n    };\n    option.toolbox = [toolbox];\n  }\n\n  var toolboxFeature = toolbox.feature || (toolbox.feature = {});\n  var toolboxBrush = toolboxFeature.brush || (toolboxFeature.brush = {});\n  var brushTypes = toolboxBrush.type || (toolboxBrush.type = []);\n  brushTypes.push.apply(brushTypes, brushComponentSpecifiedBtns);\n  removeDuplicate(brushTypes);\n\n  if (isNew && !brushTypes.length) {\n    brushTypes.push.apply(brushTypes, DEFAULT_TOOLBOX_BTNS);\n  }\n}\n\nfunction removeDuplicate(arr) {\n  var map = {};\n  zrUtil.each(arr, function (val) {\n    map[val] = 1;\n  });\n  arr.length = 0;\n  zrUtil.each(map, function (flag, val) {\n    arr.push(val);\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as polygonContain from 'zrender/lib/contain/polygon.js';\nimport BoundingRect from 'zrender/lib/core/BoundingRect.js';\nimport { linePolygonIntersect } from '../../util/graphic.js';\nexport function makeBrushCommonSelectorForSeries(area) {\n  var brushType = area.brushType; // Do not use function binding or curry for performance.\n\n  var selectors = {\n    point: function (itemLayout) {\n      return selector[brushType].point(itemLayout, selectors, area);\n    },\n    rect: function (itemLayout) {\n      return selector[brushType].rect(itemLayout, selectors, area);\n    }\n  };\n  return selectors;\n}\nvar selector = {\n  lineX: getLineSelectors(0),\n  lineY: getLineSelectors(1),\n  rect: {\n    point: function (itemLayout, selectors, area) {\n      return itemLayout && area.boundingRect.contain(itemLayout[0], itemLayout[1]);\n    },\n    rect: function (itemLayout, selectors, area) {\n      return itemLayout && area.boundingRect.intersect(itemLayout);\n    }\n  },\n  polygon: {\n    point: function (itemLayout, selectors, area) {\n      return itemLayout && area.boundingRect.contain(itemLayout[0], itemLayout[1]) && polygonContain.contain(area.range, itemLayout[0], itemLayout[1]);\n    },\n    rect: function (itemLayout, selectors, area) {\n      var points = area.range;\n\n      if (!itemLayout || points.length <= 1) {\n        return false;\n      }\n\n      var x = itemLayout.x;\n      var y = itemLayout.y;\n      var width = itemLayout.width;\n      var height = itemLayout.height;\n      var p = points[0];\n\n      if (polygonContain.contain(points, x, y) || polygonContain.contain(points, x + width, y) || polygonContain.contain(points, x, y + height) || polygonContain.contain(points, x + width, y + height) || BoundingRect.create(itemLayout).contain(p[0], p[1]) || linePolygonIntersect(x, y, x + width, y, points) || linePolygonIntersect(x, y, x, y + height, points) || linePolygonIntersect(x + width, y, x + width, y + height, points) || linePolygonIntersect(x, y + height, x + width, y + height, points)) {\n        return true;\n      }\n    }\n  }\n};\n\nfunction getLineSelectors(xyIndex) {\n  var xy = ['x', 'y'];\n  var wh = ['width', 'height'];\n  return {\n    point: function (itemLayout, selectors, area) {\n      if (itemLayout) {\n        var range = area.range;\n        var p = itemLayout[xyIndex];\n        return inLineRange(p, range);\n      }\n    },\n    rect: function (itemLayout, selectors, area) {\n      if (itemLayout) {\n        var range = area.range;\n        var layoutRange = [itemLayout[xy[xyIndex]], itemLayout[xy[xyIndex]] + itemLayout[wh[xyIndex]]];\n        layoutRange[1] < layoutRange[0] && layoutRange.reverse();\n        return inLineRange(layoutRange[0], range) || inLineRange(layoutRange[1], range) || inLineRange(range[0], layoutRange) || inLineRange(range[1], layoutRange);\n      }\n    }\n  };\n}\n\nfunction inLineRange(p, range) {\n  return range[0] <= p && p <= range[1];\n}\n\nexport default selector;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport BoundingRect from 'zrender/lib/core/BoundingRect.js';\nimport * as visualSolution from '../../visual/visualSolution.js';\nimport { makeBrushCommonSelectorForSeries } from './selector.js';\nimport * as throttleUtil from '../../util/throttle.js';\nimport BrushTargetManager from '../helper/BrushTargetManager.js';\nvar STATE_LIST = ['inBrush', 'outOfBrush'];\nvar DISPATCH_METHOD = '__ecBrushSelect';\nvar DISPATCH_FLAG = '__ecInBrushSelectEvent';\n;\nexport function layoutCovers(ecModel) {\n  ecModel.eachComponent({\n    mainType: 'brush'\n  }, function (brushModel) {\n    var brushTargetManager = brushModel.brushTargetManager = new BrushTargetManager(brushModel.option, ecModel);\n    brushTargetManager.setInputRanges(brushModel.areas, ecModel);\n  });\n}\n/**\r\n * Register the visual encoding if this modules required.\r\n */\n\nexport default function brushVisual(ecModel, api, payload) {\n  var brushSelected = [];\n  var throttleType;\n  var throttleDelay;\n  ecModel.eachComponent({\n    mainType: 'brush'\n  }, function (brushModel) {\n    payload && payload.type === 'takeGlobalCursor' && brushModel.setBrushOption(payload.key === 'brush' ? payload.brushOption : {\n      brushType: false\n    });\n  });\n  layoutCovers(ecModel);\n  ecModel.eachComponent({\n    mainType: 'brush'\n  }, function (brushModel, brushIndex) {\n    var thisBrushSelected = {\n      brushId: brushModel.id,\n      brushIndex: brushIndex,\n      brushName: brushModel.name,\n      areas: zrUtil.clone(brushModel.areas),\n      selected: []\n    }; // Every brush component exists in event params, convenient\n    // for user to find by index.\n\n    brushSelected.push(thisBrushSelected);\n    var brushOption = brushModel.option;\n    var brushLink = brushOption.brushLink;\n    var linkedSeriesMap = [];\n    var selectedDataIndexForLink = [];\n    var rangeInfoBySeries = [];\n    var hasBrushExists = false;\n\n    if (!brushIndex) {\n      // Only the first throttle setting works.\n      throttleType = brushOption.throttleType;\n      throttleDelay = brushOption.throttleDelay;\n    } // Add boundingRect and selectors to range.\n\n\n    var areas = zrUtil.map(brushModel.areas, function (area) {\n      var builder = boundingRectBuilders[area.brushType];\n      var selectableArea = zrUtil.defaults({\n        boundingRect: builder ? builder(area) : void 0\n      }, area);\n      selectableArea.selectors = makeBrushCommonSelectorForSeries(selectableArea);\n      return selectableArea;\n    });\n    var visualMappings = visualSolution.createVisualMappings(brushModel.option, STATE_LIST, function (mappingOption) {\n      mappingOption.mappingMethod = 'fixed';\n    });\n    zrUtil.isArray(brushLink) && zrUtil.each(brushLink, function (seriesIndex) {\n      linkedSeriesMap[seriesIndex] = 1;\n    });\n\n    function linkOthers(seriesIndex) {\n      return brushLink === 'all' || !!linkedSeriesMap[seriesIndex];\n    } // If no supported brush or no brush on the series,\n    // all visuals should be in original state.\n\n\n    function brushed(rangeInfoList) {\n      return !!rangeInfoList.length;\n    }\n    /**\r\n     * Logic for each series: (If the logic has to be modified one day, do it carefully!)\r\n     *\r\n     * ( brushed ┬ && ┬hasBrushExist ┬ && linkOthers  ) => StepA: ┬record, ┬ StepB: ┬visualByRecord.\r\n     *   !brushed┘    ├hasBrushExist ┤                            └nothing,┘        ├visualByRecord.\r\n     *                └!hasBrushExist┘                                              └nothing.\r\n     * ( !brushed  && ┬hasBrushExist ┬ && linkOthers  ) => StepA:  nothing,  StepB: ┬visualByRecord.\r\n     *                └!hasBrushExist┘                                              └nothing.\r\n     * ( brushed ┬ &&                     !linkOthers ) => StepA:  nothing,  StepB: ┬visualByCheck.\r\n     *   !brushed┘                                                                  └nothing.\r\n     * ( !brushed  &&                     !linkOthers ) => StepA:  nothing,  StepB:  nothing.\r\n     */\n    // Step A\n\n\n    ecModel.eachSeries(function (seriesModel, seriesIndex) {\n      var rangeInfoList = rangeInfoBySeries[seriesIndex] = [];\n      seriesModel.subType === 'parallel' ? stepAParallel(seriesModel, seriesIndex) : stepAOthers(seriesModel, seriesIndex, rangeInfoList);\n    });\n\n    function stepAParallel(seriesModel, seriesIndex) {\n      var coordSys = seriesModel.coordinateSystem;\n      hasBrushExists = hasBrushExists || coordSys.hasAxisBrushed();\n      linkOthers(seriesIndex) && coordSys.eachActiveState(seriesModel.getData(), function (activeState, dataIndex) {\n        activeState === 'active' && (selectedDataIndexForLink[dataIndex] = 1);\n      });\n    }\n\n    function stepAOthers(seriesModel, seriesIndex, rangeInfoList) {\n      if (!seriesModel.brushSelector || brushModelNotControll(brushModel, seriesIndex)) {\n        return;\n      }\n\n      zrUtil.each(areas, function (area) {\n        if (brushModel.brushTargetManager.controlSeries(area, seriesModel, ecModel)) {\n          rangeInfoList.push(area);\n        }\n\n        hasBrushExists = hasBrushExists || brushed(rangeInfoList);\n      });\n\n      if (linkOthers(seriesIndex) && brushed(rangeInfoList)) {\n        var data_1 = seriesModel.getData();\n        data_1.each(function (dataIndex) {\n          if (checkInRange(seriesModel, rangeInfoList, data_1, dataIndex)) {\n            selectedDataIndexForLink[dataIndex] = 1;\n          }\n        });\n      }\n    } // Step B\n\n\n    ecModel.eachSeries(function (seriesModel, seriesIndex) {\n      var seriesBrushSelected = {\n        seriesId: seriesModel.id,\n        seriesIndex: seriesIndex,\n        seriesName: seriesModel.name,\n        dataIndex: []\n      }; // Every series exists in event params, convenient\n      // for user to find series by seriesIndex.\n\n      thisBrushSelected.selected.push(seriesBrushSelected);\n      var rangeInfoList = rangeInfoBySeries[seriesIndex];\n      var data = seriesModel.getData();\n      var getValueState = linkOthers(seriesIndex) ? function (dataIndex) {\n        return selectedDataIndexForLink[dataIndex] ? (seriesBrushSelected.dataIndex.push(data.getRawIndex(dataIndex)), 'inBrush') : 'outOfBrush';\n      } : function (dataIndex) {\n        return checkInRange(seriesModel, rangeInfoList, data, dataIndex) ? (seriesBrushSelected.dataIndex.push(data.getRawIndex(dataIndex)), 'inBrush') : 'outOfBrush';\n      }; // If no supported brush or no brush, all visuals are in original state.\n\n      (linkOthers(seriesIndex) ? hasBrushExists : brushed(rangeInfoList)) && visualSolution.applyVisual(STATE_LIST, visualMappings, data, getValueState);\n    });\n  });\n  dispatchAction(api, throttleType, throttleDelay, brushSelected, payload);\n}\n;\n\nfunction dispatchAction(api, throttleType, throttleDelay, brushSelected, payload) {\n  // This event will not be triggered when `setOpion`, otherwise dead lock may\n  // triggered when do `setOption` in event listener, which we do not find\n  // satisfactory way to solve yet. Some considered resolutions:\n  // (a) Diff with prevoius selected data ant only trigger event when changed.\n  // But store previous data and diff precisely (i.e., not only by dataIndex, but\n  // also detect value changes in selected data) might bring complexity or fragility.\n  // (b) Use spectial param like `silent` to suppress event triggering.\n  // But such kind of volatile param may be weird in `setOption`.\n  if (!payload) {\n    return;\n  }\n\n  var zr = api.getZr();\n\n  if (zr[DISPATCH_FLAG]) {\n    return;\n  }\n\n  if (!zr[DISPATCH_METHOD]) {\n    zr[DISPATCH_METHOD] = doDispatch;\n  }\n\n  var fn = throttleUtil.createOrUpdate(zr, DISPATCH_METHOD, throttleDelay, throttleType);\n  fn(api, brushSelected);\n}\n\nfunction doDispatch(api, brushSelected) {\n  if (!api.isDisposed()) {\n    var zr = api.getZr();\n    zr[DISPATCH_FLAG] = true;\n    api.dispatchAction({\n      type: 'brushSelect',\n      batch: brushSelected\n    });\n    zr[DISPATCH_FLAG] = false;\n  }\n}\n\nfunction checkInRange(seriesModel, rangeInfoList, data, dataIndex) {\n  for (var i = 0, len = rangeInfoList.length; i < len; i++) {\n    var area = rangeInfoList[i];\n\n    if (seriesModel.brushSelector(dataIndex, data, area.selectors, area)) {\n      return true;\n    }\n  }\n}\n\nfunction brushModelNotControll(brushModel, seriesIndex) {\n  var seriesIndices = brushModel.option.seriesIndex;\n  return seriesIndices != null && seriesIndices !== 'all' && (zrUtil.isArray(seriesIndices) ? zrUtil.indexOf(seriesIndices, seriesIndex) < 0 : seriesIndex !== seriesIndices);\n}\n\nvar boundingRectBuilders = {\n  rect: function (area) {\n    return getBoundingRectFromMinMax(area.range);\n  },\n  polygon: function (area) {\n    var minMax;\n    var range = area.range;\n\n    for (var i = 0, len = range.length; i < len; i++) {\n      minMax = minMax || [[Infinity, -Infinity], [Infinity, -Infinity]];\n      var rg = range[i];\n      rg[0] < minMax[0][0] && (minMax[0][0] = rg[0]);\n      rg[0] > minMax[0][1] && (minMax[0][1] = rg[0]);\n      rg[1] < minMax[1][0] && (minMax[1][0] = rg[1]);\n      rg[1] > minMax[1][1] && (minMax[1][1] = rg[1]);\n    }\n\n    return minMax && getBoundingRectFromMinMax(minMax);\n  }\n};\n\nfunction getBoundingRectFromMinMax(minMax) {\n  return new BoundingRect(minMax[0][0], minMax[1][0], minMax[0][1] - minMax[0][0], minMax[1][1] - minMax[1][0]);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport BrushController from '../helper/BrushController.js';\nimport { layoutCovers } from './visualEncoding.js';\nimport ComponentView from '../../view/Component.js';\n\nvar BrushView =\n/** @class */\nfunction (_super) {\n  __extends(BrushView, _super);\n\n  function BrushView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = BrushView.type;\n    return _this;\n  }\n\n  BrushView.prototype.init = function (ecModel, api) {\n    this.ecModel = ecModel;\n    this.api = api;\n    this.model;\n    (this._brushController = new BrushController(api.getZr())).on('brush', zrUtil.bind(this._onBrush, this)).mount();\n  };\n\n  BrushView.prototype.render = function (brushModel, ecModel, api, payload) {\n    this.model = brushModel;\n\n    this._updateController(brushModel, ecModel, api, payload);\n  };\n\n  BrushView.prototype.updateTransform = function (brushModel, ecModel, api, payload) {\n    // PENDING: `updateTransform` is a little tricky, whose layout need\n    // to be calculate mandatorily and other stages will not be performed.\n    // Take care the correctness of the logic. See #11754 .\n    layoutCovers(ecModel);\n\n    this._updateController(brushModel, ecModel, api, payload);\n  };\n\n  BrushView.prototype.updateVisual = function (brushModel, ecModel, api, payload) {\n    this.updateTransform(brushModel, ecModel, api, payload);\n  };\n\n  BrushView.prototype.updateView = function (brushModel, ecModel, api, payload) {\n    this._updateController(brushModel, ecModel, api, payload);\n  };\n\n  BrushView.prototype._updateController = function (brushModel, ecModel, api, payload) {\n    // Do not update controller when drawing.\n    (!payload || payload.$from !== brushModel.id) && this._brushController.setPanels(brushModel.brushTargetManager.makePanelOpts(api)).enableBrush(brushModel.brushOption).updateCovers(brushModel.areas.slice());\n  }; // updateLayout: updateController,\n  // updateVisual: updateController,\n\n\n  BrushView.prototype.dispose = function () {\n    this._brushController.dispose();\n  };\n\n  BrushView.prototype._onBrush = function (eventParam) {\n    var modelId = this.model.id;\n    var areas = this.model.brushTargetManager.setOutputRanges(eventParam.areas, this.ecModel); // Action is not dispatched on drag end, because the drag end\n    // emits the same params with the last drag move event, and\n    // may have some delay when using touch pad, which makes\n    // animation not smooth (when using debounce).\n\n    (!eventParam.isEnd || eventParam.removeOnClick) && this.api.dispatchAction({\n      type: 'brush',\n      brushId: modelId,\n      areas: zrUtil.clone(areas),\n      $from: modelId\n    });\n    eventParam.isEnd && this.api.dispatchAction({\n      type: 'brushEnd',\n      brushId: modelId,\n      areas: zrUtil.clone(areas),\n      $from: modelId\n    });\n  };\n\n  BrushView.type = 'brush';\n  return BrushView;\n}(ComponentView);\n\nexport default BrushView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as visualSolution from '../../visual/visualSolution.js';\nimport Model from '../../model/Model.js';\nimport ComponentModel from '../../model/Component.js';\nvar DEFAULT_OUT_OF_BRUSH_COLOR = '#ddd';\n\nvar BrushModel =\n/** @class */\nfunction (_super) {\n  __extends(BrushModel, _super);\n\n  function BrushModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = BrushModel.type;\n    /**\r\n     * @readOnly\r\n     */\n\n    _this.areas = [];\n    /**\r\n     * Current brush painting area settings.\r\n     * @readOnly\r\n     */\n\n    _this.brushOption = {};\n    return _this;\n  }\n\n  BrushModel.prototype.optionUpdated = function (newOption, isInit) {\n    var thisOption = this.option;\n    !isInit && visualSolution.replaceVisualOption(thisOption, newOption, ['inBrush', 'outOfBrush']);\n    var inBrush = thisOption.inBrush = thisOption.inBrush || {}; // Always give default visual, consider setOption at the second time.\n\n    thisOption.outOfBrush = thisOption.outOfBrush || {\n      color: DEFAULT_OUT_OF_BRUSH_COLOR\n    };\n\n    if (!inBrush.hasOwnProperty('liftZ')) {\n      // Bigger than the highlight z lift, otherwise it will\n      // be effected by the highlight z when brush.\n      inBrush.liftZ = 5;\n    }\n  };\n  /**\r\n   * If `areas` is null/undefined, range state remain.\r\n   */\n\n\n  BrushModel.prototype.setAreas = function (areas) {\n    if (process.env.NODE_ENV !== 'production') {\n      zrUtil.assert(zrUtil.isArray(areas));\n      zrUtil.each(areas, function (area) {\n        zrUtil.assert(area.brushType, 'Illegal areas');\n      });\n    } // If areas is null/undefined, range state remain.\n    // This helps user to dispatchAction({type: 'brush'}) with no areas\n    // set but just want to get the current brush select info from a `brush` event.\n\n\n    if (!areas) {\n      return;\n    }\n\n    this.areas = zrUtil.map(areas, function (area) {\n      return generateBrushOption(this.option, area);\n    }, this);\n  };\n  /**\r\n   * Set the current painting brush option.\r\n   */\n\n\n  BrushModel.prototype.setBrushOption = function (brushOption) {\n    this.brushOption = generateBrushOption(this.option, brushOption);\n    this.brushType = this.brushOption.brushType;\n  };\n\n  BrushModel.type = 'brush';\n  BrushModel.dependencies = ['geo', 'grid', 'xAxis', 'yAxis', 'parallel', 'series'];\n  BrushModel.defaultOption = {\n    seriesIndex: 'all',\n    brushType: 'rect',\n    brushMode: 'single',\n    transformable: true,\n    brushStyle: {\n      borderWidth: 1,\n      color: 'rgba(210,219,238,0.3)',\n      borderColor: '#D2DBEE'\n    },\n    throttleType: 'fixRate',\n    throttleDelay: 0,\n    removeOnClick: true,\n    z: 10000\n  };\n  return BrushModel;\n}(ComponentModel);\n\nfunction generateBrushOption(option, brushOption) {\n  return zrUtil.merge({\n    brushType: option.brushType,\n    brushMode: option.brushMode,\n    transformable: option.transformable,\n    brushStyle: new Model(option.brushStyle).getItemStyle(),\n    removeOnClick: option.removeOnClick,\n    z: option.z\n  }, brushOption, true);\n}\n\nexport default BrushModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { ToolboxFeature } from '../featureManager.js';\nvar ICON_TYPES = ['rect', 'polygon', 'lineX', 'lineY', 'keep', 'clear'];\n\nvar BrushFeature =\n/** @class */\nfunction (_super) {\n  __extends(BrushFeature, _super);\n\n  function BrushFeature() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  BrushFeature.prototype.render = function (featureModel, ecModel, api) {\n    var brushType;\n    var brushMode;\n    var isBrushed;\n    ecModel.eachComponent({\n      mainType: 'brush'\n    }, function (brushModel) {\n      brushType = brushModel.brushType;\n      brushMode = brushModel.brushOption.brushMode || 'single';\n      isBrushed = isBrushed || !!brushModel.areas.length;\n    });\n    this._brushType = brushType;\n    this._brushMode = brushMode;\n    zrUtil.each(featureModel.get('type', true), function (type) {\n      featureModel.setIconStatus(type, (type === 'keep' ? brushMode === 'multiple' : type === 'clear' ? isBrushed : type === brushType) ? 'emphasis' : 'normal');\n    });\n  };\n\n  BrushFeature.prototype.updateView = function (featureModel, ecModel, api) {\n    this.render(featureModel, ecModel, api);\n  };\n\n  BrushFeature.prototype.getIcons = function () {\n    var model = this.model;\n    var availableIcons = model.get('icon', true);\n    var icons = {};\n    zrUtil.each(model.get('type', true), function (type) {\n      if (availableIcons[type]) {\n        icons[type] = availableIcons[type];\n      }\n    });\n    return icons;\n  };\n\n  ;\n\n  BrushFeature.prototype.onclick = function (ecModel, api, type) {\n    var brushType = this._brushType;\n    var brushMode = this._brushMode;\n\n    if (type === 'clear') {\n      // Trigger parallel action firstly\n      api.dispatchAction({\n        type: 'axisAreaSelect',\n        intervals: []\n      });\n      api.dispatchAction({\n        type: 'brush',\n        command: 'clear',\n        // Clear all areas of all brush components.\n        areas: []\n      });\n    } else {\n      api.dispatchAction({\n        type: 'takeGlobalCursor',\n        key: 'brush',\n        brushOption: {\n          brushType: type === 'keep' ? brushType : brushType === type ? false : type,\n          brushMode: type === 'keep' ? brushMode === 'multiple' ? 'single' : 'multiple' : brushMode\n        }\n      });\n    }\n  };\n\n  ;\n\n  BrushFeature.getDefaultOption = function (ecModel) {\n    var defaultOption = {\n      show: true,\n      type: ICON_TYPES.slice(),\n      icon: {\n        /* eslint-disable */\n        rect: 'M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13',\n        polygon: 'M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2',\n        lineX: 'M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4',\n        lineY: 'M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4',\n        keep: 'M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z',\n        clear: 'M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2' // jshint ignore:line\n\n        /* eslint-enable */\n\n      },\n      // `rect`, `polygon`, `lineX`, `lineY`, `keep`, `clear`\n      title: ecModel.getLocaleModel().get(['toolbox', 'brush', 'title'])\n    };\n    return defaultOption;\n  };\n\n  return BrushFeature;\n}(ToolboxFeature);\n\nexport default BrushFeature;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport brushPreprocessor from './preprocessor.js';\nimport BrushView from './BrushView.js';\nimport BrushModel from './BrushModel.js';\nimport brushVisual from './visualEncoding.js'; // TODO\n\nimport BrushFeature from '../toolbox/feature/Brush.js';\nimport { registerFeature } from '../toolbox/featureManager.js';\nimport { noop } from 'zrender/lib/core/util.js';\nexport function install(registers) {\n  registers.registerComponentView(BrushView);\n  registers.registerComponentModel(BrushModel);\n  registers.registerPreprocessor(brushPreprocessor);\n  registers.registerVisual(registers.PRIORITY.VISUAL.BRUSH, brushVisual);\n  registers.registerAction({\n    type: 'brush',\n    event: 'brush',\n    update: 'updateVisual'\n  }, function (payload, ecModel) {\n    ecModel.eachComponent({\n      mainType: 'brush',\n      query: payload\n    }, function (brushModel) {\n      brushModel.setAreas(payload.areas);\n    });\n  });\n  /**\r\n   * payload: {\r\n   *      brushComponents: [\r\n   *          {\r\n   *              brushId,\r\n   *              brushIndex,\r\n   *              brushName,\r\n   *              series: [\r\n   *                  {\r\n   *                      seriesId,\r\n   *                      seriesIndex,\r\n   *                      seriesName,\r\n   *                      rawIndices: [21, 34, ...]\r\n   *                  },\r\n   *                  ...\r\n   *              ]\r\n   *          },\r\n   *          ...\r\n   *      ]\r\n   * }\r\n   */\n\n  registers.registerAction({\n    type: 'brushSelect',\n    event: 'brushSelected',\n    update: 'none'\n  }, noop);\n  registers.registerAction({\n    type: 'brushEnd',\n    event: 'brushEnd',\n    update: 'none'\n  }, noop);\n  registerFeature('brush', BrushFeature);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { isArray } from 'zrender/lib/core/util.js';\nexport default function checkMarkerInSeries(seriesOpts, markerType) {\n  if (!seriesOpts) {\n    return false;\n  }\n\n  var seriesOptArr = isArray(seriesOpts) ? seriesOpts : [seriesOpts];\n\n  for (var idx = 0; idx < seriesOptArr.length; idx++) {\n    if (seriesOptArr[idx] && seriesOptArr[idx][markerType]) {\n      return true;\n    }\n  }\n\n  return false;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport env from 'zrender/lib/core/env.js';\nimport { DataFormatMixin } from '../../model/mixin/dataFormat.js';\nimport ComponentModel from '../../model/Component.js';\nimport { makeInner, defaultEmphasis } from '../../util/model.js';\nimport { createTooltipMarkup } from '../tooltip/tooltipMarkup.js';\n\nfunction fillLabel(opt) {\n  defaultEmphasis(opt, 'label', ['show']);\n} // { [componentType]: MarkerModel }\n\n\nvar inner = makeInner();\n\nvar MarkerModel =\n/** @class */\nfunction (_super) {\n  __extends(MarkerModel, _super);\n\n  function MarkerModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = MarkerModel.type;\n    /**\r\n     * If marker model is created by self from series\r\n     */\n\n    _this.createdBySelf = false;\n    return _this;\n  }\n  /**\r\n   * @overrite\r\n   */\n\n\n  MarkerModel.prototype.init = function (option, parentModel, ecModel) {\n    if (process.env.NODE_ENV !== 'production') {\n      if (this.type === 'marker') {\n        throw new Error('Marker component is abstract component. Use markLine, markPoint, markArea instead.');\n      }\n    }\n\n    this.mergeDefaultAndTheme(option, ecModel);\n\n    this._mergeOption(option, ecModel, false, true);\n  };\n\n  MarkerModel.prototype.isAnimationEnabled = function () {\n    if (env.node) {\n      return false;\n    }\n\n    var hostSeries = this.__hostSeries;\n    return this.getShallow('animation') && hostSeries && hostSeries.isAnimationEnabled();\n  };\n  /**\r\n   * @overrite\r\n   */\n\n\n  MarkerModel.prototype.mergeOption = function (newOpt, ecModel) {\n    this._mergeOption(newOpt, ecModel, false, false);\n  };\n\n  MarkerModel.prototype._mergeOption = function (newOpt, ecModel, createdBySelf, isInit) {\n    var componentType = this.mainType;\n\n    if (!createdBySelf) {\n      ecModel.eachSeries(function (seriesModel) {\n        // mainType can be markPoint, markLine, markArea\n        var markerOpt = seriesModel.get(this.mainType, true);\n        var markerModel = inner(seriesModel)[componentType];\n\n        if (!markerOpt || !markerOpt.data) {\n          inner(seriesModel)[componentType] = null;\n          return;\n        }\n\n        if (!markerModel) {\n          if (isInit) {\n            // Default label emphasis `position` and `show`\n            fillLabel(markerOpt);\n          }\n\n          zrUtil.each(markerOpt.data, function (item) {\n            // FIXME Overwrite fillLabel method ?\n            if (item instanceof Array) {\n              fillLabel(item[0]);\n              fillLabel(item[1]);\n            } else {\n              fillLabel(item);\n            }\n          });\n          markerModel = this.createMarkerModelFromSeries(markerOpt, this, ecModel); // markerModel = new ImplementedMarkerModel(\n          //     markerOpt, this, ecModel\n          // );\n\n          zrUtil.extend(markerModel, {\n            mainType: this.mainType,\n            // Use the same series index and name\n            seriesIndex: seriesModel.seriesIndex,\n            name: seriesModel.name,\n            createdBySelf: true\n          });\n          markerModel.__hostSeries = seriesModel;\n        } else {\n          markerModel._mergeOption(markerOpt, ecModel, true);\n        }\n\n        inner(seriesModel)[componentType] = markerModel;\n      }, this);\n    }\n  };\n\n  MarkerModel.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\n    var data = this.getData();\n    var value = this.getRawValue(dataIndex);\n    var itemName = data.getName(dataIndex);\n    return createTooltipMarkup('section', {\n      header: this.name,\n      blocks: [createTooltipMarkup('nameValue', {\n        name: itemName,\n        value: value,\n        noName: !itemName,\n        noValue: value == null\n      })]\n    });\n  };\n\n  MarkerModel.prototype.getData = function () {\n    return this._data;\n  };\n\n  MarkerModel.prototype.setData = function (data) {\n    this._data = data;\n  };\n\n  MarkerModel.getMarkerModelFromSeries = function (seriesModel, // Support three types of markers. Strict check.\n  componentType) {\n    return inner(seriesModel)[componentType];\n  };\n\n  MarkerModel.type = 'marker';\n  MarkerModel.dependencies = ['series', 'grid', 'polar', 'geo'];\n  return MarkerModel;\n}(ComponentModel);\n\nzrUtil.mixin(MarkerModel, DataFormatMixin.prototype);\nexport default MarkerModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport MarkerModel from './MarkerModel.js';\n\nvar MarkPointModel =\n/** @class */\nfunction (_super) {\n  __extends(MarkPointModel, _super);\n\n  function MarkPointModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = MarkPointModel.type;\n    return _this;\n  }\n\n  MarkPointModel.prototype.createMarkerModelFromSeries = function (markerOpt, masterMarkerModel, ecModel) {\n    return new MarkPointModel(markerOpt, masterMarkerModel, ecModel);\n  };\n\n  MarkPointModel.type = 'markPoint';\n  MarkPointModel.defaultOption = {\n    // zlevel: 0,\n    z: 5,\n    symbol: 'pin',\n    symbolSize: 50,\n    // symbolRotate: 0,\n    // symbolOffset: [0, 0]\n    tooltip: {\n      trigger: 'item'\n    },\n    label: {\n      show: true,\n      position: 'inside'\n    },\n    itemStyle: {\n      borderWidth: 2\n    },\n    emphasis: {\n      label: {\n        show: true\n      }\n    }\n  };\n  return MarkPointModel;\n}(MarkerModel);\n\nexport default MarkPointModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as numberUtil from '../../util/number.js';\nimport { isDimensionStacked } from '../../data/helper/dataStackHelper.js';\nimport { indexOf, curry, clone, isArray } from 'zrender/lib/core/util.js';\nimport { parseDataValue } from '../../data/helper/dataValueHelper.js';\n\nfunction hasXOrY(item) {\n  return !(isNaN(parseFloat(item.x)) && isNaN(parseFloat(item.y)));\n}\n\nfunction hasXAndY(item) {\n  return !isNaN(parseFloat(item.x)) && !isNaN(parseFloat(item.y));\n}\n\nfunction markerTypeCalculatorWithExtent(markerType, data, otherDataDim, targetDataDim, otherCoordIndex, targetCoordIndex) {\n  var coordArr = [];\n  var stacked = isDimensionStacked(data, targetDataDim\n  /* , otherDataDim */\n  );\n  var calcDataDim = stacked ? data.getCalculationInfo('stackResultDimension') : targetDataDim;\n  var value = numCalculate(data, calcDataDim, markerType);\n  var dataIndex = data.indicesOfNearest(calcDataDim, value)[0];\n  coordArr[otherCoordIndex] = data.get(otherDataDim, dataIndex);\n  coordArr[targetCoordIndex] = data.get(calcDataDim, dataIndex);\n  var coordArrValue = data.get(targetDataDim, dataIndex); // Make it simple, do not visit all stacked value to count precision.\n\n  var precision = numberUtil.getPrecision(data.get(targetDataDim, dataIndex));\n  precision = Math.min(precision, 20);\n\n  if (precision >= 0) {\n    coordArr[targetCoordIndex] = +coordArr[targetCoordIndex].toFixed(precision);\n  }\n\n  return [coordArr, coordArrValue];\n} // TODO Specified percent\n\n\nvar markerTypeCalculator = {\n  min: curry(markerTypeCalculatorWithExtent, 'min'),\n  max: curry(markerTypeCalculatorWithExtent, 'max'),\n  average: curry(markerTypeCalculatorWithExtent, 'average'),\n  median: curry(markerTypeCalculatorWithExtent, 'median')\n};\n/**\r\n * Transform markPoint data item to format used in List by do the following\r\n * 1. Calculate statistic like `max`, `min`, `average`\r\n * 2. Convert `item.xAxis`, `item.yAxis` to `item.coord` array\r\n */\n\nexport function dataTransform(seriesModel, item) {\n  if (!item) {\n    return;\n  }\n\n  var data = seriesModel.getData();\n  var coordSys = seriesModel.coordinateSystem;\n  var dims = coordSys && coordSys.dimensions; // 1. If not specify the position with pixel directly\n  // 2. If `coord` is not a data array. Which uses `xAxis`,\n  // `yAxis` to specify the coord on each dimension\n  // parseFloat first because item.x and item.y can be percent string like '20%'\n\n  if (!hasXAndY(item) && !isArray(item.coord) && isArray(dims)) {\n    var axisInfo = getAxisInfo(item, data, coordSys, seriesModel); // Clone the option\n    // Transform the properties xAxis, yAxis, radiusAxis, angleAxis, geoCoord to value\n\n    item = clone(item);\n\n    if (item.type && markerTypeCalculator[item.type] && axisInfo.baseAxis && axisInfo.valueAxis) {\n      var otherCoordIndex = indexOf(dims, axisInfo.baseAxis.dim);\n      var targetCoordIndex = indexOf(dims, axisInfo.valueAxis.dim);\n      var coordInfo = markerTypeCalculator[item.type](data, axisInfo.baseDataDim, axisInfo.valueDataDim, otherCoordIndex, targetCoordIndex);\n      item.coord = coordInfo[0]; // Force to use the value of calculated value.\n      // let item use the value without stack.\n\n      item.value = coordInfo[1];\n    } else {\n      // FIXME Only has one of xAxis and yAxis.\n      item.coord = [item.xAxis != null ? item.xAxis : item.radiusAxis, item.yAxis != null ? item.yAxis : item.angleAxis];\n    }\n  } // x y is provided\n\n\n  if (item.coord == null || !isArray(dims)) {\n    item.coord = [];\n  } else {\n    // Each coord support max, min, average\n    var coord = item.coord;\n\n    for (var i = 0; i < 2; i++) {\n      if (markerTypeCalculator[coord[i]]) {\n        coord[i] = numCalculate(data, data.mapDimension(dims[i]), coord[i]);\n      }\n    }\n  }\n\n  return item;\n}\nexport function getAxisInfo(item, data, coordSys, seriesModel) {\n  var ret = {};\n\n  if (item.valueIndex != null || item.valueDim != null) {\n    ret.valueDataDim = item.valueIndex != null ? data.getDimension(item.valueIndex) : item.valueDim;\n    ret.valueAxis = coordSys.getAxis(dataDimToCoordDim(seriesModel, ret.valueDataDim));\n    ret.baseAxis = coordSys.getOtherAxis(ret.valueAxis);\n    ret.baseDataDim = data.mapDimension(ret.baseAxis.dim);\n  } else {\n    ret.baseAxis = seriesModel.getBaseAxis();\n    ret.valueAxis = coordSys.getOtherAxis(ret.baseAxis);\n    ret.baseDataDim = data.mapDimension(ret.baseAxis.dim);\n    ret.valueDataDim = data.mapDimension(ret.valueAxis.dim);\n  }\n\n  return ret;\n}\n\nfunction dataDimToCoordDim(seriesModel, dataDim) {\n  var dimItem = seriesModel.getData().getDimensionInfo(dataDim);\n  return dimItem && dimItem.coordDim;\n}\n/**\r\n * Filter data which is out of coordinateSystem range\r\n * [dataFilter description]\r\n */\n\n\nexport function dataFilter( // Currently only polar and cartesian has containData.\ncoordSys, item) {\n  // Always return true if there is no coordSys\n  return coordSys && coordSys.containData && item.coord && !hasXOrY(item) ? coordSys.containData(item.coord) : true;\n}\nexport function zoneFilter( // Currently only polar and cartesian has containData.\ncoordSys, item1, item2) {\n  // Always return true if there is no coordSys\n  return coordSys && coordSys.containZone && item1.coord && item2.coord && !hasXOrY(item1) && !hasXOrY(item2) ? coordSys.containZone(item1.coord, item2.coord) : true;\n}\nexport function createMarkerDimValueGetter(inCoordSys, dims) {\n  return inCoordSys ? function (item, dimName, dataIndex, dimIndex) {\n    var rawVal = dimIndex < 2 // x, y, radius, angle\n    ? item.coord && item.coord[dimIndex] : item.value;\n    return parseDataValue(rawVal, dims[dimIndex]);\n  } : function (item, dimName, dataIndex, dimIndex) {\n    return parseDataValue(item.value, dims[dimIndex]);\n  };\n}\nexport function numCalculate(data, valueDataDim, type) {\n  if (type === 'average') {\n    var sum_1 = 0;\n    var count_1 = 0;\n    data.each(valueDataDim, function (val, idx) {\n      if (!isNaN(val)) {\n        sum_1 += val;\n        count_1++;\n      }\n    });\n    return sum_1 / count_1;\n  } else if (type === 'median') {\n    return data.getMedian(valueDataDim);\n  } else {\n    // max & min\n    return data.getDataExtent(valueDataDim)[type === 'max' ? 1 : 0];\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport ComponentView from '../../view/Component.js';\nimport { createHashMap, each } from 'zrender/lib/core/util.js';\nimport MarkerModel from './MarkerModel.js';\nimport { makeInner } from '../../util/model.js';\nimport { enterBlur, leaveBlur } from '../../util/states.js';\nvar inner = makeInner();\n\nvar MarkerView =\n/** @class */\nfunction (_super) {\n  __extends(MarkerView, _super);\n\n  function MarkerView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = MarkerView.type;\n    return _this;\n  }\n\n  MarkerView.prototype.init = function () {\n    this.markerGroupMap = createHashMap();\n  };\n\n  MarkerView.prototype.render = function (markerModel, ecModel, api) {\n    var _this = this;\n\n    var markerGroupMap = this.markerGroupMap;\n    markerGroupMap.each(function (item) {\n      inner(item).keep = false;\n    });\n    ecModel.eachSeries(function (seriesModel) {\n      var markerModel = MarkerModel.getMarkerModelFromSeries(seriesModel, _this.type);\n      markerModel && _this.renderSeries(seriesModel, markerModel, ecModel, api);\n    });\n    markerGroupMap.each(function (item) {\n      !inner(item).keep && _this.group.remove(item.group);\n    });\n  };\n\n  MarkerView.prototype.markKeep = function (drawGroup) {\n    inner(drawGroup).keep = true;\n  };\n\n  MarkerView.prototype.toggleBlurSeries = function (seriesModelList, isBlur) {\n    var _this = this;\n\n    each(seriesModelList, function (seriesModel) {\n      var markerModel = MarkerModel.getMarkerModelFromSeries(seriesModel, _this.type);\n\n      if (markerModel) {\n        var data = markerModel.getData();\n        data.eachItemGraphicEl(function (el) {\n          if (el) {\n            isBlur ? enterBlur(el) : leaveBlur(el);\n          }\n        });\n      }\n    });\n  };\n\n  MarkerView.type = 'marker';\n  return MarkerView;\n}(ComponentView);\n\nexport default MarkerView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport SymbolDraw from '../../chart/helper/SymbolDraw.js';\nimport * as numberUtil from '../../util/number.js';\nimport SeriesData from '../../data/SeriesData.js';\nimport * as markerHelper from './markerHelper.js';\nimport MarkerView from './MarkerView.js';\nimport MarkerModel from './MarkerModel.js';\nimport { isFunction, map, filter, curry, extend } from 'zrender/lib/core/util.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { getVisualFromData } from '../../visual/helper.js';\n\nfunction updateMarkerLayout(mpData, seriesModel, api) {\n  var coordSys = seriesModel.coordinateSystem;\n  mpData.each(function (idx) {\n    var itemModel = mpData.getItemModel(idx);\n    var point;\n    var xPx = numberUtil.parsePercent(itemModel.get('x'), api.getWidth());\n    var yPx = numberUtil.parsePercent(itemModel.get('y'), api.getHeight());\n\n    if (!isNaN(xPx) && !isNaN(yPx)) {\n      point = [xPx, yPx];\n    } // Chart like bar may have there own marker positioning logic\n    else if (seriesModel.getMarkerPosition) {\n        // Use the getMarkerPosition\n        point = seriesModel.getMarkerPosition(mpData.getValues(mpData.dimensions, idx));\n      } else if (coordSys) {\n        var x = mpData.get(coordSys.dimensions[0], idx);\n        var y = mpData.get(coordSys.dimensions[1], idx);\n        point = coordSys.dataToPoint([x, y]);\n      } // Use x, y if has any\n\n\n    if (!isNaN(xPx)) {\n      point[0] = xPx;\n    }\n\n    if (!isNaN(yPx)) {\n      point[1] = yPx;\n    }\n\n    mpData.setItemLayout(idx, point);\n  });\n}\n\nvar MarkPointView =\n/** @class */\nfunction (_super) {\n  __extends(MarkPointView, _super);\n\n  function MarkPointView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = MarkPointView.type;\n    return _this;\n  }\n\n  MarkPointView.prototype.updateTransform = function (markPointModel, ecModel, api) {\n    ecModel.eachSeries(function (seriesModel) {\n      var mpModel = MarkerModel.getMarkerModelFromSeries(seriesModel, 'markPoint');\n\n      if (mpModel) {\n        updateMarkerLayout(mpModel.getData(), seriesModel, api);\n        this.markerGroupMap.get(seriesModel.id).updateLayout();\n      }\n    }, this);\n  };\n\n  MarkPointView.prototype.renderSeries = function (seriesModel, mpModel, ecModel, api) {\n    var coordSys = seriesModel.coordinateSystem;\n    var seriesId = seriesModel.id;\n    var seriesData = seriesModel.getData();\n    var symbolDrawMap = this.markerGroupMap;\n    var symbolDraw = symbolDrawMap.get(seriesId) || symbolDrawMap.set(seriesId, new SymbolDraw());\n    var mpData = createData(coordSys, seriesModel, mpModel); // FIXME\n\n    mpModel.setData(mpData);\n    updateMarkerLayout(mpModel.getData(), seriesModel, api);\n    mpData.each(function (idx) {\n      var itemModel = mpData.getItemModel(idx);\n      var symbol = itemModel.getShallow('symbol');\n      var symbolSize = itemModel.getShallow('symbolSize');\n      var symbolRotate = itemModel.getShallow('symbolRotate');\n      var symbolOffset = itemModel.getShallow('symbolOffset');\n      var symbolKeepAspect = itemModel.getShallow('symbolKeepAspect'); // TODO: refactor needed: single data item should not support callback function\n\n      if (isFunction(symbol) || isFunction(symbolSize) || isFunction(symbolRotate) || isFunction(symbolOffset)) {\n        var rawIdx = mpModel.getRawValue(idx);\n        var dataParams = mpModel.getDataParams(idx);\n\n        if (isFunction(symbol)) {\n          symbol = symbol(rawIdx, dataParams);\n        }\n\n        if (isFunction(symbolSize)) {\n          // FIXME 这里不兼容 ECharts 2.x，2.x 貌似参数是整个数据？\n          symbolSize = symbolSize(rawIdx, dataParams);\n        }\n\n        if (isFunction(symbolRotate)) {\n          symbolRotate = symbolRotate(rawIdx, dataParams);\n        }\n\n        if (isFunction(symbolOffset)) {\n          symbolOffset = symbolOffset(rawIdx, dataParams);\n        }\n      }\n\n      var style = itemModel.getModel('itemStyle').getItemStyle();\n      var color = getVisualFromData(seriesData, 'color');\n\n      if (!style.fill) {\n        style.fill = color;\n      }\n\n      mpData.setItemVisual(idx, {\n        symbol: symbol,\n        symbolSize: symbolSize,\n        symbolRotate: symbolRotate,\n        symbolOffset: symbolOffset,\n        symbolKeepAspect: symbolKeepAspect,\n        style: style\n      });\n    }); // TODO Text are wrong\n\n    symbolDraw.updateData(mpData);\n    this.group.add(symbolDraw.group); // Set host model for tooltip\n    // FIXME\n\n    mpData.eachItemGraphicEl(function (el) {\n      el.traverse(function (child) {\n        getECData(child).dataModel = mpModel;\n      });\n    });\n    this.markKeep(symbolDraw);\n    symbolDraw.group.silent = mpModel.get('silent') || seriesModel.get('silent');\n  };\n\n  MarkPointView.type = 'markPoint';\n  return MarkPointView;\n}(MarkerView);\n\nfunction createData(coordSys, seriesModel, mpModel) {\n  var coordDimsInfos;\n\n  if (coordSys) {\n    coordDimsInfos = map(coordSys && coordSys.dimensions, function (coordDim) {\n      var info = seriesModel.getData().getDimensionInfo(seriesModel.getData().mapDimension(coordDim)) || {}; // In map series data don't have lng and lat dimension. Fallback to same with coordSys\n\n      return extend(extend({}, info), {\n        name: coordDim,\n        // DON'T use ordinalMeta to parse and collect ordinal.\n        ordinalMeta: null\n      });\n    });\n  } else {\n    coordDimsInfos = [{\n      name: 'value',\n      type: 'float'\n    }];\n  }\n\n  var mpData = new SeriesData(coordDimsInfos, mpModel);\n  var dataOpt = map(mpModel.get('data'), curry(markerHelper.dataTransform, seriesModel));\n\n  if (coordSys) {\n    dataOpt = filter(dataOpt, curry(markerHelper.dataFilter, coordSys));\n  }\n\n  var dimValueGetter = markerHelper.createMarkerDimValueGetter(!!coordSys, coordDimsInfos);\n  mpData.initData(dataOpt, null, dimValueGetter);\n  return mpData;\n}\n\nexport default MarkPointView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\nimport checkMarkerInSeries from './checkMarkerInSeries.js';\nimport MarkPointModel from './MarkPointModel.js';\nimport MarkPointView from './MarkPointView.js';\nexport function install(registers) {\n  registers.registerComponentModel(MarkPointModel);\n  registers.registerComponentView(MarkPointView);\n  registers.registerPreprocessor(function (opt) {\n    if (checkMarkerInSeries(opt.series, 'markPoint')) {\n      // Make sure markPoint component is enabled\n      opt.markPoint = opt.markPoint || {};\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport MarkerModel from './MarkerModel.js';\n\nvar MarkLineModel =\n/** @class */\nfunction (_super) {\n  __extends(MarkLineModel, _super);\n\n  function MarkLineModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = MarkLineModel.type;\n    return _this;\n  }\n\n  MarkLineModel.prototype.createMarkerModelFromSeries = function (markerOpt, masterMarkerModel, ecModel) {\n    return new MarkLineModel(markerOpt, masterMarkerModel, ecModel);\n  };\n\n  MarkLineModel.type = 'markLine';\n  MarkLineModel.defaultOption = {\n    // zlevel: 0,\n    z: 5,\n    symbol: ['circle', 'arrow'],\n    symbolSize: [8, 16],\n    // symbolRotate: 0,\n    symbolOffset: 0,\n    precision: 2,\n    tooltip: {\n      trigger: 'item'\n    },\n    label: {\n      show: true,\n      position: 'end',\n      distance: 5\n    },\n    lineStyle: {\n      type: 'dashed'\n    },\n    emphasis: {\n      label: {\n        show: true\n      },\n      lineStyle: {\n        width: 3\n      }\n    },\n    animationEasing: 'linear'\n  };\n  return MarkLineModel;\n}(MarkerModel);\n\nexport default MarkLineModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport SeriesData from '../../data/SeriesData.js';\nimport * as numberUtil from '../../util/number.js';\nimport * as markerHelper from './markerHelper.js';\nimport LineDraw from '../../chart/helper/LineDraw.js';\nimport MarkerView from './MarkerView.js';\nimport { getStackedDimension } from '../../data/helper/dataStackHelper.js';\nimport { isCoordinateSystemType } from '../../coord/CoordinateSystem.js';\nimport { getECData } from '../../util/innerStore.js';\nimport MarkerModel from './MarkerModel.js';\nimport { isArray, retrieve, retrieve2, clone, extend, logError, merge, map, curry, filter, isNumber } from 'zrender/lib/core/util.js';\nimport { makeInner } from '../../util/model.js';\nimport { getVisualFromData } from '../../visual/helper.js';\nvar inner = makeInner();\n\nvar markLineTransform = function (seriesModel, coordSys, mlModel, item) {\n  var data = seriesModel.getData();\n  var itemArray;\n\n  if (!isArray(item)) {\n    // Special type markLine like 'min', 'max', 'average', 'median'\n    var mlType = item.type;\n\n    if (mlType === 'min' || mlType === 'max' || mlType === 'average' || mlType === 'median' // In case\n    // data: [{\n    //   yAxis: 10\n    // }]\n    || item.xAxis != null || item.yAxis != null) {\n      var valueAxis = void 0;\n      var value = void 0;\n\n      if (item.yAxis != null || item.xAxis != null) {\n        valueAxis = coordSys.getAxis(item.yAxis != null ? 'y' : 'x');\n        value = retrieve(item.yAxis, item.xAxis);\n      } else {\n        var axisInfo = markerHelper.getAxisInfo(item, data, coordSys, seriesModel);\n        valueAxis = axisInfo.valueAxis;\n        var valueDataDim = getStackedDimension(data, axisInfo.valueDataDim);\n        value = markerHelper.numCalculate(data, valueDataDim, mlType);\n      }\n\n      var valueIndex = valueAxis.dim === 'x' ? 0 : 1;\n      var baseIndex = 1 - valueIndex; // Normized to 2d data with start and end point\n\n      var mlFrom = clone(item);\n      var mlTo = {\n        coord: []\n      };\n      mlFrom.type = null;\n      mlFrom.coord = [];\n      mlFrom.coord[baseIndex] = -Infinity;\n      mlTo.coord[baseIndex] = Infinity;\n      var precision = mlModel.get('precision');\n\n      if (precision >= 0 && isNumber(value)) {\n        value = +value.toFixed(Math.min(precision, 20));\n      }\n\n      mlFrom.coord[valueIndex] = mlTo.coord[valueIndex] = value;\n      itemArray = [mlFrom, mlTo, {\n        type: mlType,\n        valueIndex: item.valueIndex,\n        // Force to use the value of calculated value.\n        value: value\n      }];\n    } else {\n      // Invalid data\n      if (process.env.NODE_ENV !== 'production') {\n        logError('Invalid markLine data.');\n      }\n\n      itemArray = [];\n    }\n  } else {\n    itemArray = item;\n  }\n\n  var normalizedItem = [markerHelper.dataTransform(seriesModel, itemArray[0]), markerHelper.dataTransform(seriesModel, itemArray[1]), extend({}, itemArray[2])]; // Avoid line data type is extended by from(to) data type\n\n  normalizedItem[2].type = normalizedItem[2].type || null; // Merge from option and to option into line option\n\n  merge(normalizedItem[2], normalizedItem[0]);\n  merge(normalizedItem[2], normalizedItem[1]);\n  return normalizedItem;\n};\n\nfunction isInfinity(val) {\n  return !isNaN(val) && !isFinite(val);\n} // If a markLine has one dim\n\n\nfunction ifMarkLineHasOnlyDim(dimIndex, fromCoord, toCoord, coordSys) {\n  var otherDimIndex = 1 - dimIndex;\n  var dimName = coordSys.dimensions[dimIndex];\n  return isInfinity(fromCoord[otherDimIndex]) && isInfinity(toCoord[otherDimIndex]) && fromCoord[dimIndex] === toCoord[dimIndex] && coordSys.getAxis(dimName).containData(fromCoord[dimIndex]);\n}\n\nfunction markLineFilter(coordSys, item) {\n  if (coordSys.type === 'cartesian2d') {\n    var fromCoord = item[0].coord;\n    var toCoord = item[1].coord; // In case\n    // {\n    //  markLine: {\n    //    data: [{ yAxis: 2 }]\n    //  }\n    // }\n\n    if (fromCoord && toCoord && (ifMarkLineHasOnlyDim(1, fromCoord, toCoord, coordSys) || ifMarkLineHasOnlyDim(0, fromCoord, toCoord, coordSys))) {\n      return true;\n    }\n  }\n\n  return markerHelper.dataFilter(coordSys, item[0]) && markerHelper.dataFilter(coordSys, item[1]);\n}\n\nfunction updateSingleMarkerEndLayout(data, idx, isFrom, seriesModel, api) {\n  var coordSys = seriesModel.coordinateSystem;\n  var itemModel = data.getItemModel(idx);\n  var point;\n  var xPx = numberUtil.parsePercent(itemModel.get('x'), api.getWidth());\n  var yPx = numberUtil.parsePercent(itemModel.get('y'), api.getHeight());\n\n  if (!isNaN(xPx) && !isNaN(yPx)) {\n    point = [xPx, yPx];\n  } else {\n    // Chart like bar may have there own marker positioning logic\n    if (seriesModel.getMarkerPosition) {\n      // Use the getMarkerPosition\n      point = seriesModel.getMarkerPosition(data.getValues(data.dimensions, idx));\n    } else {\n      var dims = coordSys.dimensions;\n      var x = data.get(dims[0], idx);\n      var y = data.get(dims[1], idx);\n      point = coordSys.dataToPoint([x, y]);\n    } // Expand line to the edge of grid if value on one axis is Inifnity\n    // In case\n    //  markLine: {\n    //    data: [{\n    //      yAxis: 2\n    //      // or\n    //      type: 'average'\n    //    }]\n    //  }\n\n\n    if (isCoordinateSystemType(coordSys, 'cartesian2d')) {\n      // TODO: TYPE ts@4.1 may still infer it as Axis instead of Axis2D. Not sure if it's a bug\n      var xAxis = coordSys.getAxis('x');\n      var yAxis = coordSys.getAxis('y');\n      var dims = coordSys.dimensions;\n\n      if (isInfinity(data.get(dims[0], idx))) {\n        point[0] = xAxis.toGlobalCoord(xAxis.getExtent()[isFrom ? 0 : 1]);\n      } else if (isInfinity(data.get(dims[1], idx))) {\n        point[1] = yAxis.toGlobalCoord(yAxis.getExtent()[isFrom ? 0 : 1]);\n      }\n    } // Use x, y if has any\n\n\n    if (!isNaN(xPx)) {\n      point[0] = xPx;\n    }\n\n    if (!isNaN(yPx)) {\n      point[1] = yPx;\n    }\n  }\n\n  data.setItemLayout(idx, point);\n}\n\nvar MarkLineView =\n/** @class */\nfunction (_super) {\n  __extends(MarkLineView, _super);\n\n  function MarkLineView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = MarkLineView.type;\n    return _this;\n  }\n\n  MarkLineView.prototype.updateTransform = function (markLineModel, ecModel, api) {\n    ecModel.eachSeries(function (seriesModel) {\n      var mlModel = MarkerModel.getMarkerModelFromSeries(seriesModel, 'markLine');\n\n      if (mlModel) {\n        var mlData_1 = mlModel.getData();\n        var fromData_1 = inner(mlModel).from;\n        var toData_1 = inner(mlModel).to; // Update visual and layout of from symbol and to symbol\n\n        fromData_1.each(function (idx) {\n          updateSingleMarkerEndLayout(fromData_1, idx, true, seriesModel, api);\n          updateSingleMarkerEndLayout(toData_1, idx, false, seriesModel, api);\n        }); // Update layout of line\n\n        mlData_1.each(function (idx) {\n          mlData_1.setItemLayout(idx, [fromData_1.getItemLayout(idx), toData_1.getItemLayout(idx)]);\n        });\n        this.markerGroupMap.get(seriesModel.id).updateLayout();\n      }\n    }, this);\n  };\n\n  MarkLineView.prototype.renderSeries = function (seriesModel, mlModel, ecModel, api) {\n    var coordSys = seriesModel.coordinateSystem;\n    var seriesId = seriesModel.id;\n    var seriesData = seriesModel.getData();\n    var lineDrawMap = this.markerGroupMap;\n    var lineDraw = lineDrawMap.get(seriesId) || lineDrawMap.set(seriesId, new LineDraw());\n    this.group.add(lineDraw.group);\n    var mlData = createList(coordSys, seriesModel, mlModel);\n    var fromData = mlData.from;\n    var toData = mlData.to;\n    var lineData = mlData.line;\n    inner(mlModel).from = fromData;\n    inner(mlModel).to = toData; // Line data for tooltip and formatter\n\n    mlModel.setData(lineData); // TODO\n    // Functionally, `symbolSize` & `symbolOffset` can also be 2D array now.\n    // But the related logic and type definition are not finished yet.\n    // Finish it if required\n\n    var symbolType = mlModel.get('symbol');\n    var symbolSize = mlModel.get('symbolSize');\n    var symbolRotate = mlModel.get('symbolRotate');\n    var symbolOffset = mlModel.get('symbolOffset'); // TODO: support callback function like markPoint\n\n    if (!isArray(symbolType)) {\n      symbolType = [symbolType, symbolType];\n    }\n\n    if (!isArray(symbolSize)) {\n      symbolSize = [symbolSize, symbolSize];\n    }\n\n    if (!isArray(symbolRotate)) {\n      symbolRotate = [symbolRotate, symbolRotate];\n    }\n\n    if (!isArray(symbolOffset)) {\n      symbolOffset = [symbolOffset, symbolOffset];\n    } // Update visual and layout of from symbol and to symbol\n\n\n    mlData.from.each(function (idx) {\n      updateDataVisualAndLayout(fromData, idx, true);\n      updateDataVisualAndLayout(toData, idx, false);\n    }); // Update visual and layout of line\n\n    lineData.each(function (idx) {\n      var lineStyle = lineData.getItemModel(idx).getModel('lineStyle').getLineStyle(); // lineData.setItemVisual(idx, {\n      //     color: lineColor || fromData.getItemVisual(idx, 'color')\n      // });\n\n      lineData.setItemLayout(idx, [fromData.getItemLayout(idx), toData.getItemLayout(idx)]);\n\n      if (lineStyle.stroke == null) {\n        lineStyle.stroke = fromData.getItemVisual(idx, 'style').fill;\n      }\n\n      lineData.setItemVisual(idx, {\n        fromSymbolKeepAspect: fromData.getItemVisual(idx, 'symbolKeepAspect'),\n        fromSymbolOffset: fromData.getItemVisual(idx, 'symbolOffset'),\n        fromSymbolRotate: fromData.getItemVisual(idx, 'symbolRotate'),\n        fromSymbolSize: fromData.getItemVisual(idx, 'symbolSize'),\n        fromSymbol: fromData.getItemVisual(idx, 'symbol'),\n        toSymbolKeepAspect: toData.getItemVisual(idx, 'symbolKeepAspect'),\n        toSymbolOffset: toData.getItemVisual(idx, 'symbolOffset'),\n        toSymbolRotate: toData.getItemVisual(idx, 'symbolRotate'),\n        toSymbolSize: toData.getItemVisual(idx, 'symbolSize'),\n        toSymbol: toData.getItemVisual(idx, 'symbol'),\n        style: lineStyle\n      });\n    });\n    lineDraw.updateData(lineData); // Set host model for tooltip\n    // FIXME\n\n    mlData.line.eachItemGraphicEl(function (el) {\n      getECData(el).dataModel = mlModel;\n      el.traverse(function (child) {\n        getECData(child).dataModel = mlModel;\n      });\n    });\n\n    function updateDataVisualAndLayout(data, idx, isFrom) {\n      var itemModel = data.getItemModel(idx);\n      updateSingleMarkerEndLayout(data, idx, isFrom, seriesModel, api);\n      var style = itemModel.getModel('itemStyle').getItemStyle();\n\n      if (style.fill == null) {\n        style.fill = getVisualFromData(seriesData, 'color');\n      }\n\n      data.setItemVisual(idx, {\n        symbolKeepAspect: itemModel.get('symbolKeepAspect'),\n        // `0` should be considered as a valid value, so use `retrieve2` instead of `||`\n        symbolOffset: retrieve2(itemModel.get('symbolOffset', true), symbolOffset[isFrom ? 0 : 1]),\n        symbolRotate: retrieve2(itemModel.get('symbolRotate', true), symbolRotate[isFrom ? 0 : 1]),\n        // TODO: when 2d array is supported, it should ignore parent\n        symbolSize: retrieve2(itemModel.get('symbolSize'), symbolSize[isFrom ? 0 : 1]),\n        symbol: retrieve2(itemModel.get('symbol', true), symbolType[isFrom ? 0 : 1]),\n        style: style\n      });\n    }\n\n    this.markKeep(lineDraw);\n    lineDraw.group.silent = mlModel.get('silent') || seriesModel.get('silent');\n  };\n\n  MarkLineView.type = 'markLine';\n  return MarkLineView;\n}(MarkerView);\n\nfunction createList(coordSys, seriesModel, mlModel) {\n  var coordDimsInfos;\n\n  if (coordSys) {\n    coordDimsInfos = map(coordSys && coordSys.dimensions, function (coordDim) {\n      var info = seriesModel.getData().getDimensionInfo(seriesModel.getData().mapDimension(coordDim)) || {}; // In map series data don't have lng and lat dimension. Fallback to same with coordSys\n\n      return extend(extend({}, info), {\n        name: coordDim,\n        // DON'T use ordinalMeta to parse and collect ordinal.\n        ordinalMeta: null\n      });\n    });\n  } else {\n    coordDimsInfos = [{\n      name: 'value',\n      type: 'float'\n    }];\n  }\n\n  var fromData = new SeriesData(coordDimsInfos, mlModel);\n  var toData = new SeriesData(coordDimsInfos, mlModel); // No dimensions\n\n  var lineData = new SeriesData([], mlModel);\n  var optData = map(mlModel.get('data'), curry(markLineTransform, seriesModel, coordSys, mlModel));\n\n  if (coordSys) {\n    optData = filter(optData, curry(markLineFilter, coordSys));\n  }\n\n  var dimValueGetter = markerHelper.createMarkerDimValueGetter(!!coordSys, coordDimsInfos);\n  fromData.initData(map(optData, function (item) {\n    return item[0];\n  }), null, dimValueGetter);\n  toData.initData(map(optData, function (item) {\n    return item[1];\n  }), null, dimValueGetter);\n  lineData.initData(map(optData, function (item) {\n    return item[2];\n  }));\n  lineData.hasItemOption = true;\n  return {\n    from: fromData,\n    to: toData,\n    line: lineData\n  };\n}\n\nexport default MarkLineView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\nimport checkMarkerInSeries from './checkMarkerInSeries.js';\nimport MarkLineModel from './MarkLineModel.js';\nimport MarkLineView from './MarkLineView.js';\nexport function install(registers) {\n  registers.registerComponentModel(MarkLineModel);\n  registers.registerComponentView(MarkLineView);\n  registers.registerPreprocessor(function (opt) {\n    if (checkMarkerInSeries(opt.series, 'markLine')) {\n      // Make sure markLine component is enabled\n      opt.markLine = opt.markLine || {};\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport MarkerModel from './MarkerModel.js';\n\nvar MarkAreaModel =\n/** @class */\nfunction (_super) {\n  __extends(MarkAreaModel, _super);\n\n  function MarkAreaModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = MarkAreaModel.type;\n    return _this;\n  }\n\n  MarkAreaModel.prototype.createMarkerModelFromSeries = function (markerOpt, masterMarkerModel, ecModel) {\n    return new MarkAreaModel(markerOpt, masterMarkerModel, ecModel);\n  };\n\n  MarkAreaModel.type = 'markArea';\n  MarkAreaModel.defaultOption = {\n    // zlevel: 0,\n    // PENDING\n    z: 1,\n    tooltip: {\n      trigger: 'item'\n    },\n    // markArea should fixed on the coordinate system\n    animation: false,\n    label: {\n      show: true,\n      position: 'top'\n    },\n    itemStyle: {\n      // color and borderColor default to use color from series\n      // color: 'auto'\n      // borderColor: 'auto'\n      borderWidth: 0\n    },\n    emphasis: {\n      label: {\n        show: true,\n        position: 'top'\n      }\n    }\n  };\n  return MarkAreaModel;\n}(MarkerModel);\n\nexport default MarkAreaModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\"; // TODO Optimize on polar\n\nimport * as colorUtil from 'zrender/lib/tool/color.js';\nimport SeriesData from '../../data/SeriesData.js';\nimport * as numberUtil from '../../util/number.js';\nimport * as graphic from '../../util/graphic.js';\nimport { toggleHoverEmphasis, setStatesStylesFromModel } from '../../util/states.js';\nimport * as markerHelper from './markerHelper.js';\nimport MarkerView from './MarkerView.js';\nimport { retrieve, mergeAll, map, curry, filter, extend, isString } from 'zrender/lib/core/util.js';\nimport { isCoordinateSystemType } from '../../coord/CoordinateSystem.js';\nimport MarkerModel from './MarkerModel.js';\nimport { makeInner } from '../../util/model.js';\nimport { getVisualFromData } from '../../visual/helper.js';\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { parseDataValue } from '../../data/helper/dataValueHelper.js';\nvar inner = makeInner();\n\nvar markAreaTransform = function (seriesModel, coordSys, maModel, item) {\n  // item may be null\n  var item0 = item[0];\n  var item1 = item[1];\n\n  if (!item0 || !item1) {\n    return;\n  }\n\n  var lt = markerHelper.dataTransform(seriesModel, item0);\n  var rb = markerHelper.dataTransform(seriesModel, item1); // FIXME make sure lt is less than rb\n\n  var ltCoord = lt.coord;\n  var rbCoord = rb.coord;\n  ltCoord[0] = retrieve(ltCoord[0], -Infinity);\n  ltCoord[1] = retrieve(ltCoord[1], -Infinity);\n  rbCoord[0] = retrieve(rbCoord[0], Infinity);\n  rbCoord[1] = retrieve(rbCoord[1], Infinity); // Merge option into one\n\n  var result = mergeAll([{}, lt, rb]);\n  result.coord = [lt.coord, rb.coord];\n  result.x0 = lt.x;\n  result.y0 = lt.y;\n  result.x1 = rb.x;\n  result.y1 = rb.y;\n  return result;\n};\n\nfunction isInfinity(val) {\n  return !isNaN(val) && !isFinite(val);\n} // If a markArea has one dim\n\n\nfunction ifMarkAreaHasOnlyDim(dimIndex, fromCoord, toCoord, coordSys) {\n  var otherDimIndex = 1 - dimIndex;\n  return isInfinity(fromCoord[otherDimIndex]) && isInfinity(toCoord[otherDimIndex]);\n}\n\nfunction markAreaFilter(coordSys, item) {\n  var fromCoord = item.coord[0];\n  var toCoord = item.coord[1];\n  var item0 = {\n    coord: fromCoord,\n    x: item.x0,\n    y: item.y0\n  };\n  var item1 = {\n    coord: toCoord,\n    x: item.x1,\n    y: item.y1\n  };\n\n  if (isCoordinateSystemType(coordSys, 'cartesian2d')) {\n    // In case\n    // {\n    //  markArea: {\n    //    data: [{ yAxis: 2 }]\n    //  }\n    // }\n    if (fromCoord && toCoord && (ifMarkAreaHasOnlyDim(1, fromCoord, toCoord, coordSys) || ifMarkAreaHasOnlyDim(0, fromCoord, toCoord, coordSys))) {\n      return true;\n    } // Directly returning true may also do the work,\n    // because markArea will not be shown automatically\n    // when it's not included in coordinate system.\n    // But filtering ahead can avoid keeping rendering markArea\n    // when there are too many of them.\n\n\n    return markerHelper.zoneFilter(coordSys, item0, item1);\n  }\n\n  return markerHelper.dataFilter(coordSys, item0) || markerHelper.dataFilter(coordSys, item1);\n} // dims can be ['x0', 'y0'], ['x1', 'y1'], ['x0', 'y1'], ['x1', 'y0']\n\n\nfunction getSingleMarkerEndPoint(data, idx, dims, seriesModel, api) {\n  var coordSys = seriesModel.coordinateSystem;\n  var itemModel = data.getItemModel(idx);\n  var point;\n  var xPx = numberUtil.parsePercent(itemModel.get(dims[0]), api.getWidth());\n  var yPx = numberUtil.parsePercent(itemModel.get(dims[1]), api.getHeight());\n\n  if (!isNaN(xPx) && !isNaN(yPx)) {\n    point = [xPx, yPx];\n  } else {\n    // Chart like bar may have there own marker positioning logic\n    if (seriesModel.getMarkerPosition) {\n      // Consider the case that user input the right-bottom point first\n      // Pick the larger x and y as 'x1' and 'y1'\n      var pointValue0 = data.getValues(['x0', 'y0'], idx);\n      var pointValue1 = data.getValues(['x1', 'y1'], idx);\n      var clampPointValue0 = coordSys.clampData(pointValue0);\n      var clampPointValue1 = coordSys.clampData(pointValue1);\n      var pointValue = [];\n\n      if (dims[0] === 'x0') {\n        pointValue[0] = clampPointValue0[0] > clampPointValue1[0] ? pointValue1[0] : pointValue0[0];\n      } else {\n        pointValue[0] = clampPointValue0[0] > clampPointValue1[0] ? pointValue0[0] : pointValue1[0];\n      }\n\n      if (dims[1] === 'y0') {\n        pointValue[1] = clampPointValue0[1] > clampPointValue1[1] ? pointValue1[1] : pointValue0[1];\n      } else {\n        pointValue[1] = clampPointValue0[1] > clampPointValue1[1] ? pointValue0[1] : pointValue1[1];\n      } // Use the getMarkerPosition\n\n\n      point = seriesModel.getMarkerPosition(pointValue, dims, true);\n    } else {\n      var x = data.get(dims[0], idx);\n      var y = data.get(dims[1], idx);\n      var pt = [x, y];\n      coordSys.clampData && coordSys.clampData(pt, pt);\n      point = coordSys.dataToPoint(pt, true);\n    }\n\n    if (isCoordinateSystemType(coordSys, 'cartesian2d')) {\n      // TODO: TYPE ts@4.1 may still infer it as Axis instead of Axis2D. Not sure if it's a bug\n      var xAxis = coordSys.getAxis('x');\n      var yAxis = coordSys.getAxis('y');\n      var x = data.get(dims[0], idx);\n      var y = data.get(dims[1], idx);\n\n      if (isInfinity(x)) {\n        point[0] = xAxis.toGlobalCoord(xAxis.getExtent()[dims[0] === 'x0' ? 0 : 1]);\n      } else if (isInfinity(y)) {\n        point[1] = yAxis.toGlobalCoord(yAxis.getExtent()[dims[1] === 'y0' ? 0 : 1]);\n      }\n    } // Use x, y if has any\n\n\n    if (!isNaN(xPx)) {\n      point[0] = xPx;\n    }\n\n    if (!isNaN(yPx)) {\n      point[1] = yPx;\n    }\n  }\n\n  return point;\n}\n\nexport var dimPermutations = [['x0', 'y0'], ['x1', 'y0'], ['x1', 'y1'], ['x0', 'y1']];\n\nvar MarkAreaView =\n/** @class */\nfunction (_super) {\n  __extends(MarkAreaView, _super);\n\n  function MarkAreaView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = MarkAreaView.type;\n    return _this;\n  }\n\n  MarkAreaView.prototype.updateTransform = function (markAreaModel, ecModel, api) {\n    ecModel.eachSeries(function (seriesModel) {\n      var maModel = MarkerModel.getMarkerModelFromSeries(seriesModel, 'markArea');\n\n      if (maModel) {\n        var areaData_1 = maModel.getData();\n        areaData_1.each(function (idx) {\n          var points = map(dimPermutations, function (dim) {\n            return getSingleMarkerEndPoint(areaData_1, idx, dim, seriesModel, api);\n          }); // Layout\n\n          areaData_1.setItemLayout(idx, points);\n          var el = areaData_1.getItemGraphicEl(idx);\n          el.setShape('points', points);\n        });\n      }\n    }, this);\n  };\n\n  MarkAreaView.prototype.renderSeries = function (seriesModel, maModel, ecModel, api) {\n    var coordSys = seriesModel.coordinateSystem;\n    var seriesId = seriesModel.id;\n    var seriesData = seriesModel.getData();\n    var areaGroupMap = this.markerGroupMap;\n    var polygonGroup = areaGroupMap.get(seriesId) || areaGroupMap.set(seriesId, {\n      group: new graphic.Group()\n    });\n    this.group.add(polygonGroup.group);\n    this.markKeep(polygonGroup);\n    var areaData = createList(coordSys, seriesModel, maModel); // Line data for tooltip and formatter\n\n    maModel.setData(areaData); // Update visual and layout of line\n\n    areaData.each(function (idx) {\n      // Layout\n      var points = map(dimPermutations, function (dim) {\n        return getSingleMarkerEndPoint(areaData, idx, dim, seriesModel, api);\n      });\n      var xAxisScale = coordSys.getAxis('x').scale;\n      var yAxisScale = coordSys.getAxis('y').scale;\n      var xAxisExtent = xAxisScale.getExtent();\n      var yAxisExtent = yAxisScale.getExtent();\n      var xPointExtent = [xAxisScale.parse(areaData.get('x0', idx)), xAxisScale.parse(areaData.get('x1', idx))];\n      var yPointExtent = [yAxisScale.parse(areaData.get('y0', idx)), yAxisScale.parse(areaData.get('y1', idx))];\n      numberUtil.asc(xPointExtent);\n      numberUtil.asc(yPointExtent);\n      var overlapped = !(xAxisExtent[0] > xPointExtent[1] || xAxisExtent[1] < xPointExtent[0] || yAxisExtent[0] > yPointExtent[1] || yAxisExtent[1] < yPointExtent[0]); // If none of the area is inside coordSys, allClipped is set to be true\n      // in layout so that label will not be displayed. See #12591\n\n      var allClipped = !overlapped;\n      areaData.setItemLayout(idx, {\n        points: points,\n        allClipped: allClipped\n      });\n      var style = areaData.getItemModel(idx).getModel('itemStyle').getItemStyle();\n      var color = getVisualFromData(seriesData, 'color');\n\n      if (!style.fill) {\n        style.fill = color;\n\n        if (isString(style.fill)) {\n          style.fill = colorUtil.modifyAlpha(style.fill, 0.4);\n        }\n      }\n\n      if (!style.stroke) {\n        style.stroke = color;\n      } // Visual\n\n\n      areaData.setItemVisual(idx, 'style', style);\n    });\n    areaData.diff(inner(polygonGroup).data).add(function (idx) {\n      var layout = areaData.getItemLayout(idx);\n\n      if (!layout.allClipped) {\n        var polygon = new graphic.Polygon({\n          shape: {\n            points: layout.points\n          }\n        });\n        areaData.setItemGraphicEl(idx, polygon);\n        polygonGroup.group.add(polygon);\n      }\n    }).update(function (newIdx, oldIdx) {\n      var polygon = inner(polygonGroup).data.getItemGraphicEl(oldIdx);\n      var layout = areaData.getItemLayout(newIdx);\n\n      if (!layout.allClipped) {\n        if (polygon) {\n          graphic.updateProps(polygon, {\n            shape: {\n              points: layout.points\n            }\n          }, maModel, newIdx);\n        } else {\n          polygon = new graphic.Polygon({\n            shape: {\n              points: layout.points\n            }\n          });\n        }\n\n        areaData.setItemGraphicEl(newIdx, polygon);\n        polygonGroup.group.add(polygon);\n      } else if (polygon) {\n        polygonGroup.group.remove(polygon);\n      }\n    }).remove(function (idx) {\n      var polygon = inner(polygonGroup).data.getItemGraphicEl(idx);\n      polygonGroup.group.remove(polygon);\n    }).execute();\n    areaData.eachItemGraphicEl(function (polygon, idx) {\n      var itemModel = areaData.getItemModel(idx);\n      var style = areaData.getItemVisual(idx, 'style');\n      polygon.useStyle(areaData.getItemVisual(idx, 'style'));\n      setLabelStyle(polygon, getLabelStatesModels(itemModel), {\n        labelFetcher: maModel,\n        labelDataIndex: idx,\n        defaultText: areaData.getName(idx) || '',\n        inheritColor: isString(style.fill) ? colorUtil.modifyAlpha(style.fill, 1) : '#000'\n      });\n      setStatesStylesFromModel(polygon, itemModel);\n      toggleHoverEmphasis(polygon, null, null, itemModel.get(['emphasis', 'disabled']));\n      getECData(polygon).dataModel = maModel;\n    });\n    inner(polygonGroup).data = areaData;\n    polygonGroup.group.silent = maModel.get('silent') || seriesModel.get('silent');\n  };\n\n  MarkAreaView.type = 'markArea';\n  return MarkAreaView;\n}(MarkerView);\n\nfunction createList(coordSys, seriesModel, maModel) {\n  var areaData;\n  var dataDims;\n  var dims = ['x0', 'y0', 'x1', 'y1'];\n\n  if (coordSys) {\n    var coordDimsInfos_1 = map(coordSys && coordSys.dimensions, function (coordDim) {\n      var data = seriesModel.getData();\n      var info = data.getDimensionInfo(data.mapDimension(coordDim)) || {}; // In map series data don't have lng and lat dimension. Fallback to same with coordSys\n\n      return extend(extend({}, info), {\n        name: coordDim,\n        // DON'T use ordinalMeta to parse and collect ordinal.\n        ordinalMeta: null\n      });\n    });\n    dataDims = map(dims, function (dim, idx) {\n      return {\n        name: dim,\n        type: coordDimsInfos_1[idx % 2].type\n      };\n    });\n    areaData = new SeriesData(dataDims, maModel);\n  } else {\n    dataDims = [{\n      name: 'value',\n      type: 'float'\n    }];\n    areaData = new SeriesData(dataDims, maModel);\n  }\n\n  var optData = map(maModel.get('data'), curry(markAreaTransform, seriesModel, coordSys, maModel));\n\n  if (coordSys) {\n    optData = filter(optData, curry(markAreaFilter, coordSys));\n  }\n\n  var dimValueGetter = coordSys ? function (item, dimName, dataIndex, dimIndex) {\n    // TODO should convert to ParsedValue?\n    var rawVal = item.coord[Math.floor(dimIndex / 2)][dimIndex % 2];\n    return parseDataValue(rawVal, dataDims[dimIndex]);\n  } : function (item, dimName, dataIndex, dimIndex) {\n    return parseDataValue(item.value, dataDims[dimIndex]);\n  };\n  areaData.initData(optData, null, dimValueGetter);\n  areaData.hasItemOption = true;\n  return areaData;\n}\n\nexport default MarkAreaView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport checkMarkerInSeries from './checkMarkerInSeries.js';\nimport MarkAreaModel from './MarkAreaModel.js';\nimport MarkAreaView from './MarkAreaView.js';\nexport function install(registers) {\n  registers.registerComponentModel(MarkAreaModel);\n  registers.registerComponentView(MarkAreaView);\n  registers.registerPreprocessor(function (opt) {\n    if (checkMarkerInSeries(opt.series, 'markArea')) {\n      // Make sure markArea component is enabled\n      opt.markArea = opt.markArea || {};\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { keys, isArray, map, isObject, isString, isRegExp, isArrayLike, hasOwn, isNumber } from 'zrender/lib/core/util.js';\nimport { throwError, makePrintable } from './log.js';\nimport { getRawValueParser, createFilterComparator } from '../data/helper/dataValueHelper.js';\n;\nvar RELATIONAL_EXPRESSION_OP_ALIAS_MAP = {\n  value: 'eq',\n  // PENDING: not good for literal semantic?\n  '<': 'lt',\n  '<=': 'lte',\n  '>': 'gt',\n  '>=': 'gte',\n  '=': 'eq',\n  '!=': 'ne',\n  '<>': 'ne' // Might be misleading for sake of the difference between '==' and '===',\n  // so don't support them.\n  // '==': 'eq',\n  // '===': 'seq',\n  // '!==': 'sne'\n  // PENDING: Whether support some common alias \"ge\", \"le\", \"neq\"?\n  // ge: 'gte',\n  // le: 'lte',\n  // neq: 'ne',\n\n}; // type RelationalExpressionOpEvaluate = (tarVal: unknown, condVal: unknown) => boolean;\n\nvar RegExpEvaluator =\n/** @class */\nfunction () {\n  function RegExpEvaluator(rVal) {\n    // Support condVal: RegExp | string\n    var condValue = this._condVal = isString(rVal) ? new RegExp(rVal) : isRegExp(rVal) ? rVal : null;\n\n    if (condValue == null) {\n      var errMsg = '';\n\n      if (process.env.NODE_ENV !== 'production') {\n        errMsg = makePrintable('Illegal regexp', rVal, 'in');\n      }\n\n      throwError(errMsg);\n    }\n  }\n\n  RegExpEvaluator.prototype.evaluate = function (lVal) {\n    var type = typeof lVal;\n    return isString(type) ? this._condVal.test(lVal) : isNumber(type) ? this._condVal.test(lVal + '') : false;\n  };\n\n  return RegExpEvaluator;\n}();\n\nvar ConstConditionInternal =\n/** @class */\nfunction () {\n  function ConstConditionInternal() {}\n\n  ConstConditionInternal.prototype.evaluate = function () {\n    return this.value;\n  };\n\n  return ConstConditionInternal;\n}();\n\nvar AndConditionInternal =\n/** @class */\nfunction () {\n  function AndConditionInternal() {}\n\n  AndConditionInternal.prototype.evaluate = function () {\n    var children = this.children;\n\n    for (var i = 0; i < children.length; i++) {\n      if (!children[i].evaluate()) {\n        return false;\n      }\n    }\n\n    return true;\n  };\n\n  return AndConditionInternal;\n}();\n\nvar OrConditionInternal =\n/** @class */\nfunction () {\n  function OrConditionInternal() {}\n\n  OrConditionInternal.prototype.evaluate = function () {\n    var children = this.children;\n\n    for (var i = 0; i < children.length; i++) {\n      if (children[i].evaluate()) {\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  return OrConditionInternal;\n}();\n\nvar NotConditionInternal =\n/** @class */\nfunction () {\n  function NotConditionInternal() {}\n\n  NotConditionInternal.prototype.evaluate = function () {\n    return !this.child.evaluate();\n  };\n\n  return NotConditionInternal;\n}();\n\nvar RelationalConditionInternal =\n/** @class */\nfunction () {\n  function RelationalConditionInternal() {}\n\n  RelationalConditionInternal.prototype.evaluate = function () {\n    var needParse = !!this.valueParser; // Call getValue with no `this`.\n\n    var getValue = this.getValue;\n    var tarValRaw = getValue(this.valueGetterParam);\n    var tarValParsed = needParse ? this.valueParser(tarValRaw) : null; // Relational cond follow \"and\" logic internally.\n\n    for (var i = 0; i < this.subCondList.length; i++) {\n      if (!this.subCondList[i].evaluate(needParse ? tarValParsed : tarValRaw)) {\n        return false;\n      }\n    }\n\n    return true;\n  };\n\n  return RelationalConditionInternal;\n}();\n\nfunction parseOption(exprOption, getters) {\n  if (exprOption === true || exprOption === false) {\n    var cond = new ConstConditionInternal();\n    cond.value = exprOption;\n    return cond;\n  }\n\n  var errMsg = '';\n\n  if (!isObjectNotArray(exprOption)) {\n    if (process.env.NODE_ENV !== 'production') {\n      errMsg = makePrintable('Illegal config. Expect a plain object but actually', exprOption);\n    }\n\n    throwError(errMsg);\n  }\n\n  if (exprOption.and) {\n    return parseAndOrOption('and', exprOption, getters);\n  } else if (exprOption.or) {\n    return parseAndOrOption('or', exprOption, getters);\n  } else if (exprOption.not) {\n    return parseNotOption(exprOption, getters);\n  }\n\n  return parseRelationalOption(exprOption, getters);\n}\n\nfunction parseAndOrOption(op, exprOption, getters) {\n  var subOptionArr = exprOption[op];\n  var errMsg = '';\n\n  if (process.env.NODE_ENV !== 'production') {\n    errMsg = makePrintable('\"and\"/\"or\" condition should only be `' + op + ': [...]` and must not be empty array.', 'Illegal condition:', exprOption);\n  }\n\n  if (!isArray(subOptionArr)) {\n    throwError(errMsg);\n  }\n\n  if (!subOptionArr.length) {\n    throwError(errMsg);\n  }\n\n  var cond = op === 'and' ? new AndConditionInternal() : new OrConditionInternal();\n  cond.children = map(subOptionArr, function (subOption) {\n    return parseOption(subOption, getters);\n  });\n\n  if (!cond.children.length) {\n    throwError(errMsg);\n  }\n\n  return cond;\n}\n\nfunction parseNotOption(exprOption, getters) {\n  var subOption = exprOption.not;\n  var errMsg = '';\n\n  if (process.env.NODE_ENV !== 'production') {\n    errMsg = makePrintable('\"not\" condition should only be `not: {}`.', 'Illegal condition:', exprOption);\n  }\n\n  if (!isObjectNotArray(subOption)) {\n    throwError(errMsg);\n  }\n\n  var cond = new NotConditionInternal();\n  cond.child = parseOption(subOption, getters);\n\n  if (!cond.child) {\n    throwError(errMsg);\n  }\n\n  return cond;\n}\n\nfunction parseRelationalOption(exprOption, getters) {\n  var errMsg = '';\n  var valueGetterParam = getters.prepareGetValue(exprOption);\n  var subCondList = [];\n  var exprKeys = keys(exprOption);\n  var parserName = exprOption.parser;\n  var valueParser = parserName ? getRawValueParser(parserName) : null;\n\n  for (var i = 0; i < exprKeys.length; i++) {\n    var keyRaw = exprKeys[i];\n\n    if (keyRaw === 'parser' || getters.valueGetterAttrMap.get(keyRaw)) {\n      continue;\n    }\n\n    var op = hasOwn(RELATIONAL_EXPRESSION_OP_ALIAS_MAP, keyRaw) ? RELATIONAL_EXPRESSION_OP_ALIAS_MAP[keyRaw] : keyRaw;\n    var condValueRaw = exprOption[keyRaw];\n    var condValueParsed = valueParser ? valueParser(condValueRaw) : condValueRaw;\n    var evaluator = createFilterComparator(op, condValueParsed) || op === 'reg' && new RegExpEvaluator(condValueParsed);\n\n    if (!evaluator) {\n      if (process.env.NODE_ENV !== 'production') {\n        errMsg = makePrintable('Illegal relational operation: \"' + keyRaw + '\" in condition:', exprOption);\n      }\n\n      throwError(errMsg);\n    }\n\n    subCondList.push(evaluator);\n  }\n\n  if (!subCondList.length) {\n    if (process.env.NODE_ENV !== 'production') {\n      errMsg = makePrintable('Relational condition must have at least one operator.', 'Illegal condition:', exprOption);\n    } // No relational operator always disabled in case of dangers result.\n\n\n    throwError(errMsg);\n  }\n\n  var cond = new RelationalConditionInternal();\n  cond.valueGetterParam = valueGetterParam;\n  cond.valueParser = valueParser;\n  cond.getValue = getters.getValue;\n  cond.subCondList = subCondList;\n  return cond;\n}\n\nfunction isObjectNotArray(val) {\n  return isObject(val) && !isArrayLike(val);\n}\n\nvar ConditionalExpressionParsed =\n/** @class */\nfunction () {\n  function ConditionalExpressionParsed(exprOption, getters) {\n    this._cond = parseOption(exprOption, getters);\n  }\n\n  ConditionalExpressionParsed.prototype.evaluate = function () {\n    return this._cond.evaluate();\n  };\n\n  return ConditionalExpressionParsed;\n}();\n\n;\nexport function parseConditionalExpression(exprOption, getters) {\n  return new ConditionalExpressionParsed(exprOption, getters);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { parseConditionalExpression } from '../../util/conditionalExpression.js';\nimport { hasOwn, createHashMap } from 'zrender/lib/core/util.js';\nimport { makePrintable, throwError } from '../../util/log.js';\nexport var filterTransform = {\n  type: 'echarts:filter',\n  // PENDING: enhance to filter by index rather than create new data\n  transform: function (params) {\n    // [Caveat] Fail-Fast:\n    // Do not return the whole dataset unless user config indicates it explicitly.\n    // For example, if no condition is specified by mistake, returning an empty result\n    // is better than returning the entire raw source for the user to find the mistake.\n    var upstream = params.upstream;\n    var rawItem;\n    var condition = parseConditionalExpression(params.config, {\n      valueGetterAttrMap: createHashMap({\n        dimension: true\n      }),\n      prepareGetValue: function (exprOption) {\n        var errMsg = '';\n        var dimLoose = exprOption.dimension;\n\n        if (!hasOwn(exprOption, 'dimension')) {\n          if (process.env.NODE_ENV !== 'production') {\n            errMsg = makePrintable('Relation condition must has prop \"dimension\" specified.', 'Illegal condition:', exprOption);\n          }\n\n          throwError(errMsg);\n        }\n\n        var dimInfo = upstream.getDimensionInfo(dimLoose);\n\n        if (!dimInfo) {\n          if (process.env.NODE_ENV !== 'production') {\n            errMsg = makePrintable('Can not find dimension info via: ' + dimLoose + '.\\n', 'Existing dimensions: ', upstream.cloneAllDimensionInfo(), '.\\n', 'Illegal condition:', exprOption, '.\\n');\n          }\n\n          throwError(errMsg);\n        }\n\n        return {\n          dimIdx: dimInfo.index\n        };\n      },\n      getValue: function (param) {\n        return upstream.retrieveValueFromItem(rawItem, param.dimIdx);\n      }\n    });\n    var resultData = [];\n\n    for (var i = 0, len = upstream.count(); i < len; i++) {\n      rawItem = upstream.getRawDataItem(i);\n\n      if (condition.evaluate()) {\n        resultData.push(rawItem);\n      }\n    }\n\n    return {\n      data: resultData\n    };\n  }\n};","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { SOURCE_FORMAT_ARRAY_ROWS, SOURCE_FORMAT_OBJECT_ROWS } from '../../util/types.js';\nimport { makePrintable, throwError } from '../../util/log.js';\nimport { each } from 'zrender/lib/core/util.js';\nimport { normalizeToArray } from '../../util/model.js';\nimport { getRawValueParser, SortOrderComparator } from '../../data/helper/dataValueHelper.js';\nvar sampleLog = '';\n\nif (process.env.NODE_ENV !== 'production') {\n  sampleLog = ['Valid config is like:', '{ dimension: \"age\", order: \"asc\" }', 'or [{ dimension: \"age\", order: \"asc\"], { dimension: \"date\", order: \"desc\" }]'].join(' ');\n}\n\nexport var sortTransform = {\n  type: 'echarts:sort',\n  transform: function (params) {\n    var upstream = params.upstream;\n    var config = params.config;\n    var errMsg = ''; // Normalize\n    // const orderExprList: OrderExpression[] = isArray(config[0])\n    //     ? config as OrderExpression[]\n    //     : [config as OrderExpression];\n\n    var orderExprList = normalizeToArray(config);\n\n    if (!orderExprList.length) {\n      if (process.env.NODE_ENV !== 'production') {\n        errMsg = 'Empty `config` in sort transform.';\n      }\n\n      throwError(errMsg);\n    }\n\n    var orderDefList = [];\n    each(orderExprList, function (orderExpr) {\n      var dimLoose = orderExpr.dimension;\n      var order = orderExpr.order;\n      var parserName = orderExpr.parser;\n      var incomparable = orderExpr.incomparable;\n\n      if (dimLoose == null) {\n        if (process.env.NODE_ENV !== 'production') {\n          errMsg = 'Sort transform config must has \"dimension\" specified.' + sampleLog;\n        }\n\n        throwError(errMsg);\n      }\n\n      if (order !== 'asc' && order !== 'desc') {\n        if (process.env.NODE_ENV !== 'production') {\n          errMsg = 'Sort transform config must has \"order\" specified.' + sampleLog;\n        }\n\n        throwError(errMsg);\n      }\n\n      if (incomparable && incomparable !== 'min' && incomparable !== 'max') {\n        var errMsg_1 = '';\n\n        if (process.env.NODE_ENV !== 'production') {\n          errMsg_1 = 'incomparable must be \"min\" or \"max\" rather than \"' + incomparable + '\".';\n        }\n\n        throwError(errMsg_1);\n      }\n\n      if (order !== 'asc' && order !== 'desc') {\n        var errMsg_2 = '';\n\n        if (process.env.NODE_ENV !== 'production') {\n          errMsg_2 = 'order must be \"asc\" or \"desc\" rather than \"' + order + '\".';\n        }\n\n        throwError(errMsg_2);\n      }\n\n      var dimInfo = upstream.getDimensionInfo(dimLoose);\n\n      if (!dimInfo) {\n        if (process.env.NODE_ENV !== 'production') {\n          errMsg = makePrintable('Can not find dimension info via: ' + dimLoose + '.\\n', 'Existing dimensions: ', upstream.cloneAllDimensionInfo(), '.\\n', 'Illegal config:', orderExpr, '.\\n');\n        }\n\n        throwError(errMsg);\n      }\n\n      var parser = parserName ? getRawValueParser(parserName) : null;\n\n      if (parserName && !parser) {\n        if (process.env.NODE_ENV !== 'production') {\n          errMsg = makePrintable('Invalid parser name ' + parserName + '.\\n', 'Illegal config:', orderExpr, '.\\n');\n        }\n\n        throwError(errMsg);\n      }\n\n      orderDefList.push({\n        dimIdx: dimInfo.index,\n        parser: parser,\n        comparator: new SortOrderComparator(order, incomparable)\n      });\n    }); // TODO: support it?\n\n    var sourceFormat = upstream.sourceFormat;\n\n    if (sourceFormat !== SOURCE_FORMAT_ARRAY_ROWS && sourceFormat !== SOURCE_FORMAT_OBJECT_ROWS) {\n      if (process.env.NODE_ENV !== 'production') {\n        errMsg = 'sourceFormat \"' + sourceFormat + '\" is not supported yet';\n      }\n\n      throwError(errMsg);\n    } // Other upstream format are all array.\n\n\n    var resultData = [];\n\n    for (var i = 0, len = upstream.count(); i < len; i++) {\n      resultData.push(upstream.getRawDataItem(i));\n    }\n\n    resultData.sort(function (item0, item1) {\n      for (var i = 0; i < orderDefList.length; i++) {\n        var orderDef = orderDefList[i];\n        var val0 = upstream.retrieveValueFromItem(item0, orderDef.dimIdx);\n        var val1 = upstream.retrieveValueFromItem(item1, orderDef.dimIdx);\n\n        if (orderDef.parser) {\n          val0 = orderDef.parser(val0);\n          val1 = orderDef.parser(val1);\n        }\n\n        var result = orderDef.comparator.evaluate(val0, val1);\n\n        if (result !== 0) {\n          return result;\n        }\n      }\n\n      return 0;\n    });\n    return {\n      data: resultData\n    };\n  }\n};","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { filterTransform } from './filterTransform.js';\nimport { sortTransform } from './sortTransform.js';\nexport function install(registers) {\n  registers.registerTransform(filterTransform);\n  registers.registerTransform(sortTransform);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\n/**\r\n * This module is imported by echarts directly.\r\n *\r\n * Notice:\r\n * Always keep this file exists for backward compatibility.\r\n * Because before 4.1.0, dataset is an optional component,\r\n * some users may import this module manually.\r\n */\n\nimport ComponentModel from '../../model/Component.js';\nimport ComponentView from '../../view/Component.js';\nimport { SERIES_LAYOUT_BY_COLUMN } from '../../util/types.js';\nimport { disableTransformOptionMerge, SourceManager } from '../../data/helper/sourceManager.js';\n\nvar DatasetModel =\n/** @class */\nfunction (_super) {\n  __extends(DatasetModel, _super);\n\n  function DatasetModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = 'dataset';\n    return _this;\n  }\n\n  DatasetModel.prototype.init = function (option, parentModel, ecModel) {\n    _super.prototype.init.call(this, option, parentModel, ecModel);\n\n    this._sourceManager = new SourceManager(this);\n    disableTransformOptionMerge(this);\n  };\n\n  DatasetModel.prototype.mergeOption = function (newOption, ecModel) {\n    _super.prototype.mergeOption.call(this, newOption, ecModel);\n\n    disableTransformOptionMerge(this);\n  };\n\n  DatasetModel.prototype.optionUpdated = function () {\n    this._sourceManager.dirty();\n  };\n\n  DatasetModel.prototype.getSourceManager = function () {\n    return this._sourceManager;\n  };\n\n  DatasetModel.type = 'dataset';\n  DatasetModel.defaultOption = {\n    seriesLayoutBy: SERIES_LAYOUT_BY_COLUMN\n  };\n  return DatasetModel;\n}(ComponentModel);\n\nexport { DatasetModel };\n\nvar DatasetView =\n/** @class */\nfunction (_super) {\n  __extends(DatasetView, _super);\n\n  function DatasetView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = 'dataset';\n    return _this;\n  }\n\n  DatasetView.type = 'dataset';\n  return DatasetView;\n}(ComponentView);\n\nexport function install(registers) {\n  registers.registerComponentModel(DatasetModel);\n  registers.registerComponentView(DatasetView);\n}","import { cubicSubdivide } from '../core/curve.js';\nimport PathProxy from '../core/PathProxy.js';\nvar CMD = PathProxy.CMD;\nfunction aroundEqual(a, b) {\n    return Math.abs(a - b) < 1e-5;\n}\nexport function pathToBezierCurves(path) {\n    var data = path.data;\n    var len = path.len();\n    var bezierArrayGroups = [];\n    var currentSubpath;\n    var xi = 0;\n    var yi = 0;\n    var x0 = 0;\n    var y0 = 0;\n    function createNewSubpath(x, y) {\n        if (currentSubpath && currentSubpath.length > 2) {\n            bezierArrayGroups.push(currentSubpath);\n        }\n        currentSubpath = [x, y];\n    }\n    function addLine(x0, y0, x1, y1) {\n        if (!(aroundEqual(x0, x1) && aroundEqual(y0, y1))) {\n            currentSubpath.push(x0, y0, x1, y1, x1, y1);\n        }\n    }\n    function addArc(startAngle, endAngle, cx, cy, rx, ry) {\n        var delta = Math.abs(endAngle - startAngle);\n        var len = Math.tan(delta / 4) * 4 / 3;\n        var dir = endAngle < startAngle ? -1 : 1;\n        var c1 = Math.cos(startAngle);\n        var s1 = Math.sin(startAngle);\n        var c2 = Math.cos(endAngle);\n        var s2 = Math.sin(endAngle);\n        var x1 = c1 * rx + cx;\n        var y1 = s1 * ry + cy;\n        var x4 = c2 * rx + cx;\n        var y4 = s2 * ry + cy;\n        var hx = rx * len * dir;\n        var hy = ry * len * dir;\n        currentSubpath.push(x1 - hx * s1, y1 + hy * c1, x4 + hx * s2, y4 - hy * c2, x4, y4);\n    }\n    var x1;\n    var y1;\n    var x2;\n    var y2;\n    for (var i = 0; i < len;) {\n        var cmd = data[i++];\n        var isFirst = i === 1;\n        if (isFirst) {\n            xi = data[i];\n            yi = data[i + 1];\n            x0 = xi;\n            y0 = yi;\n            if (cmd === CMD.L || cmd === CMD.C || cmd === CMD.Q) {\n                currentSubpath = [x0, y0];\n            }\n        }\n        switch (cmd) {\n            case CMD.M:\n                xi = x0 = data[i++];\n                yi = y0 = data[i++];\n                createNewSubpath(x0, y0);\n                break;\n            case CMD.L:\n                x1 = data[i++];\n                y1 = data[i++];\n                addLine(xi, yi, x1, y1);\n                xi = x1;\n                yi = y1;\n                break;\n            case CMD.C:\n                currentSubpath.push(data[i++], data[i++], data[i++], data[i++], xi = data[i++], yi = data[i++]);\n                break;\n            case CMD.Q:\n                x1 = data[i++];\n                y1 = data[i++];\n                x2 = data[i++];\n                y2 = data[i++];\n                currentSubpath.push(xi + 2 / 3 * (x1 - xi), yi + 2 / 3 * (y1 - yi), x2 + 2 / 3 * (x1 - x2), y2 + 2 / 3 * (y1 - y2), x2, y2);\n                xi = x2;\n                yi = y2;\n                break;\n            case CMD.A:\n                var cx = data[i++];\n                var cy = data[i++];\n                var rx = data[i++];\n                var ry = data[i++];\n                var startAngle = data[i++];\n                var endAngle = data[i++] + startAngle;\n                i += 1;\n                var anticlockwise = !data[i++];\n                x1 = Math.cos(startAngle) * rx + cx;\n                y1 = Math.sin(startAngle) * ry + cy;\n                if (isFirst) {\n                    x0 = x1;\n                    y0 = y1;\n                    createNewSubpath(x0, y0);\n                }\n                else {\n                    addLine(xi, yi, x1, y1);\n                }\n                xi = Math.cos(endAngle) * rx + cx;\n                yi = Math.sin(endAngle) * ry + cy;\n                var step = (anticlockwise ? -1 : 1) * Math.PI / 2;\n                for (var angle = startAngle; anticlockwise ? angle > endAngle : angle < endAngle; angle += step) {\n                    var nextAngle = anticlockwise ? Math.max(angle + step, endAngle)\n                        : Math.min(angle + step, endAngle);\n                    addArc(angle, nextAngle, cx, cy, rx, ry);\n                }\n                break;\n            case CMD.R:\n                x0 = xi = data[i++];\n                y0 = yi = data[i++];\n                x1 = x0 + data[i++];\n                y1 = y0 + data[i++];\n                createNewSubpath(x1, y0);\n                addLine(x1, y0, x1, y1);\n                addLine(x1, y1, x0, y1);\n                addLine(x0, y1, x0, y0);\n                addLine(x0, y0, x1, y0);\n                break;\n            case CMD.Z:\n                currentSubpath && addLine(xi, yi, x0, y0);\n                xi = x0;\n                yi = y0;\n                break;\n        }\n    }\n    if (currentSubpath && currentSubpath.length > 2) {\n        bezierArrayGroups.push(currentSubpath);\n    }\n    return bezierArrayGroups;\n}\nfunction adpativeBezier(x0, y0, x1, y1, x2, y2, x3, y3, out, scale) {\n    if (aroundEqual(x0, x1) && aroundEqual(y0, y1) && aroundEqual(x2, x3) && aroundEqual(y2, y3)) {\n        out.push(x3, y3);\n        return;\n    }\n    var PIXEL_DISTANCE = 2 / scale;\n    var PIXEL_DISTANCE_SQR = PIXEL_DISTANCE * PIXEL_DISTANCE;\n    var dx = x3 - x0;\n    var dy = y3 - y0;\n    var d = Math.sqrt(dx * dx + dy * dy);\n    dx /= d;\n    dy /= d;\n    var dx1 = x1 - x0;\n    var dy1 = y1 - y0;\n    var dx2 = x2 - x3;\n    var dy2 = y2 - y3;\n    var cp1LenSqr = dx1 * dx1 + dy1 * dy1;\n    var cp2LenSqr = dx2 * dx2 + dy2 * dy2;\n    if (cp1LenSqr < PIXEL_DISTANCE_SQR && cp2LenSqr < PIXEL_DISTANCE_SQR) {\n        out.push(x3, y3);\n        return;\n    }\n    var projLen1 = dx * dx1 + dy * dy1;\n    var projLen2 = -dx * dx2 - dy * dy2;\n    var d1Sqr = cp1LenSqr - projLen1 * projLen1;\n    var d2Sqr = cp2LenSqr - projLen2 * projLen2;\n    if (d1Sqr < PIXEL_DISTANCE_SQR && projLen1 >= 0\n        && d2Sqr < PIXEL_DISTANCE_SQR && projLen2 >= 0) {\n        out.push(x3, y3);\n        return;\n    }\n    var tmpSegX = [];\n    var tmpSegY = [];\n    cubicSubdivide(x0, x1, x2, x3, 0.5, tmpSegX);\n    cubicSubdivide(y0, y1, y2, y3, 0.5, tmpSegY);\n    adpativeBezier(tmpSegX[0], tmpSegY[0], tmpSegX[1], tmpSegY[1], tmpSegX[2], tmpSegY[2], tmpSegX[3], tmpSegY[3], out, scale);\n    adpativeBezier(tmpSegX[4], tmpSegY[4], tmpSegX[5], tmpSegY[5], tmpSegX[6], tmpSegY[6], tmpSegX[7], tmpSegY[7], out, scale);\n}\nexport function pathToPolygons(path, scale) {\n    var bezierArrayGroups = pathToBezierCurves(path);\n    var polygons = [];\n    scale = scale || 1;\n    for (var i = 0; i < bezierArrayGroups.length; i++) {\n        var beziers = bezierArrayGroups[i];\n        var polygon = [];\n        var x0 = beziers[0];\n        var y0 = beziers[1];\n        polygon.push(x0, y0);\n        for (var k = 2; k < beziers.length;) {\n            var x1 = beziers[k++];\n            var y1 = beziers[k++];\n            var x2 = beziers[k++];\n            var y2 = beziers[k++];\n            var x3 = beziers[k++];\n            var y3 = beziers[k++];\n            adpativeBezier(x0, y0, x1, y1, x2, y2, x3, y3, polygon, scale);\n            x0 = x3;\n            y0 = y3;\n        }\n        polygons.push(polygon);\n    }\n    return polygons;\n}\n","import { fromPoints } from '../core/bbox.js';\nimport BoundingRect from '../core/BoundingRect.js';\nimport Point from '../core/Point.js';\nimport { map } from '../core/util.js';\nimport Polygon from '../graphic/shape/Polygon.js';\nimport Rect from '../graphic/shape/Rect.js';\nimport Sector from '../graphic/shape/Sector.js';\nimport { pathToPolygons } from './convertPath.js';\nimport { clonePath } from './path.js';\nfunction getDividingGrids(dimSize, rowDim, count) {\n    var rowSize = dimSize[rowDim];\n    var columnSize = dimSize[1 - rowDim];\n    var ratio = Math.abs(rowSize / columnSize);\n    var rowCount = Math.ceil(Math.sqrt(ratio * count));\n    var columnCount = Math.floor(count / rowCount);\n    if (columnCount === 0) {\n        columnCount = 1;\n        rowCount = count;\n    }\n    var grids = [];\n    for (var i = 0; i < rowCount; i++) {\n        grids.push(columnCount);\n    }\n    var currentCount = rowCount * columnCount;\n    var remained = count - currentCount;\n    if (remained > 0) {\n        for (var i = 0; i < remained; i++) {\n            grids[i % rowCount] += 1;\n        }\n    }\n    return grids;\n}\nfunction divideSector(sectorShape, count, outShapes) {\n    var r0 = sectorShape.r0;\n    var r = sectorShape.r;\n    var startAngle = sectorShape.startAngle;\n    var endAngle = sectorShape.endAngle;\n    var angle = Math.abs(endAngle - startAngle);\n    var arcLen = angle * r;\n    var deltaR = r - r0;\n    var isAngleRow = arcLen > Math.abs(deltaR);\n    var grids = getDividingGrids([arcLen, deltaR], isAngleRow ? 0 : 1, count);\n    var rowSize = (isAngleRow ? angle : deltaR) / grids.length;\n    for (var row = 0; row < grids.length; row++) {\n        var columnSize = (isAngleRow ? deltaR : angle) / grids[row];\n        for (var column = 0; column < grids[row]; column++) {\n            var newShape = {};\n            if (isAngleRow) {\n                newShape.startAngle = startAngle + rowSize * row;\n                newShape.endAngle = startAngle + rowSize * (row + 1);\n                newShape.r0 = r0 + columnSize * column;\n                newShape.r = r0 + columnSize * (column + 1);\n            }\n            else {\n                newShape.startAngle = startAngle + columnSize * column;\n                newShape.endAngle = startAngle + columnSize * (column + 1);\n                newShape.r0 = r0 + rowSize * row;\n                newShape.r = r0 + rowSize * (row + 1);\n            }\n            newShape.clockwise = sectorShape.clockwise;\n            newShape.cx = sectorShape.cx;\n            newShape.cy = sectorShape.cy;\n            outShapes.push(newShape);\n        }\n    }\n}\nfunction divideRect(rectShape, count, outShapes) {\n    var width = rectShape.width;\n    var height = rectShape.height;\n    var isHorizontalRow = width > height;\n    var grids = getDividingGrids([width, height], isHorizontalRow ? 0 : 1, count);\n    var rowSizeDim = isHorizontalRow ? 'width' : 'height';\n    var columnSizeDim = isHorizontalRow ? 'height' : 'width';\n    var rowDim = isHorizontalRow ? 'x' : 'y';\n    var columnDim = isHorizontalRow ? 'y' : 'x';\n    var rowSize = rectShape[rowSizeDim] / grids.length;\n    for (var row = 0; row < grids.length; row++) {\n        var columnSize = rectShape[columnSizeDim] / grids[row];\n        for (var column = 0; column < grids[row]; column++) {\n            var newShape = {};\n            newShape[rowDim] = row * rowSize;\n            newShape[columnDim] = column * columnSize;\n            newShape[rowSizeDim] = rowSize;\n            newShape[columnSizeDim] = columnSize;\n            newShape.x += rectShape.x;\n            newShape.y += rectShape.y;\n            outShapes.push(newShape);\n        }\n    }\n}\nfunction crossProduct2d(x1, y1, x2, y2) {\n    return x1 * y2 - x2 * y1;\n}\nfunction lineLineIntersect(a1x, a1y, a2x, a2y, b1x, b1y, b2x, b2y) {\n    var mx = a2x - a1x;\n    var my = a2y - a1y;\n    var nx = b2x - b1x;\n    var ny = b2y - b1y;\n    var nmCrossProduct = crossProduct2d(nx, ny, mx, my);\n    if (Math.abs(nmCrossProduct) < 1e-6) {\n        return null;\n    }\n    var b1a1x = a1x - b1x;\n    var b1a1y = a1y - b1y;\n    var p = crossProduct2d(b1a1x, b1a1y, nx, ny) / nmCrossProduct;\n    if (p < 0 || p > 1) {\n        return null;\n    }\n    return new Point(p * mx + a1x, p * my + a1y);\n}\nfunction projPtOnLine(pt, lineA, lineB) {\n    var dir = new Point();\n    Point.sub(dir, lineB, lineA);\n    dir.normalize();\n    var dir2 = new Point();\n    Point.sub(dir2, pt, lineA);\n    var len = dir2.dot(dir);\n    return len;\n}\nfunction addToPoly(poly, pt) {\n    var last = poly[poly.length - 1];\n    if (last && last[0] === pt[0] && last[1] === pt[1]) {\n        return;\n    }\n    poly.push(pt);\n}\nfunction splitPolygonByLine(points, lineA, lineB) {\n    var len = points.length;\n    var intersections = [];\n    for (var i = 0; i < len; i++) {\n        var p0 = points[i];\n        var p1 = points[(i + 1) % len];\n        var intersectionPt = lineLineIntersect(p0[0], p0[1], p1[0], p1[1], lineA.x, lineA.y, lineB.x, lineB.y);\n        if (intersectionPt) {\n            intersections.push({\n                projPt: projPtOnLine(intersectionPt, lineA, lineB),\n                pt: intersectionPt,\n                idx: i\n            });\n        }\n    }\n    if (intersections.length < 2) {\n        return [{ points: points }, { points: points }];\n    }\n    intersections.sort(function (a, b) {\n        return a.projPt - b.projPt;\n    });\n    var splitPt0 = intersections[0];\n    var splitPt1 = intersections[intersections.length - 1];\n    if (splitPt1.idx < splitPt0.idx) {\n        var tmp = splitPt0;\n        splitPt0 = splitPt1;\n        splitPt1 = tmp;\n    }\n    var splitPt0Arr = [splitPt0.pt.x, splitPt0.pt.y];\n    var splitPt1Arr = [splitPt1.pt.x, splitPt1.pt.y];\n    var newPolyA = [splitPt0Arr];\n    var newPolyB = [splitPt1Arr];\n    for (var i = splitPt0.idx + 1; i <= splitPt1.idx; i++) {\n        addToPoly(newPolyA, points[i].slice());\n    }\n    addToPoly(newPolyA, splitPt1Arr);\n    addToPoly(newPolyA, splitPt0Arr);\n    for (var i = splitPt1.idx + 1; i <= splitPt0.idx + len; i++) {\n        addToPoly(newPolyB, points[i % len].slice());\n    }\n    addToPoly(newPolyB, splitPt0Arr);\n    addToPoly(newPolyB, splitPt1Arr);\n    return [{\n            points: newPolyA\n        }, {\n            points: newPolyB\n        }];\n}\nfunction binaryDividePolygon(polygonShape) {\n    var points = polygonShape.points;\n    var min = [];\n    var max = [];\n    fromPoints(points, min, max);\n    var boundingRect = new BoundingRect(min[0], min[1], max[0] - min[0], max[1] - min[1]);\n    var width = boundingRect.width;\n    var height = boundingRect.height;\n    var x = boundingRect.x;\n    var y = boundingRect.y;\n    var pt0 = new Point();\n    var pt1 = new Point();\n    if (width > height) {\n        pt0.x = pt1.x = x + width / 2;\n        pt0.y = y;\n        pt1.y = y + height;\n    }\n    else {\n        pt0.y = pt1.y = y + height / 2;\n        pt0.x = x;\n        pt1.x = x + width;\n    }\n    return splitPolygonByLine(points, pt0, pt1);\n}\nfunction binaryDivideRecursive(divider, shape, count, out) {\n    if (count === 1) {\n        out.push(shape);\n    }\n    else {\n        var mid = Math.floor(count / 2);\n        var sub = divider(shape);\n        binaryDivideRecursive(divider, sub[0], mid, out);\n        binaryDivideRecursive(divider, sub[1], count - mid, out);\n    }\n    return out;\n}\nexport function clone(path, count) {\n    var paths = [];\n    for (var i = 0; i < count; i++) {\n        paths.push(clonePath(path));\n    }\n    return paths;\n}\nfunction copyPathProps(source, target) {\n    target.setStyle(source.style);\n    target.z = source.z;\n    target.z2 = source.z2;\n    target.zlevel = source.zlevel;\n}\nfunction polygonConvert(points) {\n    var out = [];\n    for (var i = 0; i < points.length;) {\n        out.push([points[i++], points[i++]]);\n    }\n    return out;\n}\nexport function split(path, count) {\n    var outShapes = [];\n    var shape = path.shape;\n    var OutShapeCtor;\n    switch (path.type) {\n        case 'rect':\n            divideRect(shape, count, outShapes);\n            OutShapeCtor = Rect;\n            break;\n        case 'sector':\n            divideSector(shape, count, outShapes);\n            OutShapeCtor = Sector;\n            break;\n        case 'circle':\n            divideSector({\n                r0: 0, r: shape.r, startAngle: 0, endAngle: Math.PI * 2,\n                cx: shape.cx, cy: shape.cy\n            }, count, outShapes);\n            OutShapeCtor = Sector;\n            break;\n        default:\n            var m = path.getComputedTransform();\n            var scale = m ? Math.sqrt(Math.max(m[0] * m[0] + m[1] * m[1], m[2] * m[2] + m[3] * m[3])) : 1;\n            var polygons = map(pathToPolygons(path.getUpdatedPathProxy(), scale), function (poly) { return polygonConvert(poly); });\n            var polygonCount = polygons.length;\n            if (polygonCount === 0) {\n                binaryDivideRecursive(binaryDividePolygon, {\n                    points: polygons[0]\n                }, count, outShapes);\n            }\n            else if (polygonCount === count) {\n                for (var i = 0; i < polygonCount; i++) {\n                    outShapes.push({\n                        points: polygons[i]\n                    });\n                }\n            }\n            else {\n                var totalArea_1 = 0;\n                var items = map(polygons, function (poly) {\n                    var min = [];\n                    var max = [];\n                    fromPoints(poly, min, max);\n                    var area = (max[1] - min[1]) * (max[0] - min[0]);\n                    totalArea_1 += area;\n                    return { poly: poly, area: area };\n                });\n                items.sort(function (a, b) { return b.area - a.area; });\n                var left = count;\n                for (var i = 0; i < polygonCount; i++) {\n                    var item = items[i];\n                    if (left <= 0) {\n                        break;\n                    }\n                    var selfCount = i === polygonCount - 1\n                        ? left\n                        : Math.ceil(item.area / totalArea_1 * count);\n                    if (selfCount < 0) {\n                        continue;\n                    }\n                    binaryDivideRecursive(binaryDividePolygon, {\n                        points: item.poly\n                    }, selfCount, outShapes);\n                    left -= selfCount;\n                }\n                ;\n            }\n            OutShapeCtor = Polygon;\n            break;\n    }\n    if (!OutShapeCtor) {\n        return clone(path, count);\n    }\n    var out = [];\n    for (var i = 0; i < outShapes.length; i++) {\n        var subPath = new OutShapeCtor();\n        subPath.setShape(outShapes[i]);\n        copyPathProps(path, subPath);\n        out.push(subPath);\n    }\n    return out;\n}\n","import { cubicSubdivide } from '../core/curve.js';\nimport Path from '../graphic/Path.js';\nimport { defaults, map } from '../core/util.js';\nimport { lerp } from '../core/vector.js';\nimport { clonePath } from './path.js';\nimport Transformable from '../core/Transformable.js';\nimport { split } from './dividePath.js';\nimport { pathToBezierCurves } from './convertPath.js';\nfunction alignSubpath(subpath1, subpath2) {\n    var len1 = subpath1.length;\n    var len2 = subpath2.length;\n    if (len1 === len2) {\n        return [subpath1, subpath2];\n    }\n    var tmpSegX = [];\n    var tmpSegY = [];\n    var shorterPath = len1 < len2 ? subpath1 : subpath2;\n    var shorterLen = Math.min(len1, len2);\n    var diff = Math.abs(len2 - len1) / 6;\n    var shorterBezierCount = (shorterLen - 2) / 6;\n    var eachCurveSubDivCount = Math.ceil(diff / shorterBezierCount) + 1;\n    var newSubpath = [shorterPath[0], shorterPath[1]];\n    var remained = diff;\n    for (var i = 2; i < shorterLen;) {\n        var x0 = shorterPath[i - 2];\n        var y0 = shorterPath[i - 1];\n        var x1 = shorterPath[i++];\n        var y1 = shorterPath[i++];\n        var x2 = shorterPath[i++];\n        var y2 = shorterPath[i++];\n        var x3 = shorterPath[i++];\n        var y3 = shorterPath[i++];\n        if (remained <= 0) {\n            newSubpath.push(x1, y1, x2, y2, x3, y3);\n            continue;\n        }\n        var actualSubDivCount = Math.min(remained, eachCurveSubDivCount - 1) + 1;\n        for (var k = 1; k <= actualSubDivCount; k++) {\n            var p = k / actualSubDivCount;\n            cubicSubdivide(x0, x1, x2, x3, p, tmpSegX);\n            cubicSubdivide(y0, y1, y2, y3, p, tmpSegY);\n            x0 = tmpSegX[3];\n            y0 = tmpSegY[3];\n            newSubpath.push(tmpSegX[1], tmpSegY[1], tmpSegX[2], tmpSegY[2], x0, y0);\n            x1 = tmpSegX[5];\n            y1 = tmpSegY[5];\n            x2 = tmpSegX[6];\n            y2 = tmpSegY[6];\n        }\n        remained -= actualSubDivCount - 1;\n    }\n    return shorterPath === subpath1 ? [newSubpath, subpath2] : [subpath1, newSubpath];\n}\nfunction createSubpath(lastSubpathSubpath, otherSubpath) {\n    var len = lastSubpathSubpath.length;\n    var lastX = lastSubpathSubpath[len - 2];\n    var lastY = lastSubpathSubpath[len - 1];\n    var newSubpath = [];\n    for (var i = 0; i < otherSubpath.length;) {\n        newSubpath[i++] = lastX;\n        newSubpath[i++] = lastY;\n    }\n    return newSubpath;\n}\nexport function alignBezierCurves(array1, array2) {\n    var _a;\n    var lastSubpath1;\n    var lastSubpath2;\n    var newArray1 = [];\n    var newArray2 = [];\n    for (var i = 0; i < Math.max(array1.length, array2.length); i++) {\n        var subpath1 = array1[i];\n        var subpath2 = array2[i];\n        var newSubpath1 = void 0;\n        var newSubpath2 = void 0;\n        if (!subpath1) {\n            newSubpath1 = createSubpath(lastSubpath1 || subpath2, subpath2);\n            newSubpath2 = subpath2;\n        }\n        else if (!subpath2) {\n            newSubpath2 = createSubpath(lastSubpath2 || subpath1, subpath1);\n            newSubpath1 = subpath1;\n        }\n        else {\n            _a = alignSubpath(subpath1, subpath2), newSubpath1 = _a[0], newSubpath2 = _a[1];\n            lastSubpath1 = newSubpath1;\n            lastSubpath2 = newSubpath2;\n        }\n        newArray1.push(newSubpath1);\n        newArray2.push(newSubpath2);\n    }\n    return [newArray1, newArray2];\n}\nexport function centroid(array) {\n    var signedArea = 0;\n    var cx = 0;\n    var cy = 0;\n    var len = array.length;\n    for (var i = 0, j = len - 2; i < len; j = i, i += 2) {\n        var x0 = array[j];\n        var y0 = array[j + 1];\n        var x1 = array[i];\n        var y1 = array[i + 1];\n        var a = x0 * y1 - x1 * y0;\n        signedArea += a;\n        cx += (x0 + x1) * a;\n        cy += (y0 + y1) * a;\n    }\n    if (signedArea === 0) {\n        return [array[0] || 0, array[1] || 0];\n    }\n    return [cx / signedArea / 3, cy / signedArea / 3, signedArea];\n}\nfunction findBestRingOffset(fromSubBeziers, toSubBeziers, fromCp, toCp) {\n    var bezierCount = (fromSubBeziers.length - 2) / 6;\n    var bestScore = Infinity;\n    var bestOffset = 0;\n    var len = fromSubBeziers.length;\n    var len2 = len - 2;\n    for (var offset = 0; offset < bezierCount; offset++) {\n        var cursorOffset = offset * 6;\n        var score = 0;\n        for (var k = 0; k < len; k += 2) {\n            var idx = k === 0 ? cursorOffset : ((cursorOffset + k - 2) % len2 + 2);\n            var x0 = fromSubBeziers[idx] - fromCp[0];\n            var y0 = fromSubBeziers[idx + 1] - fromCp[1];\n            var x1 = toSubBeziers[k] - toCp[0];\n            var y1 = toSubBeziers[k + 1] - toCp[1];\n            var dx = x1 - x0;\n            var dy = y1 - y0;\n            score += dx * dx + dy * dy;\n        }\n        if (score < bestScore) {\n            bestScore = score;\n            bestOffset = offset;\n        }\n    }\n    return bestOffset;\n}\nfunction reverse(array) {\n    var newArr = [];\n    var len = array.length;\n    for (var i = 0; i < len; i += 2) {\n        newArr[i] = array[len - i - 2];\n        newArr[i + 1] = array[len - i - 1];\n    }\n    return newArr;\n}\nfunction findBestMorphingRotation(fromArr, toArr, searchAngleIteration, searchAngleRange) {\n    var result = [];\n    var fromNeedsReverse;\n    for (var i = 0; i < fromArr.length; i++) {\n        var fromSubpathBezier = fromArr[i];\n        var toSubpathBezier = toArr[i];\n        var fromCp = centroid(fromSubpathBezier);\n        var toCp = centroid(toSubpathBezier);\n        if (fromNeedsReverse == null) {\n            fromNeedsReverse = fromCp[2] < 0 !== toCp[2] < 0;\n        }\n        var newFromSubpathBezier = [];\n        var newToSubpathBezier = [];\n        var bestAngle = 0;\n        var bestScore = Infinity;\n        var tmpArr = [];\n        var len = fromSubpathBezier.length;\n        if (fromNeedsReverse) {\n            fromSubpathBezier = reverse(fromSubpathBezier);\n        }\n        var offset = findBestRingOffset(fromSubpathBezier, toSubpathBezier, fromCp, toCp) * 6;\n        var len2 = len - 2;\n        for (var k = 0; k < len2; k += 2) {\n            var idx = (offset + k) % len2 + 2;\n            newFromSubpathBezier[k + 2] = fromSubpathBezier[idx] - fromCp[0];\n            newFromSubpathBezier[k + 3] = fromSubpathBezier[idx + 1] - fromCp[1];\n        }\n        newFromSubpathBezier[0] = fromSubpathBezier[offset] - fromCp[0];\n        newFromSubpathBezier[1] = fromSubpathBezier[offset + 1] - fromCp[1];\n        if (searchAngleIteration > 0) {\n            var step = searchAngleRange / searchAngleIteration;\n            for (var angle = -searchAngleRange / 2; angle <= searchAngleRange / 2; angle += step) {\n                var sa = Math.sin(angle);\n                var ca = Math.cos(angle);\n                var score = 0;\n                for (var k = 0; k < fromSubpathBezier.length; k += 2) {\n                    var x0 = newFromSubpathBezier[k];\n                    var y0 = newFromSubpathBezier[k + 1];\n                    var x1 = toSubpathBezier[k] - toCp[0];\n                    var y1 = toSubpathBezier[k + 1] - toCp[1];\n                    var newX1 = x1 * ca - y1 * sa;\n                    var newY1 = x1 * sa + y1 * ca;\n                    tmpArr[k] = newX1;\n                    tmpArr[k + 1] = newY1;\n                    var dx = newX1 - x0;\n                    var dy = newY1 - y0;\n                    score += dx * dx + dy * dy;\n                }\n                if (score < bestScore) {\n                    bestScore = score;\n                    bestAngle = angle;\n                    for (var m = 0; m < tmpArr.length; m++) {\n                        newToSubpathBezier[m] = tmpArr[m];\n                    }\n                }\n            }\n        }\n        else {\n            for (var i_1 = 0; i_1 < len; i_1 += 2) {\n                newToSubpathBezier[i_1] = toSubpathBezier[i_1] - toCp[0];\n                newToSubpathBezier[i_1 + 1] = toSubpathBezier[i_1 + 1] - toCp[1];\n            }\n        }\n        result.push({\n            from: newFromSubpathBezier,\n            to: newToSubpathBezier,\n            fromCp: fromCp,\n            toCp: toCp,\n            rotation: -bestAngle\n        });\n    }\n    return result;\n}\nexport function isCombineMorphing(path) {\n    return path.__isCombineMorphing;\n}\nexport function isMorphing(el) {\n    return el.__morphT >= 0;\n}\nvar SAVED_METHOD_PREFIX = '__mOriginal_';\nfunction saveAndModifyMethod(obj, methodName, modifiers) {\n    var savedMethodName = SAVED_METHOD_PREFIX + methodName;\n    var originalMethod = obj[savedMethodName] || obj[methodName];\n    if (!obj[savedMethodName]) {\n        obj[savedMethodName] = obj[methodName];\n    }\n    var replace = modifiers.replace;\n    var after = modifiers.after;\n    var before = modifiers.before;\n    obj[methodName] = function () {\n        var args = arguments;\n        var res;\n        before && before.apply(this, args);\n        if (replace) {\n            res = replace.apply(this, args);\n        }\n        else {\n            res = originalMethod.apply(this, args);\n        }\n        after && after.apply(this, args);\n        return res;\n    };\n}\nfunction restoreMethod(obj, methodName) {\n    var savedMethodName = SAVED_METHOD_PREFIX + methodName;\n    if (obj[savedMethodName]) {\n        obj[methodName] = obj[savedMethodName];\n        obj[savedMethodName] = null;\n    }\n}\nfunction applyTransformOnBeziers(bezierCurves, mm) {\n    for (var i = 0; i < bezierCurves.length; i++) {\n        var subBeziers = bezierCurves[i];\n        for (var k = 0; k < subBeziers.length;) {\n            var x = subBeziers[k];\n            var y = subBeziers[k + 1];\n            subBeziers[k++] = mm[0] * x + mm[2] * y + mm[4];\n            subBeziers[k++] = mm[1] * x + mm[3] * y + mm[5];\n        }\n    }\n}\nfunction prepareMorphPath(fromPath, toPath) {\n    var fromPathProxy = fromPath.getUpdatedPathProxy();\n    var toPathProxy = toPath.getUpdatedPathProxy();\n    var _a = alignBezierCurves(pathToBezierCurves(fromPathProxy), pathToBezierCurves(toPathProxy)), fromBezierCurves = _a[0], toBezierCurves = _a[1];\n    var fromPathTransform = fromPath.getComputedTransform();\n    var toPathTransform = toPath.getComputedTransform();\n    function updateIdentityTransform() {\n        this.transform = null;\n    }\n    fromPathTransform && applyTransformOnBeziers(fromBezierCurves, fromPathTransform);\n    toPathTransform && applyTransformOnBeziers(toBezierCurves, toPathTransform);\n    saveAndModifyMethod(toPath, 'updateTransform', { replace: updateIdentityTransform });\n    toPath.transform = null;\n    var morphingData = findBestMorphingRotation(fromBezierCurves, toBezierCurves, 10, Math.PI);\n    var tmpArr = [];\n    saveAndModifyMethod(toPath, 'buildPath', { replace: function (path) {\n            var t = toPath.__morphT;\n            var onet = 1 - t;\n            var newCp = [];\n            for (var i = 0; i < morphingData.length; i++) {\n                var item = morphingData[i];\n                var from = item.from;\n                var to = item.to;\n                var angle = item.rotation * t;\n                var fromCp = item.fromCp;\n                var toCp = item.toCp;\n                var sa = Math.sin(angle);\n                var ca = Math.cos(angle);\n                lerp(newCp, fromCp, toCp, t);\n                for (var m = 0; m < from.length; m += 2) {\n                    var x0_1 = from[m];\n                    var y0_1 = from[m + 1];\n                    var x1 = to[m];\n                    var y1 = to[m + 1];\n                    var x = x0_1 * onet + x1 * t;\n                    var y = y0_1 * onet + y1 * t;\n                    tmpArr[m] = (x * ca - y * sa) + newCp[0];\n                    tmpArr[m + 1] = (x * sa + y * ca) + newCp[1];\n                }\n                var x0 = tmpArr[0];\n                var y0 = tmpArr[1];\n                path.moveTo(x0, y0);\n                for (var m = 2; m < from.length;) {\n                    var x1 = tmpArr[m++];\n                    var y1 = tmpArr[m++];\n                    var x2 = tmpArr[m++];\n                    var y2 = tmpArr[m++];\n                    var x3 = tmpArr[m++];\n                    var y3 = tmpArr[m++];\n                    if (x0 === x1 && y0 === y1 && x2 === x3 && y2 === y3) {\n                        path.lineTo(x3, y3);\n                    }\n                    else {\n                        path.bezierCurveTo(x1, y1, x2, y2, x3, y3);\n                    }\n                    x0 = x3;\n                    y0 = y3;\n                }\n            }\n        } });\n}\nexport function morphPath(fromPath, toPath, animationOpts) {\n    if (!fromPath || !toPath) {\n        return toPath;\n    }\n    var oldDone = animationOpts.done;\n    var oldDuring = animationOpts.during;\n    prepareMorphPath(fromPath, toPath);\n    toPath.__morphT = 0;\n    function restoreToPath() {\n        restoreMethod(toPath, 'buildPath');\n        restoreMethod(toPath, 'updateTransform');\n        toPath.__morphT = -1;\n        toPath.createPathProxy();\n        toPath.dirtyShape();\n    }\n    toPath.animateTo({\n        __morphT: 1\n    }, defaults({\n        during: function (p) {\n            toPath.dirtyShape();\n            oldDuring && oldDuring(p);\n        },\n        done: function () {\n            restoreToPath();\n            oldDone && oldDone();\n        }\n    }, animationOpts));\n    return toPath;\n}\nfunction hilbert(x, y, minX, minY, maxX, maxY) {\n    var bits = 16;\n    x = (maxX === minX) ? 0 : Math.round(32767 * (x - minX) / (maxX - minX));\n    y = (maxY === minY) ? 0 : Math.round(32767 * (y - minY) / (maxY - minY));\n    var d = 0;\n    var tmp;\n    for (var s = (1 << bits) / 2; s > 0; s /= 2) {\n        var rx = 0;\n        var ry = 0;\n        if ((x & s) > 0) {\n            rx = 1;\n        }\n        if ((y & s) > 0) {\n            ry = 1;\n        }\n        d += s * s * ((3 * rx) ^ ry);\n        if (ry === 0) {\n            if (rx === 1) {\n                x = s - 1 - x;\n                y = s - 1 - y;\n            }\n            tmp = x;\n            x = y;\n            y = tmp;\n        }\n    }\n    return d;\n}\nfunction sortPaths(pathList) {\n    var xMin = Infinity;\n    var yMin = Infinity;\n    var xMax = -Infinity;\n    var yMax = -Infinity;\n    var cps = map(pathList, function (path) {\n        var rect = path.getBoundingRect();\n        var m = path.getComputedTransform();\n        var x = rect.x + rect.width / 2 + (m ? m[4] : 0);\n        var y = rect.y + rect.height / 2 + (m ? m[5] : 0);\n        xMin = Math.min(x, xMin);\n        yMin = Math.min(y, yMin);\n        xMax = Math.max(x, xMax);\n        yMax = Math.max(y, yMax);\n        return [x, y];\n    });\n    var items = map(cps, function (cp, idx) {\n        return {\n            cp: cp,\n            z: hilbert(cp[0], cp[1], xMin, yMin, xMax, yMax),\n            path: pathList[idx]\n        };\n    });\n    return items.sort(function (a, b) { return a.z - b.z; }).map(function (item) { return item.path; });\n}\n;\nfunction defaultDividePath(param) {\n    return split(param.path, param.count);\n}\nfunction createEmptyReturn() {\n    return {\n        fromIndividuals: [],\n        toIndividuals: [],\n        count: 0\n    };\n}\nexport function combineMorph(fromList, toPath, animationOpts) {\n    var fromPathList = [];\n    function addFromPath(fromList) {\n        for (var i = 0; i < fromList.length; i++) {\n            var from = fromList[i];\n            if (isCombineMorphing(from)) {\n                addFromPath(from.childrenRef());\n            }\n            else if (from instanceof Path) {\n                fromPathList.push(from);\n            }\n        }\n    }\n    addFromPath(fromList);\n    var separateCount = fromPathList.length;\n    if (!separateCount) {\n        return createEmptyReturn();\n    }\n    var dividePath = animationOpts.dividePath || defaultDividePath;\n    var toSubPathList = dividePath({\n        path: toPath, count: separateCount\n    });\n    if (toSubPathList.length !== separateCount) {\n        console.error('Invalid morphing: unmatched splitted path');\n        return createEmptyReturn();\n    }\n    fromPathList = sortPaths(fromPathList);\n    toSubPathList = sortPaths(toSubPathList);\n    var oldDone = animationOpts.done;\n    var oldDuring = animationOpts.during;\n    var individualDelay = animationOpts.individualDelay;\n    var identityTransform = new Transformable();\n    for (var i = 0; i < separateCount; i++) {\n        var from = fromPathList[i];\n        var to = toSubPathList[i];\n        to.parent = toPath;\n        to.copyTransform(identityTransform);\n        if (!individualDelay) {\n            prepareMorphPath(from, to);\n        }\n    }\n    toPath.__isCombineMorphing = true;\n    toPath.childrenRef = function () {\n        return toSubPathList;\n    };\n    function addToSubPathListToZr(zr) {\n        for (var i = 0; i < toSubPathList.length; i++) {\n            toSubPathList[i].addSelfToZr(zr);\n        }\n    }\n    saveAndModifyMethod(toPath, 'addSelfToZr', {\n        after: function (zr) {\n            addToSubPathListToZr(zr);\n        }\n    });\n    saveAndModifyMethod(toPath, 'removeSelfFromZr', {\n        after: function (zr) {\n            for (var i = 0; i < toSubPathList.length; i++) {\n                toSubPathList[i].removeSelfFromZr(zr);\n            }\n        }\n    });\n    function restoreToPath() {\n        toPath.__isCombineMorphing = false;\n        toPath.__morphT = -1;\n        toPath.childrenRef = null;\n        restoreMethod(toPath, 'addSelfToZr');\n        restoreMethod(toPath, 'removeSelfFromZr');\n    }\n    var toLen = toSubPathList.length;\n    if (individualDelay) {\n        var animating_1 = toLen;\n        var eachDone = function () {\n            animating_1--;\n            if (animating_1 === 0) {\n                restoreToPath();\n                oldDone && oldDone();\n            }\n        };\n        for (var i = 0; i < toLen; i++) {\n            var indivdualAnimationOpts = individualDelay ? defaults({\n                delay: (animationOpts.delay || 0) + individualDelay(i, toLen, fromPathList[i], toSubPathList[i]),\n                done: eachDone\n            }, animationOpts) : animationOpts;\n            morphPath(fromPathList[i], toSubPathList[i], indivdualAnimationOpts);\n        }\n    }\n    else {\n        toPath.__morphT = 0;\n        toPath.animateTo({\n            __morphT: 1\n        }, defaults({\n            during: function (p) {\n                for (var i = 0; i < toLen; i++) {\n                    var child = toSubPathList[i];\n                    child.__morphT = toPath.__morphT;\n                    child.dirtyShape();\n                }\n                oldDuring && oldDuring(p);\n            },\n            done: function () {\n                restoreToPath();\n                for (var i = 0; i < fromList.length; i++) {\n                    restoreMethod(fromList[i], 'updateTransform');\n                }\n                oldDone && oldDone();\n            }\n        }, animationOpts));\n    }\n    if (toPath.__zr) {\n        addToSubPathListToZr(toPath.__zr);\n    }\n    return {\n        fromIndividuals: fromPathList,\n        toIndividuals: toSubPathList,\n        count: toLen\n    };\n}\nexport function separateMorph(fromPath, toPathList, animationOpts) {\n    var toLen = toPathList.length;\n    var fromPathList = [];\n    var dividePath = animationOpts.dividePath || defaultDividePath;\n    function addFromPath(fromList) {\n        for (var i = 0; i < fromList.length; i++) {\n            var from = fromList[i];\n            if (isCombineMorphing(from)) {\n                addFromPath(from.childrenRef());\n            }\n            else if (from instanceof Path) {\n                fromPathList.push(from);\n            }\n        }\n    }\n    if (isCombineMorphing(fromPath)) {\n        addFromPath(fromPath.childrenRef());\n        var fromLen = fromPathList.length;\n        if (fromLen < toLen) {\n            var k = 0;\n            for (var i = fromLen; i < toLen; i++) {\n                fromPathList.push(clonePath(fromPathList[k++ % fromLen]));\n            }\n        }\n        fromPathList.length = toLen;\n    }\n    else {\n        fromPathList = dividePath({ path: fromPath, count: toLen });\n        var fromPathTransform = fromPath.getComputedTransform();\n        for (var i = 0; i < fromPathList.length; i++) {\n            fromPathList[i].setLocalTransform(fromPathTransform);\n        }\n        if (fromPathList.length !== toLen) {\n            console.error('Invalid morphing: unmatched splitted path');\n            return createEmptyReturn();\n        }\n    }\n    fromPathList = sortPaths(fromPathList);\n    toPathList = sortPaths(toPathList);\n    var individualDelay = animationOpts.individualDelay;\n    for (var i = 0; i < toLen; i++) {\n        var indivdualAnimationOpts = individualDelay ? defaults({\n            delay: (animationOpts.delay || 0) + individualDelay(i, toLen, fromPathList[i], toPathList[i])\n        }, animationOpts) : animationOpts;\n        morphPath(fromPathList[i], toPathList[i], indivdualAnimationOpts);\n    }\n    return {\n        fromIndividuals: fromPathList,\n        toIndividuals: toPathList,\n        count: toPathList.length\n    };\n}\nexport { split as defaultDividePath };\n","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { separateMorph, combineMorph, morphPath, isCombineMorphing } from 'zrender/lib/tool/morphPath.js';\nimport { Path } from '../util/graphic.js';\nimport { defaults, isArray } from 'zrender/lib/core/util.js';\nimport { getAnimationConfig } from './basicTransition.js';\nimport { clonePath } from 'zrender/lib/tool/path.js';\n\nfunction isMultiple(elements) {\n  return isArray(elements[0]);\n}\n\nfunction prepareMorphBatches(one, many) {\n  var batches = [];\n  var batchCount = one.length;\n\n  for (var i = 0; i < batchCount; i++) {\n    batches.push({\n      one: one[i],\n      many: []\n    });\n  }\n\n  for (var i = 0; i < many.length; i++) {\n    var len = many[i].length;\n    var k = void 0;\n\n    for (k = 0; k < len; k++) {\n      batches[k % batchCount].many.push(many[i][k]);\n    }\n  }\n\n  var off = 0; // If one has more paths than each one of many. average them.\n\n  for (var i = batchCount - 1; i >= 0; i--) {\n    if (!batches[i].many.length) {\n      var moveFrom = batches[off].many;\n\n      if (moveFrom.length <= 1) {\n        // Not enough\n        // Start from the first one.\n        if (off) {\n          off = 0;\n        } else {\n          return batches;\n        }\n      }\n\n      var len = moveFrom.length;\n      var mid = Math.ceil(len / 2);\n      batches[i].many = moveFrom.slice(mid, len);\n      batches[off].many = moveFrom.slice(0, mid);\n      off++;\n    }\n  }\n\n  return batches;\n}\n\nvar pathDividers = {\n  clone: function (params) {\n    var ret = []; // Fitting the alpha\n\n    var approxOpacity = 1 - Math.pow(1 - params.path.style.opacity, 1 / params.count);\n\n    for (var i = 0; i < params.count; i++) {\n      var cloned = clonePath(params.path);\n      cloned.setStyle('opacity', approxOpacity);\n      ret.push(cloned);\n    }\n\n    return ret;\n  },\n  // Use the default divider\n  split: null\n};\nexport function applyMorphAnimation(from, to, divideShape, seriesModel, dataIndex, animateOtherProps) {\n  if (!from.length || !to.length) {\n    return;\n  }\n\n  var updateAnimationCfg = getAnimationConfig('update', seriesModel, dataIndex);\n\n  if (!(updateAnimationCfg && updateAnimationCfg.duration > 0)) {\n    return;\n  }\n\n  var animationDelay = seriesModel.getModel('universalTransition').get('delay');\n  var animationCfg = Object.assign({\n    // Need to setToFinal so the further calculation based on the style can be correct.\n    // Like emphasis color.\n    setToFinal: true\n  }, updateAnimationCfg);\n  var many;\n  var one;\n\n  if (isMultiple(from)) {\n    // manyToOne\n    many = from;\n    one = to;\n  }\n\n  if (isMultiple(to)) {\n    // oneToMany\n    many = to;\n    one = from;\n  }\n\n  function morphOneBatch(batch, fromIsMany, animateIndex, animateCount, forceManyOne) {\n    var batchMany = batch.many;\n    var batchOne = batch.one;\n\n    if (batchMany.length === 1 && !forceManyOne) {\n      // Is one to one\n      var batchFrom = fromIsMany ? batchMany[0] : batchOne;\n      var batchTo = fromIsMany ? batchOne : batchMany[0];\n\n      if (isCombineMorphing(batchFrom)) {\n        // Keep doing combine animation.\n        morphOneBatch({\n          many: [batchFrom],\n          one: batchTo\n        }, true, animateIndex, animateCount, true);\n      } else {\n        var individualAnimationCfg = animationDelay ? defaults({\n          delay: animationDelay(animateIndex, animateCount)\n        }, animationCfg) : animationCfg;\n        morphPath(batchFrom, batchTo, individualAnimationCfg);\n        animateOtherProps(batchFrom, batchTo, batchFrom, batchTo, individualAnimationCfg);\n      }\n    } else {\n      var separateAnimationCfg = defaults({\n        dividePath: pathDividers[divideShape],\n        individualDelay: animationDelay && function (idx, count, fromPath, toPath) {\n          return animationDelay(idx + animateIndex, animateCount);\n        }\n      }, animationCfg);\n\n      var _a = fromIsMany ? combineMorph(batchMany, batchOne, separateAnimationCfg) : separateMorph(batchOne, batchMany, separateAnimationCfg),\n          fromIndividuals = _a.fromIndividuals,\n          toIndividuals = _a.toIndividuals;\n\n      var count = fromIndividuals.length;\n\n      for (var k = 0; k < count; k++) {\n        var individualAnimationCfg = animationDelay ? defaults({\n          delay: animationDelay(k, count)\n        }, animationCfg) : animationCfg;\n        animateOtherProps(fromIndividuals[k], toIndividuals[k], fromIsMany ? batchMany[k] : batch.one, fromIsMany ? batch.one : batchMany[k], individualAnimationCfg);\n      }\n    }\n  }\n\n  var fromIsMany = many ? many === from // Is one to one. If the path number not match. also needs do merge and separate morphing.\n  : from.length > to.length;\n  var morphBatches = many ? prepareMorphBatches(one, many) : prepareMorphBatches(fromIsMany ? to : from, [fromIsMany ? from : to]);\n  var animateCount = 0;\n\n  for (var i = 0; i < morphBatches.length; i++) {\n    animateCount += morphBatches[i].many.length;\n  }\n\n  var animateIndex = 0;\n\n  for (var i = 0; i < morphBatches.length; i++) {\n    morphOneBatch(morphBatches[i], fromIsMany, animateIndex, animateCount);\n    animateIndex += morphBatches[i].many.length;\n  }\n}\nexport function getPathList(elements) {\n  if (!elements) {\n    return [];\n  }\n\n  if (isArray(elements)) {\n    var pathList_1 = [];\n\n    for (var i = 0; i < elements.length; i++) {\n      pathList_1.push(getPathList(elements[i]));\n    }\n\n    return pathList_1;\n  }\n\n  var pathList = [];\n  elements.traverse(function (el) {\n    if (el instanceof Path && !el.disableMorphing && !el.invisible && !el.ignore) {\n      pathList.push(el);\n    }\n  });\n  return pathList;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\n// Universal transitions that can animate between any shapes(series) and any properties in any amounts.\nimport { SERIES_UNIVERSAL_TRANSITION_PROP } from '../model/Series.js';\nimport { createHashMap, each, map, filter, isArray, extend } from 'zrender/lib/core/util.js';\nimport { applyMorphAnimation, getPathList } from './morphTransitionHelper.js';\nimport Path from 'zrender/lib/graphic/Path.js';\nimport { initProps } from '../util/graphic.js';\nimport DataDiffer from '../data/DataDiffer.js';\nimport { makeInner, normalizeToArray } from '../util/model.js';\nimport { warn } from '../util/log.js';\nimport { getAnimationConfig, getOldStyle } from './basicTransition.js';\nimport Displayable from 'zrender/lib/graphic/Displayable.js';\nvar DATA_COUNT_THRESHOLD = 1e4;\n;\nvar getUniversalTransitionGlobalStore = makeInner();\n\nfunction getGroupIdDimension(data) {\n  var dimensions = data.dimensions;\n\n  for (var i = 0; i < dimensions.length; i++) {\n    var dimInfo = data.getDimensionInfo(dimensions[i]);\n\n    if (dimInfo && dimInfo.otherDims.itemGroupId === 0) {\n      return dimensions[i];\n    }\n  }\n}\n\nfunction flattenDataDiffItems(list) {\n  var items = [];\n  each(list, function (seriesInfo) {\n    var data = seriesInfo.data;\n\n    if (data.count() > DATA_COUNT_THRESHOLD) {\n      if (process.env.NODE_ENV !== 'production') {\n        warn('Universal transition is disabled on large data > 10k.');\n      }\n\n      return;\n    }\n\n    var indices = data.getIndices();\n    var groupDim = getGroupIdDimension(data);\n\n    for (var dataIndex = 0; dataIndex < indices.length; dataIndex++) {\n      items.push({\n        dataGroupId: seriesInfo.dataGroupId,\n        data: data,\n        dim: seriesInfo.dim || groupDim,\n        divide: seriesInfo.divide,\n        dataIndex: dataIndex\n      });\n    }\n  });\n  return items;\n}\n\nfunction fadeInElement(newEl, newSeries, newIndex) {\n  newEl.traverse(function (el) {\n    if (el instanceof Path) {\n      // TODO use fade in animation for target element.\n      initProps(el, {\n        style: {\n          opacity: 0\n        }\n      }, newSeries, {\n        dataIndex: newIndex,\n        isFrom: true\n      });\n    }\n  });\n}\n\nfunction removeEl(el) {\n  if (el.parent) {\n    // Bake parent transform to element.\n    // So it can still have proper transform to transition after it's removed.\n    var computedTransform = el.getComputedTransform();\n    el.setLocalTransform(computedTransform);\n    el.parent.remove(el);\n  }\n}\n\nfunction stopAnimation(el) {\n  el.stopAnimation();\n\n  if (el.isGroup) {\n    el.traverse(function (child) {\n      child.stopAnimation();\n    });\n  }\n}\n\nfunction animateElementStyles(el, dataIndex, seriesModel) {\n  var animationConfig = getAnimationConfig('update', seriesModel, dataIndex);\n  animationConfig && el.traverse(function (child) {\n    if (child instanceof Displayable) {\n      var oldStyle = getOldStyle(child);\n\n      if (oldStyle) {\n        child.animateFrom({\n          style: oldStyle\n        }, animationConfig);\n      }\n    }\n  });\n}\n\nfunction isAllIdSame(oldDiffItems, newDiffItems) {\n  var len = oldDiffItems.length;\n\n  if (len !== newDiffItems.length) {\n    return false;\n  }\n\n  for (var i = 0; i < len; i++) {\n    var oldItem = oldDiffItems[i];\n    var newItem = newDiffItems[i];\n\n    if (oldItem.data.getId(oldItem.dataIndex) !== newItem.data.getId(newItem.dataIndex)) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction transitionBetween(oldList, newList, api) {\n  var oldDiffItems = flattenDataDiffItems(oldList);\n  var newDiffItems = flattenDataDiffItems(newList);\n\n  function updateMorphingPathProps(from, to, rawFrom, rawTo, animationCfg) {\n    if (rawFrom || from) {\n      to.animateFrom({\n        style: rawFrom && rawFrom !== from ? // dividingMethod like clone may override the style(opacity)\n        // So extend it to raw style.\n        extend(extend({}, rawFrom.style), from.style) : from.style\n      }, animationCfg);\n    }\n  }\n\n  function findKeyDim(items) {\n    for (var i = 0; i < items.length; i++) {\n      if (items[i].dim) {\n        return items[i].dim;\n      }\n    }\n  }\n\n  var oldKeyDim = findKeyDim(oldDiffItems);\n  var newKeyDim = findKeyDim(newDiffItems);\n  var hasMorphAnimation = false;\n\n  function createKeyGetter(isOld, onlyGetId) {\n    return function (diffItem) {\n      var data = diffItem.data;\n      var dataIndex = diffItem.dataIndex; // TODO if specified dim\n\n      if (onlyGetId) {\n        return data.getId(dataIndex);\n      } // Use group id as transition key by default.\n      // So we can achieve multiple to multiple animation like drilldown / up naturally.\n      // If group id not exits. Use id instead. If so, only one to one transition will be applied.\n\n\n      var dataGroupId = diffItem.dataGroupId; // If specified key dimension(itemGroupId by default). Use this same dimension from other data.\n      // PENDING: If only use key dimension of newData.\n\n      var keyDim = isOld ? oldKeyDim || newKeyDim : newKeyDim || oldKeyDim;\n      var dimInfo = keyDim && data.getDimensionInfo(keyDim);\n      var dimOrdinalMeta = dimInfo && dimInfo.ordinalMeta;\n\n      if (dimInfo) {\n        // Get from encode.itemGroupId.\n        var key = data.get(dimInfo.name, dataIndex);\n\n        if (dimOrdinalMeta) {\n          return dimOrdinalMeta.categories[key] || key + '';\n        }\n\n        return key + '';\n      } // Get groupId from raw item. { groupId: '' }\n\n\n      var itemVal = data.getRawDataItem(dataIndex);\n\n      if (itemVal && itemVal.groupId) {\n        return itemVal.groupId + '';\n      }\n\n      return dataGroupId || data.getId(dataIndex);\n    };\n  } // Use id if it's very likely to be an one to one animation\n  // It's more robust than groupId\n  // TODO Check if key dimension is specified.\n\n\n  var useId = isAllIdSame(oldDiffItems, newDiffItems);\n  var isElementStillInChart = {};\n\n  if (!useId) {\n    // We may have different diff strategy with basicTransition if we use other dimension as key.\n    // If so, we can't simply check if oldEl is same with newEl. We need a map to check if oldEl is still being used in the new chart.\n    // We can't use the elements that already being morphed. Let it keep it's original basic transition.\n    for (var i = 0; i < newDiffItems.length; i++) {\n      var newItem = newDiffItems[i];\n      var el = newItem.data.getItemGraphicEl(newItem.dataIndex);\n\n      if (el) {\n        isElementStillInChart[el.id] = true;\n      }\n    }\n  }\n\n  function updateOneToOne(newIndex, oldIndex) {\n    var oldItem = oldDiffItems[oldIndex];\n    var newItem = newDiffItems[newIndex];\n    var newSeries = newItem.data.hostModel; // TODO Mark this elements is morphed and don't morph them anymore\n\n    var oldEl = oldItem.data.getItemGraphicEl(oldItem.dataIndex);\n    var newEl = newItem.data.getItemGraphicEl(newItem.dataIndex); // Can't handle same elements.\n\n    if (oldEl === newEl) {\n      newEl && animateElementStyles(newEl, newItem.dataIndex, newSeries);\n      return;\n    }\n\n    if ( // We can't use the elements that already being morphed\n    oldEl && isElementStillInChart[oldEl.id]) {\n      return;\n    }\n\n    if (newEl) {\n      // TODO: If keep animating the group in case\n      // some of the elements don't want to be morphed.\n      // TODO Label?\n      stopAnimation(newEl);\n\n      if (oldEl) {\n        stopAnimation(oldEl); // If old element is doing leaving animation. stop it and remove it immediately.\n\n        removeEl(oldEl);\n        hasMorphAnimation = true;\n        applyMorphAnimation(getPathList(oldEl), getPathList(newEl), newItem.divide, newSeries, newIndex, updateMorphingPathProps);\n      } else {\n        fadeInElement(newEl, newSeries, newIndex);\n      }\n    } // else keep oldEl leaving animation.\n\n  }\n\n  new DataDiffer(oldDiffItems, newDiffItems, createKeyGetter(true, useId), createKeyGetter(false, useId), null, 'multiple').update(updateOneToOne).updateManyToOne(function (newIndex, oldIndices) {\n    var newItem = newDiffItems[newIndex];\n    var newData = newItem.data;\n    var newSeries = newData.hostModel;\n    var newEl = newData.getItemGraphicEl(newItem.dataIndex);\n    var oldElsList = filter(map(oldIndices, function (idx) {\n      return oldDiffItems[idx].data.getItemGraphicEl(oldDiffItems[idx].dataIndex);\n    }), function (oldEl) {\n      return oldEl && oldEl !== newEl && !isElementStillInChart[oldEl.id];\n    });\n\n    if (newEl) {\n      stopAnimation(newEl);\n\n      if (oldElsList.length) {\n        // If old element is doing leaving animation. stop it and remove it immediately.\n        each(oldElsList, function (oldEl) {\n          stopAnimation(oldEl);\n          removeEl(oldEl);\n        });\n        hasMorphAnimation = true;\n        applyMorphAnimation(getPathList(oldElsList), getPathList(newEl), newItem.divide, newSeries, newIndex, updateMorphingPathProps);\n      } else {\n        fadeInElement(newEl, newSeries, newItem.dataIndex);\n      }\n    } // else keep oldEl leaving animation.\n\n  }).updateOneToMany(function (newIndices, oldIndex) {\n    var oldItem = oldDiffItems[oldIndex];\n    var oldEl = oldItem.data.getItemGraphicEl(oldItem.dataIndex); // We can't use the elements that already being morphed\n\n    if (oldEl && isElementStillInChart[oldEl.id]) {\n      return;\n    }\n\n    var newElsList = filter(map(newIndices, function (idx) {\n      return newDiffItems[idx].data.getItemGraphicEl(newDiffItems[idx].dataIndex);\n    }), function (el) {\n      return el && el !== oldEl;\n    });\n    var newSeris = newDiffItems[newIndices[0]].data.hostModel;\n\n    if (newElsList.length) {\n      each(newElsList, function (newEl) {\n        return stopAnimation(newEl);\n      });\n\n      if (oldEl) {\n        stopAnimation(oldEl); // If old element is doing leaving animation. stop it and remove it immediately.\n\n        removeEl(oldEl);\n        hasMorphAnimation = true;\n        applyMorphAnimation(getPathList(oldEl), getPathList(newElsList), oldItem.divide, // Use divide on old.\n        newSeris, newIndices[0], updateMorphingPathProps);\n      } else {\n        each(newElsList, function (newEl) {\n          return fadeInElement(newEl, newSeris, newIndices[0]);\n        });\n      }\n    } // else keep oldEl leaving animation.\n\n  }).updateManyToMany(function (newIndices, oldIndices) {\n    // If two data are same and both have groupId.\n    // Normally they should be diff by id.\n    new DataDiffer(oldIndices, newIndices, function (rawIdx) {\n      return oldDiffItems[rawIdx].data.getId(oldDiffItems[rawIdx].dataIndex);\n    }, function (rawIdx) {\n      return newDiffItems[rawIdx].data.getId(newDiffItems[rawIdx].dataIndex);\n    }).update(function (newIndex, oldIndex) {\n      // Use the original index\n      updateOneToOne(newIndices[newIndex], oldIndices[oldIndex]);\n    }).execute();\n  }).execute();\n\n  if (hasMorphAnimation) {\n    each(newList, function (_a) {\n      var data = _a.data;\n      var seriesModel = data.hostModel;\n      var view = seriesModel && api.getViewOfSeriesModel(seriesModel);\n      var animationCfg = getAnimationConfig('update', seriesModel, 0); // use 0 index.\n\n      if (view && seriesModel.isAnimationEnabled() && animationCfg && animationCfg.duration > 0) {\n        view.group.traverse(function (el) {\n          if (el instanceof Path && !el.animators.length) {\n            // We can't accept there still exists element that has no animation\n            // if universalTransition is enabled\n            el.animateFrom({\n              style: {\n                opacity: 0\n              }\n            }, animationCfg);\n          }\n        });\n      }\n    });\n  }\n}\n\nfunction getSeriesTransitionKey(series) {\n  var seriesKey = series.getModel('universalTransition').get('seriesKey');\n\n  if (!seriesKey) {\n    // Use series id by default.\n    return series.id;\n  }\n\n  return seriesKey;\n}\n\nfunction convertArraySeriesKeyToString(seriesKey) {\n  if (isArray(seriesKey)) {\n    // Order independent.\n    return seriesKey.sort().join(',');\n  }\n\n  return seriesKey;\n}\n\nfunction getDivideShapeFromData(data) {\n  if (data.hostModel) {\n    return data.hostModel.getModel('universalTransition').get('divideShape');\n  }\n}\n\nfunction findTransitionSeriesBatches(globalStore, params) {\n  var updateBatches = createHashMap();\n  var oldDataMap = createHashMap(); // Map that only store key in array seriesKey.\n  // Which is used to query the old data when transition from one to multiple series.\n\n  var oldDataMapForSplit = createHashMap();\n  each(globalStore.oldSeries, function (series, idx) {\n    var oldDataGroupId = globalStore.oldDataGroupIds[idx];\n    var oldData = globalStore.oldData[idx];\n    var transitionKey = getSeriesTransitionKey(series);\n    var transitionKeyStr = convertArraySeriesKeyToString(transitionKey);\n    oldDataMap.set(transitionKeyStr, {\n      dataGroupId: oldDataGroupId,\n      data: oldData\n    });\n\n    if (isArray(transitionKey)) {\n      // Same key can't in different array seriesKey.\n      each(transitionKey, function (key) {\n        oldDataMapForSplit.set(key, {\n          key: transitionKeyStr,\n          dataGroupId: oldDataGroupId,\n          data: oldData\n        });\n      });\n    }\n  });\n\n  function checkTransitionSeriesKeyDuplicated(transitionKeyStr) {\n    if (updateBatches.get(transitionKeyStr)) {\n      warn(\"Duplicated seriesKey in universalTransition \" + transitionKeyStr);\n    }\n  }\n\n  each(params.updatedSeries, function (series) {\n    if (series.isUniversalTransitionEnabled() && series.isAnimationEnabled()) {\n      var newDataGroupId = series.get('dataGroupId');\n      var newData = series.getData();\n      var transitionKey = getSeriesTransitionKey(series);\n      var transitionKeyStr = convertArraySeriesKeyToString(transitionKey); // Only transition between series with same id.\n\n      var oldData = oldDataMap.get(transitionKeyStr); // string transition key is the best match.\n\n      if (oldData) {\n        if (process.env.NODE_ENV !== 'production') {\n          checkTransitionSeriesKeyDuplicated(transitionKeyStr);\n        } // TODO check if data is same?\n\n\n        updateBatches.set(transitionKeyStr, {\n          oldSeries: [{\n            dataGroupId: oldData.dataGroupId,\n            divide: getDivideShapeFromData(oldData.data),\n            data: oldData.data\n          }],\n          newSeries: [{\n            dataGroupId: newDataGroupId,\n            divide: getDivideShapeFromData(newData),\n            data: newData\n          }]\n        });\n      } else {\n        // Transition from multiple series.\n        if (isArray(transitionKey)) {\n          if (process.env.NODE_ENV !== 'production') {\n            checkTransitionSeriesKeyDuplicated(transitionKeyStr);\n          }\n\n          var oldSeries_1 = [];\n          each(transitionKey, function (key) {\n            var oldData = oldDataMap.get(key);\n\n            if (oldData.data) {\n              oldSeries_1.push({\n                dataGroupId: oldData.dataGroupId,\n                divide: getDivideShapeFromData(oldData.data),\n                data: oldData.data\n              });\n            }\n          });\n\n          if (oldSeries_1.length) {\n            updateBatches.set(transitionKeyStr, {\n              oldSeries: oldSeries_1,\n              newSeries: [{\n                dataGroupId: newDataGroupId,\n                data: newData,\n                divide: getDivideShapeFromData(newData)\n              }]\n            });\n          }\n        } else {\n          // Try transition to multiple series.\n          var oldData_1 = oldDataMapForSplit.get(transitionKey);\n\n          if (oldData_1) {\n            var batch = updateBatches.get(oldData_1.key);\n\n            if (!batch) {\n              batch = {\n                oldSeries: [{\n                  dataGroupId: oldData_1.dataGroupId,\n                  data: oldData_1.data,\n                  divide: getDivideShapeFromData(oldData_1.data)\n                }],\n                newSeries: []\n              };\n              updateBatches.set(oldData_1.key, batch);\n            }\n\n            batch.newSeries.push({\n              dataGroupId: newDataGroupId,\n              data: newData,\n              divide: getDivideShapeFromData(newData)\n            });\n          }\n        }\n      }\n    }\n  });\n  return updateBatches;\n}\n\nfunction querySeries(series, finder) {\n  for (var i = 0; i < series.length; i++) {\n    var found = finder.seriesIndex != null && finder.seriesIndex === series[i].seriesIndex || finder.seriesId != null && finder.seriesId === series[i].id;\n\n    if (found) {\n      return i;\n    }\n  }\n}\n\nfunction transitionSeriesFromOpt(transitionOpt, globalStore, params, api) {\n  var from = [];\n  var to = [];\n  each(normalizeToArray(transitionOpt.from), function (finder) {\n    var idx = querySeries(globalStore.oldSeries, finder);\n\n    if (idx >= 0) {\n      from.push({\n        dataGroupId: globalStore.oldDataGroupIds[idx],\n        data: globalStore.oldData[idx],\n        // TODO can specify divideShape in transition.\n        divide: getDivideShapeFromData(globalStore.oldData[idx]),\n        dim: finder.dimension\n      });\n    }\n  });\n  each(normalizeToArray(transitionOpt.to), function (finder) {\n    var idx = querySeries(params.updatedSeries, finder);\n\n    if (idx >= 0) {\n      var data = params.updatedSeries[idx].getData();\n      to.push({\n        dataGroupId: globalStore.oldDataGroupIds[idx],\n        data: data,\n        divide: getDivideShapeFromData(data),\n        dim: finder.dimension\n      });\n    }\n  });\n\n  if (from.length > 0 && to.length > 0) {\n    transitionBetween(from, to, api);\n  }\n}\n\nexport function installUniversalTransition(registers) {\n  registers.registerUpdateLifecycle('series:beforeupdate', function (ecMOdel, api, params) {\n    each(normalizeToArray(params.seriesTransition), function (transOpt) {\n      each(normalizeToArray(transOpt.to), function (finder) {\n        var series = params.updatedSeries;\n\n        for (var i = 0; i < series.length; i++) {\n          if (finder.seriesIndex != null && finder.seriesIndex === series[i].seriesIndex || finder.seriesId != null && finder.seriesId === series[i].id) {\n            series[i][SERIES_UNIVERSAL_TRANSITION_PROP] = true;\n          }\n        }\n      });\n    });\n  });\n  registers.registerUpdateLifecycle('series:transition', function (ecModel, api, params) {\n    // TODO api provide an namespace that can save stuff per instance\n    var globalStore = getUniversalTransitionGlobalStore(api); // TODO multiple to multiple series.\n\n    if (globalStore.oldSeries && params.updatedSeries && params.optionChanged) {\n      // Use give transition config if its' give;\n      var transitionOpt = params.seriesTransition;\n\n      if (transitionOpt) {\n        each(normalizeToArray(transitionOpt), function (opt) {\n          transitionSeriesFromOpt(opt, globalStore, params, api);\n        });\n      } else {\n        // Else guess from series based on transition series key.\n        var updateBatches_1 = findTransitionSeriesBatches(globalStore, params);\n        each(updateBatches_1.keys(), function (key) {\n          var batch = updateBatches_1.get(key);\n          transitionBetween(batch.oldSeries, batch.newSeries, api);\n        });\n      } // Reset\n\n\n      each(params.updatedSeries, function (series) {\n        // Reset;\n        if (series[SERIES_UNIVERSAL_TRANSITION_PROP]) {\n          series[SERIES_UNIVERSAL_TRANSITION_PROP] = false;\n        }\n      });\n    } // Save all series of current update. Not only the updated one.\n\n\n    var allSeries = ecModel.getSeries();\n    var savedSeries = globalStore.oldSeries = [];\n    var savedDataGroupIds = globalStore.oldDataGroupIds = [];\n    var savedData = globalStore.oldData = [];\n\n    for (var i = 0; i < allSeries.length; i++) {\n      var data = allSeries[i].getData(); // Only save the data that can have transition.\n      // Avoid large data costing too much extra memory\n\n      if (data.count() < DATA_COUNT_THRESHOLD) {\n        savedSeries.push(allSeries[i]);\n        savedDataGroupIds.push(allSeries[i].get('dataGroupId'));\n        savedData.push(data);\n      }\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { use } from './lib/extension.js';\nexport * from './lib/export/core.js'; // ----------------------------------------------\n// All of the modules that are allowed to be\n// imported are listed below.\n//\n// Users MUST NOT import other modules that are\n// not included in this list.\n// ----------------------------------------------\n\nimport { SVGRenderer, CanvasRenderer } from './lib/export/renderers.js';\nimport { LineChart, BarChart, PieChart, ScatterChart, RadarChart, MapChart, TreeChart, TreemapChart, GraphChart, GaugeChart, FunnelChart, ParallelChart, SankeyChart, BoxplotChart, CandlestickChart, EffectScatterChart, LinesChart, HeatmapChart, PictorialBarChart, ThemeRiverChart, SunburstChart, CustomChart } from './lib/export/charts.js';\nimport { GridComponent, PolarComponent, GeoComponent, SingleAxisComponent, ParallelComponent, CalendarComponent, GraphicComponent, ToolboxComponent, TooltipComponent, AxisPointerComponent, BrushComponent, TitleComponent, TimelineComponent, MarkPointComponent, MarkLineComponent, MarkAreaComponent, LegendComponent, DataZoomComponent, DataZoomInsideComponent, DataZoomSliderComponent, VisualMapComponent, VisualMapContinuousComponent, VisualMapPiecewiseComponent, AriaComponent, DatasetComponent, TransformComponent } from './lib/export/components.js';\nimport { UniversalTransition, LabelLayout } from './lib/export/features.js'; // -----------------\n// Render engines\n// -----------------\n// Render via Canvas.\n// echarts.init(dom, null, { renderer: 'canvas' })\n\nuse([CanvasRenderer]); // Render via SVG.\n// echarts.init(dom, null, { renderer: 'svg' })\n\nuse([SVGRenderer]); // ----------------\n// Charts (series)\n// ----------------\n// All of the series types, for example:\n// chart.setOption({\n//     series: [{\n//         type: 'line' // or 'bar', 'pie', ...\n//     }]\n// });\n\nuse([LineChart, BarChart, PieChart, ScatterChart, RadarChart, MapChart, TreeChart, TreemapChart, GraphChart, GaugeChart, FunnelChart, ParallelChart, SankeyChart, BoxplotChart, CandlestickChart, EffectScatterChart, LinesChart, HeatmapChart, PictorialBarChart, ThemeRiverChart, SunburstChart, CustomChart]); // -------------------\n// Coordinate systems\n// -------------------\n// All of the axis modules have been included in the\n// coordinate system module below, do not need to\n// make extra import.\n// `cartesian` coordinate system. For some historical\n// reasons, it is named as grid, for example:\n// chart.setOption({\n//     grid: {...},\n//     xAxis: {...},\n//     yAxis: {...},\n//     series: [{...}]\n// });\n\nuse(GridComponent); // `polar` coordinate system, for example:\n// chart.setOption({\n//     polar: {...},\n//     radiusAxis: {...},\n//     angleAxis: {...},\n//     series: [{\n//         coordinateSystem: 'polar'\n//     }]\n// });\n\nuse(PolarComponent); // `geo` coordinate system, for example:\n// chart.setOption({\n//     geo: {...},\n//     series: [{\n//         coordinateSystem: 'geo'\n//     }]\n// });\n\nuse(GeoComponent); // `singleAxis` coordinate system (notice, it is a coordinate system\n// with only one axis, work for chart like theme river), for example:\n// chart.setOption({\n//     singleAxis: {...}\n//     series: [{type: 'themeRiver', ...}]\n// });\n\nuse(SingleAxisComponent); // `parallel` coordinate system, only work for parallel series, for example:\n// chart.setOption({\n//     parallel: {...},\n//     parallelAxis: [{...}, ...],\n//     series: [{\n//         type: 'parallel'\n//     }]\n// });\n\nuse(ParallelComponent); // `calendar` coordinate system. for example,\n// chart.setOption({\n//     calendar: {...},\n//     series: [{\n//         coordinateSystem: 'calendar'\n//     }]\n// );\n\nuse(CalendarComponent); // ------------------\n// Other components\n// ------------------\n// `graphic` component, for example:\n// chart.setOption({\n//     graphic: {...}\n// });\n\nuse(GraphicComponent); // `toolbox` component, for example:\n// chart.setOption({\n//     toolbox: {...}\n// });\n\nuse(ToolboxComponent); // `tooltip` component, for example:\n// chart.setOption({\n//     tooltip: {...}\n// });\n\nuse(TooltipComponent); // `axisPointer` component, for example:\n// chart.setOption({\n//     tooltip: {axisPointer: {...}, ...}\n// });\n// Or\n// chart.setOption({\n//     axisPointer: {...}\n// });\n\nuse(AxisPointerComponent); // `brush` component, for example:\n// chart.setOption({\n//     brush: {...}\n// });\n// Or\n// chart.setOption({\n//     tooltip: {feature: {brush: {...}}\n// })\n\nuse(BrushComponent); // `title` component, for example:\n// chart.setOption({\n//     title: {...}\n// });\n\nuse(TitleComponent); // `timeline` component, for example:\n// chart.setOption({\n//     timeline: {...}\n// });\n\nuse(TimelineComponent); // `markPoint` component, for example:\n// chart.setOption({\n//     series: [{markPoint: {...}}]\n// });\n\nuse(MarkPointComponent); // `markLine` component, for example:\n// chart.setOption({\n//     series: [{markLine: {...}}]\n// });\n\nuse(MarkLineComponent); // `markArea` component, for example:\n// chart.setOption({\n//     series: [{markArea: {...}}]\n// });\n\nuse(MarkAreaComponent); // `legend` component not scrollable. for example:\n// chart.setOption({\n//     legend: {...}\n// });\n\nuse(LegendComponent); // `dataZoom` component including both `dataZoomInside` and `dataZoomSlider`.\n\nuse(DataZoomComponent); // `dataZoom` component providing drag, pinch, wheel behaviors\n// inside coordinate system, for example:\n// chart.setOption({\n//     dataZoom: {type: 'inside'}\n// });\n\nuse(DataZoomInsideComponent); // `dataZoom` component providing a slider bar, for example:\n// chart.setOption({\n//     dataZoom: {type: 'slider'}\n// });\n\nuse(DataZoomSliderComponent); // `visualMap` component including both `visualMapContinuous` and `visualMapPiecewise`.\n\nuse(VisualMapComponent); // `visualMap` component providing continuous bar, for example:\n// chart.setOption({\n//     visualMap: {type: 'continuous'}\n// });\n\nuse(VisualMapContinuousComponent); // `visualMap` component providing pieces bar, for example:\n// chart.setOption({\n//     visualMap: {type: 'piecewise'}\n// });\n\nuse(VisualMapPiecewiseComponent); // `aria` component providing aria, for example:\n// chart.setOption({\n//     aria: {...}\n// });\n\nuse(AriaComponent); // dataset transform\n// chart.setOption({\n//     dataset: {\n//          transform: []\n//     }\n// });\n\nuse(TransformComponent);\nuse(DatasetComponent); // universal transition\n// chart.setOption({\n//     series: {\n//         universalTransition: { enabled: true }\n//     }\n// })\n\nuse(UniversalTransition); // label layout\n// chart.setOption({\n//     series: {\n//         labelLayout: { hideOverlap: true }\n//     }\n// })\n\nuse(LabelLayout);"],"names":["cloneArr","points","newPoints","i","prepareLayoutCallbackParams","labelItem","hostEl","label","labelLine","LABEL_OPTION_TO_STYLE_KEYS","dummyTransformable","Transformable","labelLayoutInnerStore","makeInner","labelLineAnimationStore","extendWithKeys","target","source","keys","key","LABEL_LAYOUT_PROPS","LabelManager","dataIndex","dataType","seriesModel","layoutOption","labelStyle","textConfig","labelTransform","labelRect","BoundingRect","normalizeRadian","host","hostRect","transform","labelGuide","chartView","_this","isFunction","child","textEl","ecData","getECData","api","width","height","createDragHandler","el","labelLineModel","updateLabelLinePoints","defaultLabelAttr","degreeToRadian","needsUpdateLabelLine","parsePercent","guideLine","labelLayoutStore","k","hostModel","data","labelList","prepareLayoutList","labelsNeedsAdjustOnX","filter","item","labelsNeedsAdjustOnY","shiftLayoutOnX","shiftLayoutOnY","labelsNeedsHideOverlap","hideOverlap","each","ignoreLabelLineUpdate","animationEnabled","itemModel","defaultStyle","visualStyle","visualType","setLabelLineStyle","getLabelLineStatesModels","isElementRemoved","layoutStore","oldLayout","newProps","prevStates","indexOf","updateProps","labelInner","oldOpacity","retrieve2","initProps","layoutSelect","layoutEmphasis","animateLabelValue","newLayout","LabelManager$1","getLabelManager","installLabelLayout","registers","ecModel","params","labelManager","series","createDom","id","painter","dpr","newDom","platformApi","newDomStyle","Layer","_super","__extends","dom","devicePixelRatio","util.isObject","domStyle","util.disableUserSelect","displayList","prevList","viewWidth","viewHeight","mergedRepaintRects","maxRepaintRectCount","full","pendingRect","addRectToMergePool","rect","boundingRect","isMerged","minDeltaArea","bestRectToMergeIdx","mergedRect","pendingRect_1","aArea","bArea","pendingArea","deltaArea","shouldPaint","prevRect","REDRAW_BIT","curRect","hasIntersections","j","domBack","clearAll","clearColor","repaintRects","ctx","haveMotionBLur","lastFrameAlpha","self","doClear","x","y","clearColorGradientOrPattern","util.isGradientObject","shouldCache","getCanvasGradient","util.isImagePatternObject","createCanvasPattern","util.each","Eventful","Layer$1","HOVER_LAYER_ZLEVEL","CANVAS_ZLEVEL","EL_AFTER_INCREMENTAL_INC","INCREMENTAL_INC","isLayerValid","layer","createRoot","domRoot","CanvasPainter","root","storage","opts","singleCanvas","util.extend","rootStyle","zlevelList","layers","rootCanvas","mainLayer","getSize","viewportRoot","paintAll","list","z","len","hoverLayer","scope","brush","brushSingle","redrawId","_a","finished","needsRefreshHover","self_1","requestAnimationFrame","layerList","useDirtyRect","zi","zlevel","_loop_1","this_1","start","useTimer","startTime","firstEl","repaint","repaintRect","dTime","r","env","currentLayer","isLast","paintRect","virtual","util.merge","layersMap","prevLayer","prevDom","cb","context","updatePrevLayer","idx","i_1","incrementalLayerCount","prevZlevel","util.logError","backgroundColor","config","layerConfig","_zlevel","util.indexOf","imageLayer","width_1","height_1","CanvasPainter$1","install","init","inRoot","nodes","node","children","n","firstWalk","separation","siblings","subtreeW","executeShifts","midPoint","apportion","secondWalk","nodeX","defaultSeparation","radialCoordinate","rad","getViewRect","layout.getLayoutRect","shift","change","subtreeV","ancestor","nodeOutRight","nodeInRight","nodeOutLeft","nodeInLeft","sumOutRight","sumInRight","sumOutLeft","sumInLeft","nextRight","nextLeft","moveSubtree","nextAncestor","wl","wr","node1","node2","TreeEdgeShape","TreePath","shape","childPoints","childLen","parentPoint","firstChildPos","lastChildPos","orient","forkDim","otherDim","forkPosition","tmpPoint","point","Path","TreeView","graphic.Group","RoamController","layoutInfo","group","layout","oldData","newIdx","symbolNeedsDraw","updateNode","oldIdx","symbolEl","removeNode","min","max","bbox.fromPoints","oldMin","oldMax","viewCoordSys","View","controller","controllerHost","e","onIrrelevantElement","roamHelper.updateViewOnPan","roamHelper.updateViewOnZoom","nodeScale","coordSys","nodeScaleRatio","groupZoom","roamZoom","ChartView","isInit","visualColor","symbolInnerColor","virtualRoot","sourceSymbolEl","sourceLayout","sourceOldLayout","targetLayout","SymbolClz","graphic.updateProps","symbolPath","realRoot","rootLayout","length_1","isLeft","center","textPosition","normalLabelModel","rotate","labelRotateRadian","textContent","focus","focusDataIndices","zrUtil.concatArray","drawEdge","toState","parentEl","HOVER_STATE_BLUR","setStatesFlag","edgeShape","curvature","edgeForkPosition","lineStyle","edge","graphic.BezierCurve","getEdgeShape","childLayout","zrUtil.defaults","setStatesStylesFromModel","setDefaultStateProxy","removeNodeEdge","removeAnimationOpt","getSourceNode","sourceEdge","layoutOpt","graphic.removeElement","childNode","cpx1","cpy1","cpx2","cpy2","x1","x2","y1","y2","radialCoor1","radialCoor2","radialCoor3","radialCoor4","TreeView$1","inner","linkSeriesData","opt","mainData","datas","linkAll","methodName","curry","transferInjection","cloneShallowInjection","changeInjection","assert","res","isMainData","extend","linkSingle","getLinkedData","getLinkedDataAll","map","type","TreeNode","name","hostTree","options","zrUtil.isFunction","zrUtil.isString","order","suppressVisitSub","depth","includeSelf","ancestors","indices","currNode","dimension","merge","path","value","parent","Tree","rawIndex","dataRoot","beforeLink","tree","listData","dimMax","buildHierarchy","dataNode","parentNode","zrUtil.isArray","convertOptionIdName","addChild","dimensions","prepareSeriesDataSchema","SeriesData","Tree$1","retrieveTargetInfo","payload","validPayloadTypes","zrUtil.indexOf","targetNode","targetNodeId","getPathToRoot","aboveViewRoot","viewRoot","viewPath","wrapTreePathInfo","treePathInfo","nodeDataIndex","TreeSeriesModel","option","leaves","leavesModel","Model","nodeData","model","treeDepth","expandAndCollapse","expandTreeDepth","zoom","multipleSeries","createTooltipMarkup","SeriesModel","TreeSeriesModel$1","eachAfter","callback","next","eachBefore","treeLayout","commonLayout","sep","left_1","right_1","bottom_1","delta","tx_1","kx_1","ky_1","coorX_1","coorY_1","finalCoor","orient_1","treeVisual","style","existsStyle","installTreeAction","updateCenterAndZoom","actionTypes","installTreemapAction","noop","handleRootToNode","index","types","targetInfo","helper.retrieveTargetInfo","originViewRoot","helper.aboveViewRoot","enableAriaDecalForTree","decalPaletteScope","current","decal","getDecalFromPalette","TreemapSeriesModel","completeTreeValue","levels","designatedVisualItemStyle","designatedVisualModel","setDefault","levelModels","zrUtil.map","levelDefine","levelModel","zrUtil.extend","idIndexMap","zrUtil.createHashMap","sum","zrUtil.each","childValue","thisValue","globalColorList","normalizeToArray","globalDecalList","hasColorDefine","hasDecalDefine","modelColor","modelDecal","level0","TreemapSeriesModel$1","TEXT_PADDING","ITEM_GAP","ARRAY_LENGTH","Breadcrumb","containerGroup","onSelect","thisGroup","normalStyleModel","emphasisModel","textStyleModel","emphasisTextStyleModel","layoutParam","layout.positionElement","text","textRect","itemWidth","lastX","emptyItemWidth","availableSize","layout.getAvailableSize","totalWidth","renderList","emphasisItemStyle","itemNode","graphic.Polygon","makeItemPoints","defaults","graphic.Text","createTextStyle","Z2_EMPHASIS_LIFT","toggleHoverEmphasis","packEventData","itemHeight","head","tail","Breadcrumb$1","AnimationWrap","duration","delay","easing","count","checkTerminate","createWrap","Group","Rect","graphic.Rect","DRAG_THRESHOLD","PATH_LABEL_NOAMAL","PATH_UPPERLABEL_NORMAL","Z2_BASE","Z2_BG","Z2_CONTENT","getStateItemStyle","makeStyleMapper","getItemStyleNormal","itemStyle","TreemapView","createStorage","models","payloadType","thisStorage","reRoot","hasAnimation","renderResult","thisTree","oldTree","lastsForAnimation","oldStorage","willInvisibleEls","doRenderNode","thisNode","oldNode","parentGroup","renderNode","dualTravel","willDeleteEls","clearStorage","renderFinally","thisViewChildren","oldViewChildren","sameTree","processNode","DataDiffer","getKey","newIndex","oldIndex","store","storageName","delEls","els","durationOption","easingOption","animationWrap","animationUtil.createWrap","innerStore","targetX","targetY","last","bind","mouseX","mouseY","m","matrix.create","matrix.translate","matrix.scale","nodeClick","link","linkTarget","windowOpen","bgEl","thisLayout","nodeModel","thisWidth","thisHeight","borderWidth","thisInvisible","thisRawIndex","oldRawIndex","upperHeight","isParent","itemStyleNormalModel","itemStyleEmphasisModel","itemStyleBlurModel","itemStyleSelectModel","borderRadius","giveGraphic","bg","renderBackground","blurScope","isDisabled","focusOrIndices","isHighDownDispatcher","setAsHighDownDispatcher","enableHoverFocus","content","renderContent","useUpperLabel","processInvisible","visualBorderColor","normalStyle","emphasisStyle","blurStyle","selectStyle","upperLabelWidth","prepareText","contentWidth","contentHeight","nodeStyle","element","rectEl","visualOpacity","upperLabelRect","defaultText","isShow","setLabelStyle","getLabelStatesModels","textStyle","textPadding","normalizeCssArray","addDrillDownIcon","textEmphasisState","iconChar","Ctor","lasts","prepareAnimationWhenHasOld","Displayable","calculateZ2","prepareAnimationWhenNoOld","lastCfg","isGroup","parentOldX","parentOldY","parentOldBg","z2InLevel","TreemapView$1","ITEM_STYLE_NORMAL","treemapVisual","travelTree","designatedVisual","viewRootAncestors","nodeLayout","nodeItemStyleModel","visuals","buildVisuals","borderColor","borderColorSaturation","thisNodeColor","calculateColor","calculateBorderColor","viewChildren","mapping_1","buildVisualMapping","childVisual","mapVisual","visualName","val","color","getValueVisualDefine","colorAlpha","colorSaturation","modifyHSL","modifyAlpha","rangeVisual","getRangeVisual","visualMin","visualMax","dataExtent","colorMappingBy","mapping","VisualMapping","range","isArray","childVisuals","mappingType","mathMax","mathMin","retrieveValue","zrUtil.retrieve","PATH_BORDER_WIDTH","PATH_GAP_WIDTH","PATH_UPPER_LABEL_SHOW","PATH_UPPER_LABEL_HEIGHT","treemapLayout","ecWidth","ecHeight","seriesOption","size","containerWidth","containerHeight","rootRect","viewAbovePath","helper.getPathToRoot","rootSize","estimateRootSize","sort_1","viewRootLayout_1","squarify","treeRoot","calculateRootPosition","prunning","hideChildren","halfGapWidth","upperLabelHeight","getUpperLabelHeight","layoutOffset","layoutOffsetUpper","totalArea","initChildren","rowFixedLength","best","row","score","worst","position","childrenVisibleMin","orderBy","overLeafDepth","zrUtil.filter","sort","info","statistic","filterByThreshold","area","orderedChildren","visibleMin","deletePoint","a","b","diff","ratio","areaMax","areaMin","squareArea","f","flush","idx0WhenH","idx1WhenH","xy","wh","rowOtherLength","rowLen","step","wh1","remain","modWH","wh0","defaultSize","viewArea","currNodeValue","parentModel","MAX_SAFE_INTEGER","scale","defaultPosition","targetCenter","clipRect","nodeInViewAbovePath","isAboveViewRoot","childClipRect","categoryFilter","legendModels","graphSeries","categoriesData","graph","categoryNames","category","isNumber","categoryVisual","paletteScope","categoryNameIdxMap","symbolVisualList","symbolVisual","categoryIdx","isString","categoryStyle","visualList","normalize","graphEdgeVisual","edgeData","symbolType","symbolSize","KEY_DELIMITER","getAutoCurvenessParams","createCurveness","appendLength","autoCurvenessParmas","length","curvenessList","zrUtil.isNumber","getKeyOfEdges","n1","n2","getOppositeKey","getEdgeFromMap","getTotalLengthBetweenNodes","getEdgeMapLengthWithKey","lenV","edgeMap","initCurvenessList","createEdgeMapForCurveness","oppositeEdges","getCurvenessForEdge","needReverse","autoCurvenessParams","isArrayParam","edgeArray","edgeIndex","totalLen","curKey","parityCorrection","oppositeKey","resValue","simpleLayout","simpleLayoutEdge","curveness","zrUtil.retrieve3","p1","vec2.clone","p2","graphSimpleLayout","data_1","dimensions_1","coordDim","hasValue","getNodeGlobalScale","getSymbolSize","PI","_symbolRadiansHalf","circularLayout","basedOn","draggingNode","pointer","cx","cy","tempX","tempY","v","vec2.normalize","vec2.scale","circularRotateLabel","rotateNodeLabel","_layoutNodesBasedOn","cp1","x12","y12","angle","unitAngle","radianHalf","sumRadian","symbolRadianHalf","halfRemainRadian","labelRotate","pos","emphasisState","graphCircularLayout","scaleAndAdd","vec2.scaleAndAdd","forceLayout","inNodes","inEdges","edges","gravity","vec2.create","initialFriction","friction","beforeStepCallback","afterStepCallback","v12","nLen","vec2.sub","d","vec2.len","w","vec2.set","repFact","vec2.copy","graphForceLayout","preservedPoints_1","graph_1","nodeData_1","forceModel","initLayout","nodeDataExtent_1","edgeDataExtent_1","repulsion","edgeLength","repulsionArr_1","edgeLengthArr_1","nodes_1","rep","linearMap","edgeModel","forceInstance","l","stopped","aspect","getLayoutRect","createViewCoordSys","viewList","coordSysType","positions","viewRect","bbWidth","bbHeight","straightLineProto","graphic.Line","bezierCurveProto","StraightLineShape","CurveShape","isStraightLine","ECLinePath","p","graphic.Path","ECLinePath$1","SYMBOL_CATEGORIES","makeSymbolTypeKey","symbolCategory","makeSymbolTypeValue","lineData","symbolRotate","symbolOffset","symbolKeepAspect","symbolSizeArr","symbolUtil.normalizeSymbolSize","symbolOffsetArr","symbolUtil.normalizeSymbolOffset","createSymbol","symbolUtil.createSymbol","createLine","line","setLinePoints","targetShape","Line","seriesScope","linePoints","graphic.initProps","symbol","emphasisLineStyle","blurLineStyle","selectLineStyle","labelStatesModels","emphasisDisabled","SPECIAL_STATES","stateName","lineState","lineStateStyle","state","stateStyle","rawVal","round","labelNormalModel","distance","enterEmphasis","leaveEmphasis","linePath","lineGroup","symbolFrom","symbolTo","invScale","percent","fromPos","toPos","vector.sub","vector.normalize","setSymbolRotation","specifiedRotation","tangent","textAlign","textVerticalAlign","distanceX","distanceY","halfPercent","cp","dir","rotation","dy","Line$1","LineDraw","LineCtor","LineGroup","lineDraw","oldLineData","makeSeriesScope","taskParams","updateIncrementalAndHover","isEffectObject","itemLayout","lineNeedsDraw","graphic.traverseElements","newLineData","itemEl","isPointNaN","pt","pts","LineDraw$1","v1","v2","v3","quadraticAt","curveTool.quadraticAt","v2DistSquare","vec2.distSquare","mathAbs","intersectCurveCircle","curvePoints","radius","p0","t","radiusSquare","interval","_t","nextDiff","adjustEdge","tmp0","quadraticSubdivide","curveTool.quadraticSubdivide","pts2","fromSymbol","toSymbol","originalPoints","isViewCoordSys","GraphView","symbolDraw","SymbolDraw","groupNewProp","layoutAnimation","draggable","GraphView$1","generateNodeKey","Graph","directed","nodesMap","GraphNode","rawIdx","edgesMap","GraphEdge","startNode","direction","edgeType","queue","currentNode","otherNode","dataIndices","adjacentEdge","connectedEdgesMap","connectedNodesMap","sourceNodesQueue","targetNodesQueue","nodeIteratorIndex","sourceNode","sourceNodes","targetNodes","createGraphDataProxyMixin","hostName","dataName","zrUtil.mixin","Graph$1","createGraphFromNodeEdge","linkNameList","validEdges","linkCount","createSeriesData","coordSysCtor","CoordinateSystem","coordDimensions","GraphSeriesModel","getCategoriesData","LegendVisualProvider","defaultEmphasis","categoriesModels","categoryModel","oldGetModel","newGetModel","resolveParentPath","pathArr","newPathArr","sourceName","targetName","nameArr","nodeMarkup","defaultSeriesFormatTooltip","categories","GraphSeriesModel$1","actionInfo","edgeVisual","createView","PointerShape","PointerPath","mathCos","mathSin","PointerPath$1","parsePosition","formatLabel","labelFormatter","GaugeView","colorList","posInfo","clockwise","startAngle","endAngle","axisLineModel","roundCap","MainPath","Sausage","graphic.Sector","showAxis","lineStyleModel","axisLineWidth","angles","normalizeArcAngles","angleRangeSpan","prevEndAngle","sectors","sector","getColor","minVal","maxVal","splitLineModel","tickModel","labelModel","splitNumber","subSplitNumber","splitLineLen","tickLen","subStep","splitLineStyle","tickLineStyle","splitLineDistance","unitX","unitY","splitLine","autoColor","textStyleX","textStyleY","rotateType","tickLine","oldProgressData","progressList","showPointer","progressModel","showProgress","valueDim","valueExtent","angleExtent","createPointer","pointerModel","pointerWidth","pointerLength","pointerStr","pointerOffset","pointerOffsetX","pointerOffsetY","pointerKeepAspect","createProgress","ProgressPath","isOverlap","progressWidth","r0","progress","isClip","setCommonECData","previousPointer","previousRotate","previousProgress","previousEndAngle","symbolStyle","ZRImage","pathStyle","anchorModel","showAnchor","anchorSize","anchorType","offsetCenter","anchorKeepAspect","anchor","contentGroup","newTitleEls","newDetailEls","showPointerAbove","itemGroup","itemTitleModel","titleOffsetCenter","titleX","titleY","labelEl","itemDetailModel","detailOffsetCenter","detailX","detailY","detailColor","formatter_1","setLabelValueAnimation","labelDataIndex","status","labelDimIndex","fmt","extendParams","GaugeView$1","GaugeSeriesModel","createSeriesDataSimply","GaugeSeriesModel$1","opacityAccessPath","FunnelPiece","polygon","graphic.Polyline","firstCreate","opacity","saveOldStyle","labelText","labelLayout","graphic.Point","FunnelView","funnelPiece","piece","graphic.removeElementWithFadeOut","FunnelView$1","FunnelSeriesModel","zrUtil.bind","zrUtil.curry","makeSeriesEncodeForNameBased","labelLineNormalOpt","labelLineEmphasisOpt","FunnelSeriesModel$1","getSortedIndices","valueArr","isAscending","labelPosition","isLabelInside","textX","textY","labelLineLen","funnelLayout","sizeExtent","funnelAlign","gap","viewSize","itemSize","getLinePoints","offset","val_1","y0","x0","nextIdx","end","dataFilter","DEFAULT_SMOOTH","ParallelView","dataGroup","add","update","remove","newDataIndex","addEl","updateElCommon","oldDataIndex","createLinePoints","clipPath","createGridClipShape","progressiveEls","parallelModel","dim","dimName","isEmptyValue","smooth","numericToNumber","eqNaN","axisType","ParallelView$1","ParallelSeriesModel","makeDefaultEncode","activeState","theActiveState","encodeDefine","axisDim","dataDimIndex","convertDimNameToNumber","ParallelSeriesModel$1","parallelVisual","opacityMap","itemOpacity","parallelVisual$1","use","installParallelComponent","SankeyPathShape","SankeyPath","extent","SankeyView","sankeyView","curve","n1Layout","node1Model","dragX1","dragY1","n2Layout","node2Model","dragX2","dragY2","edgeLayout","applyCurveStyle","defaultEdgeLabelText","edgeLabelStateModels","formatter","retrieve3","dragX","dragY","dx","curveProps","sourceColor","targetColor","graphic.LinearGradient","SankeyView$1","SankeySeriesModel","links","nodeDepth","localPosition","dataItem","noValue","rawDataOpt","edgeValue","edgeName","name_1","nodeValue","SankeySeriesModel$1","sankeyLayout","nodeWidth","nodeGap","computeNodeValues","filteredNodes","iterations","nodeAlign","layoutSankey","computeNodeBreadths","computeNodeDepths","computeEdgeDepths","value1","getEdgeValue","value2","nodeRawValue","remainEdges","indegreeArr","zeroIndegrees","nextTargetNode","maxNodeDepth","isItemDepth","edgeIdx","indexEdge","nodeIndex","maxDepth","adjustNodeWithNodeAlign","kx","scaleNodeBreadths","isNodeDepth","nextSourceNode","remainNodes","nodeHeight","moveSinksRight","nodesByBreadth","prepareNodesByBreadth","initializeNodeDepth","resolveCollisions","alpha","relaxRightToLeft","relaxLeftToRight","keyAttr","groupResult","groupData","minKy","ky","nodeDy","edgeDy","nodeDyAttr","weightedTarget","centerTarget","nodeY","weightedSource","centerSource","array","sy","ty","sankeyVisual","minValue_1","maxValue_1","mapValueToColor","customColor","edgeStyle","WhiskerBoxCommonMixin","ordinalMeta","xAxisModel","yAxisModel","xAxisType","yAxisType","addOrdinal","coordDims","baseAxisDimIndex","baseAxisDim","otherAxisDim","axisModels","baseAxisType","otherAxisType","newOptionData_1","newItem","defaultValueDimensions","getDimensionTypeByAxis","makeSeriesEncodeForAxisCoordSys","BoxplotSeriesModel","mixin","BoxplotSeriesModel$1","BoxplotView","constDim","createNormalBox","updateNormalBoxData","BoxPathShape","BoxPath","ends","transInit","updateMethod","graphic","BoxplotView$1","boxplotLayout","groupSeriesByAxis","groupItem","seriesModels","calculateBase","layoutSingleSeries","result","axisList","baseAxis","seriesCount","boxWidthList","boxOffsetList","boundList","bandWidth","maxDataCount_1","boxWidthBound","availableWidth","boxGap","boxWidth","base","halfWidth","cDimIdx","vDimIdx","cDim","vDims","axisDimVal","median","getPoint","end1","end2","end4","end5","addBodyEnd","layEndLine","point1","point2","endCenter","from","to","prepareBoxplotData","rawData","boxData","outliers","boundIQR","useExtreme","ascList","asc","Q1","quantile","Q2","Q3","bound","low","high","itemNameFormatter","itemName","outlier","boxplotTransform","upstream","SOURCE_FORMAT_ARRAY_ROWS","errMsg","throwError","SKIP_PROPS","CandlestickView","isLargeDraw","isSimpleBox","needsClip","coord","clipArea","isNormalBoxClipped","setBoxCommon","createLarge","createClipPath","NormalBoxPathShape","NormalBoxPath","clipped","LargeBoxPathShape","LargeBoxPath","incremental","largePoints","elP","elN","elDoji","setLargeStyle","sign","CandlestickView$1","CandlestickSeriesModel","selectors","CandlestickSeriesModel$1","candlestickPreprocessor","seriesItem","zrUtil.isObject","positiveBorderColorQuery","negativeBorderColorQuery","dojiBorderColorQuery","positiveColorQuery","negativeColorQuery","candlestickVisual","createRenderPlanner","getBorderColor","isLargeRender","candlestickVisual$1","candlestickLayout","candleWidth","calculateCandleWidth","cDimI","vDimsI","openDimI","closeDimI","lowestDimI","highestDimI","largeProgress","normalProgress","openVal","closeVal","lowestVal","highestVal","ocLow","ocHigh","ocLowPoint","ocHighPoint","lowestPoint","highestPoint","subPixelOptimizePoint","hasDojiColor","getSign","makeBrushRect","subPixelOptimize","pmin","pmax","createFloat32Array","tmpIn","tmpOut","barMaxWidth","barMinWidth","barWidth","candlestickLayout$1","preprocessor","updateRipplePath","rippleGroup","effectCfg","ripplePath","EffectSymbol","rippleNumber","oldEffectCfg","DIFFICULT_PROPS","propName","normalizeSymbolSize","normalizeSymbolOffset","EffectSymbol$1","EffectScatterView","effectSymbolDraw","pointsLayout","matrix.clone","EffectScatterView$1","EffectScatterSeriesModel","EffectScatterSeriesModel$1","layoutPoints","EffectLine","effectModel","period","loop","roundTrip","constantSpeed","delayExpr","delayNum","animator","vec2.dist","lastPos","curveUtil.quadraticAt","quadraticDerivativeAt","curveUtil.quadraticDerivativeAt","tx","EffectLine$1","Polyline","lineEmphasisState","polyline","Polyline$1","EffectPolyline","accLenArr","offsets","lastFrame","frame","EffectPolyline$1","LargeLinesPathShape","LargeLinesPath","segs","lineWidth","lineContain.containStroke","quadraticContain.containStroke","localPos","dataIdx","minX","minY","maxX","maxY","graphic.BoundingRect","LargeLineDraw","lineEl","lastAdded","oldSegs","oldLen","newSegs","isIncremental","LargeLineDraw$1","linesLayout","isPolyline","isLarge","lineCoords","segCount","totalCoordsCount","linesLayout$1","LinesView","trailLength","zr","isSvg","pipelineContext","hasEffect","LinesView$1","Uint32Arr","Float64Arr","compatEc2","seriesOpt","itemOpt","coords","mergeAll","LinesSeriesModel","concatArray","out","startOffset","coordsOffsetAndLenStorage","coordsStorage","coordsCursor","offsetCursor","dataCount","dimIndex","fromName","toName","progressive","progressiveThreshold","LinesSeriesModel$1","linesVisual","dataEach","linesVisual$1","GRADIENT_LEVELS","HeatmapLayer","canvas","colorFunc","isInRange","gradientInRange","gradientOutOfRange","imageData","pixels","pixelLen","minOpacity","maxOpacity","diffOpacity","gradientOffset","gradient","brushCanvas","gradientPixels","pixelsSingleState","off","HeatmapLayer$1","getIsInPiecewiseRange","pieceList","selected","dataSpan","lastIndex","getIsInContinuousRange","isGeoCoordSys","HeatmapView","visualMapOfThisSeries","visualMap","targetSeries","isCartesian2d","isCoordinateSystemType","xAxisExtent","yAxisExtent","xAxis","yAxis","dataDims","dataDimX","dataDimY","emphasisModel_1","rawValue","geo","visualMapModel","inRangeVisuals","outOfRangeVisuals","hmLayer","roamTransform","dims","lng","lat","img","graphic.Image","HeatmapView$1","HeatmapSeriesModel","coordSysCreator","HeatmapSeriesModel$1","ThemeRiverView","layersSeries","boundaryGap","keyGetter","dataDiffer","newLayersGroups","process","oldLayersGroups","points0","points1","textLayout","margin","layerGroup","ECPolygon","ThemeRiverView$1","DATA_NAME_INDEX","ThemeRiverSeriesModel","rawDataLength","timeValueKeys","layerData","items","layerNum","timeValue","singleAxisModel","SINGLE_REFERRING","filterData","nameList","nameMap","lenCount","indexArr","timeDim","layerSeries","index1","index2","nestestValue","minDist","nearestIdx","pointNum","theValue","dist","ThemeRiverSeriesModel$1","themeRiverLayout","single","axis","numberUtil.parsePercent","doThemeRiverLayout","layerPoints","singleLayer","computeBaseline","baseLine","baseY0","sums","temp","DEFAULT_SECTOR_Z","DEFAULT_TEXT_Z","SunburstPiece","sectorShape","createOrUpdatePatternFromDecal","cornerRadius","getSectorCornerRadius","itemStyleModel","cursorStyle","midAngle","labelMinAngle","isNormalShown","DISPLAY_STATES","labelStateModel","isNormal","isShown","getLabelAttr","sectorState","labelColor","labelPadding","stateAttr","SunburstPiece$1","ROOT_TO_NODE_ACTION","HIGHLIGHT_ACTION","UNHIGHLIGHT_ACTION","installSunburstAction","handleHighlight","SunburstView","newRoot","renderLabelForZeroData","newChildren","oldChildren","renderRollUp","newNode","targetFound","SunburstView$1","SunburstSeriesModel","SunburstSeriesModel$1","RADIAN","sunburstLayout","seriesType","minAngle","rootDepth","validDataCount","unitRadian","renderRollupNode","rPerLevel","stillShowZeroSum","rStart","rEnd","r0_1","r_1","radius_1","siblingAngle_1","sortOrder","sortTargets","isAsc_1","sunburstVisual","pickColor","treeHeight","lift","STYLE_VISUAL_TYPE","NON_STYLE_VISUAL_PROPS","customInnerStore","CustomSeriesModel","CustomSeriesModel$1","dataToCoordSize","dataSize","dimIdx","halfSize","cartesianPrepareCustom","geoPrepareCustom","singlePrepareCustom","getterName","polarPrepareCustom","radiusAxis","angleAxis","calendarPrepareCustom","rangeInfo","clamp","EMPHASIS","NORMAL","BLUR","SELECT","STATES","PATH_ITEM_STYLE","PATH_LABEL","DEFAULT_TRANSITION","GROUP_DIFF_PREFIX","attachedTxInfoTmp","prepareCustoms","prepareCartesian2d","prepareGeo","prepareSingleAxis","preparePolar","prepareCalendar","isPath","graphicUtil.Path","isDisplayable","copyElement","sourceEl","targetEl","CustomChartView","customSeries","renderItem","makeRenderItem","createOrUpdateItem","applyLeaveTransition","oldEl","setIncrementalAndHoverLayer","graphicUtil.traverseElements","eventType","query","packedEvent","elementName","CustomChartView$1","createEl","elOption","graphicType","pathRect","pathData","getPathData","graphicUtil.makePath","graphicUtil.Image","graphicUtil.Text","graphicUtil.Group","Clz","graphicUtil.getShapeClass","updateElNormal","attachedTxInfo","stopPreviousKeyframeAnimationAndRestore","txCfgOpt","styleOpt","textOptionStyle","hasOwn","decalPattern","decalObj","applyUpdateTransition","applyKeyframeAnimation","updateElOnState","elStateOpt","elDisplayable","stateObj","existingEmphasisState","updateZ","currentZ","currentZLevel","optZ2","updateZForEachState","retrieveStateOption","prepareResult","userAPI","ordinalRawValue","styleEmphasis","visual","barLayout","currentSeriesIndices","font","userParams","wrapEncodeDef","currDataIndexInside","currItemModel","currItemStyleModels","currLabelModels","seriesItemStyleModels","seriesLabelModels","getItemModel","dataIndexInside","getItemStyleModel","getLabelModel","dimInfo","userProps","labelStyleHelper.createTextStyle","getDefaultLabel","labelStyleHelper.createTextConfig","preFetchFromExtra","convertToEC4StyleForCustomSerise","applyUserPropsAfter","extra","style_1","getLayoutOnAxis","labelStyleHelper.getFont","encodeDef","existsEl","doCreateOrUpdateEl","toBeReplacedIdx","doesElNeedRecreate","doCreateOrUpdateAttachedTx","doCreateOrUpdateClipPath","otherStateOpt","otherStyleOpt","retrieveStyleOptionOnState","mergeChildren","elInner","elOptionType","elOptionShape","elOptionStyle","hasOwnPathData","clipPathOpt","processTxInfo","txConOptNormal","txConOptEmphasis","txConOptBlur","txConOptSelect","txConStlOptNormal","txConOptOtherState","stateOpt","elType","txCfg","txConOpt","isEC4CompatibleStyle","convertResult","convertFromEC4CompatibleStyle","txConOptNormal_1","stateOptionNormal","stateOption","newLen","byName","notMerge","diffGroupChildren","newChild","oldChild","removeChildFromGroup","processAddUpdate","processRemove","childOption","axisModel","axisPosition","rectBound","positionMap","directionMap","labelRotation","axisBuilderAttrs","selfBuilderAttrs","SingleAxisView","oldAxisGroup","singleAxisHelper.layout","axisBuilder","AxisBuilder","axisElementBuilders","graphic.groupTransition","rectCoordAxisHandleRemove","AxisView","axisView","axisGroup","lineColors","gridRect","isHorizontal","splitLines","lineCount","ticksCoords","tickCoord","graphic.subPixelOptimizeLine","colorIndex","graphic.mergePath","rectCoordAxisBuildSplitArea","SingleAxisView$1","SingleAxisModel","ComponentModel","AxisModelCommonMixin","SingleAxisModel$1","SingleAxis","coordExtent","Axis","SingleAxis$1","singleDimensions","Single","axisHelper.createScaleByModel","isCategory","axisHelper.niceScaleExtent","coordBase","axisExtent","extentSum","finder","getCoordSys","pixel","singleModel","create","singles","singleCreator","singleCreator$1","XY","WH","SingleAxisPointer","axisPointerModel","otherExtent","getGlobalExtent","getPointDimIndex","pixelValue","axisPointerType","elStyle","viewHelper.buildElStyle","pointerOption","pointerShapeBuilder","viewHelper.buildCartesianSingleLabelElOption","viewHelper.getTransformedPosition","currPosition","cursorOtherValue","cursorPoint","BaseAxisPointer","viewHelper.makeLineShape","span","viewHelper.makeRectShape","SingleAxisPointer$1","SingleView","ComponentView","installAxisPointer","axisModelCreator","DEFAULT_TOOLBOX_BTNS","brushPreprocessor","isNew","brushComponents","brushComponentSpecifiedBtns","brushOpt","tbs","toolbox","toolboxFeature","toolboxBrush","brushTypes","removeDuplicate","arr","flag","makeBrushCommonSelectorForSeries","brushType","selector","getLineSelectors","polygonContain.contain","linePolygonIntersect","xyIndex","inLineRange","layoutRange","STATE_LIST","DISPATCH_METHOD","DISPATCH_FLAG","layoutCovers","brushModel","brushTargetManager","BrushTargetManager","brushVisual","brushSelected","throttleType","throttleDelay","brushIndex","thisBrushSelected","zrUtil.clone","brushOption","brushLink","linkedSeriesMap","selectedDataIndexForLink","rangeInfoBySeries","hasBrushExists","areas","builder","boundingRectBuilders","selectableArea","visualMappings","visualSolution.createVisualMappings","mappingOption","seriesIndex","linkOthers","brushed","rangeInfoList","stepAParallel","stepAOthers","brushModelNotControll","checkInRange","seriesBrushSelected","getValueState","visualSolution.applyVisual","dispatchAction","doDispatch","fn","throttleUtil.createOrUpdate","seriesIndices","getBoundingRectFromMinMax","minMax","rg","BrushView","BrushController","eventParam","modelId","BrushView$1","DEFAULT_OUT_OF_BRUSH_COLOR","BrushModel","newOption","thisOption","visualSolution.replaceVisualOption","inBrush","generateBrushOption","zrUtil.merge","BrushModel$1","ICON_TYPES","BrushFeature","featureModel","brushMode","isBrushed","availableIcons","icons","defaultOption","ToolboxFeature","BrushFeature$1","registerFeature","checkMarkerInSeries","seriesOpts","markerType","seriesOptArr","fillLabel","MarkerModel","hostSeries","newOpt","createdBySelf","componentType","markerOpt","markerModel","DataFormatMixin","MarkerModel$1","MarkPointModel","masterMarkerModel","MarkPointModel$1","hasXOrY","hasXAndY","markerTypeCalculatorWithExtent","otherDataDim","targetDataDim","otherCoordIndex","targetCoordIndex","coordArr","stacked","isDimensionStacked","calcDataDim","numCalculate","coordArrValue","precision","numberUtil.getPrecision","markerTypeCalculator","dataTransform","axisInfo","getAxisInfo","clone","coordInfo","ret","dataDimToCoordDim","dataDim","dimItem","zoneFilter","item1","item2","createMarkerDimValueGetter","inCoordSys","parseDataValue","valueDataDim","sum_1","count_1","MarkerView","createHashMap","markerGroupMap","drawGroup","seriesModelList","isBlur","enterBlur","leaveBlur","MarkerView$1","updateMarkerLayout","mpData","xPx","yPx","MarkPointView","markPointModel","mpModel","seriesId","seriesData","symbolDrawMap","createData","dataParams","getVisualFromData","coordDimsInfos","dataOpt","markerHelper.dataTransform","markerHelper.dataFilter","dimValueGetter","markerHelper.createMarkerDimValueGetter","MarkPointView$1","MarkLineModel","MarkLineModel$1","markLineTransform","mlModel","itemArray","mlType","valueAxis","retrieve","markerHelper.getAxisInfo","getStackedDimension","markerHelper.numCalculate","valueIndex","baseIndex","mlFrom","mlTo","normalizedItem","isInfinity","ifMarkLineHasOnlyDim","fromCoord","toCoord","otherDimIndex","markLineFilter","updateSingleMarkerEndLayout","isFrom","MarkLineView","markLineModel","mlData_1","fromData_1","toData_1","lineDrawMap","mlData","createList","fromData","toData","updateDataVisualAndLayout","optData","MarkLineView$1","MarkAreaModel","MarkAreaModel$1","markAreaTransform","maModel","item0","lt","rb","ltCoord","rbCoord","ifMarkAreaHasOnlyDim","markAreaFilter","markerHelper.zoneFilter","getSingleMarkerEndPoint","pointValue0","pointValue1","clampPointValue0","clampPointValue1","pointValue","dimPermutations","MarkAreaView","markAreaModel","areaData_1","areaGroupMap","polygonGroup","areaData","xAxisScale","yAxisScale","xPointExtent","yPointExtent","numberUtil.asc","overlapped","allClipped","colorUtil.modifyAlpha","coordDimsInfos_1","MarkAreaView$1","RELATIONAL_EXPRESSION_OP_ALIAS_MAP","RegExpEvaluator","rVal","condValue","isRegExp","lVal","ConstConditionInternal","AndConditionInternal","OrConditionInternal","NotConditionInternal","RelationalConditionInternal","needParse","getValue","tarValRaw","tarValParsed","parseOption","exprOption","getters","cond","isObjectNotArray","parseAndOrOption","parseNotOption","parseRelationalOption","op","subOptionArr","subOption","valueGetterParam","subCondList","exprKeys","parserName","valueParser","getRawValueParser","keyRaw","condValueRaw","condValueParsed","evaluator","createFilterComparator","isObject","isArrayLike","ConditionalExpressionParsed","parseConditionalExpression","filterTransform","rawItem","condition","dimLoose","param","resultData","sortTransform","orderExprList","orderDefList","orderExpr","incomparable","errMsg_1","errMsg_2","parser","SortOrderComparator","sourceFormat","SOURCE_FORMAT_OBJECT_ROWS","orderDef","val0","val1","DatasetModel","SourceManager","disableTransformOptionMerge","SERIES_LAYOUT_BY_COLUMN","DatasetView","CMD","PathProxy","aroundEqual","pathToBezierCurves","bezierArrayGroups","currentSubpath","xi","yi","createNewSubpath","addLine","addArc","rx","ry","c1","s1","c2","s2","x4","y4","hx","hy","cmd","isFirst","anticlockwise","nextAngle","adpativeBezier","x3","y3","PIXEL_DISTANCE","PIXEL_DISTANCE_SQR","dx1","dy1","dx2","dy2","cp1LenSqr","cp2LenSqr","projLen1","projLen2","d1Sqr","d2Sqr","tmpSegX","tmpSegY","cubicSubdivide","pathToPolygons","polygons","beziers","getDividingGrids","dimSize","rowDim","rowSize","columnSize","rowCount","columnCount","grids","currentCount","remained","divideSector","outShapes","arcLen","deltaR","isAngleRow","column","newShape","divideRect","rectShape","isHorizontalRow","rowSizeDim","columnSizeDim","columnDim","crossProduct2d","lineLineIntersect","a1x","a1y","a2x","a2y","b1x","b1y","b2x","b2y","mx","my","nx","ny","nmCrossProduct","b1a1x","b1a1y","Point","projPtOnLine","lineA","lineB","dir2","addToPoly","poly","splitPolygonByLine","intersections","intersectionPt","splitPt0","splitPt1","tmp","splitPt0Arr","splitPt1Arr","newPolyA","newPolyB","binaryDividePolygon","polygonShape","fromPoints","pt0","pt1","binaryDivideRecursive","divider","mid","sub","paths","clonePath","copyPathProps","polygonConvert","split","OutShapeCtor","Sector","polygonCount","totalArea_1","left","selfCount","Polygon","subPath","alignSubpath","subpath1","subpath2","len1","len2","shorterPath","shorterLen","shorterBezierCount","eachCurveSubDivCount","newSubpath","actualSubDivCount","createSubpath","lastSubpathSubpath","otherSubpath","lastY","alignBezierCurves","array1","array2","lastSubpath1","lastSubpath2","newArray1","newArray2","newSubpath1","newSubpath2","centroid","signedArea","findBestRingOffset","fromSubBeziers","toSubBeziers","fromCp","toCp","bezierCount","bestScore","bestOffset","cursorOffset","reverse","newArr","findBestMorphingRotation","fromArr","toArr","searchAngleIteration","searchAngleRange","fromNeedsReverse","fromSubpathBezier","toSubpathBezier","newFromSubpathBezier","newToSubpathBezier","bestAngle","tmpArr","sa","ca","newX1","newY1","isCombineMorphing","SAVED_METHOD_PREFIX","saveAndModifyMethod","obj","modifiers","savedMethodName","originalMethod","replace","after","before","args","restoreMethod","applyTransformOnBeziers","bezierCurves","mm","subBeziers","prepareMorphPath","fromPath","toPath","fromPathProxy","toPathProxy","fromBezierCurves","toBezierCurves","fromPathTransform","toPathTransform","updateIdentityTransform","morphingData","onet","newCp","lerp","x0_1","y0_1","morphPath","animationOpts","oldDone","oldDuring","restoreToPath","hilbert","bits","s","sortPaths","pathList","xMin","yMin","xMax","yMax","cps","defaultDividePath","createEmptyReturn","combineMorph","fromList","fromPathList","addFromPath","separateCount","dividePath","toSubPathList","individualDelay","identityTransform","addToSubPathListToZr","toLen","animating_1","eachDone","indivdualAnimationOpts","separateMorph","toPathList","fromLen","isMultiple","elements","prepareMorphBatches","one","many","batches","batchCount","moveFrom","pathDividers","approxOpacity","cloned","applyMorphAnimation","divideShape","animateOtherProps","updateAnimationCfg","getAnimationConfig","animationDelay","animationCfg","morphOneBatch","batch","fromIsMany","animateIndex","animateCount","forceManyOne","batchMany","batchOne","batchFrom","batchTo","individualAnimationCfg","separateAnimationCfg","fromIndividuals","toIndividuals","morphBatches","getPathList","pathList_1","DATA_COUNT_THRESHOLD","getUniversalTransitionGlobalStore","getGroupIdDimension","flattenDataDiffItems","seriesInfo","groupDim","fadeInElement","newEl","newSeries","removeEl","computedTransform","stopAnimation","animateElementStyles","animationConfig","oldStyle","getOldStyle","isAllIdSame","oldDiffItems","newDiffItems","oldItem","transitionBetween","oldList","newList","updateMorphingPathProps","rawFrom","rawTo","findKeyDim","oldKeyDim","newKeyDim","hasMorphAnimation","createKeyGetter","isOld","onlyGetId","diffItem","dataGroupId","keyDim","dimOrdinalMeta","itemVal","useId","isElementStillInChart","updateOneToOne","oldIndices","newData","oldElsList","newIndices","newElsList","newSeris","view","getSeriesTransitionKey","seriesKey","convertArraySeriesKeyToString","getDivideShapeFromData","findTransitionSeriesBatches","globalStore","updateBatches","oldDataMap","oldDataMapForSplit","oldDataGroupId","transitionKey","transitionKeyStr","newDataGroupId","oldSeries_1","oldData_1","querySeries","found","transitionSeriesFromOpt","transitionOpt","installUniversalTransition","ecMOdel","transOpt","SERIES_UNIVERSAL_TRANSITION_PROP","updateBatches_1","allSeries","savedSeries","savedDataGroupIds","savedData","CanvasRenderer","SVGRenderer","LineChart","BarChart","PieChart","ScatterChart","RadarChart","MapChart","TreeChart","TreemapChart","GraphChart","GaugeChart","FunnelChart","ParallelChart","SankeyChart","BoxplotChart","CandlestickChart","EffectScatterChart","LinesChart","HeatmapChart","PictorialBarChart","ThemeRiverChart","SunburstChart","CustomChart","GridComponent","PolarComponent","GeoComponent","SingleAxisComponent","ParallelComponent","CalendarComponent","GraphicComponent","ToolboxComponent","TooltipComponent","AxisPointerComponent","BrushComponent","TitleComponent","TimelineComponent","MarkPointComponent","MarkLineComponent","MarkAreaComponent","LegendComponent","DataZoomComponent","DataZoomInsideComponent","DataZoomSliderComponent","VisualMapComponent","VisualMapContinuousComponent","VisualMapPiecewiseComponent","AriaComponent","TransformComponent","DatasetComponent","UniversalTransition","LabelLayout"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150]}