{"version":3,"file":"detailModal-e8b7027b.js","sources":["../../src/views/baseset/monitor/sunrise/detailModal.vue"],"sourcesContent":["<template>\n  <BasicModal sicModal v-bind=\"$attrs\" @register=\"registerModal\" :title=\"dialogTitle\">\n    <template #footer>\n      <a-button key=\"submit\" type=\"primary\" :loading=\"loading\" @click=\"exportExcel\">导出</a-button>\n    </template>\n    <a-table\n      :columns=\"detailColumns\"\n      :data-source=\"detailList\"\n      :pagination=\"false\"\n      size=\"small\"\n      bordered\n      :scroll=\"{ x: 500, y: 600 }\"\n    >\n      <template #bodyCell=\"{ text }\">\n        <a>{{ text }}</a>\n      </template>\n    </a-table>\n  </BasicModal>\n</template>\n<script lang=\"ts\">\n  import { defineComponent, ref, reactive, onMounted } from 'vue';\n  import { BasicModal, useModalInner } from '/@/components/Modal';\n  import type { UploadProps } from 'ant-design-vue';\n  import { UploadOutlined, DeleteOutlined } from '@ant-design/icons-vue';\n  import { getDetailList, getDetailColumns, exportSunriseSunset } from './sunriseSet';\n  import { exportExcelFile } from '@/utils/file/download';\n\n  export default defineComponent({\n    name: 'AccountModal',\n    components: { BasicModal },\n    emits: ['success', 'register'],\n    setup(_, { emit }) {\n      const isUpdate = ref(true);\n      const loading = ref<boolean>(false);\n      let detailList = ref([]);\n      const expand = ref(false);\n      const dialogTitle = ref('');\n      const searchInfo = reactive({\n        stationId: '',\n        year: null,\n      });\n      const formRef = ref();\n      const fileList = ref<UploadProps['fileList']>([]);\n      const editableData: UnwrapRef<Record<string, DataItem>> = reactive({});\n      const detailColumns = getDetailColumns();\n      const onFinish = (values: any) => {\n        console.log('Received values of form: ', values);\n      };\n\n      const [registerModal, { setModalProps }] = useModalInner(async (data) => {\n        setModalProps({ confirmLoading: false });\n        isUpdate.value = !!data?.isUpdate;\n        searchInfo.stationId = data.record.stationId;\n        searchInfo.year = data.record.year;\n        dialogTitle.value = data.record.stationName;\n        getDetailList(searchInfo).then((data) => {\n          detailList.value = data.result;\n        });\n      });\n\n      // 导出到excel\n      function exportExcel() {\n        exportSunriseSunset(searchInfo).then((res) => {\n          exportExcelFile(res?.data, searchInfo.year + '-日出数据.xls');\n        });\n      }\n\n      onMounted(() => {});\n      return {\n        registerModal,\n        expand,\n        formRef,\n        exportExcel,\n        onFinish,\n        detailColumns,\n        detailList,\n        editableData,\n        fileList,\n        UploadOutlined,\n        DeleteOutlined,\n        loading,\n        dialogTitle,\n      };\n    },\n  });\n</script>\n\n<style scoped>\n  .ant-table-body {\n    min-height: 1000px;\n    max-height: 100px;\n    overflow: auto scroll;\n  }\n</style>\n"],"names":["_sfc_main","defineComponent","BasicModal","_","emit","isUpdate","ref","loading","detailList","expand","dialogTitle","searchInfo","reactive","formRef","fileList","editableData","detailColumns","getDetailColumns","onFinish","values","registerModal","setModalProps","useModalInner","data","__async","getDetailList","exportExcel","exportSunriseSunset","res","exportExcelFile","onMounted","UploadOutlined","DeleteOutlined","_component_BasicModal","_resolveComponent","_openBlock","_createBlock","_mergeProps","_ctx","_withCtx","_createVNode","_component_a_button","_component_a_table"],"mappings":"slBA2BE,MAAAA,EAAeC,EAAgB,CAC7B,KAAM,eACN,WAAY,CAAE,WAAAC,CAAW,EACzB,MAAO,CAAC,UAAW,UAAU,EAC7B,MAAMC,EAAG,CAAE,KAAAC,GAAQ,CACX,MAAAC,EAAWC,EAAI,EAAI,EACnBC,EAAUD,EAAa,EAAK,EAC9B,IAAAE,EAAaF,EAAI,CAAA,CAAE,EACjB,MAAAG,EAASH,EAAI,EAAK,EAClBI,EAAcJ,EAAI,EAAE,EACpBK,EAAaC,EAAS,CAC1B,UAAW,GACX,KAAM,IAAA,CACP,EACKC,EAAUP,IACVQ,EAAWR,EAA6B,CAAA,CAAE,EAC1CS,EAAoDH,EAAS,CAAA,CAAE,EAC/DI,EAAgBC,IAChBC,EAAYC,GAAgB,CACxB,QAAA,IAAI,4BAA6BA,CAAM,CAAA,EAG3C,CAACC,EAAe,CAAE,cAAAC,CAAe,CAAA,EAAIC,EAAqBC,GAASC,EAAA,sBACzDH,EAAA,CAAE,eAAgB,EAAA,CAAO,EAC9BhB,EAAA,MAAQ,CAAC,EAACkB,GAAA,MAAAA,EAAM,UACdZ,EAAA,UAAYY,EAAK,OAAO,UACxBZ,EAAA,KAAOY,EAAK,OAAO,KAClBb,EAAA,MAAQa,EAAK,OAAO,YAChCE,EAAcd,CAAU,EAAE,KAAMY,GAAS,CACvCf,EAAW,MAAQe,EAAK,MAAA,CACzB,CAAA,EACF,EAGD,SAASG,GAAc,CACrBC,EAAoBhB,CAAU,EAAE,KAAMiB,GAAQ,CAC5CC,EAAgBD,GAAA,YAAAA,EAAK,KAAMjB,EAAW,KAAO,WAAW,CAAA,CACzD,CACH,CAEA,OAAAmB,EAAU,IAAM,CAAA,CAAE,EACX,CACL,cAAAV,EACA,OAAAX,EACA,QAAAI,EACA,YAAAa,EACA,SAAAR,EACA,cAAAF,EACA,WAAAR,EACA,aAAAO,EACA,SAAAD,EACA,eAAAiB,EACA,eAAAC,EACA,QAAAzB,EACA,YAAAG,CAAA,CAEJ,CACF,CAAC,+DAnFDuB,EAAAC,EAgBa,YAhBb,EAAqE,OAAAC,EAAA,EAAaC,EAAAH,EAAAI,EAAA,CAAA,SAAA,EAAA,EAAAC,EAAA,OAAA,CAAA,WAAAA,EAAA,cACrE,MAAMA,EAAA,WAAA,CACf,EAAA,CAAA,OAAaC,EAAS,IAAA,CAAAC,EAAMC,EAAS,CAAE,IAAA,SAAmB,KAAA,UAAA,QAAAH,EAAA,4DAalD,EAAA,EAAA,CAAA,UAAA,SAAA,CAAA,CAAA,CAAA,UAVPC,EAAS,IAAA,CAAAC,EACTE,EAAuB,CACvB,QAAYJ,EAAA,cACb,cAAYA,EAAA,WACZ,WAAQ,GACP,KAAM,QAAA,SAAA,GAEI,OAAQ,SACA,GADI,CAAA,EAAA"}