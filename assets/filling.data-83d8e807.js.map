{"version":3,"file":"filling.data-83d8e807.js","sources":["../../src/views/po/assess/filling/filling.data.ts"],"sourcesContent":["import { ref } from 'vue';\nimport { defHttp } from '/@/utils/http/axios';\nimport { BasicColumn } from '/@/components/Table';\nimport { useRender } from '@/components/Table';\nimport type { FormProps } from '/@/components/Form/src/types/form';\nimport { useUserStore } from '/@/store/modules/user';\n\nexport enum Api {\n  LIST_STATION_TREE_URL = '/baseset/common/list-orgStationTree',\n  LIST_STATION_PERIOD_URL = '/baseset/period/list',\n  LIST_TYPE_INDEX_URL = '/baseset/assessrule/index/typeIndexList',\n  CREATE_URL = '/po/assess/filling/create',\n  UPDATE_URL = '/po/assess/filling/update',\n  DELETE_URL = '/po/assess/filling/delete',\n  UPLOAD_FILE_URL = '/po/assess/filling/upload-file',\n  EXPORT_EXCEL_URL = '/po/assess/filling/export-excel',\n  GET_URL = '/po/assess/filling/get',\n  PAGE_URL = '/po/assess/filling/page',\n  LIST_DETAIL_URL = '/po/assess/filling/detail/list',\n  LIST_SUMMARY_URL = '/po/assess/filling/summary/list',\n}\n\n// 获取电站树\nexport const getTreeList = (params) =>\n  defHttp.post(\n    {\n      url: Api.LIST_STATION_TREE_URL,\n      params,\n    },\n    {},\n  );\n\n// 获取电站分期\nexport const getStationPeriod = (params) =>\n  defHttp.get(\n    {\n      url: Api.LIST_STATION_PERIOD_URL,\n      params,\n    },\n    {},\n  );\n\n// 获取细则填报\nexport const getTypeIndexList = (params) =>\n  defHttp.get(\n    {\n      url: Api.LIST_TYPE_INDEX_URL,\n      params,\n    },\n    {},\n  );\n\n// 添加细则填报\nexport const createData = (params) =>\n  defHttp.post(\n    {\n      url: Api.CREATE_URL,\n      params,\n    },\n    {},\n  );\n\n// 修改细则填报\nexport const updateData = (params) =>\n  defHttp.put(\n    {\n      url: Api.UPDATE_URL,\n      params,\n    },\n    {},\n  );\n\nexport const saveData = (params) => {\n  if (!params.id) {\n    return createData(params);\n  }\n  return updateData(params);\n};\n\n// 删除细则填报\nexport const deleteData = (params) =>\n  defHttp.delete(\n    {\n      url: Api.DELETE_URL,\n      params,\n    },\n    {},\n  );\n\n// 导出细则填报\nexport const exportExcel = (params) =>\n  defHttp.post(\n    {\n      url: Api.EXPORT_EXCEL_URL,\n      params,\n      responseType: 'blob',\n    },\n    { isOnlyResult: true },\n  );\n\n// 上传细则填报文件\nexport const uploadFile = (params) =>\n  defHttp.post(\n    {\n      url: Api.UPLOAD_FILE_URL,\n      params,\n    },\n    {},\n  );\n\n// 获取细则填报\nexport const getData = (params) =>\n  defHttp.get(\n    {\n      url: Api.GET_URL,\n      params,\n    },\n    {},\n  );\n\n// 分页获取细则填报列表\nexport const getPage = (params) =>\n  defHttp.get(\n    {\n      url: Api.PAGE_URL,\n      params,\n    },\n    {},\n  );\n\n// 获取细则填报明细列表\nexport const getDetailList = (params) =>\n  defHttp.get(\n    {\n      url: Api.LIST_DETAIL_URL,\n      params,\n    },\n    {},\n  );\n\n// 获取细则填报汇总列表\nexport const getSummaryList = (params) =>\n  defHttp.get(\n    {\n      url: Api.LIST_SUMMARY_URL,\n      params,\n    },\n    {},\n  );\n\nconst formatMoney = ref({ type: 'Money', format: '#,###.000000' }) as any;\nexport const columns = (): BasicColumn[] => {\n  const result = [\n    {\n      title: '单据编号',\n      dataIndex: 'billCode',\n      sorter: true,\n      resizable: true,\n      width: 200,\n    },\n    {\n      title: '所属公司',\n      dataIndex: 'stationOrganName',\n      headAlign: 'center',\n      align: 'left',\n      sorter: true,\n      resizable: true,\n      width: 220,\n    },\n    {\n      title: '电站名称',\n      dataIndex: 'stationName',\n      headAlign: 'center',\n      align: 'left',\n      sorter: true,\n      resizable: true,\n      width: 220,\n    },\n    {\n      title: '考核月份',\n      dataIndex: 'assessCycle',\n      sorter: true,\n      resizable: true,\n      width: 120,\n    },\n    {\n      title: '考核类型',\n      dataIndex: 'assessKind',\n      sorter: true,\n      resizable: true,\n      width: 120,\n      customRender: ({ record }) => {\n        return record.assessKindText;\n      },\n    },\n    {\n      title: '考核总费用(万元)',\n      dataIndex: 'totalAmount',\n      headAlign: 'center',\n      align: 'right',\n      sorter: true,\n      resizable: true,\n      width: 150,\n      format: formatMoney,\n    },\n    {\n      title: '返还总费用(万元)',\n      dataIndex: 'returnAmount',\n      headAlign: 'center',\n      align: 'right',\n      sorter: true,\n      resizable: true,\n      width: 150,\n      format: formatMoney,\n    },\n    {\n      title: '分摊总费用(万元)',\n      dataIndex: 'compensateShareAmount',\n      headAlign: 'center',\n      align: 'right',\n      sorter: true,\n      resizable: true,\n      width: 150,\n      format: formatMoney,\n    },\n    {\n      title: '补偿总费用(万元)',\n      dataIndex: 'compensateTotalAmount',\n      headAlign: 'center',\n      align: 'right',\n      sorter: true,\n      resizable: true,\n      width: 150,\n      format: formatMoney,\n    },\n    {\n      title: '总考核电量(MWH)',\n      dataIndex: 'totalElectricity',\n      headAlign: 'center',\n      align: 'right',\n      sorter: true,\n      resizable: true,\n      width: 150,\n    },\n    {\n      title: '净收入(万元)',\n      dataIndex: 'netIncome',\n      headAlign: 'center',\n      align: 'right',\n      sorter: true,\n      resizable: true,\n      width: 150,\n      format: formatMoney,\n    },\n    {\n      title: '考核返还小计(万元) ',\n      dataIndex: 'returnSubtotal',\n      headAlign: 'center',\n      align: 'right',\n      resizable: true,\n      width: 150,\n      format: formatMoney,\n    },\n    {\n      title: '补偿分摊小计(万元)',\n      dataIndex: 'compensateSubtotal',\n      headAlign: 'center',\n      align: 'right',\n      resizable: true,\n      width: 150,\n      format: formatMoney,\n    },\n    {\n      title: '创建人',\n      dataIndex: 'personMemberName',\n      sorter: true,\n      resizable: true,\n      width: 120,\n    },\n    {\n      title: '创建时间',\n      dataIndex: 'fillinDate',\n      sorter: true,\n      resizable: true,\n      width: 150,\n      customRender: ({ text }) => {\n        return useRender.renderDate(text);\n      },\n    },\n    {\n      title: '审批状态',\n      dataIndex: 'status',\n      sorter: true,\n      resizable: true,\n      width: 100,\n      customRender: ({ text, record }) => {\n        return useRender.renderFlowStatus(text, record.statusText);\n      },\n    },\n  ];\n  if (useUserStore().isMultiOrganization) {\n    return result as BasicColumn[];\n  } else {\n    const [one, , ...others] = result;\n    return [one, ...others] as BasicColumn[];\n  }\n};\n\nexport const searchForm: FormProps = {\n  baseColProps: { span: 8 },\n  labelWidth: 120,\n  autoAdvancedLine: 1,\n  schemas: [\n    {\n      field: 'billCode',\n      label: '单据编号',\n      component: 'Input',\n    },\n    {\n      field: 'assessKind',\n      label: '考核类型',\n      component: 'DictSelectBox',\n      componentProps: {\n        type: 'assess_kind',\n      },\n    },\n    {\n      field: 'assessCycle',\n      label: '考核月份 ',\n      component: 'MonthPicker',\n      componentProps: {\n        format: 'YYYY-MM',\n        valueFormat: 'YYYY-MM',\n        style: 'width:100%',\n      },\n    },\n    {\n      field: 'status',\n      label: '审批状态',\n      component: 'DictSelectBox',\n      componentProps: {\n        type: 'bpm_process_instance_result',\n      },\n    },\n  ],\n};\n\nexport const searchBoxColumns = ref([\n  { title: '期数', dataIndex: 'periodName', key: 'periodName', align: 'center', minWidth: 120 },\n  { title: '考核生效时间', dataIndex: 'effectiveDate', align: 'center', minWidth: 100 },\n  { title: '脱硫电价(元)', dataIndex: 'desulfurizationPrice', align: 'center', minWidth: 120 },\n]);\n\n// 细则明细\nexport const detailColumns: BasicColumn[] = [\n  {\n    title: '类别',\n    dataIndex: 'assessIndexKind',\n    headAlign: 'center',\n    align: 'left',\n    minWidth: 150,\n    fixed: 'left',\n  },\n  {\n    title: '类型',\n    dataIndex: 'assessIndexName',\n    headAlign: 'center',\n    align: 'left',\n    minWidth: 150,\n  },\n  {\n    title: '分项',\n    dataIndex: 'assessDetail',\n    headAlign: 'center',\n    align: 'left',\n    width: 300,\n  },\n  {\n    title: '细则指标',\n    dataIndex: 'indexName',\n    headAlign: 'center',\n    align: 'left',\n    minWidth: 200,\n  },\n  {\n    slots: { title: 'assessResult' },\n    dataIndex: 'assessResult',\n    headAlign: 'center',\n    align: 'left',\n    width: 300,\n  },\n  {\n    title: '发布电量(MWH)',\n    dataIndex: 'assessElectricity',\n    width: 180,\n  },\n  {\n    title: '发布金额(万元)',\n    dataIndex: 'assessAmount',\n    width: 180,\n  },\n  {\n    title: '情况分析',\n    dataIndex: 'situationAnalysis',\n    width: 300,\n  },\n  {\n    title: '备注',\n    dataIndex: 'remark',\n    headAlign: 'center',\n    align: 'left',\n    width: 300,\n  },\n  {\n    title: '反算费用(万元)',\n    dataIndex: 'reverseCalculationAmount',\n    headAlign: 'center',\n    align: 'right',\n    minWidth: 150,\n    format: formatMoney,\n  },\n];\n\n// 细则汇总\nexport const summaryColumns: BasicColumn[] = [\n  {\n    title: '细则指标',\n    dataIndex: 'indexName',\n    headAlign: 'center',\n    align: 'left',\n    width: 180,\n  },\n  {\n    title: '发布电量(MWH)',\n    dataIndex: 'assessElectricity',\n    headAlign: 'center',\n    align: 'right',\n    width: 150,\n  },\n  {\n    title: '发布金额(万元)',\n    dataIndex: 'assessAmount',\n    headAlign: 'center',\n    align: 'right',\n    width: 150,\n    format: formatMoney,\n  },\n  {\n    title: '反算费用(万元)',\n    dataIndex: 'reverseCalculationAmount',\n    headAlign: 'center',\n    align: 'right',\n    width: 150,\n    format: formatMoney,\n  },\n];\n\nexport const detailTableProps: any = {\n  pagination: false,\n  striped: false,\n  bordered: true,\n  canResize: false,\n  actionColumn: {\n    width: 80,\n    title: '操作',\n    dataIndex: 'action',\n  },\n};\n"],"names":["getTreeList","params","defHttp","createData","updateData","saveData","exportExcel","getData","getPage","getDetailList","getSummaryList","formatMoney","ref","columns","result","record","text","useRender","useUserStore","one","others","searchForm","searchBoxColumns","detailColumns","summaryColumns"],"mappings":"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AAgB,CACd,KAAM,aACR,CACF,EACA,CACE,MAAO,cACP,MAAO,QACP,UAAW,cACX,eAAgB,CACd,OAAQ,UACR,YAAa,UACb,MAAO,YACT,CACF,EACA,CACE,MAAO,SACP,MAAO,OACP,UAAW,gBACX,eAAgB,CACd,KAAM,6BACR,CACF,CACF,CACF,EAEaC,EAAmBV,EAAI,CAClC,CAAE,MAAO,KAAM,UAAW,aAAc,IAAK,aAAc,MAAO,SAAU,SAAU,GAAI,EAC1F,CAAE,MAAO,SAAU,UAAW,gBAAiB,MAAO,SAAU,SAAU,GAAI,EAC9E,CAAE,MAAO,UAAW,UAAW,uBAAwB,MAAO,SAAU,SAAU,GAAI,CACxF,CAAC,EAGYW,EAA+B,CAC1C,CACE,MAAO,KACP,UAAW,kBACX,UAAW,SACX,MAAO,OACP,SAAU,IACV,MAAO,MACT,EACA,CACE,MAAO,KACP,UAAW,kBACX,UAAW,SACX,MAAO,OACP,SAAU,GACZ,EACA,CACE,MAAO,KACP,UAAW,eACX,UAAW,SACX,MAAO,OACP,MAAO,GACT,EACA,CACE,MAAO,OACP,UAAW,YACX,UAAW,SACX,MAAO,OACP,SAAU,GACZ,EACA,CACE,MAAO,CAAE,MAAO,cAAe,EAC/B,UAAW,eACX,UAAW,SACX,MAAO,OACP,MAAO,GACT,EACA,CACE,MAAO,YACP,UAAW,oBACX,MAAO,GACT,EACA,CACE,MAAO,WACP,UAAW,eACX,MAAO,GACT,EACA,CACE,MAAO,OACP,UAAW,oBACX,MAAO,GACT,EACA,CACE,MAAO,KACP,UAAW,SACX,UAAW,SACX,MAAO,OACP,MAAO,GACT,EACA,CACE,MAAO,WACP,UAAW,2BACX,UAAW,SACX,MAAO,QACP,SAAU,IACV,OAAQZ,CACV,CACF,EAGaa,EAAgC,CAC3C,CACE,MAAO,OACP,UAAW,YACX,UAAW,SACX,MAAO,OACP,MAAO,GACT,EACA,CACE,MAAO,YACP,UAAW,oBACX,UAAW,SACX,MAAO,QACP,MAAO,GACT,EACA,CACE,MAAO,WACP,UAAW,eACX,UAAW,SACX,MAAO,QACP,MAAO,IACP,OAAQb,CACV,EACA,CACE,MAAO,WACP,UAAW,2BACX,UAAW,SACX,MAAO,QACP,MAAO,IACP,OAAQA,CACV,CACF"}