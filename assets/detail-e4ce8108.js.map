{"version":3,"file":"detail-e4ce8108.js","sources":["../../src/views/oa/askreport/detail.vue"],"sourcesContent":["<template>\n  <div class=\"load\">\n    <a-spin :spinning=\"formState.spinning\" tip=\"Loading...\">\n      <div class=\"process-box\">\n        <!-- 标题 -->\n        <div class=\"header-box\">\n          <BillTitle :options=\"billTitleOption\" />\n          <WfApproveBox\n            v-if=\"formState.status != 10\"\n            @save=\"onSave\"\n            @submit=\"onSubmit\"\n            :processInstanceId=\"formState.processInstanceId\"\n            :processStatus=\"formState.status\"\n          />\n        </div>\n        <!-- 表单内容 -->\n        <div class=\"content\">\n          <a-form ref=\"formRef\" :model=\"formState\" labelAlign=\"right\" autocomplete=\"off\">\n            <a-card title=\"基本信息\" :bordered=\"false\">\n              <a-row :gutter=\"24\">\n                <a-col v-show=\"true\" :span=\"12\">\n                  <a-form-item\n                    name=\"deptName\"\n                    label=\"所在组织\"\n                    :labelCol=\"{ span: 4 }\"\n                    :rules=\"[{ required: true }]\"\n                  >\n                    <a-input disabled v-model:value=\"formState.deptName\" style=\"margin-left: 2px\" />\n                    <a-input disabled v-model:value=\"formState.id\" v-if=\"false\" />\n                  </a-form-item>\n                </a-col>\n                <a-col v-show=\"true\" :span=\"12\">\n                  <a-form-item\n                    name=\"personMemberName\"\n                    label=\"呈报人\"\n                    :labelCol=\"{ span: 4 }\"\n                    :rules=\"[{ required: true }]\"\n                  >\n                    <a-input disabled v-model:value=\"formState.personMemberName\" />\n                  </a-form-item>\n                </a-col>\n              </a-row>\n\n              <a-row :gutter=\"24\">\n                <a-col v-show=\"true\" :span=\"12\">\n                  <a-form-item\n                    name=\"fillinDate\"\n                    label=\"呈报时间\"\n                    :labelCol=\"{ span: 4 }\"\n                    :rules=\"[{ required: true }]\"\n                  >\n                    <a-date-picker\n                      v-model:value=\"formState.fillinDate\"\n                      value-format=\"YYYY-MM-DD HH:mm:ss\"\n                      format=\"YYYY-MM-DD HH:mm:ss\"\n                      style=\"width: 100%; margin-left: 2px\"\n                      show-time\n                      disabled\n                    />\n                  </a-form-item>\n                </a-col>\n              </a-row>\n\n              <a-row :gutter=\"24\">\n                <a-col v-show=\"true\" :span=\"24\">\n                  <a-form-item\n                    name=\"name\"\n                    label=\"主题\"\n                    :labelCol=\"{ span: 2 }\"\n                    :rules=\"[{ required: true, message: '请输入主题' }]\"\n                  >\n                    <a-input\n                      v-model:value=\"formState.name\"\n                      placeholder=\"请输入主题\"\n                      :disabled=\"formState.status != 0\"\n                    />\n                  </a-form-item>\n                </a-col>\n              </a-row>\n\n              <a-row :gutter=\"24\">\n                <a-col v-show=\"true\" :span=\"24\">\n                  <a-form-item\n                    name=\"handleFor\"\n                    label=\"审批人\"\n                    :labelCol=\"{ span: 2 }\"\n                    :rules=\"[{ required: true, message: '请输入审批人' }]\"\n                  >\n                    <!-- <a-input-group compact>\n                      <a-button\n                        @click=\"handleOpenOgDialog\"\n                        :disabled=\"formState.status != 0\"\n                        class=\"input-button\"\n                        >选择</a-button\n                      >\n                      <a-button\n                        @click=\"clearHandler\"\n                        :disabled=\"formState.status != 0\"\n                        class=\"input-button\"\n                        >清空</a-button\n                      >\n                      <a-input v-model:value=\"formState.handleFor\" class=\"input-input\" disabled />\n                    </a-input-group> -->\n                    <div :style=\"{ float: 'left', width: '10%' }\">\n                      <a-button\n                        type=\"link\"\n                        @click=\"handleOpenOgDialog\"\n                        :disabled=\"formState.status != 0\"\n                        >选择</a-button\n                      >\n                      <a-button type=\"link\" @click=\"clearHandler\" :disabled=\"formState.status != 0\"\n                        >清空</a-button\n                      >\n                    </div>\n                    <a-input v-model:value=\"formState.handleFor\" class=\"input-input\" disabled />\n                    <OrganDialog\n                      :title=\"`组织人员`\"\n                      v-model:visible=\"organVisible\"\n                      v-model:value=\"formState.handleForList\"\n                      @update:visible=\"organVisible = $event\"\n                      :tdata=\"treeData\"\n                      :tfields=\"{ key: 'nodeId', title: 'nodeName' }\"\n                      :width=\"800\"\n                      :height=\"600\"\n                      @cancel=\"handleOrganCancel\"\n                      @confirm=\"handleOrganConfirm\"\n                    />\n                  </a-form-item>\n                </a-col>\n              </a-row>\n\n              <a-row :gutter=\"24\">\n                <a-col v-show=\"true\" :span=\"24\">\n                  <a-form-item\n                    name=\"copyFor\"\n                    label=\"抄送人\"\n                    :labelCol=\"{ span: 2 }\"\n                    :rules=\"[{ required: false, message: '请输入抄送人' }]\"\n                  >\n                    <!-- <a-input-group compact>\n                      <a-button\n                        @click=\"handleOpenCopyOgDialog\"\n                        :disabled=\"formState.status != 0\"\n                        class=\"input-button\"\n                        >选择</a-button\n                      >\n                      <a-button\n                        @click=\"clearCopyFor\"\n                        :disabled=\"formState.status != 0\"\n                        class=\"input-button\"\n                        >清空</a-button\n                      >\n                      <a-input v-model:value=\"formState.copyFor\" class=\"input-input\" disabled />\n                    </a-input-group> -->\n                    <div :style=\"{ float: 'left', width: '10%' }\">\n                      <a-button\n                        type=\"link\"\n                        @click=\"handleOpenCopyOgDialog\"\n                        :disabled=\"formState.status != 0\"\n                        >选择</a-button\n                      >\n                      <a-button type=\"link\" @click=\"clearCopyFor\" :disabled=\"formState.status != 0\"\n                        >清空</a-button\n                      >\n                    </div>\n                    <a-input v-model:value=\"formState.copyFor\" class=\"input-input\" disabled />\n                    <OrganDialog\n                      :title=\"`组织人员`\"\n                      v-model:visible=\"organCopyVisible\"\n                      v-model:value=\"formState.copyForList\"\n                      @update:visible=\"organCopyVisible = $event\"\n                      :tdata=\"treeData\"\n                      :tfields=\"{ key: 'nodeId', title: 'nodeName' }\"\n                      :width=\"800\"\n                      :height=\"600\"\n                      @cancel=\"handleCopyOrganCancel\"\n                      @confirm=\"handleCopyOrganConfirm\"\n                    />\n                  </a-form-item>\n                </a-col>\n              </a-row>\n            </a-card>\n\n            <a-card title=\"正文\" :bordered=\"false\">\n              <div style=\"margin: 10px 0 0 80px\">\n                <Tinymce\n                  v-model=\"formState.content\"\n                  :width=\"`calc(100% - 16px)`\"\n                  :height=\"400\"\n                  :maxChars=\"5000\"\n                  :disabled=\"formState.status != 0\"\n                />\n              </div>\n            </a-card>\n\n            <a-card title=\"附件信息\" :bordered=\"false\">\n              <div class=\"clearfix\">\n                <UploadBox\n                  :width=\"800\"\n                  :height=\"550\"\n                  :maxCount=\"20\"\n                  :maxSize=\"100 * 1024 * 1024\"\n                  :application=\"`po`\"\n                  :module=\"`askReport`\"\n                  :vmode=\"formState.status == 0 ? `box` : `view`\"\n                  :bizId=\"formState.bizFileId\"\n                />\n              </div>\n            </a-card>\n          </a-form>\n        </div>\n      </div>\n    </a-spin>\n  </div>\n</template>\n\n<script lang=\"ts\" setup>\n  import { reactive, ref, onMounted, unref, toRaw } from 'vue';\n  import { saveData, initInfoItems, getIndex, getTreeData } from './askReport';\n  import { FormInstance, message } from 'ant-design-vue';\n  import { useRouter } from 'vue-router';\n  import WfApproveBox from '/@/components/Framework/WorkFlow/WfApproveBox.vue';\n  import { assign } from 'lodash-es';\n  import * as ProcessInstanceApi from '@/api/bpm/processInstance';\n  import BillTitle from '/@/components/Framework/BillTitle/BillTitle.vue';\n  import OrganDialog from '@/components/Framework/Modal/OrganDialog.vue';\n  import { TreeItem } from '/@/components/Tree';\n  import { Tinymce } from '/@/components/Tinymce/index';\n  import * as FileApi from '@/api/infra/file';\n  import UploadBox from '@/components/Framework/Combox/UploadBox.vue';\n\n  import { useUserStore } from '/@/store/modules/user';\n  import { closeCurrentTab } from '@/utils/route';\n  import { MsgManager } from '/@/message/MsgManager';\n\n  const userStore = useUserStore();\n  const getUserInfo = toRaw(userStore.getUserInfo);\n  const formState = reactive({ spinning: false, handleForList: [], copyForList: [] });\n  const treeData = ref<TreeItem[]>([]);\n  // const orgTreeData = ref<TreeSelectProps['treeData']>();\n  const organVisible = ref(false);\n  const organValue = ref([]);\n  const organCopyValue = ref([]);\n  const organCopyVisible = ref(false);\n\n  const disabledInput = ref<boolean>(true);\n  const billTitleOption = reactive<any>({});\n  billTitleOption.subject = '请示报告';\n  billTitleOption.infoItems = [];\n  const router = useRouter();\n  const { currentRoute } = router;\n  const route = unref(currentRoute);\n  const query = route.query;\n\n  const handleOrganCancel = () => {\n    organVisible.value = false; // 关闭弹框\n  };\n\n  function handleOpenOgDialog() {\n    organVisible.value = true;\n  }\n\n  const clearHandler = () => {\n    formState.handleFor = ''; // 清除审批人选择\n    handleForList.value = [];\n  };\n\n  assign(formState, {\n    spinning: false,\n    processInstanceId: '',\n    id: '',\n    billCode: '',\n    fullId: '',\n    status: 0,\n    subject: '',\n    finishedDate: '',\n    name: '',\n    content: '',\n    copyFor: '',\n    handleFor: '',\n    bizFileId: '',\n\n    fillinDate: formatCurrentTime(new Date()),\n    personMemberId: getUserInfo.orgs[0].personId,\n    personMemberName: getUserInfo.orgs[0].personMemberName,\n    deptId: getUserInfo.orgs[0].deptId,\n    deptName: getUserInfo.orgs[0].deptName,\n    organId: getUserInfo.orgs[0].orgId,\n    organName: getUserInfo.orgs[0].orgName,\n  });\n\n  function formatCurrentTime(date) {\n    // 获取当前时间并打印\n\n    const yy = date.getFullYear();\n    const mm = date.getMonth() + 1 < 10 ? '0' + (date.getMonth() + 1) : date.getMonth() + 1;\n    const dd = date.getDate() < 10 ? '0' + date.getDate() : date.getDate();\n    const hh = date.getHours() < 10 ? '0' + date.getHours() : date.getHours();\n    const mf = date.getMinutes() < 10 ? '0' + date.getMinutes() : date.getMinutes();\n    const ss = date.getSeconds() < 10 ? '0' + date.getSeconds() : date.getSeconds();\n    const gettime = yy + '-' + mm + '-' + dd + ' ' + hh + ':' + mf + ':' + ss;\n    return gettime;\n  }\n\n  const handleCopyOrganCancel = () => {\n    organCopyVisible.value = false; // 关闭弹框\n  };\n\n  function handleOpenCopyOgDialog() {\n    organCopyVisible.value = true;\n  }\n\n  const clearCopyFor = () => {\n    formState.copyFor = ''; // 清除抄送人选择\n    copyForList.value = [];\n  };\n\n  // 查询左侧电站树数据\n  async function queryDeptTreeList() {\n    // const result = JSON.parse(\n    //   `{\"code\":0,\"result\":[{\"orgId\":\"AABAB68C2D0440ADA0A52AE93B9508A0\",\"parentId\":\"HZ93a0a37bcad63b017bd784ee2012e7\",\"code\":\"GFJLTYYYZ\",\"fullId\":\"/HZ93a0bf6ab8dd83016ab8deaca70009.ogn/91EEFF16B1FF4F5CBF5CECDB928689DB.ogn/0C3B5ADB82C748C5828846EC7B717CCE.dpt/HZ93a0a37bcad63b017bd784ee2012e7.dpt/AABAB68C2D0440ADA0A52AE93B9508A0.dpt\",\"name\":\"吉林通榆\",\"deviceCategory\":null,\"deviceType\":null,\"categoryName\":null,\"typeName\":null,\"propertyValue\":\"fisheries\",\"stationId\":null,\"nodeId\":\"AABAB68C2D0440ADA0A52AE93B9508A0\",\"nodeName\":\"吉林通榆\",\"nodeType\":null,\"typeSort\":null,\"categorySort\":null,\"typeCode\":null,\"children\":[]},{\"orgId\":\"BC583036CFFA4EB3AE4ECCC21E57F682\",\"parentId\":\"HZ93a0a37bcad63b017bd784ee2012e7\",\"code\":\"GFJSRDYYZ\",\"fullId\":\"/HZ93a0bf6ab8dd83016ab8deaca70009.ogn/91EEFF16B1FF4F5CBF5CECDB928689DB.ogn/0C3B5ADB82C748C5828846EC7B717CCE.dpt/HZ93a0a37bcad63b017bd784ee2012e7.dpt/BC583036CFFA4EB3AE4ECCC21E57F682.dpt\",\"name\":\"江苏如东\",\"deviceCategory\":null,\"deviceType\":null,\"categoryName\":null,\"typeName\":null,\"propertyValue\":\"station\",\"stationId\":\"HZ93a0a35f810e6e015f904d09562813\",\"nodeId\":\"BC583036CFFA4EB3AE4ECCC21E57F682\",\"nodeName\":\"江苏如东\",\"nodeType\":null,\"typeSort\":null,\"categorySort\":null,\"typeCode\":null,\"children\":[{\"orgId\":null,\"parentId\":null,\"code\":null,\"fullId\":null,\"name\":null,\"deviceCategory\":\"gfq\",\"deviceType\":\"jzsnbq\",\"categoryName\":null,\"typeName\":\"jzsnbq\",\"propertyValue\":null,\"stationId\":\"HZ93a0a35f810e6e015f904d09562813\",\"nodeId\":\"7e14c133613b443590005078554bb321d\",\"nodeName\":\"gfq-cateGory\",\"nodeType\":\"category\",\"typeSort\":null,\"categorySort\":1,\"typeCode\":\"gfq\",\"children\":[{\"orgId\":null,\"parentId\":null,\"code\":null,\"fullId\":null,\"name\":null,\"deviceCategory\":\"gfq\",\"deviceType\":\"zcsnbq\",\"categoryName\":\"gfq\",\"typeName\":\"zcsnbq\",\"propertyValue\":null,\"stationId\":\"HZ93a0a35f810e6e015f904d09562813\",\"nodeId\":\"0d76f0a575a94fa599f63d8eb1a4283f\",\"nodeName\":\"zcsnbq-type\",\"nodeType\":\"type\",\"typeSort\":1,\"categorySort\":null,\"typeCode\":\"zcsnbq\",\"children\":[]},{\"orgId\":null,\"parentId\":null,\"code\":null,\"fullId\":null,\"name\":null,\"deviceCategory\":\"gfq\",\"deviceType\":\"jzsnbq\",\"categoryName\":\"gfq\",\"typeName\":\"jzsnbq\",\"propertyValue\":null,\"stationId\":\"HZ93a0a35f810e6e015f904d09562813\",\"nodeId\":\"7e14c133613b443590005078554bb797\",\"nodeName\":\"jzsnbq-type\",\"nodeType\":\"type\",\"typeSort\":2,\"categorySort\":null,\"typeCode\":\"jzsnbq\",\"children\":[]}]}]},{\"orgId\":\"HZ93a0a35fd71b32015fd849228c100a\",\"parentId\":\"HZ93a0a37bcad63b017bd784ee2012e7\",\"code\":\"GFSDZBYYZ\",\"fullId\":\"/HZ93a0bf6ab8dd83016ab8deaca70009.ogn/91EEFF16B1FF4F5CBF5CECDB928689DB.ogn/0C3B5ADB82C748C5828846EC7B717CCE.dpt/HZ93a0a37bcad63b017bd784ee2012e7.dpt/HZ93a0a35fd71b32015fd849228c100a.dpt\",\"name\":\"山东高青\",\"deviceCategory\":null,\"deviceType\":null,\"categoryName\":null,\"typeName\":null,\"propertyValue\":\"fisheries\",\"stationId\":null,\"nodeId\":\"HZ93a0a35fd71b32015fd849228c100a\",\"nodeName\":\"山东高青\",\"nodeType\":null,\"typeSort\":null,\"categorySort\":null,\"typeCode\":null,\"children\":[]},{\"orgId\":\"HZ93a0a36120d1490161260327b63ea4\",\"parentId\":\"HZ93a0a37bcad63b017bd784ee2012e7\",\"code\":\"SDPD\",\"fullId\":\"/HZ93a0bf6ab8dd83016ab8deaca70009.ogn/91EEFF16B1FF4F5CBF5CECDB928689DB.ogn/0C3B5ADB82C748C5828846EC7B717CCE.dpt/HZ93a0a37bcad63b017bd784ee2012e7.dpt/HZ93a0a36120d1490161260327b63ea4.dpt\",\"name\":\"山东平度\",\"deviceCategory\":null,\"deviceType\":null,\"categoryName\":null,\"typeName\":null,\"propertyValue\":\"fisheries\",\"stationId\":null,\"nodeId\":\"HZ93a0a36120d1490161260327b63ea4\",\"nodeName\":\"山东平度\",\"nodeType\":null,\"typeSort\":null,\"categorySort\":null,\"typeCode\":null,\"children\":[]},{\"orgId\":\"HZ93a0a367e001980167e84d6e2962a4\",\"parentId\":\"HZ93a0a37bcad63b017bd784ee2012e7\",\"code\":\"tjdgyyz\",\"fullId\":\"/HZ93a0bf6ab8dd83016ab8deaca70009.ogn/91EEFF16B1FF4F5CBF5CECDB928689DB.ogn/0C3B5ADB82C748C5828846EC7B717CCE.dpt/HZ93a0a37bcad63b017bd784ee2012e7.dpt/HZ93a0a367e001980167e84d6e2962a4.dpt\",\"name\":\"天津大港\",\"deviceCategory\":null,\"deviceType\":null,\"categoryName\":null,\"typeName\":null,\"propertyValue\":\"fisheries\",\"stationId\":null,\"nodeId\":\"HZ93a0a367e001980167e84d6e2962a4\",\"nodeName\":\"天津大港\",\"nodeType\":null,\"typeSort\":null,\"categorySort\":null,\"typeCode\":null,\"children\":[]}],\"message\":\"\"}`,\n    // );\n    // const list = result.result as unknown as TreeItem[];\n    // treeData.value = list;\n    const typeList = await getTreeData({\n      orgKindIds: 'ogn,dpt,pos,psm',\n      showPosition: true,\n      status: 1,\n    });\n\n    treeData.value = dig(typeList.result);\n  }\n\n  function dig(data) {\n    const list: TreeItem[] = [];\n    for (let i = 0; i < data.length; i++) {\n      const item = data[i];\n      const treeNode: TreeItem[][number] = {\n        code: item.code,\n        fullId: item.code,\n        name: item.name,\n        nodeId: item.id,\n        nodeName: item.name,\n        orgId: item.orgId,\n        parentId: item.parentId,\n        disabled: item.orgKindId === 'psm' ? false : true,\n      };\n\n      if (item.children && item.children.length > 0) {\n        treeNode.children = dig(item.children);\n      }\n\n      list.push(treeNode);\n    }\n    return list;\n  }\n\n  const handleForList = ref<any>([]);\n  const copyForList = ref<any>([]);\n\n  const handleOrganConfirm = (nodeList) => {\n    handleForList.value.length = 0;\n    if (nodeList.length > 0) {\n      let nodeNames = [];\n      nodeList.forEach((data) => {\n        const node = {\n          orgUnitId: data.value,\n          orgUnitName: data.label,\n        };\n        handleForList.value.push(node);\n        nodeNames.push(data.label);\n      });\n      formState.handleFor = nodeNames.join(',');\n    }\n    organVisible.value = false; // 关闭弹框\n  };\n\n  const handleCopyOrganConfirm = (nodeList) => {\n    copyForList.value.length = 0;\n    if (nodeList.length > 0) {\n      let nodeNames = [];\n      nodeList.forEach((data) => {\n        const node = {\n          orgUnitId: data.value,\n          orgUnitName: data.label,\n        };\n        copyForList.value.push(node);\n        nodeNames.push(data.label);\n      });\n      formState.copyFor = nodeNames.join(',');\n    }\n    organCopyVisible.value = false; // 关闭弹框\n  };\n\n  const formRef = ref<FormInstance>();\n\n  function save(status) {\n    formState.spinning = true;\n    try {\n      status = status || 0;\n      formState.handleForList = handleForList.value;\n      formState.copyForList = copyForList.value;\n      formRef.value.validateFields().then(() => {\n        formState.status = status;\n        saveData(formState).then((data) => {\n          formState.id = data;\n          getIndex({ id: data }).then((data) => {\n            assign(formState, data.result);\n          });\n          message.success(status == 1 ? '提交成功。' : '保存成功');\n          MsgManager.getInstance().sendMsg('askreport', {});\n          if (status == 1) {\n            disabledInput.value = true;\n            closeCurrentTab();\n          }\n        });\n      });\n    } catch (error) {\n      console.log('error', error);\n    } finally {\n      formState.spinning = false;\n    }\n  }\n\n  function onSubmit() {\n    save(1);\n  }\n\n  function onSave() {\n    save(0);\n  }\n\n  onMounted(async () => {\n    query.id = await getBizParamId();\n\n    await getIndex({ id: query.id }).then((data) => {\n      if (query.id) {\n        assign(formState, data.result);\n        if (\n          formState.status == 0 &&\n          formState.personMemberId.substring(0, 32) != getUserInfo.userId\n        ) {\n          formState.status = 10;\n        }\n      } else {\n        assign(formState, query);\n        formState.spinning = false;\n        formState.status = 0;\n        formState.billCode = data.result.billCode;\n        formState.personMemberName = data.result.personMemberName;\n        formState.fillinDate = data.result.fillinDate;\n        formState.deptName = data.result.deptName;\n      }\n\n      if (formState.status == 1) {\n        disabledInput.value = true;\n      }\n    });\n\n    if (!query.id) {\n      disabledInput.value = false;\n    }\n    await getRecordable();\n\n    queryDeptTreeList();\n\n    if (\n      formState.bizFileId == null ||\n      formState.bizFileId == undefined ||\n      formState.bizFileId == ''\n    ) {\n      getBizFileId();\n    }\n  });\n\n  const getBizFileId = async () => {\n    FileApi.getBizId().then((res) => {\n      formState.bizFileId = res;\n    });\n  };\n\n  const getBizParamId = async () => {\n    let id = query.id;\n    if (!id && query.processInstanceId) {\n      const processInstance = await ProcessInstanceApi.getProcessInstance(\n        query.processInstanceId as string,\n      );\n      const businessKey = processInstance.businessKey;\n      query.id = businessKey;\n      id = businessKey;\n    }\n    return id;\n  };\n\n  const getRecordable = async () => {\n    disabledInput.value = formState.status != 0;\n    billTitleOption.title = '请示报告';\n    formState.processInstanceId = query.processInstanceId;\n    let { billCode, fillinDate, personMemberName, deptName } = formState;\n    assign(billTitleOption, { billCode, fillinDate, personMemberName, deptName });\n  };\n</script>\n<style lang=\"less\" scoped>\n  .input-button {\n    width: 6%;\n    border-color: #c5c5c5;\n  }\n\n  .input-input {\n    width: 90%;\n    color: rgb(15 15 15);\n  }\n</style>\n"],"names":["userStore","useUserStore","getUserInfo","toRaw","formState","reactive","treeData","ref","organVisible","organCopyVisible","disabledInput","billTitleOption","router","useRouter","currentRoute","query","unref","handleOrganCancel","handleOpenOgDialog","clearHandler","handleForList","assign","formatCurrentTime","date","yy","mm","dd","hh","mf","ss","handleCopyOrganCancel","handleOpenCopyOgDialog","clearCopyFor","copyForList","queryDeptTreeList","__async","typeList","getTreeData","dig","data","list","i","item","treeNode","handleOrganConfirm","nodeList","nodeNames","node","handleCopyOrganConfirm","formRef","save","status","saveData","getIndex","message","MsgManager","closeCurrentTab","error","onSubmit","onSave","onMounted","getBizParamId","getRecordable","getBizFileId","FileApi.getBizId","res","id","businessKey","ProcessInstanceApi.getProcessInstance","billCode","fillinDate","personMemberName","deptName"],"mappings":"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"}