{"version":3,"file":"settlementElectricity-079df1e5.js","sources":["../../src/views/po/elec/settlementelec/settlementElectricity.ts"],"sourcesContent":["import { defHttp } from '/@/utils/http/axios';\nimport { BasicColumn } from '/@/components/Table';\nimport { useRender } from '@/components/Table';\nimport { reactive, ref } from 'vue';\nimport { SelectProps } from 'ant-design-vue';\nimport { useUserStore } from '/@/store/modules/user';\n\nenum Api {\n  treeData = '/baseset/common/list-orgStationPeriodTree',\n  areaList = '/po/settlementElectricity/page',\n  insertUrl = '/po/settlementElectricity/create',\n  updateUrl = '/po/settlementElectricity/update',\n  getPeriods = '/po/settlementElectricity/periods',\n  deleteUrl = '/po/settlementElectricity/delete',\n  getIndexUrl = '/po/settlementElectricity/get',\n  verificationDateUrl = '/po/settlementElectricity/verificationDate',\n  elecDataUrl = '/po/settlementElectricity/getElecData',\n  partyDataUrl = '/po/settlementElectricity/getPartyData',\n  exportExcel = '/po/settlementElectricity/export-excel',\n}\nexport function getSettlementElectricityListColumns(options: any[]): BasicColumn[] {\n  return [\n    {\n      title: '单据编号',\n      dataIndex: 'billCode',\n      width: 200,\n      resizable: true,\n      sorter: true,\n    },\n    {\n      title: '开始时间',\n      dataIndex: 'startDate',\n      width: 200,\n      resizable: true,\n      sorter: true,\n    },\n    {\n      title: '结束时间',\n      dataIndex: 'endDate',\n      width: 200,\n      resizable: true,\n      sorter: true,\n    },\n    {\n      title: '所属公司',\n      dataIndex: 'stationOrganName',\n      width: 200,\n      headAlign: 'center',\n      align: 'left',\n      resizable: true,\n      sorter: true,\n      ifShow: useUserStore().isMultiOrganization,\n    },\n    {\n      title: '电站名称',\n      dataIndex: 'stationName',\n      width: 200,\n      headAlign: 'center',\n      align: 'left',\n      resizable: true,\n      sorter: true,\n    },\n    {\n      title: '期数',\n      dataIndex: 'periodName',\n      width: 150,\n      headAlign: 'center',\n      align: 'center',\n      resizable: true,\n      sorter: true,\n    },\n    {\n      title: '结算单位',\n      dataIndex: 'settlePartyName',\n      width: 200,\n      headAlign: 'center',\n      align: 'left',\n      resizable: true,\n      sorter: true,\n    },\n    {\n      title: '实发电量(kWh)',\n      dataIndex: 'genElec',\n      width: 160,\n      headAlign: 'center',\n      align: 'right',\n      resizable: true,\n      sorter: true,\n    },\n    {\n      title: '上网电量(kWh)',\n      dataIndex: 'onlineElec',\n      width: 200,\n      headAlign: 'center',\n      align: 'right',\n      resizable: true,\n      sorter: true,\n    },\n    {\n      title: '结算电量(kWh)',\n      dataIndex: 'settlementElec',\n      width: 200,\n      headAlign: 'center',\n\n      align: 'right',\n      resizable: true,\n      sorter: true,\n    },\n    {\n      title: '结算电费(元)',\n      dataIndex: 'settlementCost',\n      width: 200,\n      align: 'right',\n      headAlign: 'center',\n\n      customRender: ({ text }) => {\n        return formatCurrency(text);\n      },\n      resizable: true,\n      sorter: true,\n    },\n    {\n      title: '结算单价(元)',\n      dataIndex: 'settlementPrice',\n      width: 200,\n      align: 'right',\n      headAlign: 'center',\n\n      customRender: ({ text }) => {\n        return formatCurrency(text);\n      },\n      resizable: true,\n      sorter: true,\n    },\n    {\n      title: '创建人',\n      dataIndex: 'personMemberName',\n      width: 200,\n      resizable: true,\n      sorter: true,\n    },\n    {\n      title: '创建时间',\n      dataIndex: 'fillinDate',\n      width: 200,\n      customRender: ({ text }) => {\n        return useRender.renderDate(text);\n      },\n      resizable: true,\n      sorter: true,\n    },\n    {\n      title: '审批状态',\n      dataIndex: 'status',\n      customRender: ({ text, record }) => {\n        return useRender.renderFlowStatus(text, record.statusText);\n      },\n      resizable: true,\n      sorter: true,\n    },\n  ];\n}\n// 列表表头\n\nfunction formatCurrency(value) {\n  if (!value) return '$0.00';\n\n  // 将值转换为数字，并保留两位小数\n  const number = parseFloat(value).toFixed(2);\n\n  // 将数字转换为字符串并分割成整数部分和小数部分\n  const parts = number.toString().split('.');\n  parts[0] = parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\n\n  // 将字符串重新组合并返回\n  return parts.join('.');\n}\n\nexport interface DeptListItem {\n  id: string;\n  orderNo: string;\n  createTime: string;\n  remark: string;\n  status: number;\n}\n\n// 获取\nexport const getIndex = (params) =>\n  defHttp.get(\n    {\n      url: Api.getIndexUrl,\n      params,\n    },\n    {},\n  );\n\n//验重\nexport const verificationDate = (params) =>\n  defHttp.post(\n    {\n      url: Api.verificationDateUrl,\n      params,\n    },\n    {},\n  );\n\n// 组织树数据\nexport const getTreeData = (params) =>\n  defHttp.post(\n    {\n      url: Api.treeData,\n      params,\n    },\n    {},\n  );\n\n// 列表数据\nexport const getSettlementElectricityList = (params) =>\n  defHttp.get(\n    {\n      url: Api.areaList,\n      params,\n    },\n    {},\n  );\n\n// 新增\nexport const insertSettlementElectricity = (params) =>\n  defHttp.post(\n    {\n      url: Api.insertUrl,\n      params,\n    },\n    { isOnlyResult: true },\n  );\n\n// 修改\nexport const updateSettlementElectricity = (params) =>\n  defHttp.put(\n    {\n      url: Api.updateUrl,\n      params,\n    },\n    {},\n  );\n\nexport const saveData = (params) => {\n  return insertSettlementElectricity(params);\n};\n\nexport const getElecData = (params) =>\n  defHttp.post(\n    {\n      url: Api.elecDataUrl,\n      params,\n    },\n    {},\n  );\n\n// 获取结算单位\nexport const getPartyData = (params) =>\n  defHttp.get(\n    {\n      url: Api.partyDataUrl,\n      params,\n    },\n    {},\n  );\n\n// 导出 Excel\nexport function exportExcel(params) {\n  return defHttp.get({ url: Api.exportExcel, params });\n}\n\n// 删除\nexport const deleteSettlementElectricity = (params) =>\n  defHttp.delete({ url: Api.deleteUrl + '?id=' + params });\n\nexport function initInfoItems(billTitleOption, item) {\n  billTitleOption.infoItems.push({\n    key: 'billCode',\n    label: '单据编号',\n    value: item.billCode,\n    position: 'left',\n  });\n  billTitleOption.infoItems.push({\n    key: 'fillinDate',\n    label: '制单日期',\n    value: item.fillinDate,\n    position: 'center',\n  });\n  billTitleOption.infoItems.push({\n    key: 'createPerson',\n    label: '创建人',\n    value: item.deptName + '.' + item.personMemberName,\n    position: 'right',\n  });\n}\n\n// 操作附件\nexport const fileColumns: BasicColumn[] = [\n  {\n    title: '附件类型',\n    dataIndex: 'type',\n    width: 220,\n    align: 'left',\n  },\n  {\n    title: '附件',\n    dataIndex: 'name',\n    width: 100,\n  },\n];\n\nexport const detailTableProps: any = {\n  pagination: false,\n  striped: false,\n  useSearchForm: false,\n  showTableSetting: false,\n  bordered: true,\n  showIndexColumn: true,\n  canResize: false,\n  actionColumn: {\n    width: 80,\n    title: '操作',\n    dataIndex: 'action',\n  },\n};\n// Form表单对象\nexport const detailFormState = reactive({ spinning: false });\n\nexport const formState = reactive({\n  spinning: false,\n  processInstanceId: '',\n  id: '',\n  billCode: '',\n  fillinDate: '',\n  organId: '',\n  organName: '',\n  deptId: '',\n  deptName: '',\n  positionId: '',\n  positionName: '',\n  personMemberId: '',\n  personMemberName: '',\n  fullId: '',\n  status: 0,\n  subject: '',\n  finishedDate: '',\n  stationOrganId: '',\n  stationOrganName: '',\n  stationId: '',\n  stationName: '',\n  periodId: '',\n  periodName: '',\n  startDate: '',\n  endDate: '',\n  genElec: '',\n  onlineElec: '',\n  desulphurizePrice: '',\n  settlePartyId: '',\n  settlePartyName: '',\n  settlementElec: '',\n  settlementCost: '',\n  settlementPrice: '',\n  remark: '',\n});\n"],"names":["getSettlementElectricityListColumns","options","useUserStore","text","formatCurrency","useRender","record","value","parts","getIndex","params","defHttp","verificationDate","getTreeData","getSettlementElectricityList","insertSettlementElectricity","saveData","getElecData","getPartyData","exportExcel","reactive","formState"],"mappings":"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"}