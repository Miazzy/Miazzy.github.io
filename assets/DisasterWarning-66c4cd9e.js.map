{"version":3,"file":"DisasterWarning-66c4cd9e.js","sources":["../../src/components/Framework/OperationScreen/disasterIcon.ts","../../src/components/Framework/OperationScreen/DisasterWarningInfo.vue","../../src/views/da/groupOperation/overview/DisasterWarning.vue"],"sourcesContent":["export const disasterIcons = {\n  '1001': 'mdi:weather-tornado', // 台风\n  '1003': 'bi:cloud-rain-fill', // 暴雨\n  '1004': 'mingcute:snowstorm-line', // 暴雪\n  '1005': 'streamline:wind-flow-2-solid', // 寒潮\n  '1006': 'fluent:weather-squalls-24-filled', // 大风\n  '1007': 'fluent:weather-duststorm-20-filled', // 沙尘暴\n  '1008': 'fluent:weather-hail-night-24-filled', // 低温冻害\n  '1009': 'ph:thermometer-hot-fill', // 高温\n  '1011': 'typcn:weather-windy', // 干热风\n  '1014': 'fluent:weather-thunderstorm-24-filled', // 雷电\n  '1015': 'material-symbols:weather-hail', // 冰雹\n  '1016': 'mdi:defrost', // 霜冻\n  '1017': 'fluent:weather-fog-48-filled', // 大雾\n  '1019': 'mingcute:haze-line', // 霾\n  '1020': 'ion:thunderstorm', // 雷雨大风\n  '1021': 'bi:pci-card-sound', // 道路结冰\n  '1022': 'mingcute:dry-fill', // 干旱\n  '1023': 'mdi:weather-windy', // 海上大风\n  '1024': 'fa6-solid:hot-tub-person', // 高温中暑\n  '1025': 'mdi:pine-tree-fire', // 森林火险\n  '1027': 'mingcute:hail-fill', // 冰冻\n  '1029': 'mdi:garbage-can-empty', // 重污染\n  '1030': 'material-symbols:weather-mix', // 低温雨雪冰冻\n  '1031': 'streamline:wind-flow-1-solid', // 强对流\n  '1033': 'material-symbols:weather-snowy', // 大雪\n  '1034': 'material-symbols:severe-cold-rounded', // 寒冷\n  '1037': 'game-icons:ground-sprout', // 地质灾害气象风险\n  '1039': 'mdi:hot-cold', // 强降温\n  '1041': 'mingcute:fire-fill', // 森林（草原）火险\n  '1042': 'fa6-solid:kit-medical', // 医疗气象\n  '1048': 'mdi:hot-cold', // 降温\n  '1051': 'mdi:weather-dust', // 沙尘\n  '1052': 'bi:cloud-lightning-rain-fill', // 海上雷雨大风\n  '1053': 'mingcute:fog-fill', // 海上大雾\n  '1056': 'healthicons:cold-chain', // 低温\n  '1057': 'fluent:weather-rain-snow-48-filled', // 道路冰雪\n  '1058': 'ic:round-thunderstorm', // 雷暴大风\n  '1059': 'ph:thermometer-cold-fill', // 持续低温\n  '1062': 'typcn:weather-windy-cloudy', // 海区大风\n  '1065': 'fluent:weather-haze-24-filled', // 海区大雾\n  '1069': 'uis:coronavirus', // 感冒等呼吸道疾病气象条件\n  '1072': 'ion:fitness', // 心脑血管疾病气象条件\n  '1081': 'material-symbols:rainy-snow', // 电线积冰\n  '1082': 'healthicons:cardiogram', // 脑卒中气象风险\n  '11B03': 'bi:cloud-rain-fill', // 暴雨\n  '11B04': 'mingcute:snowstorm-line', // 暴雪\n  '11B05': 'streamline:wind-flow-2-solid', // 寒潮\n  '11B06': 'fluent:weather-squalls-24-filled', // 大风\n  '11B14': 'fluent:weather-thunderstorm-24-filled', // 雷电\n  '11B17': 'fluent:weather-fog-48-filled', // 大雾\n  '11B19': 'mingcute:haze-line', // 霾\n  '11B21': 'bi:pci-card-sound', // 道路结冰\n  '11B23': 'mdi:weather-windy', // 海上大风\n  '11B33': 'material-symbols:weather-snowy', // 大雪\n  '11B34': 'material-symbols:severe-cold-rounded', // 寒冷\n  '11B39': 'mdi:hot-cold', // 强降温\n  '11B57': 'fluent:weather-rain-snow-48-filled', // 道路冰雪\n  '11B99': 'ion:notifications', // 其他\n  '1201': 'ic:round-water', // 洪水\n  '1209': 'fa6-solid:bridge-water', // 中小河流洪水和山洪气象风险\n  '1211': 'icon-park-solid:water', // 中小河流洪水气象风险\n  '1214': 'ic:round-flood', // 山洪灾害事件\n  '1219': 'fa6-solid:house-flood-water', // 山洪灾害气象风险\n  '1248': 'game-icons:ground-sprout', // 地质灾害气象风险\n  '9999': 'ion:notifications', // 其他\n};\n","<template>\n  <div class=\"device-status-info\">\n    <div class=\"left\">\n      <div class=\"station-name\">\n        {{props.stationName}}\n      </div>\n    </div>\n    <div class=\"middle\">\n      <!-- <i class=\"weather-icon iconfont\" :class=\"`icon-${props.weatherIcon}`\"></i> -->\n      <!-- <SvgIcon class=\"iconfont\" :name=\"props.weatherIcon\" :size=\"36\"> </SvgIcon> -->\n      <Icon v-if=\"props.weatherIcon\" class=\"weather-icon\" :icon=\"disasterIcons[props.weatherIcon]\" color=\"#fefefe\" style=\"font-size: 0.3rem;\"></Icon>\n    </div>\n    <div class=\"right\">\n      <div class=\"warning-type\">\n        <span class=\"weather-text\">{{props.weatherName}}</span>\n        <span :class=\"props.warningLevel\">{{color[props.warningLevel]}}</span>\n      </div>\n      <p class=\"warning-content\" :title=\"props.warningContent\">\n        {{props.warningContent}}\n      </p>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\" setup>\n  import { reactive } from 'vue';\n  import { Icon } from '/@/components/Icon';\n  import { disasterIcons } from './disasterIcon';\n  const props = defineProps({\n    stationName: { type: String, default: '天门通力' }, // 电站名\n    weatherIcon: { type: String, default: '' }, // 灾害图标\n    weatherName: { type: String, default: '' }, // 灾害名\n    warningLevel: { type: String, default: 'red' }, // 预警级别\n    warningContent: {\n      type: String,\n      default: '未来24小时内，部分地区会出现暴雨，预计降雨量将达到100-200毫米，请大家注意防范。',\n    }, // 预警内容\n  });\n  const color = reactive({\n    red: '红色预警',\n    orange: '橙色预警',\n  });\n</script>\n\n<style lang=\"less\" scoped>\n  .device-status-info {\n    display: flex;\n    justify-content: flex-start;\n    align-items: center;\n    height: 0.64rem;\n    padding: 0 0.12rem;\n    border-bottom: 0.01rem solid rgba(255, 255, 255, 0.1);\n    &:last-child {\n      border-bottom: none;\n    }\n    &:hover {\n      background-color: rgba(255, 255, 255, 0.06);\n    }\n\n    .left {\n      flex: 1.2;\n      .station-name {\n        font-size: 0.14rem;\n        color: #fff;\n        line-height: 1;\n      }\n    }\n\n    .middle {\n      flex: 1;\n      text-align: center;\n    }\n\n    .right {\n      flex: 3.8;\n      .warning-type {\n        margin-bottom: 0.04rem;\n        line-height: 1;\n        font-size: 0.12rem;\n        opacity: 0.9;\n        .weather-text {\n          margin-right: 0.04rem;\n          color: #fff;\n        }\n        .red {\n          color: #ff4f38;\n        }\n        .orange {\n          color: #f7c824;\n        }\n      }\n      .warning-content {\n        margin-bottom: 0;\n        font-size: 0.12rem;\n        color: #ffffff;\n        line-height: 0.16rem;\n        opacity: 0.5;\n        display: -webkit-box; /* Safari */\n        -webkit-line-clamp: 2; /* number of lines to show */\n        -webkit-box-orient: vertical;\n        overflow: hidden;\n        text-overflow: ellipsis;\n      }\n    }\n  }\n</style>","<template>\n  <div class=\"disaster-warning\">\n    <SmallModule title=\"灾害预警\">\n      <template #content>\n        <div class=\"content-layout\">\n          <div class=\"warning-num-box\">\n            <DataIndicator\n              label=\"红色预警\"\n              @click=\"toBiReport('红色')\"\n              :value=\"topIndexData.red_count\"\n              color=\"#ff4f38\"\n            />\n            <DataIndicator\n              label=\"橙色预警\"\n              @click=\"toBiReport('橙色')\"\n              :value=\"topIndexData.orange_count\"\n              color=\"#f7c824\"\n            />\n          </div>\n          <div class=\"warning-info-box\" style=\"margin-top: 0.04rem\">\n            <template v-if=\"warningList && warningList.length\">\n              <DisasterWarningInfo\n                v-for=\"(item, index) in warningList\"\n                :key=\"index\"\n                :stationName=\"item.location_name\"\n                :weatherName=\"item.type_name\"\n                :warningContent=\"item.text\"\n                :weatherIcon=\"item.type\"\n                @click=\"handleWarning(item)\"\n              />\n            </template>\n            <NoData v-else />\n            <!-- :warningLevel=\"item.warningLevel\" -->\n          </div>\n        </div>\n      </template>\n    </SmallModule>\n  </div>\n</template>\n\n<script lang=\"ts\" setup>\n  import SmallModule from '/@/components/Framework/OperationScreen/SmallModule.vue';\n  import DataIndicator from '/@/components/Framework/OperationScreen/DataIndicator.vue';\n  import DisasterWarningInfo from '/@/components/Framework/OperationScreen/DisasterWarningInfo.vue';\n  import { reactive, UnwrapRef, onMounted, ref } from 'vue';\n  import { getDisasterWarningData } from './data';\n  import { assign } from 'lodash-es';\n  import { addTabPage } from '@/utils/route';\n  import NoData from '/@/components/Framework/Chart/NoData.vue';\n\n  function handleWarning(item) {\n    let param = { stationId: item.location_id, stationName: item.location_name };\n    let url = '/bi/safety/disasterWarning';\n    addTabPage(url, '', param);\n  }\n\n  const searchInfo: UnwrapRef<any> = reactive({});\n  const topIndexData = reactive<any>({});\n\n  onMounted(() => {\n    searchInfo.statDimension = 'year';\n    searchInfo.year = '2023';\n    queryDisasterWarningData();\n  });\n\n  const warningList = ref([]);\n  const queryDisasterWarningData = async () => {\n    let data = await getDisasterWarningData(searchInfo);\n    if (data.result) {\n      assign(topIndexData, data.result.statInfo);\n      warningList.value = data.result.list;\n    }\n  };\n\n  // 穿透方法\n  const toBiReport = async (level: string) => {\n    // 参数处理\n    let param = { warnLevel: level };\n    let url = '/bi/safety/disasterWarning';\n\n    addTabPage(url, '', param);\n  };\n</script>\n\n<style lang=\"less\" scoped>\n  .content-layout {\n    width: 100%;\n    height: 100%;\n    padding: 0 0.14rem;\n\n    .warning-num-box {\n      display: flex;\n      justify-content: space-between;\n      width: 100%;\n      height: 18.81%;\n      margin-top: -0.07rem;\n      padding: 0 1.3rem;\n      line-height: 1;\n      text-align: center;\n    }\n\n    .warning-info-box {\n      height: 81.19%;\n      overflow-y: auto;\n    }\n  }\n</style>\n"],"names":["disasterIcons","color","reactive","handleWarning","item","param","addTabPage","searchInfo","topIndexData","onMounted","queryDisasterWarningData","warningList","ref","__async","data","getDisasterWarningData","assign","toBiReport","level"],"mappings":"6nBAAO,MAAMA,EAAgB,CAC3B,KAAQ,sBACR,KAAQ,qBACR,KAAQ,0BACR,KAAQ,+BACR,KAAQ,mCACR,KAAQ,qCACR,KAAQ,sCACR,KAAQ,0BACR,KAAQ,sBACR,KAAQ,wCACR,KAAQ,gCACR,KAAQ,cACR,KAAQ,+BACR,KAAQ,qBACR,KAAQ,mBACR,KAAQ,oBACR,KAAQ,oBACR,KAAQ,oBACR,KAAQ,2BACR,KAAQ,qBACR,KAAQ,qBACR,KAAQ,wBACR,KAAQ,+BACR,KAAQ,+BACR,KAAQ,iCACR,KAAQ,uCACR,KAAQ,2BACR,KAAQ,eACR,KAAQ,qBACR,KAAQ,wBACR,KAAQ,eACR,KAAQ,mBACR,KAAQ,+BACR,KAAQ,oBACR,KAAQ,yBACR,KAAQ,qCACR,KAAQ,wBACR,KAAQ,2BACR,KAAQ,6BACR,KAAQ,gCACR,KAAQ,kBACR,KAAQ,cACR,KAAQ,8BACR,KAAQ,yBACR,QAAS,qBACT,QAAS,0BACT,QAAS,+BACT,QAAS,mCACT,QAAS,wCACT,QAAS,+BACT,QAAS,qBACT,QAAS,oBACT,QAAS,oBACT,QAAS,iCACT,QAAS,uCACT,QAAS,eACT,QAAS,qCACT,QAAS,oBACT,KAAQ,iBACR,KAAQ,yBACR,KAAQ,wBACR,KAAQ,iBACR,KAAQ,8BACR,KAAQ,2BACR,KAAQ,mBACV,2dC5BQC,EAAQC,EAAS,CACrB,IAAK,OACL,OAAQ,MAAA,CACT,+pBCSD,SAASC,EAAcC,EAAM,CAC3B,IAAIC,EAAQ,CAAE,UAAWD,EAAK,YAAa,YAAaA,EAAK,eAElDE,EADD,6BACM,GAAID,CAAK,CAC3B,CAEM,MAAAE,EAA6BL,EAAS,CAAA,CAAE,EACxCM,EAAeN,EAAc,CAAA,CAAE,EAErCO,EAAU,IAAM,CACdF,EAAW,cAAgB,OAC3BA,EAAW,KAAO,OACOG,GAAA,CAC1B,EAEK,MAAAC,EAAcC,EAAI,CAAA,CAAE,EACpBF,EAA2B,IAAYG,EAAA,sBACvC,IAAAC,EAAO,MAAMC,EAAuBR,CAAU,EAC9CO,EAAK,SACAE,EAAAR,EAAcM,EAAK,OAAO,QAAQ,EAC7BH,EAAA,MAAQG,EAAK,OAAO,KAClC,GAIIG,EAAoBC,GAAkBL,EAAA,sBAK/BP,EAFD,6BAEM,GAHJ,CAAE,UAAWY,EAGA,CAAA"}