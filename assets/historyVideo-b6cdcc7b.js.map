{"version":3,"file":"historyVideo-b6cdcc7b.js","sources":["../../src/views/monitor/smartdevice/monitorInfo/data.ts","../../src/views/monitor/smartdevice/monitorInfo/historyVideo.vue"],"sourcesContent":["import { defHttp } from '/@/utils/http/axios';\nimport { BasicColumn } from '/@/components/Table';\n\nenum Api {\n  // 获得行车记录仪坐标列表\n  getDrGpsListUrl = '/monitor/driving-recorder-gps/list',\n  // 获得电子工牌坐标列表\n  getEwcGpsListUrl = '/monitor/ele-work-card-gps/list',\n  // 获得巡检仪坐标列表\n  getIiGpsListUrl = '/monitor/inspection-instrument-gps/list',\n  // 获取巡检仪文件\n  getIiFilePageUrl = '/monitor/inspection-instrument-file/page',\n}\n\nexport const getDrGpsList = (params) =>\n  defHttp.get({ url: Api.getDrGpsListUrl, params }, { isOnlyResult: true });\n\nexport const getEwcGpsList = (params) =>\n  defHttp.get({ url: Api.getEwcGpsListUrl, params }, { isOnlyResult: true });\n\nexport const getIiGpsList = (params) =>\n  defHttp.get({ url: Api.getIiGpsListUrl, params }, { isOnlyResult: true });\n\nexport const getIiFilePage = (params) =>\n  defHttp.get({ url: Api.getIiFilePageUrl, params }, { isOnlyResult: true });\n\nexport const columns: BasicColumn[] = [\n  {\n    title: '录制时间',\n    dataIndex: 'fileCreateTime',\n    width: 140,\n  },\n  {\n    title: '文件类型',\n    dataIndex: 'fileType',\n    width: 70,\n    customRender: ({ record }) => {\n      return record.fileTypeText;\n    },\n  },\n  {\n    title: '文件大小',\n    dataIndex: 'formatFileLength',\n    width: 100,\n  },\n];\n","<template>\n  <div class=\"info-content-box\">\n    <div class=\"device-info-box\">\n      <div class=\"info-row\">\n        <span class=\"label\" style=\"width: 5em\">开始时间：</span>\n        <a-date-picker\n          v-model:value=\"startTime\"\n          format=\"YYYY-MM-DD HH:mm\"\n          value-format=\"YYYY-MM-DD HH:mm\"\n          show-time\n          style=\"width: 100%\"\n        />\n      </div>\n      <div class=\"info-row\">\n        <span class=\"label\" style=\"width: 5em\">结束时间：</span>\n        <a-date-picker\n          v-model:value=\"endTime\"\n          format=\"YYYY-MM-DD HH:mm\"\n          value-format=\"YYYY-MM-DD HH:mm\"\n          show-time\n          style=\"width: 100%\"\n        />\n      </div>\n      <div class=\"info-row search-btn\">\n        <a-button class=\"operation-btn\" type=\"primary\" @click=\"handleSearch\">查询</a-button>\n      </div>\n      <div class=\"info-row\">\n        <BasicTable\n          @register=\"registerTable\"\n          @resize-column=\"(w, col) => (col.width = w)\"\n          @row-click=\"handleRowClick\"\n        />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\" setup>\n  import { ref } from 'vue';\n  import { BasicTable, useTable } from '@/components/Table';\n  import { columns, getIiFilePage } from './data';\n\n  const emit = defineEmits(['row-click']);\n\n  const props = defineProps({\n    inspectionInstrumentId: String,\n  });\n\n  const startTime = ref();\n  const endTime = ref();\n\n  const getPageByParam = async () => {\n    const param = {\n      startTime: startTime.value,\n      endTime: endTime.value,\n      inspectionInstrumentId: props.inspectionInstrumentId,\n      fileType: 'video,image',\n    };\n    if (param.startTime) {\n      param.startTime = param.startTime + ':00';\n    }\n    if (param.endTime) {\n      param.endTime = param.endTime + ':59';\n    }\n    return await getIiFilePage(param);\n  };\n\n  const [registerTable, { reload }] = useTable({\n    api: getPageByParam,\n    columns: columns,\n    useSearchForm: false,\n    showTableSetting: false,\n    bordered: true,\n    rowKey: 'id',\n    resizeHeightOffset: 10,\n  });\n\n  const handleSearch = () => {\n    reload();\n  };\n\n  const handleRowClick = (record) => {\n    emit('row-click', record);\n  };\n</script>\n<style lang=\"less\">\n  [data-theme='dark'] .theme1 {\n    .info-content-box {\n      background-color: rgb(7 59 109 / 50%);\n\n      .info-row {\n        border-bottom: 1px solid rgb(255 255 255 / 16%);\n\n        .label {\n          color: rgb(255 255 255 / 60%);\n        }\n\n        .text {\n          color: #fff;\n        }\n      }\n    }\n  }\n\n  .theme3 {\n    .info-content-box {\n      background-color: rgb(24 144 255 / 6%);\n\n      .info-row {\n        border-bottom: 1px solid rgb(153 153 153 / 10%);\n\n        .label {\n          color: #777;\n        }\n\n        .text {\n          color: #262626;\n        }\n      }\n    }\n  }\n</style>\n<style lang=\"less\" scoped>\n  :deep(.my-layout .vben-basic-table .ant-table-wrapper) {\n    padding: unset;\n  }\n\n  :deep(.vben-basic-table .ant-table-wrapper) {\n    padding: unset;\n    border-radius: unset;\n  }\n\n  .info-content-box {\n    padding: 20px;\n    border-radius: 2px;\n\n    .search-btn {\n      display: flex;\n      align-items: center;\n      justify-content: center;\n    }\n\n    .info-row {\n      display: flex;\n      align-items: center;\n      min-height: 50px;\n      padding: 10px 0;\n      font-size: 14px;\n\n      .label {\n        flex-shrink: 0;\n        margin-right: 6px;\n        text-align: right;\n      }\n\n      .operation-btn {\n        height: 24px;\n        padding: 0 9px;\n        font-size: 12px;\n\n        & + .operation-btn {\n          margin-left: 2px;\n        }\n      }\n    }\n  }\n</style>\n"],"names":["getDrGpsList","params","defHttp","getEwcGpsList","getIiGpsList","getIiFilePage","columns","record","startTime","ref","endTime","getPageByParam","__async","param","props","registerTable","reload","useTable","handleSearch","handleRowClick","emit"],"mappings":"0jBAcO,MAAMA,GAAgBC,GAC3BC,EAAQ,IAAI,CAAE,IAAK,qCAAqB,OAAAD,CAAO,EAAG,CAAE,aAAc,GAAM,EAE7DE,GAAiBF,GAC5BC,EAAQ,IAAI,CAAE,IAAK,kCAAsB,OAAAD,CAAO,EAAG,CAAE,aAAc,GAAM,EAE9DG,GAAgBH,GAC3BC,EAAQ,IAAI,CAAE,IAAK,0CAAqB,OAAAD,CAAO,EAAG,CAAE,aAAc,GAAM,EAE7DI,EAAiBJ,GAC5BC,EAAQ,IAAI,CAAE,IAAK,2CAAsB,OAAAD,CAAO,EAAG,CAAE,aAAc,EAAM,CAAA,EAE9DK,EAAyB,CACpC,CACE,MAAO,OACP,UAAW,iBACX,MAAO,GACT,EACA,CACE,MAAO,OACP,UAAW,WACX,MAAO,GACP,aAAc,CAAC,CAAE,OAAAC,KACRA,EAAO,YAElB,EACA,CACE,MAAO,OACP,UAAW,mBACX,MAAO,GACT,CACF,ubCGQC,EAAYC,IACZC,EAAUD,IAEVE,EAAiB,IAAYC,EAAA,sBACjC,MAAMC,EAAQ,CACZ,UAAWL,EAAU,MACrB,QAASE,EAAQ,MACjB,uBAAwBI,EAAM,uBAC9B,SAAU,aAAA,EAEZ,OAAID,EAAM,YACFA,EAAA,UAAYA,EAAM,UAAY,OAElCA,EAAM,UACFA,EAAA,QAAUA,EAAM,QAAU,OAE3B,MAAMR,EAAcQ,CAAK,CAAA,GAG5B,CAACE,EAAe,CAAE,OAAAC,CAAQ,CAAA,EAAIC,EAAS,CAC3C,IAAKN,EACL,QAAAL,EACA,cAAe,GACf,iBAAkB,GAClB,SAAU,GACV,OAAQ,KACR,mBAAoB,EAAA,CACrB,EAEKY,EAAe,IAAM,CAClBF,GAAA,EAGHG,EAAkBZ,GAAW,CACjCa,EAAK,YAAab,CAAM,CAAA"}