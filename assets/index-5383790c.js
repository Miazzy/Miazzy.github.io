var n=(b,f,a)=>new Promise((r,p)=>{var g=o=>{try{i(a.next(o))}catch(l){p(l)}},m=o=>{try{i(a.throw(o))}catch(l){p(l)}},i=o=>o.done?r(o.value):Promise.resolve(o.value).then(g,m);i((a=a.apply(b,f)).next())});import{au as O,b as D,a7 as T,av as C,ax as z,az as B,aA as E,_ as L}from"./index.js";import{B as A}from"./BasicTable-0434a334.js";import"./BasicForm.vue_vue_type_style_index_0_lang-1ba7be9e.js";import"./index-085d06c7.js";import{u as M}from"./useTable-109483b3.js";import{a2 as _}from"./antd-15ac76ed.js";import{d as V,ax as H,k as x,r as I,o as N,al as W,Z as K,a9 as Z,aa as d,f as h,u as s,E as S}from"./vue-71d1abb3.js";import{P as j}from"./index-20519caf.js";import{c as q,s as G,g as J}from"./template-39a1216a.js";import"./useForm-dea3ed18.js";import"./uniqBy-92d3bc7f.js";import"./index-316f6ffb.js";import"./useWindowSizeFn-13b1b8a2.js";import"./index-f4fc48e6.js";import"./useTabs-2b062e85.js";import"./download-03e71dd5.js";import"./index-5d49b7a7.js";import"./SearchBox-22bb02d6.js";import"./UploadBox-636ecf02.js";import"./Dialog-0a006d82.js";import"./DictSelectBox.vue_vue_type_script_setup_true_lang-e03e9fe8.js";import"./OrganDialog-dd1023ce.js";import"./sortable.esm-4ae27e0b.js";import"./dict-c04c0dd8.js";import"./useContentViewHeight-7f845167.js";import"./useRender-21ce56fb.js";const Q=V({__name:"index",setup(b){const{createConfirm:f}=O();H();let a=x("");x(!1),I({});let r=I({});D();const p=()=>n(this,null,function*(){const t=o();let e=l().getFieldsValue();return e.pageNo=t.current,e.pageSize=t.pageSize,e.sortField=r.sortField,e.sortOrder=r.sortOrder,(yield J(e)).list}),[g,{reload:m,getSelectRows:i,getPaginationRef:o,getForm:l}]=M({title:"评价模板",api:p,rowKey:"id",columns:q,useSearchForm:!0,showTableSetting:!0,bordered:!0,pagination:{pageSize:20,pageSizeOptions:["20","50","100","200"]},handleSearchInfoFn(t){return t},formConfig:{labelWidth:120,actionColOptions:{span:24},autoAdvancedLine:1,baseColProps:{span:7},schemas:G,autoSubmitOnEnter:!0,noHideBtnFlag:!0},rowSelection:{type:"radio",fixed:!0,onSelect:w},sortFn:t=>{t.order?(r.sortField=t.field,r.sortOrder=t.order.replace("end","")):(r.sortField="",r.sortOrder="")}});function v({keys:t,rows:e}){if(e&&e.length>0){const c=e[0];a.value=c.id}else a.value=""}function w(t,e){e?a.value=t.id:a.value=""}const F=()=>n(this,null,function*(){z("/po/integrated/assessmentevaluation/template/templateCreate","添加评价模板")});function R(t){B(t.id)}function P(){const t=i();return t.length==0?(_.error("请选择一行数据"),!1):t[0]}function k(){return n(this,null,function*(){f({title:"提示",iconType:"warning",content:"确定要删除选中记录？",onOk(){return n(this,null,function*(){const e=P();if(e.id){if(e.status!=0){_.error("非草稿状态不能删除。");return}yield E(e.processInstanceId),_.success("已删除。"),m()}})}})})}return N(()=>n(this,null,function*(){T.getInstance().listen("evaluation-template",()=>{m()})})),(t,e)=>{const c=W("a-button");return K(),Z(s(j),{dense:"",contentFullHeight:"",fixedHeight:"",contentClass:"flex",style:{position:"relative"}},{default:d(()=>[h(s(A),{class:"fix-basic-table",onRegister:s(g),searchInfo:t.searchInfo,onResizeColumn:e[0]||(e[0]=(u,y)=>y.width=u),onRowDbClick:e[1]||(e[1]=u=>R(u)),onSelectionChange:v},{toolbar:d(()=>[h(c,{type:"primary",preIcon:s(C).ADD,onClick:F},{default:d(()=>[S("添加")]),_:1},8,["preIcon"]),h(c,{class:"red-btn",disabled:s(a)=="",preIcon:s(C).DELETE,onClick:k},{default:d(()=>[S("删除")]),_:1},8,["disabled","preIcon"])]),bodyCell:d(({column:u,text:y,record:U})=>[]),_:1},8,["onRegister","searchInfo"])]),_:1})}}});const ve=L(Q,[["__scopeId","data-v-724336d4"]]);export{ve as default};
//# sourceMappingURL=index-5383790c.js.map
