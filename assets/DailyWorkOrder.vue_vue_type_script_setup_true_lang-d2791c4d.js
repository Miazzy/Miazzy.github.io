var M=(n,_,w)=>new Promise((l,y)=>{var C=m=>{try{v(w.next(m))}catch(c){y(c)}},o=m=>{try{v(w.throw(m))}catch(c){y(c)}},v=m=>m.done?l(m.value):Promise.resolve(m.value).then(C,o);v((w=w.apply(n,_)).next())});import{d as R,r as B,k as N,o as E,al as p,Z as D,_ as L,f as e,aa as a,v as i,A as r,a9 as H,$ as A,ac as U,F}from"./vue-71d1abb3.js";import{_ as Y}from"./DictSelectBox.vue_vue_type_script_setup_true_lang-e03e9fe8.js";import V from"./TicketTable-81dd11bc.js";import{h as z}from"./workorder.data-e18a6fd9.js";const W={id:"more-tab-content",class:"tab-table-div"},ee=R({__name:"DailyWorkOrder",props:{formState:{type:Object,required:!0,default:function(){return{daily:{}}}},disabledInput:Boolean,showProcess:Boolean,disabledProcessInput:Boolean,stationPersonOptions:Object},setup(n,{expose:_}){const l=B(n.formState),y={cc:{labelType:"除草",num:{label:"除草面积(亩)",precision:2}},zjqx:{labelType:"清洗",num:{label:"清洗数量(块)",precision:0}},lsjg:{labelType:"紧固",num:{label:"紧固数量(套)",precision:0}},ff:{labelType:"防腐",num:{label:"防腐面积(㎡)",precision:2}}},C=l.workOrderType,o=B({labelType:y[C].labelType,numLabel:y[C].num.label,numPrecision:y[C].num.precision}),v=N([]),m=N("1"),c=N();function O(f,t){l.planHandleById=t.lable}function h(f,t){l.planConfirmById=t.lable}function x(f,t){l.daily.areaId=t.map(g=>g.lable)}function $(f){f==="whole"&&(l.daily.areaId=[],l.daily.areaName=[])}function S(){z({nodeKindId:"period",searchId:l.periodId}).then(f=>{f.result&&f.result.length>0&&f.result.forEach(t=>{v.value.push({value:t.name,lable:t.id})})})}return E(()=>M(this,null,function*(){S()})),_({childFormState:l,getTicketList:function(){return l.isInvoicing==="0"?[]:c.value.getTicketDataSource()}}),(f,t)=>{const g=p("a-input"),s=p("a-form-item"),u=p("a-col"),b=p("a-row"),T=p("a-textarea"),I=p("a-date-picker"),k=p("a-select"),q=p("a-card"),j=p("a-input-number"),P=p("a-tab-pane"),K=p("a-tabs");return D(),L(F,null,[e(q,{title:"基本信息",bordered:!1},{default:a(()=>[e(b,{gutter:32},{default:a(()=>[i(e(u,{span:12},{default:a(()=>[e(s,{name:"stationName",label:"电站名称",labelCol:{class:"detail-label-8"}},{default:a(()=>[e(g,{value:l.stationName,"onUpdate:value":t[0]||(t[0]=d=>l.stationName=d),disabled:""},null,8,["value"])]),_:1})]),_:1},512),[[r,!0]]),i(e(u,{span:12},{default:a(()=>[e(s,{name:"periodName",label:"期数",labelCol:{class:"detail-label-8"}},{default:a(()=>[e(g,{value:l.periodName,"onUpdate:value":t[1]||(t[1]=d=>l.periodName=d),disabled:""},null,8,["value"])]),_:1})]),_:1},512),[[r,!0]])]),_:1}),e(b,{gutter:32},{default:a(()=>[i(e(u,{span:12},{default:a(()=>[e(s,{name:["daily","dailyType"],label:`${o.labelType}类型`,labelCol:{class:"detail-label-8"},rules:[{required:!0,message:`请选择${o.labelType}类型`}]},{default:a(()=>[e(Y,{value:l.daily.dailyType,"onUpdate:value":t[2]||(t[2]=d=>l.daily.dailyType=d),type:"work_order_work_type",disabled:n.disabledInput},null,8,["value","disabled"])]),_:1},8,["label","rules"])]),_:1},512),[[r,!0]]),i(e(u,{span:12},{default:a(()=>[e(s,{name:["daily","dailyRange"],label:`${o.labelType}范围`,labelCol:{class:"detail-label-8"},rules:[{required:!0,message:`请选择${o.labelType}范围`}]},{default:a(()=>[e(Y,{value:l.daily.dailyRange,"onUpdate:value":t[3]||(t[3]=d=>l.daily.dailyRange=d),type:"work_order_range",disabled:n.disabledInput,onChange:$},null,8,["value","disabled"])]),_:1},8,["label","rules"])]),_:1},512),[[r,!0]])]),_:1}),e(b,{gutter:32},{default:a(()=>[i(e(u,{span:12},{default:a(()=>[e(s,{name:["daily","workCompany"],label:`${o.labelType}单位`,labelCol:{class:"detail-label-8"},rules:[{required:!0,message:`请输入${o.labelType}单位`}]},{default:a(()=>[e(g,{value:l.daily.workCompany,"onUpdate:value":t[4]||(t[4]=d=>l.daily.workCompany=d),maxlength:100,disabled:n.disabledInput},null,8,["value","disabled"])]),_:1},8,["label","rules"])]),_:1},512),[[r,!0]])]),_:1}),e(b,{gutter:32},{default:a(()=>[i(e(u,{span:24},{default:a(()=>[e(s,{name:["daily","programme"],label:`${o.labelType}方案`,labelCol:{class:"detail-label-8"},rules:[{required:!0,message:`请输入${o.labelType}方案`}]},{default:a(()=>[e(T,{value:l.daily.programme,"onUpdate:value":t[5]||(t[5]=d=>l.daily.programme=d),"show-count":"",rows:4,maxlength:1e3,disabled:n.disabledInput},null,8,["value","disabled"])]),_:1},8,["label","rules"])]),_:1},512),[[r,!0]])]),_:1}),e(b,{gutter:32},{default:a(()=>[i(e(u,{span:24},{default:a(()=>[e(s,{name:"subject",label:"工单主题",labelCol:{class:"detail-label-8"},rules:[{required:!0,message:"请输入工单主题"}]},{default:a(()=>[e(g,{value:l.subject,"onUpdate:value":t[6]||(t[6]=d=>l.subject=d),maxlength:100,disabled:n.disabledInput},null,8,["value","disabled"])]),_:1})]),_:1},512),[[r,!0]])]),_:1}),e(b,{gutter:32},{default:a(()=>[i(e(u,{span:12},{default:a(()=>[e(s,{name:"planStartDate",label:"计划开始时间",labelCol:{class:"detail-label-8"},rules:[{required:!0,message:"请输入计划开始时间"}]},{default:a(()=>[e(I,{value:l.planStartDate,"onUpdate:value":t[7]||(t[7]=d=>l.planStartDate=d),"show-time":"",format:"YYYY-MM-DD HH:mm","value-format":"YYYY-MM-DD HH:mm",style:"width: 100%",disabled:n.disabledInput},null,8,["value","disabled"])]),_:1})]),_:1},512),[[r,!0]]),i(e(u,{span:12},{default:a(()=>[e(s,{name:"planEndDate",label:"计划完成时间",labelCol:{class:"detail-label-8"},rules:[{required:!0,message:"请输入计划完成时间"}]},{default:a(()=>[e(I,{value:l.planEndDate,"onUpdate:value":t[8]||(t[8]=d=>l.planEndDate=d),"show-time":"",format:"YYYY-MM-DD HH:mm","value-format":"YYYY-MM-DD HH:mm",style:"width: 100%",disabled:n.disabledInput},null,8,["value","disabled"])]),_:1})]),_:1},512),[[r,!0]])]),_:1}),e(b,{gutter:32},{default:a(()=>[i(e(u,{span:12},{default:a(()=>[e(s,{name:"grade",label:"工单级别",labelCol:{class:"detail-label-8"},rules:[{required:!0,message:"请选择工单级别"}]},{default:a(()=>[e(Y,{value:l.grade,"onUpdate:value":t[9]||(t[9]=d=>l.grade=d),type:"work_order_grade",disabled:n.disabledInput},null,8,["value","disabled"])]),_:1})]),_:1},512),[[r,!0]]),i(e(u,{span:12},{default:a(()=>[e(s,{name:"planHandleByName",label:"计划处理人",labelCol:{class:"detail-label-8"},rules:[{required:!0,message:"请选择计划处理人"}]},{default:a(()=>[e(k,{value:l.planHandleByName,"onUpdate:value":t[10]||(t[10]=d=>l.planHandleByName=d),"show-search":"","allow-clear":"",style:{width:"100%"},options:n.stationPersonOptions,onChange:O,disabled:n.disabledInput},null,8,["value","options","disabled"])]),_:1})]),_:1},512),[[r,!0]])]),_:1}),e(b,{gutter:32},{default:a(()=>[i(e(u,{span:12},{default:a(()=>[e(s,{name:"planConfirmByName",label:"计划确认人",labelCol:{class:"detail-label-8"},rules:[{required:!0,message:"请选择计划确认人"}]},{default:a(()=>[e(k,{value:l.planConfirmByName,"onUpdate:value":t[11]||(t[11]=d=>l.planConfirmByName=d),"show-search":"","allow-clear":"",style:{width:"100%"},options:n.stationPersonOptions,onChange:h,disabled:n.disabledInput},null,8,["value","options","disabled"])]),_:1})]),_:1},512),[[r,!0]]),i(e(u,{span:12},{default:a(()=>[e(s,{name:"isInvoicing",label:"开具两票",labelCol:{class:"detail-label-8"},rules:[{required:!0,message:"请选择开具两票"}]},{default:a(()=>[e(Y,{value:l.isInvoicing,"onUpdate:value":t[12]||(t[12]=d=>l.isInvoicing=d),type:"yes_or_no",disabled:n.disabledInput},null,8,["value","disabled"])]),_:1})]),_:1},512),[[r,!0]])]),_:1})]),_:1}),n.showProcess?(D(),H(q,{key:0,title:"处理过程",bordered:!1},{default:a(()=>[A("div",W,[e(K,{activeKey:m.value,"onUpdate:activeKey":t[19]||(t[19]=d=>m.value=d)},{default:a(()=>[e(P,{class:"tab-pane-form",key:"1",tab:"处理过程"},{default:a(()=>[e(b,{gutter:32},{default:a(()=>[i(e(u,{span:12},{default:a(()=>[e(s,{name:["daily","startDate"],label:"开始时间",labelCol:{class:"detail-label-8"},rules:[{required:!0,message:"请输入开始时间"}]},{default:a(()=>[e(I,{value:l.daily.startDate,"onUpdate:value":t[13]||(t[13]=d=>l.daily.startDate=d),"show-time":"",format:"YYYY-MM-DD HH:mm","value-format":"YYYY-MM-DD HH:mm",style:"width: 100%",disabled:n.disabledProcessInput},null,8,["value","disabled"])]),_:1})]),_:1},512),[[r,!0]]),i(e(u,{span:12},{default:a(()=>[e(s,{name:["daily","endDate"],label:"结束时间",labelCol:{class:"detail-label-8"},rules:[{required:!0,message:"请输入结束时间"}]},{default:a(()=>[e(I,{value:l.daily.endDate,"onUpdate:value":t[14]||(t[14]=d=>l.daily.endDate=d),"show-time":"",format:"YYYY-MM-DD HH:mm","value-format":"YYYY-MM-DD HH:mm",style:"width: 100%",disabled:n.disabledProcessInput},null,8,["value","disabled"])]),_:1})]),_:1},512),[[r,!0]])]),_:1}),l.daily.dailyRange==="part"?(D(),H(b,{key:0,gutter:32},{default:a(()=>[i(e(u,{span:24},{default:a(()=>[e(s,{name:["daily","areaName"],label:`${o.labelType}区域`,labelCol:{class:"detail-label-8"},rules:[{required:!0,message:`请选择${o.labelType}区域`}]},{default:a(()=>[e(k,{value:l.daily.areaName,"onUpdate:value":t[15]||(t[15]=d=>l.daily.areaName=d),"show-search":"","allow-clear":"",mode:"multiple",style:{width:"100%"},options:v.value,onChange:x,disabled:n.disabledProcessInput},null,8,["value","options","disabled"])]),_:1},8,["label","rules"])]),_:1},512),[[r,!0]])]),_:1})):U("",!0),e(b,{gutter:32},{default:a(()=>[i(e(u,{span:12},{default:a(()=>[e(s,{name:["daily","num"],label:o.numLabel,labelCol:{class:"detail-label-8"},rules:[{required:!0,message:`请输入${o.numLabel}`}]},{default:a(()=>[e(j,{value:l.daily.num,"onUpdate:value":t[16]||(t[16]=d=>l.daily.num=d),min:1,max:99999999,precision:o.numPrecision,disabled:n.disabledProcessInput},null,8,["value","precision","disabled"])]),_:1},8,["label","rules"])]),_:1},512),[[r,!0]])]),_:1}),e(b,{gutter:32},{default:a(()=>[i(e(u,{span:24},{default:a(()=>[e(s,{name:["daily","participants"],label:"参加人员",labelCol:{class:"detail-label-8"},rules:[{required:!0,message:"请输入参加人员"}]},{default:a(()=>[e(T,{value:l.daily.participants,"onUpdate:value":t[17]||(t[17]=d=>l.daily.participants=d),"show-count":"",rows:4,maxlength:1e3,disabled:n.disabledProcessInput},null,8,["value","disabled"])]),_:1})]),_:1},512),[[r,!0]])]),_:1}),e(b,{gutter:32},{default:a(()=>[i(e(u,{span:24},{default:a(()=>[e(s,{name:["daily","completeOverview"],label:"完成情况",labelCol:{class:"detail-label-8"},rules:[{required:!0,message:"请输入完成情况"}]},{default:a(()=>[e(T,{value:l.daily.completeOverview,"onUpdate:value":t[18]||(t[18]=d=>l.daily.completeOverview=d),"show-count":"",rows:4,maxlength:1e3,disabled:n.disabledProcessInput},null,8,["value","disabled"])]),_:1})]),_:1},512),[[r,!0]])]),_:1})]),_:1}),l.isInvoicing==="1"?(D(),H(P,{class:"tab-pane-table",key:"2",tab:"开具两票","force-render":""},{default:a(()=>[e(V,{ref_key:"ticketTableRef",ref:c,formState:n.formState,disabledProcessInput:n.disabledProcessInput,activeKey:m.value},null,8,["formState","disabledProcessInput","activeKey"])]),_:1})):U("",!0)]),_:1},8,["activeKey"])])]),_:1})):U("",!0)],64)}}});export{ee as _};
//# sourceMappingURL=DailyWorkOrder.vue_vue_type_script_setup_true_lang-d2791c4d.js.map
