{"version":3,"file":"emergencyDrill-efa8fbef.js","sources":["../../src/views/po/safety/emergencydrill/emergencyDrill.ts"],"sourcesContent":["import { defHttp } from '/@/utils/http/axios';\nimport { BasicColumn } from '/@/components/Table';\nimport { useRender } from '@/components/Table';\nimport { reactive } from 'vue';\nimport { useDictStoreWithOut } from '@/store/modules/dict';\n\nconst dictStore = useDictStoreWithOut();\nenum Api {\n  treeData = '/baseset/common/list-orgStationTree',\n  LIST_STATION_PERSON_URL = '/baseset/common/list-stationPerson',\n  LIST_ORG_TREE = '/system/org/list-tree',\n  areaList = '/po/emergencyDrill/page',\n  insertUrl = '/po/emergencyDrill/create',\n  updateUrl = '/po/emergencyDrill/update',\n  getPeriods = '/po/emergencyDrill/periods',\n  deleteUrl = '/po/emergencyDrill/delete',\n  getIndexUrl = '/po/emergencyDrill/get',\n  exportExcel = '/po/emergencyDrill/export-excel',\n  detailList = '/po/emergencyDrill/detailList',\n}\n\nexport function getEmergencyDrillListColumns(options: any[]): BasicColumn[] {\n  return [\n    {\n      title: '单据编号',\n      dataIndex: 'billCode',\n      width: 160,\n      resizable: true,\n      sorter: true,\n    },\n    {\n      title: '电站名称',\n      dataIndex: 'stationName',\n      width: 160,\n      headAlign: 'center',\n      align: 'left',\n      resizable: true,\n      sorter: true,\n    },\n    {\n      title: '主题',\n      dataIndex: 'name',\n      width: 160,\n      headAlign: 'center',\n      align: 'left',\n      resizable: true,\n      sorter: true,\n    },\n    {\n      title: '演练类型',\n      dataIndex: 'drillTypeText',\n      width: 160,\n      resizable: true,\n      sorter: true,\n    },\n    {\n      title: '演练方式',\n      dataIndex: 'drillModeText',\n      width: 160,\n      resizable: true,\n      sorter: true,\n    },\n    {\n      title: '开始日期',\n      dataIndex: 'startTime',\n      width: 160,\n      customRender: ({ text }) => {\n        return useRender.renderDate(text, 'YYYY-MM-DD');\n      },\n      resizable: true,\n      sorter: true,\n    },\n    {\n      title: '结束日期',\n      dataIndex: 'endTime',\n      width: 160,\n      customRender: ({ text }) => {\n        return useRender.renderDate(text, 'YYYY-MM-DD');\n      },\n      resizable: true,\n      sorter: true,\n    },\n    {\n      title: '指挥人',\n      dataIndex: 'commanderName',\n      width: 160,\n      resizable: true,\n      sorter: true,\n    },\n    {\n      title: '参加总人数',\n      dataIndex: 'totalCount',\n      width: 160,\n      headAlign: 'center',\n      align: 'right',\n      resizable: true,\n      sorter: true,\n    },\n    // {\n    //   title: '审批状态',\n    //   dataIndex: 'status',\n    //   width: 160,\n    // },\n    {\n      title: '创建人',\n      dataIndex: 'personMemberName',\n      width: 160,\n      resizable: true,\n      sorter: true,\n    },\n    {\n      title: '创建时间',\n      dataIndex: 'fillinDate',\n      width: 180,\n      customRender: ({ text }) => {\n        return useRender.renderDate(text);\n      },\n      resizable: true,\n      sorter: true,\n    },\n    {\n      title: '审批状态',\n      dataIndex: 'status',\n      customRender: ({ text, record }) => {\n        return useRender.renderFlowStatus(text, record.statusText);\n      },\n      resizable: true,\n      sorter: true,\n    },\n  ];\n}\n\n// 工作任务\nexport const detailColumns: BasicColumn[] = [\n  {\n    title: '角色',\n    dataIndex: 'roleName',\n    width: 100,\n  },\n  {\n    title: '内部成员',\n    dataIndex: 'innerPersonNames',\n    width: 220,\n  },\n  {\n    title: '外部成员',\n    dataIndex: 'outerPersonNames',\n    width: 220,\n  },\n  {\n    title: '人数',\n    dataIndex: 'count',\n    width: 100,\n  },\n];\n\nexport const detailTableProps: any = {\n  pagination: false,\n  striped: false,\n  useSearchForm: false,\n  showTableSetting: false,\n  bordered: true,\n  showIndexColumn: true,\n  canResize: false,\n  actionColumn: {\n    width: 80,\n    title: '操作',\n    dataIndex: 'action',\n  },\n};\n\n// 列表表头\n\nexport interface DeptListItem {\n  id: string;\n  orderNo: string;\n  createTime: string;\n  remark: string;\n  status: number;\n}\n\n// 获取组织树\nexport const getOrgTree = (params) =>\n  defHttp.post(\n    {\n      url: Api.LIST_ORG_TREE,\n      params,\n    },\n    {},\n  );\n\n// 获取电站下的组织人员\nexport const getStationPerson = (params) =>\n  defHttp.post(\n    {\n      url: Api.LIST_STATION_PERSON_URL,\n      params,\n    },\n    {},\n  );\n// 获取\nexport const getIndex = (params) =>\n  defHttp.get(\n    {\n      url: Api.getIndexUrl,\n      params,\n    },\n    {},\n  );\n\n// 组织树数据\nexport const getTreeData = (params) =>\n  defHttp.post(\n    {\n      url: Api.treeData,\n      params,\n    },\n    {},\n  );\n//明细\nexport const getDetailList = (params) =>\n  defHttp.get(\n    {\n      url: Api.detailList,\n      params,\n    },\n    {},\n  );\n\n// 列表数据\nexport const getEmergencyDrillList = (params) =>\n  defHttp.get(\n    {\n      url: Api.areaList,\n      params,\n    },\n    {},\n  );\n\n// 新增\nexport const insertEmergencyDrill = (params) =>\n  defHttp.post(\n    {\n      url: Api.insertUrl,\n      params,\n    },\n    { isOnlyResult: true },\n  );\n\n// 修改\nexport const updateEmergencyDrill = (params) =>\n  defHttp.put(\n    {\n      url: Api.updateUrl,\n      params,\n    },\n    {},\n  );\n\nexport const saveData = (params) => {\n  return insertEmergencyDrill(params);\n};\n\n// 删除\nexport const deleteEmergencyDrill = (params) =>\n  defHttp.delete({ url: Api.deleteUrl + '?id=' + params });\n\nexport async function getDic(type: string) {\n  const arr: any = [\n    {\n      dictType: '',\n      value: '',\n      label: '',\n      colorType: '',\n      cssClass: '',\n    },\n  ];\n  const map = await dictStore.fetchBackendData(type, {\n    type: type,\n  });\n  return arr.concat(map);\n}\n\n// 导出 Excel\nexport function exportExcel(params) {\n  return defHttp.get({ url: Api.exportExcel, params });\n}\n\nexport function initInfoItems(billTitleOption, item) {\n  billTitleOption.infoItems.push({\n    key: 'billCode',\n    label: '单据编号',\n    value: item.billCode,\n    position: 'left',\n  });\n  billTitleOption.infoItems.push({\n    key: 'fillinDate',\n    label: '制单日期',\n    value: item.fillinDate,\n    position: 'center',\n  });\n  billTitleOption.infoItems.push({\n    key: 'createPerson',\n    label: '创建人',\n    value: item.deptName + '.' + item.personMemberName,\n    position: 'right',\n  });\n}\n\n// 操作附件\nexport const fileColumns: BasicColumn[] = [\n  {\n    title: '附件类型',\n    dataIndex: 'type',\n    width: 220,\n    align: 'left',\n  },\n  {\n    title: '附件',\n    dataIndex: 'name',\n    width: 100,\n  },\n];\n\n// Form表单对象\nexport const detailFormState = reactive({ spinning: false });\nexport const formState = reactive({\n  spinning: false,\n  processInstanceId: '',\n  id: '',\n  billCode: '',\n  fillinDate: '',\n  organId: '',\n  organName: '',\n  deptId: '',\n  deptName: '',\n  positionId: '',\n  positionName: '',\n  personMemberId: '',\n  personMemberName: '',\n  fullId: '',\n  status: 0,\n  subject: '',\n  finishedDate: '',\n  stationOrganId: '',\n  stationOrganName: '',\n  stationId: '',\n  stationName: '',\n  name: '',\n  drillType: '',\n  drillMode: '',\n  commanderId: '',\n  commanderName: '',\n  startTime: '',\n  endTime: '',\n  totalCount: '',\n  content: '',\n});\n"],"names":["useDictStoreWithOut","getEmergencyDrillListColumns","options","text","useRender","record","detailColumns","detailTableProps","getOrgTree","params","defHttp","getStationPerson","getIndex","getTreeData","getDetailList","getEmergencyDrillList","insertEmergencyDrill","saveData","exportExcel","reactive","formState"],"mappings":"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"}