{"version":3,"file":"OrganDialog-dd1023ce.js","sources":["../../src/components/Framework/Modal/OrganDialog.vue"],"sourcesContent":["<template>\n  <Dialog :title=\"title\" :visible=\"modalVisible\" @update:visible=\"updateVisible\" :width=\"props.width\" :height=\"props.height\" @cancel=\"cancel\" @confirm=\"confirm\" @close=\"handleClose\">\n    <div class=\"dialog-content\" :style=\"`height: calc(${props.height}px - 90px)`\">\n      <!-- 左侧分类树 -->\n      <div class=\"category-tree\">\n        <span class=\"category-title\">\n          <span>组织结构</span>\n        </span>\n        <div class=\"category-content\" :style=\"`height: calc(${props.height}px - 130px)`\">\n          <div class=\"category-search-box\" style=\"position: relative\">\n            <span class=\"search-title\" style=\"\">搜索</span>\n            <a-input-search v-model:value=\"searchText\" class=\"search-input\" placeholder=\"请输入搜索内容\" enter-button @change=\"handleSearch\" @search=\"handleSearch\" @keydown.prevent.enter=\"preventEnter\" />\n            <span class=\"search-icon\" style=\"left: 300px\">\n              <Icon icon=\"mdi:arrow-up\" size=\"22\" class=\"rotate-left\" @click=\"handleNode\" />\n            </span>\n            <span class=\"search-icon\" style=\"left: 340px\">\n              <Icon icon=\"material-symbols:delete-outline\" class=\"icon-delete\" size=\"22\" @click=\"handleDelete\" />\n            </span>\n          </div>\n          <div class=\"tree-value\" :style=\"`height: calc(${props.height}px - 228px);`\">\n            <!-- 基础Tree组件 -->\n            <a-tree v-if=\"searchText.length <= 0\" :tree-data=\"treeData\" show-icon :default-expand-all=\"false\" @select=\"handleSelect\">\n              <template #switcherIcon=\"{ switcherCls }\">\n                <Icon :icon=\"props.ticons.parent\" size=\"14\" :class=\"switcherCls\" />\n              </template>\n              <template #icon=\"{ key, isLeaf }\">\n                <Icon v-if=\"isLeaf && !isTopNode(key)\" :icon=\"props.ticons.leaf\" size=\"14\" />\n                <Icon v-if=\"!isLeaf && !isTopNode(key)\" :icon=\"props.ticons.middle\" size=\"14\" />\n              </template>\n            </a-tree>\n\n            <a-table v-if=\"searchText.length > 0\" size=\"small\" :columns=\"scolumns\" :data-source=\"xdataList\" :pagination=\"false\" :scroll=\"{ x: (props.width - 30) / 2, y: props.height - 220 }\"\n              style=\"overflow-x: hidden\" :customRow=\"handleTableClick\" />\n          </div>\n        </div>\n      </div>\n\n      <!-- 右侧表格 -->\n      <div class=\"employee-table\">\n        <span class=\"employee-title\">\n          <span>被选人员</span>\n        </span>\n        <div class=\"employee-content\">\n          <div position=\"center\" class=\"layout-content\" :style=\"`height: calc(${props.height}px - 140px);`\">\n            <div class=\"component-wrap\">\n              <template :key=\"index\" v-for=\"(item, index) in allNodes\">\n                <a class=\"component-item\">\n                  <span class=\"ui-component-text\" :title=\"handleSNodeText(item)\">\n                    {{ handleSNodeText(item) }}\n                  </span>\n                  <i class=\"icon-close\">\n                    <Icon icon=\"typcn:delete\" size=\"18\" @click=\"handleDeleteNode(item, index)\" />\n                  </i>\n                </a>\n              </template>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </Dialog>\n</template>\n\n<script lang=\"ts\" setup>\n  import Dialog from '@/components/Framework/Modal/Dialog.vue';\n  import Icon from '@/components/Icon/Icon.vue';\n  import { ref, defineProps, defineEmits, onMounted, watch, unref } from 'vue';\n  import { TreeItem } from '@/components/Tree';\n  import { Modal } from 'ant-design-vue';\n  import { SysMessage } from '/@/hooks/web/useMessage';\n  import { getOrganTree } from '/@/api/sys/user';\n\n  const modalVisible = ref(false);\n  const treeData = ref([]);\n  const searchText = ref('');\n  const selectedNode = ref(null);\n  const allNodes = ref<any>([]);\n  const treeMap = ref<any>();\n  const tdataList = ref<any>([]);\n  const xdataList = ref<any>([]);\n  type fieldType = { key: String; title: String; dept: String; postion: String };\n  type tIconsType = { parent: String; leaf: String };\n  type messageType = { double: String; delete: String };\n\n  const props = defineProps({\n    visible: Boolean, // 是否显示弹框\n    title: String, // 弹框标题\n    width: { type: Number, default: 700 }, // 弹框宽度\n    height: { type: Number, default: 500 }, // 弹框高度\n    value: { type: Array, default: [] },\n    tdata: { type: Array }, // Tree数据\n    tfields: {\n      type: Object,\n      default: {\n        key: 'id',\n        title: 'title',\n        dept: 'dept',\n        postion: 'postion',\n      } as fieldType,\n    }, // Tree数据的对应字段解析\n    ticons: {\n      type: Object,\n      default: {\n        parent: 'ant-design:down-outlined',\n        middle: 'mingcute:department-line',\n        leaf: 'gridicons:multiple-users',\n      } as tIconsType,\n    },\n    message: {\n      type: Object,\n      default: {\n        none: '当前没有被选人员，无法删除！',\n        double: '该节点已经被选中，请不要重复勾选！',\n        delete: '请您确认是否删除所有勾选节点？',\n      } as messageType,\n    },\n  });\n\n  const emit = defineEmits(['update:visible', 'update:value', 'cancel', 'confirm', 'close']); // 定义事件\n\n  const scolumns = ref([\n    { title: '名称', dataIndex: 'title', key: 'title', fixed: true, width: 80 },\n    { title: '公司', dataIndex: 'company', key: 'company', fixed: false, width: 200 },\n    { title: '部门', dataIndex: 'dept', key: 'dept', fixed: false, width: 150 },\n    { title: '岗位', dataIndex: 'postion', key: 'postion', fixed: false, width: 150 },\n  ]);\n\n  const cancel = () => {\n    allNodes.value = [];\n    emit('cancel'); // 发送取消事件\n  };\n\n  const confirm = () => {\n    const rule = props?.tfields as fieldType;\n    const data = transformRespData(allNodes.value, rule);\n    emit('update:value', allNodes.value);\n    emit('confirm', data, allNodes.value); // 发送确定事件\n  };\n\n  const handleClose = () => {\n    emit('cancel'); // 发送取消事件\n  };\n\n  const updateVisible = ($event) => {\n    modalVisible.value = $event;\n    emit('update:visible', false); // 关闭弹框\n  };\n\n  // 判断是否为顶层节点\n  const isTopNode = (key) => {\n    return !!treeMap.value.get(key);\n  };\n\n  const handleSNodeText = (node) => {\n    return node[props.tfields.title] || node['title'] || node['label'];\n  };\n\n  const handleSNodeId = (node) => {\n    return node[props.tfields.key] || node['value'] || node['key'];\n  };\n\n  const handleSelect = (nodeKey, event) => {\n    const node = event.node;\n    selectedNode.value = node;\n  };\n\n  const handleNode = () => {\n    const snode = selectedNode.value || {};\n    if (typeof allNodes.value == 'undefined' || allNodes.value == null) {\n      allNodes.value = [];\n    }\n    const findex = allNodes.value\n      ? allNodes.value.findIndex((x) => {\n          const idFlag = handleSNodeId(x) === handleSNodeId(snode);\n          const textFlag = handleSNodeText(x) === handleSNodeText(snode);\n          return idFlag && textFlag;\n        })\n      : -1;\n    if (findex < 0) {\n      // 将选中节点推入allNodes节点中\n      const keys = allNodes.value.map((x) => x.value);\n      if (!keys.includes(snode.value)) {\n        allNodes.value.push(selectedNode.value);\n      }\n    } else {\n      SysMessage.getInstance().warning(props.message.double);\n    }\n  };\n\n  const handleDelete = () => {\n    if (allNodes.value && allNodes.value.length > 0) {\n      Modal.confirm({\n        title: props.message.delete,\n        onOk() {\n          allNodes.value = [];\n        },\n      });\n    } else {\n      Modal.warning({\n        title: props.message.none,\n      });\n    }\n  };\n\n  const handleDeleteNode = (item, index) => {\n    allNodes.value = allNodes.value.filter((node, tindex) => tindex !== index);\n  };\n\n  // 按tfields生成转换规则\n  const reverseRule = (rule) => {\n    const reversedRule = {};\n    for (const key in rule) {\n      reversedRule[rule[key]] = key;\n    }\n    return reversedRule;\n  };\n\n  // 按tfields的设置转换tree的数据\n  const transformRespData = (data, rule) => {\n    const rules = reverseRule(rule);\n    return data.map((item) => {\n      const newItem = {};\n      for (const key in item) {\n        if (key in rules) {\n          if (rules[key] == 'dept' || rules[key] == 'postion') {\n            newItem[rules[key]] = item[key];\n            newItem[key] = item[key];\n          } else if (rules[key] == 'id') {\n            newItem[rules[key]] = parseInt(Math.random() * 100) + '@' + item[key];\n            newItem[key] = item[key];\n          } else if (rules[key] == 'title') {\n            newItem[rules[key]] = item[key];\n            newItem[key] = item[key];\n            newItem['label'] = item[key];\n          } else if (rules[key] == 'key') {\n            newItem[rules[key]] = parseInt(Math.random() * 100) + '@' + item[key];\n            newItem[key] = item[key];\n            newItem['value'] = item[key];\n          }\n        } else {\n          newItem[key] = item[key];\n        }\n      }\n      return newItem;\n    });\n  };\n\n  // 按tfields的设置转换tree的数据\n  const transformTableData = (data, rule, flag = 'top', pnode) => {\n    // 获取字段规则\n    const rules = reverseRule(rule);\n    // 数组遍历\n    data.map((item) => {\n      const newObj = {};\n      for (const key in item) {\n        if (key in rules) {\n          if (rules[key] == 'dept' || rules[key] == 'postion') {\n            newObj[rules[key]] = item[key];\n            newObj[key] = item[key];\n          } else if (rules[key] == 'title') {\n            newObj[rules[key]] = item[key];\n            newObj[key] = item[key];\n            newObj['label'] = item[key];\n          } else if (rules[key] == 'id') {\n            newObj[key] = parseInt(Math.random() * 100) + '@' + item[key];\n            newObj[key] = item[key];\n          } else if (rules[key] == 'key') {\n            newObj[rules[key]] = parseInt(Math.random() * 100) + '@' + item[key];\n            newObj[key] = item[key];\n            newObj['value'] = item[key];\n          }\n        }\n        newObj[key] = item[key];\n        if (pnode) {\n          newObj['parent_node'] = pnode;\n        }\n      }\n      treeMap.value.set(item[props.tfields.key], item);\n      tdataList.value.push(newObj);\n      if (item.children && item.children.length > 0) {\n        transformTableData(item.children, rule, 'none', item);\n      }\n    });\n    // 顶级数组去重\n    if (flag == 'top') {\n      const list = tdataList.value.filter((node, index, list) => {\n        const findIndexValue = list.findIndex((x) => {\n          return (\n            x[props.tfields.key] === node[props.tfields.key] &&\n            x[props.tfields.title] === node[props.tfields.title]\n          );\n        });\n        return findIndexValue === index;\n      });\n      tdataList.value = list;\n    }\n  };\n\n  // 按tfields的设置转换tree的数据\n  const transformData = (data, rule) => {\n    const rules = reverseRule(rule);\n    return data.map((item) => {\n      const newItem = {};\n      for (const key in item) {\n        if (key in rules) {\n          if (rules[key] == 'dept' || rules[key] == 'postion') {\n            newItem[rules[key]] = item[key];\n            newItem[key] = item[key];\n          } else if (rules[key] == 'id') {\n            newItem[rules[key]] = parseInt(Math.random() * 100) + '@' + item[key];\n            newItem[key] = item[key];\n          } else if (rules[key] == 'title') {\n            newItem[rules[key]] = item[key];\n            newItem[key] = item[key];\n            newItem['label'] = item[key];\n          } else if (rules[key] == 'key') {\n            newItem[rules[key]] = parseInt(Math.random() * 100) + '@' + item[key];\n            newItem[key] = item[key];\n            newItem['value'] = item[key];\n          }\n        } else {\n          newItem[key] = item[key];\n        }\n      }\n      if (item.children && item.children.length > 0) {\n        newItem.children = transformData(item.children, rule);\n      }\n      return newItem;\n    });\n  };\n\n  // 将数据节点转换为Map\n  const transformMap = (data, rule) => {\n    const treeMap = new Map();\n    data.forEach((item) => {\n      const key = item[rule['key']];\n      treeMap.set(key, item);\n    });\n    return treeMap;\n  };\n\n  const handleSearch = () => {\n    const text = searchText.value ? searchText.value.trim() : '';\n    const list = tdataList.value.filter((node) => {\n      const flag = node[props.tfields.title].includes(text);\n      if (flag) {\n        node['company'] = treeMap.value.get(node['orgId'])\n          ? treeMap.value.get(node['orgId'])[props.tfields.title]\n          : '';\n        node['dept'] = treeMap.value.get(node['parent_node']['parentId'])\n          ? treeMap.value.get(node['parent_node']['parentId'])[props.tfields.title]\n          : '';\n        node['postion'] = treeMap.value.get(node['parentId'])\n          ? treeMap.value.get(node['parentId'])[props.tfields.title]\n          : '';\n      }\n      return flag;\n    });\n    xdataList.value = list.map((item) => {\n      const { company, dept, key, label, orgId, parentId, parent_node, postion, title, value, orgKindId } = item;\n      return { company, dept, key, label, orgId, parentId, parent_node, postion, title, value, orgKindId };\n    });\n  };\n\n  // 表格点击事件\n  const handleTableClick = (record, index) => {\n    const clickFunc = (event) => {\n      // 获取当前点击的行\n      const currentRow = event.currentTarget;\n      // 获取所有兄弟节点\n      const siblingRows = currentRow.parentElement.querySelectorAll('.ant-table-row');\n      // 移除兄弟节点中的 selected 类样式\n      siblingRows.forEach((siblingRow) => {\n        siblingRow.classList.remove('selected');\n      });\n      // 为当前行添加 selected 类样式\n      currentRow.classList.add('selected');\n      // 设置选中的节点\n      selectedNode.value = record;\n    };\n    return {\n      onclick: clickFunc,\n    };\n  };\n\n  const preventEnter = (event) => {\n    if (event.key === 'Enter') {\n      event.preventDefault();\n    }\n  };\n\n  watch(\n    () => props.value,\n    (newValue) => {\n      if (allNodes.value && newValue && allNodes.value.length != newValue.length) {\n        allNodes.value = newValue;\n      }\n    },\n  );\n\n  watch(\n    () => props.visible,\n    (newValue) => {\n      modalVisible.value = newValue;\n      if (!newValue) {\n        searchText.value = '';\n      } else {\n        if (allNodes.value && props.value && allNodes.value.length != props.value.length) {\n          allNodes.value = [...props.value];\n        }\n      }\n    },\n    {\n      deep: true,\n    },\n  );\n\n  watch(\n    () => props.tdata,\n    (newValue) => {\n      const rule = props?.tfields as fieldType;\n      const data = unref(props.tdata as unknown[] as TreeItem[]);\n      treeData.value = transformData(data, rule);\n      treeMap.value = transformMap(data, rule);\n      transformTableData(data, rule, 'top', null);\n    },\n  );\n\n  onMounted(() => {\n    modalVisible.value = props.visible;\n    allNodes.value = [...props.value];\n  });\n\n</script>\n<style lang=\"less\">\n  [data-theme='dark'] {\n    .theme1 {\n      .category-tree {\n        div.category-content {\n          div.category-search-box {\n            .search-icon {\n              .rotate-left {\n                color: #f0f0f0 !important;\n              }\n\n              .icon-delete {\n                color: #f0f0f0 !important;\n              }\n            }\n          }\n        }\n      }\n\n      .category-tree {\n        border-right: 1px solid rgb(255 255 255 / 16%);\n\n        span.category-title {\n          border-bottom: 1px solid rgb(255 255 255 / 16%);\n        }\n\n        div.category-content div.category-search-box {\n          border-bottom: 1px solid rgb(255 255 255 / 16%);\n        }\n\n        div.category-content div.category-search-box .search-icon {\n          border: 1px solid rgb(255 255 255 / 16%);\n        }\n      }\n      .employee-table {\n        span.employee-title {\n          border-bottom: 1px solid rgb(255 255 255 / 16%);\n        }\n        a.component-item {\n          border: 1px dashed rgb(255 255 255 / 16%);\n          background-color: rgba(7,59,109,0.5);\n          color: #f0f0f0;\n          i.icon-close {\n            span.anticon {\n              color: #f0f0f0;\n              &:hover {\n                box-shadow: 0 0 1px 0 rgb(255 255 255 / 10%);\n                color: rgb(255 255 255 / 50%);\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n\n  .theme3 {\n    .category-tree {\n      border-right: 1px solid #ebebeb;\n\n      span.category-title {\n        border-bottom: 1px solid #f0f0f0;\n      }\n\n      div.category-content div.category-search-box {\n        border-bottom: 1px solid #f0f0f0;\n      }\n\n      div.category-content div.category-search-box .search-icon {\n        border: 1px solid rgb(240 240 240);\n      }\n    }\n    .employee-table {\n      span.employee-title {\n        border-bottom: 1px solid rgb(240 240 240);\n      }\n      a.component-item {\n        border: 1px dashed #cdcdcd;\n        background-color: #fff;\n        color: #303030;\n        i.icon-close {\n          span.anticon {\n            color: #303030;\n            &:hover {\n              box-shadow: 0 0 1px 0 rgb(0 0 0 / 10%);\n              color: #6f6f6f;\n            }\n          }\n        }\n      }\n    }\n  }\n</style>\n<style lang=\"less\" scoped>\n  .dialog-content {\n    display: flex; /* 使用 flex 布局 */\n    align-items: stretch; /* 垂直方向拉伸填充 */\n    justify-content: flex-start; /* 左对齐 */\n  }\n\n  .category-tree {\n    width: 50%;\n    padding: 10px;\n    text-align: left;\n\n    span.category-title {\n      display: block;\n      width: calc(100% + 25px);\n      margin-left: -17.5px;\n      padding-bottom: 5px;\n      text-align: left;\n\n      span {\n        margin-left: 20px;\n      }\n    }\n\n    div.category-content {\n      width: calc(100% + 25px);\n      margin-left: -17.5px;\n\n      div.category-search-box {\n        width: 100%;\n        height: 45px;\n\n        .search-title {\n          height: 45px;\n          margin: 0 10px 0 20px;\n          line-height: 45px;\n        }\n\n        .search-input {\n          width: 220px;\n          height: 45px;\n          margin: 5px 0 0;\n          line-height: 45px;\n        }\n\n        .search-icon {\n          display: block;\n          position: absolute;\n          top: 4px;\n          width: 36px;\n          height: 35px;\n          margin: 0 3px;\n          padding-top: 2px;\n          border-radius: 4px;\n          line-height: 35px;\n          text-align: center;\n          cursor: pointer;\n\n          .app-iconify.anticon.rotate-left {\n            transform: rotate(90deg);\n            color: #303030;\n          }\n\n          .icon-delete {\n            color: #303030;\n          }\n        }\n      }\n\n      div.tree-value {\n        margin: 10px 0 0;\n        overflow-y: scroll;\n\n        :deep(.ant-table-pagination.ant-pagination) {\n          margin: 10px 0 0;\n        }\n\n        :deep(.ant-table-body) {\n          height: 100vh;\n        }\n\n        :deep(.ant-table-body) {\n          overflow-x: hidden;\n        }\n      }\n\n      :deep(.ant-btn .anticon) {\n        margin-top: 7.5px;\n      }\n    }\n\n    :deep(.ant-tree .ant-tree-node-content-wrapper.ant-tree-node-selected) {\n      background-color: transparent;\n      .ant-tree-title,\n      .ant-tree-icon__customize {\n        color: #1890ff;\n      }\n    }\n  }\n\n  .employee-table {\n    width: 50%;\n    padding: 10px;\n    text-align: left;\n\n    span.employee-title {\n      display: block;\n      width: calc(100% + 25px);\n      margin-left: -17.5px;\n      padding-bottom: 5px;\n      text-align: left;\n\n      span {\n        margin-left: 30px;\n      }\n    }\n\n    div.employee-content {\n      .layout-content {\n        width: 100%;\n        height: auto;\n        padding-right: 5px;\n        padding-left: 5px;\n        overflow-x: hidden;\n        overflow-y: auto;\n        -webkit-overflow-scrolling: touch;\n\n        .component-wrap {\n          width: auto;\n          padding: 5px;\n          float: none;\n          overflow: hidden;\n\n          a.component-item {\n            display: inline-block;\n            height: 30px;\n            margin: 5px 4px 0;\n            padding: 0 15px;\n            float: left;\n            line-height: 30px;\n            text-decoration: none;\n            white-space: nowrap;\n            cursor: pointer;\n\n            span.ui-component-text {\n              margin: 0 8px 0 0;\n            }\n\n            i.icon-close {\n              position: absolute;\n              margin: 0 2px 0 -5px;\n              cursor: pointer;\n\n              span.anticon {\n                position: relative;\n                top: 2px;\n\n                &:hover {\n                  position: relative;\n                  top: 1px;\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n</style>\n"],"names":["modalVisible","ref","treeData","searchText","selectedNode","allNodes","treeMap","tdataList","xdataList","scolumns","cancel","emit","confirm","rule","props","data","transformRespData","handleClose","updateVisible","$event","isTopNode","key","handleSNodeText","node","handleSNodeId","handleSelect","nodeKey","event","handleNode","snode","x","idFlag","textFlag","SysMessage","handleDelete","Modal","handleDeleteNode","item","index","tindex","reverseRule","reversedRule","rules","newItem","transformTableData","flag","pnode","newObj","list","transformData","transformMap","handleSearch","text","company","dept","label","orgId","parentId","parent_node","postion","title","value","orgKindId","handleTableClick","record","currentRow","siblingRow","preventEnter","watch","newValue","unref","onMounted"],"mappings":"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"}