var Y=Object.defineProperty,z=Object.defineProperties;var O=Object.getOwnPropertyDescriptors;var w=Object.getOwnPropertySymbols;var B=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;var k=(t,e,o)=>e in t?Y(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,F=(t,e)=>{for(var o in e||(e={}))B.call(e,o)&&k(t,o,e[o]);if(w)for(var o of w(e))M.call(e,o)&&k(t,o,e[o]);return t},D=(t,e)=>z(t,O(e));var x=(t,e,o)=>new Promise((n,l)=>{var g=s=>{try{c(o.next(s))}catch(d){l(d)}},p=s=>{try{c(o.throw(s))}catch(d){l(d)}},c=s=>s.done?n(s.value):Promise.resolve(s.value).then(g,p);c((o=o.apply(t,e)).next())});import{a5 as v,b as S,au as E,av as V,_ as L}from"./index.js";import{B as N}from"./BasicTable-0434a334.js";import"./BasicForm.vue_vue_type_style_index_0_lang-1ba7be9e.js";import"./index-085d06c7.js";import{u as W}from"./useTable-109483b3.js";import{K as H}from"./antd-15ac76ed.js";import{P as q}from"./index-20519caf.js";import{e as A}from"./download-03e71dd5.js";import"./index-316f6ffb.js";import{u as K}from"./useRender-21ce56fb.js";import{d as j,r as X,k as Z,al as $,Z as f,a9 as G,aa as _,f as I,u as m,E as J,ad as Q,_ as b,F as U,ac as y}from"./vue-71d1abb3.js";import"./useForm-dea3ed18.js";import"./uniqBy-92d3bc7f.js";import"./useWindowSizeFn-13b1b8a2.js";import"./index-f4fc48e6.js";import"./useTabs-2b062e85.js";import"./index-5d49b7a7.js";import"./SearchBox-22bb02d6.js";import"./UploadBox-636ecf02.js";import"./Dialog-0a006d82.js";import"./DictSelectBox.vue_vue_type_script_setup_true_lang-e03e9fe8.js";import"./OrganDialog-dd1023ce.js";import"./sortable.esm-4ae27e0b.js";import"./dict-c04c0dd8.js";import"./useContentViewHeight-7f845167.js";const ee=t=>v.get({url:"/oa/work-record/page",params:t},{isOnlyResult:!0}),te=t=>v.post({url:"/oa/work-record/export-excel",params:t,responseType:"blob"},{isOnlyResult:!0}),R=[{title:"类型",dataIndex:"type",width:100,sorter:!0,resizable:!0,customRender:({record:t})=>t.typeText},{title:"内容",dataIndex:"content",headAlign:"center",align:"left",width:220,sorter:!0,resizable:!0,customRender:({text:t,record:e})=>e.url?K.renderIframeLink(e.url,void 0,{},t):t},{title:"日期",dataIndex:"workDate",width:100,sorter:!0,resizable:!0},{title:"建议时间",dataIndex:"reminderTime",width:100,sorter:!0,resizable:!0},{title:"状态",dataIndex:"status",width:100,sorter:!0,resizable:!0}],T=H().format("YYYY-MM-DD"),oe={baseColProps:{span:8},labelWidth:120,autoAdvancedLine:1,schemas:[{field:"[startWorkDate, endWorkDate]",label:"日期",component:"RangePicker",defaultValue:[T,T],componentProps:{format:"YYYY-MM-DD",valueFormat:"YYYY-MM-DD",placeholder:["开始日期","结束日期"],style:"width:100%"}},{label:"类型",field:"type",component:"DictSelectBox",componentProps:{type:"work_schedule_type"}},{label:"内容",field:"content",component:"Input"},{label:"状态",field:"status",component:"DictSelectBox",componentProps:{type:"work_record_status"}}]},re={key:0,style:{color:"#19be6b"}},ae={key:1,style:{color:"red"}},se=j({__name:"index",setup(t){const{t:e}=S(),o=E(),n=X({}),l=i=>{const a=s(),r=D(F({},a.getFieldsValue()),{sortField:"workDate",sortOrder:"asc"});if(i){const u=d();r.pageNo=u.current,r.pageSize=u.pageSize}return n.sortField&&(r.sortField=n.sortField,r.sortOrder=n.sortOrder),r},g=()=>x(this,null,function*(){return yield ee(l(!0))}),p=Z("工作安排"),[c,{getForm:s,getPaginationRef:d}]=W({title:p,api:g,columns:R,useSearchForm:!0,formConfig:oe,showTableSetting:!0,bordered:!0,rowKey:"id",sortFn:i=>{var r;const a=(r=i.order)==null?void 0:r.replace("end","");n.sortOrder=a,n.sortField=a?i.field:void 0}});function C(i,a){a.width=i}function P(){o.createConfirm({title:e("common.message.confirmTitle"),iconType:"warning",content:e("common.message.exportMessage"),onOk(){return x(this,null,function*(){const a=l(!1);a.filename=`${p.value}.xlsx`,a.excelList=R,yield te(a).then(r=>{A(r==null?void 0:r.data,a.filename)}),o.success(e("common.exportSuccessText"))})}})}return(i,a)=>{const r=$("a-button");return f(),G(m(q),{dense:"",contentFullHeight:"",fixedHeight:"",contentClass:"flex",style:{position:"relative"}},{default:_(()=>[I(m(N),{class:"fix-basic-table",onRegister:m(c),onResizeColumn:C},{toolbar:_(()=>[I(r,{class:"yellow-btn",preIcon:m(V).EXPORT,onClick:P},{default:_(()=>[J(Q(m(e)("common.action.export")),1)]),_:1},8,["preIcon"])]),bodyCell:_(({column:u,text:h})=>[u.dataIndex==="status"?(f(),b(U,{key:0},[h==1?(f(),b("span",re,"已完成")):y("",!0),h==0?(f(),b("span",ae,"未完成")):y("",!0)],64)):y("",!0)]),_:1},8,["onRegister"])]),_:1})}}});const ze=L(se,[["__scopeId","data-v-84cd7ac8"]]);export{ze as default};
//# sourceMappingURL=index-413c0a53.js.map
