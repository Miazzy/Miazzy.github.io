{"version":3,"file":"Operation-a9e1ba7f.js","sources":["../../src/views/da/stationOperation/operation/Operation.vue"],"sourcesContent":["<template>\n  <div class=\"left-content\" :key=\"instanceLKey\">\n    <Inspection\n      class=\"section-box top-section\"\n      :operationSearchInfo=\"operationSearchInfo\"\n      v-if=\"operationLoading\"\n    />\n    <HiddenDefect\n      class=\"section-box middel-section\"\n      :operationSearchInfo=\"operationSearchInfo\"\n      v-if=\"operationLoading\"\n    />\n    <WorkOrder\n      class=\"section-box bottom-section\"\n      :operationSearchInfo=\"operationSearchInfo\"\n      v-if=\"operationLoading\"\n    />\n  </div>\n  <div class=\"middle-content\" :key=\"instanceTKey\">\n    <MiddleIndicator\n      icon=\"rate\"\n      label=\"计划完成(月)\"\n      :value=\"topIndexData.rate\"\n      unit=\"%\"\n      @click=\"handPlanPenetrate\"\n      vColor=\"#67C8FF\"\n    />\n    <MiddleIndicator\n      icon=\"loss\"\n      label=\"损失电量(月)\"\n      :value=\"topIndexData.loss\"\n      unit=\"万kWh\"\n      @click=\"handLossPenetrate\"\n      vColor=\"#F4D038\"\n    />\n    <MiddleIndicator\n      icon=\"person-total\"\n      label=\"在岗人数\"\n      :value=\"topIndexData.personTotal\"\n      unit=\"人\"\n      @click=\"handlePerson\"\n      vColor=\"#00BA24\"\n    />\n  </div>\n  <div class=\"right-content\" :key=\"instanceRKey\">\n    <Loss\n      class=\"section-box top-section\"\n      :operationSearchInfo=\"operationSearchInfo\"\n      v-if=\"operationLoading\"\n    />\n    <TwoTicket\n      class=\"section-box middel-section\"\n      :operationSearchInfo=\"operationSearchInfo\"\n      v-if=\"operationLoading\"\n    />\n    <Security\n      class=\"section-box bottom-section\"\n      :operationSearchInfo=\"operationSearchInfo\"\n      v-if=\"operationLoading\"\n    />\n  </div>\n</template>\n\n<script lang=\"ts\" setup>\n  import Inspection from './Inspection.vue';\n  import HiddenDefect from './HiddenDefect.vue';\n  import WorkOrder from './WorkOrder.vue';\n  import MiddleIndicator from '/@/components/Framework/OperationScreen/MiddleIndicator.vue';\n  import Loss from './Loss.vue';\n  import TwoTicket from './TwoTicket.vue';\n  import Security from './Security.vue';\n\n  import { reactive, UnwrapRef, onMounted, ref } from 'vue';\n  import { getAllIndexData } from './data';\n  import { assign } from 'lodash-es';\n  import { addTabPage } from '/@/utils/route';\n  import { buildUUID } from '@/utils/uuid';\n\n  interface Props {\n    searchStationInfo?: {};\n  }\n\n  //搜索参数\n  const operationSearchInfo: UnwrapRef<any> = reactive({});\n  const topIndexData: UnwrapRef<any> = reactive({});\n  const operationLoading = ref<boolean>(false);\n  const instanceLKey = ref(buildUUID());\n  const instanceTKey = ref(buildUUID());\n  const instanceRKey = ref(buildUUID());\n  const props = withDefaults(defineProps<Props>(), {});\n\n  const handPlanPenetrate = () => {\n    addTabPage('/bi/elec/planned');\n  };\n\n  const handLossPenetrate = () => {\n    let now = new Date();\n    let nowMonth = now.getFullYear().toString() + '-' + (now.getMonth() + 1).toString();\n    addTabPage('/bi/elec/lossPower', '损失电量统计', {\n      stationId: props.searchStationInfo.stationUUId,\n      dateType: 'month',\n      startDate: nowMonth,\n      endDate: nowMonth,\n    });\n  };\n\n  const handlePerson = () => {\n    addTabPage('/bi/integrated/personnelStructure', '人员结构统计', {\n      stationId: props.searchStationInfo.stationUUId,\n    });\n  };\n\n  // 获取顶端指标函数\n  const queryAllIndexData = async () => {\n    let data = await getAllIndexData(operationSearchInfo);\n    if (data.result) {\n      operationLoading.value = true;\n      assign(topIndexData, data.result);\n    }\n  };\n\n  // 更新组件函数\n  const handleUpdate = () => {\n    instanceLKey.value = buildUUID();\n    instanceTKey.value = buildUUID();\n    instanceRKey.value = buildUUID();\n  };\n\n  defineExpose({\n    handleUpdate,\n  });\n\n  onMounted(() => {\n    assign(operationSearchInfo, props.searchStationInfo);\n    queryAllIndexData(); // 顶端指标\n  });\n</script>\n\n<style lang=\"less\" scoped>\n  .left-content {\n    display: flex;\n    position: absolute;\n    top: 0.9rem;\n    left: 0;\n    flex-direction: column;\n    width: 25vw;\n    height: calc(100vh - 0.9rem);\n    padding: 0 0.57vw 1.68vh 0.68vw;\n  }\n\n  .middle-content {\n    display: flex;\n    position: absolute;\n    top: 0.96rem;\n    left: 25vw;\n    justify-content: space-between;\n    width: 50vw;\n  }\n\n  .right-content {\n    display: flex;\n    position: absolute;\n    top: 0.9rem;\n    right: 0;\n    flex-direction: column;\n    width: 25vw;\n    height: calc(100vh - 0.9rem);\n    padding: 0 0.68vw 1.68vh 0.57vw;\n  }\n\n  .section-box {\n    flex: 1;\n    width: 100%;\n    height: 33.3333%;\n    overflow: hidden;\n\n    &.top-section {\n      padding-bottom: 0.62vh;\n    }\n\n    &.middel-section {\n      padding: 0.31vh 0;\n    }\n\n    &.bottom-section {\n      padding-top: 0.62vh;\n    }\n  }\n</style>\n"],"names":["operationSearchInfo","reactive","topIndexData","operationLoading","ref","instanceLKey","buildUUID","instanceTKey","instanceRKey","handPlanPenetrate","addTabPage","handLossPenetrate","now","nowMonth","props","handlePerson","queryAllIndexData","__async","data","getAllIndexData","assign","__expose","onMounted"],"mappings":"0rCAmFQA,EAAsCC,EAAS,CAAA,CAAE,EACjDC,EAA+BD,EAAS,CAAA,CAAE,EAC1CE,EAAmBC,EAAa,EAAK,EACrCC,EAAeD,EAAIE,EAAA,CAAW,EAC9BC,EAAeH,EAAIE,EAAA,CAAW,EAC9BE,EAAeJ,EAAIE,EAAA,CAAW,EAG9BG,EAAoB,IAAM,CAC9BC,EAAW,kBAAkB,CAAA,EAGzBC,EAAoB,IAAM,CAC1B,IAAAC,MAAU,KACVC,EAAWD,EAAI,YAAA,EAAc,SAAa,EAAA,KAAOA,EAAI,SAAA,EAAa,GAAG,SAAS,EAClFF,EAAW,qBAAsB,SAAU,CACzC,UAAWI,EAAM,kBAAkB,YACnC,SAAU,QACV,UAAWD,EACX,QAASA,CAAA,CACV,CAAA,EAGGE,EAAe,IAAM,CACzBL,EAAW,oCAAqC,SAAU,CACxD,UAAWI,EAAM,kBAAkB,WAAA,CACpC,CAAA,EAIGE,EAAoB,IAAYC,EAAA,sBAChC,IAAAC,EAAO,MAAMC,EAAgBnB,CAAmB,EAChDkB,EAAK,SACPf,EAAiB,MAAQ,GAClBiB,EAAAlB,EAAcgB,EAAK,MAAM,EAClC,GAUW,OAAAG,EAAA,CACX,aAPmB,IAAM,CACzBhB,EAAa,MAAQC,IACrBC,EAAa,MAAQD,IACrBE,EAAa,MAAQF,GAAU,CAI/B,CACD,EAEDgB,EAAU,IAAM,CACPF,EAAApB,EAAqBc,EAAM,iBAAiB,EACjCE,GAAA,CACnB"}