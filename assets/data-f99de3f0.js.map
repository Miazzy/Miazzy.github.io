{"version":3,"file":"data-f99de3f0.js","sources":["../../src/views/po/integrated/infoarchive/data.ts"],"sourcesContent":["import { defHttp } from '/@/utils/http/axios';\nimport { BasicColumn, FormProps, useRender } from '/@/components/Table';\nimport { useUserStore } from '/@/store/modules/user';\n\nenum Api {\n  getStationPeriodTreeUrl = '/baseset/common/list-orgStationPeriodTree',\n  createInfoarchiveUrl = '/po/information-archive/create',\n  updateInfoarchiveUrl = '/po/information-archive/update',\n  getInfoarchiveUrl = '/po/information-archive/get',\n  deleteInfoarchiveUrl = '/po/information-archive/delete',\n  getInfoarchiveListUrl = '/po/information-archive/page',\n  exprotInfoarchiveListUrl = '/po/information-archive/export-excel',\n}\n// 电站树数据\nexport const getStationPeriodTreeList = (params) =>\n  defHttp.post({ url: Api.getStationPeriodTreeUrl, params }, { isOnlyResult: true });\n\n//获取信息档案列表\nexport const getInfoarchiveList = (params) =>\n  defHttp.get({ url: Api.getInfoarchiveListUrl, params }, { isOnlyResult: true });\n\n//保存信息档案\nexport const saveInfoarchive = (params) => {\n  if (!params.id) {\n    return createInfoarchive(params);\n  }\n  return updateInfoarchive(params);\n};\n\n//新增信息档案\nexport const createInfoarchive = (params) =>\n  defHttp.post({ url: Api.createInfoarchiveUrl, params }, { isOnlyResult: true });\n\n//修改信息档案\nexport const updateInfoarchive = (params) =>\n  defHttp.post({ url: Api.updateInfoarchiveUrl, params }, { isOnlyResult: true });\n\n//获取信息档案\nexport const getInfoarchive = (params) => defHttp.get({ url: Api.getInfoarchiveUrl, params }, {});\n\n//删除信息档案\nexport const deleteInfoarchive = (params) =>\n  defHttp.delete({ url: Api.deleteInfoarchiveUrl, params }, { isOnlyResult: true });\n\n//导出信息档案\nexport const exprotInfoarchiveList = (params) =>\n  defHttp.download({ url: Api.exprotInfoarchiveListUrl, params }, { isReturnNativeResponse: true });\n\n// 表格SearchForm字段\nexport const searchFormSchema: Partial<FormProps> = {\n  labelWidth: 120,\n  actionColOptions: {\n    span: 24,\n  },\n  autoAdvancedLine: 1,\n  showAdvancedButton: true,\n  baseColProps: {\n    span: 7,\n  },\n  autoSubmitOnEnter: true,\n  noHideBtnFlag: true,\n  schemas: [\n    {\n      field: `billCode`,\n      label: `单据编号`,\n      component: 'Input',\n      componentProps: { placeholder: '请输入单据编号' },\n    },\n    {\n      field: `subject`,\n      label: `主题`,\n      component: 'Input',\n      componentProps: { placeholder: '请输入主题' },\n    },\n    {\n      field: `competentName`,\n      label: `主管单位`,\n      component: 'DictSelectBox',\n      componentProps: {\n        type: 'competentType',\n      },\n    },\n    {\n      field: `grade`,\n      label: `等级`,\n      component: 'DictSelectBox',\n      componentProps: {\n        type: 'archiveGradeType',\n      },\n    },\n    {\n      field: `competentNameLevel`,\n      label: `主管单位等级`,\n      component: 'DictSelectBox',\n      componentProps: {\n        type: 'competentLevelType',\n      },\n    },\n    {\n      label: '状态',\n      field: 'status',\n      component: 'DictSelectBox',\n      componentProps: {\n        type: 'bpm_process_instance_result',\n      },\n    },\n  ],\n};\n\n//主页面列表字段展示\nexport const columns: BasicColumn[] = [\n  // { title: 'id', dataIndex: 'id', width: 150, defaultHidden: true },\n  { title: '单据编号', dataIndex: 'billCode', width: 150, sorter: true, resizable: true },\n  // { title: '所属公司id', dataIndex: 'stationOrganId', width: 150, defaultHidden: true },\n  {\n    title: '所属公司',\n    dataIndex: 'stationOrganName',\n    width: 150,\n    sorter: true,\n    resizable: true,\n    ifShow: useUserStore().isMultiOrganization,\n  },\n  // { title: '电站id', dataIndex: 'stationId', width: 150, defaultHidden: true },\n  { title: '电站名称', dataIndex: 'stationName', width: 150, sorter: true, resizable: true },\n  { title: '分期', dataIndex: 'periodName', width: 150, sorter: true, resizable: true },\n  // { title: '分期id', dataIndex: 'periodId', width: 150, defaultHidden: true },\n  { title: '主题', dataIndex: 'subject', width: 150, sorter: true, resizable: true },\n  {\n    title: '主管单位',\n    dataIndex: 'competentName',\n    width: 150,\n    sorter: true,\n    resizable: true,\n    customRender: ({ record }) => {\n      return record.competentNameText;\n    },\n  },\n  { title: '下发时间', dataIndex: 'issuedDate', width: 150, sorter: true, resizable: true },\n  {\n    title: '重要等级',\n    dataIndex: 'grade',\n    width: 150,\n    sorter: true,\n    resizable: true,\n    customRender: ({ record }) => {\n      return record.gradeText;\n    },\n  },\n  { title: '发文单位', dataIndex: 'issuingCompany', width: 150, sorter: true, resizable: true },\n  {\n    title: '主管单位级别',\n    dataIndex: 'competentNameLevel',\n    width: 150,\n    sorter: true,\n    resizable: true,\n    customRender: ({ record }) => {\n      return record.competentNameLevelText;\n    },\n  },\n  {\n    title: '审核状态',\n    dataIndex: 'status',\n    sorter: true,\n    resizable: true,\n    customRender: ({ text, record }) => {\n      return useRender.renderFlowStatus(text, record.statusText);\n    },\n  },\n];\n\nexport function initInfoItems(billTitleOption, item) {\n  billTitleOption.infoItems.push({\n    key: 'billCode',\n    label: '单据编号',\n    value: item.billCode,\n    position: 'left',\n  });\n  billTitleOption.infoItems.push({\n    key: 'fillinDate',\n    label: '制单日期',\n    value: item.fillinDate,\n    position: 'center',\n  });\n  billTitleOption.infoItems.push({\n    key: 'createPerson',\n    label: '创建人',\n    value: item.deptName + '.' + item.personMemberName,\n    position: 'right',\n  });\n}\n"],"names":["getStationPeriodTreeList","params","defHttp","getInfoarchiveList","saveInfoarchive","updateInfoarchive","createInfoarchive","getInfoarchive","exprotInfoarchiveList","searchFormSchema","columns","useUserStore","record","text","useRender"],"mappings":"uOAcO,MAAMA,EAA4BC,GACvCC,EAAQ,KAAK,CAAE,IAAK,4CAA6B,OAAAD,CAAO,EAAG,CAAE,aAAc,GAAM,EAGtEE,EAAsBF,GACjCC,EAAQ,IAAI,CAAE,IAAK,+BAA2B,OAAAD,CAAO,EAAG,CAAE,aAAc,GAAM,EAGnEG,EAAmBH,GACzBA,EAAO,GAGLI,EAAkBJ,CAAM,EAFtBK,EAAkBL,CAAM,EAMtBK,EAAqBL,GAChCC,EAAQ,KAAK,CAAE,IAAK,iCAA0B,OAAAD,CAAO,EAAG,CAAE,aAAc,EAAM,CAAA,EAGnEI,EAAqBJ,GAChCC,EAAQ,KAAK,CAAE,IAAK,iCAA0B,OAAAD,CAAO,EAAG,CAAE,aAAc,EAAM,CAAA,EAGnEM,EAAkBN,GAAWC,EAAQ,IAAI,CAAE,IAAK,8BAAuB,OAAAD,CAAU,EAAA,EAAE,EAOnFO,EAAyBP,GACpCC,EAAQ,SAAS,CAAE,IAAK,uCAA8B,OAAAD,CAAO,EAAG,CAAE,uBAAwB,GAAM,EAGrFQ,EAAuC,CAClD,WAAY,IACZ,iBAAkB,CAChB,KAAM,EACR,EACA,iBAAkB,EAClB,mBAAoB,GACpB,aAAc,CACZ,KAAM,CACR,EACA,kBAAmB,GACnB,cAAe,GACf,QAAS,CACP,CACE,MAAO,WACP,MAAO,OACP,UAAW,QACX,eAAgB,CAAE,YAAa,SAAU,CAC3C,EACA,CACE,MAAO,UACP,MAAO,KACP,UAAW,QACX,eAAgB,CAAE,YAAa,OAAQ,CACzC,EACA,CACE,MAAO,gBACP,MAAO,OACP,UAAW,gBACX,eAAgB,CACd,KAAM,eACR,CACF,EACA,CACE,MAAO,QACP,MAAO,KACP,UAAW,gBACX,eAAgB,CACd,KAAM,kBACR,CACF,EACA,CACE,MAAO,qBACP,MAAO,SACP,UAAW,gBACX,eAAgB,CACd,KAAM,oBACR,CACF,EACA,CACE,MAAO,KACP,MAAO,SACP,UAAW,gBACX,eAAgB,CACd,KAAM,6BACR,CACF,CACF,CACF,EAGaC,EAAyB,CAEpC,CAAE,MAAO,OAAQ,UAAW,WAAY,MAAO,IAAK,OAAQ,GAAM,UAAW,EAAK,EAElF,CACE,MAAO,OACP,UAAW,mBACX,MAAO,IACP,OAAQ,GACR,UAAW,GACX,OAAQC,IAAe,mBACzB,EAEA,CAAE,MAAO,OAAQ,UAAW,cAAe,MAAO,IAAK,OAAQ,GAAM,UAAW,EAAK,EACrF,CAAE,MAAO,KAAM,UAAW,aAAc,MAAO,IAAK,OAAQ,GAAM,UAAW,EAAK,EAElF,CAAE,MAAO,KAAM,UAAW,UAAW,MAAO,IAAK,OAAQ,GAAM,UAAW,EAAK,EAC/E,CACE,MAAO,OACP,UAAW,gBACX,MAAO,IACP,OAAQ,GACR,UAAW,GACX,aAAc,CAAC,CAAE,OAAAC,KACRA,EAAO,iBAElB,EACA,CAAE,MAAO,OAAQ,UAAW,aAAc,MAAO,IAAK,OAAQ,GAAM,UAAW,EAAK,EACpF,CACE,MAAO,OACP,UAAW,QACX,MAAO,IACP,OAAQ,GACR,UAAW,GACX,aAAc,CAAC,CAAE,OAAAA,KACRA,EAAO,SAElB,EACA,CAAE,MAAO,OAAQ,UAAW,iBAAkB,MAAO,IAAK,OAAQ,GAAM,UAAW,EAAK,EACxF,CACE,MAAO,SACP,UAAW,qBACX,MAAO,IACP,OAAQ,GACR,UAAW,GACX,aAAc,CAAC,CAAE,OAAAA,KACRA,EAAO,sBAElB,EACA,CACE,MAAO,OACP,UAAW,SACX,OAAQ,GACR,UAAW,GACX,aAAc,CAAC,CAAE,KAAAC,EAAM,OAAAD,KACdE,EAAU,iBAAiBD,EAAMD,EAAO,UAAU,CAE7D,CACF"}