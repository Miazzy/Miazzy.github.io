{"version":3,"file":"templateHisModel.vue_vue_type_script_setup_true_lang-8f2d2a80.js","sources":["../../src/views/po/integrated/assessmentevaluation/template/templateHisModel.vue"],"sourcesContent":["<template>\n  <BasicModal\n    v-bind=\"$attrs\"\n    @register=\"registerModal\"\n    @cancel=\"cancelDetail\"\n    @ok=\"handleOk\"\n    title=\"历史模板\"\n    width=\"400px\"\n  >\n    <a-table\n      :columns=\"hisColumns\"\n      :data-source=\"templateHisList\"\n      :pagination=\"false\"\n      size=\"small\"\n      bordered\n      rowKey=\"id\"\n      :row-selection=\"{\n        selectedRowKeys: selectedRowKeys,\n        type: 'radio',\n        onSelect: onSelectChange,\n      }\"\n      :scroll=\"{ x: 300, y: 600 }\"\n      ><template #bodyCell=\"{ column, text, record }\">\n        <template v-if=\"column.dataIndex === 'status'\">\n          <span style=\"color: #dc0000\" v-if=\"text == 0\">草稿</span>\n          <span style=\"color: #338ed1\" v-if=\"text == 1\">处理中</span>\n          <span style=\"color: #30ca5a\" v-if=\"text == 2\">通过</span>\n          <span style=\"color: #929292\" v-if=\"text == 3\">不通过</span>\n          <span style=\"color: #929292\" v-if=\"text == 4\">已取消</span>\n          <span style=\"color: #929292\" v-if=\"text == 5\">已终止</span>\n          <span style=\"color: #fda941\" v-if=\"text == 6\">退回/驳回</span>\n        </template>\n      </template>\n    </a-table>\n  </BasicModal>\n</template>\n<script lang=\"ts\" setup>\n  import { ref, reactive, defineEmits } from 'vue';\n  import { BasicModal, useModalInner } from '/@/components/Modal';\n  import { getHisColumns, getTemplateHisList } from './template';\n\n  // 父组件穿过来的值\n  interface Props {\n    fIndexList?: [];\n  }\n  const props = withDefaults(defineProps<Props>(), {});\n\n  const hisColumns = getHisColumns();\n  let templateHisList = ref([]);\n  const selectedTempId = ref('');\n  const [registerModal, { setModalProps, closeModal }] = useModalInner(async () => {\n    setModalProps({ confirmLoading: false });\n    loadTableData();\n    // 匹配被选中的数据\n    state.selectedRowKeys = props.fIndexList.map((item) => item.id);\n  });\n\n  const emit = defineEmits(['cancelDetail', 'handleOk']);\n  function cancelDetail() {\n    emit('cancelDetail');\n  }\n\n  function loadTableData() {\n    getTemplateHisList().then((data) => {\n      templateHisList.value = data.result;\n    });\n  }\n  function handleOk() {\n    console.info(state.selectedRowKeys);\n    emit('selectedTempId', selectedTempId.value);\n    closeModal();\n  }\n\n  // 选择框\n\n  type Key = string | number;\n  const state = reactive<{\n    selectedRowKeys: Key[];\n    loading: boolean;\n  }>({\n    selectedRowKeys: [], // Check here to configure the default column\n    loading: false,\n  });\n\n  // 多选框相关\n  const onSelectChange = (selectedRowKeys: Key[]) => {\n    selectedTempId.value = selectedRowKeys.id;\n  };\n</script>\n"],"names":["hisColumns","getHisColumns","templateHisList","ref","selectedTempId","registerModal","setModalProps","closeModal","useModalInner","__async","loadTableData","state","props","item","cancelDetail","emit","getTemplateHisList","data","handleOk","reactive","onSelectChange","selectedRowKeys"],"mappings":"0wBA+CQA,EAAaC,IACf,IAAAC,EAAkBC,EAAI,CAAA,CAAE,EACtB,MAAAC,EAAiBD,EAAI,EAAE,EACvB,CAACE,EAAe,CAAE,cAAAC,EAAe,WAAAC,CAAY,CAAA,EAAIC,EAAc,IAAYC,EAAA,sBACjEH,EAAA,CAAE,eAAgB,EAAA,CAAO,EACzBI,IAEdC,EAAM,gBAAkBC,EAAM,WAAW,IAAKC,GAASA,EAAK,EAAE,CAAA,EAC/D,EAGD,SAASC,GAAe,CACtBC,EAAK,cAAc,CACrB,CAEA,SAASL,GAAgB,CACJM,EAAA,EAAE,KAAMC,GAAS,CAClCf,EAAgB,MAAQe,EAAK,MAAA,CAC9B,CACH,CACA,SAASC,GAAW,CACV,QAAA,KAAKP,EAAM,eAAe,EAC7BI,EAAA,iBAAkBX,EAAe,KAAK,EAChCG,GACb,CAKA,MAAMI,EAAQQ,EAGX,CACD,gBAAiB,CAAC,EAClB,QAAS,EAAA,CACV,EAGKC,EAAkBC,GAA2B,CACjDjB,EAAe,MAAQiB,EAAgB,EAAA"}