{"version":3,"file":"stationPicture-bf8d7725.js","sources":["../../src/views/monitor/stationOverview/stationPicture.vue"],"sourcesContent":["<template>\n  <div style=\"display: flex\">\n    <div class=\"station-info\">\n      <div class=\"view\">\n        <a-carousel ref=\"carouselRef\" class=\"img-carousel\" arrows>\n          <template #prevArrow>\n            <div class=\"custom-slick-arrow\" style=\"z-index: 1; left: 10px\">\n              <left-circle-outlined />\n            </div>\n          </template>\n          <template #nextArrow>\n            <div class=\"custom-slick-arrow\" style=\"right: 10px\">\n              <right-circle-outlined />\n            </div>\n          </template>\n          <div class=\"carouse-image-content\" v-for=\"(item, index) in urls\">\n            <img class=\"bg-img\" :index=\"index\" :src=\"item\" alt=\"\" />\n          </div>\n        </a-carousel>\n      </div>\n      <div class=\"pre-view\">\n        <div class=\"box\">\n          <LeftOutlined class=\"left-right-icon\" @click=\"toLeft\" />\n        </div>\n        <div class=\"box-center\">\n          <div\n            class=\"image-content-wrapper\"\n            :style=\"{ transform: `translateX(${-currentIndex * 100}px)` }\"\n          >\n            <div class=\"image-content\" v-for=\"(item, index) in urls\">\n              <img class=\"img\" :src=\"item\" alt=\"\" @click=\"goToPicture(index)\" />\n            </div>\n          </div>\n        </div>\n        <div class=\"box\">\n          <RightOutlined class=\"left-right-icon\" @click=\"toRight\" />\n        </div>\n      </div>\n    </div>\n    <div class=\"right-box\">\n      <div class=\"top-box\">\n        <div style=\"padding: 10px\">\n          <a-card title=\"电站简介\" :bordered=\"false\" style=\"width: 100%\">\n            <a-row style=\"border-bottom: 1px solid rgb(241 241 241 / 10%)\">\n              <a-col v-show=\"true\" :span=\"12\">\n                <a-form-item label=\"光伏装机\" labelAlign=\"left\" :labelCol=\"{ span: 12 }\">\n                  <span>{{ stationBaseInfo.connectCapacity || '' }}MW</span>\n                </a-form-item>\n              </a-col>\n              <a-col v-show=\"true\" :span=\"12\">\n                <a-form-item label=\"储能装机\" labelAlign=\"left\" :labelCol=\"{ span: 12 }\">\n                  <span>{{ stationBaseInfo.accessCapacity || '' }}MW</span>\n                </a-form-item>\n              </a-col>\n            </a-row>\n            <a-row style=\"border-bottom: 1px solid rgb(241 241 241 / 10%)\">\n              <a-col v-show=\"true\" :span=\"12\">\n                <a-form-item label=\"安装方式\" labelAlign=\"left\" :labelCol=\"{ span: 12 }\">\n                  <span>{{ stationBaseInfo.accessCapacity || '' }}</span>\n                </a-form-item>\n              </a-col>\n              <a-col v-show=\"true\" :span=\"12\">\n                <a-form-item label=\"安装角度\" labelAlign=\"left\" :labelCol=\"{ span: 12 }\">\n                  <span>{{ stationBaseInfo.accessCapacity || '' }}度</span>\n                </a-form-item>\n              </a-col>\n            </a-row>\n            <a-row style=\"border-bottom: 1px solid rgb(241 241 241 / 10%)\">\n              <a-col v-show=\"true\" :span=\"12\">\n                <a-form-item label=\"并网日期\" labelAlign=\"left\" :labelCol=\"{ span: 12 }\">\n                  <span>{{ stationBaseInfo.firstGridConnectionDate || '' }}</span>\n                </a-form-item>\n              </a-col>\n              <a-col v-show=\"true\" :span=\"12\">\n                <a-form-item label=\"并网天数\" labelAlign=\"left\" :labelCol=\"{ span: 12 }\">\n                  <span>{{ stationBaseInfo.connectDays || '' }}天</span>\n                </a-form-item>\n              </a-col>\n            </a-row>\n            <a-row style=\"border-bottom: 1px solid rgb(241 241 241 / 10%)\">\n              <a-col v-show=\"true\" :span=\"12\">\n                <a-form-item label=\"设计运行年限\" labelAlign=\"left\" :labelCol=\"{ span: 12 }\">\n                  <span>{{ stationBaseInfo.serviceLife }}年</span>\n                </a-form-item>\n              </a-col>\n              <a-col v-show=\"true\" :span=\"12\">\n                <a-form-item label=\"平均海拔\" labelAlign=\"left\" :labelCol=\"{ span: 12 }\">\n                  <span>{{ stationBaseInfo.altitude }}m</span>\n                </a-form-item>\n              </a-col>\n            </a-row>\n          </a-card>\n        </div>\n      </div>\n      <div class=\"weather-box\">\n        <div class=\"weather-top\">\n          <div class=\"today-layout bg\">\n            <div class=\"weather-info\">\n              <div class=\"weather-icon\">\n                <SvgIcon\n                  class=\"iconfont\"\n                  :name=\"getWeatherIconName(props.iconDay)\"\n                  style=\"width: 112px; height: 112px\"\n                />\n                <!--  :size=\"50\" -->\n              </div>\n              <div class=\"weather-data\">\n                <div class=\"temperature-text\">{{ props.temp }}</div>\n                <div class=\"weather-text\">{{ props.textDay }}</div>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class=\"weather-middle\">\n          <a-row style=\"margin-bottom: -10px\">\n            <a-col v-show=\"true\" :span=\"12\">\n              <a-form-item label=\"温度\" labelAlign=\"left\" :labelCol=\"{ span: 8 }\">\n                <span>{{ props.todayWeather.tempMin }}/{{ props.todayWeather.tempMax }}℃</span>\n              </a-form-item>\n            </a-col>\n            <a-col v-show=\"true\" :span=\"12\">\n              <a-form-item label=\"空气质量\" labelAlign=\"left\" :labelCol=\"{ span: 8 }\">\n                <span>{{ props.todayWeather.tempMin }}</span>\n              </a-form-item>\n            </a-col>\n          </a-row>\n          <a-row style=\"margin-bottom: -10px\">\n            <a-col v-show=\"true\" :span=\"12\">\n              <a-form-item label=\"风力\" labelAlign=\"left\" :labelCol=\"{ span: 8 }\">\n                <span>{{ props.todayWeather.windScale }}级</span>\n              </a-form-item>\n            </a-col>\n            <a-col v-show=\"true\" :span=\"12\">\n              <a-form-item label=\"降水量\" labelAlign=\"left\" :labelCol=\"{ span: 8 }\">\n                <span>{{ props.todayWeather.precip }}mm</span>\n              </a-form-item>\n            </a-col>\n          </a-row>\n          <a-row style=\"margin-bottom: -10px\">\n            <a-col v-show=\"true\" :span=\"12\">\n              <a-form-item label=\"风向\" labelAlign=\"left\" :labelCol=\"{ span: 8 }\">\n                <span>{{ props.todayWeather.windDir }}</span>\n              </a-form-item>\n            </a-col>\n            <a-col v-show=\"true\" :span=\"12\">\n              <a-form-item label=\"相对湿度\" labelAlign=\"left\" :labelCol=\"{ span: 8 }\">\n                <span>{{ props.todayWeather.humidity }}%</span>\n              </a-form-item>\n            </a-col>\n          </a-row>\n        </div>\n        <div class=\"weather-foot\">\n          <WeatherItem\n            v-for=\"(item, index) in props.weatherData\"\n            :key=\"index\"\n            style=\"width: calc(100% / 5); margin: 0 5px\"\n            :day=\"item.weekDay\"\n            :weatherIcon=\"getWeatherIconName(item.iconDay)\"\n            :temperature=\"item.temp\"\n            :description=\"item.textDay\"\n            :type=\"item.type\"\n          />\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<script lang=\"ts\" setup>\n  import { onMounted, ref, watch, defineExpose, reactive } from 'vue';\n  import {\n    LeftCircleOutlined,\n    RightCircleOutlined,\n    LeftOutlined,\n    RightOutlined,\n  } from '@ant-design/icons-vue';\n  import * as FileApi from '@/api/infra/file';\n  import WeatherItem from './otherWeatherItem.vue';\n  import { getStationById } from '../monitorApi';\n  import { weatherIcons } from '@/utils/weatherIcon';\n  import { SvgIcon } from '/@/components/Icon';\n\n  // 传入参数\n  const props = defineProps({\n    stationId: { type: String, default: '' },\n    bizFileId: { type: String, default: '' },\n    weatherData: [],\n    todayWeather: {},\n    temp: { type: String, default: '' },\n    textDay: { type: String, default: '' },\n    iconDay: { type: String, default: '' },\n  });\n  const urls = ref([]);\n  const carouselRef = ref();\n  const currentIndex = ref(0);\n  const stationBaseInfo = ref({\n    connectCapacity: '',\n    accessCapacity: '',\n    firstGridConnectionDate: '',\n    accessCapacity: '',\n    serviceLife: '',\n    altitude: '',\n  });\n\n  const queryStationImg = async (bizFileId) => {\n    if (bizFileId == '') {\n      return;\n    }\n\n    let fileData = await FileApi.getFiles({ bizId: bizFileId });\n    let urlTemp = [];\n    if (fileData.length > 0) {\n      fileData.forEach((element) => {\n        const el = FileApi.attachmentDownloadUrl(element.url);\n        urlTemp.push(el);\n      });\n      urls.value = urlTemp;\n    }\n    loadBaseInfo();\n  };\n\n  const toLeft = () => {\n    if (currentIndex.value > 0) {\n      currentIndex.value -= 1;\n      carouselRef.value.prev();\n    }\n  };\n\n  const toRight = () => {\n    if (currentIndex.value < urls.value.length - 1) {\n      currentIndex.value += 1;\n      carouselRef.value.next();\n    }\n  };\n\n  const goToPicture = (index) => {\n    carouselRef.value.goTo(index);\n    currentIndex.value = index;\n  };\n\n  const loadBaseInfo = async () => {\n    if (props.stationId == '') {\n      return;\n    }\n    let res = await getStationById({ id: props.stationId });\n    if (res) {\n      stationBaseInfo.value = res;\n      const conDate = new Date(res.firstGridConnectionDate);\n      const now = new Date();\n      const diff = Math.abs(now.getTime() - conDate.getTime());\n      // 将毫秒数转换为天数\n      stationBaseInfo.value.connectDays = Math.floor(diff / (1000 * 60 * 60 * 24));\n    }\n  };\n\n  const getWeatherIconName = (iconDay) => {\n    return iconDay && weatherIcons[iconDay] ? weatherIcons[iconDay] : 'tianqi-wu2';\n  };\n\n  onMounted(() => {\n    // queryStationImg();\n  });\n\n  defineExpose({ queryStationImg });\n</script>\n\n<style scoped>\n  .bg {\n    border-radius: 1px;\n  }\n\n  .day-text {\n    padding-top: 1px;\n    opacity: 0.6;\n    color: #fff;\n    font-size: 20px;\n    line-height: 1;\n    text-align: center;\n  }\n\n  .today-layout {\n    width: 200px;\n    height: 130px;\n\n    .weather-info {\n      display: flex;\n      align-items: center;\n      justify-content: center;\n\n      .weather-icon {\n        width: 112px;\n        height: 112px;\n        margin-right: 20px;\n      }\n\n      .weather-data {\n        color: #fff;\n        line-height: 1;\n      }\n\n      .temperature-text {\n        margin-bottom: 1px;\n        font-size: 28px;\n      }\n\n      .weather-text {\n        transform: scale(0.83);\n        transform-origin: left;\n        opacity: 0.9;\n        font-size: 20px;\n      }\n    }\n  }\n\n  /* 覆盖AntD默认Row间距样式 */\n  .ant-row {\n    margin-bottom: 10px; /* 根据需求调整 */\n  }\n\n  .station-info {\n    width: 70%;\n    height: 684px;\n    border: solid 1px rgb(255 255 255 / 16%);\n\n    .view {\n      width: 100%;\n      height: 576px;\n      cursor: pointer;\n    }\n\n    .pre-view {\n      display: flex;\n      width: 100%;\n      height: 95px;\n      overflow: hidden;\n      border-top: solid 1px rgb(255 255 255 / 16%);\n\n      .box {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        width: 20px;\n        height: 95px;\n\n        .left-right-icon {\n          color: rgb(255 255 255 / 16%);\n          font-size: 20px;\n        }\n      }\n\n      .box-center {\n        display: flex;\n        width: 100%;\n        height: 95px;\n        margin-top: 5px;\n        padding: 20px 5px;\n        overflow: hidden;\n\n        .image-content-wrapper {\n          display: flex;\n          transition: transform 0.3s ease-in-out;\n        }\n\n        .image-content {\n          .img {\n            width: 99px;\n            height: 57px;\n            margin: 0 5px;\n\n            &:hover,\n            &:focus,\n            &:active {\n              transform: scale(1.1);\n              border: 2px solid rgb(24 144 255 / 100%); /* 边框的颜色和透明度 */\n              box-shadow: 0 0 10px rgb(24 144 255 / 100%); /* 模拟外发光的效果 */\n              cursor: pointer;\n            }\n          }\n\n          .img-wrapper::after {\n            width: 99px;\n            height: 57px;\n            margin: 0 5px;\n            border: 2px solid rgb(24 144 255 / 100%); /* 边框的颜色和透明度 */\n            box-shadow: 0 0 10px rgb(24 144 255 / 100%); /* 模拟外发光的效果 */\n          }\n        }\n      }\n    }\n  }\n\n  .right-box {\n    width: calc(30% - 10px);\n    height: 684px;\n    margin-left: 10px;\n\n    .top-box {\n      width: 100%;\n      height: 329px;\n      border: solid 1px rgb(255 255 255 / 16%);\n    }\n\n    .weather-box {\n      width: 100%;\n      height: 345px;\n      margin-top: 10px;\n      border: solid 1px rgb(255 255 255 / 16%);\n\n      .weather-top {\n        height: 140px;\n        padding-top: 10px;\n      }\n\n      .weather-middle {\n        height: 100px;\n        padding: 0 30px;\n      }\n\n      .weather-foot {\n        display: flex;\n        justify-content: space-between;\n        height: 100px;\n      }\n    }\n  }\n\n  .img-carousel {\n    width: 100%;\n    padding: 12px;\n\n    .bg-img {\n      width: 100%;\n      height: 552px;\n    }\n  }\n\n  /* For demo */\n\n  :deep(.slick-arrow.custom-slick-arrow) {\n    z-index: 1;\n    width: 50px;\n    height: 50px;\n    transition: ease all 0.3s;\n    border-radius: 50px;\n    opacity: 0.3;\n    background-color: rgb(31 45 61 / 15%);\n    color: #30303090;\n    font-size: 50px;\n  }\n\n  :deep(.slick-arrow.custom-slick-arrow::before) {\n    display: none;\n  }\n\n  :deep(.slick-arrow.custom-slick-arrow:hover) {\n    opacity: 0.7;\n    background-color: rgb(31 45 61 / 35%);\n    color: #30303090;\n    cursor: pointer;\n  }\n\n  :deep(.slick-slide h3) {\n    color: #fff;\n  }\n\n  :deep(.slick-arrow.custom-slick-arrow.left-slick-arrow) {\n    left: 50px;\n  }\n\n  :deep(.slick-arrow.custom-slick-arrow.right-slick-arrow) {\n    right: 50px;\n  }\n</style>\n"],"names":["urls","ref","carouselRef","currentIndex","stationBaseInfo","queryStationImg","bizFileId","__async","fileData","FileApi.getFiles","urlTemp","element","el","FileApi.attachmentDownloadUrl","loadBaseInfo","toLeft","toRight","goToPicture","index","props","res","getStationById","conDate","diff","getWeatherIconName","iconDay","weatherIcons","onMounted","__expose"],"mappings":"6jDA+LQA,EAAOC,EAAI,CAAA,CAAE,EACbC,EAAcD,IACdE,EAAeF,EAAI,CAAC,EACpBG,EAAkBH,EAAI,CAC1B,gBAAiB,GACjB,eAAgB,GAChB,wBAAyB,GACzB,eAAgB,GAChB,YAAa,GACb,SAAU,EAAA,CACX,EAEKI,EAAyBC,GAAcC,EAAA,sBAC3C,GAAID,GAAa,GACf,OAGF,IAAIE,EAAW,MAAMC,EAAiB,CAAE,MAAOH,CAAW,CAAA,EACtDI,EAAU,CAAA,EACVF,EAAS,OAAS,IACXA,EAAA,QAASG,GAAY,CAC5B,MAAMC,EAAKC,EAA8BF,EAAQ,GAAG,EACpDD,EAAQ,KAAKE,CAAE,CAAA,CAChB,EACDZ,EAAK,MAAQU,GAEFI,GAAA,GAGTC,EAAS,IAAM,CACfZ,EAAa,MAAQ,IACvBA,EAAa,OAAS,EACtBD,EAAY,MAAM,OACpB,EAGIc,EAAU,IAAM,CAChBb,EAAa,MAAQH,EAAK,MAAM,OAAS,IAC3CG,EAAa,OAAS,EACtBD,EAAY,MAAM,OACpB,EAGIe,EAAeC,GAAU,CACjBhB,EAAA,MAAM,KAAKgB,CAAK,EAC5Bf,EAAa,MAAQe,CAAA,EAGjBJ,EAAe,IAAYP,EAAA,sBAC3B,GAAAY,EAAM,WAAa,GACrB,OAEF,IAAIC,EAAM,MAAMC,EAAe,CAAE,GAAIF,EAAM,UAAW,EACtD,GAAIC,EAAK,CACPhB,EAAgB,MAAQgB,EACxB,MAAME,EAAU,IAAI,KAAKF,EAAI,uBAAuB,EAE9CG,EAAO,KAAK,QADF,OACU,UAAYD,EAAQ,SAAS,EAEvClB,EAAA,MAAM,YAAc,KAAK,MAAMmB,GAAQ,IAAO,GAAK,GAAK,GAAG,CAC7E,CAAA,GAGIC,EAAsBC,GACnBA,GAAWC,EAAaD,CAAO,EAAIC,EAAaD,CAAO,EAAI,aAGpE,OAAAE,EAAU,IAAM,CAAA,CAEf,EAEYC,EAAA,CAAE,gBAAAvB,EAAiB"}