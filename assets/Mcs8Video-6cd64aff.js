var n=(i,d,a)=>new Promise((c,t)=>{var e=s=>{try{l(a.next(s))}catch(r){t(r)}},u=s=>{try{l(a.throw(s))}catch(r){t(r)}},l=s=>s.done?c(s.value):Promise.resolve(s.value).then(e,u);l((a=a.apply(i,d)).next())});import{au as m,_ as C}from"./index.js";import{d as y,k as v,o as b,b as g,al as k,Z as w,_ as V,f as M,n as h,u as x,$ as I}from"./vue-71d1abb3.js";import{bc as B}from"./antd-15ac76ed.js";const O={class:"mcs8-video"},z=y({__name:"Mcs8Video",props:{devId:{type:String,default:"",required:!0}},emits:["close"],setup(i,{emit:d}){const a=i,c=m(),t=v(),e=v(),u=()=>n(this,null,function*(){e.value||(yield s())}),l=()=>n(this,null,function*(){yield e.value.openVideo(a.devId,t.value)}),s=()=>n(this,null,function*(){e.value=new mcs8Client,e.value.on("OnManage",o=>{switch(console.log("OnManage",o),o.method){case"responseConnect":o.errCode==200&&console.log("登录成功"),(o.errCode==401||o.errCode==502)&&c.error("连接断开"),o.errCode==500&&c.error("连接服务器失败");break;case"ConnecteInfo":break;case"responseConnectMedia":o.errCode==200&&(console.log("媒体登录成功"),setTimeout(()=>n(this,null,function*(){yield l()}),500)),o.errCode==401,o.errCode==500,o.errCode==502;break;case"joinRoom":break;case"newPeer":break;case"peerClosed":break;case"responseConnectGateway":o.errCode===502&&(c.error("连接失败，请核查输入信息"),e.value!=null&&(e.value.close(),e.value=null));break}});const f={host:"yyzx.zfy.ygwl.net",port:"7709",uid:"pc1",pwd:"000000",ssl:!0},_=yield e.value.connect(f);console.log("result",_)}),r=()=>{d("close"),e.value&&p()},p=()=>n(this,null,function*(){yield e.value.closeVideo(a.devId),yield e.value.close()});return b(()=>{u()}),g(()=>{e.value&&p()}),(f,_)=>{const o=k("a-button");return w(),V("div",O,[M(o,{class:"close-btn",icon:h(x(B)),ghost:"",onClick:r},null,8,["icon"]),I("video",{class:"video-layout",ref_key:"mcs8Video",ref:t,autoplay:"",playsinline:"",controls:""},null,512)])}}});const j=C(z,[["__scopeId","data-v-7210bc2e"]]);export{j as default};
//# sourceMappingURL=Mcs8Video-6cd64aff.js.map
