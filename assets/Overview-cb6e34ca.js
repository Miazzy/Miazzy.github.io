var f=(v,m,l)=>new Promise((i,p)=>{var a=o=>{try{d(l.next(o))}catch(u){p(u)}},s=o=>{try{d(l.throw(o))}catch(u){p(u)}},d=o=>o.done?i(o.value):Promise.resolve(o.value).then(a,s);d((l=l.apply(v,m)).next())});import"./WeatherDisplay-e68d53d5.js";import{C as D,a as O}from"./CockpitSetting-7afdfaa9.js";import P from"./LeftContent-f3baf239.js";import z from"./TopInfoContent-bc12fd82.js";import E from"./BottomInfoContent-f9159b51.js";import H from"./RightContent-b2098f1f.js";import{s as U}from"./station-5523435f.js";import{a5 as A,a6 as N,_ as V}from"./index.js";import{d as Z,ax as j,k as c,g as q,w as F,o as W,b as $,Z as _,_ as J,$ as K,a9 as B,ac as M,f as h,a5 as Q,aF as X}from"./vue-71d1abb3.js";import"./antd-15ac76ed.js";import"./weatherIcon-14d6bf6f.js";import"./index-8c718dee.js";import"./index.esm-c216ed00.js";import"./SubtitleBar-001f5f49.js";import"./IndicatorGroup-e2cd29a8.js";import"./EchartPillarChart-9aa5a33e.js";import"./index-d8a2358f.js";import"./install-58e0bd81.js";import"./NoData-1ab5cc7b.js";import"./WaterLevelChart-2133d837.js";import"./echarts-5cbe119e.js";import"./api-32c7505d.js";import"./helper-474c7a04.js";import"./EchartPieChart.vue_vue_type_script_setup_true_lang-58fa16af.js";import"./utils-5bbca5df.js";import"./index-116b659b.js";import"./DataBoardItem-6bead2db.js";import"./sky_bg-5706a728.js";import"./EchartLineBarChart.vue_vue_type_style_index_0_lang-90edad95.js";import"./transform-d70cf238.js";const Y=v=>A.post({url:"/da/group-operation/overview/station/info",params:v},{}),ee={class:"layout rem-layout"},te=X('<div id="map-container" class="map-container" data-v-0fc2e884></div><div class="mask-left" data-v-0fc2e884></div><div class="mask-top" data-v-0fc2e884></div><div class="mask-right" data-v-0fc2e884></div><div class="mask-bottom" data-v-0fc2e884></div>',5),ae=Z({__name:"Overview",setup(v){const m=j(),l=c("总览驾驶舱"),i=c({});c(!0);const p=c(),a=c(null),s=c(""),d=q(),o=c(),u=c(),w=([e,t])=>{i.value={startMonth:e,endMonth:t}},k=()=>{try{a.value=new BMapGL.Map("map-container"),a.value.enableScrollWheelZoom(!0),a.value.setMapType(BMAP_EARTH_MAP),a.value.centerAndZoom(new BMapGL.Point(118.8,37.5),8)}catch(e){console.error("init map error:",e)}},y=()=>{var e;try{const t=document.getElementById("map-container");a.value&&((e=a.value)==null||e.destroy(),a.value=null),t&&(t.innerHTML="")}catch(t){console.error("destory map error:",t)}},I=()=>f(this,null,function*(){p.value=yield Y({})}),g=()=>f(this,null,function*(){var e;try{S(),(e=p.value.result)!=null&&e.length&&p.value.result.forEach(r=>{let n=new BMapGL.Point(r.longitude,r.latitude);C(n,r)})}catch(t){}}),C=(e,t)=>{let r=new BMapGL.Icon(U,new BMapGL.Size(30,30),{anchor:new BMapGL.Size(15,30)}),n=new BMapGL.Marker(e,{icon:r});a.value.addOverlay(n);let x=b(e,t.name);a.value.addOverlay(x)},b=(e,t)=>{let r={position:e,offset:new BMapGL.Size(10,-40)},n=new BMapGL.Label(t,r);return n.setStyle({width:"auto !important",color:"white",fontSize:"12px",backgroundColor:"rgba(0,0,0)",border:0,padding:"6px",borderRadius:"3px"}),n},S=()=>{a.value.clearOverlays()},L=()=>{try{return window.self!==window.top}catch(e){return!0}},T=()=>{var t;const e=(t=m.currentRoute.value)==null?void 0:t.path;return e==="/frame/cockpit/overview"||e==="/cockpitoverview"},R=()=>!document.querySelector("#map-container").innerHTML,G=()=>{var t,r,n;const e=(t=m.currentRoute.value)==null?void 0:t.path;e==="/frame/cockpit/overview"?N(d,y):e==="/cockpitoverview"&&((r=o.value)==null||r.handleUpdate(),(n=u.value)==null||n.handleUpdate())};return F(()=>m.currentRoute.value,()=>{T()&&setTimeout(()=>{R()&&(y(),k(),g())},500)}),W(()=>f(this,null,function*(){s.value=L()?"off":"on",yield I(),k(),g(),window.addEventListener("resize",G)})),$(()=>{y()}),(e,t)=>(_(),J("div",ee,[K("div",{class:Q(["dashboard",{"header-off":s.value==="off"}])},[te,s.value==="on"?(_(),B(D,{key:0,class:"header-layout",title:l.value,onDateChange:w},null,8,["title"])):M("",!0),s.value==="off"?(_(),B(O,{key:1,onDateChange:w})):M("",!0),h(P,{ref_key:"leftContentRef",ref:o,searchInfoByTime:i.value,tabStatus:s.value},null,8,["searchInfoByTime","tabStatus"]),h(z,{searchInfoByTime:i.value},null,8,["searchInfoByTime"]),h(E,{searchInfoByTime:i.value},null,8,["searchInfoByTime"]),h(H,{ref_key:"rightContentRef",ref:u,searchInfoByTime:i.value,tabStatus:s.value},null,8,["searchInfoByTime","tabStatus"])],2)]))}});const Oe=V(ae,[["__scopeId","data-v-0fc2e884"]]);export{Oe as default};
//# sourceMappingURL=Overview-cb6e34ca.js.map
