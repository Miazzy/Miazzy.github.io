{"version":3,"file":"index-28026d2b.js","sources":["../../src/views/system/rbac/permission/index.vue"],"sourcesContent":["<template>\n  <PageWrapper dense contentFullHeight fixedHeight contentClass=\"flex\" style=\"position: relative\">\n    <CommonTree\n      title=\"权限树\"\n      @select=\"handleSelect\"\n      :value=\"treeData\"\n      class=\"left-tree-layout\"\n      :canEdit=\"false\"\n      :canAdd=\"false\"\n      :canDelete=\"false\"\n      :isShowOperationBtns=\"false\"\n      :fieldNames=\"{ key: 'id', title: 'name' }\"\n    />\n    <!-- 数据表格 -->\n    <div class=\"right-table-layout\">\n      <BasicTable\n        @register=\"registerTable\"\n        class=\"fix-basic-table\"\n        :searchInfo=\"searchInfo\"\n        @selection-change=\"handleSelectChange\"\n        :scroll=\"{ y: tableHeight }\"\n        @resize-column=\"(w, col) => (col.width = w)\"\n      >\n        <template #toolbar>\n          <a-button type=\"primary\" :preIcon=\"IconEnum.ADD\" @click=\"handleAdd\">添加</a-button>\n          <a-button\n            type=\"primary\"\n            :preIcon=\"IconEnum.EDIT\"\n            :disabled=\"selectedRowId == ''\"\n            @click=\"handleEdit\"\n            >修改</a-button\n          >\n          <a-button\n            class=\"red-btn\"\n            :preIcon=\"IconEnum.DELETE\"\n            :disabled=\"selectedRowId == ''\"\n            @click=\"handleDel\"\n            >删除</a-button\n          >\n          <a-button\n            class=\"green-btn\"\n            :preIcon=\"IconEnum.ENABLE\"\n            :disabled=\"selectedRowId == ''\"\n            @click=\"handleOn(1)\"\n            >启用</a-button\n          >\n          <a-button\n            class=\"grey-btn\"\n            :preIcon=\"IconEnum.DISABLE\"\n            :disabled=\"selectedRowId == ''\"\n            @click=\"handleOff(0)\"\n            >禁用</a-button\n          >\n          <a-button type=\"primary\" :preIcon=\"IconEnum.ADD\" @click=\"handleSaveSort\"\n            >保存排序号</a-button\n          >\n        </template>\n        <template #bodyCell=\"{ text, column, record }\">\n          <template v-if=\"column.key === 'sort'\">\n            <a-input-number\n              v-model:value=\"record[column.dataIndex]\"\n              :min=\"1\"\n              defaultValue=\"1\"\n              style=\"margin: -5px 0\"\n            />\n          </template>\n          <template v-if=\"column.key === 'statusText'\">\n            <span style=\"color: red\" v-if=\"text == '无效'\">无效</span>\n            <span style=\"color: #30ca5a\" v-if=\"text == '有效'\">有效</span>\n          </template>\n          <template v-if=\"column.key === 'operation'\">\n            <TableAction :actions=\"getAction(record)\" />\n          </template>\n        </template>\n      </BasicTable>\n    </div>\n    <div v-show=\"loadingFlag\" class=\"dialog-loading\">\n      <a-spin />\n    </div>\n\n    <!-- 添加弹窗 -->\n    <Dialog\n      v-model:visible=\"dialogVisible\"\n      smode=\"normal\"\n      :title=\"dialogTitle\"\n      :width=\"800\"\n      :height=\"650\"\n      @confirm=\"save\"\n      @cancel=\"cancelDia\"\n      overflowY=\"auto\"\n    >\n      <a-form ref=\"permissionFormRef\" :model=\"formState\" name=\"permissionForm\">\n        <a-row :gutter=\"24\">\n          <a-col v-show=\"true\" :span=\"24\">\n            <a-form-item label=\"节点类型\" name=\"nodeKind\" :labelCol=\"{ span: 4 }\">\n              <DictSelectBox\n                :disabled=\"isEdit\"\n                v-model:value=\"formState.nodeKind\"\n                :type=\"`permission_node_kind`\"\n              />\n            </a-form-item>\n          </a-col>\n        </a-row>\n        <a-row :gutter=\"24\">\n          <a-col v-show=\"true\" :span=\"24\">\n            <a-form-item label=\"资源\" name=\"resourceId\" :labelCol=\"{ span: 4 }\">\n              <a-input disabled v-model:value=\"formState.resourceId\" />\n            </a-form-item>\n          </a-col>\n        </a-row>\n        <a-row :gutter=\"24\">\n          <a-col v-show=\"true\" :span=\"24\">\n            <a-form-item label=\"操作\" name=\"operationId\" :labelCol=\"{ span: 4 }\">\n              <a-select\n                v-model:value=\"formState.operationId\"\n                style=\"width: 100%\"\n                placeholder=\"请选择操作类型\"\n                :options=\"sourceKindList\"\n                :disabled=\"kindDisableFlag\"\n                @change=\"handleChange\"\n              />\n            </a-form-item>\n          </a-col>\n        </a-row>\n        <a-row :gutter=\"24\">\n          <a-col v-show=\"true\" :span=\"24\">\n            <a-form-item\n              label=\"编码\"\n              name=\"code\"\n              :labelCol=\"{ span: 4 }\"\n              :rules=\"[{ required: true, message: '请输入编码' }]\"\n            >\n              <a-input v-model:value=\"formState.code\" maxlength=\"64\" />\n            </a-form-item>\n          </a-col>\n        </a-row>\n        <a-row :gutter=\"24\">\n          <a-col v-show=\"true\" :span=\"24\">\n            <a-form-item\n              label=\"名称\"\n              name=\"name\"\n              :labelCol=\"{ span: 4 }\"\n              :rules=\"[{ required: true, message: '请输入名称' }]\"\n            >\n              <a-input v-model:value=\"formState.name\" maxlength=\"128\" />\n            </a-form-item>\n          </a-col>\n        </a-row>\n\n        <a-row :gutter=\"24\">\n          <a-col v-show=\"true\" :span=\"24\">\n            <a-form-item label=\"排序号\" name=\"sort\" :labelCol=\"{ span: 4 }\">\n              <a-input-number :min=\"1\" v-model:value=\"formState.sort\" />\n            </a-form-item>\n          </a-col>\n        </a-row>\n        <a-row :gutter=\"24\">\n          <a-col v-show=\"true\" :span=\"24\">\n            <a-form-item label=\"备注\" name=\"remark\" :labelCol=\"{ span: 4 }\">\n              <a-textarea :rows=\"5\" v-model:value=\"formState.remark\" :maxlength=\"128\" show-count />\n            </a-form-item>\n          </a-col>\n        </a-row>\n      </a-form>\n    </Dialog>\n    <!-- 授权情况弹窗 -->\n    <Dialog v-model:visible=\"detailVisible\" smode=\"simple\" :title=\"detailTitle\" :width=\"1200\">\n      <div class=\"tab-button-div\">\n        <a-form :model=\"dialogSearch\" name=\"horizontal_login\" layout=\"inline\" autocomplete=\"off\">\n          <a-form-item label=\"角色名称\" name=\"roleName\">\n            <a-input v-model:value=\"dialogSearch.roleName\" />\n          </a-form-item>\n          <a-form-item label=\"组织名称\" name=\"orgName\">\n            <a-input v-model:value=\"dialogSearch.orgName\" />\n          </a-form-item>\n          <a-form-item label=\"人员名称\" name=\"personName\">\n            <a-input v-model:value=\"dialogSearch.personName\" />\n          </a-form-item>\n          <!-- <a-form-item label=\"只显示一人\">\n            <a-checkbox-group v-model:value=\"dialogSearch.showOne\">\n              <a-checkbox value=\"1\" name=\"showOne\" />\n            </a-checkbox-group>\n          </a-form-item> -->\n          <a-form-item style=\"position: absolute; right: -25px\">\n            <a-button class=\"tab-button\" @click=\"resetForm\">重置</a-button>\n            <a-button type=\"primary\" style=\"margin-right: 10px\" @click=\"searchList\"\n              >查询</a-button\n            ></a-form-item\n          >\n          <!-- <div style=\"float: right; border: 1px solid red\">\n            <a-button class=\"tab-button\" style=\"margin: 0 10px 0 8px\" @click=\"resetForm\"\n              >重置</a-button\n            >\n            <a-button type=\"primary\" style=\"margin-right: 10px\" @click=\"searchList\"\n              >查询</a-button\n            ></div\n          > -->\n        </a-form>\n      </div>\n      <div class=\"tab-table-div\">\n        <a-tabs v-model:activeKey=\"activeKey\" @change=\"changeTab(activeKey)\">\n          <a-tab-pane key=\"role\" tab=\"角色列表\">\n            <div class=\"dialog-table-wrapper\">\n              <a-table\n                :columns=\"roleColumns\"\n                :data-source=\"roleDataList\"\n                size=\"small\"\n                bordered\n                :scroll=\"{ y: roleDataList.length == 0 ? 'calc(365px)' : 'calc(270px)' }\"\n              />\n            </div>\n          </a-tab-pane>\n          <a-tab-pane key=\"roleOrg\" tab=\"角色授权\">\n            <div class=\"dialog-table-wrapper\">\n              <a-table\n                :columns=\"orgColumns\"\n                :data-source=\"orgDataList\"\n                size=\"small\"\n                bordered\n                :scroll=\"{ y: orgDataList.length == 0 ? 'calc(365px)' : 'calc(270px)' }\"\n              />\n            </div>\n          </a-tab-pane>\n          <a-tab-pane key=\"person\" tab=\"组织人员\">\n            <div class=\"dialog-table-wrapper\">\n              <a-table\n                :columns=\"personColumns\"\n                :data-source=\"personDataList\"\n                size=\"small\"\n                bordered\n                :scroll=\"{ y: personDataList.length == 0 ? 'calc(365px)' : 'calc(270px)' }\"\n              />\n            </div>\n          </a-tab-pane>\n        </a-tabs>\n      </div>\n    </Dialog>\n    <div v-if=\"loadingFlag\" class=\"dialog-mask\"> </div>\n  </PageWrapper>\n</template>\n<script lang=\"ts\" setup>\n  import { onMounted, reactive, ref } from 'vue';\n\n  import { IconEnum } from '@/enums/appEnum';\n  import { BasicTable, useTable, TableAction } from '/@/components/Table';\n  import { TreeItem } from '/@/components/Tree';\n  import { PageWrapper } from '/@/components/Page';\n  // import deviceDetail from './deviceDetail.vue';\n  import DictSelectBox from '@/components/Framework/Combox/DictSelectBox.vue';\n  import CommonTree from '@/components/Framework/Tree/CommonTree.vue';\n  import { useMessage } from '@/hooks/web/useMessage';\n  import { message, FormInstance } from 'ant-design-vue';\n  import { jsonToSheetXlsx } from '/@/components/Excel';\n  import Dialog from '@/components/Framework/Modal/Dialog.vue';\n  import {\n    getPageData,\n    insertData,\n    deleteData,\n    getTreeData,\n    getColumns,\n    searchFormSchema,\n    saveSort,\n    updateStatus,\n    getSort,\n    getOrgColumns,\n    getRoleColumns,\n    getPersonColumns,\n    searchFormSchemaDialog,\n    getSourceKindList,\n    getRoleList,\n    getRoleOrgList,\n    getPersonList,\n  } from './index';\n\n  const { createConfirm } = useMessage();\n\n  const currentButtons = ref([]); //动态按钮\n\n  const tableHeight = ref('calc(100vh - 223px)');\n  const selectedNode = ref({}); // 选中的树节点\n  const dialogVisible = ref<boolean>(false); // 机构、部门、岗位详情弹框\n  const detailVisible = ref<boolean>(false); // 授权详情弹框\n  const formState = ref({}); // 添加信息；\n  const dialogTitle = ref('');\n  const detailTitle = ref('');\n  const permissionFormRef = ref<FormInstance>();\n  let selectedRowId = ref(''); // 选中数据的标志\n  let selectedRow = reactive({}); // 选中的数据\n  const loadingFlag = ref<boolean>(false);\n  const searchInfo = reactive<Recordable>({}); // 查询信息\n  const treeData = ref<TreeItem[]>([]);\n  const isEdit = ref(false);\n  const selectTitle = ref('');\n  let dataColumn = getColumns();\n  const kindDisableFlag = ref<boolean>(false);\n  const activeKey = ref('role');\n  const dialogSearch = reactive<Recordable>({}); // 弹窗查询信息\n  let roleColumns = getRoleColumns();\n  let roleDataList = ref([]);\n  let orgColumns = getOrgColumns();\n  let orgDataList = ref([]);\n  let personColumns = getPersonColumns();\n  let personDataList = ref([]);\n  let dataList = ref([]);\n  let sourceKindList = ref([]);\n  let operationList = ref([]);\n  //分页查询列表数据\n  const getPageByParam = async () => {\n    clearSelectedRowKeys();\n    // 从新加载树结构\n    queryOrgTreeList();\n    // 获取查询信息\n    let searchForm = getForm().getFieldsValue();\n    searchInfo.parentId = selectedNode.value.id;\n    searchInfo.parentFullId = selectedNode.value.fullId;\n    searchInfo.code = searchForm.code;\n    searchInfo.name = searchForm.name;\n    const paginationRef = getPaginationRef() as any;\n    searchInfo.pageNo = paginationRef.current;\n    searchInfo.pageSize = paginationRef.pageSize;\n\n    let data = await getPageData(searchInfo);\n    dataList.value = data.result;\n    return dataList;\n  };\n  const [\n    registerTable,\n    { reload, getForm, getDataSource, getPaginationRef, clearSelectedRowKeys },\n  ] = useTable({\n    title: '权限列表',\n    api: getPageByParam,\n    columns: dataColumn,\n    showTableSetting: true,\n    pagination: {\n      pageSize: 20,\n    },\n    bordered: true,\n    rowKey: 'id',\n    rowSelection: {\n      type: 'radio',\n      fixed: true,\n      onSelect: onSelect,\n    },\n    formConfig: {\n      labelWidth: 120,\n      actionColOptions: { span: 24 },\n      autoAdvancedLine: 1,\n      baseColProps: { span: 7 },\n      schemas: searchFormSchema,\n      noHideBtnFlag: true,\n      autoSubmitOnEnter: true,\n    },\n    useSearchForm: true,\n    handleSearchInfoFn(info) {\n      return info;\n    },\n    sortFn: (sortInfo: SorterResult) => {\n      if (sortInfo.order) {\n        searchInfo.sortField = sortInfo.field;\n        searchInfo.sortOrder = sortInfo.order.replace('end', '');\n      } else {\n        searchInfo.sortField = '';\n        searchInfo.sortOrder = '';\n      }\n    },\n  });\n\n  function handleSelectChange({ keys, rows }) {\n    if (rows && rows.length > 0) {\n      const record = rows[0];\n      selectedRowId.value = record.id;\n      selectedRow = record;\n    } else {\n      selectedRowId.value = '';\n      selectedRow = null;\n    }\n  }\n\n  function onSelect(record, selected) {\n    if (selected) {\n      selectedRowId.value = record.id;\n      selectedRow = record;\n    } else {\n      selectedRowId.value = '';\n      selectedRow = null;\n    }\n  }\n\n  function cancelDia() {\n    dialogVisible.value = false;\n  }\n\n  async function handleAdd() {\n    isEdit.value = false;\n    if (selectedNode.value.id == null) {\n      message.error('请先选择父节点');\n      return;\n    }\n    if (selectedNode.value.nodeKind != 'fun') {\n      kindDisableFlag.value = true;\n    } else {\n      kindDisableFlag.value = false;\n      // 获取操作 列表\n      operationList.value = await getSourceKindList({ sourceKind: 'fun' });\n      let options = [];\n      operationList.value.forEach((element) => {\n        options.push({ label: element.name, value: element.id });\n      });\n      sourceKindList.value = options;\n    }\n\n    let parentId = selectedNode.value.id;\n    let sort = await getSort({ tableName: 'sys_permission', step: 1, parentId: parentId });\n    formState.value = {};\n    formState.value.sort = sort.result;\n    dialogTitle.value = '添加权限';\n    dialogVisible.value = true;\n  }\n\n  function handleChange(value: string) {\n    let selectedKind = {};\n    operationList.value.forEach((item) => {\n      if (item.id == value) {\n        selectedKind = item;\n        return;\n      }\n    });\n    formState.value.code = selectedNode.value.code + ':' + selectedKind.code;\n    formState.value.name = selectedNode.value.name + selectedKind.name;\n  }\n\n  // 查询左侧电站树数据\n  async function queryOrgTreeList() {\n    const deptList = (await getTreeData({ showAdminFun: true })) as unknown as TreeItem[];\n    treeData.value = deptList.result;\n  }\n\n  // 左侧树菜单选中事件\n  async function handleSelect(node = []) {\n    selectedNode.value = node;\n    // 根据选择的树节点信息重新加载表格数据\n    reload();\n  }\n\n  // 保存\n  function save() {\n    console.log(formState);\n    permissionFormRef.value.validateFields().then(() => {\n      // TODO 新增数据\n      loadingFlag.value = true;\n      let parent = {\n        id: selectedNode.value.id,\n        fullId: selectedNode.value.fullId,\n        fullName: selectedNode.value.fullName,\n        fullSort: selectedNode.value.fullSort,\n      };\n      formState.value.parent = parent;\n      insertData(formState.value)\n        .then(() => {\n          message.success('保存成功');\n          queryOrgTreeList();\n          reload();\n          //关闭弹窗\n          loadingFlag.value = false;\n          dialogVisible.value = false;\n        })\n        .catch(() => {\n          loadingFlag.value = false;\n        });\n    });\n  }\n\n  function handleEdit() {\n    Object.assign(formState.value, selectedRow);\n    dialogTitle.value = '修改功能';\n    dialogVisible.value = true;\n    isEdit.value = true;\n  }\n  // 删除\n  function handleDel() {\n    if (selectedRowId.value == '') {\n      return;\n    }\n    createConfirm({\n      title: '提示',\n      iconType: 'warning',\n      content: '确定要删除选中记录？',\n      async onOk() {\n        deleteData(selectedRowId.value).then(() => {\n          message.success('已删除。');\n          reload();\n        });\n      },\n    });\n  }\n  // 启用\n  function handleOn() {\n    let param = { id: selectedRowId.value, status: 1 };\n    updateStatus(param).then(() => {\n      message.success('已启用。');\n      reload();\n    });\n  }\n  // 禁用\n  function handleOff() {\n    createConfirm({\n      title: '禁用',\n      iconType: 'danger',\n      content: '确认禁用此数据？',\n      async onOk() {\n        let param = { id: selectedRowId.value, status: 0 };\n        updateStatus(param).then(() => {\n          message.success('已禁用。');\n          reload();\n        });\n      },\n    });\n  }\n  // 保存排序号\n  function handleSaveSort() {\n    let dataList = getDataSource().map((item) => {\n      return { id: item.id, sort: item.sort, parentId: item.parentId, fullId: item.fullId };\n    });\n    saveSort(dataList).then((data) => {\n      message.success('已保存');\n      reload();\n    });\n  }\n  // 生成权限\n  function createAuth() {}\n  // 导出\n  function exportList() {\n    let exportDataList = [];\n    orgList.forEach((element) => {\n      let exportData = {\n        areaName: element.areaName,\n        esn: element.esn,\n        name: element.name,\n        modelName: element.modelName,\n        pvTotal: element.pvTotal,\n        maxPvstringNums: element.maxPvstringNums,\n        actualPvstringNums: element.actualPvstringNums,\n        connectedPorts: element.connectedPorts,\n      };\n      exportDataList.push(exportData);\n    });\n    jsonToSheetXlsx({\n      data: exportDataList,\n      header: {\n        areaName: '区域名称',\n        esn: '设备编码',\n        name: '设备名称',\n        modelName: '设备型号',\n        pvTotal: 'PV容量(kW)',\n        maxPvstringNums: '最大接入组串数',\n        actualPvstringNums: '实际接入数',\n        connectedPorts: '接入端口',\n      },\n      filename: '设备信息.xlsx',\n    });\n  }\n  //-------------------------------------------------------------------授权弹窗------------------------------------------------------------\n  function getAction(record: EditRecordRow) {\n    return [\n      {\n        label: '授权情况',\n        icon: 'clarity:bullet-list-line',\n        onClick: (e) => {\n          handleView(record, e);\n        }, // ,\n      },\n    ];\n  }\n\n  // 擦看详细数据\n  function handleView(record: any, event: any) {\n    resetForm();\n    detailVisible.value = true;\n    detailTitle.value = record.name;\n    selectedRowId.value = record.id;\n    activeKey.value = 'role';\n    changeTab(activeKey.value);\n    event?.stopPropagation(); // 防止事件冒泡\n  }\n\n  // tab\n  async function changeTab(activeKey) {\n    searchInfo.infoType = activeKey;\n    initDialogData();\n  }\n\n  async function initDialogData() {\n    let param = {\n      roleName: dialogSearch.roleName,\n      orgName: dialogSearch.orgName,\n      personName: dialogSearch.personName,\n    };\n    param.permissionId = selectedRowId.value;\n    // if (dialogSearch.showOne?.length > 0) {\n    //   param.showType = 1;\n    // } else {\n    //   param.showType = 0;\n    // }\n    if (activeKey.value === 'role') {\n      let data = await getRoleList(param);\n      roleDataList.value = data.result;\n    } else if (activeKey.value === 'roleOrg') {\n      let data = await getRoleOrgList(param);\n      orgDataList.value = data.result;\n    } else if (activeKey.value === 'person') {\n      let data = await getPersonList(param);\n      personDataList.value = data.result;\n    }\n  }\n\n  // 分页相关\n  const pagination = ref({\n    defaultPageSize: 20,\n    showTotal: (total) => `共${total}条数据`,\n    showSizeChanger: true,\n    pageSizeOptions: ['20', '50', '100', '200'],\n    total: 0, //总条数\n  });\n\n  const handleTableYcChange: TableProps['onChange'] = (pag: {\n    pageSize: number;\n    current: number;\n  }) => {\n    searchInfo.pageSize = pag.pageSize;\n    searchInfo.pageNo = pag.current;\n    searchInfo.infoType = 2;\n  };\n\n  // Form重置函数\n  function resetForm() {\n    Object.keys(dialogSearch).forEach((key) => {\n      dialogSearch[key] = null;\n    });\n  }\n  // 查询\n  function searchList() {\n    initDialogData();\n  }\n\n  // 启动执行代码\n  onMounted(() => {\n    queryOrgTreeList();\n  });\n</script>\n<style lang=\"less\" scoped>\n  .dialog-loading {\n    position: absolute;\n    z-index: 1000 !important;\n    top: 45%;\n    left: 45%;\n  }\n\n  .dialog-mask {\n    position: absolute;\n    z-index: 1001 !important;\n    top: -1px;\n    width: 100%;\n    height: 100%;\n    opacity: 0.3;\n    background: #ccc;\n  }\n\n  .tab-button-div {\n    position: relative;\n    height: 60px;\n    padding: 14px 0 14px 14px;\n  }\n\n  .tab-button {\n    margin-right: 5px;\n  }\n\n  .dialog-table-wrapper {\n    :deep(.ant-table-body) {\n      height: 100vh;\n\n      .ant-table-tbody {\n        .ant-table-placeholder {\n          height: 100% !important;\n\n          .ant-table-cell {\n            .ant-empty {\n              display: flex;\n              align-items: center;\n              justify-content: center;\n              height: 260px;\n            }\n          }\n        }\n      }\n    }\n\n    :deep(.ant-table-pagination.ant-pagination) {\n      margin: 10px 0 0;\n    }\n  }\n\n  .left-tree-layout {\n    flex-shrink: 0;\n    width: 298px;\n    border-radius: 2px;\n  }\n\n  .right-table-layout {\n    width: calc(100% - 308px);\n  }\n\n  .fix-basic-table {\n    :deep(&.vben-basic-table .ant-table-wrapper) {\n      padding: 10px 16px 12px;\n    }\n\n    :deep(.table-settings) {\n      margin-right: 0;\n    }\n\n    :deep(.table-settings .anticon-setting) {\n      margin-right: 0;\n    }\n  }\n</style>\n"],"names":["createConfirm","useMessage","ref","tableHeight","selectedNode","dialogVisible","detailVisible","formState","dialogTitle","detailTitle","permissionFormRef","selectedRowId","selectedRow","reactive","loadingFlag","searchInfo","treeData","isEdit","dataColumn","getColumns","kindDisableFlag","activeKey","dialogSearch","roleColumns","getRoleColumns","roleDataList","orgColumns","getOrgColumns","orgDataList","personColumns","getPersonColumns","personDataList","dataList","sourceKindList","operationList","getPageByParam","__async","clearSelectedRowKeys","queryOrgTreeList","searchForm","getForm","paginationRef","getPaginationRef","data","getPageData","registerTable","reload","getDataSource","useTable","onSelect","searchFormSchema","info","sortInfo","handleSelectChange","keys","rows","record","selected","cancelDia","handleAdd","message","getSourceKindList","options","element","parentId","sort","getSort","handleChange","value","selectedKind","item","deptList","getTreeData","handleSelect","node","save","parent","insertData","handleEdit","handleDel","deleteData","handleOn","param","updateStatus","handleOff","handleSaveSort","saveSort","getAction","handleView","event","resetForm","changeTab","initDialogData","getRoleList","getRoleOrgList","getPersonList","total","key","searchList","onMounted"],"mappings":"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"}