var k=(C,i,u)=>new Promise((f,_)=>{var v=s=>{try{r(u.next(s))}catch(o){_(o)}},m=s=>{try{r(u.throw(s))}catch(o){_(o)}},r=s=>s.done?f(s.value):Promise.resolve(s.value).then(v,m);r((u=u.apply(C,i)).next())});import{b as L,D as O}from"./dict-c04c0dd8.js";import{b_ as W,au as h,ce as z}from"./index.js";import{a as P,c as Y,u as Z}from"./index-a66ceb78.js";import{a as $,e as j,b as G}from"./formCreate-e6d0da36.js";import{d as H,ax as J,aD as K,k as d,r as Q,o as X,al as n,Z as y,_ as x,f as a,aa as t,E as p,F as D,ae as ee,u as w,a9 as ae,ad as oe}from"./vue-71d1abb3.js";import"./antd-15ac76ed.js";const de=H({name:"BpmFormEditor",__name:"index",setup(C){const{t:i}=W(),u=h(),{push:f,currentRoute:_}=J(),{query:v}=K(),m=d(),r=d(!1),s=d(!1),o=d({name:"",status:z.ENABLE,remark:""}),E=Q({name:[{required:!0,message:"表单名不能为空",trigger:"blur"}],status:[{required:!0,message:"开启状态不能为空",trigger:"blur"}]}),g=d(),S=()=>{r.value=!0},R=()=>k(this,null,function*(){if(!(!g.value||!(yield g.value.validate()))){s.value=!0;try{const e=o.value;e.conf=j(m),e.fields=G(m),e.id?(yield Z(e),u.success(i("common.updateSuccess"))):(yield Y(e),u.success(i("common.createSuccess"))),r.value=!1,B()}finally{s.value=!1}}}),B=()=>{f("/bpm/manager/form")};return X(()=>k(this,null,function*(){const c=v.id;if(!c)return;const e=yield P(c);o.value=e,$(m,e.conf,e.fields)})),(c,e)=>{const I=n("Icon"),b=n("el-button"),T=n("FcDesigner"),U=n("ContentWrap"),F=n("el-input"),V=n("el-form-item"),M=n("el-radio"),N=n("el-radio-group"),q=n("el-form"),A=n("Dialog");return y(),x(D,null,[a(U,null,{default:t(()=>[a(T,{ref_key:"designer",ref:m,height:"780px"},{handle:t(()=>[a(b,{round:"",size:"small",type:"primary",onClick:S},{default:t(()=>[a(I,{class:"mr-5px",icon:"ep:plus"}),p(" 保存 ")]),_:1})]),_:1},512)]),_:1}),a(A,{modelValue:r.value,"onUpdate:modelValue":e[4]||(e[4]=l=>r.value=l),title:"保存表单",width:"600"},{footer:t(()=>[a(b,{disabled:s.value,type:"primary",onClick:R},{default:t(()=>[p("确 定")]),_:1},8,["disabled"]),a(b,{onClick:e[3]||(e[3]=l=>r.value=!1)},{default:t(()=>[p("取 消")]),_:1})]),default:t(()=>[a(q,{ref_key:"formRef",ref:g,model:o.value,rules:E,"label-width":"80px"},{default:t(()=>[a(V,{label:"表单名",prop:"name"},{default:t(()=>[a(F,{modelValue:o.value.name,"onUpdate:modelValue":e[0]||(e[0]=l=>o.value.name=l),placeholder:"请输入表单名"},null,8,["modelValue"])]),_:1}),a(V,{label:"状态",prop:"status"},{default:t(()=>[a(N,{modelValue:o.value.status,"onUpdate:modelValue":e[1]||(e[1]=l=>o.value.status=l)},{default:t(()=>[(y(!0),x(D,null,ee(w(L)(w(O).COMMON_STATUS),l=>(y(),ae(M,{key:l.value,label:l.value},{default:t(()=>[p(oe(l.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(V,{label:"备注",prop:"remark"},{default:t(()=>[a(F,{modelValue:o.value.remark,"onUpdate:modelValue":e[2]||(e[2]=l=>o.value.remark=l),placeholder:"请输入备注",type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])],64)}}});export{de as default};
//# sourceMappingURL=index-a9bfccf6.js.map
