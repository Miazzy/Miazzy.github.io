{"version":3,"file":"video-cf5927f6.js","sources":["../../src/views/monitor/video/video.ts","../../src/views/monitor/video/video.vue"],"sourcesContent":["import { defHttp } from '/@/utils/http/axios';\nimport { BasicColumn } from '/@/components/Table';\n\nenum Api {\n  getOrgStationTree = '/baseset/videoInfo/listVideoTree',\n  getVideoPageData = '/baseset/videoInfo/list',\n  getVideoData = '/baseset/videoInfo/get',\n  videoControl = '/baseset/videoInfo/videoControl',\n}\n\n// 列表表头\nexport const columns: BasicColumn[] = [];\n\n// 日期详细数据表头字段获取方法\nexport function getColumns(): BasicColumn[] {\n  return columns;\n}\n\nexport interface DeptListItem {\n  id: string;\n  materialCategoryId: string;\n  name: string;\n  code: string;\n  unit: number;\n  warrantyMonth: number;\n  status: number;\n}\n\n//电站树\nexport const getOrgStationTreeApi = (params) =>\n  defHttp.post(\n    {\n      url: Api.getOrgStationTree,\n      params,\n    },\n    {},\n  );\n\n// 列表数据\nexport const getVideoPageDataApi = (params) =>\n  defHttp.get(\n    {\n      url: Api.getVideoPageData,\n      params,\n    },\n    { isOnlyResult: true },\n  );\n//id 查询数据\nexport const getVideoDataApi = (params) =>\n  defHttp.get(\n    {\n      url: Api.getVideoData,\n      params,\n    },\n    {},\n  );\n\nexport const videoControl = (params) =>\n  defHttp.get(\n    {\n      url: Api.videoControl,\n      params,\n    },\n    {},\n  );\n","<template>\n  <PageWrapper dense contentFullHeight fixedHeight contentClass=\"flex\" style=\"position: relative\">\n    <!-- 组织树 -->\n    <CommonTree\n      title=\"电站组织\"\n      @select=\"handleSelect\"\n      :value=\"treeData\"\n      class=\"left-tree-layout\"\n      :toolbar=\"true\"\n      :canEdit=\"false\"\n      :canAdd=\"false\"\n      :canDelete=\"false\"\n      :isShowOperationBtns=\"false\"\n      :fieldNames=\"{ key: 'id', title: 'name' }\"\n    />\n\n    <!-- 数据表格 -->\n    <div class=\"right-table-layout\">\n      <div class=\"fix-basic-table\">\n        <div class=\"tab-button-div\">\n          <span style=\"padding-left: 10px\"> 视频 </span>\n          <a-radio-group\n            v-if=\"!fullVideoView\"\n            v-model:value=\"designInfo.design\"\n            button-style=\"solid\"\n            @change=\"designChange()\"\n            style=\"position: absolute; top: 15px; right: 10px; width: 120px\"\n          >\n            <a-radio-button value=\"2\"\n              ><Icon :icon=\"'ph:squares-four-light'\" size=\"15\"\n            /></a-radio-button>\n            <a-radio-button value=\"3\">\n              <Icon :icon=\"'icon-park-outline:grid-nine'\" size=\"15\"\n            /></a-radio-button>\n          </a-radio-group>\n        </div>\n        <div class=\"video-conference\">\n          <!-- Main Video Grid -->\n          <div\n            id=\"gridView\"\n            :class=\"{\n              'main-grid-9': designInfo.design == 3,\n              'main-grid-4': designInfo.design == 2,\n            }\"\n            style=\"height: 85vh\"\n          >\n            <div\n              v-for=\"(video, index) in mainGridVideos\"\n              :key=\"index\"\n              :id=\"'videoDiv' + index\"\n              class=\"video-box grid-item\"\n              :class=\"{ enlarged: video.enlarged }\"\n            >\n              <div\n                :id=\"mainGridVideos[index].id\"\n                style=\"width: 100%; height: 100%; background-color: black\"\n                @click=\"selectVideo(mainGridVideos[index], index)\"\n                @dblclick=\"dbClickVideo(mainGridVideos[index], index)\"\n              ></div>\n\n              <span class=\"video-name\">{{ mainGridVideos[index].cameraName }}</span>\n              <span class=\"station-name\"\n                >{{ mainGridVideos[index].stationName }} -\n                {{ mainGridVideos[index].cameraName }}</span\n              >\n              <Icon\n                class=\"full\"\n                :icon=\"'ion:expand'\"\n                size=\"20\"\n                @click=\"fullScreen(mainGridVideos[index])\"\n              />\n            </div>\n          </div>\n\n          <div id=\"fullView\" class=\"main-grid-1 hidden\">\n            <div class=\"video-box\">\n              <div id=\"fullVideo\" style=\"width: 100%; height: 92vh; background-color: black\"></div>\n\n              <span class=\"video-name\">{{ fullVideo.cameraName }}</span>\n              <span class=\"station-name-full\"\n                >{{ fullVideo.stationName }} - {{ fullVideo.cameraName }}</span\n              >\n              <Icon\n                class=\"full\"\n                :icon=\"'uil:compress-arrows'\"\n                size=\"20\"\n                @click=\"exitFullScreen()\"\n              />\n              <Icon class=\"background-image\" :icon=\"'tabler:direction-arrows'\" size=\"80\" />\n              <div style=\"position: absolute; right: 20px; bottom: 97px\">\n                <div style=\"display: flex; flex-direction: column; align-items: center\">\n                  <a-button class=\"arrowButton\" @click=\"control(fullVideo, 0)\">上</a-button>\n                </div>\n                <div style=\"height: 20px\">\n                  <a-button class=\"arrowButton\" @click=\"control(fullVideo, 2)\">左</a-button>\n                  <a-button class=\"arrowButton\" @click=\"control(fullVideo, 3)\">右</a-button>\n                </div>\n                <div style=\"display: flex; flex-direction: column; align-items: center\">\n                  <a-button class=\"arrowButton\" @click=\"control(fullVideo, 1)\">下</a-button>\n                </div>\n                <div\n                  class=\"icon-plus\"\n                  style=\"\n                    display: flex;\n                    flex-direction: column;\n                    align-items: center;\n                    margin-top: 20px;\n                  \"\n                >\n                  <Icon\n                    class=\"controlButton\"\n                    :icon=\"'material-symbols:add'\"\n                    size=\"30\"\n                    style=\"display: inline-block\"\n                    @click=\"control(fullVideo, 8)\"\n                /></div>\n                <div\n                  class=\"icon-sub\"\n                  style=\"flex-direction: column; margin-top: 10px; text-align: center\"\n                  ><Icon\n                    class=\"controlButton\"\n                    :icon=\"'ant-design:line-outlined'\"\n                    size=\"30\"\n                    style=\"display: inline-block\"\n                    @click=\"control(fullVideo, 9)\"\n                  />\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div v-if=\"loadingFlag\" class=\"dialog-mask\"> </div>\n  </PageWrapper>\n</template>\n<script lang=\"ts\" setup>\n  import { onMounted, onBeforeUnmount, reactive, ref, nextTick } from 'vue';\n  import { PageWrapper } from '/@/components/Page';\n  import { TreeItem } from '/@/components/Tree';\n  import CommonTree from '@/components/Framework/Tree/CommonTree.vue';\n  import Icon from '@/components/Icon/Icon.vue';\n  import { getOrgStationTreeApi, getVideoPageDataApi, videoControl } from './video';\n  import { assign } from 'lodash-es';\n  import { getPlayer, EzuiktProto, playVideo, destoryPlayer } from '/@/utils/flvtools';\n  import { sleep } from '@/utils/http/axios/axiosRetry';\n\n  let selectIndex = 0;\n  const treeData = ref<TreeItem[]>([]);\n  const searchInfo = reactive<any>({}); // 查询信息\n  const designInfo = reactive<any>({ design: '2' });\n  const videos = ref([]);\n  const mainGridVideos = ref();\n  const fullVideoView = ref(false);\n  const fullVideo = reactive<any>({});\n  const selectVideoPanel = reactive<any>({});\n  const fullFlvPlayer = ref(null);\n  const flvPlayerList = ref<any>([]);\n  const selectedRow = ref({});\n  const loadingFlag = ref<boolean>(false);\n  const flvPlayer = ref(null);\n\n  // 切换显示模式\n  const displayToggle = async () => {\n    if (designInfo.design == 3) {\n      for (let i = 4; i < 9; i++) {\n        const div = document.getElementById('videoDiv' + i);\n        div?.classList?.remove('hidden');\n        if (!flvPlayerList.value[i]) {\n          const item = mainGridVideos.value[i];\n          const argments = [item.id, item.url, item.accessToken, true, EzuiktProto.HTTP];\n          flvPlayer.value = getPlayer(...argments);\n          flvPlayerList.value[i] = flvPlayer.value;\n        } else {\n          playVideo(flvPlayerList.value[i]);\n          await sleep(10);\n          div?.click();\n        }\n      }\n    } else {\n      for (let i = 4; i < 9; i++) {\n        const div = document.getElementById('videoDiv' + i);\n        div?.classList?.add('hidden');\n        destoryPlayer(flvPlayerList.value[i]);\n      }\n    }\n  };\n\n  function fullScreen(item) {\n    assign(fullVideo, item);\n    var div = document.getElementById('fullView');\n    var div2 = document.getElementById('gridView');\n    div?.classList?.remove('hidden'); // 显示div\n    div2?.classList?.add('hidden'); // 显示div\n    fullVideoView.value = true;\n\n    setTimeout(function () {\n      document.querySelectorAll('.arrowButton').forEach(function (item) {\n        item.classList.remove('ant-btn');\n      });\n      // 执行全屏视频播放\n      fullFlvPlayer.value = getPlayer(\n        'fullVideo',\n        item.url,\n        item.accessToken,\n        true,\n        EzuiktProto.HTTP,\n      );\n    }, 300);\n  }\n\n  function selectVideo(item, index) {\n    assign(selectVideoPanel, item);\n    selectIndex = index;\n  }\n\n  function dbClickVideo(item, index) {\n    destoryPlayer(flvPlayerList.value[index]);\n    const player = getPlayer(item.id, item.url, item.accessToken, true, EzuiktProto.HTTP);\n    flvPlayerList.value[index] = player;\n  }\n\n  function exitFullScreen() {\n    var div = document.getElementById('fullView');\n    div?.classList?.add('hidden'); // 显示div\n    var div2 = document.getElementById('gridView');\n    div2?.classList?.remove('hidden'); // 显示div\n    destoryPlayer(fullFlvPlayer.value);\n    fullVideoView.value = false;\n  }\n\n  const control = (item, direction) => {\n    item.direction = direction;\n    videoControl(item);\n  };\n\n  // 九宫格切换函数\n  const designChange = () => {\n    displayToggle();\n  };\n\n  // 启动视频\n  const createVideo = async () => {\n    await sleep(100);\n    if (mainGridVideos.value && mainGridVideos.value.length > 0) {\n      flvPlayerList.value = [];\n      for (let i = 0; i < mainGridVideos.value.length; i++) {\n        const isNineSpill = designInfo.design === '3' && i >= 9; // 溢出不显示\n        const isFourSpill = designInfo.design === '2' && i >= 4; // 溢出不显示\n        if (!isNineSpill && !isFourSpill) {\n          const item = mainGridVideos.value[i];\n          const argments = [item.id, item.url, item.accessToken, true, EzuiktProto.HTTP];\n          flvPlayer.value = getPlayer(...argments);\n          flvPlayerList.value.push(flvPlayer.value);\n        } else {\n          flvPlayerList.value.push(null);\n        }\n      }\n    }\n  };\n\n  // 获取组织树\n  const getOrgStationTreeData = async (param = {}) => {\n    let resp = await getOrgStationTreeApi(param);\n    return resp.result.list;\n  };\n\n  // 左侧树状菜单选中事件\n  async function handleSelect(node = {}) {\n    searchInfo.stationId = null;\n    searchInfo.stationName = null;\n    searchInfo.stationOrganId = null;\n    searchInfo.stationOrganName = null;\n    searchInfo.nodeKindId = null;\n\n    searchInfo.searchId = null;\n    if (node != null) {\n      searchInfo.stationOrganId = node.organId;\n      searchInfo.stationOrganName = node.organName;\n\n      if (node.nodeKindId != 'videoUrl') {\n        if (node.nodeKindId == 'station') {\n          searchInfo.stationId = node.powerStationId;\n          searchInfo.stationName = node.name;\n        }\n\n        searchInfo.nodeKindId = node.nodeKindId;\n        searchInfo.searchId = node.id;\n      } else {\n        setTimeout(function () {\n          if (selectVideoPanel.id != null && selectVideoPanel.id != '') {\n            if (node.url != null && node.url != '') {\n              mainGridVideos.value[selectIndex].cameraName = node.name;\n              mainGridVideos.value[selectIndex].stationName = node.powerStationName;\n              mainGridVideos.value[selectIndex].url = node.url;\n              mainGridVideos.value[selectIndex].accessToken = node.accessToken;\n              mainGridVideos.value[selectIndex].deviceSerial = node.deviceSerial;\n              mainGridVideos.value[selectIndex].channelNo = node.channelNo;\n              mainGridVideos.value[selectIndex].id = node.id + new Date();\n\n              destoryPlayer(flvPlayerList.value[selectIndex]);\n\n              flvPlayerList.value[selectIndex] = getPlayer(\n                selectVideoPanel.id,\n                node.url,\n                node.accessToken,\n                true,\n                EzuiktProto.HTTP,\n              );\n\n              assign(selectVideoPanel, mainGridVideos.value[selectIndex]);\n            }\n          }\n        }, 100);\n      }\n    }\n\n    if (node == null || (node != null && node.nodeKindId != 'videoUrl')) {\n      videos.value = await getDataListParam();\n      mainGridVideos.value = videos.value.slice(0, 9);\n      await createVideo();\n    }\n\n    setTimeout(function () {\n      document.querySelectorAll('.grid-item').forEach((item) => {\n        gridItemClick(item);\n      });\n      if (designInfo.design === '2') {\n        for (let i = 4; i < 9; i++) {\n          const div = document.getElementById('videoDiv' + i);\n          div?.classList?.add('hidden');\n        }\n      }\n    }, 100);\n  }\n\n  // 获取搜索内容\n  const getDataListParam = async () => {\n    let dataObj = await getVideoPageDataApi(searchInfo);\n    selectedRow.value = {};\n    return dataObj;\n  };\n\n  // 播放器统一销毁函数\n  const destoryAllPlayer = () => {\n    try {\n      const list = [fullFlvPlayer.value, ...flvPlayerList.value];\n      for (let i = 0; i < list.length; i++) {\n        destoryPlayer(list[i]);\n      }\n    } catch (error) {\n      console.error('destory all player error: ', error);\n    }\n  };\n\n  // 视频元素点击处理函数\n  const gridItemClick = (item) => {\n    item.addEventListener('click', () => {\n      document\n        .querySelectorAll('.grid-item.selected')\n        .forEach((selectedItem) => selectedItem.classList.remove('selected')); // 移除其他项的选中状态\n      item.classList.add('selected'); // 添加当前点击项的选中状态\n    });\n  };\n\n  // 启动执行代码\n  onMounted(async () => {\n    treeData.value = await getOrgStationTreeData();\n    videos.value = await getDataListParam();\n    mainGridVideos.value = videos.value.slice(0, 9);\n    await createVideo();\n\n    document.querySelectorAll('.grid-item').forEach((item) => {\n      gridItemClick(item);\n    });\n\n    setTimeout(function () {\n      if (designInfo.design === '2') {\n        for (let i = 4; i < 9; i++) {\n          const div = document.getElementById('videoDiv' + i);\n          div?.classList?.add('hidden');\n        }\n      }\n    }, 100);\n  });\n\n  onBeforeUnmount(() => {\n    destoryAllPlayer();\n  });\n</script>\n<style lang=\"less\" scoped>\n  .tab-model {\n    margin-top: 10px;\n    margin-right: 10px;\n    margin-left: 10px;\n  }\n\n  .tab-button-div {\n    right: 10px;\n    margin-bottom: 2px;\n    padding-top: 10px;\n    padding-bottom: 10px;\n  }\n\n  // .video-conference {\n  //   display: grid;\n  //   grid-template-columns: 1fr;\n  //   grid-template-rows: 1fr;\n  //   height: 100%;\n  // }\n\n  .main-grid-9 {\n    display: grid;\n    grid-column: 1;\n    grid-gap: 5px;\n    grid-row: 1;\n    // grid-template-columns: repeat(3, 1fr);\n    grid-template-columns: 33.3% 33.3% 33.3%;\n    grid-template-rows: 30.5vh 30.5vh 30.5vh;\n    margin-right: 10px;\n  }\n\n  .main-grid-4 {\n    display: grid;\n    grid-column: 1;\n    grid-gap: 5px;\n    grid-row: 1;\n    // grid-template-columns: repeat(2, 1fr);\n    grid-template-columns: 50% 50%;\n    grid-template-rows: 46vh 46vh;\n    margin-right: 10px;\n  }\n\n  .main-grid-1 {\n    display: grid;\n    grid-column: 1;\n    grid-gap: 10px;\n    grid-row: 1;\n  }\n\n  .grid-item {\n    padding: 0; /* 内边距 */\n    // border: 1px solid #000; /* 边框 */\n    text-align: center; /* 文字居中 */\n    cursor: pointer; /* 鼠标指针变为点击状态 */\n  }\n\n  .grid-item.selected {\n    // background-color: #05fd43; /* 选中项的背景色 */\n    border: 2px solid #05fd43; /* 2px边框  */\n  }\n\n  .side-videos {\n    grid-column: 2;\n    grid-row: 1 / span 1; /* 这使得右侧视频区域延伸至第二行，和主视频网格对齐 */\n    max-height: 100%; /* 限制最大高度，确保内容超出时能滚动 */\n    overflow-y: auto; /* 当内容超出时显示滚动条 */\n  }\n\n  .video-box {\n    display: flex;\n    position: relative;\n    align-items: center;\n    justify-content: center;\n    height: 100%;\n  }\n\n  .video-name {\n    position: absolute;\n    top: 5px;\n    right: 5px;\n    padding: 5px;\n    border-radius: 5px;\n    color: #000;\n  }\n\n  .station-name {\n    position: absolute;\n    right: 2px;\n    bottom: 0;\n    left: 2px;\n    width: 99%;\n    height: 30px;\n    padding: 5px;\n    padding-left: 15px;\n    opacity: 0.5;\n    background-color: rgb(2 1 1);\n    color: #fff;\n    text-align: left;\n  }\n\n  .station-name-full {\n    position: absolute;\n    bottom: 0;\n    width: 100%;\n    height: 30px;\n    padding: 5px;\n    padding-left: 15px;\n    opacity: 0.5;\n    background-color: rgb(2 1 1);\n    color: #fff;\n    text-align: left;\n  }\n\n  .full {\n    position: absolute;\n    right: 1.5px;\n    bottom: 1.5px;\n    height: 30px;\n    padding: 5px;\n    border: none;\n    opacity: 0.5;\n    color: #fff;\n    text-align: center;\n\n    &:hover {\n      background: #fefefe;\n      color: #000;\n    }\n  }\n\n  .controlButton {\n    display: inline-block;\n    width: 40px;\n    height: 30px;\n    opacity: 0.5;\n    background-color: rgb(2 1 1);\n    color: #fff;\n    text-align: center;\n\n    &:hover {\n      background: #fefefe;\n      color: #000;\n    }\n  }\n\n  .background-image {\n    position: absolute;\n    right: 20px;\n    bottom: 180px;\n    border-radius: 50px;\n    opacity: 0.5;\n    background-color: rgb(2 1 1);\n    color: #fff;\n\n    &:hover {\n      background: #fefefe;\n      color: #000;\n    }\n  }\n\n  .video-box video {\n    width: 100%;\n    height: 100%;\n  }\n\n  .enlarged {\n    grid-column: 1 / span 3;\n    grid-row: 1;\n    margin-right: -10px;\n  }\n\n  .control-panel {\n    display: flex;\n    grid-column: 1 / span 2;\n    grid-row: 3;\n    justify-content: space-around;\n  }\n\n  .video-box video::-webkit-media-controls-panel {\n    display: none !important; /* 隐藏 Chrome 的默认控制面板 */\n  }\n\n  .hidden {\n    display: none;\n  }\n\n  .button-container {\n    display: flex;\n    flex-direction: column; /* 垂直排列按钮 */\n    align-items: center; /* 水平居中 */\n\n    /* 根据需要添加对齐和间距样式 */\n    justify-content: center; /* 垂直居中 */\n    height: 200px; /* 容器高度 */\n  }\n\n  .button-container button {\n    margin: 5px; /* 按钮间距 */\n  }\n\n  .arrowButton {\n    width: 40px;\n    height: 20px;\n    margin: 0;\n    padding: 0;\n    border: none;\n    outline: none;\n    background: transparent;\n    box-shadow: none;\n    color: transparent;\n\n    &:hover {\n      background: transparent;\n      color: transparent;\n    }\n  }\n\n  .left-tree-layout {\n    flex-shrink: 0;\n    width: 298px;\n    border-radius: 2px;\n  }\n\n  .right-table-layout {\n    width: calc(100% - 308px);\n    padding: 10px;\n  }\n\n  .fix-basic-table {\n    :deep(&.vben-basic-table .ant-table-wrapper) {\n      padding: 10px 16px 12px;\n    }\n\n    :deep(.table-settings) {\n      margin-right: 0;\n    }\n\n    :deep(.table-settings .anticon-setting) {\n      margin-right: 0;\n    }\n  }\n</style>\n"],"names":["getOrgStationTreeApi","params","defHttp","getVideoPageDataApi","videoControl","selectIndex","treeData","ref","searchInfo","reactive","designInfo","videos","mainGridVideos","fullVideoView","fullVideo","selectVideoPanel","fullFlvPlayer","flvPlayerList","selectedRow","loadingFlag","flvPlayer","displayToggle","__async","i","div","_a","playVideo","sleep","item","argments","EzuiktProto","getPlayer","_b","destoryPlayer","fullScreen","assign","div2","selectVideo","index","dbClickVideo","player","exitFullScreen","control","direction","designChange","createVideo","isNineSpill","isFourSpill","getOrgStationTreeData","_0","param","handleSelect","node","getDataListParam","gridItemClick","dataObj","destoryAllPlayer","list","error","selectedItem","onMounted","onBeforeUnmount"],"mappings":"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"}