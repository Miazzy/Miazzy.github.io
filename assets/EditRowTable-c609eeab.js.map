{"version":3,"file":"EditRowTable-c609eeab.js","sources":["../../src/views/dev/EditRowTable.vue"],"sourcesContent":["<template>\n  <div class=\"p-4\">\n    <BasicTable @register=\"registerTable\" @edit-change=\"onEditChange\">\n      <template #bodyCell=\"{ column, record }\">\n        <template v-if=\"column.key === 'action'\">\n          <TableAction :actions=\"createActions(record)\" />\n        </template>\n      </template>\n    </BasicTable>\n  </div>\n</template>\n<script lang=\"ts\">\n  import { defineComponent, ref } from 'vue';\n  import {\n    BasicTable,\n    useTable,\n    TableAction,\n    BasicColumn,\n    ActionItem,\n    EditRecordRow,\n  } from '/@/components/Table';\n  import { DICT_TYPE } from '@/utils/dict';\n  import { cloneDeep } from 'lodash-es';\n  import type { TreeSelectProps } from 'ant-design-vue';\n  import { useMessage } from '/@/hooks/web/useMessage';\n  import { setCustomCompOptions } from '@/utils/cache';\n\n  const treeData = ref([]);\n  const currentEditNodeRef = ref();\n  const searchBoxColumns = [\n    { title: '类型', dataIndex: 'typeName', key: 'typeName', fixed: 'left', minWidth: 100 },\n    { title: '年份', dataIndex: 'year', key: 'year', fixed: 'left', minWidth: 100 },\n    { title: '月份', dataIndex: 'month', key: 'month', fixed: 'left', minWidth: 100 },\n    { title: '期间', dataIndex: 'date', key: 'date', minWidth: 150 },\n  ];\n  const searchBoxData = [\n    { typeName: '财务部类型', year: '2020', month: '01', date: '2020-01' },\n    { typeName: '财务部类型', year: '2020', month: '02', date: '2020-02' },\n    { typeName: '市场部类型', year: '2020', month: '03', date: '2020-03' },\n    { typeName: '财务部类型', year: '2020', month: '04', date: '2020-04' },\n    { typeName: '市场部类型', year: '2020', month: '05', date: '2020-05' },\n    { typeName: '财务部类型', year: '2020', month: '06', date: '2020-06' },\n    { typeName: '市场部类型', year: '2020', month: '07', date: '2020-07' },\n    { typeName: '华南部类型', year: '2020', month: '08', date: '2020-08' },\n    { typeName: '西北部类型', year: '2020', month: '09', date: '2020-09' },\n    { typeName: '华东部类型', year: '2020', month: '10', date: '2020-10' },\n    { typeName: '商务部类型', year: '2020', month: '11', date: '2020-11' },\n    { typeName: '研发部类型', year: '2020', month: '12', date: '2020-12' },\n    { typeName: '财务部类型', year: '2021', month: '01', date: '2021-01' },\n    { typeName: '研发部类型', year: '2021', month: '02', date: '2021-02' },\n    { typeName: '财务部类型', year: '2021', month: '03', date: '2021-03' },\n    { typeName: '市场部类型', year: '2021', month: '04', date: '2021-04' },\n  ];\n  const searchBoxColumns1 = [\n    { title: '名称', dataIndex: 'name', key: 'name', fixed: 'left', minWidth: 100 },\n    { title: '公司名称', dataIndex: 'orgName', key: 'orgName', fixed: 'left', minWidth: 100 },\n    { title: '时期', dataIndex: 'period', key: 'period', fixed: 'left', minWidth: 100 },\n    { title: '电站名称', dataIndex: 'shortName', key: 'shortName', fixed: 'left', minWidth: 100 },\n  ];\n  const searchBoxData1 = [\n    { name: '名称0', orgName: '公司名称0', period: '时期0', shortName: '电站名称0' },\n    { name: '名称1', orgName: '公司名称1', period: '时期1', shortName: '电站名称1' },\n    { name: '名称2', orgName: '公司名称2', period: '时期2', shortName: '电站名称2' },\n  ];\n\n  const columns: BasicColumn[] = [\n    {\n      title: '输入框',\n      dataIndex: 'name-group',\n      editRow: true,\n      children: [\n        {\n          title: '输入框',\n          dataIndex: 'name',\n          editRow: true,\n          editComponent: 'DictSelectBox',\n          editComponentProps: {\n            type: DICT_TYPE.CERTIFICATE,\n            callback: (value, node, options) => {\n              currentEditNodeRef.value; // currentEditNodeRef 此变量的定义要放在前面\n            },\n          },\n          width: 150,\n        },\n        {\n          title: '默认输入状态',\n          dataIndex: 'name1',\n          editRow: true,\n          editComponent: 'SearchBox',\n          editComponentProps: {\n            opkey: 'SearchBox123',\n            twidth: '600px',\n            api: `/baseset/powerstation/page?name={name}&pageNo={current}&pageSize={pageSize}`,\n            multiple: false,\n            callback: (options) => {\n              currentEditNodeRef.value; // currentEditNodeRef 此变量的定义要放在前面\n            },\n          },\n          width: 150,\n        },\n        {\n          title: '输入框校验',\n          dataIndex: 'name2',\n          editRow: true,\n          align: 'left',\n          editComponent: 'TreeSelectBox',\n          editComponentProps: {\n            opkey: 'TreeSelectBox123',\n            twidth: 500,\n            filterName: 'nodeName',\n            callback: (value, node) => {\n              currentEditNodeRef.value; // currentEditNodeRef 此变量的定义要放在前面\n            },\n          },\n          width: 150,\n        },\n        {\n          title: '输入框校验',\n          dataIndex: 'name3',\n          editRow: true,\n          align: 'left',\n          editComponent: 'TreeBox',\n          editComponentProps: {\n            opkey: 'TreeBox123',\n            twidth: '500px',\n            callback: (node, event) => {\n              currentEditNodeRef.value; // currentEditNodeRef 此变量的定义要放在前面\n            },\n          },\n          width: 150,\n        },\n        {\n          title: '输入框校验',\n          dataIndex: 'name4',\n          editRow: true,\n          align: 'left',\n          editComponent: 'SelectBox',\n          editComponentProps: {\n            data: [\n              { vvv: '01', label: 'Lucy01' },\n              { vvv: '02', label: 'Lucy02' },\n            ],\n            twidth: '500px',\n            tfields: { label: 'label', value: 'vvv' },\n            callback: (value, options) => {\n              currentEditNodeRef.value; // currentEditNodeRef 此变量的定义要放在前面\n            },\n          },\n          width: 150,\n        },\n        {\n          title: '输入框校验',\n          dataIndex: 'name5',\n          editRow: true,\n          editComponent: 'CascaderBox',\n          editComponentProps: {\n            data: [\n              {\n                value: 'zhejiang',\n                label: 'Zhejiang',\n                children: [\n                  {\n                    value: 'hangzhou',\n                    label: 'Hangzhou',\n                    children: [\n                      {\n                        value: 'xihu',\n                        label: 'West Lake',\n                      },\n                    ],\n                  },\n                ],\n              },\n              {\n                value: 'jiangsu',\n                label: 'Jiangsu',\n                children: [\n                  {\n                    value: 'nanjing',\n                    label: 'Nanjing',\n                    children: [\n                      {\n                        value: 'zhonghuamen',\n                        label: 'Zhong Hua Men',\n                      },\n                    ],\n                  },\n                ],\n              },\n            ],\n            twidth: '500px',\n            tfields: { label: 'label', value: 'value', children: 'children' },\n            callback: (value, options) => {\n              currentEditNodeRef.value; // currentEditNodeRef 此变量的定义要放在前面\n            },\n          },\n          width: 150,\n        },\n        {\n          title: '输入框校验',\n          dataIndex: 'name6',\n          editRow: true,\n          align: 'left',\n          editComponent: 'UploadBox',\n          editComponentProps: {\n            width: 800, // 上传弹框宽度\n            height: 550, // 上传弹框高度\n            maxCount: 20, // 最多上传文件数\n            maxSize: 100 * 1024 * 1024, // 单文件最大上传大小\n            application: 'baseset', // 当前应用模块名称，如：po、baseset、hr、da等\n            module: 'oaleave', // 当前应用子模块名称\n            bizId: `test-bizid-${Math.floor(Math.random() * 100000)}`,\n            callback: (value, options) => {\n              currentEditNodeRef.value; // currentEditNodeRef 此变量的定义要放在前面\n            },\n          },\n          width: 150,\n        },\n      ],\n    },\n  ];\n\n  const searchFormSchema: any = {\n    labelWidth: 100,\n    actionColOptions: {\n      span: 24,\n    },\n    autoAdvancedLine: 4,\n    showAdvancedButton: true,\n    baseColProps: {\n      span: 6,\n    },\n    schemas: [\n      {\n        field: `SelectBox`,\n        label: `SelectBox`,\n        component: 'SelectBox',\n        componentProps: {\n          data: [\n            { vvv: '01', label: 'Lucy01' },\n            { vvv: '02', label: 'Lucy02' },\n          ],\n          twidth: '100%',\n          tfields: { label: 'label', value: 'vvv' },\n        },\n      },\n      {\n        field: `SelectBoxM`,\n        label: `SelectBoxMultiple`,\n        component: 'SelectBox',\n        defaultValue: [],\n        componentProps: {\n          data: [\n            { vvv: '01', label: 'Multiple01' },\n            { vvv: '02', label: 'Multiple02' },\n            { vvv: '03', label: 'Multiple03' },\n            { vvv: '04', label: 'Multiple04' },\n            { vvv: '05', label: 'Multiple05' },\n            { vvv: '06', label: 'Multiple06' },\n          ],\n          multiple: true,\n          twidth: '100%',\n          tfields: { label: 'label', value: 'vvv' },\n        },\n      },\n      {\n        field: 'SearchBox0',\n        label: '单选SearchBox',\n        component: 'SearchBox',\n        componentProps: {\n          opkey: 'SearchBox123',\n          twidth: '600px',\n          api: `/baseset/powerstation/page?name={name}&pageNo={current}&pageSize={pageSize}`,\n          multiple: false,\n        },\n        width: 150,\n      },\n      {\n        field: 'SearchBox1',\n        label: '多选SearchBox',\n        component: 'SearchBox',\n        componentProps: {\n          opkey: 'SearchBox123',\n          twidth: '600px',\n          api: '/baseset/powerstation/page?name={name}&pageNo={current}&pageSize={pageSize}',\n          multiple: true,\n        },\n        width: 150,\n      },\n      {\n        field: 'SearchBox2',\n        label: '本地SearchBox',\n        component: 'SearchBox',\n        componentProps: {\n          opkey: 'SearchBox1234',\n          twidth: '600px',\n          multiple: false,\n        },\n        width: 150,\n      },\n      {\n        field: 'SearchBox3',\n        label: '本地SearchBox',\n        component: 'SearchBox',\n        componentProps: {\n          opkey: 'SearchBox1234',\n          twidth: '600px',\n          multiple: true,\n        },\n        width: 150,\n      },\n      {\n        field: `DictSelectBox`,\n        label: `DictSelectBox`,\n        component: 'DictSelectBox',\n        componentProps: {\n          type: DICT_TYPE.CERTIFICATE,\n        },\n      },\n      {\n        field: `DictSelectBoxM`,\n        label: `DictSelectBoxM`,\n        component: 'DictSelectBox',\n        defaultValue: [],\n        componentProps: {\n          multiple: 'multiple',\n          type: DICT_TYPE.CERTIFICATE,\n        },\n      },\n      {\n        field: 'TreeSelectBox',\n        label: 'TreeSelectBox',\n        component: 'TreeSelectBox',\n        componentProps: {\n          opkey: 'TreeSelectBox123',\n          twidth: '500px',\n        },\n        width: 150,\n      },\n      {\n        field: 'TreeBox',\n        label: 'TreeBox',\n        component: 'TreeBox',\n        componentProps: {\n          opkey: 'TreeBox123',\n          twidth: '500px',\n        },\n        width: 150,\n      },\n      {\n        field: 'CascaderBox',\n        label: 'CascaderBox',\n        component: 'CascaderBox',\n        componentProps: {\n          data: [\n            {\n              value: 'zhejiang',\n              label: 'Zhejiang',\n              children: [\n                {\n                  value: 'hangzhou',\n                  label: 'Hangzhou',\n                  children: [\n                    {\n                      value: 'xihu',\n                      label: 'West Lake',\n                    },\n                  ],\n                },\n              ],\n            },\n            {\n              value: 'jiangsu',\n              label: 'Jiangsu',\n              children: [\n                {\n                  value: 'nanjing',\n                  label: 'Nanjing',\n                  children: [\n                    {\n                      value: 'zhonghuamen',\n                      label: 'Zhong Hua Men',\n                    },\n                  ],\n                },\n              ],\n            },\n          ],\n          twidth: '100%',\n          tfields: { label: 'label', value: 'value', children: 'children' },\n        },\n        width: 150,\n      },\n    ],\n  };\n\n  export default defineComponent({\n    components: { BasicTable, TableAction },\n    setup() {\n      const { createMessage: msg } = useMessage();\n      const currentEditKeyRef = ref('');\n      const tableData = ref([]);\n      tableData.value = JSON.parse(\n        '[{\"id\":\"0\",\"beginTime\":\"2003-06-11 17:12:49\",\"endTime\":\"2014-12-08 19:37:57\",\"address\":\"湖州市\",\"name\":\"锺秀兰\",\"name1\":\"熊杰\",\"name2\":\"谢秀英\",\"name3\":\"胡涛\",\"name4\":\"金霞\",\"name5\":\"雷洋\",\"name6\":\"金刚\",\"name7\":\"常明\",\"name8\":\"邹磊\",\"radio1\":\"选项1\",\"radio2\":\"选项1\",\"radio3\":\"选项1\",\"avatar\":\"http://dummyimage.com/400x400/f29b79/797af2&text=Robert\",\"imgArr\":[\"http://dummyimage.com/800x600/9df279/f279c1&text=Lspnfrll Skujf Sbixp Ncmvbpu Rqxs\",\"http://dummyimage.com/800x600/79e4f2/f2dc79&text=Iyxke Dxikdmx Hmklfcuev\",\"http://dummyimage.com/800x600/b979f2/79f295&text=Fjchacoa Whnzynkmu Gvwxtls Dsrvzip\",\"http://dummyimage.com/800x600/f2797f/79a2f2&text=Ofpssal Hdapoynj Lbrw Cgnujolgil Vxyjqwqf\"],\"imgs\":[\"http://dummyimage.com/800x600/c6f279/f279e9&text=Hycceh Vjwjtlvea Lhuskpi Bhkov Sijtv Bkddivet Qgsz\",\"http://dummyimage.com/800x600/79f2d7/f2b479&text=Fpzo Eiedud Mbteluc Vnojpyq Tnmygk\",\"http://dummyimage.com/800x600/9079f2/84f279&text=Ifoybd Jtbyt Tzyq\"],\"date\":\"2005-11-06\",\"time\":\"10:53\",\"no\":9399405,\"status\":\"disable\"},{\"id\":\"1\",\"beginTime\":\"1984-06-25 13:32:00\",\"endTime\":\"1996-12-20 20:04:03\",\"address\":\"鄂尔多斯市\",\"name\":\"黄超\",\"name1\":\"郭涛\",\"name2\":\"苏静\",\"name3\":\"史杰\",\"name4\":\"熊敏\",\"name5\":\"谭秀兰\",\"name6\":\"丁霞\",\"name7\":\"潘洋\",\"name8\":\"林平\",\"radio1\":\"选项2\",\"radio2\":\"选项2\",\"radio3\":\"选项2\",\"avatar\":\"http://dummyimage.com/400x400/f279a8/79cbf2&text=Dorothy\",\"imgArr\":[\"http://dummyimage.com/800x600/eef279/d279f2&text=Xigdkmxw Srwcbpqlle Wuowha Bvfssum Ftmx Pxfkkrv\",\"http://dummyimage.com/800x600/79f2ae/f28b79&text=Xmpf Oglpxjv Hreofedzm Hbjt Mlirro Oyqxfwluz\",\"http://dummyimage.com/800x600/7989f2/adf279&text=Xqmyntgx Trqmhv Mpxbzekquh Mhmpevfitg\",\"http://dummyimage.com/800x600/f279d0/79f2f0&text=Crpef Rnimjaykm Lmvj Yktgqcxfc Oyweg\"],\"imgs\":[\"http://dummyimage.com/800x600/f2cd79/a979f2&text=Ohol Feqvqfgw Phgqmbn\",\"http://dummyimage.com/800x600/79f286/f2798f&text=Elenucj Xpha Qdfgiys Fyjxcwkfe Ourlij\",\"http://dummyimage.com/800x600/79b2f2/d5f279&text=Ywlwln Piqjsk Lofqgeslfn Qfyh Yso Rjaorfhdo\"],\"date\":\"1972-04-25\",\"time\":\"01:32\",\"no\":4140132,\"status\":\"disable\"},{\"id\":\"2\",\"beginTime\":\"1975-10-27 15:29:03\",\"endTime\":\"1971-10-20 23:56:12\",\"address\":\"广州市\",\"name\":\"魏涛\",\"name1\":\"林杰\",\"name2\":\"侯霞\",\"name3\":\"马秀英\",\"name4\":\"萧强\",\"name5\":\"康秀兰\",\"name6\":\"郝桂英\",\"name7\":\"许刚\",\"name8\":\"赵秀英\",\"radio1\":\"选项3\",\"radio2\":\"选项3\",\"radio3\":\"选项3\",\"avatar\":\"http://dummyimage.com/400x400/eb79f2/79f2c8&text=William\",\"imgArr\":[\"http://dummyimage.com/800x600/f2a479/8179f2&text=Kbhktnr Pyfxb Bflbsna Azfnf Qsubjjngq Wxknowixm Hhrzn\",\"http://dummyimage.com/800x600/94f279/f279b7&text=Pqyy Rgyouqtjys Nwtjur Tmgcjh Rvzpk Dimy\",\"http://dummyimage.com/800x600/79daf2/f2e679&text=Jkrbtxd Vmpwi Summ Ihtumipb\",\"http://dummyimage.com/800x600/c279f2/79f29f&text=Ohcmo Wuq Xevfqqbiy Vizkk Vcp Hmst\"],\"imgs\":[\"http://dummyimage.com/800x600/f27c79/7999f2&text=Ecsjua Ocyira Feshmc Vmwbcq Zqbjpu Ivwhaatf\",\"http://dummyimage.com/800x600/bcf279/f279e0&text=Cgwhkjykx Ebs Dovrx Vhpwkxwys\",\"http://dummyimage.com/800x600/79f2e1/f2bd79&text=Qvqwslowe Yydl Qspl Esbirwcv Akzdn Jein Qgkyjyjev\"],\"date\":\"2011-10-10\",\"time\":\"00:47\",\"no\":2562536,\"status\":\"enable\"},{\"id\":\"3\",\"beginTime\":\"2017-07-05 23:17:12\",\"endTime\":\"1993-03-30 00:05:08\",\"address\":\"重庆市\",\"name\":\"刘芳\",\"name1\":\"常勇\",\"name2\":\"林刚\",\"name3\":\"赵桂英\",\"name4\":\"常丽\",\"name5\":\"贾秀兰\",\"name6\":\"汤磊\",\"name7\":\"金秀兰\",\"name8\":\"吕洋\",\"radio1\":\"选项4\",\"radio2\":\"选项4\",\"radio3\":\"选项4\",\"avatar\":\"http://dummyimage.com/400x400/9a79f2/7bf279&text=Brian\",\"imgArr\":[\"http://dummyimage.com/800x600/f2799e/79c1f2&text=Dfpkinmtw Urrq Aqwynmebm Qqjkncq Vihpmxijp\",\"http://dummyimage.com/800x600/e5f279/db79f2&text=Iuzjbniu Jif Mvauwmzgd\"],\"imgs\":[\"http://dummyimage.com/800x600/79f2b8/f29579&text=Xqixeedqu Pgnwhy Qgjmzuos Ypiwktrsu Kytyynhqsr Gosqgklay Mfqnducr\",\"http://dummyimage.com/800x600/7980f2/a3f279&text=Pifgvj Usrjtq Ukojd Yvcuwd Pekay Chup\",\"http://dummyimage.com/800x600/f279c7/79eaf2&text=Flwqxgusk Hiwliu Sqipgusir Clfk\"],\"date\":\"2023-01-26\",\"time\":\"02:31\",\"no\":871498,\"status\":\"disable\"}]',\n      );\n\n      const [registerTable] = useTable({\n        title: '可编辑行示例',\n        titleHelpMessage: [\n          '本例中修改[数字输入框]这一列时，同一行的[远程下拉]列的当前编辑数据也会同步发生改变',\n        ],\n        columns: columns,\n        formConfig: searchFormSchema,\n        useSearchForm: true,\n        showIndexColumn: false,\n        showTableSetting: true,\n        tableSetting: { fullScreen: true },\n        actionColumn: {\n          width: 160,\n          title: 'Action',\n          dataIndex: 'action',\n        },\n        dataSource: tableData,\n      });\n\n      function handleEdit(record: EditRecordRow) {\n        try {\n          if (Reflect.has(currentEditKeyRef, 'value')) {\n            currentEditKeyRef.value = record.key;\n            currentEditNodeRef.value = record;\n            record.onEdit?.(true);\n          }\n        } catch (error) {\n          //\n        }\n      }\n\n      function handleCancel(record: EditRecordRow) {\n        try {\n          if (Reflect.has(currentEditKeyRef, 'value')) {\n            currentEditKeyRef.value = '';\n            record.onEdit?.(false, false);\n          }\n        } catch (error) {\n          //\n        }\n      }\n\n      async function handleSave(record: EditRecordRow) {\n        msg.loading({ content: '正在保存...', duration: 0, key: 'saving' });\n        const valid = await record.onValid?.();\n        if (valid) {\n          try {\n            const data = cloneDeep(record.editValueRefs);\n            console.log(data);\n            // 保存之后提交编辑状态\n            const pass = await record.onEdit?.(false, true);\n            if (pass) {\n              currentEditKeyRef.value = '';\n            }\n            msg.success({ content: '数据已保存', key: 'saving' });\n          } catch (error) {\n            msg.error({ content: '保存失败', key: 'saving' });\n          }\n        } else {\n          msg.error({ content: '请填写正确的数据', key: 'saving' });\n        }\n      }\n\n      function createActions(record: EditRecordRow): ActionItem[] {\n        if (!record.editable) {\n          return [\n            {\n              label: '编辑',\n              disabled: currentEditKeyRef.value ? currentEditKeyRef.value !== record.key : false,\n              onClick: handleEdit.bind(null, record),\n            },\n          ];\n        }\n        return [\n          {\n            label: '保存',\n            onClick: handleSave.bind(null, record),\n          },\n          {\n            label: '取消',\n            popConfirm: {\n              title: '是否取消编辑',\n              confirm: handleCancel.bind(null, record),\n            },\n          },\n        ];\n      }\n\n      function onEditChange({ column, value, record }) {\n        // 本例\n        if (column.dataIndex === 'id') {\n          record.editValueRefs.name4.value = `${value}`;\n        }\n        console.log(column, value, record);\n      }\n\n      // 查询左侧电站树数据\n      function queryDeptTreeList() {\n        const result = JSON.parse(\n          `{\"code\":0,\"result\":[{\"orgId\":\"AABAB68C2D0440ADA0A52AE93B9508A0\",\"parentId\":\"HZ93a0a37bcad63b017bd784ee2012e7\",\"code\":\"GFJLTYYYZ\",\"fullId\":\"/HZ93a0bf6ab8dd83016ab8deaca70009.ogn/91EEFF16B1FF4F5CBF5CECDB928689DB.ogn/0C3B5ADB82C748C5828846EC7B717CCE.dpt/HZ93a0a37bcad63b017bd784ee2012e7.dpt/AABAB68C2D0440ADA0A52AE93B9508A0.dpt\",\"name\":\"吉林通榆\",\"deviceCategory\":null,\"deviceType\":null,\"categoryName\":null,\"typeName\":null,\"propertyValue\":\"fisheries\",\"stationId\":null,\"nodeId\":\"AABAB68C2D0440ADA0A52AE93B9508A0\",\"nodeName\":\"吉林通榆\",\"nodeType\":null,\"typeSort\":null,\"categorySort\":null,\"typeCode\":null,\"children\":[]},{\"orgId\":\"BC583036CFFA4EB3AE4ECCC21E57F682\",\"parentId\":\"HZ93a0a37bcad63b017bd784ee2012e7\",\"code\":\"GFJSRDYYZ\",\"fullId\":\"/HZ93a0bf6ab8dd83016ab8deaca70009.ogn/91EEFF16B1FF4F5CBF5CECDB928689DB.ogn/0C3B5ADB82C748C5828846EC7B717CCE.dpt/HZ93a0a37bcad63b017bd784ee2012e7.dpt/BC583036CFFA4EB3AE4ECCC21E57F682.dpt\",\"name\":\"江苏如东\",\"deviceCategory\":null,\"deviceType\":null,\"categoryName\":null,\"typeName\":null,\"propertyValue\":\"station\",\"stationId\":\"HZ93a0a35f810e6e015f904d09562813\",\"nodeId\":\"BC583036CFFA4EB3AE4ECCC21E57F682\",\"nodeName\":\"江苏如东\",\"nodeType\":null,\"typeSort\":null,\"categorySort\":null,\"typeCode\":null,\"children\":[{\"orgId\":null,\"parentId\":null,\"code\":null,\"fullId\":null,\"name\":null,\"deviceCategory\":\"gfq\",\"deviceType\":\"jzsnbq\",\"categoryName\":null,\"typeName\":\"jzsnbq\",\"propertyValue\":null,\"stationId\":\"HZ93a0a35f810e6e015f904d09562813\",\"nodeId\":\"7e14c133613b443590005078554bb797x\",\"nodeName\":\"gfq-cateGory\",\"nodeType\":\"category\",\"typeSort\":null,\"categorySort\":1,\"typeCode\":\"gfq\",\"children\":[{\"orgId\":null,\"parentId\":null,\"code\":null,\"fullId\":null,\"name\":null,\"deviceCategory\":\"gfq\",\"deviceType\":\"zcsnbq\",\"categoryName\":\"gfq\",\"typeName\":\"zcsnbq\",\"propertyValue\":null,\"stationId\":\"HZ93a0a35f810e6e015f904d09562813\",\"nodeId\":\"0d76f0a575a94fa599f63d8eb1a4283f\",\"nodeName\":\"zcsnbq-type\",\"nodeType\":\"type\",\"typeSort\":1,\"categorySort\":null,\"typeCode\":\"zcsnbq\",\"children\":[]},{\"orgId\":null,\"parentId\":null,\"code\":null,\"fullId\":null,\"name\":null,\"deviceCategory\":\"gfq\",\"deviceType\":\"jzsnbq\",\"categoryName\":\"gfq\",\"typeName\":\"jzsnbq\",\"propertyValue\":null,\"stationId\":\"HZ93a0a35f810e6e015f904d09562813\",\"nodeId\":\"7e14c133613b443590005078554bb797a\",\"nodeName\":\"jzsnbq-type-child\",\"nodeType\":\"type\",\"typeSort\":2,\"categorySort\":null,\"typeCode\":\"jzsnbq\",\"children\":[]}]}]},{\"orgId\":\"HZ93a0a35fd71b32015fd849228c100a\",\"parentId\":\"HZ93a0a37bcad63b017bd784ee2012e7\",\"code\":\"GFSDZBYYZ\",\"fullId\":\"/HZ93a0bf6ab8dd83016ab8deaca70009.ogn/91EEFF16B1FF4F5CBF5CECDB928689DB.ogn/0C3B5ADB82C748C5828846EC7B717CCE.dpt/HZ93a0a37bcad63b017bd784ee2012e7.dpt/HZ93a0a35fd71b32015fd849228c100a.dpt\",\"name\":\"山东高青\",\"deviceCategory\":null,\"deviceType\":null,\"categoryName\":null,\"typeName\":null,\"propertyValue\":\"fisheries\",\"stationId\":null,\"nodeId\":\"HZ93a0a35fd71b32015fd849228c100a\",\"nodeName\":\"山东高青\",\"nodeType\":null,\"typeSort\":null,\"categorySort\":null,\"typeCode\":null,\"children\":[]},{\"orgId\":\"HZ93a0a36120d1490161260327b63ea4\",\"parentId\":\"HZ93a0a37bcad63b017bd784ee2012e7\",\"code\":\"SDPD\",\"fullId\":\"/HZ93a0bf6ab8dd83016ab8deaca70009.ogn/91EEFF16B1FF4F5CBF5CECDB928689DB.ogn/0C3B5ADB82C748C5828846EC7B717CCE.dpt/HZ93a0a37bcad63b017bd784ee2012e7.dpt/HZ93a0a36120d1490161260327b63ea4.dpt\",\"name\":\"山东平度\",\"deviceCategory\":null,\"deviceType\":null,\"categoryName\":null,\"typeName\":null,\"propertyValue\":\"fisheries\",\"stationId\":null,\"nodeId\":\"HZ93a0a36120d1490161260327b63ea4\",\"nodeName\":\"山东平度\",\"nodeType\":null,\"typeSort\":null,\"categorySort\":null,\"typeCode\":null,\"children\":[]},{\"orgId\":\"HZ93a0a367e001980167e84d6e2962a4\",\"parentId\":\"HZ93a0a37bcad63b017bd784ee2012e7\",\"code\":\"tjdgyyz\",\"fullId\":\"/HZ93a0bf6ab8dd83016ab8deaca70009.ogn/91EEFF16B1FF4F5CBF5CECDB928689DB.ogn/0C3B5ADB82C748C5828846EC7B717CCE.dpt/HZ93a0a37bcad63b017bd784ee2012e7.dpt/HZ93a0a367e001980167e84d6e2962a4.dpt\",\"name\":\"天津大港\",\"deviceCategory\":null,\"deviceType\":null,\"categoryName\":null,\"typeName\":null,\"propertyValue\":\"fisheries\",\"stationId\":null,\"nodeId\":\"HZ93a0a367e001980167e84d6e2962a4\",\"nodeName\":\"天津大港\",\"nodeType\":null,\"typeSort\":null,\"categorySort\":null,\"typeCode\":null,\"children\":[]}],\"message\":\"\"}`,\n        );\n        const list = result.result as never[];\n        treeData.value = list;\n      }\n\n      queryDeptTreeList();\n      const options = {\n        columns: searchBoxColumns1,\n        pagination: true, // false 关闭分页   true 开启分页\n        tfields: { key: 'name' },\n        vfield: 'name',\n      };\n      const localSearchBoxOptions = {\n        columns: searchBoxColumns1,\n        data: searchBoxData1,\n        pagination: false, // false 关闭分页   true 开启分页\n        tfields: { key: 'name' },\n        vfield: 'name',\n      };\n      const treeOptions = {\n        data: treeData.value,\n        tfields: { key: 'nodeId', title: 'nodeName' },\n      };\n      const treeSelectOptions = {\n        data: treeData.value,\n        tfields: { value: 'nodeId', label: 'nodeName', children: 'children' },\n      };\n      setCustomCompOptions('SearchBox123', options);\n      setCustomCompOptions('SearchBox1234', localSearchBoxOptions);\n      setCustomCompOptions('TreeBox123', treeOptions);\n      setCustomCompOptions('TreeSelectBox123', treeSelectOptions);\n\n      return {\n        registerTable,\n        handleEdit,\n        createActions,\n        onEditChange,\n      };\n    },\n  });\n</script>\n"],"names":["treeData","ref","currentEditNodeRef","searchBoxColumns1","searchBoxData1","columns","DICT_TYPE","value","node","options","event","searchFormSchema","_sfc_main","defineComponent","BasicTable","TableAction","msg","useMessage","currentEditKeyRef","tableData","registerTable","useTable","handleEdit","record","_a","error","handleCancel","handleSave","__async","data","cloneDeep","_b","createActions","onEditChange","column","queryDeptTreeList","list","localSearchBoxOptions","treeOptions","treeSelectOptions","setCustomCompOptions","_resolveComponent","_openBlock","_createElementBlock","_hoisted_1","_createVNode","_component_BasicTable","_ctx","_createBlock","_component_TableAction"],"mappings":"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"}