var Ue=Object.defineProperty,Ke=Object.defineProperties;var Je=Object.getOwnPropertyDescriptors;var Pe=Object.getOwnPropertySymbols;var ze=Object.prototype.hasOwnProperty,Xe=Object.prototype.propertyIsEnumerable;var Ie=(e,a,o)=>a in e?Ue(e,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[a]=o,T=(e,a)=>{for(var o in a||(a={}))ze.call(a,o)&&Ie(e,o,a[o]);if(Pe)for(var o of Pe(a))Xe.call(a,o)&&Ie(e,o,a[o]);return e},Be=(e,a)=>Ke(e,Je(a));var D=(e,a,o)=>new Promise((i,y)=>{var g=p=>{try{l(o.next(p))}catch(A){y(A)}},n=p=>{try{l(o.throw(p))}catch(A){y(A)}},l=p=>p.done?i(p.value):Promise.resolve(p.value).then(g,n);l((o=o.apply(e,a)).next())});import{e as _,u as t,d as Le,H as Ye,v as ke,f as E,i as Ge,a7 as ee,A as Ee,E as ce,al as J,Z as ne,a9 as oe,aa as H,$ as Ze,R as z,ad as pe,ac as he,a6 as Qe,ai as de,g as et,w as te,av as tt,q as me,J as Ve,s as nt,r as Te,k as Q,o as st,_ as ot,ae as ye,F as at,ag as Se,ap as be,af as rt,b as it}from"./vue-71d1abb3.js";import{q as De,N as lt,r as Oe,s as ct,t as dt,v as ft,w as Me,x as ut,y as mt,z as pt}from"./BasicForm.vue_vue_type_style_index_0_lang-1ba7be9e.js";import{b9 as Ne,i as x,k as se,aX as Re,b as ht,bj as yt,bk as bt,_ as qe,n as X,aN as ae,aJ as fe,bc as re,bl as Y,bm as Ae,bn as gt,q as xe,bo as je,bp as ue,bq as _e,br as At,u as vt,bh as Ft,bi as wt}from"./index.js";import{bi as Ct,bj as Pt,bk as It,bl as Bt,aJ as $e,aL as Vt,aI as We,P as G,H as Tt,aK as St}from"./antd-15ac76ed.js";import{u as Dt}from"./uniqBy-92d3bc7f.js";import{u as Ot}from"./index-316f6ffb.js";function Rt(e){return function(a){a=Ct(a);var o=Pt(a)?It(a):void 0,i=o?o[0]:a.charAt(0),y=o?Bt(o,1).join(""):a.slice(1);return i[e]()+y}}var jt=Rt("toUpperCase");const $t=jt;function Lt(e,a){return _(()=>{const o=t(e),{labelCol:i={},wrapperCol:y={}}=o.itemProps||{},{labelWidth:g,disabledLabelWidth:n}=o,{labelWidth:l,labelCol:p,wrapperCol:A,layout:S}=t(a);if(!l&&!g&&!p||n)return i.style={textAlign:"left"},{labelCol:i,wrapperCol:y};let V=g||l;const c=T(T({},p),i),R=T(T({},A),y);return V&&(V=Ne(V)?`${V}px`:V),{labelCol:T({style:{width:V}},c),wrapperCol:T({style:{width:S==="vertical"?"100%":`calc(100% - ${V})`}},R)}})}function ge(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Ge(e)}const kt=Le({name:"BasicFormItem",inheritAttrs:!1,props:{schema:{type:Object,default:()=>({})},formProps:{type:Object,default:()=>({})},allDefaultValues:{type:Object,default:()=>({})},formModel:{type:Object,default:()=>({})},setFormModel:{type:Function,default:null},tableAction:{type:Object},formActionType:{type:Object},isAdvanced:{type:Boolean}},setup(e,{slots:a}){const{t:o}=ht(),{schema:i,formProps:y}=Ye(e),g=Lt(i,y),n=_(()=>{const{allDefaultValues:b,formModel:m,schema:d}=e,{mergeDynamicData:h}=e.formProps;return{field:d.field,model:m,values:T(T(T({},h),b),m),schema:d}}),l=_(()=>{var C;const{schema:b,tableAction:m,formModel:d,formActionType:h}=e;let{componentProps:w={}}=b;return x(w)&&(w=(C=w({schema:b,tableAction:m,formModel:d,formActionType:h}))!=null?C:{}),b.component==="Divider"&&(w=Object.assign({type:"horizontal"},{orientation:"left",plain:!0},w)),w}),p=_(()=>{const{disabled:b}=e.formProps,{dynamicDisabled:m}=e.schema,{disabled:d=!1}=t(l);let h=!!b||d;return se(m)&&(h=m),x(m)&&(h=m(t(n))),h});function A(){const{show:b,ifShow:m}=e.schema,{showAdvancedButton:d}=e.formProps,h=d&&se(e.isAdvanced)?e.isAdvanced:!0;let w=!0,C=!0;return se(b)&&(w=b),se(m)&&(C=m),x(b)&&(w=b(t(n))),x(m)&&(C=m(t(n))),w=w&&h,{isShow:w,isIfShow:C}}function S(){var v;const{rules:b=[],component:m,rulesMessageJoinLabel:d,label:h,dynamicRules:w,required:C}=e.schema;if(x(w))return w(t(n));let P=G(b);const{rulesMessageJoinLabel:$}=e.formProps,L=Reflect.has(e.schema,"rulesMessageJoinLabel")?d:$,j=Oe(m)+`${L?h:""}`;function s(u,F){const O=u.message||j;return F===void 0||bt(F)||Array.isArray(F)&&F.length===0||typeof F=="string"&&F.trim()===""||typeof F=="object"&&Reflect.has(F,"checked")&&Reflect.has(F,"halfChecked")&&Array.isArray(F.checked)&&Array.isArray(F.halfChecked)&&F.checked.length===0&&F.halfChecked.length===0?Promise.reject(O):Promise.resolve()}const r=x(C)?C(t(n)):C;r&&(!P||P.length===0?P=[{required:r,validator:s}]:P.findIndex(F=>Reflect.has(F,"required"))===-1&&P.push({required:r,validator:s}));const B=P.findIndex(u=>Reflect.has(u,"required")&&!Reflect.has(u,"validator"));if(B!==-1){const u=P[B],{isShow:F}=A();if(F||(u.required=!1),m){Reflect.has(u,"type")||(u.type=m==="InputNumber"?"number":"string"),u.message=u.message||j,(m.includes("Input")||m.includes("Textarea"))&&(u.whitespace=!0);const O=(v=t(l))==null?void 0:v.valueFormat;ct(u,m,O)}}const f=P.findIndex(u=>u.max);return f!==-1&&!P[f].validator&&(P[f].message=P[f].message||o("component.form.maxTip",[P[f].max])),P}function V(){var F;const{renderComponentContent:b,component:m,field:d,changeEvent:h="change",valueField:w}=e.schema,C=m&&["Switch","Checkbox"].includes(m),P=`on${$t(h)}`,$={[P]:(...O)=>{const[U]=O;r[P]&&r[P](...O);const K=U?U.target:null,N=K?C?K.checked:K.value:U;e.setFormModel(d,N,e.schema)}},L=De.get(m),{autoSetPlaceHolder:j,size:s}=e.formProps,r=Be(T({allowClear:!0,getPopupContainer:O=>O.parentNode,size:s},t(l)),{disabled:t(p)});!r.disabled&&j&&m!=="RangePicker"&&m&&(r.placeholder=((F=t(l))==null?void 0:F.placeholder)||Oe(m)),r.codeField=d,r.formValues=t(n);const f={[w||(C?"checked":"value")]:e.formModel[d]},v=T(T(T({},r),$),f);if(!b)return E(L,v,null);const u=x(b)?T({},b(t(n),{disabled:t(p)})):{default:()=>b};return E(L,v,ge(u)?u:{default:()=>[u]})}function c(){const{label:b,helpMessage:m,helpComponentProps:d,subLabel:h}=e.schema,w=h?E("span",null,[b,ce(" "),E("span",{class:"text-secondary"},[h])]):b,C=x(m)?m(t(n)):m;return!C||Array.isArray(C)&&C.length===0?w:E("span",null,[w,E(yt,ee({placement:"top",class:"mx-1",text:C},d),null)])}function R(){const{itemProps:b,slot:m,render:d,field:h,suffix:w,component:C}=e.schema,{labelCol:P,wrapperCol:$}=t(g),{colon:L}=e.formProps,j={disabled:t(p)};if(C==="Divider"){let s;return E($e,{span:24},{default:()=>[E(Vt,t(l),ge(s=c())?s:{default:()=>[s]})]})}else{const s=()=>m?Re(a,m,t(n),j):d?d(t(n),j):V(),r=!!w,B=x(w)?w(t(n)):w;return lt.includes(C)&&e.schema&&(e.schema.itemProps=T({autoLink:!1},e.schema.itemProps)),E(We.Item,ee({name:h,colon:L,class:{"suffix-item":r}},b,{label:c(),rules:S(),labelCol:P,wrapperCol:$}),{default:()=>[E("div",{style:"display:flex"},[E("div",{style:"flex:1;"},[s()]),r&&E("span",{class:"suffix"},[B])])]})}}return()=>{let b;const{colProps:m={},colSlot:d,renderColContent:h,component:w}=e.schema;if(!De.has(w))return null;const{baseColProps:C={}}=e.formProps,P=T(T({},C),m),{isIfShow:$,isShow:L}=A(),j=t(n),s={disabled:t(p)};return $&&ke(E($e,P,ge(b=(()=>d?Re(a,d,j,s):h?h(j,s):R())())?b:{default:()=>[b]}),[[Ee,L]])}}});function Et(e,a,o,i,y,g){const n=J("Button"),l=J("BasicArrow"),p=J("FormItem"),A=J("a-col");return e.showActionButtonGroup?(ne(),oe(A,de(ee({key:0},e.actionColOpt)),{default:H(()=>[Ze("div",{style:Qe([{width:"100%"},{textAlign:e.actionColOpt.style.textAlign}])},[E(p,null,{default:H(()=>[z(e.$slots,"resetBefore"),e.showResetButton?(ne(),oe(n,ee({key:0,type:"default",class:"mr-2"},e.getResetBtnOptions,{onClick:e.resetAction}),{default:H(()=>[ce(pe(e.getResetBtnOptions.text),1)]),_:1},16,["onClick"])):he("",!0),z(e.$slots,"submitBefore"),e.showSubmitButton?(ne(),oe(n,ee({key:1,type:"primary",class:"mr-2"},e.getSubmitBtnOptions,{onClick:e.submitAction}),{default:H(()=>[ce(pe(e.getSubmitBtnOptions.text),1)]),_:1},16,["onClick"])):he("",!0),z(e.$slots,"advanceBefore"),ke(E(n,{type:"link",size:"small",onClick:e.toggleAdvanced},{default:H(()=>[ce(pe(e.isAdvanced?e.t("component.form.putAway"):e.t("component.form.unfold"))+" ",1),E(l,{class:"ml-1",expand:!e.isAdvanced,up:""},null,8,["expand"])]),_:1},8,["onClick"]),[[Ee,e.showExpandText]]),z(e.$slots,"advanceAfter")]),_:3})],4)]),_:3},16)):he("",!0)}const Mt=qe(dt,[["render",Et]]);function Nt(e,a,o){const i=/^\[(.+)\]$/;if(i.test(e)){const y=e.match(i);if(y&&y[1]){const g=y[1].split(",");return a=Array.isArray(a)?a:[a],g.forEach((n,l)=>{re(o,n.trim(),a[l])}),!0}}}function qt(e,a,o){const i=/^\{(.+)\}$/;if(i.test(e)){const y=e.match(i);if(y&&y[1]){const g=y[1].split(",");return a=X(a)?a:{},g.forEach(n=>{re(o,n.trim(),a[n.trim()])}),!0}}}function xt({defaultValueRef:e,getSchema:a,formModel:o,getProps:i}){function y(l){var A,S;if(!X(l))return{};const p={};for(const V of Object.entries(l)){let[,c]=V;const[R]=V;if(!R||ae(c)&&c.length===0||x(c))continue;const b=t(i).transformDateFunc;X(c)&&(c=b==null?void 0:b(c)),ae(c)&&((A=c[0])!=null&&A.format)&&((S=c[1])!=null&&S.format)&&(c=c.map(m=>b==null?void 0:b(m))),fe(c)&&(c===""?c=void 0:c=c.trim()),!Nt(R,c,p)&&!qt(R,c,p)&&re(p,R,c)}return g(p)}function g(l){const p=t(i).fieldMapToTime;if(!p||!Array.isArray(p))return l;for(const[A,[S,V],c="YYYY-MM-DD"]of p){if(!A||!S||!V)continue;if(!l[A]){Reflect.deleteProperty(l,A);continue}const[R,b]=l[A],[m,d]=Array.isArray(c)?c:[c,c];l[S]=Y(R).format(m),l[V]=Y(b).format(d),Reflect.deleteProperty(l,A)}return l}function n(){const l=t(a),p={};l.forEach(A=>{const{defaultValue:S,defaultValueObj:V}=A,c=Object.keys(V||{});c.length&&c.map(R=>{p[R]=V[R],o[R]===void 0&&(o[R]=V[R])}),Ae(S)||(p[A.field]=S,o[A.field]===void 0&&(o[A.field]=S))}),e.value=G(p)}return{handleFormValues:y,initDefault:n}}const Z=24;function _t({advanceState:e,emit:a,getProps:o,getSchema:i,formModel:y,defaultValueRef:g}){const n=et(),{realWidthRef:l,screenEnum:p,screenRef:A}=gt(),S=_(()=>{if(!e.isAdvanced)return 0;const d=t(o).emptySpan||0;if(Ne(d))return d;if(X(d)){const{span:h=0}=d,w=t(A);return d[w.toLowerCase()]||h||0}return 0}),V=xe(b,30);te([()=>t(i),()=>e.isAdvanced,()=>t(l)],()=>{const{showAdvancedButton:d}=t(o);d&&V()},{immediate:!0});function c(d,h=0,w=!1){const C=t(l),P=parseInt(d.md)||parseInt(d.xs)||parseInt(d.sm)||d.span||Z,$=parseInt(d.lg)||P,L=parseInt(d.xl)||$,j=parseInt(d.xxl)||L;return C<=p.LG?h+=P:C<p.XL?h+=$:C<p.XXL?h+=L:h+=j,w?(e.hideAdvanceBtn=!1,h<=Z*2?(e.hideAdvanceBtn=!0,e.isAdvanced=!0):h>Z*2&&h<=Z*(t(o).autoAdvancedLine||3)?e.hideAdvanceBtn=!1:e.isLoad||(e.isLoad=!0,e.isAdvanced=!e.isAdvanced),{isAdvanced:e.isAdvanced,itemColSum:h}):h>Z*(t(o).alwaysShowLines||1)?{isAdvanced:e.isAdvanced,itemColSum:h}:{isAdvanced:!0,itemColSum:h}}const R=tt({});function b(){var C;let d=0,h=0;const{baseColProps:w={}}=t(o);for(const P of t(i)){const{show:$,colProps:L}=P;let j=!0;if(se($)&&(j=$),x($)&&(j=$({schema:P,model:y,field:P.field,values:T(T({},t(g)),y)})),j&&(L||w)){const{itemColSum:s,isAdvanced:r}=c(T(T({},w),L),d);d=s||0,r&&(h=d),R[P.field]=r}}(C=n==null?void 0:n.proxy)==null||C.$forceUpdate(),e.actionSpan=h%Z+t(S),c(t(o).actionColOptions||{span:Z},d,!0),a("advanced-change")}function m(){e.isAdvanced=!e.isAdvanced,a("toggle",e.isAdvanced)}return{handleToggleAdvanced:m,fieldsIsAdvancedMap:R}}function Wt(e,a={}){const o=/^\[(.+)\]$/;if(o.test(e)){const i=e.match(o);if(i&&i[1]){const y=i[1].split(",");if(!y.length)return;const g=[];return y.forEach((n,l)=>{re(g,l,a[n.trim()])}),g.filter(Boolean).length?g:void 0}}}function Ht(e,a={}){const o=/^\{(.+)\}$/;if(o.test(e)){const i=e.match(o);if(i&&i[1]){const y=i[1].split(",");if(!y.length)return;const g={};return y.forEach(n=>{re(g,n.trim(),a[n.trim()])}),Object.values(g).filter(Boolean).length?g:void 0}}}function Ut({emit:e,getProps:a,formModel:o,getSchema:i,defaultValueRef:y,formElRef:g,schemaRef:n,handleFormValues:l}){function p(){return D(this,null,function*(){const{resetFunc:s,submitOnReset:r}=t(a);s&&x(s)&&(yield s()),t(g)&&(Object.keys(o).forEach(f=>{const v=t(i).find(O=>O.field===f),u=v==null?void 0:v.defaultValueObj,F=Object.keys(u||{});F.length&&F.map(O=>{o[O]=u[O]}),o[f]=Kt(v,y,f)}),me(()=>$()),e("reset",Ve(o)),r&&j())})}const A=()=>t(i).map(s=>[...s.fields||[],s.field]).flat(1).filter(Boolean);function S(s){return D(this,null,function*(){const r=A(),B=".",f=r.filter(u=>String(u).indexOf(B)>=0),v=[];r.forEach(u=>{const F=t(i).find(k=>k.field===u);let O=Tt(s,u);const U=Reflect.has(s,u);O=ft(F==null?void 0:F.component,O);const{componentProps:K}=F||{};let N=K;typeof K=="function"&&(N=N({formModel:t(o)}));const ie=Wt(u,s)||Ht(u,s);if(U||ie){const k=ie||O;if(w(u))if(Array.isArray(k)){const W=[];for(const I of k)W.push(I?Y(I):null);t(o)[u]=W}else t(o)[u]=k?N!=null&&N.valueFormat?k:Y(k):null;else t(o)[u]=k;N!=null&&N.onChange&&(N==null||N.onChange(k)),v.push(u)}else f.forEach(k=>{try{const W=k.split(".").reduce((I,M)=>I[M],s);je(W)&&(t(o)[k]=t(W),v.push(k))}catch(W){je(y.value[k])&&(t(o)[k]=G(t(y.value[k])))}})}),C(v).catch(u=>{})})}function V(s){return D(this,null,function*(){const r=G(t(i));if(!s)return;let B=fe(s)?[s]:s;fe(s)&&(B=[s]);for(const f of B)c(f,r);n.value=r})}function c(s,r){if(fe(s)){const B=r.findIndex(f=>f.field===s);B!==-1&&(delete o[s],r.splice(B,1))}}function R(s,r,B=!1){return D(this,null,function*(){const f=G(t(i)),v=Array.isArray(s)?s.map(O=>O.field):[s.field];if(f.find(O=>v.includes(O.field))){ue("There are schemas that have already been added");return}const u=f.findIndex(O=>O.field===r),F=X(s)?[s]:s;if(!r||u===-1||B){B?f.unshift(...F):f.push(...F),n.value=f,d(s);return}u!==-1&&f.splice(u+1,0,...F),d(s),n.value=f})}function b(s){return D(this,null,function*(){let r=[];if(X(s)&&r.push(s),ae(s)&&(r=[...s]),!r.every(f=>f.component==="Divider"||Reflect.has(f,"field")&&f.field)){ue("All children of the form Schema array that need to be updated must contain the `field` field");return}n.value=r})}function m(s){return D(this,null,function*(){let r=[];if(X(s)&&r.push(s),ae(s)&&(r=[...s]),!r.every(v=>v.component==="Divider"||Reflect.has(v,"field")&&v.field)){ue("All children of the form Schema array that need to be updated must contain the `field` field");return}const f=[];t(i).forEach(v=>{let u;if(r.forEach(F=>{v.field===F.field&&(u=F)}),u!==void 0&&v.field===u.field){const F=_e(v,u);f.push(F)}else f.push(v)}),d(f),n.value=Dt(f,"field")})}function d(s){let r=[];X(s)&&r.push(s),ae(s)&&(r=[...s]);const B={},f=h();r.forEach(v=>{v.component!="Divider"&&Reflect.has(v,"field")&&v.field&&!Ae(v.defaultValue)&&(!(v.field in f)||Ae(f[v.field])||At(f[v.field]))&&(B[v.field]=v.defaultValue)}),S(B)}function h(){return t(g)?l(Ve(t(o))):{}}function w(s){return t(i).some(r=>r.field===s?Me.includes(r.component):!1)}function C(s){return D(this,null,function*(){var r;return(r=t(g))==null?void 0:r.validateFields(s)})}function P(s){return D(this,null,function*(){var B;let r;return s===void 0?r=A():r=s===Array.isArray(s)?s:void 0,yield(B=t(g))==null?void 0:B.validate(r)})}function $(s){return D(this,null,function*(){var r;yield(r=t(g))==null?void 0:r.clearValidate(s)})}function L(s,r){return D(this,null,function*(){var B;yield(B=t(g))==null?void 0:B.scrollToField(s,r)})}function j(s){return D(this,null,function*(){s&&s.preventDefault();const{submitFunc:r}=t(a);if(r&&x(r)){yield r();return}if(t(g))try{const f=yield P(),v=l(f);e("submit",v)}catch(f){if((f==null?void 0:f.outOfDate)===!1&&(f!=null&&f.errorFields))return;throw new Error(f)}})}return{handleSubmit:j,clearValidate:$,validate:P,validateFields:C,getFieldsValue:h,updateSchema:m,resetSchema:b,appendSchemaByField:R,removeSchemaByField:V,resetFields:p,setFieldsValue:S,scrollToField:L}}function Kt(e,a,o){let i=G(a.value[o]);return zt(e)?i||"":(!i&&e&&Jt(e)&&(i=[0,0]),i)}function Jt(e){if(e.component==="Slider"&&e.componentProps&&e.componentProps.range)return!0}function zt(e){return(e==null?void 0:e.component)&&ut.includes(e.component)}function Xt(y){return D(this,arguments,function*({getSchema:e,getProps:a,formElRef:o,isInitedDefault:i}){nt(()=>D(this,null,function*(){if(t(i)||!t(a).autoFocusFirstItem)return;yield me();const g=t(e),n=t(o),l=n==null?void 0:n.$el;if(!n||!l||!g||g.length===0||!g[0].component.includes("Input"))return;const A=l.querySelector(".ant-row:first-child input");A&&(A==null||A.focus())}))})}const Yt=Le({name:"BasicForm",components:{FormItem:kt,Form:We,Row:St,FormAction:Mt},props:mt,emits:["advanced-change","reset","submit","register","field-value-change"],setup(e,{emit:a,attrs:o}){const i=Te({}),y=Ot(),g=Te({isAdvanced:!0,hideAdvanceBtn:!1,isLoad:!1,actionSpan:6}),n=Q({}),l=Q(!1),p=Q({}),A=Q(null),S=Q(null),{prefixCls:V}=vt("basic-form"),c=_(()=>T(T({},e),t(p))),R=_(()=>[V,{[`${V}--compact`]:t(c).compact}]),b=_(()=>{const{baseRowStyle:I={},rowProps:M}=t(c);return T({style:I},M)}),m=_(()=>T(T(T({},o),e),t(c))),d=_(()=>{const I=t(A)||t(c).schemas;for(const M of I){const{defaultValue:q,component:ve,componentProps:Fe,isHandleDateDefaultValue:He=!0}=M;if(He&&q&&Me.includes(ve)){const le=Fe?Fe.valueFormat:null;if(!Array.isArray(q))M.defaultValue=le?Y(q).format(le):Y(q);else{const we=[];q.forEach(Ce=>{we.push(le?Y(Ce).format(le):Y(Ce))}),M.defaultValue=we}}}return t(c).showAdvancedButton?G(I.filter(M=>M.component!=="Divider")):G(I)}),{handleToggleAdvanced:h,fieldsIsAdvancedMap:w}=_t({advanceState:g,emit:a,getProps:c,getSchema:d,formModel:i,defaultValueRef:n}),C=()=>{a("toggle-advanced"),h()},{handleFormValues:P,initDefault:$}=xt({getProps:c,defaultValueRef:n,getSchema:d,formModel:i});Xt({getSchema:d,getProps:c,isInitedDefault:l,formElRef:S});const{handleSubmit:L,setFieldsValue:j,clearValidate:s,validate:r,validateFields:B,getFieldsValue:f,updateSchema:v,resetSchema:u,appendSchemaByField:F,removeSchemaByField:O,resetFields:U,scrollToField:K}=Ut({emit:a,getProps:c,formModel:i,getSchema:d,defaultValueRef:n,formElRef:S,schemaRef:A,handleFormValues:P});pt({resetAction:U,submitAction:L}),te(()=>t(c).model,()=>{const{model:I}=t(c);I&&j(I)},{immediate:!0}),te(()=>t(c).schemas,I=>{u(I!=null?I:[])}),te(()=>d.value,I=>{me(()=>{var M;(M=y==null?void 0:y.redoModalHeight)==null||M.call(y)}),!t(l)&&I!=null&&I.length&&($(),l.value=!0)}),te(()=>i,xe(()=>{t(c).submitOnChange&&L()},300),{deep:!0});function N(I){return D(this,null,function*(){p.value=_e(t(p)||{},I)})}function ie(I,M,q){i[I]=M,a("field-value-change",I,M),q&&q.itemProps&&!q.itemProps.autoLink&&B([I]).catch(ve=>{})}function k(I){const{autoSubmitOnEnter:M}=t(c);if(M&&I.key==="Enter"&&I.target&&I.target instanceof HTMLElement){const q=I.target;q&&q.tagName&&q.tagName.toUpperCase()=="INPUT"&&L()}}const W={getFieldsValue:f,setFieldsValue:j,resetFields:U,updateSchema:v,resetSchema:u,setProps:N,removeSchemaByField:O,appendSchemaByField:F,clearValidate:s,validateFields:B,validate:r,submit:L,scrollToField:K};return st(()=>{$(),a("register",W)}),T({getBindValue:m,handleToggleAdvanced:h,handleActionToggleAdvanced:C,handleEnterPress:k,formModel:i,defaultValueRef:n,advanceState:g,getRow:b,getProps:c,formElRef:S,getSchema:d,formActionType:W,setFormModel:ie,getFormClass:R,getFormActionBindProps:_(()=>T(T({},c.value),g)),fieldsIsAdvancedMap:w},W)}});function Gt(e,a,o,i,y,g){const n=J("FormItem"),l=J("FormAction"),p=J("Row"),A=J("Form");return ne(),oe(A,ee(e.getBindValue,{class:e.getFormClass,ref:"formElRef",model:e.formModel,onKeypress:rt(e.handleEnterPress,["enter"])}),{default:H(()=>[E(p,de(be(e.getRow)),{default:H(()=>[z(e.$slots,"formHeader"),(ne(!0),ot(at,null,ye(e.getSchema,S=>(ne(),oe(n,{key:S.field,isAdvanced:e.fieldsIsAdvancedMap[S.field],tableAction:e.tableAction,formActionType:e.formActionType,schema:S,formProps:e.getProps,allDefaultValues:e.defaultValueRef,formModel:e.formModel,setFormModel:e.setFormModel},Se({_:2},[ye(Object.keys(e.$slots),V=>({name:V,fn:H(c=>[z(e.$slots,V,de(be(c||{})))])}))]),1032,["isAdvanced","tableAction","formActionType","schema","formProps","allDefaultValues","formModel","setFormModel"]))),128)),E(l,ee(e.getFormActionBindProps,{onToggleAdvanced:e.handleActionToggleAdvanced}),Se({_:2},[ye(["resetBefore","submitBefore","advanceBefore","advanceAfter"],S=>({name:S,fn:H(V=>[z(e.$slots,S,de(be(V||{})))])}))]),1040,["onToggleAdvanced"]),z(e.$slots,"formFooter")]),_:3},16)]),_:3},16,["class","model","onKeypress"])}const an=qe(Yt,[["render",Gt]]);function rn(e){const a=Q(null),o=Q(!1);function i(){return D(this,null,function*(){const n=t(a);return n||ue("The form instance has not been obtained, please make sure that the form has been rendered when performing the form operation!"),yield me(),n})}function y(n){it(()=>{a.value=null,o.value=null}),!(t(o)&&Ft()&&n===t(a))&&(a.value=n,o.value=!0,te(()=>e,()=>{e&&n.setProps(wt(e))},{immediate:!0,deep:!0}))}return[y,{scrollToField:(n,l)=>D(this,null,function*(){(yield i()).scrollToField(n,l)}),setProps:n=>D(this,null,function*(){(yield i()).setProps(n)}),updateSchema:n=>D(this,null,function*(){(yield i()).updateSchema(n)}),resetSchema:n=>D(this,null,function*(){(yield i()).resetSchema(n)}),clearValidate:n=>D(this,null,function*(){(yield i()).clearValidate(n)}),resetFields:()=>D(this,null,function*(){i().then(n=>D(this,null,function*(){yield n.resetFields()}))}),removeSchemaByField:n=>D(this,null,function*(){var l;(l=t(a))==null||l.removeSchemaByField(n)}),getFieldsValue:()=>{var n;return(n=t(a))==null?void 0:n.getFieldsValue()},setFieldsValue:n=>D(this,null,function*(){(yield i()).setFieldsValue(n)}),appendSchemaByField:(n,l,p)=>D(this,null,function*(){(yield i()).appendSchemaByField(n,l,p)}),submit:()=>D(this,null,function*(){return(yield i()).submit()}),validate:n=>D(this,null,function*(){return(yield i()).validate(n)}),validateFields:n=>D(this,null,function*(){return(yield i()).validateFields(n)})}]}export{an as B,rn as u};
//# sourceMappingURL=useForm-dea3ed18.js.map
