{"version":3,"file":"LockModal-c55f20cc.js","sources":["../../src/layouts/default/header/components/lock/LockModal.vue"],"sourcesContent":["<template>\n  <BasicModal\n    :footer=\"null\"\n    :title=\"t('layout.header.lockScreen')\"\n    v-bind=\"$attrs\"\n    :class=\"prefixCls\"\n    @register=\"register\"\n  >\n    <div :class=\"`${prefixCls}__entry`\">\n      <div :class=\"`${prefixCls}__header`\">\n        <img :src=\"avatar\" :class=\"`${prefixCls}__header-img`\" />\n        <p :class=\"`${prefixCls}__header-name`\">\n          {{ getRealName }}\n        </p>\n      </div>\n\n      <BasicForm @register=\"registerForm\" />\n\n      <div :class=\"`${prefixCls}__footer`\">\n        <a-button type=\"primary\" block class=\"mt-2\" @click=\"handleLock\">\n          {{ t('layout.header.lockScreenBtn') }}\n        </a-button>\n      </div>\n    </div>\n  </BasicModal>\n</template>\n<script lang=\"ts\">\n  import { defineComponent, computed } from 'vue';\n  import { useI18n } from '/@/hooks/web/useI18n';\n  import { useDesign } from '/@/hooks/web/useDesign';\n  import { BasicModal, useModalInner } from '/@/components/Modal/index';\n  import { BasicForm, useForm } from '/@/components/Form/index';\n\n  import { useUserStore } from '/@/store/modules/user';\n  import { useLockStore } from '/@/store/modules/lock';\n  import headerImg from '/@/assets/images/header.jpg';\n\n  export default defineComponent({\n    name: 'LockModal',\n    components: { BasicModal, BasicForm },\n\n    setup() {\n      const { t } = useI18n();\n      const { prefixCls } = useDesign('header-lock-modal');\n      const userStore = useUserStore();\n      const lockStore = useLockStore();\n\n      const getRealName = computed(() => userStore.getUserInfo?.realName);\n      const [register, { closeModal }] = useModalInner();\n\n      const [registerForm, { validateFields, resetFields }] = useForm({\n        showActionButtonGroup: false,\n        schemas: [\n          {\n            field: 'password',\n            label: t('layout.header.lockScreenPassword'),\n            colProps: {\n              span: 24,\n            },\n            component: 'InputPassword',\n            required: true,\n          },\n        ],\n      });\n\n      async function handleLock() {\n        const values = (await validateFields()) as any;\n        const password: string | undefined = values.password;\n        closeModal();\n\n        lockStore.setLockInfo({\n          isLock: true,\n          pwd: password,\n        });\n        await resetFields();\n      }\n\n      const avatar = computed(() => {\n        const { avatar } = userStore.getUserInfo;\n        return avatar || headerImg;\n      });\n\n      return {\n        t,\n        prefixCls,\n        getRealName,\n        register,\n        registerForm,\n        handleLock,\n        avatar,\n      };\n    },\n  });\n</script>\n<style lang=\"less\">\n  @prefix-cls: ~'@{namespace}-header-lock-modal';\n\n  .@{prefix-cls} {\n    &__entry {\n      position: relative;\n      //height: 240px;\n      padding: 130px 30px 30px;\n      border-radius: 10px;\n    }\n\n    &__header {\n      position: absolute;\n      top: 0;\n      left: calc(50% - 45px);\n      width: auto;\n      text-align: center;\n\n      &-img {\n        width: 70px;\n        border-radius: 50%;\n      }\n\n      &-name {\n        margin-top: 5px;\n      }\n    }\n\n    &__footer {\n      text-align: center;\n    }\n  }\n</style>\n"],"names":["_sfc_main","defineComponent","BasicModal","BasicForm","t","useI18n","prefixCls","useDesign","userStore","useUserStore","lockStore","useLockStore","getRealName","computed","_a","register","closeModal","useModalInner","registerForm","validateFields","resetFields","useForm","handleLock","__async","password","avatar","headerImg","_component_BasicModal","_resolveComponent","_openBlock","_createBlock","_mergeProps","_ctx","_withCtx","_createElementVNode","_normalizeClass","_hoisted_1","_toDisplayString","_createVNode","_component_BasicForm","_component_a_button"],"mappings":"qgCAqCE,MAAAA,EAAeC,EAAgB,CAC7B,KAAM,YACN,WAAY,CAAE,WAAAC,EAAY,UAAAC,CAAU,EAEpC,OAAQ,CACA,KAAA,CAAE,EAAAC,GAAMC,IACR,CAAE,UAAAC,CAAA,EAAcC,EAAU,mBAAmB,EAC7CC,EAAYC,IACZC,EAAYC,IAEZC,EAAcC,EAAS,IAAA,OAAM,OAAAC,EAAAN,EAAU,cAAV,YAAAM,EAAuB,SAAQ,EAC5D,CAACC,EAAU,CAAE,WAAAC,CAAW,CAAC,EAAIC,EAAc,EAE3C,CAACC,EAAc,CAAE,eAAAC,EAAgB,YAAAC,CAAa,CAAA,EAAIC,EAAQ,CAC9D,sBAAuB,GACvB,QAAS,CACP,CACE,MAAO,WACP,MAAOjB,EAAE,kCAAkC,EAC3C,SAAU,CACR,KAAM,EACR,EACA,UAAW,gBACX,SAAU,EACZ,CACF,CAAA,CACD,EAED,SAAekB,GAAa,QAAAC,EAAA,sBAE1B,MAAMC,GADU,MAAML,KACsB,SACjCH,IAEXN,EAAU,YAAY,CACpB,OAAQ,GACR,IAAKc,CAAA,CACN,EACD,MAAMJ,EAAY,CACpB,GAEM,MAAAK,EAASZ,EAAS,IAAM,CAC5B,KAAM,CAAE,OAAAY,GAAWjB,EAAU,YAC7B,OAAOiB,GAAUC,CAAA,CAClB,EAEM,MAAA,CACL,EAAAtB,EACA,UAAAE,EACA,YAAAM,EACA,SAAAG,EACA,aAAAG,EACA,WAAAI,EACA,OAAAG,CAAA,CAEJ,CACF,CAAC,iFA3FDE,EAAAC,EAuBa,YAvBb,SAEQC,EAAG,EAAAC,EAAAH,EAAAI,EAAA,CACD,OAAA,KACP,MAAOC,EAAS,EAAA,0BAAA,CAAA,EAChBA,EAAU,OAAA,CAAA,MAAAA,EAAA,+BAEX,CAAA,EAAA,CAAW,QAAAC,EAAA,IAAA,CAAAC,EAAA,MAAA,CACT,MAKMC,EAAA,GAAAH,EAAA,SAAA,SAAA,CAAA,EAAA,UAJJ,MAAyDG,EAAA,GAAAH,EAAA,SAAA,UAAA,CAAA,EAAA,CAAhCE,EAAA,MAAA,CAAA,IAAAF,EAAA,OACzB,MAEIG,EAAA,GAAAH,EAAA,SAAA,cAAA,CAAA,EAFA,KAAK,GAAAI,CAAA,EACJF,EAAA,IAAA,CAAA,MAAAC,EAAA,GAAAH,EAAA,SAAA,eAAA,CAIP,EAAAK,EAAsCL,EAA1B,WAAA,EAAA,CAAA,CAEZ,EAAA,CAAA,EAAAM,EAAWC,EAAK,CAAS,WAAAP,EAAA,YAAA,EAAA,KAAA,EAAA,CAAA,YAAA,CAAA,EAAAE,EAAA,MAAA,CACvB,MAEWC,EAAA,GAAAH,EAAA,SAAA,UAAA,CAAA,EAAA,CAFmBM,EAAAE,EAAA,CAAC,KAAK,UAAS,MAAK,GAAA,MAAA"}