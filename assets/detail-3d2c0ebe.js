var f=(g,a,v)=>new Promise((x,h)=>{var o=m=>{try{I(v.next(m))}catch(Y){h(Y)}},C=m=>{try{I(v.throw(m))}catch(Y){h(Y)}},I=m=>m.done?x(m.value):Promise.resolve(m.value).then(o,C);I((v=v.apply(g,a)).next())});import{d as K,r as z,k as D,ax as W,u as q,o as X,al as p,Z as B,_ as F,f as e,aa as t,$ as y,E as R,ac as ee,v as u,A as r,aG as ae,aH as te}from"./vue-71d1abb3.js";import{d as le,a as se,g as O,b as ne,s as oe,c as de}from"./index-45369bb7.js";import{B as ie}from"./BasicTable-0434a334.js";import"./BasicForm.vue_vue_type_style_index_0_lang-1ba7be9e.js";import"./index-085d06c7.js";import{u as ue}from"./useTable-109483b3.js";import{a2 as re}from"./antd-15ac76ed.js";import{bP as pe,aC as me,a7 as ce,_ as fe}from"./index.js";import{U as ve}from"./UploadBox-636ecf02.js";import{a as w}from"./assign-37f1c13d.js";import"./index-316f6ffb.js";import"./useWindowSizeFn-13b1b8a2.js";import"./useRender-21ce56fb.js";import"./useForm-dea3ed18.js";import"./uniqBy-92d3bc7f.js";import"./index-f4fc48e6.js";import"./useTabs-2b062e85.js";import"./download-03e71dd5.js";import"./index-5d49b7a7.js";import"./SearchBox-22bb02d6.js";import"./DictSelectBox.vue_vue_type_script_setup_true_lang-e03e9fe8.js";import"./Dialog-0a006d82.js";import"./OrganDialog-dd1023ce.js";import"./sortable.esm-4ae27e0b.js";import"./dict-c04c0dd8.js";const _e=g=>(ae("data-v-5dcee724"),g=g(),te(),g),be={class:"load"},ge={class:"process-box"},he={class:"header-box"},Ce=_e(()=>y("div",{class:"header-left"},"巡检仪",-1)),Ie={key:0,class:"header-right"},De={class:"content"},ye={class:"clearfix",style:{"padding-left":"15px"}},Ye=K({__name:"detail",setup(g){const a=z({spinning:!1}),v=D([]),x=D(!1),h=D(),o=D(!0),C=z({});C.title="巡检仪设置",C.infoItems=[];const I=W(),{currentRoute:m}=I,_=q(m).query;function P(){ne({}).then(s=>{s.result&&s.result.length>0&&s.result.forEach(l=>{v.value.push({value:l.powerStationName,lable:l.id})})})}function V(s,l){a.stationId=l.lable}const N=D();function E(){me()}function L(){a.spinning=!0;try{N.value.validateFields().then(()=>{oe(a).then(s=>{a.id=s,O({id:s}).then(l=>{w(a,l.result),U()}),re.success("保存成功"),ce.getInstance().sendMsg("inspectionInstrument",{})})})}catch(s){console.log("error",s)}finally{a.spinning=!1}}const[A,{reload:we}]=ue(w({dataSource:h,columns:le},se)),U=()=>f(this,null,function*(){h.value=yield j({})}),j=s=>f(this,null,function*(){const l=yield G(s);return(yield de(l)).result}),G=s=>f(this,null,function*(){const l=yield T();return{inspectionInstrumentId:s.inspectionInstrumentId?s.id:l+""}});X(()=>f(this,null,function*(){_.id=yield T(),_.id?yield O({id:_.id}).then(s=>{w(a,s.result)}):(w(a,_),a.spinning=!1,a.status=1),o.value=_.disabledInput!="false",yield H(),U(),P(),(a.bizFileId==null||a.bizFileId==null||a.bizFileId=="")&&Q()}));const T=()=>f(this,null,function*(){let s=_.id;return!s&&a.id&&(_.id=a.id,s=a.id),s}),H=()=>f(this,null,function*(){C.title="巡检仪设置"}),Q=()=>f(this,null,function*(){pe().then(s=>{a.bizFileId=s})});return(s,l)=>{const M=p("a-button"),c=p("a-input"),d=p("a-form-item"),i=p("a-col"),b=p("a-row"),S=p("a-date-picker"),Z=p("a-select"),k=p("a-card"),$=p("a-form"),J=p("a-spin");return B(),F("div",be,[e(J,{spinning:a.spinning,tip:"Loading..."},{default:t(()=>[y("div",ge,[y("div",he,[Ce,o.value?ee("",!0):(B(),F("div",Ie,[e(M,{onClick:E},{default:t(()=>[R(" 取消")]),_:1}),e(M,{class:"!ml-4",type:"primary",onClick:L,loading:x.value},{default:t(()=>[R(" 保存")]),_:1},8,["loading"])]))]),y("div",De,[e($,{ref_key:"formRef",ref:N,model:a,labelAlign:"right",autocomplete:"off"},{default:t(()=>[e(k,{title:"基本信息",bordered:!1},{default:t(()=>[e(b,{gutter:24},{default:t(()=>[u(e(i,{span:12},{default:t(()=>[e(d,{name:"assetCode",label:"资产编号",labelCol:{span:6},rules:[{required:!1,message:"请输入资产编号"}]},{default:t(()=>[e(c,{disabled:"",value:a.assetCode,"onUpdate:value":l[0]||(l[0]=n=>a.assetCode=n)},null,8,["value"])]),_:1})]),_:1},512),[[r,!0]]),u(e(i,{span:12},{default:t(()=>[e(d,{name:"deviceType",label:"智能设备类型",labelCol:{span:6},rules:[{required:!0,message:"请输入智能设备类型"}]},{default:t(()=>[e(c,{value:a.deviceType,"onUpdate:value":l[1]||(l[1]=n=>a.deviceType=n),placeholder:"请输入智能设备类型",disabled:""},null,8,["value"])]),_:1})]),_:1},512),[[r,!0]])]),_:1}),e(b,{gutter:24},{default:t(()=>[u(e(i,{span:12},{default:t(()=>[e(d,{name:"deviceCode",label:"设备编号",labelCol:{span:6},rules:[{required:!0,message:"请输入设备编号"}]},{default:t(()=>[e(c,{disabled:o.value,value:a.deviceCode,"onUpdate:value":l[2]||(l[2]=n=>a.deviceCode=n),placeholder:"请输入设备编号",maxlength:100},null,8,["disabled","value"])]),_:1})]),_:1},512),[[r,!0]]),u(e(i,{span:12},{default:t(()=>[e(d,{name:"brand",label:"品牌",labelCol:{span:6},rules:[{required:!0,message:"请输入品牌"}]},{default:t(()=>[e(c,{value:a.brand,"onUpdate:value":l[3]||(l[3]=n=>a.brand=n),placeholder:"请输入品牌",disabled:o.value,maxlength:50},null,8,["value","disabled"])]),_:1})]),_:1},512),[[r,!0]])]),_:1}),e(b,{gutter:24},{default:t(()=>[u(e(i,{span:12},{default:t(()=>[e(d,{name:"model",label:"型号",labelCol:{span:6},rules:[{required:!0,message:"请输入型号"}]},{default:t(()=>[e(c,{value:a.model,"onUpdate:value":l[4]||(l[4]=n=>a.model=n),placeholder:"请输入型号",disabled:o.value,maxlength:50},null,8,["value","disabled"])]),_:1})]),_:1},512),[[r,!0]]),u(e(i,{span:12},{default:t(()=>[e(d,{name:"simNumber",label:"SIM卡号",labelCol:{span:6},rules:[{required:!0,message:"请输入SIM卡号"}]},{default:t(()=>[e(c,{disabled:o.value,value:a.simNumber,"onUpdate:value":l[5]||(l[5]=n=>a.simNumber=n),placeholder:"请输入SIM卡号",maxlength:50},null,8,["disabled","value"])]),_:1})]),_:1},512),[[r,!0]])]),_:1}),e(b,{gutter:24},{default:t(()=>[u(e(i,{span:12},{default:t(()=>[e(d,{name:"purchaseDate",label:"购买日期",labelCol:{span:6},rules:[{required:!0,message:"请选择购买日期"}]},{default:t(()=>[e(S,{value:a.purchaseDate,"onUpdate:value":l[6]||(l[6]=n=>a.purchaseDate=n),format:"YYYY-MM-DD","value-format":"YYYY-MM-DD 00:00:00",style:{width:"100%"},disabled:o.value},null,8,["value","disabled"])]),_:1})]),_:1},512),[[r,!0]]),u(e(i,{span:12},{default:t(()=>[e(d,{name:"startDate",label:"启用日期",labelCol:{span:6},rules:[{required:!0,message:"请选择启用日期"}]},{default:t(()=>[e(S,{value:a.startDate,"onUpdate:value":l[7]||(l[7]=n=>a.startDate=n),format:"YYYY-MM-DD","value-format":"YYYY-MM-DD 00:00:00",style:{width:"100%"},disabled:o.value},null,8,["value","disabled"])]),_:1})]),_:1},512),[[r,!0]])]),_:1}),e(b,{gutter:24},{default:t(()=>[u(e(i,{span:12},{default:t(()=>[e(d,{name:"endDate",label:"有效期止",labelCol:{span:6},rules:[{required:!0,message:"请选择有效期止"}]},{default:t(()=>[e(S,{value:a.endDate,"onUpdate:value":l[8]||(l[8]=n=>a.endDate=n),format:"YYYY-MM-DD","value-format":"YYYY-MM-DD 00:00:00",style:{width:"100%"},disabled:o.value},null,8,["value","disabled"])]),_:1})]),_:1},512),[[r,!0]]),u(e(i,{span:12},{default:t(()=>[e(d,{name:"stationName",label:"电站",labelCol:{span:6},rules:[{required:!0,message:"请选择电站"}]},{default:t(()=>[e(Z,{value:a.stationName,"onUpdate:value":l[9]||(l[9]=n=>a.stationName=n),"allow-clear":"","show-search":"",style:{width:"100%"},placeholder:"请选择电站",options:v.value,disabled:o.value,onChange:V},null,8,["value","options","disabled"])]),_:1})]),_:1},512),[[r,!0]])]),_:1}),e(b,{gutter:24},{default:t(()=>[u(e(i,{span:12},{default:t(()=>[e(d,{name:"deviceName",label:"设备名称",labelCol:{span:6},rules:[{required:!1,message:"设备名称"}]},{default:t(()=>[e(c,{maxlength:50,disabled:o.value,placeholder:"请输入设备名称",value:a.deviceName,"onUpdate:value":l[10]||(l[10]=n=>a.deviceName=n)},null,8,["disabled","value"])]),_:1})]),_:1},512),[[r,!0]])]),_:1}),e(b,{gutter:24},{default:t(()=>[u(e(i,{span:24},{default:t(()=>[e(d,{name:"remark",label:"备注",labelCol:{span:3},rules:[{required:!1,message:"备注"}]},{default:t(()=>[e(c,{maxlength:500,disabled:o.value,value:a.remark,"onUpdate:value":l[11]||(l[11]=n=>a.remark=n)},null,8,["disabled","value"])]),_:1})]),_:1},512),[[r,!0]])]),_:1})]),_:1}),e(k,{title:"电站记录",bordered:!1},{default:t(()=>[e(q(ie),{onRegister:q(A)},null,8,["onRegister"])]),_:1}),e(k,{title:"附件信息",bordered:!1},{default:t(()=>[y("div",ye,[e(ve,{width:800,height:550,maxCount:20,maxSize:100*1024*1024,application:"base",module:"inspectionInstrument",vmode:o.value?"view":"box",bizId:a.bizFileId},null,8,["vmode","bizId"])])]),_:1})]),_:1},8,["model"])])])]),_:1},8,["spinning"])])}}});const We=fe(Ye,[["__scopeId","data-v-5dcee724"]]);export{We as default};
//# sourceMappingURL=detail-3d2c0ebe.js.map
