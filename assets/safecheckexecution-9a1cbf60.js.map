{"version":3,"file":"safecheckexecution-9a1cbf60.js","sources":["../../src/views/po/safety/safecheckexecution/safecheckexecution.ts"],"sourcesContent":["import { BasicColumn, FormSchema, useRender } from '@/components/Table';\nimport { defHttp } from '@/utils/http/axios';\nimport { useUserStore } from '/@/store/modules/user';\n\nenum Api {\n  getSafeCheckTemplatePage = '/po/safe-check-execution/page',\n  // deleteTemplateData = '/po/safe-check-execution/delete',\n  getExecutionData = '/po/safe-check-execution/get',\n  exportTemplateData = '/po/safe-check-execution/export-excel',\n}\n\n// 查询安全检查模版列表\nexport function getSafeCheckTemplatePage(params) {\n  return defHttp.get({ url: Api.getSafeCheckTemplatePage, params });\n}\n\n// // 删除安全检查模版\n// export function deleteSafeCheckTemplate(id: string) {\n//   return defHttp.delete({ url: Api.deleteTemplateData + '?id=' + id });\n// }\n\n// 删除安全检查模版\nexport function getExecutionData(params) {\n  return defHttp.delete({ url: Api.getExecutionData, params });\n}\n\n// 导出安全检查模版 Excel\nexport function exportSafeCheckTemplate(params) {\n  return defHttp.download(\n    { url: Api.exportTemplateData, params },\n    { isReturnNativeResponse: true },\n  );\n}\nconst statusColor = {\n  0: '#dc0000', // 草稿\n  1: '#338ed1', // 处理中\n  2: '#30ca5a', // 通过\n  3: '#929292', // 不通过\n  4: '#929292', // 已取消\n  5: '#929292', // 已终止\n  6: '#fda941', // 退回/驳回\n};\n\nexport function getColumns(type) {\n  const columns: BasicColumn[] = [\n    { title: '单据编号', dataIndex: 'billCode', width: 180,sorter: true,resizable: true },\n    { title: '所属公司', dataIndex: 'stationOrganName',align: 'left',headAlign:'center',\n     width: 160,sorter: true,resizable: true,ifShow:useUserStore().isMultiOrganization },\n    { title: '电站名称', dataIndex: 'stationName',align: 'left',headAlign:'center',\n     width: 160,sorter: true,resizable: true },\n  ];\n  const columns2: BasicColumn[] = [\n    {\n      title: '检查频率',\n      dataIndex: 'checkPeriod',\n      width: 160,\n      sorter: true,resizable: true,\n      customRender: (item) => {\n        if (item.record.safetyCheckType == CheckTypeNum.REGULAR) {\n          return item.record.checkPeriodText + item.record.num + '次';\n        }\n        return '';\n      },\n    },\n  ];\n  const columns3: BasicColumn[] = [\n    { title: '主题', dataIndex: 'subject',align: 'left',headAlign:'center', width: 200,sorter: true,resizable: true },\n    { title: '负责人', dataIndex: 'responsiblePersonName', width: 100,sorter: true,resizable: true },\n    { title: '检查人', dataIndex: 'checkerName', width: 100,sorter: true,resizable: true },\n    { title: '检查日期', dataIndex: 'checkDate', width: 160,sorter: true,resizable: true },\n    { title: '检查项次', dataIndex: 'checkNum',align: 'right',headAlign:'center', width: 100,sorter: true,resizable: true },\n    { title: '整改项次', dataIndex: 'rectification',align: 'right',headAlign:'center', width: 100,sorter: true,resizable: true },\n    {\n      title: '审批状态',\n      dataIndex: 'statusText',\n      width: 100,\n      sorter: true,resizable: true,\n      customRender: ({ text, record }) => {\n        return useRender.renderTag(text, statusColor[record.status]);\n      },\n    },\n    { title: '创建人', dataIndex: 'personMemberName', width: 100,sorter: true,resizable: true },\n    { title: '创建时间', dataIndex: 'fillinDate',sorter: true,resizable: true },\n  ];\n\n  if (type === CheckTypeNum.SPECIAL) {\n    return columns.concat(columns3);\n  } else {\n    return columns.concat(columns2).concat(columns3);\n  }\n}\n\nexport const searchFormSchema: FormSchema[] = [\n  {\n    label: '单据编号',\n    field: 'billCode',\n    component: 'Input',\n    colProps: { span: 8 },\n  },\n  {\n    label: '主题',\n    field: 'subject',\n    component: 'Input',\n    colProps: { span: 8 },\n  },\n  {\n    label: '状态',\n    field: 'status',\n    component: 'DictSelectBox',\n    componentProps: {\n      type: 'bpm_process_instance_result',\n    },\n    colProps: { span: 8 },\n  },\n];\n\n//检查类别\nexport const CheckTypeNum = {\n  //专项检查\n  SPECIAL: '2',\n  //定期检查 1\n  REGULAR: '1',\n};\n"],"names":["getSafeCheckTemplatePage","params","defHttp","exportSafeCheckTemplate","statusColor","getColumns","type","columns","useUserStore","columns2","item","CheckTypeNum","columns3","text","record","useRender","searchFormSchema"],"mappings":"uOAYO,SAASA,EAAyBC,EAAQ,CAC/C,OAAOC,EAAQ,IAAI,CAAE,IAAK,gCAA8B,OAAAD,EAAQ,CAClE,CAaO,SAASE,EAAwBF,EAAQ,CAC9C,OAAOC,EAAQ,SACb,CAAE,IAAK,wCAAwB,OAAAD,CAAO,EACtC,CAAE,uBAAwB,EAAK,CAAA,CAEnC,CACA,MAAMG,EAAc,CAClB,EAAG,UACH,EAAG,UACH,EAAG,UACH,EAAG,UACH,EAAG,UACH,EAAG,UACH,EAAG,SACL,EAEO,SAASC,EAAWC,EAAM,CAC/B,MAAMC,EAAyB,CAC7B,CAAE,MAAO,OAAQ,UAAW,WAAY,MAAO,IAAI,OAAQ,GAAK,UAAW,EAAK,EAChF,CAAE,MAAO,OAAQ,UAAW,mBAAmB,MAAO,OAAO,UAAU,SACtE,MAAO,IAAI,OAAQ,GAAK,UAAW,GAAK,OAAOC,IAAe,mBAAoB,EACnF,CAAE,MAAO,OAAQ,UAAW,cAAc,MAAO,OAAO,UAAU,SACjE,MAAO,IAAI,OAAQ,GAAK,UAAW,EAAK,CAAA,EAErCC,EAA0B,CAC9B,CACE,MAAO,OACP,UAAW,cACX,MAAO,IACP,OAAQ,GAAK,UAAW,GACxB,aAAeC,GACTA,EAAK,OAAO,iBAAmBC,EAAa,QACvCD,EAAK,OAAO,gBAAkBA,EAAK,OAAO,IAAM,IAElD,EAEX,CAAA,EAEIE,EAA0B,CAC9B,CAAE,MAAO,KAAM,UAAW,UAAU,MAAO,OAAO,UAAU,SAAU,MAAO,IAAI,OAAQ,GAAK,UAAW,EAAK,EAC9G,CAAE,MAAO,MAAO,UAAW,wBAAyB,MAAO,IAAI,OAAQ,GAAK,UAAW,EAAK,EAC5F,CAAE,MAAO,MAAO,UAAW,cAAe,MAAO,IAAI,OAAQ,GAAK,UAAW,EAAK,EAClF,CAAE,MAAO,OAAQ,UAAW,YAAa,MAAO,IAAI,OAAQ,GAAK,UAAW,EAAK,EACjF,CAAE,MAAO,OAAQ,UAAW,WAAW,MAAO,QAAQ,UAAU,SAAU,MAAO,IAAI,OAAQ,GAAK,UAAW,EAAK,EAClH,CAAE,MAAO,OAAQ,UAAW,gBAAgB,MAAO,QAAQ,UAAU,SAAU,MAAO,IAAI,OAAQ,GAAK,UAAW,EAAK,EACvH,CACE,MAAO,OACP,UAAW,aACX,MAAO,IACP,OAAQ,GAAK,UAAW,GACxB,aAAc,CAAC,CAAE,KAAAC,EAAM,OAAAC,KACdC,EAAU,UAAUF,EAAMT,EAAYU,EAAO,MAAM,CAAC,CAE/D,EACA,CAAE,MAAO,MAAO,UAAW,mBAAoB,MAAO,IAAI,OAAQ,GAAK,UAAW,EAAK,EACvF,CAAE,MAAO,OAAQ,UAAW,aAAa,OAAQ,GAAK,UAAW,EAAK,CAAA,EAGpE,OAAAR,IAASK,EAAa,QACjBJ,EAAQ,OAAOK,CAAQ,EAEvBL,EAAQ,OAAOE,CAAQ,EAAE,OAAOG,CAAQ,CAEnD,CAEO,MAAMI,EAAiC,CAC5C,CACE,MAAO,OACP,MAAO,WACP,UAAW,QACX,SAAU,CAAE,KAAM,CAAE,CACtB,EACA,CACE,MAAO,KACP,MAAO,UACP,UAAW,QACX,SAAU,CAAE,KAAM,CAAE,CACtB,EACA,CACE,MAAO,KACP,MAAO,SACP,UAAW,gBACX,eAAgB,CACd,KAAM,6BACR,EACA,SAAU,CAAE,KAAM,CAAE,CACtB,CACF,EAGaL,EAAe,CAE1B,QAAS,IAET,QAAS,GACX"}