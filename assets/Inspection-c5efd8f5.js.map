{"version":3,"file":"Inspection-c5efd8f5.js","sources":["../../src/views/da/groupOperation/operation/Inspection.vue"],"sourcesContent":["<template>\n  <div class=\"inspection\">\n    <SmallModule title=\"巡检统计\">\n      <template #titleRight>\n        <div class=\"right-title-layout\">\n          <a-radio-group\n            class=\"operation-screen-radio-group\"\n            v-model:value=\"searchInfo.dateRange\"\n            size=\"small\"\n            @change=\"handleInspectionChange\"\n          >\n            <a-radio-button value=\"today\">当日</a-radio-button>\n            <a-radio-button value=\"thisMonth\">本月</a-radio-button>\n          </a-radio-group>\n          <!-- <div class=\"detail-text\"><span class=\"text\" @click=\"toBiReport\">详情</span><span class=\"arrow\">&gt;</span></div> -->\n        </div>\n      </template>\n      <template #content>\n        <div class=\"content-layout\">\n          <div class=\"data-layout\">\n            <DataIndicator label=\"应巡检\" @click=\"toBiReport\" :value=\"indexData.planCount\" />\n            <DataIndicator label=\"已巡检\" @click=\"toBiReport\" :value=\"indexData.inspectionCount\" />\n            <DataIndicator label=\"隐患\" @click=\"toBiReport\" :value=\"indexData.hiddenCount\" />\n          </div>\n          <div style=\"transform: scale(0.85); transform-origin: 0 0\">\n            <EchartLineBarChart\n              :data=\"inspectionChartData\"\n              :colors=\"inspectionChartData.colors\"\n              :width=\"`26.14vw`\"\n              :height=\"`23.36vh`\"\n              :category=\"inspectionChartData.categories\"\n              ybgcolor=\"#01B7D730\"\n              :name=\"inspectionChartData.chartSeriesName\"\n              :dataZoomDisabled=\"false\"\n              :dataZoomMaxValueSpan=\"inspectionChartData.categories.length\"\n              :dataZoomDefaultValueRange=\"[0, 4]\"\n            />\n          </div>\n        </div>\n      </template>\n    </SmallModule>\n  </div>\n</template>\n\n<script lang=\"ts\" setup>\n  import SmallModule from '/@/components/Framework/OperationScreen/SmallModule.vue';\n  import DataIndicator from '/@/components/Framework/OperationScreen/DataIndicator.vue';\n  import EchartLineBarChart from '/@/components/Framework/Chart/EchartLineBarChart.vue';\n  import { reactive, UnwrapRef, ref, onMounted } from 'vue';\n  import { assign } from 'lodash-es';\n  import { getInspectionData } from './data';\n  import { addTabPage } from '@/utils/route';\n\n  const searchInfo: UnwrapRef<any> = reactive({});\n  const indexData: UnwrapRef<any> = reactive({});\n\n  onMounted(() => {\n    searchInfo.dateRange = 'today';\n    queryInspectionData();\n  });\n\n  const inspectionChartData = ref({\n    barData: [[], [], []],\n    categories: [],\n    units: ['(万Kw.h)', '(%)', '(%)'],\n    colors: [\n      ['#488FF6', '#60D1F3'],\n      ['#078c5d', '#68e4b8'],\n      ['#E59837', '#fae895'],\n      ['#e59837', '#fae895'],\n      ['#078c5d', '#68e4b8'],\n    ],\n    chartSeriesName: [['应巡检', '已巡检', '隐患']],\n  });\n\n  const handleInspectionChange = (e: Event) => {\n    searchInfo.dateRange = e.target.value;\n    // alert(searchInfo.dateRange);\n    queryInspectionData();\n  };\n\n  const queryInspectionData = async () => {\n    searchInfo.selectValue = searchInfo.dateRange;\n    let data = await getInspectionData(searchInfo);\n    if (data.result) {\n      assign(indexData, data.result);\n      inspectionChartData.value.barData = data.result.barData;\n      inspectionChartData.value.categories = data.result.categories;\n    }\n  };\n\n  // 穿透方法\n  const toBiReport = async (record: any) => {\n    // 参数处理\n    let url = '/bi/inspection/index';\n    let param = {\n      jumpFlag: 'largeScreen',\n      dateType: searchInfo.dateRange == 'today' ? 'day' : 'month',\n    };\n    addTabPage(url, '', param);\n  };\n</script>\n\n<style lang=\"less\" scoped>\n  .right-title-layout {\n    display: flex;\n    align-items: center;\n    padding-right: 0.16rem;\n\n    .detail-text {\n      margin-left: 0.14rem;\n      color: #fff;\n      font-size: 0.12rem;\n      line-height: 1;\n      cursor: pointer;\n\n      .text {\n        margin-right: 0.04rem;\n      }\n\n      .arrow {\n        opacity: 0.6;\n      }\n    }\n  }\n\n  .content-layout {\n    height: 100%;\n    padding: 0 0.14rem;\n\n    .data-layout {\n      display: flex;\n      align-items: flex-end;\n      justify-content: space-between;\n      height: 20.74%;\n      margin-top: -0.11rem;\n      padding: 0 0.76rem;\n    }\n  }\n</style>\n"],"names":["searchInfo","reactive","indexData","onMounted","queryInspectionData","inspectionChartData","ref","handleInspectionChange","e","__async","data","getInspectionData","assign","toBiReport","record","url","param","addTabPage"],"mappings":"g6BAqDQ,MAAAA,EAA6BC,EAAS,CAAA,CAAE,EACxCC,EAA4BD,EAAS,CAAA,CAAE,EAE7CE,EAAU,IAAM,CACdH,EAAW,UAAY,QACHI,GAAA,CACrB,EAED,MAAMC,EAAsBC,EAAI,CAC9B,QAAS,CAAC,CAAA,EAAI,CAAC,EAAG,EAAE,EACpB,WAAY,CAAC,EACb,MAAO,CAAC,UAAW,MAAO,KAAK,EAC/B,OAAQ,CACN,CAAC,UAAW,SAAS,EACrB,CAAC,UAAW,SAAS,EACrB,CAAC,UAAW,SAAS,EACrB,CAAC,UAAW,SAAS,EACrB,CAAC,UAAW,SAAS,CACvB,EACA,gBAAiB,CAAC,CAAC,MAAO,MAAO,IAAI,CAAC,CAAA,CACvC,EAEKC,EAA0BC,GAAa,CAChCR,EAAA,UAAYQ,EAAE,OAAO,MAEZJ,GAAA,EAGhBA,EAAsB,IAAYK,EAAA,sBACtCT,EAAW,YAAcA,EAAW,UAChC,IAAAU,EAAO,MAAMC,EAAkBX,CAAU,EACzCU,EAAK,SACAE,EAAAV,EAAWQ,EAAK,MAAM,EACTL,EAAA,MAAM,QAAUK,EAAK,OAAO,QAC5BL,EAAA,MAAM,WAAaK,EAAK,OAAO,WACrD,GAIIG,EAAoBC,GAAgBL,EAAA,sBAExC,IAAIM,EAAM,uBACNC,EAAQ,CACV,SAAU,cACV,SAAUhB,EAAW,WAAa,QAAU,MAAQ,OAAA,EAE3CiB,EAAAF,EAAK,GAAIC,CAAK,CAAA"}