{"version":3,"file":"HiddenWorkOrder.vue_vue_type_script_setup_true_lang-f6f042af.js","sources":["../../src/views/po/workorder/HiddenWorkOrder.vue"],"sourcesContent":["<template>\n  <a-card title=\"基本信息\" :bordered=\"false\">\n    <a-row :gutter=\"32\">\n      <a-col v-show=\"true\" :span=\"12\">\n        <a-form-item name=\"stationName\" label=\"电站名称\" :labelCol=\"{ class: 'detail-label-8' }\">\n          <a-input v-model:value=\"childFormState.stationName\" disabled />\n        </a-form-item>\n      </a-col>\n    </a-row>\n\n    <a-row :gutter=\"32\">\n      <a-col v-show=\"true\" :span=\"12\">\n        <a-form-item\n          :name=\"['hidden', 'hiddenDangerType']\"\n          label=\"隐患类型\"\n          :labelCol=\"{ class: 'detail-label-8' }\"\n          :rules=\"[{ required: false, message: '请选择隐患类型' }]\"\n        >\n          <DictSelectBox\n            v-model:value=\"childFormState.hidden.hiddenDangerType\"\n            :type=\"`hidden_danger_type`\"\n            disabled\n          />\n        </a-form-item>\n      </a-col>\n      <a-col v-show=\"true\" :span=\"12\">\n        <a-form-item\n          name=\"sourceCode\"\n          label=\"来源任务\"\n          :labelCol=\"{ class: 'detail-label-8' }\"\n          :rules=\"[{ required: false }]\"\n        >\n          <a @click=\"clickDangerHyperlink\">{{ childFormState.sourceCode }}</a>\n        </a-form-item>\n      </a-col>\n    </a-row>\n\n    <a-row :gutter=\"32\">\n      <a-col v-show=\"true\" :span=\"12\">\n        <a-form-item\n          :name=\"['hidden', 'findDate']\"\n          label=\"发现时间\"\n          :labelCol=\"{ class: 'detail-label-8' }\"\n          :rules=\"[{ required: false, message: '请输入发现时间' }]\"\n        >\n          <a-date-picker\n            v-model:value=\"childFormState.hidden.findDate\"\n            show-time\n            format=\"YYYY-MM-DD HH:mm\"\n            value-format=\"YYYY-MM-DD HH:mm\"\n            :style=\"`width: 100%`\"\n            disabled\n          />\n        </a-form-item>\n      </a-col>\n      <a-col v-show=\"true\" :span=\"12\">\n        <a-form-item\n          :name=\"['hidden', 'findByName']\"\n          label=\"发现人\"\n          :labelCol=\"{ class: 'detail-label-8' }\"\n          :rules=\"[{ required: false, message: '请选择发现人' }]\"\n        >\n          <a-select\n            v-model:value=\"childFormState.hidden.findByName\"\n            show-search\n            allow-clear\n            style=\"width: 100%\"\n            :options=\"stationPersonOptions\"\n            @change=\"handleChangefindByName\"\n            disabled\n          />\n        </a-form-item>\n      </a-col>\n    </a-row>\n\n    <a-row :gutter=\"32\">\n      <a-col v-show=\"true\" :span=\"24\">\n        <a-form-item\n          :name=\"['hidden', 'checkContent']\"\n          label=\"检查内容\"\n          :labelCol=\"{ class: 'detail-label-8' }\"\n          :rules=\"[{ required: false, message: '请输入检查内容' }]\"\n        >\n          <a-textarea\n            v-model:value=\"childFormState.hidden.checkContent\"\n            show-count\n            :rows=\"4\"\n            :maxlength=\"1000\"\n            disabled\n          />\n        </a-form-item>\n      </a-col>\n    </a-row>\n\n    <a-row :gutter=\"32\">\n      <a-col v-show=\"true\" :span=\"24\">\n        <a-form-item\n          :name=\"['hidden', 'result']\"\n          label=\"检查情况\"\n          :labelCol=\"{ class: 'detail-label-8' }\"\n          :rules=\"[{ required: false, message: '请输入检查情况' }]\"\n        >\n          <a-input v-model:value=\"childFormState.hidden.result\" :maxlength=\"200\" disabled />\n        </a-form-item>\n      </a-col>\n    </a-row>\n\n    <a-row :gutter=\"32\">\n      <a-col v-show=\"true\" :span=\"24\">\n        <a-form-item\n          :name=\"['hidden', 'planMeasure']\"\n          label=\"计划整改措施\"\n          :labelCol=\"{ class: 'detail-label-8' }\"\n          :rules=\"[{ required: true, message: '请输入计划整改措施' }]\"\n        >\n          <a-textarea\n            v-model:value=\"childFormState.hidden.planMeasure\"\n            show-count\n            :rows=\"4\"\n            :maxlength=\"1000\"\n            :disabled=\"disabledInput\"\n          />\n        </a-form-item>\n      </a-col>\n    </a-row>\n\n    <a-row :gutter=\"32\">\n      <a-col v-show=\"true\" :span=\"24\">\n        <a-form-item\n          name=\"subject\"\n          label=\"工单主题\"\n          :labelCol=\"{ class: 'detail-label-8' }\"\n          :rules=\"[{ required: true, message: '请输入工单主题' }]\"\n        >\n          <a-input\n            v-model:value=\"childFormState.subject\"\n            :maxlength=\"100\"\n            :disabled=\"disabledInput\"\n          />\n        </a-form-item>\n      </a-col>\n    </a-row>\n\n    <a-row :gutter=\"32\">\n      <a-col v-show=\"true\" :span=\"12\">\n        <a-form-item\n          name=\"planStartDate\"\n          label=\"计划开始时间\"\n          :labelCol=\"{ class: 'detail-label-8' }\"\n          :rules=\"[{ required: true, message: '请输入计划开始时间' }]\"\n        >\n          <a-date-picker\n            v-model:value=\"childFormState.planStartDate\"\n            show-time\n            format=\"YYYY-MM-DD HH:mm\"\n            value-format=\"YYYY-MM-DD HH:mm\"\n            :style=\"`width: 100%`\"\n            :disabled=\"disabledInput\"\n          />\n        </a-form-item>\n      </a-col>\n      <a-col v-show=\"true\" :span=\"12\">\n        <a-form-item\n          name=\"planEndDate\"\n          label=\"计划完成时间\"\n          :labelCol=\"{ class: 'detail-label-8' }\"\n          :rules=\"[{ required: true, message: '请输入计划完成时间' }]\"\n        >\n          <a-date-picker\n            v-model:value=\"childFormState.planEndDate\"\n            show-time\n            format=\"YYYY-MM-DD HH:mm\"\n            value-format=\"YYYY-MM-DD HH:mm\"\n            :style=\"`width: 100%`\"\n            :disabled=\"disabledInput\"\n          />\n        </a-form-item>\n      </a-col>\n    </a-row>\n\n    <a-row :gutter=\"32\">\n      <a-col v-show=\"true\" :span=\"12\">\n        <a-form-item\n          name=\"grade\"\n          label=\"工单级别\"\n          :labelCol=\"{ class: 'detail-label-8' }\"\n          :rules=\"[{ required: true, message: '请选择工单级别' }]\"\n        >\n          <DictSelectBox\n            v-model:value=\"childFormState.grade\"\n            :type=\"`work_order_grade`\"\n            :disabled=\"disabledInput\"\n          />\n        </a-form-item>\n      </a-col>\n      <a-col v-show=\"true\" :span=\"12\">\n        <a-form-item\n          name=\"planHandleByName\"\n          label=\"计划处理人\"\n          :labelCol=\"{ class: 'detail-label-8' }\"\n          :rules=\"[{ required: true, message: '请选择计划处理人' }]\"\n        >\n          <a-select\n            v-model:value=\"childFormState.planHandleByName\"\n            show-search\n            allow-clear\n            style=\"width: 100%\"\n            :options=\"stationPersonOptions\"\n            @change=\"handleChangePlanHandleByName\"\n            :disabled=\"disabledInput\"\n          />\n        </a-form-item>\n      </a-col>\n    </a-row>\n\n    <a-row :gutter=\"32\">\n      <a-col v-show=\"true\" :span=\"12\">\n        <a-form-item\n          name=\"planConfirmByName\"\n          label=\"计划确认人\"\n          :labelCol=\"{ class: 'detail-label-8' }\"\n          :rules=\"[{ required: true, message: '请选择计划确认人' }]\"\n        >\n          <a-select\n            v-model:value=\"childFormState.planConfirmByName\"\n            show-search\n            allow-clear\n            style=\"width: 100%\"\n            :options=\"stationPersonOptions\"\n            @change=\"handleChangePlanConfirmByName\"\n            :disabled=\"disabledInput\"\n          />\n        </a-form-item>\n      </a-col>\n      <a-col v-show=\"true\" :span=\"12\">\n        <a-form-item\n          name=\"isInvoicing\"\n          label=\"开具两票\"\n          :labelCol=\"{ class: 'detail-label-8' }\"\n          :rules=\"[{ required: true, message: '请选择开具两票' }]\"\n        >\n          <DictSelectBox\n            v-model:value=\"childFormState.isInvoicing\"\n            :type=\"`yes_or_no`\"\n            :disabled=\"disabledInput\"\n          />\n        </a-form-item>\n      </a-col>\n    </a-row>\n  </a-card>\n\n  <a-card title=\"处理过程\" :bordered=\"false\" v-if=\"showProcess\">\n    <div id=\"more-tab-content\" class=\"tab-table-div\">\n      <a-tabs v-model:activeKey=\"activeKey\">\n        <a-tab-pane class=\"tab-pane-form\" key=\"1\" tab=\"处理过程\">\n          <a-row :gutter=\"32\">\n            <a-col v-show=\"true\" :span=\"12\">\n              <a-form-item\n                :name=\"['hidden', 'confirmType']\"\n                label=\"隐患类型确认\"\n                :labelCol=\"{ class: 'detail-label-8' }\"\n                :rules=\"[{ required: true, message: '请选择隐患类型确认' }]\"\n              >\n                <DictSelectBox\n                  v-model:value=\"childFormState.hidden.confirmType\"\n                  :type=\"`hidden_danger_type`\"\n                  :disabled=\"disabledProcessInput\"\n                />\n              </a-form-item>\n            </a-col>\n          </a-row>\n\n          <a-row :gutter=\"32\">\n            <a-col v-show=\"true\" :span=\"24\">\n              <a-form-item\n                :name=\"['hidden', 'handleMeasure']\"\n                label=\"整改措施与处理\"\n                :labelCol=\"{ class: 'detail-label-8' }\"\n                :rules=\"[{ required: true, message: '请输入整改措施与处理' }]\"\n              >\n                <a-textarea\n                  v-model:value=\"childFormState.hidden.handleMeasure\"\n                  show-count\n                  :rows=\"4\"\n                  :maxlength=\"1000\"\n                  :disabled=\"disabledProcessInput\"\n                />\n              </a-form-item>\n            </a-col>\n          </a-row>\n\n          <a-row :gutter=\"32\">\n            <a-col v-show=\"true\" :span=\"12\">\n              <a-form-item\n                :name=\"['hidden', 'rectificationDate']\"\n                label=\"整改时间\"\n                :labelCol=\"{ class: 'detail-label-8' }\"\n                :rules=\"[{ required: true, message: '请输入整改时间' }]\"\n              >\n                <a-date-picker\n                  v-model:value=\"childFormState.hidden.rectificationDate\"\n                  show-time\n                  format=\"YYYY-MM-DD HH:mm\"\n                  value-format=\"YYYY-MM-DD HH:mm\"\n                  :style=\"`width: 100%`\"\n                  :disabled=\"disabledProcessInput\"\n                />\n              </a-form-item>\n            </a-col>\n            <a-col v-show=\"true\" :span=\"12\">\n              <a-form-item\n                name=\"handleByName\"\n                label=\"处理人\"\n                :labelCol=\"{ class: 'detail-label-8' }\"\n                :rules=\"[{ required: true, message: '请选择处理人' }]\"\n              >\n                <a-select\n                  v-model:value=\"childFormState.handleByName\"\n                  show-search\n                  allow-clear\n                  style=\"width: 100%\"\n                  :options=\"stationPersonOptions\"\n                  @change=\"handleChangeHandleByName\"\n                  :disabled=\"disabledProcessInput\"\n                />\n              </a-form-item>\n            </a-col>\n          </a-row>\n        </a-tab-pane>\n        <a-tab-pane\n          class=\"tab-pane-table\"\n          v-if=\"childFormState.isInvoicing === '1'\"\n          key=\"2\"\n          tab=\"开具两票\"\n          force-render\n        >\n          <TicketTable\n            ref=\"ticketTableRef\"\n            :formState=\"formState\"\n            :disabledProcessInput=\"disabledProcessInput\"\n            :activeKey=\"activeKey\"\n          />\n        </a-tab-pane>\n      </a-tabs>\n    </div>\n  </a-card>\n</template>\n<script lang=\"ts\" setup>\n  import { reactive, UnwrapRef, ref } from 'vue';\n  import DictSelectBox from '@/components/Framework/Combox/DictSelectBox.vue';\n  import TicketTable from './TicketTable.vue';\n  import { addTabPage } from '@/utils/route';\n\n  const props = defineProps({\n    formState: {\n      type: Object as UnwrapRef<any>,\n      required: true,\n      default: function () {\n        return { hidden: {} };\n      },\n    },\n    disabledInput: Boolean,\n    showProcess: Boolean,\n    disabledProcessInput: Boolean,\n    stationPersonOptions: Object,\n  });\n  const childFormState = reactive(props.formState);\n  const activeKey = ref('1');\n  const ticketTableRef = ref();\n\n  function handleChangefindByName(value: string, option) {\n    childFormState.hidden.findById = option.lable;\n  }\n\n  function handleChangePlanHandleByName(value: string, option) {\n    childFormState.planHandleById = option.lable;\n  }\n\n  function handleChangePlanConfirmByName(value: string, option) {\n    childFormState.planConfirmById = option.lable;\n  }\n\n  function handleChangeHandleByName(value: string, option) {\n    childFormState.handleById = option.lable;\n  }\n\n  function clickDangerHyperlink() {\n    addTabPage('/po/danger/create', '', { id: props.formState.sourceId });\n  }\n\n  // 主动暴露组件属性、方法\n  defineExpose({\n    childFormState,\n    getTicketList: function () {\n      if (childFormState.isInvoicing === '0') {\n        return [];\n      }\n      return ticketTableRef.value.getTicketDataSource();\n    },\n  });\n</script>\n"],"names":["childFormState","reactive","props","activeKey","ref","ticketTableRef","handleChangefindByName","value","option","handleChangePlanHandleByName","handleChangePlanConfirmByName","handleChangeHandleByName","clickDangerHyperlink","addTabPage","__expose"],"mappings":"ilBA8WQA,EAAiBC,EAASC,EAAM,SAAS,EACzCC,EAAYC,EAAI,GAAG,EACnBC,EAAiBD,IAEd,SAAAE,EAAuBC,EAAeC,EAAQ,CACtCR,EAAA,OAAO,SAAWQ,EAAO,KAC1C,CAES,SAAAC,EAA6BF,EAAeC,EAAQ,CAC3DR,EAAe,eAAiBQ,EAAO,KACzC,CAES,SAAAE,EAA8BH,EAAeC,EAAQ,CAC5DR,EAAe,gBAAkBQ,EAAO,KAC1C,CAES,SAAAG,EAAyBJ,EAAeC,EAAQ,CACvDR,EAAe,WAAaQ,EAAO,KACrC,CAEA,SAASI,GAAuB,CAC9BC,EAAW,oBAAqB,GAAI,CAAE,GAAIX,EAAM,UAAU,SAAU,CACtE,CAGa,OAAAY,EAAA,CACX,eAAAd,EACA,cAAe,UAAY,CACrB,OAAAA,EAAe,cAAgB,IAC1B,GAEFK,EAAe,MAAM,qBAC9B,CAAA,CACD"}