{"version":3,"file":"createOrUpdate-93c2a85d.js","sources":["../../src/views/po/safety/safecheckexecution/createOrUpdate.ts","../../src/views/po/safety/safecheckexecution/createOrUpdate.vue"],"sourcesContent":["import { BasicColumn } from '@/components/Table';\nimport { defHttp } from '@/utils/http/axios';\n\nenum Api {\n  //查询模板内容\n  getTplDtlData = '/po/safe-check-template/dtl/list',\n  getTplData = '/po/safe-check-template/list',\n  addExecutionData = '/po/safe-check-execution/create',\n  updateExecutionData = '/po/safe-check-execution/update',\n  getExecutionData = '/po/safe-check-execution/get',\n  getExecutionDtlData = '/po/safe-check-execution/dtl/list',\n  getStationPerson = '/baseset/common/list-stationPerson?stationId=',\n}\n\n// 查询安全检查模版明细列表\nexport function getSafeCheckTplDtl(params) {\n  return defHttp.get({ url: Api.getTplDtlData, params });\n}\nexport function getSafeCheckTpl(params) {\n  return defHttp.get({ url: Api.getTplData, params });\n}\n//执行明细\nexport function getExecutionDtlData(params) {\n  return defHttp.get({ url: Api.getExecutionDtlData, params });\n}\n//执行单据\nexport function getExecutionData(params) {\n  return defHttp.get({ url: Api.getExecutionData, params });\n}\n//电站人员\nexport function getStationPerson(stationId) {\n  return defHttp.post({ url: Api.getStationPerson + stationId });\n}\n\n// 新增安全检查模版\nexport function createSafeCheckExecution(data) {\n  return defHttp.post({ url: Api.addExecutionData, data });\n}\n\n// 修改安全检查模版\nexport function updateSafeCheckExecution(data) {\n  return defHttp.put({ url: Api.updateExecutionData, data });\n}\n\nexport const dtlColumns: BasicColumn[] = [\n  {\n    title: '检查项目',\n    dataIndex: 'indexItem',\n    width: 80,\n    customCell: (record, index, column) => {\n      return {\n        rowSpan: record.rowSpan,\n      };\n    },\n  },\n  { title: '检查内容', dataIndex: 'indexContent', width: 160, align: 'left', },\n  { slots: { title: 'result' },  dataIndex: 'result', width: 160, align: 'left' },\n  { slots: { title: 'needRectification' }, dataIndex: 'needRectification', width: 100 },\n  { title: '计划整改措施', dataIndex: 'measures', width: 160 },\n  { title: '计划完成日期', dataIndex: 'deadlineDate', width: 160 },\n  { title: '隐患类别', dataIndex: 'hiddenDangerType', width: 160 },\n  { title: '检查附件', dataIndex: 'bizFileId',align: 'left',headAlign:'center', width: 160 },\n];\n","<template>\n  <PageWrapper dense contentFullHeight fixedHeight  contentClass=\"flex\" style=\"position: relative\">\n  <div class=\"load\">\n    <a-spin :spinning=\"formState.spinning\" tip=\"Loading...\">\n      <div class=\"process-box\">\n      <div class=\"header-box\">\n        <BillTitle :options=\"billTitleOptions\" />\n        <WfApproveBox\n          :processInstanceId=\"processInstanceId\"\n          @agree=\"flowOption.handleAgree\"\n          @save=\"flowOption.handleSave\"\n          @submit=\"flowOption.handleSubmit\"\n          :processStatus=\"formState.status\"\n          :listenMessage=\"`safe-check-execution`\"\n        />\n        <!-- <PrintButton style=\"margin-left: 10px\" v-if=\"formState.status === 2\" /> -->\n      </div>\n      <div class=\"content\">\n        <a-form\n          :model=\"formState\"\n          name=\"basic\"\n          ref=\"formRef\"\n          :label-col=\"{ span: 4 }\"\n          :wrapper-col=\"{ span: 20 }\"\n          autocomplete=\"off\"\n          @finish=\"onFinish\"\n        >\n          <a-card title=\"基本信息\" :bordered=\"false\">\n            <a-row :gutter=\"32\">\n              <a-col :span=\"12\">\n                <a-form-item\n                  label=\"电站名称\"\n                  name=\"stationName\"\n                  :labelCol=\"{ style: { width: '124px'} }\" \n                  :rules=\"[{ required: false }]\"\n                >\n                  <a-input v-model:value=\"formState.stationName\" disabled />\n                </a-form-item>\n              </a-col>\n              <a-col :span=\"12\">\n                <a-form-item\n                  v-if=\"formState.safetyCheckType == CheckTypeNum.SPECIAL\"\n                  label=\"任务日期\"\n                  name=\"taskDate\"\n                  :labelCol=\"{ style: { width: '124px'} }\" \n                  :rules=\"[{ required: false }]\"\n                >\n                  <a-input v-model:value=\"formState.taskDate\" disabled />\n                </a-form-item>\n                <a-form-item\n                  v-if=\"formState.safetyCheckType == CheckTypeNum.REGULAR\"\n                  label=\"检查模板\"\n                  name=\"templateId\"\n                  :labelCol=\"{ style: { width: '124px'} }\" \n                  :rules=\"[{ required: true,message: '检查模板必选'  }]\"\n                >\n                  <a-select\n                    v-model:value=\"formState.templateId\"\n                    allowClear\n                    :options=\"templateData\"\n                    :disabled=\"disabledInput\"\n                    @change=\"\n                      (id, item) => {\n                        formState.templateId = id;\n                        formState.templateName = item.label;\n                        formState.num = item.num;\n                        formState.checkPeriod = item.checkPeriod;\n                        formState.checkPeriodDisplay = item.checkPeriodText + item.num + '次';\n                        formState.subject = item.label + '-' + formState.stationName;\n                        isChangeTemplate = true;\n                        reload();\n                      }\n                    \"\n                  />\n                </a-form-item>\n              </a-col>\n              <a-col :span=\"12\" v-if=\"formState.safetyCheckType == CheckTypeNum.REGULAR\">\n                <a-form-item\n                  label=\"检查频率\"\n                  name=\"checkPeriodDisplay\"\n                  :labelCol=\"{ style: { width: '124px'} }\" \n                  :rules=\"[{ required: false }]\"\n                >\n                  <a-input v-model:value=\"formState.checkPeriodDisplay\" disabled />\n                </a-form-item>\n              </a-col>\n              <a-col :span=\"12\">\n                <a-form-item\n                  label=\"主题\"\n                  name=\"subject\"\n                  :labelCol=\"{ style: { width: '124px'} }\" \n                  :rules=\"[{ required: false, message: '主题' }]\"\n                >\n                  <a-input\n                    v-model:value=\"formState.subject\"\n                    :disabled=\"\n                      disabledInput || formState.safetyCheckType == CheckTypeNum.SPECIAL\n                    \"\n                    readonly=\"true\"\n                    maxlength=\"128\"\n                  />\n                </a-form-item>\n              </a-col>\n              <a-col :span=\"12\">\n                <a-form-item\n                  label=\"负责人\"\n                  name=\"responsiblePersonId\"\n                  :labelCol=\"{ style: { width: '124px'} }\" \n                  :rules=\"[{ required: true, message: '请选择负责人' }]\"\n                >\n                  <a-select\n                    v-model:value=\"formState.responsiblePersonId\"\n                    allowClear\n                    :options=\"responsiblePersonData\"\n                    :disabled=\"disabledInput\"\n                    @change=\"\n                      (id, item) => {\n                        formState.responsiblePersonId = id;\n                        formState.responsiblePersonName = item.label;\n                      }\n                    \"\n                  />\n                </a-form-item>\n              </a-col>\n              <a-col :span=\"12\">\n                <a-form-item\n                  label=\"检查人\"\n                  name=\"checkerId\"\n                  :labelCol=\"{ style: { width: '124px'} }\" \n                  :rules=\"[{ required: true, message: '检查人' }]\"\n                >\n                  <a-select\n                    v-model:value=\"formState.checkerId\"\n                    allowClear\n                    :options=\"responsiblePersonData\"\n                    :disabled=\"disabledInput\"\n                    @change=\"\n                      (id, item) => {\n                        formState.checkerId = id;\n                        formState.checkerName = item.label;\n                      }\n                    \"\n                  />\n                </a-form-item>\n              </a-col>\n              <a-col :span=\"12\">\n                <a-form-item\n                  label=\"检查日期\"\n                  name=\"checkDate\"\n                  :labelCol=\"{ style: { width: '124px'} }\" \n                  :rules=\"[{ required: true, message: '检查日期' }]\"\n                >\n                  <a-date-picker\n                    v-model:value=\"formState.checkDate\"\n                    valueFormat=\"YYYY-MM-DD\"\n                    style=\"width: 100%\"\n                    :disabled=\"disabledInput\"\n                  />\n                </a-form-item>\n              </a-col>\n            </a-row>\n          </a-card>\n          <a-card  :bordered=\"false\">\n            <BasicTable \n            title=\"检查内容与结果\" \n            @register=\"executionDtlTable\" >\n                <template #result> <div class=\"customer_require\">检查情况</div> </template>\n                <template #needRectification> <div class=\"customer_require\">是否需要整改</div> </template>\n                <template #bodyCell=\"{ column, record }\">\n                  <template v-if=\"column.dataIndex === 'result'\">\n                    <a-input\n                      v-model:value=\"record[column.dataIndex]\"\n                      maxlength=\"1024\"\n                      :disabled=\"disabledInput\"\n                      style=\"width: 100%\"\n                    />\n                  </template>\n                  <template v-if=\"column.dataIndex === 'needRectification'\">\n                    <a-select\n                      v-model:value=\"record[column.dataIndex]\"\n                      style=\"width: 100%\"\n                      allow-clear\n                      :disabled=\"disabledInput\"\n                    >\n                      <a-select-option :value=\"0\">否</a-select-option>\n                      <a-select-option :value=\"1\">是</a-select-option>\n                    </a-select>\n                  </template>\n                  <template v-if=\"column.dataIndex === 'deadlineDate'\">\n                    <a-date-picker\n                      :disabled=\"disabledInput\"\n                      v-model:value=\"record[column.dataIndex]\"\n                      valueFormat=\"YYYY-MM-DD HH:mm\"\n                      format=\"YYYY-MM-DD HH:mm\"\n                      style=\"width: 100%\"\n                    />\n                  </template>\n                  <template v-if=\"column.dataIndex === 'measures'\">\n                    <a-input\n                      :disabled=\"disabledInput\"\n                      v-model:value=\"record[column.dataIndex]\"\n                      maxlength=\"1024\"\n                      style=\"width: 100%\"\n                    />\n                  </template>\n                  <template v-if=\"column.dataIndex === 'hiddenDangerType'\">\n                    <DictSelectBox\n                      :type=\"`hidden_danger_type`\"\n                      :disabled=\"disabledInput\"\n                      :subtype=\"`safety`\"\n                      v-model:value=\"record[column.dataIndex]\"\n                      style=\"width: 100%\"\n                    />\n                  </template>\n                  <template v-if=\"column.dataIndex === 'bizFileId'\">\n                    <UploadBox\n                      :width=\"800\"\n                      :height=\"550\"\n                      :maxCount=\"20\"\n                      :maxSize=\"100 * 1024 * 1024\"\n                      :application=\"`po`\"\n                      :module=\"`safeCheckExecution${query.safetyCheckType}`\"\n                      :vmode=\"formState.status == 0 ? `box` : `view`\"\n                      :bizId=\"record[column.dataIndex]\"\n                    />\n                  </template>\n                </template>\n                <template #toolbar v-if=\"formState.status == 0 && !disabledInput\">\n                  <a-button @click=\"checkSituation\" :preIcon=\"IconEnum.EDIT\">检查情况</a-button>\n                </template>\n            </BasicTable>\n          </a-card>\n        </a-form>\n\n        <Dialog v-model:visible=\"open\" title=\"批量修改检查情况\" @ok=\"handleOk\" :width=\"300\" :height=\"220\" :maskClosable=\"false\">\n          <div style=\"padding: 0 10px\">\n            <a-textarea v-model:value=\"situation\" :rows=\"3\" maxlength=\"1024\" />\n          </div>\n        </Dialog>\n      </div>\n    </div>\n    </a-spin>\n  </div>\n</PageWrapper>\n</template>\n<script lang=\"ts\" setup>\n  //form\n  import { PageWrapper } from '/@/components/Page';\n  import { reactive, ref, onMounted,toRaw,computed } from 'vue';\n  import { urlToPath } from '/@/utils/route';\n  import { FormInstance } from 'ant-design-vue';\n  import { SysMessage } from '/@/hooks/web/useMessage';\n  import { MsgManager } from '/@/message/MsgManager';\n  import {\n    createSafeCheckExecution,\n    dtlColumns,\n    getSafeCheckTplDtl,\n    getExecutionData,\n    getExecutionDtlData,\n    getStationPerson,\n    getSafeCheckTpl,\n  } from './createOrUpdate';\n  import { CheckTypeNum } from './safecheckexecution';\n  import { BasicTable, useTable } from '@/components/Table';\n  import DictSelectBox from '@/components/Framework/Combox/DictSelectBox.vue';\n  // import PrintButton from '/@/components/Framework/Button/PrintButton.vue';\n  import BillTitle from '/@/components/Framework/BillTitle/BillTitle.vue';\n  import WfApproveBox from '/@/components/Framework/WorkFlow/WfApproveBox.vue';\n  import Dialog from '@/components/Framework/Modal/Dialog.vue';\n  import * as ProcessInstanceApi from '@/api/bpm/processInstance';\n  import UploadBox from '@/components/Framework/Combox/UploadBox.vue';\n  import { IconEnum } from '@/enums/appEnum';\n  import { closeCurrentTab } from '@/utils/route';\n  import { buildUUID } from '@/utils/uuid';\n  import { useUserStore } from '/@/store/modules/user';\n\n\n  const userStore = useUserStore();\n  const userInfo = toRaw(userStore.getUserInfo);\n  const open = ref<boolean>(false);\n  const isChangeTemplate = ref<boolean>(false);\n  const isRequire = ref(true);\n  const disabledInput=computed(()=>{\n    return formState.status!=0 || (formState.status==0 && \n          formState.personMemberId !='' && \n          formState.personMemberId.substring(0,32) != userInfo.userId);\n  })\n  const situation = ref('');\n  const processInstanceId = ref('');\n  const formRef = ref<FormInstance>();\n  const responsiblePersonData: any = ref([]);\n  const templateData: any = ref([]);\n  let {params:query} = urlToPath() as any;\n  const formState:any = reactive({\n    id: query.id || '',\n    subject: '',\n    checkerId: '',\n    personMemberId: '',\n    stationName: query.stationName || '',\n    stationId: query.stationId || '',\n    stationOrganName: query.stationOrganName || '',\n    stationOrganId: query.stationOrganId || '',\n    status: 0,\n    checkPeriodDisplay: '',\n    responsiblePersonId: '',\n    responsiblePersonName: '',\n    checkDate: '',\n    taskDate: '',\n    templateId: '',\n    billCode: '',\n    fillinDate: '',\n    templateName: '',\n    checkerName: '',\n    checkPeriod: '',\n    spinning:false,\n    num: '',\n    safetyCheckType: query.safetyCheckType,\n    dtl: {},\n  });\n\n  const onFinish = () => {\n    formState.dtl = getDataSource();\n    formState.spinning=true;\n    createSafeCheckExecution(formState)\n      .then((rsp) => {\n        if (rsp.result != '') {\n          formState.id = rsp.result;\n          SysMessage.getInstance().success(formState.status == 1 ? '提交成功' : '保存成功');\n          if (formState.status == 1) {\n            setTimeout(() => {\n              closeCurrentTab();\n              MsgManager.getInstance().sendMsg('safe-check-execution', {});\n            }, 100);\n          }\n        } else {\n          isRequire.value = false;\n         \n          SysMessage.getInstance().error('保存失败.');\n        }\n        formState.spinning=false;\n      })\n      .catch((e) => {\n        console.log(e);\n        isRequire.value = false;\n        formState.spinning=false;\n        formState.status = 0;\n      });\n  };\n  const billTitleOptions = reactive<any>({subject : ''});\n  \n\n  const flowOption = {\n    handleAgree: (flowData) => {\n      console.log('同意', flowData);\n    },\n\n    handleSave: (flowData) => {\n      console.log('保存', flowData);\n      isRequire.value = false;\n      formState.status = 0;\n      onFinish();\n    },\n    handleSubmit: (flowData) => {\n      console.log('提交', flowData);\n      isRequire.value = true;\n      formState.status = 1;\n      const value = formRef.value;\n      if (!value) {\n        return;\n      }\n      value\n        .validateFields()\n        .then(() => {\n          if (getDataSource().length === 0) {\n            SysMessage.getInstance().info('检查内容与结果不能为空');\n            formState.status = 0;\n            return;\n          }\n          onFinish();\n        })\n        .catch((e) => {\n          console.log(e);\n          formState.status = 0;\n        });\n    },\n  };\n  const [executionDtlTable, { getDataSource, updateTableData, reload }] = useTable({\n    api: async () => {\n      let dataObj;\n      if (formState.id && !isChangeTemplate.value) {\n        dataObj = await getExecutionDtlData({ safeCheckExecutionId: formState.id });\n      } else {\n        if (formState.templateId) {\n          dataObj = await getSafeCheckTplDtl({ safeCheckTemplateId: formState.templateId });\n          if (dataObj.result.length > 0) {\n            for (let i = 0; i < dataObj.result.length; i++) {\n              dataObj.result[i].needRectification = 0;\n              dataObj.result[i].bizFileId = buildUUID();\n            }\n          }\n        } else {\n          dataObj = { result: [], total: 0 };\n        }\n        mergeCell(dataObj.result);\n      }\n      isChangeTemplate.value = false;\n      \n      return dataObj.result;\n    },\n    bordered: true,\n    pagination: false,\n    columns: dtlColumns,\n    useSearchForm: false,\n    showTableSetting: false,\n    rowSelection: {\n      type: 'checkbox',\n    },\n  });\n\n  const mergeCell = (rows) => {\n    if (rows.length === 0) {\n      return;\n    }\n    let obj = {};\n    for (let i = 0; i < rows.length; i++) {\n      let item = rows[i].indexItem;\n      if (obj[item]) {\n        obj[item] = obj[item] + 1;\n      } else {\n        obj[item] = 1;\n      }\n    }\n    rows.sort((e1, e2) => {\n      return e1.indexItem > e2.indexItem ? 1 : -1;\n    });\n    for (let i = 0; i < rows.length; i++) {\n      let item = rows[i].indexItem;\n      if (obj[item]) {\n        rows[i].rowSpan = obj[item];\n        delete obj[item];\n      } else {\n        rows[i].rowSpan = 0;\n      }\n    }\n  };\n\n  const checkSituation = () => {\n    open.value = true;\n  };\n\n  const handleOk = () => {\n    let rows = getDataSource();\n    let i = 0;\n    rows.forEach(() => {\n      updateTableData(i, 'result', situation.value);\n      i++;\n    });\n    open.value = false;\n  };\n\n  // global\n  onMounted(async () => {\n    processInstanceId.value = query.processInstanceId as unknown as string;\n    if (!formState.id && query.processInstanceId) {\n      const processInstance = await ProcessInstanceApi.getProcessInstance(\n        query.processInstanceId as string,\n      );\n\n      formState.id = processInstance.businessKey;\n    }\n    getExecutionData({ id: formState.id, safetyCheckType: formState.safetyCheckType || '' })\n      .then((rsp) => {\n        let rs = rsp.result;\n        if (formState.id) {\n          for (let key in rs) {\n            formState[key] = rs[key];\n          }\n          formState.status = Number(formState.status);\n\n          if (formState.safetyCheckType == CheckTypeNum.REGULAR && rs.num) {\n            formState.checkPeriodDisplay = rs.checkPeriodText + rs.num + '次';\n          } else {\n            formState.checkPeriodDisplay = '';\n          }\n        } else {\n          formState.billCode = rs.billCode;\n          formState.personMemberName = rs.personMemberName;\n          formState.deptName=rs.deptName;\n          formState.fillinDate = rs.fillinDate;\n        }\n        let { billCode, fillinDate, personMemberName,deptName } = rs;\n        Object.assign(billTitleOptions, { billCode, fillinDate, personMemberName,deptName });\n        billTitleOptions.subject =\n          (formState.safetyCheckType == CheckTypeNum.REGULAR ? '定期' : '专项') + '检查';\n      })\n      .then(() => {\n        getStationPerson(formState.stationId).then((rsp) => {\n          let tmp={};\n          rsp.result.forEach((e) => {\n            tmp[e.userId]=e.name;\n          });\n          for(let k in tmp){\n            responsiblePersonData.value.push({\n              label: tmp[k],\n              value: k,\n            });\n          }\n \n        });\n        if (formState.safetyCheckType == '1') {\n          getSafeCheckTpl({ checkType: formState.safetyCheckType, status: 2, bizStatus: 1 }).then(\n            (rsp) => {\n              rsp.result.forEach((e) => {\n                templateData.value.push({\n                  label: e.subject,\n                  value: e.id,\n                  num: e.num,\n                  checkPeriod: e.checkPeriod,\n                  checkPeriodText: e.checkPeriodText,\n                });\n              });\n            },\n          );\n        }\n\n        reload();\n      });\n  });\n</script>\n\n<style lang=\"less\" scoped>\n.customer_require::before {\n  content: '*';\n  display: inline-block;\n  margin-right: 4px;\n  color: #ff4d4f;\n  font-family: SimSun, sans-serif;\n  font-size: 14px;\n  line-height: 1;\n}\n\n.fix-detail-page {\n    :deep(&.vben-page-wrapper-content.detail-content) {\n      margin: 0;\n    }\n  }\n</style>\n\n"],"names":["getSafeCheckTplDtl","params","defHttp","getSafeCheckTpl","getExecutionDtlData","getExecutionData","getStationPerson","stationId","createSafeCheckExecution","data","dtlColumns","record","index","column","userStore","useUserStore","userInfo","toRaw","open","ref","isChangeTemplate","isRequire","disabledInput","computed","formState","situation","processInstanceId","formRef","responsiblePersonData","templateData","query","urlToPath","reactive","onFinish","getDataSource","rsp","SysMessage","closeCurrentTab","MsgManager","e","billTitleOptions","flowOption","flowData","value","executionDtlTable","updateTableData","reload","useTable","__async","dataObj","i","buildUUID","mergeCell","rows","obj","item","e1","e2","checkSituation","handleOk","onMounted","processInstance","ProcessInstanceApi.getProcessInstance","rs","key","CheckTypeNum","billCode","fillinDate","personMemberName","deptName","tmp","k"],"mappings":"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"}