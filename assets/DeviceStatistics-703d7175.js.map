{"version":3,"file":"DeviceStatistics-703d7175.js","sources":["../../src/views/da/groupOperation/monitor/DeviceStatistics.vue"],"sourcesContent":["<template>\n  <div class=\"device-statistics\">\n    <SmallModule title=\"设备统计\">\n      <template #content>\n        <div class=\"content-layout\">\n          <div class=\"data-layout\">\n            <DataIndicator label=\"光伏区\" :value=\"topIndexData.PvAreaDev\" color=\"#1890FF\" />\n            <DataIndicator label=\"升压站\" :value=\"topIndexData.BoostDev\" color=\"#1890FF\" />\n            <DataIndicator label=\"储能\" :value=\"topIndexData.EnergyStorage\" color=\"#1890FF\" />\n          </div>\n          <div class=\"chart-layout\">\n            <!-- <DonutChart\n              class=\"chart\"\n              :data=\"donutData\"\n              width=\"300\"\n              height=\"100%\"\n              radius=\"100\"\n              :showTotal=\"false\"\n            /> -->\n            <EchartPieChart\n              id=\"device-stat-pie\"\n              :colors=\"donutData.chartColors\"\n              :width=\"`22.1vw`\"\n              :height=\"`22.53vh`\"\n              :data=\"donutData.pieData\"\n              :roseType=\"false\"\n              :radius=\"['45%', '65%']\"\n              :pieCenter=\"['50%', '50%']\"\n            />\n          </div>\n        </div>\n      </template>\n    </SmallModule>\n  </div>\n</template>\n\n<script lang=\"ts\" setup>\n  import SmallModule from '/@/components/Framework/OperationScreen/SmallModule.vue';\n  import DataIndicator from '/@/components/Framework/OperationScreen/DataIndicator.vue';\n  // import DonutChart from '/@/components/Framework/Chart/DonutChart.vue';\n  import { reactive, UnwrapRef, onMounted, ref } from 'vue';\n  import { getDeviceStatData } from './data';\n  import { assign } from 'lodash-es';\n  import EchartPieChart from '/@/components/Framework/Chart/EchartPieChart.vue';\n\n  const searchInfo: UnwrapRef<any> = reactive({});\n  const topIndexData = reactive<any>({});\n\n  onMounted(() => {\n    queryDeviceStatData();\n  });\n\n  const donutData = ref({\n    pieData: [],\n    chartColors: ['#1890ff', '#60d1f3', '#8fd0f4', '#2de4a5', '#63b2ee'],\n  });\n\n  const queryDeviceStatData = async () => {\n    let data = await getDeviceStatData(searchInfo);\n    if (data.result) {\n      assign(topIndexData, data.result);\n      let pieData = [];\n      data.result.typeStat.forEach((item) => {\n        item.name = item.label;\n        pieData.push(item);\n      });\n      donutData.value.pieData = data.result.typeStat;\n    }\n  };\n  // donutData.value = [\n  //   { label: '数采', value: 5.41, EF: '1' },\n  //   { label: '汇流箱', value: 32.43, EF: '1' },\n  //   { label: '逆变器', value: 54.05, EF: '1' },\n  //   { label: '箱变', value: 8.11, EF: '1' },\n  // ];\n</script>\n\n<style lang=\"less\" scoped>\n  .content-layout {\n    height: 100%;\n\n    .data-layout {\n      display: flex;\n      align-items: flex-end;\n      justify-content: space-between;\n      height: 23.95%;\n      margin-top: -0.12rem;\n      padding: 0 0.87rem;\n    }\n\n    .chart-layout {\n      display: flex;\n      width: 100%;\n      height: 76.05%;\n      padding-left: 0.2rem;\n\n      .chart {\n        :deep(.indicator-item .info) {\n          height: auto;\n        }\n\n        :deep(.indicator-item .icon) {\n          margin-top: 0;\n        }\n      }\n    }\n  }\n</style>\n"],"names":["searchInfo","reactive","topIndexData","onMounted","queryDeviceStatData","donutData","ref","__async","data","getDeviceStatData","assign","item"],"mappings":"w1BA6CQ,MAAAA,EAA6BC,EAAS,CAAA,CAAE,EACxCC,EAAeD,EAAc,CAAA,CAAE,EAErCE,EAAU,IAAM,CACMC,GAAA,CACrB,EAED,MAAMC,EAAYC,EAAI,CACpB,QAAS,CAAC,EACV,YAAa,CAAC,UAAW,UAAW,UAAW,UAAW,SAAS,CAAA,CACpE,EAEKF,EAAsB,IAAYG,EAAA,sBAClC,IAAAC,EAAO,MAAMC,EAAkBT,CAAU,EACzCQ,EAAK,SACAE,EAAAR,EAAcM,EAAK,MAAM,EAEhCA,EAAK,OAAO,SAAS,QAASG,GAAS,CACrCA,EAAK,KAAOA,EAAK,KACA,CAClB,EACSN,EAAA,MAAM,QAAUG,EAAK,OAAO,SACxC"}