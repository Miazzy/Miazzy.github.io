{"version":3,"file":"infoDialog-f9501edb.js","sources":["../../src/views/monitor/smartdevice/realstatus/infoDialog.vue"],"sourcesContent":["<template>\n  <Dialog\n    target=\"#app>div.satellite-map\"\n    :title=\"title\"\n    :visible=\"modalVisible\"\n    @update:visible=\"updateVisible\"\n    :width=\"props.width\"\n    :height=\"props.height\"\n    @close=\"handleClose\"\n  >\n    <template #default>\n      <div class=\"dialog-content\" :style=\"`height: calc(${props.height}px - 90px)`\">\n        <div v-if=\"type === 'ewc' || type === 'dr'\" class=\"device-img-box\">\n          <img :src=\"infoData.fileUrl\" class=\"device-img\" />\n        </div>\n        <div class=\"device-info-box\">\n          <!-- 电子工牌 -->\n          <template v-if=\"type === 'ewc'\">\n            <div class=\"info-row\">\n              <div class=\"info-item\">\n                <span class=\"label\" style=\"width: 7em\">设备编号：</span>\n                <span class=\"text\">{{ infoData.deviceCode }}</span>\n                <span :class=\"`status-tag ${infoData.status}`\">{{ infoData.statusText }}</span>\n              </div>\n            </div>\n            <div class=\"info-row\">\n              <div class=\"info-item\">\n                <span class=\"label\" style=\"width: 7em\">姓名：</span>\n                <span class=\"text\">{{ infoData.userName }}</span>\n              </div>\n            </div>\n            <div class=\"info-row\">\n              <div class=\"info-item\">\n                <span class=\"label\" style=\"width: 7em\">定位时间：</span>\n                <span class=\"text\">{{ infoData.locDate }}</span>\n              </div>\n            </div>\n            <div class=\"info-row\">\n              <div class=\"info-item\">\n                <span class=\"label\" style=\"width: 7em\">定位地点：</span>\n                <span class=\"text\">{{ infoData.address }}</span>\n              </div>\n            </div>\n            <div class=\"info-row\">\n              <div class=\"info-item\" style=\"flex: 60%; width: 60%\">\n                <span class=\"label\" style=\"width: 7em\">最后报警时间：</span>\n                <span class=\"text\">{{ infoData.lastSignalDate }}</span>\n              </div>\n              <div class=\"info-item\" style=\"flex: 40%; width: 40%\">\n                <span class=\"label\" style=\"width: 7em\">设备电量(%)：</span>\n                <span class=\"text\">{{ infoData.chargePercentage }}</span>\n              </div>\n            </div>\n          </template>\n\n          <!-- 行车记录仪 -->\n          <template v-if=\"type === 'dr'\">\n            <div class=\"info-row\">\n              <div class=\"info-item\">\n                <span class=\"label\" style=\"width: 7em\">设备编号：</span>\n                <span class=\"text\">{{ infoData.deviceCode }}</span>\n                <span :class=\"`status-tag ${infoData.status}`\">{{ infoData.statusText }}</span>\n              </div>\n            </div>\n            <div class=\"info-row\">\n              <div class=\"info-item\">\n                <span class=\"label\" style=\"width: 7em\">车牌号：</span>\n                <span class=\"text\">{{ infoData.plateNumber }}</span>\n              </div>\n              <div class=\"info-item\">\n                <span class=\"label\" style=\"width: 6em\">指定驾驶员：</span>\n                <span class=\"text\">{{ infoData.responsiblePersonName }}</span>\n              </div>\n            </div>\n            <div class=\"info-row\">\n              <div class=\"info-item\">\n                <span class=\"label\" style=\"width: 7em\">车辆类型：</span>\n                <span class=\"text\">{{ infoData.vehicleTypeText }}</span>\n              </div>\n              <div class=\"info-item\">\n                <span class=\"label\" style=\"width: 6em\">速度(km/h)：</span>\n                <span class=\"text\">{{ infoData.speed }}</span>\n              </div>\n            </div>\n            <div class=\"info-row\">\n              <div class=\"info-item\">\n                <span class=\"label\" style=\"width: 7em\">测速定位时间：</span>\n                <span class=\"text\">{{ infoData.locDate }}</span>\n              </div>\n            </div>\n            <div class=\"info-row\">\n              <div class=\"info-item\">\n                <span class=\"label\" style=\"width: 7em\">位置：</span>\n                <span class=\"text\">{{ infoData.address }}</span>\n              </div>\n            </div>\n          </template>\n\n          <!-- 巡检仪 -->\n          <template v-if=\"type === 'ii'\">\n            <div class=\"info-row\">\n              <div class=\"info-item\">\n                <span class=\"label\" style=\"width: 5em\">设备编号：</span>\n                <span class=\"text\">{{ infoData.deviceCode }}</span>\n                <span :class=\"`status-tag ${infoData.status}`\">{{ infoData.statusText }}</span>\n              </div>\n            </div>\n            <div class=\"info-row\">\n              <div class=\"info-item\">\n                <span class=\"label\" style=\"width: 5em\">所属电站：</span>\n                <span class=\"text\">{{ infoData.stationShortName }}</span>\n              </div>\n            </div>\n            <div class=\"info-row\">\n              <div class=\"info-item\">\n                <span class=\"label\" style=\"width: 5em\">定位时间：</span>\n                <span class=\"text\">{{ infoData.locDate }}</span>\n              </div>\n            </div>\n            <div class=\"info-row\">\n              <div class=\"info-item\">\n                <span class=\"label\" style=\"width: 5em\">位置：</span>\n                <span class=\"text\">{{ infoData.address }}</span>\n              </div>\n            </div>\n          </template>\n        </div>\n      </div>\n    </template>\n    <template #footer>\n      <a-button\n        v-if=\"type === 'ewc'\"\n        type=\"primary\"\n        @click=\"toDevicePage(infoData.eleWorkCardId, 'ewc')\"\n        >电子工牌信息</a-button\n      >\n      <a-button v-if=\"type === 'dr'\" type=\"primary\" @click=\"toDevicePage(infoData.vehicleId, 'dr')\"\n        >车辆信息</a-button\n      >\n      <a-button\n        v-if=\"type === 'ii'\"\n        type=\"primary\"\n        @click=\"toDevicePage(infoData.inspectionInstrumentId, 'ii')\"\n        >巡检仪信息</a-button\n      >\n      <a-button style=\"margin-left: 10px\" type=\"primary\" @click=\"toMonitorInfoPage\"\n        >监控信息</a-button\n      >\n    </template>\n  </Dialog>\n</template>\n\n<script lang=\"ts\" setup>\n  import Dialog from '@/components/Framework/Modal/Dialog.vue';\n  import { ref, defineProps, defineEmits, onMounted, watch, unref, reactive } from 'vue';\n  import { Modal } from 'ant-design-vue';\n  import { SysMessage } from '/@/hooks/web/useMessage';\n  import { addTabPage, pathToUrl } from '@/utils/route';\n  import * as FileApi from '@/api/infra/file';\n\n  type messageType = { double: String; delete: String };\n\n  const props = defineProps({\n    visible: Boolean, // 是否显示弹框\n    title: String, // 弹框标题\n    width: { type: Number, default: 450 }, // 弹框宽度\n    height: { type: Number, default: 480 }, // 弹框高度\n    type: { type: String, default: '' }, // 设备类型 ewc：电子工牌 dr：行车记录仪 ii：巡检仪\n    infoData: { type: Object, default: () => {} }, // 弹框内容数据\n  });\n\n  const emit = defineEmits(['update:visible', 'update:value', 'close']); // 定义事件\n\n  const modalVisible = ref(false);\n  const deviceTypes = {\n    ewc: '电子工牌',\n    dr: '行车记录仪',\n    ii: '巡检仪',\n  };\n  const handleClose = () => {\n    emit('close');\n  };\n\n  const updateVisible = ($event) => {\n    modalVisible.value = $event;\n    emit('update:visible', false); // 关闭弹框\n  };\n\n  // 跳转到设备详情页\n  const toDevicePage = (id, type) => {\n    // emit('update:visible', false);\n    if (type === 'ewc') {\n      addTabPage(\n        `/baseset/monitor/smartdevices/eleworkcard/create?id=${id}&disabledInput=true`,\n        '查看电子工牌设置',\n      );\n      return;\n    }\n    if (type === 'dr') {\n      addTabPage(`/po/integrated/vehicle/create?id=${id}&isReadonly=true`, '查看车辆信息');\n      return;\n    }\n    if (type === 'ii') {\n      addTabPage(\n        `/baseset/monitor/smartdevices/inspectioninstrument/create?id=${id}&disabledInput=true`,\n        '查看巡检仪设置',\n      );\n      return;\n    }\n  };\n\n  // 跳转到设备监控页\n  const toMonitorInfoPage = () => {\n    const origin = window.location.origin;\n    const params = { type: props.type, ...props.infoData };\n    const targetUrl = `/monitor/smartdevice/monitorInfo/monitorInfo`;\n    addTabPage(targetUrl, `${deviceTypes[props.type]}-监控信息`, params);\n    // const realUrl = pathToUrl(targetUrl, params);\n    // window.open(realUrl, '_blank');\n  };\n\n  watch(\n    () => props.visible,\n    (newValue) => {\n      modalVisible.value = newValue;\n    },\n  );\n\n  onMounted(() => {\n    modalVisible.value = props.visible;\n  });\n</script>\n<style lang=\"less\">\n  [data-theme='dark'] .theme1 {\n    .dialog-content {\n      .device-info-box {\n        .info-item {\n          .label {\n            color: rgb(255 255 255 / 60%);\n          }\n\n          .text {\n            color: #fff;\n          }\n        }\n      }\n    }\n  }\n\n  .theme3 {\n    .dialog-content {\n      .device-info-box {\n        .info-item {\n          .label {\n            color: #777;\n          }\n\n          .text {\n            color: #262626;\n          }\n        }\n      }\n    }\n  }\n</style>\n<style lang=\"less\" scoped>\n  .dialog-content {\n    .device-img {\n      width: 408px;\n      height: 192px;\n      margin: 0 auto;\n      border-radius: 4px;\n    }\n\n    .device-info-box {\n      .info-row {\n        display: flex;\n        padding: 6px 0;\n      }\n\n      .info-item {\n        display: flex;\n        flex: 1;\n        align-items: center;\n        font-size: 14px;\n\n        .label {\n          flex-shrink: 0;\n          text-align: right;\n        }\n\n        .status-tag {\n          width: 40px;\n          height: 20px;\n          margin-left: 4px;\n          transform: scale(0.8);\n          border-radius: 10px;\n          font-size: 12px;\n          line-height: 18px;\n          text-align: center;\n\n          &.online {\n            border: 1px solid rgb(82 196 26 / 50%);\n            background: rgb(82 196 26 / 20%);\n            color: #52c41a;\n          }\n\n          &.leave {\n            border: 1px solid rgb(239 189 71 / 50%);\n            background: rgb(239 189 71 / 20%);\n            color: #efbd47;\n          }\n\n          &.offline {\n            border: 1px solid rgb(255 77 79 / 50%);\n            background: rgb(255 77 79 / 20%);\n            color: #ff4d4f;\n          }\n        }\n      }\n    }\n  }\n</style>\n"],"names":["modalVisible","ref","deviceTypes","handleClose","emit","updateVisible","$event","toDevicePage","id","type","addTabPage","toMonitorInfoPage","params","__spreadValues","props","watch","newValue","onMounted"],"mappings":"gpGA6KQA,EAAeC,EAAI,EAAK,EACxBC,EAAc,CAClB,IAAK,OACL,GAAI,QACJ,GAAI,KAAA,EAEAC,EAAc,IAAM,CACxBC,EAAK,OAAO,CAAA,EAGRC,EAAiBC,GAAW,CAChCN,EAAa,MAAQM,EACrBF,EAAK,iBAAkB,EAAK,CAAA,EAIxBG,EAAe,CAACC,EAAIC,IAAS,CAEjC,GAAIA,IAAS,MAAO,CAClBC,EACE,uDAAuDF,CAAE,sBACzD,UAAA,EAEF,MACF,CACA,GAAIC,IAAS,KAAM,CACNC,EAAA,oCAAoCF,CAAE,mBAAoB,QAAQ,EAC7E,MACF,CACA,GAAIC,IAAS,KAAM,CACjBC,EACE,gEAAgEF,CAAE,sBAClE,SAAA,EAEF,MACF,CAAA,EAIIG,EAAoB,IAAM,CAE9B,MAAMC,EAASC,EAAA,CAAE,KAAMC,EAAM,MAASA,EAAM,UAE5CJ,EADkB,+CACI,GAAGR,EAAYY,EAAM,IAAI,CAAC,QAASF,CAAM,CAAA,EAKjE,OAAAG,EACE,IAAMD,EAAM,QACXE,GAAa,CACZhB,EAAa,MAAQgB,CACvB,CAAA,EAGFC,EAAU,IAAM,CACdjB,EAAa,MAAQc,EAAM,OAAA,CAC5B"}