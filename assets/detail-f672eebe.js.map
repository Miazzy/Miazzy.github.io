{"version":3,"file":"detail-f672eebe.js","sources":["../../src/views/po/equipment/detail.vue"],"sourcesContent":["<template>\n  <PageFooter v-if=\"showPageFooter\">\n    <template #right>\n      <a-button @click=\"handleCancel\"> 取消</a-button>\n      <a-button class=\"!ml-4\" type=\"primary\" @click=\"handleSave\" :loading=\"isLoading\">\n        保存</a-button\n      >\n    </template>\n  </PageFooter>\n  <div class=\"load\">\n    <a-spin :spinning=\"formState.spinning\" tip=\"Loading...\">\n      <div class=\"process-box\">\n        <div class=\"content\">\n          <a-form ref=\"formRef\" :model=\"formState\" labelAlign=\"right\" autocomplete=\"off\">\n            <a-card title=\"基本信息\" :bordered=\"false\">\n              <a-row :gutter=\"24\">\n                <a-col v-show=\"true\" :span=\"12\">\n                  <a-form-item name=\"stationName\" label=\"电站名称\" :labelCol=\"{ span: 6 }\">\n                    <a-input disabled v-model:value=\"formState.stationName\" />\n                    <a-input disabled v-model:value=\"formState.id\" v-if=\"false\" />\n                  </a-form-item>\n                </a-col>\n                <a-col v-show=\"true\" :span=\"12\">\n                  <a-form-item name=\"periodName\" label=\"期数\" :labelCol=\"{ span: 6 }\">\n                    <a-input disabled v-model:value=\"formState.periodName\" />\n                  </a-form-item>\n                </a-col>\n              </a-row>\n\n              <a-row :gutter=\"24\">\n                <a-col v-show=\"true\" :span=\"12\">\n                  <a-form-item name=\"status\" label=\"设备状态\" :labelCol=\"{ span: 6 }\">\n                    <DictSelectBox\n                      :type=\"`enable_or_disable`\"\n                      @change=\"`()=> formState.status = value`\"\n                      v-model:value=\"formState.status\"\n                      style=\"width: 100%\"\n                      disabled\n                    />\n                  </a-form-item>\n                </a-col>\n                <a-col v-show=\"true\" :span=\"12\">\n                  <a-form-item name=\"code\" label=\"设备编码\" :labelCol=\"{ span: 6 }\">\n                    <a-input v-model:value=\"formState.code\" disabled />\n                  </a-form-item>\n                </a-col>\n              </a-row>\n\n              <a-row :gutter=\"24\">\n                <a-col v-show=\"true\" :span=\"12\">\n                  <a-form-item\n                    name=\"materialName\"\n                    label=\"物料名称\"\n                    :labelCol=\"{ span: 6 }\"\n                    :rules=\"[{ required: true, message: '请选择物料' }]\"\n                  >\n                    <a-input-search\n                      readOnly\n                      v-model:value=\"formState.materialName\"\n                      placeholder=\"请选择物料\"\n                      enter-button\n                      @search=\"onSearch\"\n                    />\n                  </a-form-item>\n                </a-col>\n                <a-col v-show=\"true\" :span=\"12\">\n                  <a-form-item name=\"materialWholeName\" label=\"物料全称\" :labelCol=\"{ span: 6 }\">\n                    <a-input v-model:value=\"formState.materialWholeName\" disabled />\n                  </a-form-item>\n                </a-col>\n              </a-row>\n\n              <a-row :gutter=\"24\">\n                <a-col v-show=\"true\" :span=\"12\">\n                  <a-form-item name=\"materialCode\" label=\"物料编码\" :labelCol=\"{ span: 6 }\">\n                    <a-input v-model:value=\"formState.materialCode\" disabled />\n                  </a-form-item>\n                </a-col>\n                <a-col v-show=\"true\" :span=\"12\">\n                  <a-form-item\n                    name=\"factoryName\"\n                    label=\"生产厂家\"\n                    :labelCol=\"{ span: 6 }\"\n                    :rules=\"[{ required: true, message: '请输入生产厂家' }]\"\n                  >\n                    <SearchBox\n                      v-model:searchText=\"formState.factoryName\"\n                      :columns=\"searchBoxColumns\"\n                      :data=\"manufacturerData\"\n                      :vfield=\"'name'\"\n                      :pagination=\"false\"\n                      twidth=\"500px\"\n                      @select=\"factorySelect\"\n                      style=\"height: 60px\"\n                    />\n                  </a-form-item>\n                </a-col>\n              </a-row>\n\n              <a-row :gutter=\"24\">\n                <a-col v-show=\"true\" :span=\"12\">\n                  <a-form-item\n                    name=\"supplierName\"\n                    label=\"供应商\"\n                    :labelCol=\"{ span: 6 }\"\n                    :rules=\"[{ required: true, message: '请选择供应商' }]\"\n                  >\n                    <SearchBox\n                      v-model:searchText=\"formState.supplierName\"\n                      :columns=\"searchBoxColumns\"\n                      :data=\"supplierData\"\n                      :vfield=\"'name'\"\n                      :pagination=\"false\"\n                      twidth=\"500px\"\n                      @select=\"supplierSelect\"\n                      style=\"height: 60px\"\n                    />\n                  </a-form-item>\n                </a-col>\n                <a-col v-show=\"true\" :span=\"12\">\n                  <a-form-item\n                    name=\"productionNumber\"\n                    label=\"出厂编号\"\n                    :labelCol=\"{ span: 6 }\"\n                    :rules=\"[{ required: true, message: '请输入出厂编号' }]\"\n                  >\n                    <a-input\n                      v-model:value=\"formState.productionNumber\"\n                      placeholder=\"请输入出厂编号\"\n                    />\n                  </a-form-item>\n                </a-col>\n              </a-row>\n\n              <a-row :gutter=\"24\">\n                <a-col v-show=\"true\" :span=\"12\">\n                  <a-form-item\n                    label=\"出厂日期\"\n                    name=\"productionDate\"\n                    labelAlign=\"right\"\n                    :labelCol=\"{ span: 6 }\"\n                    :rules=\"[{ required: true, message: '请选择出厂日期' }]\"\n                  >\n                    <a-date-picker\n                      v-model:value=\"formState.productionDate\"\n                      style=\"min-width: 100%\"\n                      value-format=\"YYYY-MM-DD\"\n                    />\n                  </a-form-item>\n                </a-col>\n                <a-col v-show=\"true\" :span=\"12\">\n                  <a-form-item\n                    label=\"投运日期\"\n                    name=\"usedDate\"\n                    labelAlign=\"right\"\n                    :labelCol=\"{ span: 6 }\"\n                    :rules=\"[{ required: true, message: '请选择投运日期' }]\"\n                  >\n                    <a-date-picker\n                      v-model:value=\"formState.usedDate\"\n                      style=\"min-width: 100%\"\n                      value-format=\"YYYY-MM-DD\"\n                    />\n                  </a-form-item>\n                </a-col>\n              </a-row>\n\n              <a-row :gutter=\"24\">\n                <a-col v-show=\"true\" :span=\"12\">\n                  <a-form-item\n                    label=\"质保截止日期\"\n                    name=\"warrantyDate\"\n                    labelAlign=\"right\"\n                    :labelCol=\"{ span: 6 }\"\n                    :rules=\"[{ required: true, message: '请选择质保截止日期' }]\"\n                  >\n                    <a-date-picker\n                      v-model:value=\"formState.warrantyDate\"\n                      style=\"min-width: 100%\"\n                      value-format=\"YYYY-MM-DD\"\n                    />\n                  </a-form-item>\n                </a-col>\n                <a-col v-show=\"true\" :span=\"12\">\n                  <a-form-item\n                    name=\"subarrayName\"\n                    label=\"区域子阵\"\n                    :labelCol=\"{ span: 6 }\"\n                    :rules=\"[{ required: true, message: '请输入区域子阵' }]\"\n                  >\n                    <SearchBox\n                      v-model:searchText=\"formState.subarrayName\"\n                      :columns=\"searchBoxColumns\"\n                      :data=\"areasetData\"\n                      :vfield=\"'name'\"\n                      :pagination=\"false\"\n                      twidth=\"500px\"\n                      @select=\"areasetSelect\"\n                      style=\"height: 60px\"\n                    />\n                  </a-form-item>\n                </a-col>\n              </a-row>\n\n              <a-row :gutter=\"24\">\n                <a-col v-show=\"true\" :span=\"12\">\n                  <a-form-item\n                    name=\"name\"\n                    label=\"设备名称\"\n                    :labelCol=\"{ span: 6 }\"\n                    :rules=\"[{ required: true, message: '请输入设备名称' }]\"\n                  >\n                    <a-input v-model:value=\"formState.name\" placeholder=\"请输入设备名称\" />\n                  </a-form-item>\n                </a-col>\n                <a-col v-show=\"true\" :span=\"12\">\n                  <a-form-item\n                    name=\"qty\"\n                    label=\"数量\"\n                    :labelCol=\"{ span: 6 }\"\n                    :rules=\"[{ required: true, message: '请输入数量' }]\"\n                  >\n                    <a-input-number\n                      v-model:value=\"formState.qty\"\n                      :min=\"0\"\n                      placeholder=\"请输入数量\"\n                      :max=\"10000\"\n                      :step=\"0.1\"\n                    />\n                  </a-form-item>\n                </a-col>\n              </a-row>\n\n              <a-row :gutter=\"24\">\n                <a-col v-show=\"true\" :span=\"12\">\n                  <a-form-item\n                    label=\"计量单位\"\n                    name=\"unitId\"\n                    :labelCol=\"{ span: 6 }\"\n                    :wrapperCol=\"15\"\n                    :rules=\"[{ required: true, message: '请选择计量单位' }]\"\n                  >\n                    <DictSelectBox\n                      :type=\"`safety_tpl_unit`\"\n                      v-model:value=\"formState.unitId\"\n                      style=\"width: 100%\"\n                      @change=\"handleDictSelect\"\n                    />\n                  </a-form-item>\n                </a-col>\n              </a-row>\n\n              <a-row :gutter=\"24\">\n                <a-col v-show=\"true\" :span=\"24\" class=\"textarea-item\">\n                  <a-form-item\n                    label=\"备注\"\n                    name=\"remark\"\n                    labelAlign=\"right\"\n                    :labelCol=\"{ span: 3 }\"\n                  >\n                    <a-textarea\n                      :rows=\"5\"\n                      v-model:value=\"formState.remark\"\n                      placeholder=\"512字以内\"\n                      :maxlength=\"512\"\n                    />\n                  </a-form-item>\n                </a-col>\n              </a-row>\n            </a-card>\n            <a-card title=\"附件信息\">\n              <div class=\"clearfix\">\n                <a-upload\n                  :multiple=\"true\"\n                  :file-list=\"fileList\"\n                  :before-upload=\"beforeUpload\"\n                  @remove=\"handleRemove\"\n                >\n                  <a-button>\n                    <upload-outlined />\n                    Select File\n                  </a-button>\n                </a-upload>\n                <a-button\n                  type=\"primary\"\n                  :disabled=\"isNeedUpload\"\n                  :loading=\"uploading\"\n                  style=\"margin-top: 16px\"\n                  @click=\"handleUpload\"\n                >\n                  {{ uploading ? 'Uploading' : 'Start Upload' }}\n                </a-button>\n              </div>\n            </a-card>\n          </a-form>\n\n          <a-card title=\"\" :bordered=\"false\">\n            <a-tabs v-model:activeKey=\"activeKey\">\n              <a-tab-pane key=\"1\" tab=\"技术参数\">\n                <BasicTable @register=\"registerParameterTable\">\n                  <template #toolbar>\n                    <a-button type=\"primary\" :preIcon=\"IconEnum.ADD\" @click=\"handleParameterCreate\">\n                      添加\n                      <!-- {{ t('action.create') }} -->\n                    </a-button>\n                  </template>\n                  <template #bodyCell=\"{ column, record }\">\n                    <template v-if=\"column.key === 'action'\">\n                      <TableAction\n                        :actions=\"[\n                          {\n                            icon: IconEnum.EDIT,\n                            // label: t('action.edit'),\n                            label: '编辑',\n                            onClick: handleParameterEdit.bind(null, record),\n                          },\n                          {\n                            icon: IconEnum.DELETE,\n                            danger: true,\n                            // label: t('action.delete'),\n                            label: '删除',\n                            popConfirm: {\n                              // title: t('common.delMessage'),\n                              title: '请确认是否删除此数据项？',\n                              placement: 'left',\n                              confirm: handleParameterDelete.bind(null, record),\n                            },\n                          },\n                        ]\"\n                      />\n                    </template>\n                  </template>\n                </BasicTable>\n              </a-tab-pane>\n              <a-tab-pane key=\"2\" tab=\"主要元器件\">\n                <BasicTable @register=\"registerComponentTable\">\n                  <template #toolbar>\n                    <a-button type=\"primary\" :preIcon=\"IconEnum.ADD\" @click=\"handleComponentCreate\">\n                      添加\n                      <!-- {{ t('action.create') }} -->\n                    </a-button>\n                    <a-button\n                      type=\"warning\"\n                      :preIcon=\"IconEnum.EXPORT\"\n                      @click=\"handleComponentExport\"\n                    >\n                      导出\n                      <!-- {{ t('action.export') }} -->\n                    </a-button>\n                  </template>\n                  <template #bodyCell=\"{ column, record }\">\n                    <template v-if=\"column.key === 'action'\">\n                      <TableAction\n                        :actions=\"[\n                          {\n                            icon: IconEnum.EDIT,\n                            // label: t('action.edit'),\n                            label: '编辑',\n                            onClick: handleComponentEdit.bind(null, record),\n                          },\n                          {\n                            icon: IconEnum.DELETE,\n                            danger: true,\n                            // label: t('action.delete'),\n                            label: '删除',\n                            popConfirm: {\n                              // title: t('common.delMessage'),\n                              title: '请确认是否删除此数据项？',\n                              placement: 'left',\n                              confirm: handleComponentDelete.bind(null, record),\n                            },\n                          },\n                        ]\"\n                      />\n                    </template>\n                  </template>\n                </BasicTable>\n              </a-tab-pane>\n            </a-tabs>\n          </a-card>\n\n          <div>\n            <a-modal\n              v-model:visible=\"open\"\n              width=\"1500px\"\n              title=\"选择物料\"\n              @ok=\"handleOk\"\n              :bodyStyle=\"{ height: '850px' }\"\n            >\n              <PageWrapper\n                dense\n                contentFullHeight\n                fixedHeight\n                contentClass=\"flex\"\n                style=\"position: relative\"\n              >\n                <!-- 组织树 -->\n                <caterogry @select-tree=\"selectTree\" />\n                <!-- 数据表格 -->\n                <BasicTable\n                  @register=\"registerTable\"\n                  class=\"w-3/4 xl:w-10/12\"\n                  :searchInfo=\"searchInfo\"\n                />\n              </PageWrapper>\n            </a-modal>\n\n            <!-- 技术参数弹窗 -->\n            <a-modal\n              v-model:visible=\"parameterVisible\"\n              :title=\"parameterTitle\"\n              @ok=\"handleParameterOk\"\n              @cancel=\"parameterCancel\"\n            >\n              <a-form ref=\"parameterFormRef\" :model=\"parameterFormState\">\n                <a-row :gutter=\"24\">\n                  <a-col :span=\"20\">\n                    <a-form-item\n                      label=\"技术参数\"\n                      name=\"itemName\"\n                      :labelCol=\"{ span: 5 }\"\n                      :rules=\"[{ required: true, max: 128 }]\"\n                    >\n                      <a-input v-model:value=\"parameterFormState.itemName\" />\n                    </a-form-item>\n                  </a-col>\n                </a-row>\n                <a-row :gutter=\"24\">\n                  <a-col :span=\"20\">\n                    <a-form-item\n                      label=\"参数值\"\n                      name=\"itemValue\"\n                      :labelCol=\"{ span: 5 }\"\n                      :rules=\"[{ required: true, max: 128 }]\"\n                    >\n                      <a-input v-model:value=\"parameterFormState.itemValue\" />\n                    </a-form-item>\n                  </a-col>\n                </a-row>\n                <a-row :gutter=\"24\">\n                  <a-col :span=\"20\">\n                    <a-form-item\n                      label=\"排序号\"\n                      name=\"sort\"\n                      :labelCol=\"{ span: 5 }\"\n                      :rules=\"[{ required: false, max: 100 }]\"\n                    >\n                      <a-input v-model:value=\"parameterFormState.sort\" />\n                    </a-form-item>\n                  </a-col>\n                </a-row>\n                <a-row :gutter=\"24\">\n                  <a-col :span=\"20\">\n                    <a-form-item\n                      label=\"备注\"\n                      name=\"remark\"\n                      :labelCol=\"{ span: 5 }\"\n                      :rules=\"[{ required: false, max: 100 }]\"\n                    >\n                      <a-textarea\n                        v-model:value=\"parameterFormState.remark\"\n                        :maxlength=\"128\"\n                        :auto-size=\"{ minRows: 2, maxRows: 5 }\"\n                      />\n                    </a-form-item>\n                  </a-col>\n                </a-row>\n              </a-form>\n            </a-modal>\n\n            <!-- 主要元器件弹窗 -->\n            <a-modal\n              v-model:visible=\"componentVisible\"\n              :title=\"componentTitle\"\n              @ok=\"handleComponentOk\"\n              @cancel=\"componentCancel\"\n            >\n              <a-form ref=\"componentFormRef\" :model=\"componentFormState\">\n                <a-row :gutter=\"24\">\n                  <a-col :span=\"20\">\n                    <a-form-item\n                      label=\"资产编码\"\n                      name=\"code\"\n                      :labelCol=\"{ span: 5 }\"\n                      :rules=\"[{ required: true, max: 128 }]\"\n                    >\n                      <a-input v-model:value=\"componentFormState.code\" />\n                    </a-form-item>\n                  </a-col>\n                </a-row>\n                <a-row :gutter=\"24\">\n                  <a-col :span=\"20\">\n                    <a-form-item\n                      label=\"资产\"\n                      name=\"name\"\n                      :labelCol=\"{ span: 5 }\"\n                      :rules=\"[{ required: true, max: 128 }]\"\n                    >\n                      <a-input v-model:value=\"componentFormState.name\" />\n                    </a-form-item>\n                  </a-col>\n                </a-row>\n                <a-row :gutter=\"24\">\n                  <a-col :span=\"20\">\n                    <a-form-item\n                      label=\"物料编码\"\n                      name=\"materialCode\"\n                      :labelCol=\"{ span: 5 }\"\n                      :rules=\"[{ required: true, max: 128 }]\"\n                    >\n                      <a-input v-model:value=\"componentFormState.materialCode\" />\n                    </a-form-item>\n                  </a-col>\n                </a-row>\n                <a-row :gutter=\"24\">\n                  <a-col :span=\"20\">\n                    <a-form-item\n                      label=\"物料\"\n                      name=\"materialName\"\n                      :labelCol=\"{ span: 5 }\"\n                      :rules=\"[{ required: true, max: 128 }]\"\n                    >\n                      <a-input v-model:value=\"componentFormState.materialName\" />\n                    </a-form-item>\n                  </a-col>\n                </a-row>\n                <a-row :gutter=\"24\">\n                  <a-col :span=\"20\">\n                    <a-form-item\n                      label=\"物料类别\"\n                      name=\"subjectName\"\n                      :labelCol=\"{ span: 5 }\"\n                      :rules=\"[{ required: true, max: 128 }]\"\n                    >\n                      <a-input v-model:value=\"componentFormState.subjectName\" />\n                    </a-form-item>\n                  </a-col>\n                </a-row>\n                <a-row :gutter=\"24\">\n                  <a-col :span=\"20\">\n                    <a-form-item\n                      label=\"资产用途\"\n                      name=\"useTo\"\n                      :labelCol=\"{ span: 5 }\"\n                      :rules=\"[{ required: false, max: 100 }]\"\n                    >\n                      <a-textarea\n                        v-model:value=\"componentFormState.useTo\"\n                        :maxlength=\"128\"\n                        :auto-size=\"{ minRows: 2, maxRows: 5 }\"\n                      />\n                    </a-form-item>\n                  </a-col>\n                </a-row>\n                <a-row :gutter=\"24\">\n                  <a-col :span=\"20\">\n                    <a-form-item\n                      name=\"qty\"\n                      label=\"数量\"\n                      :labelCol=\"{ span: 5 }\"\n                      :rules=\"[{ required: true, message: '请输入数量' }]\"\n                    >\n                      <a-input v-model:value=\"componentFormState.qty\" placeholder=\"请输入数量\" />\n                    </a-form-item>\n                  </a-col>\n                </a-row>\n                <a-row :gutter=\"24\">\n                  <a-col :span=\"20\">\n                    <a-form-item\n                      label=\"计量单位\"\n                      name=\"unitId\"\n                      :labelCol=\"{ span: 5 }\"\n                      :rules=\"[{ required: true, message: '请选择计量单位' }]\"\n                    >\n                      <DictSelectBox\n                        :type=\"`safety_tpl_unit`\"\n                        v-model:value=\"componentFormState.unitId\"\n                        style=\"width: 100%\"\n                        @change=\"handleComponentDictSelect\"\n                      />\n                    </a-form-item>\n                  </a-col>\n                </a-row>\n              </a-form>\n            </a-modal>\n          </div>\n        </div>\n      </div>\n    </a-spin>\n  </div>\n</template>\n\n<script lang=\"ts\" setup>\n  import { reactive, ref, onMounted, toRaw } from 'vue';\n  import { message } from 'ant-design-vue';\n  import { useRouter, useRoute } from 'vue-router';\n  import type { UploadProps } from 'ant-design-vue';\n  import { assign } from 'lodash-es';\n  import { defHttp } from '/@/utils/http/axios';\n  import { IconEnum } from '@/enums/appEnum';\n  import { useMessage } from '@/hooks/web/useMessage';\n  import { exportExcelFile } from '@/utils/file/download';\n  import { useI18n } from '@/hooks/web/useI18n';\n  import { useUserStore } from '/@/store/modules/user';\n\n  import { BasicColumn } from '@/components/Table';\n  import { BasicTable, useTable, TableAction } from '/@/components/Table';\n  import { PageFooter, PageWrapper } from '/@/components/Page';\n  import DictSelectBox from '@/components/Framework/Combox/DictSelectBox.vue';\n  import SearchBox from '@/components/Framework/Combox/SearchBox.vue';\n  import caterogry from '/@/views/baseset/operation/material/materialCategory.vue';\n\n  import * as EquipmentApi from '@/api/po/equipment';\n  import * as ParameterApi from '@/api/po/equipment/parameter';\n  import * as ComponentApi from '@/api/po/equipment/component';\n  import * as FileApi from '@/api/infra/file';\n  import * as CommonApi from '@/api/baseset/common';\n  import { addTabPage } from '@/utils/route';\n\n  const router = useRouter();\n  const { createConfirm, createMessage } = useMessage();\n  const { t } = useI18n();\n  const { query } = useRoute();\n  const userStore = useUserStore();\n  const isLoading = ref(false);\n  const formRef = ref();\n\n  const activeKey = ref('1');\n\n  // 操作附件\n  // const fileColumns: BasicColumn[] = [\n  //   {\n  //     title: '附件类型',\n  //     dataIndex: 'type',\n  //     width: 220,\n  //     align: 'left',\n  //   },\n  //   {\n  //     title: '附件',\n  //     dataIndex: 'name',\n  //     width: 100,\n  //   },\n  // ];\n\n  const formState = reactive({\n    spinning: false,\n    processInstanceId: '',\n    id: '',\n    stationOrganId: '',\n    stationOrganName: '',\n    stationId: '',\n    stationName: '',\n    periodId: '',\n    periodName: '',\n\n    status: '',\n    code: '',\n    name: '',\n\n    materialId: '',\n    materialCode: '',\n    materialName: '',\n    materialWholeName: '',\n    materialCategoryCode: '',\n\n    factoryId: '',\n    factoryName: '',\n\n    supplierId: '',\n    supplierName: '',\n\n    productionNumber: '',\n\n    productionDate: '',\n    usedDate: '',\n    warrantyDate: '',\n\n    areaId: '',\n    areaName: '',\n    subarrayId: '',\n    subarrayName: '',\n\n    qty: '',\n    unitId: '',\n    unitName: '',\n    remark: '',\n  });\n\n  const onSearch = (searchValue: string) => {\n    open.value = true;\n  };\n\n  const searchInfo = reactive<any>({}); // 查询信息\n  const selectedNode = ref({}); // 被选择的节点\n  const selectedRow = ref({});\n  const open = ref<boolean>(false);\n\n  //==================================主要元器件  begin ==================================\n  const componentFormState = reactive({\n    id: '',\n    equipmentId: '',\n    code: '',\n    name: '',\n    materialId: '',\n    materialCode: '',\n    materialName: '',\n    materialWholeName: '',\n    subjectId: '',\n    subjectName: '',\n    useTo: '',\n    qty: '',\n    unitId: '',\n    unitName: '',\n  });\n  const componentVisible = ref<boolean>(false);\n  const componentTitle = ref('添加主要元器件');\n  const componentFormRef = ref();\n\n  const handleComponentCreate = () => {\n    componentTitle.value = '添加主要元器件';\n    componentVisible.value = true;\n    componentFormState.equipmentId = formState.id;\n  };\n\n  const componentCancel = (e: MouseEvent) => {\n    componentVisible.value = false;\n    componentFormState.id = '';\n    componentFormState.equipmentId = '';\n    componentFormState.code = '';\n    componentFormState.name = '';\n    componentFormState.materialId = '';\n    componentFormState.materialCode = '';\n    componentFormState.materialName = '';\n    componentFormState.materialWholeName = '';\n    componentFormState.subjectId = '';\n    componentFormState.subjectName = '';\n    componentFormState.useTo = '';\n    componentFormState.qty = '';\n    componentFormState.unitId = '';\n    componentFormState.unitName = '';\n  };\n\n  const handleComponentDictSelect = (value: string, node) => {\n    componentFormState.unitName = node.label;\n  };\n\n  const handleComponentOk = (e: MouseEvent) => {\n    console.log(e);\n    componentFormRef.value\n      .validate()\n      .then(async () => {\n        const formData = toRaw(componentFormState);\n        if (formData.id) {\n          await ComponentApi.updateEquipmentComponent(formData);\n        } else {\n          await ComponentApi.createEquipmentComponent(formData);\n        }\n        reloadComponent();\n        message.success('操作成功。');\n        componentVisible.value = false;\n      })\n      .catch((error) => {\n        console.log('error', error);\n      });\n  };\n\n  const handleComponentEdit = (record) => {\n    componentTitle.value = '修改主要元器件';\n    componentVisible.value = true;\n    ComponentApi.getEquipmentComponent(record.id).then((res) => {\n      assign(componentFormState, res);\n    });\n  };\n\n  const handleComponentDelete = (record) => {\n    ComponentApi.deleteEquipmentComponent(record.id).then(() => {\n      reloadComponent();\n      message.success('操作成功。');\n    });\n  };\n\n  async function handleComponentExport() {\n    createConfirm({\n      title: t('common.exportTitle'),\n      iconType: 'warning',\n      content: t('common.message.exportMessage'),\n      async onOk() {\n        await ComponentApi.exportEquipmentComponent().then((res) => {\n          exportExcelFile(res?.data, '主要元器件.xls');\n        });\n        createMessage.success(t('common.exportSuccessText'));\n      },\n    });\n  }\n\n  const componentColumns: BasicColumn[] = [\n    {\n      title: '主键',\n      dataIndex: 'id',\n      width: 160,\n    },\n    {\n      title: '设备物资台账ID',\n      dataIndex: 'equipmentId',\n      width: 160,\n    },\n    {\n      title: '资产编码',\n      dataIndex: 'code',\n      width: 160,\n    },\n    {\n      title: '资产',\n      dataIndex: 'name',\n      width: 160,\n    },\n    {\n      title: '物料',\n      dataIndex: 'materialId',\n      width: 160,\n    },\n    {\n      title: '物料编码',\n      dataIndex: 'materialCode',\n      width: 160,\n    },\n    {\n      title: '物料',\n      dataIndex: 'materialName',\n      width: 160,\n    },\n    {\n      title: '物料全称',\n      dataIndex: 'materialWholeName',\n      width: 160,\n    },\n    {\n      title: '物料类别ID',\n      dataIndex: 'subjectId',\n      width: 160,\n    },\n    {\n      title: '物料类别',\n      dataIndex: 'subjectName',\n      width: 160,\n    },\n    {\n      title: '资产用途',\n      dataIndex: 'useTo',\n      width: 160,\n    },\n    {\n      title: '数量',\n      dataIndex: 'qty',\n      width: 160,\n    },\n    {\n      title: '计量单位ID',\n      dataIndex: 'unitId',\n      width: 160,\n    },\n    {\n      title: '计量单位',\n      dataIndex: 'unitName',\n      width: 160,\n    },\n  ];\n  const [registerComponentTable, { reload: reloadComponent }] = useTable({\n    title: '',\n    api: ComponentApi.getEquipmentComponentPage,\n    columns: componentColumns,\n    formConfig: { labelWidth: 120 },\n    useSearchForm: false,\n    showTableSetting: true,\n    actionColumn: {\n      width: 140,\n      // title: t('common.action'),\n      title: '操作',\n      dataIndex: 'action',\n      fixed: 'right',\n    },\n  });\n  //==================================主要元器件  end ==================================\n\n  //==================================技术参数  begin ==================================\n\n  const parameterFormState = reactive({\n    id: '',\n    equipmentId: '',\n    itemName: '',\n    itemValue: '',\n    status: '',\n    sort: '',\n    remark: '',\n  });\n  const parameterVisible = ref<boolean>(false);\n  const parameterTitle = ref('添加技术参数');\n  const parameterFormRef = ref();\n\n  const handleParameterCreate = () => {\n    parameterTitle.value = '添加技术参数';\n    parameterVisible.value = true;\n    parameterFormState.equipmentId = formState.id;\n  };\n\n  const parameterCancel = (e: MouseEvent) => {\n    parameterVisible.value = false;\n    parameterFormState.id = '';\n    parameterFormState.equipmentId = '';\n    parameterFormState.itemName = '';\n    parameterFormState.itemValue = '';\n    parameterFormState.status = '';\n    parameterFormState.sort = '';\n    parameterFormState.remark = '';\n  };\n\n  const handleParameterOk = (e: MouseEvent) => {\n    parameterFormRef.value\n      .validate()\n      .then(() => {\n        const formData = toRaw(parameterFormState);\n        if (formData.id) {\n          ParameterApi.updateEquipmentParameter(formData);\n        } else {\n          ParameterApi.createEquipmentParameter(formData);\n        }\n        reloadParameter();\n        message.success('保存成功。');\n        parameterVisible.value = false;\n      })\n      .catch((error) => {\n        console.log('error', error);\n      });\n  };\n\n  const handleParameterEdit = (record) => {\n    parameterTitle.value = '修改技术参数';\n    parameterVisible.value = true;\n    ParameterApi.getEquipmentParameter(record.id).then((res) => {\n      assign(parameterFormState, res);\n    });\n  };\n\n  const handleParameterDelete = (record) => {\n    ParameterApi.deleteEquipmentParameter(record.id).then(() => {\n      reloadParameter();\n    });\n  };\n\n  const parameterColumns: BasicColumn[] = [\n    {\n      title: '主键',\n      dataIndex: 'id',\n      width: 160,\n    },\n    {\n      title: '设备物资台账ID',\n      dataIndex: 'equipmentId',\n      width: 160,\n    },\n    {\n      title: '技术参数',\n      dataIndex: 'itemName',\n      width: 160,\n    },\n    {\n      title: '参数值',\n      dataIndex: 'itemValue',\n      width: 160,\n    },\n    {\n      title: '状态',\n      dataIndex: 'status',\n      width: 160,\n    },\n    {\n      title: '排序号',\n      dataIndex: 'sort',\n      width: 160,\n    },\n    {\n      title: '备注',\n      dataIndex: 'remark',\n      width: 160,\n    },\n  ];\n  const [registerParameterTable, { reload: reloadParameter }] = useTable({\n    title: '',\n    api: ParameterApi.getEquipmentParameterPage,\n    columns: parameterColumns,\n    formConfig: { labelWidth: 120 },\n    useSearchForm: false,\n    showTableSetting: true,\n    actionColumn: {\n      width: 140,\n      // title: t('common.action'),\n      title: '操作',\n      dataIndex: 'action',\n      fixed: 'right',\n    },\n  });\n  //==================================技术参数  end ==================================\n\n  //==================================附件  begin ==================================\n  const uploadHeaders = ref(); // 上传 Header 头\n  uploadHeaders.value = {\n    Authorization: 'Bearer ' + userStore.getToken,\n  };\n  const fileList = ref<UploadProps['fileList']>([]);\n  const uploading = ref<boolean>(false);\n  const isNeedUpload = ref<boolean>(true);\n\n  const isNeedUploadFile = () => {\n    const isExits = fileList.value.some((ele) => !ele.hasOwnProperty('id'));\n    isNeedUpload.value = !isExits;\n  };\n\n  const handleRemove: UploadProps['onRemove'] = (file) => {\n    createConfirm({\n      title: '确认操作',\n      iconType: 'warning',\n      content: '请确认是否删除此数据项？',\n      async onOk() {\n        if (!file.id) {\n          const index = fileList.value.indexOf(file);\n          const newFileList = fileList.value.slice();\n          newFileList.splice(index, 1);\n          fileList.value = newFileList;\n          isNeedUploadFile();\n        } else {\n          FileApi.deleteFile(file.id).then(() => {\n            const index = fileList.value.indexOf(file);\n            const newFileList = fileList.value.slice();\n            newFileList.splice(index, 1);\n            fileList.value = newFileList;\n            isNeedUploadFile();\n          });\n        }\n      },\n    });\n    return false;\n  };\n\n  const beforeUpload: UploadProps['beforeUpload'] = (file) => {\n    // 1、控制文件数量\n    if (fileList.value.length + 1 > 5) {\n      message.warning('超过文件上传数量限制。');\n      return false;\n    }\n    // 2、控制上传的文件大小\n    if (file.size > 1073741824) {\n      message.warning('文件大小超过最大限度1G。');\n      return false;\n    }\n    // 3、控制上传文件不能为空\n    if (file.size === 0) {\n      message.warning('所选信息中存在空文件或目录，请重新选择。');\n      return false;\n    }\n    // 4、控制已上传文件不重复\n    for (let i = 0; i < fileList.value.length; i++) {\n      const item = fileList.value[i];\n      if (item.name === file.name) {\n        message.warning('不允许重复上传。');\n        return false;\n      }\n    }\n    // 5、控制上传文件的类型 arr是上传类型的白名单\n    const type = file.name.slice(file.name.lastIndexOf('.') + 1).toLowerCase();\n    const arr = ['.jpg', '.png', '.jpeg', '.docx', '.xlsx', '.txt', '.pdf', '.zip'];\n    if (!arr.includes('.' + type)) {\n      message.warning(`不支持以 .${type} 扩展类型的文件或图片上传。`);\n      return false;\n    }\n    fileList.value = [...fileList.value, file];\n    isNeedUploadFile();\n    return false;\n  };\n\n  const handleUpload = () => {\n    const formData = new FormData();\n    formData.append('application', 'po'); //附件上传必须携带参数：应用\n    formData.append('module', 'equipment'); //附件上传必须携带参数：模块\n    formData.append('bizId', formState.id); //附件上传必须携带参数：业务ID\n\n    if (!formState.id) {\n      message.warning(`请先保存。`);\n      return false;\n    }\n\n    fileList.value.forEach((file: UploadProps['fileList'][number]) => {\n      if (!file.id) {\n        formData.append('files', file as any);\n      }\n    });\n    uploading.value = true;\n\n    FileApi.uploadFile(formData)\n      .then(() => {\n        fileList.value = [];\n        uploading.value = false;\n        getFiles(formState.id);\n        isNeedUploadFile();\n        message.success('操作成功。');\n      })\n      .catch(() => {\n        uploading.value = false;\n        isNeedUploadFile();\n        message.error('操作失败。');\n      });\n  };\n\n  const getFiles = async (bizFileId) => {\n    FileApi.getFiles({ bizId: bizFileId }).then((res) => {\n      fileList.value = res;\n    });\n  };\n\n  //==================================附件  end ==================================\n\n  // 列表表头\n  const columns: BasicColumn[] = [\n    {\n      key: 'fullName',\n      title: '物料类别',\n      dataIndex: 'fullName',\n      align: 'center',\n      width: 120,\n    },\n    {\n      key: 'code',\n      title: '物料编码',\n      dataIndex: 'code',\n      align: 'center',\n      width: 120,\n    },\n    {\n      key: 'name',\n      title: '物料名称',\n      dataIndex: 'name',\n      align: 'center',\n      width: 120,\n    },\n    {\n      key: 'unit',\n      title: '计量单位',\n      dataIndex: 'unit',\n      align: 'center',\n      width: 120,\n    },\n    {\n      key: 'warrantyMonth',\n      title: '质保期(月',\n      dataIndex: 'warrantyMonth',\n      align: 'center',\n      width: 120,\n    },\n    {\n      key: 'status',\n      title: '状态',\n      dataIndex: 'status',\n      align: 'center',\n      width: 120,\n    },\n  ];\n\n  const statusArr: any = [\n    { label: '全部', value: '' },\n    { label: '有效', value: '1' },\n    { label: '无效', value: '0' },\n  ];\n\n  const searchForm: any = {\n    baseColProps: { lg: 6, md: 8 },\n    labelWidth: 90,\n    schemas: [\n      {\n        label: '物料名称',\n        field: 'name',\n        component: 'Input',\n      },\n      {\n        label: '物料编码',\n        field: 'code',\n        component: 'Input',\n      },\n      {\n        label: '状态',\n        field: 'status',\n        component: 'Select',\n        componentProps: {\n          options: statusArr,\n        },\n      },\n    ],\n  };\n\n  // 列表数据\n  const getDataApi = (url, params) =>\n    defHttp.get(\n      {\n        url: url,\n        params,\n      },\n      { isOnlyResult: true },\n    );\n\n  const onSelectRow = (data, selected) => {\n    if (selected) {\n      selectedRow.value = data;\n    } else {\n      selectedRow.value = {};\n    }\n  };\n\n  const onSelectAll = () => {};\n\n  const [registerTable, { reload: reloadMaterial, getSelectRows }] = useTable({\n    title: '物料列表',\n    api: CommonApi.getMaterialPage,\n    rowKey: 'id',\n    columns,\n    useSearchForm: true,\n    formConfig: searchForm,\n    showTableSetting: true,\n    bordered: true,\n    pagination: true,\n    rowSelection: {\n      type: 'radio',\n      onSelect: onSelectRow,\n      onSelectAll: onSelectAll,\n    },\n  });\n\n  const selectTree = (data) => {\n    selectedNode.value = data;\n    searchInfo.materialCategoryCode = data.code;\n    reloadMaterial();\n  };\n\n  const supplierData = ref([]);\n  const manufacturerData = ref([]);\n  const areasetData = ref([]);\n\n  const supplierSelect = (data) => {\n    const record = toRaw(data.record);\n    formState.supplierId = record.key;\n  };\n\n  const factorySelect = (data) => {\n    const record = toRaw(data.record);\n    formState.factoryId = record.key;\n  };\n\n  const areasetSelect = (data) => {\n    const record = toRaw(data.record);\n    formState.areaId = record.key;\n    formState.subarrayId = record.key;\n    formState.areaName = record.name;\n  };\n\n  const handleOk = () => {\n    let rows = getSelectRows();\n    if (rows.length == 0) {\n      message.warning('请选择物料。');\n      return false;\n    }\n    open.value = false;\n    const materialObj = rows[0];\n    formState.materialId = materialObj.id;\n    formState.materialCode = materialObj.code;\n    formState.materialName = materialObj.name;\n    formState.materialWholeName = materialObj.fullName + '-' + materialObj.name;\n    formState.materialCategoryCode = materialObj.materialCategoryCode;\n\n    doSearchBoxData();\n  };\n\n  const AreasetApi = '/baseset/areaset/get-list';\n  const RelatedPartyApi = '/baseset/related-party/get-related-party-list';\n\n  const doSearchBoxData = () => {\n    const params = {\n      status: 1,\n      partyTypeCodes: 'supplier',\n      materialCategoryIds: formState.materialCategoryCode,\n    };\n    getSearchBoxData(RelatedPartyApi, params, supplierData);\n\n    params['partyTypeCodes'] = 'manufacturer';\n    getSearchBoxData(RelatedPartyApi, params, manufacturerData);\n  };\n\n  const getSearchBoxData = (url, params, searchBoxData) => {\n    getDataApi(url, params).then((res) => {\n      searchBoxData.value.splice(0, searchBoxData.value.length);\n\n      res.forEach((e) => {\n        searchBoxData.value.push({ id: e.id, code: e.code, name: e.name });\n      });\n      const dataList = searchBoxData.value;\n      searchBoxData.value = [];\n      setTimeout(() => {\n        searchBoxData.value = dataList;\n      }, 100);\n    });\n  };\n\n  const searchBoxColumns = ref([\n    { title: '编码', dataIndex: 'code', key: 'code', fixed: 'left', minWidth: 50 },\n    { title: '公司名称', dataIndex: 'name', key: 'name', fixed: 'left', minWidth: 50 },\n  ]);\n\n  const handleDictSelect = (value: string, node) => {\n    formState.unitName = node.label;\n  };\n\n  const handleSave = () => {\n    formRef.value\n      .validate()\n      .then(() => {\n        const formData = toRaw(formState);\n        if (!compareDate(formData.usedDate, formData.productionDate)) {\n          message.warning('投运日期要超过出厂日期。');\n          return;\n        }\n        if (!compareDate(formData.warrantyDate, formData.usedDate)) {\n          message.warning('质保到期时间要超过投运日期。');\n          return;\n        }\n        doSave();\n      })\n      .catch((error) => {\n        console.log('onSubmit=》error', error);\n      });\n  };\n\n  const doSave = async () => {\n    formState.spinning = true;\n    try {\n      const formData = toRaw(formState);\n      if (formState.id) {\n        await EquipmentApi.updateEquipment(formData);\n      } else {\n        await EquipmentApi.createEquipment(formData);\n      }\n      console.log('formData', formData);\n      message.success('保存成功。');\n      // router.push('/po/equipment/index');\n      addTabPage('/po/equipment/index');\n    } catch (error) {\n      console.log('error', error);\n    } finally {\n      formState.spinning = false;\n    }\n  };\n\n  const handleCancel = () => {};\n\n  const compareDate = (d1, d2) => {\n    let date1 = new Date(Date.parse(d1));\n    let date2 = new Date(Date.parse(d2));\n    return date1 > date2;\n  };\n\n  onMounted(async () => {\n    if (!query.id) {\n      formState.status = '1';\n\n      assign(formState, query);\n      const params = { stationId: formState.stationId, stationPeriodId: formState.periodId };\n      getSearchBoxData(AreasetApi, params, areasetData);\n\n      EquipmentApi.getEquipmentCode().then((res) => {\n        formState.code = res;\n      });\n    } else {\n      EquipmentApi.getEquipment(query.id).then((res) => {\n        assign(formState, res);\n\n        formState.status = res.status + '';\n\n        doSearchBoxData();\n\n        const params = { stationId: formState.stationId, stationPeriodId: formState.periodId };\n        getSearchBoxData(AreasetApi, params, areasetData);\n      });\n    }\n\n    console.log('formState', formState);\n  });\n</script>\n<style lang=\"less\" scoped>\n  .process-box {\n    width: calc(100% - 20px);\n    height: calc(100% - 20px);\n    margin: 10px;\n\n    .content {\n      background: #fefefe;\n\n      .anticon-search {\n        color: #000000d9;\n      }\n\n      .left-panel {\n        width: 77.5%;\n        height: calc(100vh - 200px);\n        margin: 5px 0;\n        padding: 10px 0 5px;\n        float: left;\n        overflow-y: auto;\n        border: 1px solid #f0f0f0;\n        background: #fefefe;\n      }\n\n      .right-panel {\n        width: 22.25%;\n        height: calc(100vh - 200px);\n        margin: 5px 0;\n        padding: 10px 0 5px;\n        float: right;\n        border: 1px solid #f0f0f0;\n        background: #fefefe;\n\n        .button-content {\n          margin: 16px 0 0 16px;\n\n          .ant-btn {\n            margin: 0 10px 0 0;\n          }\n        }\n      }\n    }\n  }\n</style>\n"],"names":["AreasetApi","RelatedPartyApi","useRouter","createConfirm","createMessage","useMessage","t","useI18n","query","useRoute","userStore","useUserStore","isLoading","ref","formRef","activeKey","formState","reactive","onSearch","searchValue","open","searchInfo","selectedNode","selectedRow","componentFormState","componentVisible","componentTitle","componentFormRef","handleComponentCreate","componentCancel","e","handleComponentDictSelect","value","node","handleComponentOk","__async","formData","toRaw","ComponentApi.updateEquipmentComponent","ComponentApi.createEquipmentComponent","reloadComponent","message","error","handleComponentEdit","record","ComponentApi.getEquipmentComponent","res","assign","handleComponentDelete","ComponentApi.deleteEquipmentComponent","handleComponentExport","ComponentApi.exportEquipmentComponent","exportExcelFile","componentColumns","registerComponentTable","useTable","ComponentApi.getEquipmentComponentPage","parameterFormState","parameterVisible","parameterTitle","parameterFormRef","handleParameterCreate","parameterCancel","handleParameterOk","ParameterApi.updateEquipmentParameter","ParameterApi.createEquipmentParameter","reloadParameter","handleParameterEdit","ParameterApi.getEquipmentParameter","handleParameterDelete","ParameterApi.deleteEquipmentParameter","parameterColumns","registerParameterTable","ParameterApi.getEquipmentParameterPage","uploadHeaders","fileList","uploading","isNeedUpload","isNeedUploadFile","isExits","ele","handleRemove","file","FileApi.deleteFile","index","newFileList","beforeUpload","type","handleUpload","FileApi.uploadFile","getFiles","bizFileId","FileApi.getFiles","columns","searchForm","getDataApi","url","params","defHttp","onSelectRow","data","selected","onSelectAll","registerTable","reloadMaterial","getSelectRows","CommonApi.getMaterialPage","selectTree","supplierData","manufacturerData","areasetData","supplierSelect","factorySelect","areasetSelect","handleOk","rows","materialObj","doSearchBoxData","getSearchBoxData","searchBoxData","dataList","searchBoxColumns","handleDictSelect","handleSave","compareDate","doSave","EquipmentApi.updateEquipment","EquipmentApi.createEquipment","addTabPage","handleCancel","d1","d2","date1","date2","onMounted","EquipmentApi.getEquipment","EquipmentApi.getEquipmentCode"],"mappings":"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"}