import{f as p,a as d}from"./index.esm-c216ed00.js";import{T as u}from"./BasicForm.vue_vue_type_style_index_0_lang-1ba7be9e.js";import{ca as b,b as f,a7 as I,av as T,ax as _}from"./index.js";import"./index-316f6ffb.js";import"./index-085d06c7.js";import{u as r}from"./useRender-21ce56fb.js";import{B as h}from"./BasicTable-0434a334.js";import{u as x}from"./useTable-109483b3.js";import"./antd-15ac76ed.js";import{c as g}from"./index-c0893416.js";import{d as w,o as y,Z as i,_ as C,f as R,aa as k,a9 as P,u as a,ac as v}from"./vue-71d1abb3.js";import"./index-f4fc48e6.js";import"./useTabs-2b062e85.js";import"./download-03e71dd5.js";import"./index-5d49b7a7.js";import"./SearchBox-22bb02d6.js";import"./UploadBox-636ecf02.js";import"./Dialog-0a006d82.js";import"./DictSelectBox.vue_vue_type_script_setup_true_lang-e03e9fe8.js";import"./OrganDialog-dd1023ce.js";import"./useWindowSizeFn-13b1b8a2.js";import"./sortable.esm-4ae27e0b.js";import"./dict-c04c0dd8.js";import"./useForm-dea3ed18.js";import"./uniqBy-92d3bc7f.js";const D=[{dictType:"bpm_process_instance_result",value:"1",label:"处理中",colorType:"primary",cssClass:""},{dictType:"bpm_process_instance_result",value:"2",label:"通过",colorType:"success",cssClass:""},{dictType:"bpm_process_instance_result",value:"3",label:"不通过",colorType:"danger",cssClass:""},{dictType:"bpm_process_instance_result",value:"4",label:"已取消",colorType:"info",cssClass:""},{dictType:"bpm_process_instance_result",value:"5",label:"终止",colorType:"info",cssClass:""}],B=[{label:"单据编号",field:"businessCode",component:"Input",colProps:{span:8}},{label:"创建时间",field:"createTime",component:"RangePicker",componentProps:{showTime:!0,format:"YYYY-MM-DD HH:mm:ss",valueFormat:"x"},colProps:{span:8}}],M=[{title:"单据编号",dataIndex:"businessCode",width:150},{title:"标题",dataIndex:"description",width:200},{title:"流程名称",dataIndex:"processInstance.name",width:200,customRender:({record:e})=>e.processInstance.name},{title:"申请部门",dataIndex:"deptName",width:100,customRender:({record:e})=>e.processInstance.deptName},{title:"申请人",dataIndex:"startUserNickname",width:100,customRender:({record:e})=>e.processInstance.startUserNickname},{title:"结果",dataIndex:"result",width:100,customRender:({text:e})=>N("bpmProcessInstanceResult",e).label},{title:"审批意见",dataIndex:"reason",width:180},{title:"申请时间",dataIndex:"createTime",width:200,customRender:({text:e})=>r.renderDate(e)},{title:"审批时间",dataIndex:"endTime",width:180,customRender:({text:e})=>r.renderDate(e)},{title:"耗时",dataIndex:"durationInMillis",width:180,customRender:({text:e})=>b(e)}];function N(e,o){const t={};return e=="bpmProcessInstanceResult"&&p(D,function(s){s.value===o.toString()&&d(t,s)}),t}const ne=w({name:"BpmDoneTask",__name:"index",setup(e){const{t:o}=f(),[t,{reload:s}]=x({title:"已办任务",api:g,columns:M,formConfig:{labelWidth:120,schemas:B},useSearchForm:!0,showTableSetting:!0,bordered:!0,actionColumn:{width:140,title:o("common.operate"),dataIndex:"action",fixed:"right"}}),c=n=>{_(`${n.bpmProcessDefinitionRespVO.formCustomViewPath}?processInstanceId=${n.processInstance.id}`)};return y(()=>{I.getInstance().listen("workflow-task-done",()=>{setTimeout(()=>{s()},500)})}),(n,V)=>(i(),C("div",null,[R(a(h),{onRegister:a(t)},{bodyCell:k(({column:l,record:m})=>[l.key==="action"?(i(),P(a(u),{key:0,actions:[{icon:a(T).VIEW,label:"详情",onClick:c.bind(null,m)}]},null,8,["actions"])):v("",!0)]),_:1},8,["onRegister"])]))}});export{ne as default};
//# sourceMappingURL=index-a5bb754a.js.map
