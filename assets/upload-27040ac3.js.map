{"version":3,"file":"upload-27040ac3.js","sources":["../../src/utils/upload.ts"],"sourcesContent":["import { FILE_PREVIEW } from '@/constant/constant';\nimport { useUserStore } from '/@/store/modules/user';\n\nexport const getTokenURL = (url) => {\n  const userStore = useUserStore();\n  const token = userStore.getToken;\n  return `${url}?token=${token}`;\n};\n\nexport const getPreviewDomain = () => {\n  const previewURL = `${FILE_PREVIEW.PREVIEW_DOMAIN}:${FILE_PREVIEW.PREVIEW_PORT}`; // 预览域名\n  return previewURL;\n};\n\nexport const getDownloadURL = (url, type = 'donwload') => {\n  const pictureTypes = JSON.parse(FILE_PREVIEW.IMAGE_TYPES);\n  const arrays = pictureTypes.filter((item) => url.indexOf(item) > 0);\n  if (arrays.length === 0 && type === 'preview') {\n    const domain = `${FILE_PREVIEW.FILE_DOMAIN}:${FILE_PREVIEW.FILE_PORT}`;\n    return domain + getTokenURL(url);\n  } else {\n    const domain = `${FILE_PREVIEW.DOWNLOAD_DOMAIN}:${FILE_PREVIEW.DOWNLOAD_PORT}`;\n    return domain + getTokenURL(url);\n  }\n};\n\nexport const getPreviewURL = (url, name) => {\n  const title = name || '文档预览';\n  const previewUrl = `${getDownloadURL(url, 'preview')}&fullfilename=${title}`;\n  return previewUrl;\n};\n\nexport const getFilePreviewURL = (url, name) => {\n  const base = btoa(encodeURI(getPreviewURL(url, name)));\n  const purl = encodeURIComponent(base);\n  return `${getPreviewDomain()}/onlinePreview?url=${purl}`;\n};\n"],"names":["getTokenURL","url","token","useUserStore","getDownloadURL","type","FILE_PREVIEW","item"],"mappings":"wCAGa,MAAAA,EAAeC,GAAQ,CAElC,MAAMC,EADYC,IACM,SACjB,MAAA,GAAGF,CAAG,UAAUC,CAAK,EAC9B,EAOaE,EAAiB,CAACH,EAAKI,EAAO,aACpB,KAAK,MAAMC,EAAa,WAAW,EAC5B,OAAQC,GAASN,EAAI,QAAQM,CAAI,EAAI,CAAC,EACvD,SAAW,GAAKF,IAAS,UACnB,GAAGC,EAAa,WAAW,IAAIA,EAAa,SAAS,GACpDN,EAAYC,CAAG,EAEhB,GAAGK,EAAa,eAAe,IAAIA,EAAa,aAAa,GAC5DN,EAAYC,CAAG"}