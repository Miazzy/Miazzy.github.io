{"version":3,"file":"areaRealTimeAnalysis-4b16c6a3.js","sources":["../../src/views/monitor/realTimeAnalysis/areaRealTimeAnalysis.vue"],"sourcesContent":["<!--\n * @Description: 实时分析-区域实时分析\n * @Date: 2023-10-23 17:31:10\n * @LastEditTime: 2023-11-10 10:02:21\n * @FilePath: \\ygwl-framework\\src\\views\\monitor\\realTimeAnalysis\\areaRealTimeAnalysis.vue\n-->\n<template>\n  <!-- <PageWrapper dense contentFullHeight contentClass=\"flex\" style=\"position: relative\"> -->\n  <div class=\"real-time-analysis\">\n    <a-row class=\"real-time-analysis-row\" type=\"flex\" :wrap=\"false\">\n      <a-col flex=\"298px\">\n        <CommonTree\n          :toolbar=\"true\"\n          :canEdit=\"false\"\n          :canAdd=\"false\"\n          :canDelete=\"false\"\n          :isShowOperationBtns=\"false\"\n          class=\"fit-common-tree\"\n          title=\"电站组织\"\n          :value=\"stationTreeData\"\n          :fieldNames=\"{ key: 'id', title: 'name' }\"\n          @select=\"handleSelect\"\n          :selectedKeys=\"selectedKeys\"\n          :expandedKeys=\"expandedKeys\"\n        />\n      </a-col>\n      <a-col flex=\"auto\">\n        <div class=\"right-box\">\n          <div id=\"chart-box-content\" class=\"right-row-box chart-box-content\" ref=\"chartBoxContent\">\n            <div class=\"box-header\">\n              <div class=\"header-left\">{{ selectedShowData.label }}</div>\n              <div class=\"header-right\">\n                <Select\n                  v-model:value=\"area\"\n                  mode=\"multiple\"\n                  style=\"min-width: 206px\"\n                  placeholder=\"选择区域\"\n                  :options=\"areaOptions\"\n                  :max-tag-count=\"2\"\n                  :filter-option=\"filAreaOption\"\n                  showArrow\n                  @change=\"handleAreaChange\"\n                />\n                &nbsp;\n                <a-select\n                  v-model:value=\"selectedShowData\"\n                  allow-clear\n                  style=\"min-width: 206px\"\n                  placeholder=\"选择指标项\"\n                  :options=\"indicatorOptions\"\n                  showArrow\n                  @change=\"handleSelectionChange\"\n                />\n              </div>\n            </div>\n            <div class=\"box-content\">\n              <div class=\"chart-box\">\n                <div id=\"customerChart\" style=\"width: 1300px; height: 320px\"></div>\n                <!-- <EchartPillarChart\n                  :data=\"pchartData\"\n                  :colors=\"pchartData.colors\"\n                  :width=\"1200\"\n                  :height=\"650\"\n                  :name=\"pChartSeriesName\"\n                /> -->\n              </div>\n            </div>\n          </div>\n          <div class=\"right-row-box\">\n            <div class=\"data-table-box\">\n              <div class=\"table-title-line\"></div>\n              <BasicTable @register=\"registerTable\">\n                <template #toolbar>\n                  <a-button\n                    style=\"margin-top: -9px\"\n                    class=\"yellow-btn\"\n                    @click=\"exportHandler\"\n                    :preIcon=\"IconEnum.EXPORT\"\n                  >\n                    导出\n                  </a-button>\n                </template>\n              </BasicTable>\n            </div>\n          </div>\n        </div>\n      </a-col>\n    </a-row>\n  </div>\n  <!-- </PageWrapper> -->\n</template>\n\n<script lang=\"ts\" setup>\n  import { ref, onMounted, reactive, shallowRef } from 'vue';\n  import CommonTree from '@/components/Framework/Tree/CommonTree.vue';\n  import { Select } from 'ant-design-vue';\n  import { TreeItem } from '/@/components/Tree';\n  import EchartPillarChart from '/@/components/Framework/Chart/EchartPillarChart.vue';\n  import { BasicTable, useTable, TableAction, BasicColumn } from '/@/components/Table';\n  import { exportExcelFile } from '@/utils/file/download';\n  import {\n    getStationTree,\n    getAreaRealData,\n    getAreaChartData,\n    getAreaExport,\n    getAreas,\n  } from '../monitorApi.ts';\n  import * as echarts from 'echarts';\n  import { IconEnum } from '@/enums/appEnum';\n  import { useMessage } from '@/hooks/web/useMessage';\n\n  const { createConfirm } = useMessage();\n\n  const selectedKeys = ref([]);\n  const expandedKeys = ref([]);\n  const selectedStationId = ref('');\n  const stationTreeData = ref<TreeItem[]>([]);\n  // 查询电站树数据\n  async function queryDeptTreeList() {\n    let result = await getStationTree();\n    stationTreeData.value = result;\n    setTimeout(() => {\n      expandedKeys.value = [result[0].id, result[0].children[0].id];\n      selectedKeys.value = [result[0].children[0].id];\n      selectedStationId.value = result[0].children[0].id;\n      getAreaList();\n      setOption();\n      reload();\n    }, 500);\n    // expandedKeys.value = ['01DDAC7F177A450AB0FD676806AA874F', 'B6717C6744F44E53814F00AEEDEBFA74'];\n    //   selectedKeys.value = ['B6717C6744F44E53814F00AEEDEBFA74'];\n    //   selectedStationId.value = 'B6717C6744F44E53814F00AEEDEBFA74';\n  }\n  // 左侧树状菜单选中事件\n  async function handleSelect(nodes = {}) {\n    selectedStationId.value = null;\n    if (nodes.id != null && nodes.nodeKindId == 'station') {\n      selectedStationId.value = nodes.powerStationId;\n      getAreaList();\n      setOption();\n      reload();\n    }\n  }\n\n  const area = ref(['all']);\n  const areaOptions = ref<SelectProps['options']>([]);\n  // 获取区域列表数据\n  const getAreaList = async () => {\n    let res = await getAreas({ stationId: selectedStationId.value });\n    if (res?.length) {\n      area.value = ['all'];\n      let temp = [{ label: '全部区域', value: 'all' }];\n      res.forEach((element) => {\n        temp.push({ value: element.id, label: element.name });\n      });\n      areaOptions.value = temp;\n    }\n  };\n  const handleAreaChange = (value: string[]) => {\n    console.log(`selected ${value}`);\n    if (value.length > 1 && value.includes('all')) {\n      if (value[value.length - 1] === 'all') {\n        area.value = ['all'];\n      } else {\n        area.value = value.slice(1);\n      }\n    } else {\n      area.value = value;\n    }\n    reload();\n\n    setOption();\n  };\n\n  const filAreaOption = (input: string, option: any) => {\n    return option.label.indexOf(input) >= 0;\n  };\n  // 导出\n  const exportHandler = async () => {\n    createConfirm({\n      title: '提示',\n      iconType: 'warning',\n      content: '确定要导出所有记录？',\n      async onOk() {\n        await getAreaExport({ stationId: selectedStationId.value }).then((res) => {\n          exportExcelFile(res?.data, '区域实时数据.xls');\n        });\n      },\n    });\n  };\n\n  const selectedShowData = ref({ label: '等效小时数', value: 'ppr', dataKind: 'bar' });\n  const indicatorOptions = ref([\n    { label: '装机容量', value: 'installedCapacity', dataKind: 'bar' },\n    { label: '等效小时数', value: 'ppr', dataKind: 'bar' },\n    { label: '输入功率', value: 'inputPower', dataKind: 'line' },\n    { label: '输出功率', value: 'activePower', dataKind: 'line' },\n    { label: 'kw输出功率', value: 'kwActivePower', dataKind: 'line' },\n    { label: '峰值输出功率', value: 'topActivePower', dataKind: 'bar' },\n    { label: '日发电量', value: 'outputPowerDay', dataKind: 'bar' },\n    { label: '无功功率', value: 'reactivePower', dataKind: 'line' },\n  ]);\n  async function handleSelectionChange(label, value: any) {\n    selectedShowData.value = value;\n    getAreaActualChart();\n  }\n\n  // 数据表格\n  const columns: BasicColumn[] = [\n    {\n      title: '区域',\n      dataIndex: 'areaName',\n      width: 100,\n    },\n    {\n      title: '装机容量(kWp)',\n      dataIndex: 'installedCapacity',\n      sorter: true,\n      width: 100,\n    },\n    {\n      title: '等效小时数(h)',\n      dataIndex: 'ppr',\n      sorter: true,\n      width: 100,\n    },\n    {\n      title: '输入功率(kW) ',\n      dataIndex: 'inputPower',\n      sorter: true,\n      width: 100,\n    },\n    {\n      title: '输出功率(kW)',\n      dataIndex: 'activePower',\n      sorter: true,\n      width: 100,\n    },\n    {\n      title: 'kw输出功率(kW)',\n      dataIndex: 'kwActivePower',\n      sorter: true,\n      width: 100,\n    },\n    {\n      title: '峰值输出功率(kW)',\n      dataIndex: 'topActivePower',\n      sorter: true,\n      width: 100,\n    },\n    {\n      title: '日发电量(kWh)',\n      dataIndex: 'outputPowerDay',\n      sorter: true,\n      width: 100,\n    },\n    {\n      title: '无功功率(kVar)',\n      dataIndex: 'reactivePower',\n      sorter: true,\n      width: 100,\n    },\n  ];\n  const tableData = ref();\n  const chartBoxContent = ref();\n  const tableSortColumn = ref('area_code');\n  const tableSortRule = ref('asc');\n  const loadDataList = async () => {\n    let param = {\n      stationId: selectedStationId.value,\n      areaIds: area.value,\n      sortColumn: tableSortColumn.value,\n      sortRule: tableSortRule.value,\n    };\n    let res = await getAreaRealData(param);\n    tableData.value = res;\n    return res;\n  };\n  const [registerTable, { reload }] = useTable({\n    api: loadDataList,\n    title: '数据列表',\n    columns,\n    bordered: true,\n    pagination: { pageSize: 20, pageSizeOptions: ['20', '50', '100', '200'] },\n    showTableSetting: true,\n    tableSetting: { fullScreen: false, redo: false, size: false },\n    // dataSource: tableData,\n\n    sortFn: (sortInfo: SorterResult) => {\n      if (sortInfo.order) {\n        tableSortColumn.value = sortInfo.field;\n        tableSortRule.value = sortInfo.order.replace('end', '');\n      } else {\n        tableSortColumn.value = 'area_code';\n        tableSortRule.value = 'asc';\n      }\n      loadDataList();\n    },\n  });\n  const showChart = ref(false);\n  const options = {\n    color: [\n      '#1729F6',\n      '#FCAB28',\n      '#09D963',\n      '#FF1EE9',\n      '#B32630',\n      '#009588',\n      '#C9930F',\n      '#FF5906',\n      '#f3a33f',\n      '#fe8466',\n      '#8A69FF',\n      '#FF7669',\n    ],\n    tooltip: {\n      show: true,\n      trigger: 'axis',\n      formatter: '台',\n      axisPointer: {\n        type: 'line',\n        lineStyle: {\n          type: 'dashed',\n          color: 'rgba(1,180,241,.5)',\n        },\n        crossStyle: {\n          type: 'dashed',\n          color: 'rgba(1,180,241,.5)',\n        },\n      },\n      backgroundColor: ' #f5fbfb',\n      borderColor: '#c6ecea',\n      borderWidth: 1,\n    },\n    dataZoom: [{ type: 'inside' }],\n    legend: {\n      top: 20,\n      right: 200,\n      padding: [10, 0],\n      itemGap: 14,\n      itemWidth: 14,\n      itemHeight: 10,\n      textStyle: {\n        color: '#bce2e3',\n      },\n    },\n    grid: {\n      top: 70,\n      bottom: 30,\n      left: 40,\n      right: 10,\n    },\n    xAxis: {\n      type: 'category',\n      boundaryGap: true,\n      axisTick: {\n        alignWithLabel: true,\n        show: false,\n      },\n      axisLine: {\n        lineStyle: {\n          color: '#ccc',\n        },\n      },\n      axisLabel: {\n        color: '#888',\n      },\n    },\n    yAxis: {\n      type: 'value',\n      nameTextStyle: {\n        color: '#888',\n      },\n      axisLine: {\n        show: true,\n        lineStyle: {\n          color: '#ccc',\n        },\n      },\n      axisLabel: {\n        color: '#888',\n        formatter: '{value}',\n      },\n      axisTick: {\n        show: false,\n      },\n      splitLine: {\n        lineStyle: {\n          color: 'rgba(0, 0, 0, .1)',\n          type: 'dashed',\n        },\n      },\n    },\n  };\n  const barOption = {\n    dataZoom: [{ type: 'inside' }],\n    tooltip: {\n      trigger: 'axis',\n      axisPointer: {\n        type: 'line',\n        lineStyle: {\n          type: 'dashed',\n          color: 'rgba(1,180,241,.5)',\n        },\n        crossStyle: {\n          type: 'dashed',\n          color: 'rgba(1,180,241,.5)',\n        },\n      },\n      textStyle: {\n        color: '#666',\n      },\n      backgroundColor: '#f5fbfb',\n      borderColor: '#c6ecea',\n      borderWidth: 1,\n      formatter: (params) => {\n        return (\n          '<p style=\"text-align: left; line-height: 20px;font-size:12px;\">' +\n          params[0].axisValue +\n          '</p> ' +\n          '<p style=\"font-size:12px;\">日发电量  <span style=\"color: #3dd4cc;font-size:13px;\">' +\n          params[0].data +\n          '</span> kWh</p>'\n        );\n      },\n    },\n    grid: {\n      top: 70,\n      bottom: 30,\n      left: 40,\n      right: 10,\n    },\n    xAxis: [\n      {\n        type: 'category',\n        boundaryGap: true,\n        axisTick: {\n          alignWithLabel: true,\n          show: false,\n        },\n        axisLine: {\n          lineStyle: {\n            color: '#ccc',\n          },\n        },\n        axisLabel: {\n          color: '#888',\n        },\n      },\n    ],\n    yAxis: [\n      {\n        type: 'value',\n        name: 'kWh',\n        nameTextStyle: {\n          color: '#888',\n        },\n        axisLine: {\n          show: true,\n          lineStyle: {\n            color: '#ccc',\n          },\n        },\n        axisLabel: {\n          color: '#888',\n          formatter: '{value}',\n        },\n        axisTick: {\n          show: false,\n        },\n        splitLine: {\n          lineStyle: {\n            color: 'rgba(0, 0, 0, .1)',\n            type: 'dashed',\n          },\n        },\n      },\n    ],\n    series: [\n      {\n        name: '日发电量',\n        type: 'bar',\n        color: {\n          type: 'linear',\n          x: 0,\n          y: 0,\n          x2: 0,\n          y2: 1,\n          colorStops: [\n            {\n              offset: 0,\n              color: 'rgba(73,207,246,.8)', // 0% 处的颜色\n            },\n            {\n              offset: 1,\n              color: '#49b5f6', // 100% 处的颜色\n            },\n          ],\n        },\n        barWidth: 14,\n        barGap: '20%',\n        showSymbol: null,\n        smooth: '.6',\n        lineStyle: {\n          color: '#01d2f1',\n        },\n        areaStyle: {\n          color: {\n            type: 'linear',\n            x: 0,\n            y: 0,\n            x2: 0,\n            y2: 1,\n            colorStops: [\n              {\n                offset: 0,\n                color: 'rgba(255, 227, 151, .3)', // 0% 处的颜色\n              },\n              {\n                offset: 1,\n                color: 'rgba(255, 227, 151, .1)', // 100% 处的颜色\n              },\n            ],\n            globalCoord: true, // 缺省为 false\n          },\n        },\n        itemStyle: {\n          normal: {\n            barBorderRadius: [2, 2, 0, 0],\n            shadowColor: 'rgba(0,0,0,0.1)',\n            shadowBlur: 3,\n            shadowOffsetY: 3,\n          },\n        },\n        // data: ['12','14', '16', '18', '20', '22', '24', '30']\n      },\n    ],\n  };\n  // 输入总功率,输出有功功率,输出无功功率 => 曲线\n  const chartSortColumn = ref('');\n  const chartSortRule = ref('');\n  const getAreaActualChart = async () => {\n    if (selectedStationId.value == null || selectedShowData.value == null) {\n      return;\n    }\n    if (selectedShowData.value.dataKind == 'bar') {\n      chartSortColumn.value = selectedShowData.value.value;\n      chartSortRule.value = 'desc';\n    }\n    let param = {\n      stationId: selectedStationId.value,\n      showData: selectedShowData.value.value,\n      dataKind: selectedShowData.value.dataKind,\n      sortColumn: chartSortColumn.value,\n      sortRule: chartSortRule.value,\n      areaIds: area.value,\n    };\n    let res = await getAreaChartData(param);\n    if (res != null && selectedShowData.value.dataKind == 'line') {\n      _option(res);\n    } else if (res != null && selectedShowData.value.dataKind == 'bar') {\n      setBarOption(res, selectedShowData.value.value);\n    }\n  };\n\n  function setOption() {\n    getAreaActualChart();\n    // let currentValue = this.currentSelectType.value;\n    // if (['input', 'activePower', 'onePower', 'reactive'].indexOf(currentValue) > -1) {\n    //   // 输入总功率,输出有功功率,输出无功功率=》曲线\n\n    // }\n    // else if (\n    //   ['activePowerMax', 'outputPower', 'installedCapacity', 'ppr'].indexOf(currentValue) > -1\n    // ) {\n    //   // 峰值有功功率,日发电量,装机容量,等效小时数\n    //   this.getAreaActualChartCascade(currentValue);\n    // } else if (['deviceNum', 'limitNum'].indexOf(currentValue) > -1) {\n    //   // 设备告警,越限告警\n    //   switch (currentValue) {\n    //     case 'deviceNum': // 设备告警不传参数\n    //       this.getAreaActualChartDevice(currentValue);\n    //       break;\n    //     case 'limitNum': // 越限告警传limit\n    //       this.getAreaActualChartDevice(currentValue, 'limit');\n    //       break;\n    //   }\n    // } else if ('dispersionNum' === currentValue) {\n    //   // 离散率异常\n    //   this.getAreaActualChartDispersion(currentValue);\n    // } else if ('cascadeNum' === currentValue) {\n    //   // 组串异常\n    //   this.getAreaActualChartCascadeException(currentValue);\n    // } else if ('lowNum' === currentValue) {\n    //   // 'lowNum'=>低效逆变器\n    //   this.getAreaLower(currentValue);\n    // }\n  }\n  const myEchart = shallowRef({});\n  function _option(res) {\n    let option = JSON.parse(JSON.stringify(options)),\n      series = [],\n      legend = [],\n      data = res;\n    myEchart.value = {};\n    showChart.value = true;\n    if (!res.data) return;\n    option.xAxis.data = data.x;\n    option.yAxis.name = data.unit;\n    data.data.forEach((item) => {\n      let seriesTemp;\n      legend.push(item.name);\n      if (data.chartType === 'bar') {\n        seriesTemp = {\n          name: item.name,\n          type: data.chartType,\n          barWidth: 14,\n          data: item.y,\n        };\n      } else {\n        seriesTemp = {\n          name: item.name,\n          type: data.chartType,\n          smooth: 0.5,\n          showSymbol: false,\n          symbolSize: 8,\n          lineStyle: {\n            width: 2,\n            shadowColor: 'rgba(0, 0, 0, .6)',\n          },\n          connectNulls: true,\n          data: item.y,\n        };\n      }\n      series.push(seriesTemp);\n    });\n    option.legend.data = legend;\n    option.legend.show = false;\n    option.series = series;\n    option.tooltip.formatter = (value) => {\n      let html = [`<label class=\"chart-tooltip-label\">${value[0].axisValue}</label><br/>`];\n      for (let i = 0; i < value.length; i++) {\n        let unit = data.unit;\n        let showValue = null;\n        value[i].data != null || value[i].data != undefined\n          ? (showValue = Number(value[i].data))\n          : (showValue = '--');\n        html.push(\n          `<span class=\"chart-tooltip-item\">${value[i].seriesName} <span style=\"color:${value[i].color};font-weight:bold;\">${showValue}</span> ${unit}</span><br/>`,\n        );\n      }\n      return html.join('');\n    };\n\n    initChart(document.getElementById('customerChart'), option);\n  }\n\n  function setBarOption(data, type) {\n    let option = JSON.parse(JSON.stringify(barOption)),\n      series = [],\n      name = selectedShowData.value.label;\n    showChart.value = true;\n    option.xAxis[0].data = data.x; // x轴\n    option.yAxis[0].name = data.unit; // y轴单位\n    option.tooltip.formatter = (params) => {\n      return (\n        '<p style=\"text-align: left;color:#666;opacity: .8; line-height: 20px;font-size:12px;\">' +\n        params[0].axisValue +\n        '</p> ' +\n        '<p style=\"font-size:12px;color:#666;\">' +\n        name +\n        '  <span style=\"color: #3ccacc;font-size:13px;font-weight:bold;\">' +\n        params[0].data +\n        '</span> ' +\n        data.unit +\n        '</p>'\n      );\n    };\n    series.push({\n      name,\n      type: 'line',\n      color: {\n        type: 'linear',\n        x: 0,\n        y: 0,\n        x2: 0,\n        y2: 1,\n        colorStops: [\n          {\n            offset: 0,\n            color: 'rgba(64,202,192,0.7)', // 0% 处的颜色,上面\n          },\n          {\n            offset: 1,\n            color: '#40caa1', // 100% 处的颜色，下面\n          },\n        ],\n      },\n      barWidth: 30,\n      barGap: '40%',\n      showSymbol: null,\n      smooth: false,\n      lineStyle: {\n        color: 'rgba(252,171,40,1)',\n      },\n      label: {\n        show: 'abcccccc',\n        formatter: '{b}: {c}%',\n        overflow: 'break',\n        textBorderType: 'none',\n        color: '#fff',\n      },\n      itemStyle: {\n        normal: {\n          barBorderRadius: [2, 2, 0, 0],\n          shadowColor: 'rgba(0,0,0,0.1)',\n          shadowBlur: 3,\n          shadowOffsetY: 3,\n        },\n      },\n      data: data.y,\n    });\n    option.series = series;\n    initChart(document.getElementById('customerChart'), option);\n  }\n\n  function initChart(dom, data, callback) {\n    const main = document.getElementById('customerChart');\n    myEchart.value = echarts.init(main);\n    myEchart.value.setOption(data, true);\n    //窗口改变时重绘echarts,使用函数节流提高性能\n    callback && callback(myEchart);\n    window.addEventListener('resize', () => {\n      myEchart.value.resize();\n    });\n  }\n  onMounted(() => {\n    queryDeptTreeList();\n  });\n</script>\n\n<style lang=\"less\">\n  @import '../style/themes.less';\n</style>\n\n<style lang=\"less\" scoped>\n  .real-time-analysis {\n    height: 100%;\n    padding: 10px;\n\n    .real-time-analysis-row {\n      height: 100%;\n    }\n\n    .fit-common-tree {\n      height: 100%;\n      margin: 0 !important;\n      border: none !important;\n    }\n\n    .right-box {\n      height: 100%;\n      padding-left: 10px;\n\n      .right-row-box {\n        width: 100%;\n        height: calc(50% - 5px);\n        margin-bottom: 10px;\n        border-radius: 2px;\n\n        &:last-child {\n          margin-bottom: 0;\n        }\n\n        .box-header {\n          display: flex;\n          align-items: center;\n          justify-content: space-between;\n          height: 48px;\n          padding: 0 16px;\n          font-size: 14px;\n          line-height: 47px;\n        }\n\n        .data-table-box {\n          position: relative;\n\n          :deep(.vben-basic-table .ant-table-wrapper) {\n            padding: 7px 16px 8px;\n          }\n\n          :deep(.vben-basic-title.vben-basic-table-title) {\n            padding-left: 0;\n            font-size: 14px;\n          }\n\n          :deep(.ant-table-title) {\n            position: relative;\n            margin-bottom: 10px;\n          }\n\n          :deep(.table-settings) {\n            padding: 7px 0 1px;\n          }\n\n          :deep(.vben-basic-table-header__toolbar > .table-settings) {\n            margin-right: 0;\n          }\n\n          :deep(.table-settings > span:last-child) {\n            margin-right: 0;\n          }\n\n          .select-box {\n            display: flex;\n            align-items: center;\n            margin-right: 20px;\n\n            &:last-child {\n              margin-right: 0;\n            }\n\n            .select-label-box {\n              margin-right: 14px;\n              font-size: 14px;\n            }\n          }\n\n          .status-icon {\n            display: inline-block;\n            width: 12px;\n            height: 12px;\n            border-radius: 50%;\n\n            &.green {\n              background-color: #52c41a;\n            }\n          }\n\n          .table-title-line {\n            position: absolute;\n            z-index: 1;\n            top: 45px;\n            left: 0;\n            width: 100%;\n            height: 1px;\n            opacity: 0.85;\n          }\n        }\n      }\n    }\n  }\n\n  .chart-box {\n    width: 300px;\n    height: 600px;\n  }\n</style>\n"],"names":["createConfirm","useMessage","selectedKeys","ref","expandedKeys","selectedStationId","stationTreeData","queryDeptTreeList","__async","result","getStationTree","getAreaList","setOption","reload","handleSelect","nodes","area","areaOptions","res","getAreas","temp","element","handleAreaChange","value","filAreaOption","input","option","exportHandler","getAreaExport","exportExcelFile","selectedShowData","indicatorOptions","handleSelectionChange","label","getAreaActualChart","columns","tableData","chartBoxContent","tableSortColumn","tableSortRule","loadDataList","param","getAreaRealData","registerTable","useTable","sortInfo","showChart","options","barOption","params","chartSortColumn","chartSortRule","getAreaChartData","_option","setBarOption","myEchart","shallowRef","series","legend","data","item","seriesTemp","html","i","unit","showValue","initChart","type","name","dom","callback","main","echarts.init","onMounted"],"mappings":"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,EACA,SAAU,CACR,UAAW,CACT,MAAO,MACT,CACF,EACA,UAAW,CACT,MAAO,MACT,CACF,EACA,MAAO,CACL,KAAM,QACN,cAAe,CACb,MAAO,MACT,EACA,SAAU,CACR,KAAM,GACN,UAAW,CACT,MAAO,MACT,CACF,EACA,UAAW,CACT,MAAO,OACP,UAAW,SACb,EACA,SAAU,CACR,KAAM,EACR,EACA,UAAW,CACT,UAAW,CACT,MAAO,oBACP,KAAM,QACR,CACF,CACF,CAAA,EAEIC,EAAY,CAChB,SAAU,CAAC,CAAE,KAAM,SAAU,EAC7B,QAAS,CACP,QAAS,OACT,YAAa,CACX,KAAM,OACN,UAAW,CACT,KAAM,SACN,MAAO,oBACT,EACA,WAAY,CACV,KAAM,SACN,MAAO,oBACT,CACF,EACA,UAAW,CACT,MAAO,MACT,EACA,gBAAiB,UACjB,YAAa,UACb,YAAa,EACb,UAAYC,GAER,kEACAA,EAAO,CAAC,EAAE,UACV,sFAEAA,EAAO,CAAC,EAAE,KACV,iBAGN,EACA,KAAM,CACJ,IAAK,GACL,OAAQ,GACR,KAAM,GACN,MAAO,EACT,EACA,MAAO,CACL,CACE,KAAM,WACN,YAAa,GACb,SAAU,CACR,eAAgB,GAChB,KAAM,EACR,EACA,SAAU,CACR,UAAW,CACT,MAAO,MACT,CACF,EACA,UAAW,CACT,MAAO,MACT,CACF,CACF,EACA,MAAO,CACL,CACE,KAAM,QACN,KAAM,MACN,cAAe,CACb,MAAO,MACT,EACA,SAAU,CACR,KAAM,GACN,UAAW,CACT,MAAO,MACT,CACF,EACA,UAAW,CACT,MAAO,OACP,UAAW,SACb,EACA,SAAU,CACR,KAAM,EACR,EACA,UAAW,CACT,UAAW,CACT,MAAO,oBACP,KAAM,QACR,CACF,CACF,CACF,EACA,OAAQ,CACN,CACE,KAAM,OACN,KAAM,MACN,MAAO,CACL,KAAM,SACN,EAAG,EACH,EAAG,EACH,GAAI,EACJ,GAAI,EACJ,WAAY,CACV,CACE,OAAQ,EACR,MAAO,qBACT,EACA,CACE,OAAQ,EACR,MAAO,SACT,CACF,CACF,EACA,SAAU,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"}