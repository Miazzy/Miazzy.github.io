{"version":3,"file":"IndexSelectDialog-0532c0db.js","sources":["../../src/views/workbench/IndexSelectDialog.vue"],"sourcesContent":["<template>\n  <Dialog\n    :title=\"title\"\n    :visible=\"modalVisible\"\n    @update:visible=\"updateVisible\"\n    :width=\"props.width\"\n    :height=\"props.height\"\n    @close=\"handleClose\"\n  >\n    <template #default>\n      <div class=\"dialog-content\" :style=\"`height: calc(${props.height}px - 90px)`\">\n        <!-- 左侧分类树 -->\n        <div class=\"category-tree\">\n          <div class=\"category-content\" :style=\"`height: calc(${props.height}px - 130px)`\">\n            <div class=\"category-search-box\" style=\"position: relative\">\n              <span class=\"search-title\" style=\"\">搜索</span>\n              <a-input-search\n                v-model:value=\"searchText\"\n                class=\"search-input\"\n                placeholder=\"请输入搜索内容\"\n                enter-button\n                @change=\"handleSearch\"\n                @search=\"handleSearch\"\n                @keydown.prevent.enter=\"preventEnter\"\n              />\n              <span class=\"search-icon\" style=\"left: 300px\">\n                <Icon icon=\"mdi:arrow-up\" size=\"22\" class=\"rotate-left\" @click=\"handleNode\" />\n              </span>\n              <span class=\"search-icon\" style=\"left: 340px\">\n                <Icon icon=\"material-symbols:delete-outline\" size=\"22\" @click=\"handleDelete\" />\n              </span>\n            </div>\n            <div class=\"tree-value\" :style=\"`height: calc(${props.height}px - 200px);`\">\n              <!-- 基础Tree组件 -->\n              <a-tree\n                v-if=\"searchText.length <= 0\"\n                :tree-data=\"treeData\"\n                show-icon\n                :default-expand-all=\"false\"\n                checkable\n                checkStrictly\n                :selectable=\"false\"\n                v-model:checkedKeys=\"checkedKeys\"\n                @check=\"handleCheck\"\n              >\n                <template #switcherIcon=\"{ switcherCls }\">\n                  <Icon :icon=\"props.ticons.parent\" size=\"14\" :class=\"switcherCls\" />\n                </template>\n                <template #icon=\"{ key, isLeaf }\">\n                  <Icon v-if=\"isLeaf && !isTopNode(key)\" :icon=\"props.ticons.leaf\" size=\"14\" />\n                  <Icon v-if=\"!isLeaf && !isTopNode(key)\" :icon=\"props.ticons.middle\" size=\"14\" />\n                </template>\n              </a-tree>\n\n              <a-table\n                v-if=\"searchText.length > 0\"\n                size=\"small\"\n                :columns=\"scolumns\"\n                :data-source=\"xdataList\"\n                :pagination=\"false\"\n                :scroll=\"{ x: (props.width - 30) / 2, y: props.height - 240 }\"\n                style=\"overflow-x: hidden\"\n                :customRow=\"handleTableClick\"\n              />\n            </div>\n          </div>\n        </div>\n\n        <!-- 右侧表格 -->\n        <div class=\"employee-table\">\n          <div class=\"employee-content\">\n            <div\n              position=\"center\"\n              class=\"layout-content\"\n              :style=\"`height: calc(${props.height}px - 120px);`\"\n            >\n              <div class=\"component-wrap\">\n                <a-table\n                  size=\"small\"\n                  :columns=\"selectedDataColumns\"\n                  :data-source=\"allNodes\"\n                  :pagination=\"false\"\n                  :scroll=\"{ y: props.height - 190 }\"\n                  :style=\"`height: calc(${props.height}px - 130px);overflow-x: hidden;`\"\n                >\n                  <template #bodyCell=\"{ record, index, column }\">\n                    <template v-if=\"column.dataIndex === 'index'\">\n                      <span>{{ index + 1 }}</span>\n                    </template>\n                    <template v-else-if=\"isEdit && column.dataIndex === 'sort'\">\n                      <div class=\"sort-cell\">\n                        <div\n                          v-if=\"sortIndex[record.key]\"\n                          class=\"editable-cell-input-wrapper\"\n                        >\n                          <a-input-number\n                            v-model:value=\"sortIndex[record.key].index\"\n                            :min=\"1\"\n                            :max=\"allNodes.length\"\n                            :controls=\"false\"\n                            size=\"small\"\n                          />\n                          <Icon\n                            icon=\"ant-design:check-outlined\"\n                            size=\"12\"\n                            style=\"margin-left: 4px\"\n                            @click=\"save(record, index)\"\n                          />\n                        </div>\n                        <Icon\n                          v-else\n                          icon=\"ant-design:drag-outlined\"\n                          size=\"12\"\n                          @click=\"edit(record, index)\"\n                        />\n                      </div>\n                    </template>\n                    <template v-else-if=\"isEdit && column.dataIndex === 'action'\">\n                      <a>\n                        <Icon\n                          icon=\"ant-design:delete-filled\"\n                          size=\"12\"\n                          color=\"#ED6F6F\"\n                          @click=\"handleDeleteNode(record, index)\"\n                        />\n                      </a>\n                    </template>\n                    <template v-if=\"column.type === 'select' && record.dataGranularity\">\n                      <a-select\n                        size=\"small\"\n                        style=\"width: 100%\"\n                        v-model:value=\"record[column.dataIndex]\"\n                        allow-clear\n                        :options=\"column.selectOptions[record.dataGranularity]\"\n                      />\n                    </template>\n                  </template>\n                </a-table>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </template>\n\n    <template #footer>\n      <a-button v-if=\"extraFooterBtn\" class=\"btn-margin\" type=\"primary\" @click=\"handleExtra\">{{\n        extraFooterBtn\n      }}</a-button>\n      <a-button v-if=\"isEdit\" class=\"btn-margin\" @click=\"cancel\">取消</a-button>\n      <a-button v-if=\"isEdit\" class=\"btn-margin\" type=\"primary\" @click=\"confirm\">确定</a-button>\n    </template>\n  </Dialog>\n</template>\n\n<script lang=\"ts\" setup>\n  import Dialog from '@/components/Framework/Modal/Dialog.vue';\n  import Icon from '@/components/Icon/Icon.vue';\n  import { ref, defineProps, defineEmits, onMounted, watch, unref, reactive, computed } from 'vue';\n  import { TreeItem } from '@/components/Tree';\n  import { Modal } from 'ant-design-vue';\n  import { SysMessage } from '/@/hooks/web/useMessage';\n  import { getOrganTree } from '/@/api/sys/user';\n  import { message } from 'ant-design-vue';\n  import type { Ref, UnwrapRef } from 'vue';\n  import { cloneDeep } from 'lodash-es';\n\n  const modalVisible = ref(false);\n  const treeData = ref([]);\n  const searchText = ref('');\n  const selectedNode = ref(null);\n  const checkedKeys = ref({});\n  const checkedNodes = ref([]);\n  const allNodes = ref<any>([]);\n  const treeMap = ref<any>();\n  const tdataList = ref<any>([]);\n  const xdataList = ref<any>([]);\n  const searchTableRef = ref<HTMLElement>();\n  type fieldType = { key: String; title: String; dept: String; postion: String };\n  type tIconsType = { parent: String; leaf: String };\n  type messageType = { double: String; delete: String };\n\n  const props = defineProps({\n    visible: Boolean, // 是否显示弹框\n    title: String, // 弹框标题\n    width: { type: Number, default: 700 }, // 弹框宽度\n    height: { type: Number, default: 500 }, // 弹框高度\n    value: { type: Array, default: [] },\n    tdata: { type: Array }, // Tree数据\n    tfields: {\n      type: Object,\n      default: {\n        key: 'id',\n        title: 'title',\n        dept: 'dept',\n        postion: 'postion',\n      } as fieldType,\n    }, // Tree数据的对应字段解析\n    ticons: {\n      type: Object,\n      default: {\n        parent: 'ant-design:down-outlined',\n        middle: 'mingcute:department-line',\n        leaf: 'gridicons:multiple-users',\n      } as tIconsType,\n    },\n    message: {\n      type: Object,\n      default: {\n        none: '当前没有被选数据，无法删除！',\n        double: '该节点已经被选中！',\n        delete: '请您确认是否删除所有勾选节点？',\n      } as messageType,\n    },\n    extraFooterBtn: {\n      type: String,\n      default: '',\n    }, // 自定义的其他操作按钮\n    max: { type: Number, default: 99 }, // 最多可选的数据个数\n    scolumns: {\n      type: Array,\n      default: [\n        { title: '名称', dataIndex: 'title', key: 'title', fixed: true, width: 80 },\n        { title: '公司', dataIndex: 'company', key: 'company', fixed: false, width: 200 },\n        { title: '部门', dataIndex: 'dept', key: 'dept', fixed: false, width: 150 },\n        { title: '岗位', dataIndex: 'postion', key: 'postion', fixed: false, width: 150 },\n      ],\n    },\n    rightColumns: {\n      type: Array,\n      default: [],\n    },\n    isEdit: { type: Boolean, default: true }, // 是否可编辑\n  });\n\n  const emit = defineEmits([\n    'update:visible',\n    'update:value',\n    'cancel',\n    'confirm',\n    'close',\n    'extra',\n  ]); // 定义事件\n\n  const cancel = () => {\n    emit('cancel'); // 发送取消事件\n  };\n\n  const confirm = () => {\n    // 校验最多选择个数\n    if (props.max && allNodes.value?.length > props.max) {\n      message.warning(`最多选择${props.max}个！`);\n      return;\n    }\n    // 校验时间维度选择\n    let flag = true;\n    allNodes.value.forEach((item) => {\n      if (item.dataGranularity && !item.dateType) {\n        flag = false;\n        return;\n      }\n    });\n    if (!flag) return message.warning('请选择时间维度！');\n\n    emit('confirm', allNodes.value); // 发送确定事件\n  };\n\n  const handleClose = () => {\n    emit('cancel'); // 发送取消事件\n  };\n\n  const handleExtra = () => {\n    emit('extra');\n  }; // 自定义其他操作按钮事件\n\n  const updateVisible = ($event) => {\n    modalVisible.value = $event;\n    emit('update:visible', false); // 关闭弹框\n  };\n\n  // 判断是否为顶层节点\n  const isTopNode = (key) => {\n    return !!treeMap.value.get(key);\n  };\n\n  const handleSelect = (nodeKey, event) => {\n    const node = event.node;\n    selectedNode.value = node;\n  };\n\n  const handleDelete = () => {\n    if (allNodes.value && allNodes.value.length > 0) {\n      Modal.confirm({\n        title: props.message.delete,\n        wrapClassName: 'dialog-modal-confirm',\n        zIndex: 10010,\n        onOk() {\n          allNodes.value = [];\n          checkedKeys.value.checked = [];\n          checkedNodes.value = [];\n        },\n      });\n    } else {\n      Modal.warning({\n        wrapClassName: 'dialog-modal-warning',\n        zIndex: 10010,\n        title: props.message.none,\n      });\n    }\n  };\n\n  const handleDeleteNode = (item, index) => {\n    allNodes.value = allNodes.value.filter((node, tindex) => tindex !== index);\n  };\n\n  // 按tfields生成转换规则\n  const reverseRule = (rule) => {\n    const reversedRule = {};\n    for (const key in rule) {\n      reversedRule[rule[key]] = key;\n    }\n    return reversedRule;\n  };\n\n  // 按tfields的设置转换tree的数据\n  const transformRespData = (data, rule) => {\n    const rules = reverseRule(rule);\n    return data.map((item) => {\n      const newItem = {};\n      for (const key in item) {\n        if (key in rules) {\n          if (rules[key] == 'title' || rules[key] == 'dept' || rules[key] == 'postion') {\n            newItem[rules[key]] = item[key];\n            newItem[key] = item[key];\n          } else if (rules[key] == 'key') {\n            newItem[rules[key]] = parseInt(Math.random() * 100) + '@' + item[key];\n            newItem[key] = item[key];\n          }\n        }\n      }\n      return newItem;\n    });\n  };\n\n  // 按tfields的设置转换tree的数据\n  const transformTableData = (data, rule, flag = 'top', pnode) => {\n    // 获取字段规则\n    const rules = reverseRule(rule);\n    // 数组遍历\n    data.map((item) => {\n      const newObj = {};\n      for (const key in item) {\n        if (key in rules) {\n          if (rules[key] == 'title' || rules[key] == 'dept' || rules[key] == 'postion') {\n            newObj[rules[key]] = item[key];\n            newObj[key] = item[key];\n          } else if (rules[key] == 'id') {\n            newObj[key] = parseInt(Math.random() * 100) + '@' + item[key];\n            newObj[key] = item[key];\n          } else if (rules[key] == 'key') {\n            newObj[rules[key]] = parseInt(Math.random() * 100) + '@' + item[key];\n            newObj[key] = item[key];\n          }\n        }\n        newObj[key] = item[key];\n        if (pnode) {\n          newObj['parent_node'] = pnode;\n        }\n      }\n      treeMap.value.set(item[props.tfields.key], item);\n      tdataList.value.push(newObj);\n      if (item.children && item.children.length > 0) {\n        transformTableData(item.children, rule, 'none', item);\n      }\n    });\n    // 顶级数组去重\n    if (flag == 'top') {\n      const list = tdataList.value.filter((node, index, list) => {\n        const findIndexValue = list.findIndex((x) => {\n          return (\n            x[props.tfields.key] === node[props.tfields.key] &&\n            x[props.tfields.title] === node[props.tfields.title]\n          );\n        });\n        return findIndexValue === index;\n      });\n      tdataList.value = list;\n    }\n  };\n\n  // 按tfields的设置转换tree的数据\n  const transformData = (data, rule) => {\n    const rules = reverseRule(rule);\n    return data.map((item) => {\n      const newItem = {};\n      for (const key in item) {\n        if (key in rules) {\n          if (rules[key] == 'title' || rules[key] == 'dept' || rules[key] == 'postion') {\n            newItem[rules[key]] = item[key];\n            newItem[key] = item[key];\n          } else if (rules[key] == 'id') {\n            newItem[rules[key]] = parseInt(Math.random() * 100) + '@' + item[key];\n            newItem[key] = item[key];\n          } else if (rules[key] == 'key') {\n            newItem[rules[key]] = parseInt(Math.random() * 100) + '@' + item[key];\n            newItem[key] = item[key];\n          }\n        } else {\n          newItem[key] = item[key];\n        }\n      }\n      if (item.children && item.children.length > 0) {\n        newItem.children = transformData(item.children, rule);\n      }\n      return newItem;\n    });\n  };\n\n  // 将数据节点转换为Map\n  const transformMap = (data, rule) => {\n    const treeMap = new Map();\n    data.forEach((item) => {\n      const key = item[rule['key']];\n      treeMap.set(key, item);\n    });\n    return treeMap;\n  };\n\n  const handleSearch = () => {\n    const text = searchText.value ? searchText.value.trim() : '';\n    const list = tdataList.value.filter((node) => {\n      return !node.disabled && node[props.tfields.title].includes(text);\n    });\n    xdataList.value = list;\n    if (text.length === 0) {\n      selectedNode.value = null;\n    }\n  };\n\n  // 表格点击事件\n  const handleTableClick = (record, index) => {\n    const clickFunc = (event) => {\n      // 获取当前点击的行\n      const currentRow = event.currentTarget;\n      // 获取所有兄弟节点\n      const siblingRows = currentRow.parentElement.querySelectorAll('.ant-table-row');\n      // 移除兄弟节点中的 selected 类样式\n      siblingRows.forEach((siblingRow) => {\n        siblingRow.classList.remove('selected');\n      });\n      // 为当前行添加 selected 类样式\n      currentRow.classList.add('selected');\n      // 设置选中的节点\n      selectedNode.value = record;\n    };\n    return {\n      onclick: clickFunc,\n    };\n  };\n\n  const preventEnter = (event) => {\n    if (event.key === 'Enter') {\n      event.preventDefault();\n    }\n  };\n\n  const handleCheck = (checkedKeys, e) => {\n    checkedNodes.value = e.checkedNodes;\n  };\n  const handleNode = () => {\n    if (selectedNode.value?.key) {\n      let selectedNodeInTree = getCheckedNodesByValue(\n        treeData.value,\n        selectedNode.value[props.tfields.key],\n      );\n      let newNode = cloneDeep(selectedNodeInTree);\n      newNode.key = parseInt(Math.random() * 100) + '@' + newNode.key;\n      allNodes.value.push(newNode);\n    } else {\n      let newNodes = cloneDeep(checkedNodes.value);\n      newNodes.forEach(item=>{\n        item.key = parseInt(Math.random() * 100) + '@' + item.key;\n      });\n      allNodes.value.push(...newNodes);\n    }\n    checkedNodes.value = [];\n    checkedKeys.value.checked = [];\n  };\n\n  // 右侧表格\n  const selectedDataColumns = computed(() => {\n    if (props.isEdit) {\n      if (props.rightColumns.length) {\n        return props.rightColumns;\n      } else {\n        return [\n          { title: '序号', dataIndex: 'index', key: 'index', width: 60 },\n          { title: '名称', dataIndex: props.tfields.title, key: props.tfields.title },\n          { title: '排序', dataIndex: 'sort', key: 'sort', width: 80 },\n          { title: '操作', dataIndex: 'action', key: 'action', width: 80 },\n        ];\n      }\n    } else {\n      return props.rightColumns.filter((item) => {\n        return item.dataIndex !== 'action' && item.dataIndex !== 'sort';\n      });\n    }\n  });\n  const selectedDataList = ref<any>([]);\n\n  function getValueArr(data) {\n    let valueArr = [];\n    if (data?.length) {\n      data.forEach((item) => {\n        valueArr.push(item[props.tfields.key]);\n      });\n    }\n\n    return valueArr;\n  }\n  function getCheckedKeysByValues(treeData, valueArr) {\n    let keyArr = [];\n    if (valueArr?.length) {\n      treeData.forEach((item) => {\n        if (valueArr.includes(item[props.tfields.key])) {\n          keyArr.push(item.key);\n        }\n        if (item.children?.length) {\n          keyArr.push(...getCheckedKeysByValues(item.children, valueArr));\n        }\n      });\n    }\n    return keyArr;\n  }\n  function getCheckedNodesByValues(treeData, valueArr) {\n    let nodeArr = [];\n    if (valueArr?.length) {\n      treeData.forEach((item) => {\n        if (valueArr.includes(item[props.tfields.key])) {\n          nodeArr.push(item);\n        }\n        if (item.children?.length) {\n          nodeArr.push(...getCheckedNodesByValues(item.children, valueArr));\n        }\n      });\n    }\n    return nodeArr;\n  }\n\n  function getCheckedNodesByValue(treeData, value) {\n    let node;\n    treeData.forEach((item) => {\n      if (value === item[props.tfields.key]) {\n        node = item;\n      }\n      if (item.children?.length) {\n        let res = getCheckedNodesByValue(item.children, value);\n        if (res) {\n          node = res;\n        }\n      }\n    });\n    return node;\n  }\n\n  function getCheckedNodesByKeys(treeData, keyArr) {\n    let nodeArr = [];\n    if (keyArr?.length) {\n      treeData.forEach((item) => {\n        if (keyArr.includes(item.key)) {\n          nodeArr.push(item);\n        }\n        if (item.children?.length) {\n          nodeArr.push(...getCheckedNodesByKeys(item.children, keyArr));\n        }\n      });\n    }\n    return nodeArr;\n  }\n\n  // 排序\n  const sortIndex = reactive({});\n\n  const edit = (record, index) => {\n    sortIndex[record.key] = { index: index + 1 };\n  };\n\n  const save = (record, index) => {\n    let arr = [...allNodes.value];\n    arr.splice(sortIndex[record.key].index - 1, 0, arr.splice(index, 1)[0]);\n    allNodes.value = arr;\n    delete sortIndex[record.key];\n  };\n\n  watch(\n    () => props.value,\n    (newValue) => {\n      allNodes.value = cloneDeep(newValue);\n      allNodes.value.forEach(item=>{\n        item.key = parseInt(Math.random() * 100) + '@' + item[props.tfields.key];\n      });\n    },\n  );\n\n  watch(\n    () => props.visible,\n    (newValue) => {\n      modalVisible.value = newValue;\n      if (!newValue) {\n        searchText.value = '';\n        checkedNodes.value = [];\n      } else {\n        allNodes.value = cloneDeep(props.value);\n        allNodes.value.forEach(item=>{\n          item.key = parseInt(Math.random() * 100) + '@' + item[props.tfields.key];\n        });\n      }\n    },\n    {\n      deep: true,\n    },\n  );\n\n  watch(\n    () => props.tdata,\n    (newValue) => {\n      const rule = props?.tfields as fieldType;\n      const data = unref(props.tdata as unknown[] as TreeItem[]);\n      treeData.value = transformData(data, rule);\n      treeMap.value = transformMap(data, rule);\n      transformTableData(data, rule, 'top', null);\n    },\n  );\n\n  onMounted(() => {\n    modalVisible.value = props.visible;\n    allNodes.value = cloneDeep(props.value);\n    allNodes.value.forEach(item=>{\n      item.key = parseInt(Math.random() * 100) + '@' + item[props.tfields.key];\n    });\n  });\n</script>\n<style lang=\"less\">\n  .ant-modal-root {\n    display: flex;\n    z-index: 10010;\n  }\n</style>\n<style lang=\"less\" scoped>\n  .theme1 {\n    div.tree-value {\n      :deep(.ant-table-body .ant-table-row.selected) {\n        background: #00427d;\n      }\n      :deep(.ant-table-body .ant-table-row.selected td) {\n        background: #00427d;\n      }\n    }\n  }\n  .theme3 {\n    div.tree-value {\n      :deep(.ant-table-body .ant-table-row.selected) {\n        background: #e3f4fc;\n      }\n      :deep(.ant-table-body .ant-table-row.selected td) {\n        background: #e3f4fc;\n      }\n    }\n  }\n  .dialog-content {\n    display: flex; /* 使用 flex 布局 */\n    align-items: stretch; /* 垂直方向拉伸填充 */\n    justify-content: flex-start; /* 左对齐 */\n  }\n\n  .category-tree {\n    width: 50%;\n    padding: 10px;\n\n    text-align: left;\n\n    span.category-title {\n      display: block;\n      width: calc(100% + 25px);\n      margin-left: -17.5px;\n      padding-bottom: 5px;\n      border-bottom: 1px solid rgb(240 240 240);\n      text-align: left;\n\n      span {\n        margin-left: 20px;\n      }\n    }\n\n    div.category-content {\n      width: calc(100% + 25px);\n      margin-left: -17.5px;\n\n      div.category-search-box {\n        width: 100%;\n        height: 45px;\n\n        .search-title {\n          height: 45px;\n          margin: 0 10px 0 20px;\n          line-height: 45px;\n        }\n\n        .search-input {\n          width: 220px;\n          height: 45px;\n          margin: 5px 0 0;\n          line-height: 45px;\n        }\n\n        .search-icon {\n          display: block;\n          position: absolute;\n          top: 4px;\n          width: 36px;\n          height: 35px;\n          margin: 0 3px;\n          padding-top: 2px;\n          border-radius: 4px;\n          line-height: 35px;\n          text-align: center;\n          cursor: pointer;\n\n          .app-iconify.anticon.rotate-left {\n            transform: rotate(90deg);\n            transform: rotate(90deg);\n          }\n        }\n      }\n\n      div.tree-value {\n        margin: 10px 0 0;\n        overflow-y: auto;\n        :deep(.ant-table-pagination.ant-pagination) {\n          margin: 10px 0 0;\n        }\n        :deep(.ant-table-body) {\n          height: 100vh;\n        }\n        // :deep(.ant-table-body .ant-table-row.selected) {\n        //   background: #00427d;\n        // }\n        // :deep(.ant-table-body .ant-table-row.selected td) {\n        //   background: #00427d;\n        // }\n        :deep(.ant-table-body) {\n          overflow-x: hidden;\n        }\n      }\n\n      :deep(.ant-btn .anticon) {\n        margin-top: 7.5px;\n      }\n    }\n  }\n\n  .employee-table {\n    width: 50%;\n    padding: 10px;\n    padding-right: 0;\n    text-align: left;\n\n    span.employee-title {\n      display: block;\n      width: calc(100% + 25px);\n      margin-left: -17.5px;\n      padding-bottom: 5px;\n      border-bottom: 1px solid rgb(240 240 240);\n      text-align: left;\n\n      span {\n        margin-left: 30px;\n      }\n    }\n\n    div.employee-content {\n      .layout-content {\n        width: 100%;\n        height: auto;\n        overflow-x: hidden;\n        overflow-y: auto;\n        -webkit-overflow-scrolling: touch;\n\n        .component-wrap {\n          width: auto;\n          float: none;\n          overflow: hidden;\n\n          a.component-item {\n            display: inline-block;\n            height: 30px;\n            margin: 5px 4px 0;\n            padding: 0 15px;\n            float: left;\n            border: 1px dashed #cdcdcd;\n            background-color: #fff;\n            color: #303030;\n            line-height: 30px;\n            text-decoration: none;\n            white-space: nowrap;\n            cursor: pointer;\n\n            span.ui-component-text {\n              margin: 0 8px 0 0;\n            }\n\n            i.icon-close {\n              position: absolute;\n              margin: 0 2px 0 -5px;\n              cursor: pointer;\n\n              span.anticon {\n                position: relative;\n                top: 2px;\n                color: #303030;\n\n                &:hover {\n                  position: relative;\n                  top: 1px;\n                  box-shadow: 0 0 1px 0 rgb(0 0 0 / 10%);\n                  color: #6f6f6f;\n                }\n              }\n            }\n          }\n        }\n\n        :deep(.ant-table-container) {\n          height: 100%;\n          .ant-table-body {\n            height: calc(100% - 40px);\n          }\n        }\n      }\n    }\n  }\n\n  .btn-margin {\n    margin: 1px 0 1px 10px;\n  }\n\n  .editable-cell-input-wrapper {\n    display: flex;\n    align-items: center;\n  }\n</style>\n"],"names":["modalVisible","ref","treeData","searchText","selectedNode","checkedKeys","checkedNodes","allNodes","treeMap","tdataList","xdataList","cancel","emit","confirm","props","_a","message","flag","item","handleClose","handleExtra","updateVisible","$event","isTopNode","key","handleDelete","Modal","handleDeleteNode","index","node","tindex","reverseRule","rule","reversedRule","transformTableData","data","pnode","rules","newObj","list","x","transformData","newItem","transformMap","handleSearch","text","handleTableClick","record","event","currentRow","siblingRow","preventEnter","handleCheck","e","handleNode","selectedNodeInTree","getCheckedNodesByValue","newNode","cloneDeep","newNodes","selectedDataColumns","computed","value","res","sortIndex","reactive","edit","save","arr","watch","newValue","unref","onMounted"],"mappings":"wzDAuKQA,EAAeC,EAAI,EAAK,EACxBC,EAAWD,EAAI,CAAA,CAAE,EACjBE,EAAaF,EAAI,EAAE,EACnBG,EAAeH,EAAI,IAAI,EACvBI,EAAcJ,EAAI,CAAA,CAAE,EACpBK,EAAeL,EAAI,CAAA,CAAE,EACrBM,EAAWN,EAAS,CAAA,CAAE,EACtBO,EAAUP,IACVQ,EAAYR,EAAS,CAAA,CAAE,EACvBS,EAAYT,EAAS,CAAA,CAAE,EACNA,EAAiB,EAmExC,MAAMU,EAAS,IAAM,CACnBC,EAAK,QAAQ,CAAA,EAGTC,EAAU,IAAM,OAEpB,GAAIC,EAAM,OAAOC,EAAAR,EAAS,QAAT,YAAAQ,EAAgB,QAASD,EAAM,IAAK,CACnDE,EAAQ,QAAQ,OAAOF,EAAM,GAAG,IAAI,EACpC,MACF,CAEA,IAAIG,EAAO,GAOX,GANSV,EAAA,MAAM,QAASW,GAAS,CAC/B,GAAIA,EAAK,iBAAmB,CAACA,EAAK,SAAU,CACnCD,EAAA,GACP,MACF,CAAA,CACD,EACG,CAACA,EAAa,OAAAD,EAAQ,QAAQ,UAAU,EAEvCJ,EAAA,UAAWL,EAAS,KAAK,CAAA,EAG1BY,EAAc,IAAM,CACxBP,EAAK,QAAQ,CAAA,EAGTQ,EAAc,IAAM,CACxBR,EAAK,OAAO,CAAA,EAGRS,EAAiBC,GAAW,CAChCtB,EAAa,MAAQsB,EACrBV,EAAK,iBAAkB,EAAK,CAAA,EAIxBW,EAAaC,GACV,CAAC,CAAChB,EAAQ,MAAM,IAAIgB,CAAG,EAQ1BC,GAAe,IAAM,CACrBlB,EAAS,OAASA,EAAS,MAAM,OAAS,EAC5CmB,EAAM,QAAQ,CACZ,MAAOZ,EAAM,QAAQ,OACrB,cAAe,uBACf,OAAQ,MACR,MAAO,CACLP,EAAS,MAAQ,GACLF,EAAA,MAAM,QAAU,GAC5BC,EAAa,MAAQ,EACvB,CAAA,CACD,EAEDoB,EAAM,QAAQ,CACZ,cAAe,uBACf,OAAQ,MACR,MAAOZ,EAAM,QAAQ,IAAA,CACtB,CACH,EAGIa,GAAmB,CAACT,EAAMU,IAAU,CAC/BrB,EAAA,MAAQA,EAAS,MAAM,OAAO,CAACsB,EAAMC,IAAWA,IAAWF,CAAK,CAAA,EAIrEG,EAAeC,GAAS,CAC5B,MAAMC,EAAe,CAAA,EACrB,UAAWT,KAAOQ,EACHC,EAAAD,EAAKR,CAAG,CAAC,EAAIA,EAErB,OAAAS,CAAA,EAwBHC,EAAqB,CAACC,EAAMH,EAAMf,EAAO,MAAOmB,IAAU,CAExD,MAAAC,EAAQN,EAAYC,CAAI,EA6B9B,GA3BKG,EAAA,IAAKjB,GAAS,CACjB,MAAMoB,EAAS,CAAA,EACf,UAAWd,KAAON,EACZM,KAAOa,IACLA,EAAMb,CAAG,GAAK,SAAWa,EAAMb,CAAG,GAAK,QAAUa,EAAMb,CAAG,GAAK,WACjEc,EAAOD,EAAMb,CAAG,CAAC,EAAIN,EAAKM,CAAG,EACtBc,EAAAd,CAAG,EAAIN,EAAKM,CAAG,GACba,EAAMb,CAAG,GAAK,MAChBc,EAAAd,CAAG,EAAI,SAAS,KAAK,SAAW,GAAG,EAAI,IAAMN,EAAKM,CAAG,EACrDc,EAAAd,CAAG,EAAIN,EAAKM,CAAG,GACba,EAAMb,CAAG,GAAK,QACvBc,EAAOD,EAAMb,CAAG,CAAC,EAAI,SAAS,KAAK,OAAO,EAAI,GAAG,EAAI,IAAMN,EAAKM,CAAG,EAC5Dc,EAAAd,CAAG,EAAIN,EAAKM,CAAG,IAGnBc,EAAAd,CAAG,EAAIN,EAAKM,CAAG,EAClBY,IACFE,EAAO,YAAiBF,GAG5B5B,EAAQ,MAAM,IAAIU,EAAKJ,EAAM,QAAQ,GAAG,EAAGI,CAAI,EACrCT,EAAA,MAAM,KAAK6B,CAAM,EACvBpB,EAAK,UAAYA,EAAK,SAAS,OAAS,GAC1CgB,EAAmBhB,EAAK,SAAUc,EAAM,OAAQd,CAAI,CACtD,CACD,EAEGD,GAAQ,MAAO,CACjB,MAAMsB,EAAO9B,EAAU,MAAM,OAAO,CAACoB,EAAMD,EAAOW,IACzBA,EAAK,UAAWC,GAEnCA,EAAE1B,EAAM,QAAQ,GAAG,IAAMe,EAAKf,EAAM,QAAQ,GAAG,GAC/C0B,EAAE1B,EAAM,QAAQ,KAAK,IAAMe,EAAKf,EAAM,QAAQ,KAAK,CAEtD,IACyBc,CAC3B,EACDnB,EAAU,MAAQ8B,CACpB,CAAA,EAIIE,EAAgB,CAACN,EAAMH,IAAS,CAC9B,MAAAK,EAAQN,EAAYC,CAAI,EACvB,OAAAG,EAAK,IAAKjB,GAAS,CACxB,MAAMwB,EAAU,CAAA,EAChB,UAAWlB,KAAON,EACZM,KAAOa,EACLA,EAAMb,CAAG,GAAK,SAAWa,EAAMb,CAAG,GAAK,QAAUa,EAAMb,CAAG,GAAK,WACjEkB,EAAQL,EAAMb,CAAG,CAAC,EAAIN,EAAKM,CAAG,EACtBkB,EAAAlB,CAAG,EAAIN,EAAKM,CAAG,IACda,EAAMb,CAAG,GAAK,MAGda,EAAMb,CAAG,GAAK,SACvBkB,EAAQL,EAAMb,CAAG,CAAC,EAAI,SAAS,KAAK,OAAO,EAAI,GAAG,EAAI,IAAMN,EAAKM,CAAG,EAC5DkB,EAAAlB,CAAG,EAAIN,EAAKM,CAAG,GAGjBkB,EAAAlB,CAAG,EAAIN,EAAKM,CAAG,EAG3B,OAAIN,EAAK,UAAYA,EAAK,SAAS,OAAS,IAC1CwB,EAAQ,SAAWD,EAAcvB,EAAK,SAAUc,CAAI,GAE/CU,CAAA,CACR,CAAA,EAIGC,GAAe,CAACR,EAAMH,IAAS,CAC7BxB,MAAAA,MAAc,IACf,OAAA2B,EAAA,QAASjB,GAAS,CACrB,MAAMM,EAAMN,EAAKc,EAAK,GAAM,EAC5BxB,EAAQ,IAAIgB,EAAKN,CAAI,CAAA,CACtB,EACMV,CAAA,EAGHoC,EAAe,IAAM,CACzB,MAAMC,EAAO1C,EAAW,MAAQA,EAAW,MAAM,KAAS,EAAA,GACpDoC,EAAO9B,EAAU,MAAM,OAAQoB,GAC5B,CAACA,EAAK,UAAYA,EAAKf,EAAM,QAAQ,KAAK,EAAE,SAAS+B,CAAI,CACjE,EACDnC,EAAU,MAAQ6B,EACdM,EAAK,SAAW,IAClBzC,EAAa,MAAQ,KACvB,EAII0C,GAAmB,CAACC,EAAQnB,KAezB,CACL,QAfiBoB,GAAU,CAE3B,MAAMC,EAAaD,EAAM,cAELC,EAAW,cAAc,iBAAiB,gBAAgB,EAElE,QAASC,GAAe,CACvBA,EAAA,UAAU,OAAO,UAAU,CAAA,CACvC,EAEUD,EAAA,UAAU,IAAI,UAAU,EAEnC7C,EAAa,MAAQ2C,CAAA,CAGZ,GAIPI,GAAgBH,GAAU,CAC1BA,EAAM,MAAQ,SAChBA,EAAM,eAAe,CACvB,EAGII,GAAc,CAAC/C,EAAagD,IAAM,CACtC/C,EAAa,MAAQ+C,EAAE,YAAA,EAEnBC,GAAa,IAAM,OACnB,IAAAvC,EAAAX,EAAa,QAAb,MAAAW,EAAoB,IAAK,CAC3B,IAAIwC,EAAqBC,EACvBtD,EAAS,MACTE,EAAa,MAAMU,EAAM,QAAQ,GAAG,CAAA,EAElC2C,EAAUC,EAAUH,CAAkB,EAClCE,EAAA,IAAM,SAAS,KAAK,SAAW,GAAG,EAAI,IAAMA,EAAQ,IACnDlD,EAAA,MAAM,KAAKkD,CAAO,CAAA,KACtB,CACD,IAAAE,EAAWD,EAAUpD,EAAa,KAAK,EAC3CqD,EAAS,QAAczC,GAAA,CAChBA,EAAA,IAAM,SAAS,KAAK,SAAW,GAAG,EAAI,IAAMA,EAAK,GAAA,CACvD,EACQX,EAAA,MAAM,KAAK,GAAGoD,CAAQ,CACjC,CACArD,EAAa,MAAQ,GACTD,EAAA,MAAM,QAAU,EAAC,EAIzBuD,GAAsBC,GAAS,IAC/B/C,EAAM,OACJA,EAAM,aAAa,OACdA,EAAM,aAEN,CACL,CAAE,MAAO,KAAM,UAAW,QAAS,IAAK,QAAS,MAAO,EAAG,EAC3D,CAAE,MAAO,KAAM,UAAWA,EAAM,QAAQ,MAAO,IAAKA,EAAM,QAAQ,KAAM,EACxE,CAAE,MAAO,KAAM,UAAW,OAAQ,IAAK,OAAQ,MAAO,EAAG,EACzD,CAAE,MAAO,KAAM,UAAW,SAAU,IAAK,SAAU,MAAO,EAAG,CAAA,EAI1DA,EAAM,aAAa,OAAQI,GACzBA,EAAK,YAAc,UAAYA,EAAK,YAAc,MAC1D,CAEJ,EACwBjB,EAAS,CAAA,CAAE,EAyC3B,SAAAuD,EAAuBtD,EAAU4D,EAAO,CAC3C,IAAAjC,EACJ3B,OAAAA,EAAS,QAASgB,GAAS,OAIrB,GAHA4C,IAAU5C,EAAKJ,EAAM,QAAQ,GAAG,IAC3Be,EAAAX,IAELH,EAAAG,EAAK,WAAL,MAAAH,EAAe,OAAQ,CACzB,IAAIgD,EAAMP,EAAuBtC,EAAK,SAAU4C,CAAK,EACjDC,IACKlC,EAAAkC,EAEX,CAAA,CACD,EACMlC,CACT,CAkBM,MAAAmC,EAAYC,GAAS,CAAA,CAAE,EAEvBC,GAAO,CAACnB,EAAQnB,IAAU,CAC9BoC,EAAUjB,EAAO,GAAG,EAAI,CAAE,MAAOnB,EAAQ,EAAE,EAGvCuC,GAAO,CAACpB,EAAQnB,IAAU,CAC9B,IAAIwC,EAAM,CAAC,GAAG7D,EAAS,KAAK,EAC5B6D,EAAI,OAAOJ,EAAUjB,EAAO,GAAG,EAAE,MAAQ,EAAG,EAAGqB,EAAI,OAAOxC,EAAO,CAAC,EAAE,CAAC,CAAC,EACtErB,EAAS,MAAQ6D,EACV,OAAAJ,EAAUjB,EAAO,GAAG,CAAA,EAG7B,OAAAsB,EACE,IAAMvD,EAAM,MACXwD,GAAa,CACH/D,EAAA,MAAQmD,EAAUY,CAAQ,EAC1B/D,EAAA,MAAM,QAAcW,GAAA,CACtBA,EAAA,IAAM,SAAS,KAAK,OAAO,EAAI,GAAG,EAAI,IAAMA,EAAKJ,EAAM,QAAQ,GAAG,CAAA,CACxE,CACH,CAAA,EAGFuD,EACE,IAAMvD,EAAM,QACXwD,GAAa,CACZtE,EAAa,MAAQsE,EAChBA,GAIM/D,EAAA,MAAQmD,EAAU5C,EAAM,KAAK,EAC7BP,EAAA,MAAM,QAAcW,GAAA,CACtBA,EAAA,IAAM,SAAS,KAAK,OAAO,EAAI,GAAG,EAAI,IAAMA,EAAKJ,EAAM,QAAQ,GAAG,CAAA,CACxE,IANDX,EAAW,MAAQ,GACnBG,EAAa,MAAQ,GAOzB,EACA,CACE,KAAM,EACR,CAAA,EAGF+D,EACE,IAAMvD,EAAM,MACXwD,GAAa,CACZ,MAAMtC,EAAOlB,GAAA,YAAAA,EAAO,QACdqB,EAAOoC,GAAMzD,EAAM,KAAgC,EAChDZ,EAAA,MAAQuC,EAAcN,EAAMH,CAAI,EACjCxB,EAAA,MAAQmC,GAAaR,EAAMH,CAAI,EACpBE,EAAAC,EAAMH,EAAM,MAAO,IAAI,CAC5C,CAAA,EAGFwC,GAAU,IAAM,CACdxE,EAAa,MAAQc,EAAM,QAClBP,EAAA,MAAQmD,EAAU5C,EAAM,KAAK,EAC7BP,EAAA,MAAM,QAAcW,GAAA,CACtBA,EAAA,IAAM,SAAS,KAAK,OAAO,EAAI,GAAG,EAAI,IAAMA,EAAKJ,EAAM,QAAQ,GAAG,CAAA,CACxE,CAAA,CACF"}