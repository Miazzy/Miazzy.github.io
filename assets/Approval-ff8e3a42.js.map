{"version":3,"file":"Approval-ff8e3a42.js","sources":["../../src/views/workbench/Approval.vue"],"sourcesContent":["<template>\n  <a-card title=\"任务看板\" :bordered=\"false\">\n    <template #extra>\n      <span @click=\"toMorePage\">更多 &gt;</span>\n    </template>\n    <div class=\"card-content\">\n      <a-tabs v-model:activeKey=\"activeKey\" @change=\"handleTabChange\">\n        <a-tab-pane v-for=\"(item, index) in tabList\" :key=\"item.key\">\n          <template #tab>\n            <a-badge\n              :count=\"item.count\"\n              :offset=\"[16, -12]\"\n              :numberStyle=\"{ transform: 'scale(0.9)' }\"\n            >\n              <span class=\"tab-text\">\n                {{ item.tab }}\n              </span>\n            </a-badge>\n          </template>\n          <div class=\"table-box\">\n            <BasicTable\n              @register=\"tableList[index]\"\n              @row-db-click=\"(record) => handleCheck(record)\"\n              :scroll=\"{ y: 248 }\"\n            />\n          </div>\n        </a-tab-pane>\n      </a-tabs>\n    </div>\n  </a-card>\n  <Schedule ref=\"schedule\" />\n</template>\n\n<script lang=\"ts\" setup>\n  import { ref, onMounted } from 'vue';\n  import { assign } from 'lodash-es';\n  import { BasicTable, useTable, TableAction, BasicColumn } from '/@/components/Table';\n  import * as TaskApi from '@/api/bpm/task';\n  import * as ProcessInstanceApi from '@/api/bpm/processInstance';\n  import { useUserStore } from '/@/store/modules/user';\n  import { addTabPage } from '@/utils/route';\n  import { MsgManager } from '/@/message/MsgManager';\n  import { DateTools } from '/@/utils/dateUtil';\n  import Schedule from '../oa/schedule/Schedule.vue';\n  import moment from 'moment';\n  import * as CommonUtil from '/@/utils/common';\n\n  const userStore = useUserStore();\n  const getUserInfo = userStore.getUserInfo;\n\n  // tab\n  const tabList = ref([\n    {\n      key: '1',\n      tab: '待办任务',\n      count: 0,\n    },\n    {\n      key: '2',\n      tab: '待阅任务',\n      count: 0,\n    },\n    {\n      key: '3',\n      tab: '本人发起',\n      count: 0,\n    },\n    {\n      key: '4',\n      tab: '已办任务',\n      count: 0,\n    },\n    {\n      key: '5',\n      tab: '日程提醒',\n      count: 0,\n    },\n  ]);\n  const activeKey = ref('1');\n  const handleTabChange = (item) => {\n    if (item === '1') {\n      doTodo();\n    } else if (item === '2') {\n      doCC();\n    } else if (item === '3') {\n      doMy();\n    } else if (item === '4') {\n      doDone();\n    } else if (item === '5') {\n      doSchedule();\n    }\n  };\n\n  const toMorePage = () => {\n    if (activeKey.value == '1') {\n      // router.push(`/bpm/task/todo`);\n      addTabPage(`/bpm/task/taskCenter`, '任务中心', { flowType: '010001' });\n    } else if (activeKey.value == '2') {\n      // router.push(`/bpm/task/todo`);\n      addTabPage(`/bpm/task/taskCenter`, '任务中心', { flowType: '010002' });\n    } else if (activeKey.value == '3') {\n      // router.push(`/bpm/task/processInstance`);\n      addTabPage(`/bpm/task/taskCenter`, '任务中心', { flowType: '020001' });\n    } else if (activeKey.value == '4') {\n      // router.push(`/bpm/task/done`);\n      addTabPage(`/bpm/task/taskCenter`, '任务中心', { flowType: '020003' });\n    } else if (activeKey.value == '5') {\n      // router.push(`/bpm/task/done`);\n      addTabPage(`/oa/schedule/index`, '日程提醒');\n    }\n  };\n\n  // table\n  const tableColumns: BasicColumn[] = [\n    {\n      title: '标题',\n      dataIndex: 'title',\n      width: 220,\n      align: 'left',\n      customHeaderCell: (column) => {\n        return {\n          class: 'text-center',\n        };\n      },\n    },\n    {\n      title: '流程名称',\n      dataIndex: 'flowName',\n      width: 100,\n    },\n    {\n      title: '申请部门',\n      dataIndex: 'dept',\n      width: 120,\n    },\n    {\n      title: '申请人',\n      dataIndex: 'person',\n      width: 80,\n    },\n    {\n      title: '申请时间',\n      dataIndex: 'time',\n      width: 120,\n    },\n  ];\n\n  const tableColumns5: BasicColumn[] = [\n    {\n      title: '提醒',\n      dataIndex: 'content',\n      width: 330,\n      align: 'left',\n      customHeaderCell: (column) => {\n        return {\n          class: 'text-center',\n        };\n      },\n    },\n    {\n      title: '开始时间',\n      dataIndex: 'startTime',\n      width: 100,\n    },\n    {\n      title: '创建人',\n      dataIndex: 'creator',\n      width: 120,\n    },\n  ];\n\n  const detailTableProps = {\n    pagination: false,\n    striped: false,\n    useSearchForm: false,\n    showTableSetting: false,\n    bordered: false,\n    showIndexColumn: true,\n    canResize: false,\n    // actionColumn: {\n    //   width: 140,\n    //   title: '操作',\n    //   dataIndex: 'action',\n    // },\n  };\n  const tableDataSource1 = ref([]);\n  const tableDataSource2 = ref([]);\n  const tableDataSource3 = ref([]);\n  const tableDataSource4 = ref([]);\n  const tableDataSource5 = ref([]);\n  const [registerApprovalTable1, tInstance1] = useTable(\n    assign(\n      {\n        dataSource: tableDataSource1,\n        columns: tableColumns,\n      },\n      detailTableProps,\n    ),\n  );\n  const [registerApprovalTable2, tInstance2] = useTable(\n    assign(\n      {\n        dataSource: tableDataSource2,\n        columns: tableColumns,\n      },\n      detailTableProps,\n    ),\n  );\n  const [registerApprovalTable3, tInstance3] = useTable(\n    assign(\n      {\n        dataSource: tableDataSource3,\n        columns: tableColumns,\n      },\n      detailTableProps,\n    ),\n  );\n  const [registerApprovalTable4, tInstance4] = useTable(\n    assign(\n      {\n        dataSource: tableDataSource4,\n        columns: tableColumns,\n      },\n      detailTableProps,\n    ),\n  );\n\n  const [registerApprovalTable5, tInstance5] = useTable(\n    assign(\n      {\n        dataSource: tableDataSource5,\n        columns: tableColumns5,\n      },\n      detailTableProps,\n    ),\n  );\n\n  const tableList = ref([\n    registerApprovalTable1,\n    registerApprovalTable2,\n    registerApprovalTable3,\n    registerApprovalTable4,\n    registerApprovalTable5,\n  ]);\n\n  // 查看\n  const schedule = ref();\n  const handleCheck = (record) => {\n    if (activeKey.value == '2') {\n      TaskApi.updateCcTo(record.processInstanceId).then((res) => {\n        if (res.result) {\n          doCC();\n          CommonUtil.toFlowPage(record.businessKey);\n        }\n      });\n    } else if (activeKey.value == '5') {\n      schedule.value.handleView({ id: record.id, type: record.type });\n    } else {\n      // addTabPage(\n      //   `${record.viewPath}?processInstanceId=${record.processInstanceId}`,\n      //   record.flowName,\n      // );\n      CommonUtil.toFlowPage(record.businessKey);\n    }\n  };\n\n  const doTodo = async () => {\n    //待处理\n    const getTodoTask = await TaskApi.getTodoTaskPage();\n    tableDataSource1.value.splice(0, tableDataSource1.value.length);\n    if (getTodoTask) {\n      tabList.value[0].count = getTodoTask.total;\n      getTodoTask.list.forEach((element) => {\n        tableDataSource1.value.push({\n          title: element.description,\n          flowName: element.processInstance.name,\n          dept: element.processInstance.deptName,\n          person: element.processInstance.startUserNickname,\n          time: DateTools.format(element.createTime, 'YYYY-MM-DD hh:mm'),\n          viewPath: element.bpmProcessDefinitionRespVO.formCustomCreatePath,\n          processInstanceId: element.processInstance.id,\n          businessKey: element.businessKey,\n        });\n      });\n    }\n    if (tInstance1) {\n      tInstance1?.setTableData(tableDataSource1.value);\n    }\n  };\n\n  const doCC = async () => {\n    //待阅读\n    const getCCTaskPage = await TaskApi.getTodoCCPage();\n    tableDataSource2.value.splice(0, tableDataSource2.value.length);\n    if (getCCTaskPage) {\n      tabList.value[1].count = getCCTaskPage.total;\n      getCCTaskPage.list.forEach((element) => {\n        tableDataSource2.value.push({\n          title: element.description,\n          flowName: element.processInstance.name,\n          dept: element.processInstance.deptName,\n          person: element.processInstance.startUserNickname,\n          time: DateTools.format(element.createTime, 'YYYY-MM-DD hh:mm'),\n          viewPath: element.bpmProcessDefinitionRespVO.formCustomCreatePath,\n          processInstanceId: element.processInstance.id,\n          businessKey: element.businessKey,\n        });\n      });\n    }\n    if (tInstance2) {\n      tInstance2?.setTableData(tableDataSource2.value);\n    }\n  };\n\n  const doMy = async () => {\n    //我发起\n    const getMyProcessInstancePage = await ProcessInstanceApi.getMyProcessInstancePage();\n    tableDataSource3.value.splice(0, tableDataSource3.value.length);\n    if (getMyProcessInstancePage) {\n      const createdTaskCount = await TaskApi.getCreatedTaskCount();\n      tabList.value[2].count = createdTaskCount;\n      getMyProcessInstancePage.list.forEach((element) => {\n        tableDataSource3.value.push({\n          title: element.description,\n          flowName: element.name,\n          dept: element.deptName,\n          person: getUserInfo.username,\n          time: DateTools.format(element.createTime, 'YYYY-MM-DD hh:mm'),\n          viewPath: element.bpmProcessDefinitionRespVO.formCustomCreatePath,\n          processInstanceId: element.id,\n          businessKey: element.businessKey,\n        });\n      });\n    }\n    if (tInstance3) {\n      tInstance3?.setTableData(tableDataSource3.value);\n    }\n  };\n\n  const doDone = async () => {\n    //已处理\n    const getDoneTaskPage = await TaskApi.getDoneTaskPage();\n    tableDataSource4.value.splice(0, tableDataSource4.value.length);\n    if (getDoneTaskPage) {\n      getDoneTaskPage.list.forEach((element) => {\n        tableDataSource4.value.push({\n          title: element.description,\n          flowName: element.processInstance.name,\n          dept: element.processInstance.deptName,\n          person: element.processInstance.startUserNickname,\n          time: DateTools.format(element.createTime, 'YYYY-MM-DD hh:mm'),\n          viewPath: element.bpmProcessDefinitionRespVO.formCustomCreatePath,\n          processInstanceId: element.processInstance.id,\n          businessKey: element.businessKey,\n        });\n      });\n    }\n    if (tInstance4) {\n      tInstance4?.setTableData(tableDataSource4.value);\n    }\n  };\n\n  const doSchedule = async () => {\n    //日程\n    const getSchedulePage = await TaskApi.getSchedulePage();\n    tableDataSource5.value = [];\n\n    if (getSchedulePage) {\n      getSchedulePage.forEach((element) => {\n        let item = {\n          content: element.content,\n          id: element.id,\n          type: element.type,\n          startTime: DateTools.format(element.startTime, 'YYYY-MM-DD HH:mm'),\n          creator: element.creator,\n        };\n\n        if (element.type == 'schedule') {\n          let week = new Date().getDay();\n          let startWeek = new Date(element.startTime).getDay();\n          let notificationTime = moment(new Date(element.startTime)).format('HH:mm');\n          let nowTime = moment(new Date()).format('HH:mm');\n          let needNotice = nowTime >= notificationTime;\n          switch (element.notificationRules) {\n            case 'not': //不重复\n              if (\n                moment(new Date()).format('YYYY-MM-DD') ==\n                  moment(new Date(element.startTime)).format('YYYY-MM-DD') &&\n                needNotice\n              ) {\n                tableDataSource5.value.push(item);\n              }\n              break;\n            case 'day': //每日\n              if (needNotice) {\n                tableDataSource5.value.push(item);\n              }\n\n              break;\n            case 'workday': //工作日\n              if (week >= 1 && week <= 5 && needNotice) {\n                tableDataSource5.value.push(item);\n              }\n              break;\n            case 'weekday': //每周\n              if (week == startWeek && needNotice) {\n                tableDataSource5.value.push(item);\n              }\n              break;\n            case 'monthly': //每月\n              let number1 = Math.ceil(new Date().getDate() / 7);\n              let number2 = Math.ceil(new Date(element.startTime).getDate() / 7);\n              if (week == startWeek && number1 == number2 && needNotice) {\n                tableDataSource5.value.push(item);\n              }\n              break;\n            case 'monthly2': //每月当日\n              if (new Date(element.startTime).getDate() == new Date().getDate() && needNotice) {\n                tableDataSource5.value.push(item);\n              }\n              break;\n          }\n        } else {\n          let now = new Date().getTime();\n          let startTime = new Date(element.startTime).getTime();\n          if (startTime - now <= notificationRulesTime[element.notificationRules]) {\n            tableDataSource5.value.push(item);\n          }\n        }\n      });\n      tabList.value[4].count = tableDataSource5.value.length;\n    }\n    if (tInstance5) {\n      tInstance5?.setTableData(tableDataSource5.value);\n    }\n  };\n  const notificationRulesTime = {\n    start: 0,\n    '5min': 5 * 60 * 1000,\n    '15min': 15 * 60 * 1000,\n    '30min': 30 * 60 * 1000,\n    '1h': 60 * 60 * 1000,\n    '2h': 2 * 60 * 60 * 1000,\n    '4h': 4 * 60 * 60 * 1000,\n    '8h': 8 * 60 * 60 * 1000,\n  };\n\n  // 重新加载任务栏数据\n  const reloadAll = async () => {\n    // 延时查询是为了等待后端处理完毕数据，保证查询一致性\n    setTimeout(() => {\n      doTodo();\n      doCC();\n      doMy();\n      doDone();\n      doSchedule();\n    }, 1500);\n  };\n\n  // 加载任务栏待办、已办数据\n  const relodDoTask = async () => {\n    // 延时查询是为了等待后端处理完毕数据，保证查询一致性\n    setTimeout(() => {\n      doTodo();\n      doDone();\n    }, 1500);\n  };\n\n  /** 初始化 */\n  onMounted(async () => {\n    doTodo();\n    doCC();\n    doMy();\n    doSchedule();\n    MsgManager.getInstance().listen('workflow-task-done', relodDoTask);\n    MsgManager.getInstance().listen('workbench-approval', reloadAll);\n    MsgManager.getInstance().listen('setMeeting', doSchedule);\n  });\n</script>\n\n<style lang=\"less\" scoped>\n  .card-content {\n    height: 360px;\n\n    :deep(.ant-tabs-tab) {\n      padding-right: 0;\n      padding-left: 0;\n    }\n\n    :deep(.ant-tabs-top > .ant-tabs-nav::before) {\n      border-bottom-color: transparent;\n    }\n\n    :deep(.vben-basic-table .ant-table-wrapper) {\n      padding: 0;\n    }\n\n    :deep(.vben-basic-table-action .ant-btn-sm) {\n      & > span {\n        font-size: 12px;\n      }\n    }\n\n    :deep(.ant-table-thead th.text-center) {\n      text-align: center !important;\n    }\n\n    .table-box {\n      height: 286px;\n    }\n  }\n</style>\n"],"names":["getUserInfo","useUserStore","tabList","ref","activeKey","handleTabChange","item","doTodo","doCC","doMy","doDone","doSchedule","toMorePage","addTabPage","tableColumns","column","tableColumns5","detailTableProps","tableDataSource1","tableDataSource2","tableDataSource3","tableDataSource4","tableDataSource5","registerApprovalTable1","tInstance1","useTable","assign","registerApprovalTable2","tInstance2","registerApprovalTable3","tInstance3","registerApprovalTable4","tInstance4","registerApprovalTable5","tInstance5","tableList","schedule","handleCheck","record","TaskApi.updateCcTo","res","CommonUtil.toFlowPage","__async","getTodoTask","TaskApi.getTodoTaskPage","element","DateTools","getCCTaskPage","TaskApi.getTodoCCPage","getMyProcessInstancePage","ProcessInstanceApi.getMyProcessInstancePage","createdTaskCount","TaskApi.getCreatedTaskCount","getDoneTaskPage","TaskApi.getDoneTaskPage","getSchedulePage","TaskApi.getSchedulePage","week","startWeek","notificationTime","moment","needNotice","number1","number2","now","notificationRulesTime","reloadAll","relodDoTask","onMounted","MsgManager"],"mappings":"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"}