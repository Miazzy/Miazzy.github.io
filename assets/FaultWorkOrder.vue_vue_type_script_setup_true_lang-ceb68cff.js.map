{"version":3,"file":"FaultWorkOrder.vue_vue_type_script_setup_true_lang-ceb68cff.js","sources":["../../src/views/po/workorder/FaultWorkOrder.vue"],"sourcesContent":["<template>\n  <a-card title=\"基本信息\" :bordered=\"false\">\n    <a-row :gutter=\"32\">\n      <a-col v-show=\"true\" :span=\"12\">\n        <a-form-item name=\"stationName\" label=\"电站名称\" :labelCol=\"{ class: 'detail-label-8' }\">\n          <a-input v-model:value=\"childFormState.stationName\" disabled />\n        </a-form-item>\n      </a-col>\n      <a-col v-show=\"true\" :span=\"12\">\n        <a-form-item name=\"periodName\" label=\"期数\" :labelCol=\"{ class: 'detail-label-8' }\">\n          <a-input v-model:value=\"childFormState.periodName\" disabled />\n        </a-form-item>\n      </a-col>\n    </a-row>\n\n    <a-row :gutter=\"32\">\n      <a-col v-show=\"true\" :span=\"12\">\n        <a-form-item\n          :name=\"['fault', 'faultType']\"\n          label=\"缺陷类型\"\n          :labelCol=\"{ class: 'detail-label-8' }\"\n          :rules=\"[{ required: false, message: '请选择缺陷类型' }]\"\n        >\n          <DictSelectBox\n            v-model:value=\"childFormState.fault.faultType\"\n            :type=\"`fault_type`\"\n            disabled\n          />\n        </a-form-item>\n      </a-col>\n      <a-col v-show=\"true\" :span=\"12\">\n        <a-form-item\n          name=\"sourceCode\"\n          label=\"来源任务\"\n          :labelCol=\"{ class: 'detail-label-8' }\"\n          :rules=\"[{ required: false }]\"\n        >\n          <a @click=\"clickFaultHyperlink\">{{ childFormState.sourceCode }}</a>\n        </a-form-item>\n      </a-col>\n    </a-row>\n\n    <a-row :gutter=\"32\">\n      <a-col v-show=\"true\" :span=\"12\">\n        <a-form-item\n          :name=\"['fault', 'findDate']\"\n          label=\"发现时间\"\n          :labelCol=\"{ class: 'detail-label-8' }\"\n          :rules=\"[{ required: false, message: '请输入发现时间' }]\"\n        >\n          <a-date-picker\n            v-model:value=\"childFormState.fault.findDate\"\n            show-time\n            format=\"YYYY-MM-DD HH:mm\"\n            value-format=\"YYYY-MM-DD HH:mm\"\n            :style=\"`width: 100%`\"\n            disabled\n          />\n        </a-form-item>\n      </a-col>\n      <a-col v-show=\"true\" :span=\"12\">\n        <a-form-item\n          :name=\"['fault', 'findByName']\"\n          label=\"发现人\"\n          :labelCol=\"{ class: 'detail-label-8' }\"\n          :rules=\"[{ required: false, message: '请选择发现人' }]\"\n        >\n          <a-select\n            v-model:value=\"childFormState.fault.findByName\"\n            show-search\n            allow-clear\n            style=\"width: 100%\"\n            :options=\"stationPersonOptions\"\n            @change=\"handleChangefindByName\"\n            disabled\n          />\n        </a-form-item>\n      </a-col>\n    </a-row>\n\n    <a-row :gutter=\"32\">\n      <a-col v-show=\"true\" :span=\"12\">\n        <a-form-item\n          :name=\"['fault', 'equipmentName']\"\n          label=\"设备名称\"\n          :labelCol=\"{ class: 'detail-label-8' }\"\n          :rules=\"[{ required: false, message: '请输入设备名称' }]\"\n        >\n          <a-input v-model:value=\"childFormState.fault.equipmentName\" :maxlength=\"100\" disabled />\n        </a-form-item>\n      </a-col>\n      <a-col v-show=\"true\" :span=\"12\">\n        <a-form-item\n          :name=\"['fault', 'materialWholeName']\"\n          label=\"物料全称\"\n          :labelCol=\"{ class: 'detail-label-8' }\"\n        >\n          <a-input v-model:value=\"childFormState.fault.materialWholeName\" disabled />\n        </a-form-item>\n      </a-col>\n    </a-row>\n\n    <a-row :gutter=\"32\">\n      <a-col v-show=\"true\" :span=\"12\">\n        <a-form-item\n          :name=\"['fault', 'code']\"\n          label=\"设备编码\"\n          :labelCol=\"{ class: 'detail-label-8' }\"\n        >\n          <a @click=\"clickEquipmentHyperlink\">{{ childFormState.fault.code }}</a>\n        </a-form-item>\n      </a-col>\n      <a-col v-show=\"true\" :span=\"12\">\n        <a-form-item\n          :name=\"['fault', 'supplierName']\"\n          label=\"供应商\"\n          :labelCol=\"{ class: 'detail-label-8' }\"\n        >\n          <a-input v-model:value=\"childFormState.fault.supplierName\" disabled />\n        </a-form-item>\n      </a-col>\n    </a-row>\n\n    <a-row :gutter=\"32\">\n      <a-col v-show=\"true\" :span=\"12\">\n        <a-form-item\n          :name=\"['fault', 'factoryName']\"\n          label=\"生产厂家\"\n          :labelCol=\"{ class: 'detail-label-8' }\"\n        >\n          <a-input v-model:value=\"childFormState.fault.factoryName\" disabled />\n        </a-form-item>\n      </a-col>\n      <a-col v-show=\"true\" :span=\"12\">\n        <a-form-item\n          :name=\"['fault', 'areaName']\"\n          label=\"区域\"\n          :labelCol=\"{ class: 'detail-label-8' }\"\n        >\n          <a-input v-model:value=\"childFormState.fault.areaName\" disabled />\n        </a-form-item>\n      </a-col>\n    </a-row>\n\n    <a-row :gutter=\"32\">\n      <a-col v-show=\"true\" :span=\"12\">\n        <a-form-item\n          :name=\"['fault', 'usedDate']\"\n          label=\"投运日期\"\n          :labelCol=\"{ class: 'detail-label-8' }\"\n        >\n          <a-input v-model:value=\"childFormState.fault.usedDate\" disabled />\n        </a-form-item>\n      </a-col>\n      <a-col v-show=\"true\" :span=\"12\">\n        <a-form-item\n          :name=\"['fault', 'productionNumber']\"\n          label=\"出厂编码\"\n          :labelCol=\"{ class: 'detail-label-8' }\"\n        >\n          <a-input v-model:value=\"childFormState.fault.productionNumber\" disabled />\n        </a-form-item>\n      </a-col>\n    </a-row>\n\n    <a-row :gutter=\"32\">\n      <a-col v-show=\"true\" :span=\"12\">\n        <a-form-item\n          :name=\"['fault', 'isWarrantyPeriod']\"\n          label=\"质保期内\"\n          :labelCol=\"{ class: 'detail-label-8' }\"\n          :rules=\"[{ required: false, message: '请选择质保期内' }]\"\n        >\n          <DictSelectBox\n            v-model:value=\"childFormState.fault.isWarrantyPeriod\"\n            :type=\"`yes_or_no`\"\n            disabled\n          />\n        </a-form-item>\n      </a-col>\n      <a-col v-show=\"true\" :span=\"12\">\n        <a-form-item\n          :name=\"['fault', 'faultGrade']\"\n          label=\"缺陷等级\"\n          :labelCol=\"{ class: 'detail-label-8' }\"\n          :rules=\"[{ required: false, message: '请选择缺陷等级' }]\"\n        >\n          <DictSelectBox\n            v-model:value=\"childFormState.fault.faultGrade\"\n            :type=\"`fault_grade`\"\n            disabled\n          />\n        </a-form-item>\n      </a-col>\n    </a-row>\n\n    <a-row :gutter=\"32\">\n      <a-col v-show=\"true\" :span=\"24\">\n        <a-form-item\n          :name=\"['fault', 'checkContent']\"\n          label=\"检查内容\"\n          :labelCol=\"{ class: 'detail-label-8' }\"\n          :rules=\"[{ required: false, message: '请输入检查内容' }]\"\n        >\n          <a-textarea\n            v-model:value=\"childFormState.fault.checkContent\"\n            show-count\n            :rows=\"4\"\n            :maxlength=\"1000\"\n            disabled\n          />\n        </a-form-item>\n      </a-col>\n    </a-row>\n\n    <a-row :gutter=\"32\">\n      <a-col v-show=\"true\" :span=\"24\">\n        <a-form-item\n          :name=\"['fault', 'reason']\"\n          label=\"原因分析\"\n          :labelCol=\"{ class: 'detail-label-8' }\"\n          :rules=\"[{ required: false, message: '请输入原因分析' }]\"\n        >\n          <a-input v-model:value=\"childFormState.fault.reason\" :maxlength=\"200\" disabled />\n        </a-form-item>\n      </a-col>\n    </a-row>\n\n    <a-row :gutter=\"32\">\n      <a-col v-show=\"true\" :span=\"24\">\n        <a-form-item\n          :name=\"['fault', 'planMeasure']\"\n          label=\"计划整改措施\"\n          :labelCol=\"{ class: 'detail-label-8' }\"\n          :rules=\"[{ required: true, message: '请输入计划整改措施' }]\"\n        >\n          <a-textarea\n            v-model:value=\"childFormState.fault.planMeasure\"\n            show-count\n            :rows=\"4\"\n            :maxlength=\"1000\"\n            :disabled=\"disabledInput\"\n          />\n        </a-form-item>\n      </a-col>\n    </a-row>\n\n    <a-row :gutter=\"32\">\n      <a-col v-show=\"true\" :span=\"24\">\n        <a-form-item\n          name=\"subject\"\n          label=\"工单主题\"\n          :labelCol=\"{ class: 'detail-label-8' }\"\n          :rules=\"[{ required: true, message: '请输入工单主题' }]\"\n        >\n          <a-input\n            v-model:value=\"childFormState.subject\"\n            :maxlength=\"100\"\n            :disabled=\"disabledInput\"\n          />\n        </a-form-item>\n      </a-col>\n    </a-row>\n\n    <a-row :gutter=\"32\">\n      <a-col v-show=\"true\" :span=\"12\">\n        <a-form-item\n          name=\"planStartDate\"\n          label=\"计划开始时间\"\n          :labelCol=\"{ class: 'detail-label-8' }\"\n          :rules=\"[{ required: true, message: '请输入计划开始时间' }]\"\n        >\n          <a-date-picker\n            v-model:value=\"childFormState.planStartDate\"\n            show-time\n            format=\"YYYY-MM-DD HH:mm\"\n            value-format=\"YYYY-MM-DD HH:mm\"\n            :style=\"`width: 100%`\"\n            :disabled=\"disabledInput\"\n          />\n        </a-form-item>\n      </a-col>\n      <a-col v-show=\"true\" :span=\"12\">\n        <a-form-item\n          name=\"planEndDate\"\n          label=\"计划完成时间\"\n          :labelCol=\"{ class: 'detail-label-8' }\"\n          :rules=\"[{ required: true, message: '请输入计划完成时间' }]\"\n        >\n          <a-date-picker\n            v-model:value=\"childFormState.planEndDate\"\n            show-time\n            format=\"YYYY-MM-DD HH:mm\"\n            value-format=\"YYYY-MM-DD HH:mm\"\n            :style=\"`width: 100%`\"\n            :disabled=\"disabledInput\"\n          />\n        </a-form-item>\n      </a-col>\n    </a-row>\n\n    <a-row :gutter=\"32\">\n      <a-col v-show=\"true\" :span=\"12\">\n        <a-form-item\n          name=\"grade\"\n          label=\"工单级别\"\n          :labelCol=\"{ class: 'detail-label-8' }\"\n          :rules=\"[{ required: true, message: '请选择工单级别' }]\"\n        >\n          <DictSelectBox\n            v-model:value=\"childFormState.grade\"\n            :type=\"`work_order_grade`\"\n            :disabled=\"disabledInput\"\n          />\n        </a-form-item>\n      </a-col>\n      <a-col v-show=\"true\" :span=\"12\">\n        <a-form-item\n          name=\"planHandleByName\"\n          label=\"计划处理人\"\n          :labelCol=\"{ class: 'detail-label-8' }\"\n          :rules=\"[{ required: true, message: '请选择计划处理人' }]\"\n        >\n          <a-select\n            v-model:value=\"childFormState.planHandleByName\"\n            show-search\n            allow-clear\n            style=\"width: 100%\"\n            :options=\"stationPersonOptions\"\n            @change=\"handleChangePlanHandleByName\"\n            :disabled=\"disabledInput\"\n          />\n        </a-form-item>\n      </a-col>\n    </a-row>\n\n    <a-row :gutter=\"32\">\n      <a-col v-show=\"true\" :span=\"12\">\n        <a-form-item\n          name=\"planConfirmByName\"\n          label=\"计划确认人\"\n          :labelCol=\"{ class: 'detail-label-8' }\"\n          :rules=\"[{ required: true, message: '请选择计划确认人' }]\"\n        >\n          <a-select\n            v-model:value=\"childFormState.planConfirmByName\"\n            show-search\n            allow-clear\n            style=\"width: 100%\"\n            :options=\"stationPersonOptions\"\n            @change=\"handleChangePlanConfirmByName\"\n            :disabled=\"disabledInput\"\n          />\n        </a-form-item>\n      </a-col>\n      <a-col v-show=\"true\" :span=\"12\">\n        <a-form-item\n          name=\"isInvoicing\"\n          label=\"开具两票\"\n          :labelCol=\"{ class: 'detail-label-8' }\"\n          :rules=\"[{ required: true, message: '请选择开具两票' }]\"\n        >\n          <DictSelectBox\n            v-model:value=\"childFormState.isInvoicing\"\n            :type=\"`yes_or_no`\"\n            :disabled=\"disabledInput\"\n          />\n        </a-form-item>\n      </a-col>\n    </a-row>\n  </a-card>\n\n  <a-card title=\"处理过程\" :bordered=\"false\" v-if=\"showProcess\">\n    <div id=\"more-tab-content\" class=\"tab-table-div\">\n      <a-tabs v-model:activeKey=\"activeKey\">\n        <a-tab-pane class=\"tab-pane-form\" key=\"1\" tab=\"处理过程\">\n          <a-row :gutter=\"32\">\n            <a-col v-show=\"true\" :span=\"24\">\n              <a-form-item\n                :name=\"['fault', 'description']\"\n                label=\"缺陷描述\"\n                :labelCol=\"{ class: 'detail-label-8' }\"\n                :rules=\"[{ required: true, message: '请输入缺陷描述' }]\"\n              >\n                <a-textarea\n                  v-model:value=\"childFormState.fault.description\"\n                  show-count\n                  :rows=\"4\"\n                  :maxlength=\"1000\"\n                  :disabled=\"disabledProcessInput\"\n                />\n              </a-form-item>\n            </a-col>\n          </a-row>\n\n          <a-row :gutter=\"32\">\n            <a-col v-show=\"true\" :span=\"24\">\n              <a-form-item\n                :name=\"['fault', 'handleMeasure']\"\n                label=\"处理措施\"\n                :labelCol=\"{ class: 'detail-label-8' }\"\n                :rules=\"[{ required: true, message: '请输入处理措施' }]\"\n              >\n                <a-textarea\n                  v-model:value=\"childFormState.fault.handleMeasure\"\n                  show-count\n                  :rows=\"4\"\n                  :maxlength=\"1000\"\n                  :disabled=\"disabledProcessInput\"\n                />\n              </a-form-item>\n            </a-col>\n          </a-row>\n\n          <a-row :gutter=\"32\">\n            <a-col v-show=\"true\" :span=\"24\">\n              <a-form-item\n                :name=\"['fault', 'remark']\"\n                label=\"备注\"\n                :labelCol=\"{ class: 'detail-label-8' }\"\n              >\n                <a-textarea\n                  v-model:value=\"childFormState.fault.remark\"\n                  show-count\n                  :rows=\"4\"\n                  :maxlength=\"1000\"\n                  :disabled=\"disabledProcessInput\"\n                />\n              </a-form-item>\n            </a-col>\n          </a-row>\n\n          <a-row :gutter=\"32\">\n            <a-col v-show=\"true\" :span=\"12\">\n              <a-form-item\n                :name=\"['fault', 'solveDate']\"\n                label=\"消缺时间\"\n                :labelCol=\"{ class: 'detail-label-8' }\"\n                :rules=\"[{ required: true, message: '请输入消缺时间' }]\"\n              >\n                <a-date-picker\n                  v-model:value=\"childFormState.fault.solveDate\"\n                  show-time\n                  format=\"YYYY-MM-DD HH:mm\"\n                  value-format=\"YYYY-MM-DD HH:mm\"\n                  :style=\"`width: 100%`\"\n                  :disabled=\"disabledProcessInput\"\n                />\n              </a-form-item>\n            </a-col>\n            <a-col v-show=\"true\" :span=\"12\">\n              <a-form-item\n                name=\"handleByName\"\n                label=\"处理人\"\n                :labelCol=\"{ class: 'detail-label-8' }\"\n                :rules=\"[{ required: true, message: '请选择处理人' }]\"\n              >\n                <a-select\n                  v-model:value=\"childFormState.handleByName\"\n                  show-search\n                  allow-clear\n                  style=\"width: 100%\"\n                  :options=\"stationPersonOptions\"\n                  @change=\"handleChangeHandleByName\"\n                  :disabled=\"disabledProcessInput\"\n                />\n              </a-form-item>\n            </a-col>\n          </a-row>\n        </a-tab-pane>\n        <a-tab-pane\n          class=\"tab-pane-table\"\n          v-if=\"childFormState.isInvoicing === '1'\"\n          key=\"2\"\n          tab=\"开具两票\"\n          force-render\n        >\n          <TicketTable\n            ref=\"ticketTableRef\"\n            :formState=\"formState\"\n            :disabledProcessInput=\"disabledProcessInput\"\n            :activeKey=\"activeKey\"\n          />\n        </a-tab-pane>\n      </a-tabs>\n    </div>\n  </a-card>\n</template>\n<script lang=\"ts\" setup>\n  import { reactive, UnwrapRef, ref } from 'vue';\n  import DictSelectBox from '@/components/Framework/Combox/DictSelectBox.vue';\n  import TicketTable from './TicketTable.vue';\n  import { addTabPage } from '@/utils/route';\n\n  const props = defineProps({\n    formState: {\n      type: Object as UnwrapRef<any>,\n      required: true,\n      default: function () {\n        return { fault: {} };\n      },\n    },\n    disabledInput: Boolean,\n    showProcess: Boolean,\n    disabledProcessInput: Boolean,\n    stationPersonOptions: Object,\n  });\n  const childFormState = reactive(props.formState);\n  const activeKey = ref('1');\n  const ticketTableRef = ref();\n\n  function handleChangefindByName(value: string, option) {\n    childFormState.fault.findById = option.lable;\n  }\n\n  function handleChangePlanHandleByName(value: string, option) {\n    childFormState.planHandleById = option.lable;\n  }\n\n  function handleChangePlanConfirmByName(value: string, option) {\n    childFormState.planConfirmById = option.lable;\n  }\n\n  function handleChangeHandleByName(value: string, option) {\n    childFormState.handleById = option.lable;\n  }\n\n  function clickFaultHyperlink() {\n    addTabPage('/po/fault/create', '', { id: props.formState.sourceId });\n  }\n\n  function clickEquipmentHyperlink() {\n    addTabPage('/po/equipment/create', '', { id: props.formState.fault.equipmentId });\n  }\n\n  // 主动暴露组件属性、方法\n  defineExpose({\n    childFormState,\n    getTicketList: function () {\n      if (childFormState.isInvoicing === '0') {\n        return [];\n      }\n      return ticketTableRef.value.getTicketDataSource();\n    },\n  });\n</script>\n"],"names":["childFormState","reactive","props","activeKey","ref","ticketTableRef","handleChangefindByName","value","option","handleChangePlanHandleByName","handleChangePlanConfirmByName","handleChangeHandleByName","clickFaultHyperlink","addTabPage","clickEquipmentHyperlink","__expose"],"mappings":"+kBA2fQA,EAAiBC,EAASC,EAAM,SAAS,EACzCC,EAAYC,EAAI,GAAG,EACnBC,EAAiBD,IAEd,SAAAE,EAAuBC,EAAeC,EAAQ,CACtCR,EAAA,MAAM,SAAWQ,EAAO,KACzC,CAES,SAAAC,EAA6BF,EAAeC,EAAQ,CAC3DR,EAAe,eAAiBQ,EAAO,KACzC,CAES,SAAAE,EAA8BH,EAAeC,EAAQ,CAC5DR,EAAe,gBAAkBQ,EAAO,KAC1C,CAES,SAAAG,EAAyBJ,EAAeC,EAAQ,CACvDR,EAAe,WAAaQ,EAAO,KACrC,CAEA,SAASI,GAAsB,CAC7BC,EAAW,mBAAoB,GAAI,CAAE,GAAIX,EAAM,UAAU,SAAU,CACrE,CAEA,SAASY,GAA0B,CACtBD,EAAA,uBAAwB,GAAI,CAAE,GAAIX,EAAM,UAAU,MAAM,YAAa,CAClF,CAGa,OAAAa,EAAA,CACX,eAAAf,EACA,cAAe,UAAY,CACrB,OAAAA,EAAe,cAAgB,IAC1B,GAEFK,EAAe,MAAM,qBAC9B,CAAA,CACD"}