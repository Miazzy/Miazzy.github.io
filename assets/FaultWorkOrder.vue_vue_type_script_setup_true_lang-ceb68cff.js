import{d as h,r as K,k as U,al as m,Z as N,_ as j,f as e,aa as a,v as n,A as r,$ as _,ad as k,a9 as I,ac as q,F as E}from"./vue-71d1abb3.js";import{_ as p}from"./DictSelectBox.vue_vue_type_script_setup_true_lang-e03e9fe8.js";import F from"./TicketTable-81dd11bc.js";import{ax as B}from"./index.js";const G={id:"more-tab-content",class:"tab-table-div"},L=h({__name:"FaultWorkOrder",props:{formState:{type:Object,required:!0,default:function(){return{fault:{}}}},disabledInput:Boolean,showProcess:Boolean,disabledProcessInput:Boolean,stationPersonOptions:Object},setup(o,{expose:H}){const C=o,t=K(C.formState),c=U("1"),w=U();function M(v,l){t.fault.findById=l.lable}function P(v,l){t.planHandleById=l.lable}function x(v,l){t.planConfirmById=l.lable}function S(v,l){t.handleById=l.lable}function T(){B("/po/fault/create","",{id:C.formState.sourceId})}function O(){B("/po/equipment/create","",{id:C.formState.fault.equipmentId})}return H({childFormState:t,getTicketList:function(){return t.isInvoicing==="0"?[]:w.value.getTicketDataSource()}}),(v,l)=>{const f=m("a-input"),d=m("a-form-item"),s=m("a-col"),i=m("a-row"),g=m("a-date-picker"),y=m("a-select"),b=m("a-textarea"),D=m("a-card"),Y=m("a-tab-pane"),W=m("a-tabs");return N(),j(E,null,[e(D,{title:"基本信息",bordered:!1},{default:a(()=>[e(i,{gutter:32},{default:a(()=>[n(e(s,{span:12},{default:a(()=>[e(d,{name:"stationName",label:"电站名称",labelCol:{class:"detail-label-8"}},{default:a(()=>[e(f,{value:t.stationName,"onUpdate:value":l[0]||(l[0]=u=>t.stationName=u),disabled:""},null,8,["value"])]),_:1})]),_:1},512),[[r,!0]]),n(e(s,{span:12},{default:a(()=>[e(d,{name:"periodName",label:"期数",labelCol:{class:"detail-label-8"}},{default:a(()=>[e(f,{value:t.periodName,"onUpdate:value":l[1]||(l[1]=u=>t.periodName=u),disabled:""},null,8,["value"])]),_:1})]),_:1},512),[[r,!0]])]),_:1}),e(i,{gutter:32},{default:a(()=>[n(e(s,{span:12},{default:a(()=>[e(d,{name:["fault","faultType"],label:"缺陷类型",labelCol:{class:"detail-label-8"},rules:[{required:!1,message:"请选择缺陷类型"}]},{default:a(()=>[e(p,{value:t.fault.faultType,"onUpdate:value":l[2]||(l[2]=u=>t.fault.faultType=u),type:"fault_type",disabled:""},null,8,["value"])]),_:1})]),_:1},512),[[r,!0]]),n(e(s,{span:12},{default:a(()=>[e(d,{name:"sourceCode",label:"来源任务",labelCol:{class:"detail-label-8"},rules:[{required:!1}]},{default:a(()=>[_("a",{onClick:T},k(t.sourceCode),1)]),_:1})]),_:1},512),[[r,!0]])]),_:1}),e(i,{gutter:32},{default:a(()=>[n(e(s,{span:12},{default:a(()=>[e(d,{name:["fault","findDate"],label:"发现时间",labelCol:{class:"detail-label-8"},rules:[{required:!1,message:"请输入发现时间"}]},{default:a(()=>[e(g,{value:t.fault.findDate,"onUpdate:value":l[3]||(l[3]=u=>t.fault.findDate=u),"show-time":"",format:"YYYY-MM-DD HH:mm","value-format":"YYYY-MM-DD HH:mm",style:"width: 100%",disabled:""},null,8,["value"])]),_:1})]),_:1},512),[[r,!0]]),n(e(s,{span:12},{default:a(()=>[e(d,{name:["fault","findByName"],label:"发现人",labelCol:{class:"detail-label-8"},rules:[{required:!1,message:"请选择发现人"}]},{default:a(()=>[e(y,{value:t.fault.findByName,"onUpdate:value":l[4]||(l[4]=u=>t.fault.findByName=u),"show-search":"","allow-clear":"",style:{width:"100%"},options:o.stationPersonOptions,onChange:M,disabled:""},null,8,["value","options"])]),_:1})]),_:1},512),[[r,!0]])]),_:1}),e(i,{gutter:32},{default:a(()=>[n(e(s,{span:12},{default:a(()=>[e(d,{name:["fault","equipmentName"],label:"设备名称",labelCol:{class:"detail-label-8"},rules:[{required:!1,message:"请输入设备名称"}]},{default:a(()=>[e(f,{value:t.fault.equipmentName,"onUpdate:value":l[5]||(l[5]=u=>t.fault.equipmentName=u),maxlength:100,disabled:""},null,8,["value"])]),_:1})]),_:1},512),[[r,!0]]),n(e(s,{span:12},{default:a(()=>[e(d,{name:["fault","materialWholeName"],label:"物料全称",labelCol:{class:"detail-label-8"}},{default:a(()=>[e(f,{value:t.fault.materialWholeName,"onUpdate:value":l[6]||(l[6]=u=>t.fault.materialWholeName=u),disabled:""},null,8,["value"])]),_:1})]),_:1},512),[[r,!0]])]),_:1}),e(i,{gutter:32},{default:a(()=>[n(e(s,{span:12},{default:a(()=>[e(d,{name:["fault","code"],label:"设备编码",labelCol:{class:"detail-label-8"}},{default:a(()=>[_("a",{onClick:O},k(t.fault.code),1)]),_:1})]),_:1},512),[[r,!0]]),n(e(s,{span:12},{default:a(()=>[e(d,{name:["fault","supplierName"],label:"供应商",labelCol:{class:"detail-label-8"}},{default:a(()=>[e(f,{value:t.fault.supplierName,"onUpdate:value":l[7]||(l[7]=u=>t.fault.supplierName=u),disabled:""},null,8,["value"])]),_:1})]),_:1},512),[[r,!0]])]),_:1}),e(i,{gutter:32},{default:a(()=>[n(e(s,{span:12},{default:a(()=>[e(d,{name:["fault","factoryName"],label:"生产厂家",labelCol:{class:"detail-label-8"}},{default:a(()=>[e(f,{value:t.fault.factoryName,"onUpdate:value":l[8]||(l[8]=u=>t.fault.factoryName=u),disabled:""},null,8,["value"])]),_:1})]),_:1},512),[[r,!0]]),n(e(s,{span:12},{default:a(()=>[e(d,{name:["fault","areaName"],label:"区域",labelCol:{class:"detail-label-8"}},{default:a(()=>[e(f,{value:t.fault.areaName,"onUpdate:value":l[9]||(l[9]=u=>t.fault.areaName=u),disabled:""},null,8,["value"])]),_:1})]),_:1},512),[[r,!0]])]),_:1}),e(i,{gutter:32},{default:a(()=>[n(e(s,{span:12},{default:a(()=>[e(d,{name:["fault","usedDate"],label:"投运日期",labelCol:{class:"detail-label-8"}},{default:a(()=>[e(f,{value:t.fault.usedDate,"onUpdate:value":l[10]||(l[10]=u=>t.fault.usedDate=u),disabled:""},null,8,["value"])]),_:1})]),_:1},512),[[r,!0]]),n(e(s,{span:12},{default:a(()=>[e(d,{name:["fault","productionNumber"],label:"出厂编码",labelCol:{class:"detail-label-8"}},{default:a(()=>[e(f,{value:t.fault.productionNumber,"onUpdate:value":l[11]||(l[11]=u=>t.fault.productionNumber=u),disabled:""},null,8,["value"])]),_:1})]),_:1},512),[[r,!0]])]),_:1}),e(i,{gutter:32},{default:a(()=>[n(e(s,{span:12},{default:a(()=>[e(d,{name:["fault","isWarrantyPeriod"],label:"质保期内",labelCol:{class:"detail-label-8"},rules:[{required:!1,message:"请选择质保期内"}]},{default:a(()=>[e(p,{value:t.fault.isWarrantyPeriod,"onUpdate:value":l[12]||(l[12]=u=>t.fault.isWarrantyPeriod=u),type:"yes_or_no",disabled:""},null,8,["value"])]),_:1})]),_:1},512),[[r,!0]]),n(e(s,{span:12},{default:a(()=>[e(d,{name:["fault","faultGrade"],label:"缺陷等级",labelCol:{class:"detail-label-8"},rules:[{required:!1,message:"请选择缺陷等级"}]},{default:a(()=>[e(p,{value:t.fault.faultGrade,"onUpdate:value":l[13]||(l[13]=u=>t.fault.faultGrade=u),type:"fault_grade",disabled:""},null,8,["value"])]),_:1})]),_:1},512),[[r,!0]])]),_:1}),e(i,{gutter:32},{default:a(()=>[n(e(s,{span:24},{default:a(()=>[e(d,{name:["fault","checkContent"],label:"检查内容",labelCol:{class:"detail-label-8"},rules:[{required:!1,message:"请输入检查内容"}]},{default:a(()=>[e(b,{value:t.fault.checkContent,"onUpdate:value":l[14]||(l[14]=u=>t.fault.checkContent=u),"show-count":"",rows:4,maxlength:1e3,disabled:""},null,8,["value"])]),_:1})]),_:1},512),[[r,!0]])]),_:1}),e(i,{gutter:32},{default:a(()=>[n(e(s,{span:24},{default:a(()=>[e(d,{name:["fault","reason"],label:"原因分析",labelCol:{class:"detail-label-8"},rules:[{required:!1,message:"请输入原因分析"}]},{default:a(()=>[e(f,{value:t.fault.reason,"onUpdate:value":l[15]||(l[15]=u=>t.fault.reason=u),maxlength:200,disabled:""},null,8,["value"])]),_:1})]),_:1},512),[[r,!0]])]),_:1}),e(i,{gutter:32},{default:a(()=>[n(e(s,{span:24},{default:a(()=>[e(d,{name:["fault","planMeasure"],label:"计划整改措施",labelCol:{class:"detail-label-8"},rules:[{required:!0,message:"请输入计划整改措施"}]},{default:a(()=>[e(b,{value:t.fault.planMeasure,"onUpdate:value":l[16]||(l[16]=u=>t.fault.planMeasure=u),"show-count":"",rows:4,maxlength:1e3,disabled:o.disabledInput},null,8,["value","disabled"])]),_:1})]),_:1},512),[[r,!0]])]),_:1}),e(i,{gutter:32},{default:a(()=>[n(e(s,{span:24},{default:a(()=>[e(d,{name:"subject",label:"工单主题",labelCol:{class:"detail-label-8"},rules:[{required:!0,message:"请输入工单主题"}]},{default:a(()=>[e(f,{value:t.subject,"onUpdate:value":l[17]||(l[17]=u=>t.subject=u),maxlength:100,disabled:o.disabledInput},null,8,["value","disabled"])]),_:1})]),_:1},512),[[r,!0]])]),_:1}),e(i,{gutter:32},{default:a(()=>[n(e(s,{span:12},{default:a(()=>[e(d,{name:"planStartDate",label:"计划开始时间",labelCol:{class:"detail-label-8"},rules:[{required:!0,message:"请输入计划开始时间"}]},{default:a(()=>[e(g,{value:t.planStartDate,"onUpdate:value":l[18]||(l[18]=u=>t.planStartDate=u),"show-time":"",format:"YYYY-MM-DD HH:mm","value-format":"YYYY-MM-DD HH:mm",style:"width: 100%",disabled:o.disabledInput},null,8,["value","disabled"])]),_:1})]),_:1},512),[[r,!0]]),n(e(s,{span:12},{default:a(()=>[e(d,{name:"planEndDate",label:"计划完成时间",labelCol:{class:"detail-label-8"},rules:[{required:!0,message:"请输入计划完成时间"}]},{default:a(()=>[e(g,{value:t.planEndDate,"onUpdate:value":l[19]||(l[19]=u=>t.planEndDate=u),"show-time":"",format:"YYYY-MM-DD HH:mm","value-format":"YYYY-MM-DD HH:mm",style:"width: 100%",disabled:o.disabledInput},null,8,["value","disabled"])]),_:1})]),_:1},512),[[r,!0]])]),_:1}),e(i,{gutter:32},{default:a(()=>[n(e(s,{span:12},{default:a(()=>[e(d,{name:"grade",label:"工单级别",labelCol:{class:"detail-label-8"},rules:[{required:!0,message:"请选择工单级别"}]},{default:a(()=>[e(p,{value:t.grade,"onUpdate:value":l[20]||(l[20]=u=>t.grade=u),type:"work_order_grade",disabled:o.disabledInput},null,8,["value","disabled"])]),_:1})]),_:1},512),[[r,!0]]),n(e(s,{span:12},{default:a(()=>[e(d,{name:"planHandleByName",label:"计划处理人",labelCol:{class:"detail-label-8"},rules:[{required:!0,message:"请选择计划处理人"}]},{default:a(()=>[e(y,{value:t.planHandleByName,"onUpdate:value":l[21]||(l[21]=u=>t.planHandleByName=u),"show-search":"","allow-clear":"",style:{width:"100%"},options:o.stationPersonOptions,onChange:P,disabled:o.disabledInput},null,8,["value","options","disabled"])]),_:1})]),_:1},512),[[r,!0]])]),_:1}),e(i,{gutter:32},{default:a(()=>[n(e(s,{span:12},{default:a(()=>[e(d,{name:"planConfirmByName",label:"计划确认人",labelCol:{class:"detail-label-8"},rules:[{required:!0,message:"请选择计划确认人"}]},{default:a(()=>[e(y,{value:t.planConfirmByName,"onUpdate:value":l[22]||(l[22]=u=>t.planConfirmByName=u),"show-search":"","allow-clear":"",style:{width:"100%"},options:o.stationPersonOptions,onChange:x,disabled:o.disabledInput},null,8,["value","options","disabled"])]),_:1})]),_:1},512),[[r,!0]]),n(e(s,{span:12},{default:a(()=>[e(d,{name:"isInvoicing",label:"开具两票",labelCol:{class:"detail-label-8"},rules:[{required:!0,message:"请选择开具两票"}]},{default:a(()=>[e(p,{value:t.isInvoicing,"onUpdate:value":l[23]||(l[23]=u=>t.isInvoicing=u),type:"yes_or_no",disabled:o.disabledInput},null,8,["value","disabled"])]),_:1})]),_:1},512),[[r,!0]])]),_:1})]),_:1}),o.showProcess?(N(),I(D,{key:0,title:"处理过程",bordered:!1},{default:a(()=>[_("div",G,[e(W,{activeKey:c.value,"onUpdate:activeKey":l[29]||(l[29]=u=>c.value=u)},{default:a(()=>[e(Y,{class:"tab-pane-form",key:"1",tab:"处理过程"},{default:a(()=>[e(i,{gutter:32},{default:a(()=>[n(e(s,{span:24},{default:a(()=>[e(d,{name:["fault","description"],label:"缺陷描述",labelCol:{class:"detail-label-8"},rules:[{required:!0,message:"请输入缺陷描述"}]},{default:a(()=>[e(b,{value:t.fault.description,"onUpdate:value":l[24]||(l[24]=u=>t.fault.description=u),"show-count":"",rows:4,maxlength:1e3,disabled:o.disabledProcessInput},null,8,["value","disabled"])]),_:1})]),_:1},512),[[r,!0]])]),_:1}),e(i,{gutter:32},{default:a(()=>[n(e(s,{span:24},{default:a(()=>[e(d,{name:["fault","handleMeasure"],label:"处理措施",labelCol:{class:"detail-label-8"},rules:[{required:!0,message:"请输入处理措施"}]},{default:a(()=>[e(b,{value:t.fault.handleMeasure,"onUpdate:value":l[25]||(l[25]=u=>t.fault.handleMeasure=u),"show-count":"",rows:4,maxlength:1e3,disabled:o.disabledProcessInput},null,8,["value","disabled"])]),_:1})]),_:1},512),[[r,!0]])]),_:1}),e(i,{gutter:32},{default:a(()=>[n(e(s,{span:24},{default:a(()=>[e(d,{name:["fault","remark"],label:"备注",labelCol:{class:"detail-label-8"}},{default:a(()=>[e(b,{value:t.fault.remark,"onUpdate:value":l[26]||(l[26]=u=>t.fault.remark=u),"show-count":"",rows:4,maxlength:1e3,disabled:o.disabledProcessInput},null,8,["value","disabled"])]),_:1})]),_:1},512),[[r,!0]])]),_:1}),e(i,{gutter:32},{default:a(()=>[n(e(s,{span:12},{default:a(()=>[e(d,{name:["fault","solveDate"],label:"消缺时间",labelCol:{class:"detail-label-8"},rules:[{required:!0,message:"请输入消缺时间"}]},{default:a(()=>[e(g,{value:t.fault.solveDate,"onUpdate:value":l[27]||(l[27]=u=>t.fault.solveDate=u),"show-time":"",format:"YYYY-MM-DD HH:mm","value-format":"YYYY-MM-DD HH:mm",style:"width: 100%",disabled:o.disabledProcessInput},null,8,["value","disabled"])]),_:1})]),_:1},512),[[r,!0]]),n(e(s,{span:12},{default:a(()=>[e(d,{name:"handleByName",label:"处理人",labelCol:{class:"detail-label-8"},rules:[{required:!0,message:"请选择处理人"}]},{default:a(()=>[e(y,{value:t.handleByName,"onUpdate:value":l[28]||(l[28]=u=>t.handleByName=u),"show-search":"","allow-clear":"",style:{width:"100%"},options:o.stationPersonOptions,onChange:S,disabled:o.disabledProcessInput},null,8,["value","options","disabled"])]),_:1})]),_:1},512),[[r,!0]])]),_:1})]),_:1}),t.isInvoicing==="1"?(N(),I(Y,{class:"tab-pane-table",key:"2",tab:"开具两票","force-render":""},{default:a(()=>[e(F,{ref_key:"ticketTableRef",ref:w,formState:o.formState,disabledProcessInput:o.disabledProcessInput,activeKey:c.value},null,8,["formState","disabledProcessInput","activeKey"])]),_:1})):q("",!0)]),_:1},8,["activeKey"])])]),_:1})):q("",!0)],64)}}});export{L as _};
//# sourceMappingURL=FaultWorkOrder.vue_vue_type_script_setup_true_lang-ceb68cff.js.map
