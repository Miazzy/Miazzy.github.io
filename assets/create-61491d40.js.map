{"version":3,"file":"create-61491d40.js","sources":["../../src/views/po/supervision/create.ts","../../src/views/po/supervision/create.vue"],"sourcesContent":["import { BasicColumn } from '@/components/Table';\nimport { defHttp } from '@/utils/http/axios';\n\nenum Api {\n  //查询期数\n  getStationPeriodData = '/baseset/common/list-stationPeriod',\n  //预试单位\n  getRelatedPartyData = '/baseset/related-party/get-list?partyTypeCodes=settlementUnit',\n\n  addSupervisionData = '/po/technical-supervision/create',\n  getSupervisionData = '/po/technical-supervision/get',\n  getSupervisionDtlData = '/po/technical-supervision/dtl/list',\n  getEquipmentPage = '/po/equipment/page',\n}\n\nexport const getEquipmentUrl = Api.getEquipmentPage;\n\n// 查询电站分期\nexport function getStationPeriodData(params) {\n  return defHttp.post({ url: Api.getStationPeriodData, params });\n}\nexport function getRelatedPartyData(params) {\n  return defHttp.get({ url: Api.getRelatedPartyData, params });\n}\n//试验检测明细\nexport function getSupervisionDtlData(technicalSupervisionId) {\n  return defHttp.get({ url: Api.getSupervisionDtlData+\"?technicalSupervisionId=\"+technicalSupervisionId });\n}\n//试验检测单据\nexport function getSupervisionData(params) {\n  return defHttp.get({ url: Api.getSupervisionData, params });\n}\n\n// 新增试验检测\nexport function createSupervision(data) {\n  return defHttp.post({ url: Api.addSupervisionData, data });\n}\n\nexport const dtlColumns: BasicColumn[] = [\n  { title: '期数', dataIndex: 'periodId',align: 'left',headAlign:'center', width: 160 },\n  { title: '物料类别', dataIndex: 'materialName',resizable: true,align: 'left',headAlign:'center', width: 160 },\n  { title: '设备名称', dataIndex: 'equipmentId',resizable: true,align: 'left',headAlign:'center', width: 160 },\n  { title: '设备编码', dataIndex: 'equipmentCode',resizable: true,align: 'left',headAlign:'center', width: 160 },\n  { title: '区域子阵', dataIndex: 'areaName',resizable: true,align: 'left',headAlign:'center', width: 160 },\n  { slots: { title: 'faultContent' },align: 'left',headAlign:'center', dataIndex: 'faultContent', width: 160 },\n  { slots: { title: 'reason' },align: 'left',headAlign:'center', dataIndex: 'reason', width: 160 },\n  { slots: { title: 'rectificationMeasures' },align: 'left',headAlign:'center', dataIndex: 'rectificationMeasures', width: 160 },\n  { slots: { title: 'isSolve' }, dataIndex: 'isSolve', width: 160 },\n  { title: '是否缺陷', dataIndex: 'isFault', width: 160 },\n  { title: '缺陷等级', dataIndex: 'faultGrade', width: 160 },\n  { title: '缺陷类型', dataIndex: 'faultType', width: 160 },\n  { title: '计划完成日期', dataIndex: 'finishedRectificationDate', width: 160 },\n  { title: '佐证报告',align: 'left',headAlign:'center', dataIndex: 'bizFileId', width: 160 },\n];\n","<template>\n  <PageWrapper dense contentFullHeight fixedHeight   style=\"position: relative\">\n    <div class=\"load\">\n      <a-spin :spinning=\"formState.spinning\" tip=\"Loading...\">\n        <div class=\"process-box\">\n          <div class=\"header-box\">\n            <BillTitle :options=\"billTitleOptions\" />\n            <WfApproveBox\n              :processInstanceId=\"processInstanceId\"\n              @agree=\"flowOption.handleAgree\"\n              @save=\"flowOption.handleSave\"\n              @submit=\"flowOption.handleSubmit\"\n              :processStatus=\"formState.status\"\n              :listenMessage=\"`super-vision`\"\n            />\n            <!-- <PrintButton style=\"margin-left: 10px\" v-if=\"formState.status === 2\" /> -->\n          </div>\n          <div class=\"content\">\n            <a-form\n              :model=\"formState\"\n              name=\"basic\"\n              ref=\"formRef\"\n              autocomplete=\"off\"\n              @finish=\"onFinish\"\n            >\n              <a-card title=\"基本信息\" :bordered=\"false\">\n                <a-row :gutter=\"32\">\n                  <a-col :span=\"12\">\n                    <a-form-item\n                      label=\"电站名称\"\n                      name=\"stationName\"\n                      :labelCol=\"{ style: { width: '124px'} }\" \n                      :rules=\"[{ required: false }]\"\n                    >\n                      <a-input v-model:value=\"formState.stationName\" disabled />\n                    </a-form-item>\n                  </a-col>\n                  <a-col :span=\"12\">\n                    <a-form-item\n                      label=\"期数\"\n                      name=\"periodId\"\n                      :labelCol=\"{ style: { width: '124px'} }\" \n                      :rules=\"[{ required: true, message: '期数不能为空。' }]\"\n                    >\n                      <a-select\n                        v-model:value=\"formState.periodId\"\n                        mode=\"multiple\"\n                        allow-clear\n                        :options=\"periodList\"\n                        :disabled=\"disabledInput\"\n                        @change=\"changeSelectPeriod\"\n                      />\n                    </a-form-item>\n                  </a-col>\n                  <a-col :span=\"12\">\n                    <a-form-item\n                      label=\"业务类型\"\n                      name=\"businessKind\"\n                      :labelCol=\"{ style: { width: '124px'} }\" \n                      :rules=\"[{ required: true, message: '业务类型不能为空。' }]\"\n                    >\n                      <DictSelectBox\n                        :type=\"`supervision_business_kind`\"\n                        :disabled=\"disabledInput\"\n                        v-model:value=\"formState.businessKind\"\n                        style=\"width: 100%\"\n                      />\n                    </a-form-item>\n                  </a-col>\n\n                  <a-col :span=\"12\">\n                    <a-form-item\n                      label=\"预试单位\"\n                      name=\"preExaminationCompanyId\"\n                      :labelCol=\"{ style: { width: '124px'} }\" \n                      :rules=\"[{ required: true, message: '预试单位不能为空。' }]\"\n                    >\n                      <a-select\n                        v-model:value=\"formState.preExaminationCompanyId\"\n                        allowClear\n                        :options=\"preExaminationCompanyList\"\n                        :disabled=\"disabledInput\"\n                        @change=\"\n                          (id, item) => {\n                            formState.preExaminationCompanyId = id;\n                            formState.preExaminationCompany = item.label;\n                          }\n                        \"\n                      />\n                    </a-form-item>\n                  </a-col>\n\n                  <a-col :span=\"12\">\n                    <a-form-item\n                      label=\"本次试验日期\"\n                      name=\"startDate\"\n                      :labelCol=\"{ style: { width: '124px'} }\" \n                      :rules=\"[{ required: true, message: '本次试验日期不能为空。' }]\"\n                    >\n                      <a-date-picker\n                        v-model:value=\"formState.startDate\"\n                        valueFormat=\"YYYY-MM-DD\"\n                        style=\"width: 100%\"\n                        :disabled=\"disabledInput\"\n                      />\n                    </a-form-item>\n                  </a-col>\n                  <a-col :span=\"12\">\n                    <a-form-item\n                      label=\"本次完成日期\"\n                      name=\"endDate\"\n                      :labelCol=\"{ style: { width: '124px'} }\" \n                      :rules=\"[{ required: true, message: '本次完成日期不能为空。' }]\"\n                    >\n                      <a-date-picker\n                        v-model:value=\"formState.endDate\"\n                        valueFormat=\"YYYY-MM-DD\"\n                        style=\"width: 100%\"\n                        :disabled=\"disabledInput\"\n                      />\n                    </a-form-item>\n                  </a-col>\n                  <a-col :span=\"12\">\n                    <a-form-item\n                      label=\"上次试验日期\"\n                      name=\"lastDate\"\n                      :labelCol=\"{ style: { width: '124px'} }\" \n                      :rules=\"[{ required: false, message: '上次试验日期' }]\"\n                    >\n                      <a-date-picker\n                        v-model:value=\"formState.lastDate\"\n                        valueFormat=\"YYYY-MM-DD\"\n                        style=\"width: 100%\"\n                        :disabled=\"disabledInput\"\n                      />\n                    </a-form-item>\n                  </a-col>\n                  <a-col :span=\"12\">\n                    <a-form-item\n                      label=\"下次试验日期\"\n                      name=\"nextDate\"\n                      :labelCol=\"{ style: { width: '124px'} }\" \n                      :rules=\"[{ required: true, message: '下次试验日期不能为空。' }]\"\n                    >\n                      <a-date-picker\n                        v-model:value=\"formState.nextDate\"\n                        valueFormat=\"YYYY-MM-DD\"\n                        style=\"width: 100%\"\n                        :disabled=\"disabledInput\"\n                      />\n                    </a-form-item>\n                  </a-col>\n                  <a-col :span=\"12\">\n                    <a-form-item\n                      label=\"试验结果\"\n                      name=\"examinationResult\"\n                      :labelCol=\"{ style: { width: '124px'} }\" \n                      :rules=\"[{ required: true, message: '试验结果不能为空。' }]\"\n                    >\n                      <DictSelectBox\n                        :type=\"`examination_result`\"\n                        :disabled=\"disabledInput\"\n                        v-model:value=\"formState.examinationResult\"\n                        style=\"width: 100%\"\n                      />\n                    </a-form-item>\n                  </a-col>\n                  <a-col :span=\"24\">\n                    <a-form-item\n                      label=\"运维合同要求\"\n                      name=\"contractRequirement\"\n                      :labelCol=\"{ style: { width: '124px'} }\" \n                      :rules=\"[{ required: false }]\"\n                    >\n                      <a-textarea\n                        v-model:value=\"formState.contractRequirement\"\n                        row=\"3\"\n                        maxlength=\"512\"\n                        :disabled=\"disabledInput\"\n                      />\n                    </a-form-item>\n                  </a-col>\n                  <a-col :span=\"24\">\n                    <a-form-item\n                      label=\"说明\"\n                      name=\"remark\"\n                      :labelCol=\"{ style: { width: '124px'} }\" \n                      :rules=\"[{ required: false }]\"\n                    >\n                      <a-textarea\n                        v-model:value=\"formState.remark\"\n                        row=\"3\"\n                        maxlength=\"1024\"\n                        :disabled=\"disabledInput\"\n                      />\n                    </a-form-item>\n                  </a-col>\n                </a-row>\n              </a-card>\n              <a-card  :bordered=\"false\">\n              <BasicTable\n                  @register=\"dtlTable\"\n                  title=\"问题明细\"\n                  class=\"dtl-table\"\n                >\n                  <template #faultContent> <div class=\"customer_require\">检查内容</div> </template>\n                  <template #reason> <div class=\"customer_require\">原因分析</div> </template>\n                  <template #rectificationMeasures>\n                    <div class=\"customer_require\">整改措施</div>\n                  </template>\n                  <template #isSolve> <div class=\"customer_require\">是否解决</div> </template>\n                  <template #toolbar v-if=\"formState.status == 0 && !disabledInput\">\n                    <a-button @click=\"addDtl\" :preIcon=\"IconEnum.ADD\" \n                      >添加</a-button\n                    >\n                    <a-button @click=\"deleteDtl\" :preIcon=\"IconEnum.DELETE\">删除</a-button>\n                  </template>\n                  <template #bodyCell=\"{ column, record }\">\n                    <template v-if=\"column.dataIndex === 'periodId'\">\n                      <a-select\n                        v-model:value=\"record[column.dataIndex]\"\n                        allow-clear\n                        :options=\"selectPeriodList\"\n                        :disabled=\"disabledInput\"\n                        @change=\"\n                          (id, item) => {\n                            record[column.dataIndex] = id;\n                            record['periodName'] = item.label;\n                          }\n                        \"\n                        style=\"width: 100%\"\n                      />\n                    </template>\n                    <template v-if=\"column.dataIndex === 'equipmentId'\">\n                      <SearchBox\n                        v-model:value=\"record['equipmentName']\"\n                        :columns=\"searchBoxColumns\"\n                        :disabled=\"disabledInput\"\n                        :api=\"getEquipmentUrl\"\n                        :apiParamFunc=\"\n                          () => {\n                            if (!record.periodId) {\n                              return false;\n                            }\n                            return { periodId: record.periodId,status:1 };\n                          }\n                        \"\n                        :pagination=\"true\"\n                        style=\"width: 100%\"\n                        @change=\"\n                          (value, selectRow) => {\n                            changePeriodEquepment(value, selectRow, record);\n                          }\n                        \"\n                      />\n                    </template>\n                    <template v-if=\"column.dataIndex === 'faultContent'\">\n                      <a-input\n                        :disabled=\"disabledInput\"\n                        v-model:value=\"record[column.dataIndex]\"\n                        style=\"width: 100%\"\n                        maxlength=\"512\"\n                      />\n                    </template>\n                    <template v-if=\"column.dataIndex === 'reason'\">\n                      <a-input\n                        :disabled=\"disabledInput\"\n                        v-model:value=\"record[column.dataIndex]\"\n                        style=\"width: 100%\"\n                        maxlength=\"512\"\n                      />\n                    </template>\n                    <template v-if=\"column.dataIndex === 'rectificationMeasures'\">\n                      <a-input\n                        :disabled=\"disabledInput\"\n                        v-model:value=\"record[column.dataIndex]\"\n                        style=\"width: 100%\"\n                        maxlength=\"512\"\n                      />\n                    </template>\n\n                    <template v-if=\"column.dataIndex === 'isSolve'\">\n                      <a-select\n                        v-model:value=\"record[column.dataIndex]\"\n                        style=\"width: 100%\"\n                        allow-clear\n                        :disabled=\"disabledInput\"\n                      >\n                        <a-select-option value=\"0\">未解决</a-select-option>\n                        <a-select-option value=\"1\">已解决</a-select-option>\n                      </a-select>\n                    </template>\n                    <template v-if=\"column.dataIndex === 'isFault'\">\n                      <DictSelectBox\n                        :type=\"`yes_or_no`\"\n                        :disabled=\"disabledInput\"\n                        v-model:value=\"record[column.dataIndex]\"\n                        style=\"width: 100%\"\n                      />\n                    </template>\n                    <template v-if=\"column.dataIndex === 'faultGrade'\">\n                      <DictSelectBox\n                        :type=\"`fault_grade`\"\n                        :disabled=\"disabledInput\"\n                        v-model:value=\"record[column.dataIndex]\"\n                        style=\"width: 100%\"\n                      />\n                    </template>\n                    <template v-if=\"column.dataIndex === 'faultType'\">\n                      <DictSelectBox\n                        :type=\"`fault_type`\"\n                        :disabled=\"disabledInput\"\n                        v-model:value=\"record[column.dataIndex]\"\n                        style=\"width: 100%\"\n                      />\n                    </template>\n                    <template v-if=\"column.dataIndex === 'finishedRectificationDate'\">\n                      <a-date-picker\n                        v-model:value=\"record[column.dataIndex]\"\n                        valueFormat=\"YYYY-MM-DD\"\n                        style=\"width: 100%\"\n                        :disabled=\"disabledInput\"\n                      />\n                    </template>\n                    <template v-if=\"column.dataIndex === 'bizFileId'\">\n                      <UploadBox\n                        :width=\"800\"\n                        :height=\"550\"\n                        :maxCount=\"20\"\n                        :maxSize=\"100 * 1024 * 1024\"\n                        :application=\"`po`\"\n                        :module=\"`supervisiondtl`\"\n                        :vmode=\"formState.status == 0 ? `box` : `view`\"\n                        :bizId=\"record[column.dataIndex]\"\n                      />\n                    </template>\n                  </template>\n                </BasicTable>\n              </a-card>\n              <a-card title=\"附件上传\" :bordered=\"false\">\n                <UploadBox\n                  :width=\"800\"\n                  :height=\"550\"\n                  :maxCount=\"20\"\n                  :maxSize=\"100 * 1024 * 1024\"\n                  :application=\"`po`\"\n                  :module=\"`supervision`\"\n                  :vmode=\"formState.status == 0 ? `box` : `view`\"\n                  :bizId=\"formState.bizFileId\"\n                />\n              </a-card>\n            </a-form>\n            \n          </div>\n        </div>\n      </a-spin>\n    </div>\n</PageWrapper>\n</template>\n<script lang=\"ts\" setup>\n  //form\n  import { PageWrapper } from '/@/components/Page';\n  import { reactive, ref, onMounted,toRaw,computed } from 'vue';\n  import { urlToPath } from '/@/utils/route';\n  import { FormInstance } from 'ant-design-vue';\n  // import PrintButton from '/@/components/Framework/Button/PrintButton.vue';\n  import {\n    createSupervision,\n    dtlColumns,\n    getSupervisionDtlData,\n    getSupervisionData,\n    getStationPeriodData,\n    getRelatedPartyData,\n    getEquipmentUrl,\n  } from './create';\n  import { BasicTable, useTable } from '@/components/Table';\n  import DictSelectBox from '@/components/Framework/Combox/DictSelectBox.vue';\n  import BillTitle from '/@/components/Framework/BillTitle/BillTitle.vue';\n  import WfApproveBox from '/@/components/Framework/WorkFlow/WfApproveBox.vue';\n  import { IconEnum } from '@/enums/appEnum';\n  import * as ProcessInstanceApi from '@/api/bpm/processInstance';\n  import UploadBox from '@/components/Framework/Combox/UploadBox.vue';\n  import { buildShortUUID } from '@/utils/uuid';\n  import SearchBox from '@/components/Framework/Combox/SearchBox.vue';\n  import { SysMessage } from '/@/hooks/web/useMessage';\n  import { MsgManager } from '/@/message/MsgManager';\n  import { closeCurrentTab } from '@/utils/route';\n  import { useUserStore } from '/@/store/modules/user';\n\n\n  const userStore = useUserStore();\n  const userInfo = toRaw(userStore.getUserInfo);\n  const disabledInput=computed(()=>{\n    return formState.status!=0 || (formState.status==0 && \n    formState.personMemberId !='' && \n          formState.personMemberId.substring(0,32) != userInfo.userId);\n  })\n  const isRequire = ref(true);\n\n  const processInstanceId: any = ref('');\n  const formRef = ref<FormInstance>();\n  const periodList: any = ref([]);\n  const preExaminationCompanyList: any = ref([]);\n  const selectPeriodList: any = ref([]);\n  const searchBoxColumns: any = ref([\n    {\n      title: '设备名称',\n      dataIndex: 'name',\n    },\n  ]);\n\n  const changePeriodEquepment = (value, selectRow, record) => {\n    let item = selectRow.record;\n\n    record.equipmentId = item.key;\n    record.equipmentName = item.name;\n    record.equipmentCode = item.code;\n    record.materialName = item.materialWholeName;\n    record.areaName = item.areaName;\n  };\n  let {params:query} = urlToPath() as any;\n  const formState:any = reactive({\n    id: query.id || '',\n    stationName: query.stationName || '',\n    stationId: query.stationId || '',\n    stationOrganName: query.stationOrganName || '',\n    stationOrganId: query.stationOrganId || '',\n    periodId: [],\n    periodName: [],\n    businessKind: '',\n    preExaminationCompanyId: '',\n    preExaminationCompany: '',\n    personMemberId: '',\n    startDate: '',\n    billCode: '',\n    fillinDate: '',\n    spinning:false,\n    endDate: '',\n    lastDate: '',\n    nextDate: '',\n    examinationResult: '',\n    contractRequirement: '',\n    remark: '',\n    status: 0,\n    dtl: {},\n    bizFileId: '',\n  });\n\n  const onFinish = () => {\n    formState.dtl = getDataSource();\n    formState.spinning=true;\n    createSupervision(formState)\n      .then((rsp) => {\n        if (rsp.result != '') {\n          formState.id = rsp.result;\n          SysMessage.getInstance().success(formState.status == 1 ? '提交成功' : '保存成功');\n          if (formState.status == 1) {\n            setTimeout(() => {\n              closeCurrentTab();\n              MsgManager.getInstance().sendMsg('super-vision', {});\n            }, 100);\n          }\n        } else {\n          isRequire.value = false;\n         \n          formState.status = 0;\n          SysMessage.getInstance().error('保存失败.');\n        }\n        formState.spinning=false;\n      })\n      .catch((e) => {\n        isRequire.value = false;\n        formState.status = 0;\n        formState.spinning=false;\n        console.log(e);\n      });\n  };\n  const billTitleOptions = reactive<any>({subject : '试验检测'});\n  \n  const dtlData: any = ref([]);\n\n  const flowOption = {\n    handleAgree: (flowData) => {\n      console.log('同意', flowData);\n    },\n\n    handleSave: (flowData) => {\n      console.log('保存', flowData);\n      isRequire.value = false;\n      formState.status = 0;\n      onFinish();\n    },\n\n    handleSubmit: (flowData) => {\n      console.log('提交', flowData);\n      isRequire.value = true;\n      formState.status = 1;\n      const value = formRef.value;\n      if (!value) {\n        return;\n      }\n      value\n        .validateFields()\n        .then(() => {\n          onFinish();\n        })\n        .catch((e) => {\n          console.log(e);\n          formState.status = 0;\n        });\n    },\n  };\n\n  const changeSelectPeriod = (ids, arr) => {\n    formState.periodId = arr.filter((e) => e.value).map((e) => e.value);\n    formState.periodName = arr.filter((e) => e.value).map((e) => e.label);\n    selectPeriodList.value = arr;\n    if (dtlData.value.length > 0) {\n      dtlData.value = dtlData.value.filter((e) => {\n        return formState.periodId.includes(e.periodId);\n      });\n    }\n    reload();\n  };\n\n  const getDtlTableData = async () => {\n    let dataObj = await getSupervisionDtlData(formState.id);\n    dataObj.result.forEach((e) => {\n      e.isFault = e.isFault + '';\n    });\n    dtlData.value = dataObj.result;\n  };\n\n  const [\n    dtlTable,\n    { getDataSource, reload, getSelectRowKeys, clearSelectedRowKeys, deleteTableDataRecord },\n  ] = useTable({\n    dataSource: dtlData,\n    rowKey: 'id',\n    pagination: false,\n    bordered: true,\n    columns: dtlColumns,\n    useSearchForm: false,\n    showTableSetting: false,\n    rowSelection: {\n      type: 'checkbox',\n    },\n  });\n\n  const addDtl = () => {\n    dtlData.value.push({\n      id: new Date().getTime(),\n      periodId: '',\n      materialName: '',\n      equipmentId: '',\n      equipmentNum: '',\n      areaSet: '',\n      faultContent: '',\n      reason: '',\n      rectificationMeasures: '',\n      isSolve: '',\n      isFault: '',\n      faultGrade: '',\n      faultType: '',\n      finishedRectificationDate: '',\n      bizFileId: buildShortUUID(),\n    });\n  };\n  const deleteDtl = () => {\n    deleteTableDataRecord(getSelectRowKeys());\n    clearSelectedRowKeys();\n  };\n\n  const loadData = () => {\n    getStationPeriodData({ powerStationId: formState.stationId }).then((rsp) => {\n      rsp.result.forEach((e) => {\n        periodList.value.push({ value: e.powerStationPeriodId, label: e.powerStationPeriodName });\n      });\n    });\n    getRelatedPartyData({}).then((rsp) => {\n      rsp.result.forEach((e) => {\n        preExaminationCompanyList.value.push({ value: e.id, label: e.name });\n      });\n    });\n  };\n\n  // global\n  onMounted(async () => {\n    processInstanceId.value = query.processInstanceId;\n    if (!formState.id && query.processInstanceId) {\n      const processInstance = await ProcessInstanceApi.getProcessInstance(\n        query.processInstanceId as string,\n      );\n\n      formState.id = processInstance.businessKey;\n    }\n    getSupervisionData({ id: formState.id })\n      .then((rsp) => {\n        let rs = rsp.result;\n        if (formState.id) {\n          for (let key in rs) {\n            formState[key] = rs[key];\n          }\n          formState.status = Number(formState.status);\n          if (formState.periodId instanceof Array) {\n            formState.periodId.forEach((e, index) => {\n              selectPeriodList.value.push({ value: e, label: formState.periodName[index] });\n            });\n          }\n\n          getDtlTableData();\n        } else {\n          formState.billCode = rs.billCode;\n          formState.personMemberName = rs.personMemberName;\n          formState.deptName=rs.deptName;\n          formState.fillinDate = rs.fillinDate;\n          formState.bizFileId = buildShortUUID();\n        }\n        let { billCode, fillinDate, personMemberName,deptName } = rs;\n        Object.assign(billTitleOptions, { billCode, fillinDate, personMemberName,deptName });\n      })\n      .then(() => {\n        loadData();\n      });\n  });\n</script>\n\n<style lang=\"less\" scoped>\n  .customer_require::before {\n    content: '*';\n    display: inline-block;\n    margin-right: 4px;\n    color: #ff4d4f;\n    font-family: SimSun, sans-serif;\n    font-size: 14px;\n    line-height: 1;\n  }\n\n  .dtl-table {\n    :deep(.ant-table-body) {\n      height: 178px !important;\n      max-height: 178px !important;\n    }\n  }\n</style>\n"],"names":["getEquipmentUrl","getStationPeriodData","params","defHttp","getRelatedPartyData","getSupervisionDtlData","technicalSupervisionId","getSupervisionData","createSupervision","data","dtlColumns","userStore","useUserStore","userInfo","toRaw","disabledInput","computed","formState","isRequire","ref","processInstanceId","formRef","periodList","preExaminationCompanyList","selectPeriodList","searchBoxColumns","changePeriodEquepment","value","selectRow","record","item","query","urlToPath","reactive","onFinish","getDataSource","rsp","SysMessage","closeCurrentTab","MsgManager","e","billTitleOptions","dtlData","flowOption","flowData","changeSelectPeriod","ids","arr","reload","getDtlTableData","__async","dataObj","dtlTable","getSelectRowKeys","clearSelectedRowKeys","deleteTableDataRecord","useTable","addDtl","buildShortUUID","deleteDtl","loadData","onMounted","processInstance","ProcessInstanceApi.getProcessInstance","rs","key","index","billCode","fillinDate","personMemberName","deptName"],"mappings":"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"}