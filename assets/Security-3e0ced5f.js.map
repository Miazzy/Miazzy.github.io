{"version":3,"file":"Security-3e0ced5f.js","sources":["../../src/views/da/stationOperation/operation/Security.vue"],"sourcesContent":["<template>\n  <div class=\"security\">\n    <SmallModule title=\"安全工器具统计\">\n      <template #content>\n        <div class=\"content-layout\">\n          <a-table\n            class=\"operation-screen-table\"\n            :columns=\"securityColumns\"\n            :data-source=\"securityData\"\n            size=\"small\"\n            :pagination=\"false\"\n            :scroll=\"{ y: 'calc(26.79vh - 0.73rem)' }\"\n            :customRow=\"rowCustom\"\n            :row-class-name=\"(_record, index) => (index % 2 === 0 ? 'table-striped' : null)\"\n          >\n            <template #bodyCell=\"{ column, record }\">\n              <template v-if=\"column.key === 'date'\">\n                <span class=\"blue-text\">{{ record.date }}</span>\n              </template>\n              <template v-else-if=\"column.key === 'status'\">\n                <span v-if=\"record.status === 'waiting'\" class=\"blue-text\">{{\n                  record.statusText\n                }}</span>\n                <span v-if=\"record.status === 'outofDate'\" class=\"red-text\">{{\n                  record.statusText\n                }}</span>\n              </template>\n            </template>\n          </a-table>\n        </div>\n      </template>\n    </SmallModule>\n  </div>\n</template>\n\n<script lang=\"ts\" setup>\n  import SmallModule from '/@/components/Framework/OperationScreen/SmallModule.vue';\n  import { reactive, UnwrapRef, ref, onMounted } from 'vue';\n  import { optionsSecurity, getSecurityData, securityColumns } from './data';\n  import { assign } from 'lodash-es';\n  import { addTabPage } from '@/utils/route';\n\n  interface Props {\n    operationSearchInfo?: {};\n  }\n  const props = withDefaults(defineProps<Props>(), {});\n\n  const securitySearchInfo: UnwrapRef<any> = reactive({});\n  const securityIndexData: UnwrapRef<any> = reactive({});\n\n  const rowCustom = (record, index) => {\n    return {\n      onClick: () => {\n        rowToSafetyTool(record);\n      },\n    };\n  };\n\n  const rowToSafetyTool = (record: any) => {\n    addTabPage('/po/safetytools/safetytools', null, { code: record.id });\n  };\n\n  onMounted(() => {\n    assign(securitySearchInfo, props.operationSearchInfo);\n    securitySearchInfo.selectSecurityValue = 'tools';\n    querySecurityData();\n  });\n\n  const handleSecurityChange = (value: string) => {\n    securitySearchInfo.selectSecurityValue = value.value;\n    querySecurityData();\n  };\n\n  const securityData = ref([]);\n\n  const querySecurityData = async () => {\n    securitySearchInfo.selectValue = securitySearchInfo.selectSecurityValue;\n    let data = await getSecurityData(securitySearchInfo);\n    if (data.result) {\n      assign(securityIndexData, data.result);\n      securityData.value = data.result;\n    }\n  };\n\n  // const data = [\n  //   {\n  //     key: '1',\n  //     id: 'GQJ001',\n  //     deviceName: '35KV绝缘手套',\n  //     date: '2023-10-23',\n  //     status: 'waiting',\n  //     statusText: '待检验',\n  //   },\n  //   {\n  //     key: '2',\n  //     id: 'GQJ001',\n  //     deviceName: '35KV绝缘手套',\n  //     date: '2023-10-23',\n  //     status: 'outofDate',\n  //     statusText: '超期未检',\n  //   },\n  //   {\n  //     key: '3',\n  //     id: 'GQJ001',\n  //     deviceName: '35KV绝缘手套',\n  //     date: '2023-10-23',\n  //     status: 'outofDate',\n  //     statusText: '超期未检',\n  //   },\n  //   {\n  //     key: '4',\n  //     id: 'GQJ001',\n  //     deviceName: '35KV绝缘手套',\n  //     date: '2023-10-23',\n  //     status: 'outofDate',\n  //     statusText: '超期未检',\n  //   },\n  //   {\n  //     key: '5',\n  //     id: 'GQJ001',\n  //     deviceName: '35KV绝缘手套',\n  //     date: '2023-10-23',\n  //     status: 'outofDate',\n  //     statusText: '超期未检',\n  //   },\n  //   {\n  //     key: '6',\n  //     id: 'GQJ001',\n  //     deviceName: '35KV绝缘手套',\n  //     date: '2023-10-23',\n  //     status: 'outofDate',\n  //     statusText: '超期未检',\n  //   },\n  //   {\n  //     key: '7',\n  //     id: 'GQJ001',\n  //     deviceName: '35KV绝缘手套',\n  //     date: '2023-10-23',\n  //     status: 'outofDate',\n  //     statusText: '超期未检',\n  //   },\n  //   {\n  //     key: '8',\n  //     id: 'GQJ001',\n  //     deviceName: '35KV绝缘手套',\n  //     date: '2023-10-23',\n  //     status: 'outofDate',\n  //     statusText: '超期未检',\n  //   },\n  // ];\n</script>\n\n<style lang=\"less\" scoped>\n  .content-layout {\n    width: 100%;\n    height: 100%;\n    margin-top: -0.12rem;\n    padding: 0 0.16rem;\n\n    .blue-text {\n      color: #03a9ff;\n    }\n\n    .white-text {\n      color: #fff;\n    }\n\n    .green-text {\n      color: #00ffa4;\n    }\n\n    .red-text {\n      color: #ff4f38;\n    }\n\n    .operation-screen-table {\n      height: 100%;\n\n      :deep(.ant-empty-normal) {\n        margin: 5.38vh 0;\n      }\n    }\n  }\n</style>\n"],"names":["securitySearchInfo","reactive","securityIndexData","rowCustom","record","index","rowToSafetyTool","addTabPage","onMounted","assign","props","querySecurityData","securityData","ref","__async","data","getSecurityData"],"mappings":"2uBA+CQA,EAAqCC,EAAS,CAAA,CAAE,EAChDC,EAAoCD,EAAS,CAAA,CAAE,EAE/CE,EAAY,CAACC,EAAQC,KAClB,CACL,QAAS,IAAM,CACbC,EAAgBF,CAAM,CACxB,CAAA,GAIEE,EAAmBF,GAAgB,CACvCG,EAAW,8BAA+B,KAAM,CAAE,KAAMH,EAAO,GAAI,CAAA,EAGrEI,EAAU,IAAM,CACPC,EAAAT,EAAoBU,EAAM,mBAAmB,EACpDV,EAAmB,oBAAsB,QACvBW,GAAA,CACnB,EAOK,MAAAC,EAAeC,EAAI,CAAA,CAAE,EAErBF,EAAoB,IAAYG,EAAA,sBACpCd,EAAmB,YAAcA,EAAmB,oBAChD,IAAAe,EAAO,MAAMC,EAAgBhB,CAAkB,EAC/Ce,EAAK,SACAN,EAAAP,EAAmBa,EAAK,MAAM,EACrCH,EAAa,MAAQG,EAAK,OAC5B"}