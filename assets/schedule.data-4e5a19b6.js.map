{"version":3,"file":"schedule.data-4e5a19b6.js","sources":["../../src/views/oa/schedule/work/schedule/schedule.data.ts"],"sourcesContent":["import { defHttp } from '/@/utils/http/axios';\nimport { BasicColumn, useRender } from '/@/components/Table';\nimport type { FormProps } from '/@/components/Form/src/types/form';\nimport { useUserStore } from '/@/store/modules/user';\n\nenum Api {\n  STATION_POS_TREE_URL = '/baseset/common/list-stationPosTree',\n  CREATE_URL = '/oa/work-schedule/create',\n  UPDATE_URL = '/oa/work-schedule/update',\n  UPDATE_STATUS_URL = '/oa/work-schedule/update-status',\n  DELETE_URL = '/oa/work-schedule/delete',\n  GET_URL = '/oa/work-schedule/get',\n  PAGE_URL = '/oa/work-schedule/page',\n  EXPORT_EXCEL_URL = '/oa/work-schedule/export-excel',\n  RECEIVE_RANGE_LIST_URL = '/oa/work-schedule//work-receive-range/list',\n}\n\nexport const getPostTree = (params) =>\n  defHttp.post(\n    {\n      url: Api.STATION_POS_TREE_URL,\n      params,\n    },\n    { isOnlyResult: true },\n  );\n\n// 新增工作安排\nexport const createData = (params) =>\n  defHttp.post(\n    {\n      url: Api.CREATE_URL,\n      params,\n    },\n    {},\n  );\n\n// 修改工作安排\nexport const updateData = (params) =>\n  defHttp.put(\n    {\n      url: Api.UPDATE_URL,\n      params,\n    },\n    {},\n  );\n\n// 修改工作安排状态\nexport const updateStatus = (id: string, status: number) =>\n  defHttp.put(\n    {\n      url: `${Api.UPDATE_STATUS_URL}?id=${id}&status=${status}`,\n    },\n    {},\n  );\n\nexport const saveData = (params) => {\n  if (!params.id) {\n    return createData(params);\n  }\n  return updateData(params);\n};\n\n// 删除工作安排\nexport const deleteData = (id: string) =>\n  defHttp.delete(\n    {\n      url: `${Api.DELETE_URL}?id=${id}`,\n    },\n    {},\n  );\n\n// 获取工作安排数据\nexport const getData = (id: string) =>\n  defHttp.get(\n    {\n      url: `${Api.GET_URL}?id=${id}`,\n    },\n    { isOnlyResult: true },\n  );\n\n// 分页获取工作安排列表\nexport const getPage = (params) =>\n  defHttp.get(\n    {\n      url: Api.PAGE_URL,\n      params,\n    },\n    { isOnlyResult: true },\n  );\n\n// 获取工作安排接收范围列表\nexport const getReceiveRangeList = (workScheduleId: string) =>\n  defHttp.get(\n    {\n      url: `${Api.RECEIVE_RANGE_LIST_URL}?workScheduleId=${workScheduleId}`,\n    },\n    { isOnlyResult: true },\n  );\n\n// 导出工作安排\nexport const exportExcel = (params) =>\n  defHttp.post(\n    {\n      url: Api.EXPORT_EXCEL_URL,\n      params,\n      responseType: 'blob',\n    },\n    { isOnlyResult: true },\n  );\n\nexport const columns: BasicColumn[] = [\n  {\n    title: '类型',\n    dataIndex: 'type',\n    width: 100,\n    sorter: true,\n    resizable: true,\n    customRender: ({ record }) => {\n      return record.typeText;\n    },\n  },\n  {\n    title: '内容',\n    dataIndex: 'content',\n    headAlign: 'center',\n    align: 'left',\n    width: 220,\n    sorter: true,\n    resizable: true,\n    customRender: ({ text, record }) => {\n      if (!record.url) {\n        return text;\n      }\n      return useRender.renderIframeLink(record.url, undefined, {}, text);\n    },\n  },\n  {\n    title: '工作菜单',\n    dataIndex: 'menuName',\n    headAlign: 'center',\n    align: 'left',\n    width: 150,\n    sorter: true,\n    resizable: true,\n  },\n  {\n    title: '开始日期',\n    dataIndex: 'startDate',\n    width: 100,\n    sorter: true,\n    resizable: true,\n  },\n  {\n    title: '结束日期',\n    dataIndex: 'endDate',\n    width: 100,\n    sorter: true,\n    resizable: true,\n  },\n  {\n    title: '建议时间',\n    dataIndex: 'reminderTime',\n    width: 100,\n    sorter: true,\n    resizable: true,\n  },\n  {\n    title: '重复类型',\n    dataIndex: 'repeatRule',\n    width: 140,\n    sorter: true,\n    resizable: true,\n    customRender: ({ record }) => {\n      return record.repeatRuleText;\n    },\n  },\n  {\n    title: '状态',\n    dataIndex: 'status',\n    width: 100,\n    sorter: true,\n    resizable: true,\n  },\n  {\n    title: '接收范围数量',\n    dataIndex: 'receiveRangeNum',\n    headAlign: 'center',\n    align: 'right',\n    width: 120,\n    sorter: true,\n    resizable: true,\n  },\n  {\n    title: '创建人',\n    dataIndex: 'creatorName',\n    width: 100,\n    sorter: true,\n    resizable: true,\n  },\n  {\n    title: '创建时间',\n    dataIndex: 'createTime',\n    width: 120,\n    sorter: true,\n    resizable: true,\n  },\n];\n\nexport const searchForm: FormProps = {\n  baseColProps: { span: 8 },\n  labelWidth: 120,\n  autoAdvancedLine: 1,\n  schemas: [\n    {\n      label: '类型',\n      field: 'type',\n      component: 'DictSelectBox',\n      componentProps: {\n        type: 'work_schedule_type',\n      },\n    },\n    {\n      label: '内容',\n      field: 'content',\n      component: 'Input',\n    },\n  ],\n};\n\nexport const searchBoxMenuColumns: BasicColumn[] = [\n  { title: '菜单名称', dataIndex: 'menuName', key: 'menuName', minWidth: 100 },\n  { title: '是否是流程', dataIndex: 'isFlowText', key: 'isFlowText', minWidth: 80 },\n];\n\nexport const detailColumns: BasicColumn[] = [\n  {\n    title: '组织',\n    dataIndex: 'stationOrganName',\n    headAlign: 'center',\n    align: 'left',\n    ifShow: useUserStore().isMultiOrganization,\n  },\n  { title: '电站', dataIndex: 'stationName', headAlign: 'center', align: 'left', width: 180 },\n  { title: '岗位', dataIndex: 'postName', headAlign: 'center', align: 'left', width: 180 },\n];\n"],"names":["getPostTree","params","defHttp","createData","updateData","updateStatus","id","status","saveData","deleteData","getData","getPage","getReceiveRangeList","workScheduleId","exportExcel","columns","record","text","useRender","searchForm","searchBoxMenuColumns","detailColumns","useUserStore"],"mappings":"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"}