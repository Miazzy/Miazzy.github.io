{"version":3,"file":"SettingFooter-f4105f89.js","sources":["../../src/layouts/default/setting/components/SettingFooter.vue"],"sourcesContent":["<template>\n  <div :class=\"prefixCls\">\n    <!-- \n      <a-button type=\"primary\" block @click=\"handleCopy\">\n      <CopyOutlined class=\"mr-2\" />\n      {{ t('layout.setting.copyBtn') }}\n    </a-button>\n\n    <a-button color=\"warning\" block @click=\"handleResetSetting\" class=\"my-3\">\n      <RedoOutlined class=\"mr-2\" />\n      {{ t('common.resetText') }}\n    </a-button>\n\n    <a-button color=\"error\" block @click=\"handleClearAndRedo\">\n      <RedoOutlined class=\"mr-2\" />\n      {{ t('layout.setting.clearBtn') }}\n    </a-button>\n    -->\n  </div>\n</template>\n<script lang=\"ts\">\n  import { defineComponent, unref } from 'vue';\n\n  import { CopyOutlined, RedoOutlined } from '@ant-design/icons-vue';\n\n  import { useAppStore } from '/@/store/modules/app';\n  import { usePermissionStore } from '/@/store/modules/permission';\n  import { useMultipleTabStore } from '/@/store/modules/multipleTab';\n  import { useUserStore } from '/@/store/modules/user';\n\n  import { useDesign } from '/@/hooks/web/useDesign';\n  import { useI18n } from '/@/hooks/web/useI18n';\n  import { useMessage } from '/@/hooks/web/useMessage';\n  import { useCopyToClipboard } from '/@/hooks/web/useCopyToClipboard';\n\n  import { updateColorWeak } from '/@/logics/theme/updateColorWeak';\n  import { updateGrayMode } from '/@/logics/theme/updateGrayMode';\n  import defaultSetting from '/@/settings/projectSetting';\n  import { updateSidebarBgColor } from '/@/logics/theme/updateBackground';\n\n  export default defineComponent({\n    name: 'SettingFooter',\n    components: { CopyOutlined, RedoOutlined },\n    setup() {\n      const permissionStore = usePermissionStore();\n      const { prefixCls } = useDesign('setting-footer');\n      const { t } = useI18n();\n      const { createSuccessModal, createMessage } = useMessage();\n      const tabStore = useMultipleTabStore();\n      const userStore = useUserStore();\n      const appStore = useAppStore();\n\n      function handleCopy() {\n        const { isSuccessRef } = useCopyToClipboard(\n          JSON.stringify(unref(appStore.getProjectConfig), null, 2),\n        );\n        unref(isSuccessRef) &&\n          createSuccessModal({\n            title: t('layout.setting.operatingTitle'),\n            content: t('layout.setting.operatingContent'),\n          });\n      }\n      function handleResetSetting() {\n        try {\n          appStore.setProjectConfig(defaultSetting);\n          const { colorWeak, grayMode } = defaultSetting;\n          updateSidebarBgColor();\n          updateColorWeak(colorWeak);\n          updateGrayMode(grayMode);\n          createMessage.success(t('layout.setting.resetSuccess'));\n        } catch (error: any) {\n          createMessage.error(error);\n        }\n      }\n\n      function handleClearAndRedo() {\n        localStorage.clear();\n        appStore.resetAllState();\n        permissionStore.resetState();\n        tabStore.resetState();\n        userStore.resetState();\n        // location.reload();\n      }\n      return {\n        prefixCls,\n        t,\n        handleCopy,\n        handleResetSetting,\n        handleClearAndRedo,\n      };\n    },\n  });\n</script>\n<style lang=\"less\" scoped>\n  @prefix-cls: ~'@{namespace}-setting-footer';\n\n  .@{prefix-cls} {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n  }\n</style>\n"],"names":["_sfc_main","defineComponent","CopyOutlined","RedoOutlined","permissionStore","usePermissionStore","prefixCls","useDesign","t","useI18n","createSuccessModal","createMessage","useMessage","tabStore","useMultipleTabStore","userStore","useUserStore","appStore","useAppStore","handleCopy","isSuccessRef","useCopyToClipboard","unref","handleResetSetting","defaultSetting","colorWeak","grayMode","updateSidebarBgColor","updateColorWeak","updateGrayMode","error","handleClearAndRedo","_sfc_render","_ctx","_cache","$props","$setup","$data","$options"],"mappings":"uOAwCE,MAAAA,EAAeC,EAAgB,CAC7B,KAAM,gBACN,WAAY,CAAE,aAAAC,EAAc,aAAAC,CAAa,EACzC,OAAQ,CACN,MAAMC,EAAkBC,IAClB,CAAE,UAAAC,CAAA,EAAcC,EAAU,gBAAgB,EAC1C,CAAE,EAAAC,GAAMC,IACR,CAAE,mBAAAC,EAAoB,cAAAC,CAAc,EAAIC,EAAW,EACnDC,EAAWC,IACXC,EAAYC,IACZC,EAAWC,IAEjB,SAASC,GAAa,CACd,KAAA,CAAE,aAAAC,GAAiBC,EACvB,KAAK,UAAUC,EAAML,EAAS,gBAAgB,EAAG,KAAM,CAAC,CAAA,EAEpDK,EAAAF,CAAY,GAChBV,EAAmB,CACjB,MAAOF,EAAE,+BAA+B,EACxC,QAASA,EAAE,iCAAiC,CAAA,CAC7C,CACL,CACA,SAASe,GAAqB,CACxB,GAAA,CACFN,EAAS,iBAAiBO,CAAc,EAClC,KAAA,CAAE,UAAAC,EAAW,SAAAC,CAAa,EAAAF,EACXG,IACrBC,EAAgBH,CAAS,EACzBI,EAAeH,CAAQ,EACTf,EAAA,QAAQH,EAAE,6BAA6B,CAAC,QAC/CsB,EAAY,CACnBnB,EAAc,MAAMmB,CAAK,CAC3B,CACF,CAEA,SAASC,GAAqB,CAC5B,aAAa,MAAM,EACnBd,EAAS,cAAc,EACvBb,EAAgB,WAAW,EAC3BS,EAAS,WAAW,EACpBE,EAAU,WAAW,CAEvB,CACO,MAAA,CACL,UAAAT,EACA,EAAAE,EACA,WAAAW,EACA,mBAAAI,EACA,mBAAAQ,CAAA,CAEJ,CACF,CAAC,EA1FU,SAAAC,EAAAC,EAAEC,EAASC,EAAAC,EAAAC,EAAAC,EAAA"}