{"version":3,"file":"areaDialog-3723d7e9.js","sources":["../../src/views/monitor/PVArea/subareaOverview/areaDialog.vue"],"sourcesContent":["<template>\n  <Dialog\n    ref=\"deviceDialog\"\n    :title=\"props.title\"\n    :visible=\"modalVisible\"\n    :showBtm=\"false\"\n    @update:visible=\"updateVisible\"\n    :width=\"width\"\n    :height=\"height\"\n  >\n    <div class=\"device-dialog-content\">\n      <ul class=\"tab-bar-list\">\n        <li\n          v-for=\"(item, index) in tabBarList\"\n          :key=\"index\"\n          class=\"tab-bar-item\"\n          :class=\"{ active: activeTabKey === index }\"\n          @click=\"handleClickTab(index)\"\n          >{{ item }}</li\n        >\n      </ul>\n      <!-- 实时信息 -->\n      <div v-show=\"activeTabKey === 0\" class=\"tab-panel1\">\n        <div class=\"data-box\">\n          <div class=\"left-part\">\n            <div class=\"part-header\">\n              <div class=\"header-left\">\n                <span class=\"header-icon\"></span>\n                <span class=\"header-text\">明细</span>\n              </div>\n              <div class=\"header-right\">\n                {{ indexData?.eventTime }}\n              </div>\n            </div>\n            <div class=\"part-content\">\n              <div class=\"data-list-box\">\n                <ul class=\"data-list\">\n                  <li class=\"data-item\">\n                    <span class=\"data-label align-center\">输入功率(kW):</span>\n                    <span class=\"data-value align-center\">{{ indexData?.inputPower }}</span>\n                  </li>\n                  <li class=\"data-item\">\n                    <span class=\"data-label align-center\">输出功率(kW):</span>\n                    <span class=\"data-value align-center\">{{ indexData?.activePower }}</span>\n                  </li>\n                  <li class=\"data-item\">\n                    <span class=\"data-label align-center\">无功功率(kVar):</span>\n                    <span class=\"data-value align-center\">{{ indexData?.reactivePower }}</span>\n                  </li>\n                  <li class=\"data-item\">\n                    <span class=\"data-label align-center\">日发电量(kWh):</span>\n                    <span class=\"data-value align-center\">{{ indexData?.outputPowerDay }}</span>\n                  </li>\n                  <li class=\"data-item\">\n                    <span class=\"data-label align-center\">累计日发电量(万kWh):</span>\n                    <span class=\"data-value align-center\">{{ indexData?.totalOutputPower }}</span>\n                  </li>\n                  <li class=\"data-item\">\n                    <span class=\"data-label align-center\">装机容量(kWp):</span>\n                    <span class=\"data-value align-center\">{{ indexData?.installedCapacity }}</span>\n                  </li>\n                  <li class=\"data-item\">\n                    <span class=\"data-label align-center\">等效小时数(h):</span>\n                    <span class=\"data-value align-center\">{{ indexData?.ppr }}</span>\n                  </li>\n                </ul>\n              </div>\n            </div>\n          </div>\n          <div class=\"right-part\">\n            <div class=\"part-header\">\n              <div class=\"header-left\">\n                <span class=\"header-icon\"></span>\n                <span class=\"header-text\">数据明细</span>\n              </div>\n            </div>\n            <div class=\"part-content\" style=\"height: 680px; overflow: auto\">\n              <AreaChart :index=\"indexOptions\" :areaId=\"props.data.areaId\" />\n            </div>\n          </div>\n        </div>\n      </div>\n      <!-- 数据对比 -->\n      <div v-show=\"activeTabKey === 1\" class=\"tab-panel4\">\n        <AreaDataComparison :index=\"indexOptions\" :areaId=\"props.data.areaId\" />\n      </div>\n    </div>\n  </Dialog>\n</template>\n\n<script lang=\"ts\" setup>\n  import { ref, onMounted, watch, defineExpose } from 'vue';\n  import Dialog from '@/components/Framework/Modal/Dialog.vue';\n  import AreaChart from './areaChart.vue';\n  import AreaDataComparison from './areaDataComparison.vue';\n  import { formatToDateTime } from '@/utils/dateUtil';\n  import { getAreaIndexData, getAreaIndex } from '../../monitorApi.ts';\n\n  const props = defineProps({\n    visible: Boolean, // 是否显示弹框\n    title: String, // 弹框标题\n    data: {\n      type: Object,\n      default: {},\n    },\n    areaOptions: [],\n    width: { type: Number, default: 1080 }, // 弹框宽度\n    height: { type: Number, default: 800 }, // 弹框高度\n    ycData: { type: Array, default: [] }, // 遥测实时数据\n    yxData: { type: Array, default: [] }, // 遥信实时数据\n  });\n  const emit = defineEmits(['update:visible']); // 定义事件\n  const modalVisible = ref(false); // 是否显示弹框\n  const updateVisible = ($event) => {\n    modalVisible.value = $event;\n    emit('update:visible', false); // 关闭弹框\n  };\n\n  // tab\n  const tabBarList = ref(['实时信息', '数据对比']);\n  const activeTabKey = ref(0);\n  const handleClickTab = (index) => {\n    activeTabKey.value = index;\n  };\n\n  // 列表表头\n  const detailColumns: BasicColumn[] = [\n    {\n      title: '时间',\n      dataIndex: 'time',\n      width: 150,\n    },\n    {\n      title: '指标1',\n      dataIndex: 'target1',\n      sorter: true, // 排序\n      width: 80,\n    },\n    {\n      title: '指标2',\n      dataIndex: 'target2',\n      sorter: true, // 排序\n      width: 80,\n    },\n    {\n      title: '指标3',\n      dataIndex: 'target3',\n      sorter: true, // 排序\n      width: 80,\n    },\n    {\n      title: '指标4',\n      dataIndex: 'target4',\n      sorter: true, // 排序\n      width: 80,\n    },\n  ];\n  const tableData = ref([\n    {\n      time: '16:25:00 ',\n      target1: '10V',\n      target2: '10A',\n      target3: '10KW',\n      target4: '10V',\n    },\n  ]);\n\n  watch(\n    () => props.visible,\n    (newValue) => {\n      modalVisible.value = newValue;\n    },\n  );\n\n  const indexData = ref(null);\n  const loadIndexData = async () => {\n    let index = await getAreaIndexData({ areaId: props.data.areaId });\n    if (index) {\n      indexData.value = index;\n    }\n  };\n  defineExpose({ loadIndexData });\n\n  const indexOptions = ref(null);\n  const initIndex = async () => {\n    let index = await getAreaIndex();\n    if (index) {\n      indexOptions.value = index;\n    }\n  };\n  // 当前时间\n  const curDateTime = ref('');\n  curDateTime.value = formatToDateTime(new Date());\n\n  onMounted(async () => {\n    modalVisible.value = props.visible; // 根据传入参数控制Dialog显示\n    await initIndex();\n  });\n</script>\n\n<style lang=\"less\" scoped>\n  .device-dialog-content {\n    @keyframes line-move-animation {\n      0% {\n        left: -318px;\n      }\n\n      100% {\n        left: 318px;\n      }\n    }\n\n    .tab-bar-list {\n      display: flex;\n      align-items: center;\n      margin-bottom: 0;\n      padding: 28px 18px 0;\n\n      .tab-bar-item {\n        margin-right: 40px;\n        padding-bottom: 9px;\n        border-bottom: 2px solid transparent;\n        font-size: 16px;\n        line-height: 1;\n        cursor: pointer;\n\n        &:last-child {\n          margin-right: 0;\n        }\n      }\n    }\n\n    .chart-box {\n      position: relative;\n      padding-top: 28px;\n\n      .flow-line-box {\n        display: flex;\n        position: absolute;\n        top: 58px;\n        justify-content: space-between;\n        width: 100%;\n        padding: 0 183px;\n\n        .flow-line {\n          position: relative;\n          width: 318px;\n          height: 2px;\n          overflow: hidden;\n\n          .blue-line {\n            position: absolute;\n            top: 0;\n            width: 80px;\n            height: 2px;\n            border-radius: 1px;\n            background: linear-gradient(\n              90deg,\n              rgb(51 193 174 / 0%) 0%,\n              rgb(33 195 255 / 0%) 0%,\n              #21c3ff 100%\n            );\n\n            &.position1 {\n              left: 0;\n            }\n\n            &.position2 {\n              left: 134px;\n            }\n          }\n\n          .line-move {\n            position: absolute;\n            top: 0;\n            left: -318px;\n            animation: line-move-animation 1.5s cubic-bezier(0.4, 0, 0.2, 1) infinite;\n          }\n        }\n      }\n    }\n\n    .device-items {\n      display: flex;\n      justify-content: space-between;\n      width: 100%;\n      padding: 0 120px;\n\n      .device-item-box {\n        .device-item-img {\n          width: 68px;\n          height: 55px;\n        }\n\n        .line {\n          width: 2px;\n          height: 16px;\n          margin: 0 auto;\n        }\n\n        .label-box {\n          display: inline-block;\n          height: 26px;\n          padding: 0 8px;\n          border-radius: 2px;\n          font-size: 12px;\n          line-height: 24px;\n        }\n      }\n    }\n\n    .data-box {\n      display: flex;\n      width: calc(100% - 20px);\n      height: 620px;\n      margin: 20px 10px 0;\n\n      .part-header {\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        padding: 20px 16px 0;\n        line-height: 1;\n\n        .header-left {\n          display: flex;\n          align-items: center;\n\n          .header-icon {\n            width: 3px;\n            height: 16px;\n            margin-right: 10px;\n          }\n\n          .header-text {\n            font-size: 14px;\n          }\n        }\n\n        .header-right {\n          font-size: 12px;\n        }\n      }\n\n      .left-part {\n        flex: 1;\n\n        .data-list-box {\n          width: 300px;\n          height: 457px;\n          margin-bottom: 0;\n          padding: 18px;\n          overflow-y: auto;\n        }\n\n        .data-list {\n          width: 100%;\n\n          .data-item {\n            display: flex;\n            width: 100%;\n            font-size: 12px;\n            line-height: 1;\n            text-align: left;\n\n            & > span {\n              height: 31px;\n              padding: 0 6px;\n            }\n\n            .data-label {\n              flex: 5;\n            }\n\n            .data-value {\n              flex: 6;\n            }\n\n            .align-center {\n              display: flex;\n              align-items: center;\n            }\n          }\n        }\n      }\n\n      .right-part {\n        flex: 5;\n\n        .info-list {\n          display: flex;\n          flex-wrap: wrap;\n          padding: 26px 16px 0;\n\n          .info-item {\n            width: 224px;\n            height: 32px;\n            margin: 0 7px 4px 0;\n            background-color: #63d575;\n            font-size: 14px;\n            line-height: 32px;\n\n            &.red-bg {\n              background-color: #ed706b;\n            }\n          }\n        }\n      }\n    }\n  }\n</style>\n"],"names":["modalVisible","ref","updateVisible","$event","emit","tabBarList","activeTabKey","handleClickTab","index","watch","props","newValue","indexData","__expose","__async","getAreaIndexData","indexOptions","initIndex","getAreaIndex","curDateTime","formatToDateTime","onMounted"],"mappings":"suGAgHQA,EAAeC,EAAI,EAAK,EACxBC,EAAiBC,GAAW,CAChCH,EAAa,MAAQG,EACrBC,EAAK,iBAAkB,EAAK,CAAA,EAIxBC,EAAaJ,EAAI,CAAC,OAAQ,MAAM,CAAC,EACjCK,EAAeL,EAAI,CAAC,EACpBM,EAAkBC,GAAU,CAChCF,EAAa,MAAQE,CAAA,EAmCLP,EAAI,CACpB,CACE,KAAM,YACN,QAAS,MACT,QAAS,MACT,QAAS,OACT,QAAS,KACX,CAAA,CACD,EAEDQ,EACE,IAAMC,EAAM,QACXC,GAAa,CACZX,EAAa,MAAQW,CACvB,CAAA,EAGI,MAAAC,EAAYX,EAAI,IAAI,EAObY,EAAA,CAAE,cANO,IAAYC,EAAA,sBAC5B,IAAAN,EAAQ,MAAMO,EAAiB,CAAE,OAAQL,EAAM,KAAK,OAAQ,EAC5DF,IACFI,EAAU,MAAQJ,EACpB,GAE4B,EAExB,MAAAQ,EAAef,EAAI,IAAI,EACvBgB,EAAY,IAAYH,EAAA,sBACxB,IAAAN,EAAQ,MAAMU,IACdV,IACFQ,EAAa,MAAQR,EACvB,GAGIW,EAAclB,EAAI,EAAE,EAC1B,OAAAkB,EAAY,MAAQC,EAAqB,IAAA,IAAM,EAE/CC,EAAU,IAAYP,EAAA,sBACpBd,EAAa,MAAQU,EAAM,QAC3B,MAAMO,EAAU,CAAA,EACjB"}