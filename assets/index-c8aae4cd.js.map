{"version":3,"file":"index-c8aae4cd.js","sources":["../../src/views/po/elec/produce/index.vue"],"sourcesContent":["<template>\n  <PageWrapper dense contentFullHeight fixedHeight contentClass=\"flex\" style=\"position: relative\">\n    <!-- 电站组织树 -->\n    <!-- <CommonTree\n      title=\"电站组织\"\n      @select=\"handleTreeSelect\"\n      :value=\"treeData\"\n      class=\"left-tree-layout\"\n      :toolbar=\"false\"\n      :fieldNames=\"{ key: 'id', title: 'name' }\"\n    /> -->\n    <CommonTree\n      title=\"电站组织\"\n      @select=\"handleSelect\"\n      :value=\"treeData\"\n      class=\"left-tree-layout\"\n      :canEdit=\"false\"\n      :canAdd=\"false\"\n      :canDelete=\"false\"\n      @refresh=\"refreshTree\"\n      :isShowOperationBtns=\"false\"\n      :expandedKeys=\"commonExpandedKeys\"\n      :selectedKeys=\"commonSelectedKeys\"\n      :fieldNames=\"{ key: 'id', title: 'name' }\"\n    />\n    <!-- 数据表格 -->\n    <div class=\"right-table-layout tab-model\">\n      <div class=\"tab-button-div\">\n        <a-form :model=\"searchInfo\" name=\"searchInfo\" layout=\"inline\" autocomplete=\"off\">\n          <a-form-item\n            label=\"单据编号\"\n            name=\"billCode\"\n            style=\"width: 22%; margin-left: 60px\"\n            :colon=\"false\"\n          >\n            <a-input style=\"width: 100%\" v-model:value=\"searchInfo.billCode\" />\n          </a-form-item>\n\n          <a-form-item\n            label=\"日期\"\n            name=\"rangeData\"\n            style=\"width: 22%; margin-left: 60px\"\n            :colon=\"false\"\n          >\n            <a-range-picker\n              style=\"width: 100%\"\n              v-model:value=\"searchInfo.rangeData\"\n              value-format=\"YYYY-MM-DD\"\n            />\n          </a-form-item>\n\n          <a-form-item\n            label=\"审核状态\"\n            name=\"status\"\n            style=\"width: 22%; margin-left: 60px\"\n            :colon=\"false\"\n          >\n            <DictSelectBox\n              style=\"width: 100%\"\n              v-model:value=\"searchInfo.status\"\n              :type=\"`bpm_process_instance_result`\"\n            />\n          </a-form-item>\n\n          <a-form-item class=\"tab-button\">\n            <a-button style=\"margin: 0 10px 0 8px\" @click=\"resetFrom\">重置</a-button>\n            <a-button type=\"primary\" class=\"tab-button\" @click=\"searchList\">查询</a-button>\n          </a-form-item>\n        </a-form>\n      </div>\n      <div id=\"report-tab-content\" class=\"tab-table-div tab-table-content\">\n        <a-tabs v-model:activeKey=\"activeKey\" @change=\"changeTab(activeKey)\">\n          <a-tab-pane key=\"day\" tab=\"日报\">\n            <BasicTable\n              @register=\"registerDayTable\"\n              class=\"w-4/4 xl:w-12/12\"\n              :searchInfo=\"searchInfo\"\n              @selection-change=\"handleSelectChangeDay\"\n              @resize-column=\"(w, col) => (col.width = w)\"\n              @row-db-click=\"(record) => handleProcessDetail(record)\"\n            >\n              <template #toolbar>\n                <a-button type=\"primary\" :preIcon=\"IconEnum.ADD\" @click=\"addReport\">{{\n                  t('common.action.create')\n                }}</a-button>\n                <a-button\n                  type=\"primary\"\n                  :preIcon=\"IconEnum.EDIT\"\n                  :disabled=\"selectedDayRowId == ''\"\n                  @click=\"handleDelete\"\n                  >{{ t('common.delText') }}</a-button\n                >\n                <a-button class=\"red-btn\" :preIcon=\"IconEnum.DELETE\" @click=\"exportReport\">{{\n                  t('common.action.export')\n                }}</a-button>\n              </template>\n            </BasicTable>\n          </a-tab-pane>\n          <a-tab-pane key=\"week\" tab=\"周报\">\n            <BasicTable\n              @register=\"registerWeekTable\"\n              class=\"w-4/4 xl:w-12/12\"\n              :searchInfo=\"searchInfo\"\n              @selection-change=\"handleSelectChangeWeek\"\n              @resize-column=\"(w, col) => (col.width = w)\"\n              @row-db-click=\"(record) => handleProcessDetail(record)\"\n            >\n              <template #toolbar>\n                <a-button type=\"primary\" :preIcon=\"IconEnum.ADD\" @click=\"addReport\">{{\n                  t('common.action.create')\n                }}</a-button>\n                <a-button\n                  type=\"primary\"\n                  :preIcon=\"IconEnum.EDIT\"\n                  :disabled=\"selectedWeekRowId == ''\"\n                  @click=\"handleDelete\"\n                  >{{ t('common.delText') }}</a-button\n                >\n                <a-button class=\"red-btn\" :preIcon=\"IconEnum.DELETE\" @click=\"exportReport\">{{\n                  t('common.action.export')\n                }}</a-button>\n              </template>\n            </BasicTable>\n          </a-tab-pane>\n          <a-tab-pane key=\"month\" tab=\"月报\">\n            <BasicTable\n              @register=\"registerMonthTable\"\n              class=\"w-4/4 xl:w-12/12\"\n              :searchInfo=\"searchInfo\"\n              @selection-change=\"handleSelectChangeMonth\"\n              @resize-column=\"(w, col) => (col.width = w)\"\n              @row-db-click=\"(record) => handleProcessDetail(record)\"\n            >\n              <template #toolbar>\n                <a-button type=\"primary\" :preIcon=\"IconEnum.ADD\" @click=\"addReport\">{{\n                  t('common.action.create')\n                }}</a-button>\n                <a-button\n                  type=\"primary\"\n                  :preIcon=\"IconEnum.EDIT\"\n                  :disabled=\"selectedMonthRowId == ''\"\n                  @click=\"handleDelete\"\n                  >{{ t('common.delText') }}</a-button\n                >\n                <a-button class=\"red-btn\" :preIcon=\"IconEnum.DELETE\" @click=\"exportReport\">{{\n                  t('common.action.export')\n                }}</a-button>\n              </template>\n            </BasicTable>\n          </a-tab-pane>\n          <a-tab-pane key=\"year\" tab=\"年报\">\n            <BasicTable\n              @register=\"registerYearTable\"\n              class=\"w-4/4 xl:w-12/12\"\n              :searchInfo=\"searchInfo\"\n              @selection-change=\"handleSelectChangeYear\"\n              @resize-column=\"(w, col) => (col.width = w)\"\n              @row-db-click=\"(record) => handleProcessDetail(record)\"\n            >\n              <template #toolbar>\n                <a-button type=\"primary\" :preIcon=\"IconEnum.ADD\" @click=\"addReport\">{{\n                  t('common.action.create')\n                }}</a-button>\n                <a-button\n                  type=\"primary\"\n                  :preIcon=\"IconEnum.EDIT\"\n                  :disabled=\"selectedYearRowId == ''\"\n                  @click=\"handleDelete\"\n                  >{{ t('common.delText') }}</a-button\n                >\n                <a-button class=\"red-btn\" :preIcon=\"IconEnum.DELETE\" @click=\"exportReport\">{{\n                  t('common.action.export')\n                }}</a-button>\n              </template>\n            </BasicTable>\n          </a-tab-pane>\n        </a-tabs>\n      </div>\n    </div>\n  </PageWrapper>\n</template>\n<script lang=\"ts\" setup>\n  import { computed, onMounted, reactive, ref } from 'vue';\n  import type { UnwrapRef } from 'vue';\n  import { cancelProcessInstance } from '@/api/bpm/processInstance';\n  import { ElMessageBox } from 'element-plus';\n  import { IconEnum } from '@/enums/appEnum';\n  import HeaderCell from '@/components/Table/src/components/HeaderCell.vue';\n  import DictSelectBox from '@/components/Framework/Combox/DictSelectBox.vue';\n  import { useMessage } from '@/hooks/web/useMessage';\n  import { useRouter } from 'vue-router';\n  import { cloneDeep } from 'lodash-es';\n  import type { TableProps } from 'ant-design-vue';\n  import { TreeItem } from '/@/components/Tree';\n  import { PageWrapper } from '/@/components/Page';\n  import CommonTree from '@/components/Framework/Tree/CommonTree.vue';\n  import { message, FormInstance } from 'ant-design-vue';\n  import componentSetting from '/@/settings/componentSetting';\n  import { exportExcelFile } from '@/utils/file/download';\n  import { MsgManager } from '/@/message/MsgManager';\n  import * as ProcessInstanceApi from '@/api/bpm/processInstance';\n  import * as CommonUtil from '/@/utils/common';\n  import { BasicTable, useTable, SorterResult } from '/@/components/Table';\n  import {\n    getDayReportList,\n    getColumnsByKey,\n    getTreeData,\n    exportDayReport,\n    exportWeekReport,\n    exportMonthReport,\n    exportYearReport,\n    getWeekReportList,\n    getMonthReportList,\n    getYearReportList,\n  } from './index';\n  import { addTabPage } from '@/utils/route';\n  import { useI18n } from '@/hooks/web/useI18n';\n\n  const { t } = useI18n();\n  const { createConfirm } = useMessage();\n  const router = useRouter();\n  const activeKey = ref('day');\n\n  const selectedDayRowId = ref('');\n  const selectedWeekRowId = ref('');\n  const selectedMonthRowId = ref('');\n  const selectedYearRowId = ref('');\n  const pageSizeInfo = reactive({\n    dayPageSize: 20,\n    dayPageNo: 1,\n    daySortField: '',\n    daySortOrder: '',\n    weekPageSize: 20,\n    weekPageNo: 1,\n    weekSortField: '',\n    weekSortOrder: '',\n    monthPageSize: 20,\n    monthPageNo: 1,\n    monthSortField: '',\n    monthSortOrder: '',\n    yearPageSize: 20,\n    yearPageNo: 1,\n    yearSortField: '',\n    yearSortOrder: '',\n  });\n  // 左侧电站树数据\n  const searchInfo = reactive({\n    dataId: '',\n    stationId: '',\n    periodId: '',\n    rangeData: null,\n    status: '',\n    reportType: '',\n    periodName: '',\n    stationName: '',\n    searchId: '',\n    nodeKindId: '',\n    nodeId: '',\n    pageSize: 20,\n    pageNo: 1,\n  });\n\n  // 查询信息\n  const treeData = ref<TreeItem[]>([]);\n  const dayCloumns = ref([]);\n  const weekCloumns = ref([]);\n  const monthCloumns = ref([]);\n  const yearCloumns = ref([]);\n\n  const commonSelectedKeys = ref([]);\n  const commonExpandedKeys = ref([]);\n  const dayList = ref([]);\n  const weekList = ref([]);\n  const monthList = ref([]);\n  const yearList = ref([]);\n  // 加载日报列表\n  const loadDayReport = async (param) => {\n    const paginationRef = getDayPage() as any;\n    searchInfo.pageNo = paginationRef.current;\n    searchInfo.pageSize = paginationRef.pageSize;\n    searchInfo.sortField = pageSizeInfo.daySortField;\n    searchInfo.sortOrder = pageSizeInfo.daySortOrder;\n    let data = await getDayReportList(searchInfo);\n    return data.result;\n  };\n\n  // 日报列表\n  const [\n    registerDayTable,\n    {\n      reload: reloadDay,\n      getPaginationRef: getDayPage,\n      getSelectRows: getDaySelectRows,\n      getSelectRowKeys: getDaySelectRowKeys,\n      clearSelectedRowKeys,\n    },\n  ] = useTable({\n    api: loadDayReport,\n    target: '#report-tab-content',\n    targetTabKey: 'day',\n    targetTabValue: activeKey,\n    rowKey: 'id',\n    columns: dayCloumns,\n    useSearchForm: false,\n    showTableSetting: false,\n    bordered: true,\n    pagination: { pageSize: 20, pageSizeOptions: ['20', '50', '100', '200'] },\n    resizeHeightOffset: 0,\n    rowSelection: {\n      type: 'radio',\n    },\n    sortFn: (sortInfo: SorterResult) => {\n      if (sortInfo.order) {\n        pageSizeInfo.daySortField = sortInfo.field;\n        pageSizeInfo.daySortOrder = sortInfo.order.replace('end', '');\n      } else {\n        pageSizeInfo.daySortField = null;\n        pageSizeInfo.daySortOrder = null;\n      }\n    },\n  });\n\n  function handleSelectChangeDay({ keys, rows }) {\n    if (rows && rows.length > 0) {\n      const record = rows[0];\n      selectedDayRowId.value = record.id;\n    } else {\n      selectedDayRowId.value = '';\n    }\n  }\n\n  // 加载周报列表\n  const loadWeekReport = async (param) => {\n    const paginationRef = getWeekPage() as any;\n    param.pageNo = paginationRef.current;\n    param.pageSize = paginationRef.pageSize;\n    param.sortField = pageSizeInfo.weekSortField;\n    param.sortOrder = pageSizeInfo.weekSortOrder;\n    let data = await getWeekReportList(param);\n    console.info('周报:', data);\n    return data.result;\n  };\n\n  const handleTreeSelect = () => {\n    //\n  };\n\n  // 周报列表\n  const [\n    registerWeekTable,\n    {\n      reload: reloadWeek,\n      getPaginationRef: getWeekPage,\n      getSelectRows: getWeekSelectRows,\n      getSelectRowKeys: getWeekSelectRowKeys,\n    },\n  ] = useTable({\n    api: loadWeekReport,\n    target: '#report-tab-content',\n    targetTabKey: 'week',\n    targetTabValue: activeKey,\n    rowKey: 'id',\n    columns: weekCloumns,\n    useSearchForm: false,\n    showTableSetting: false,\n    bordered: true,\n    pagination: { pageSize: 20, pageSizeOptions: ['20', '50', '100', '200'] },\n    resizeHeightOffset: 0,\n    rowSelection: {\n      type: 'radio',\n    },\n    sortFn: (sortInfo: SorterResult) => {\n      if (sortInfo.order) {\n        pageSizeInfo.weekSortField = sortInfo.field;\n        pageSizeInfo.weekSortOrder = sortInfo.order.replace('end', '');\n      } else {\n        pageSizeInfo.weekSortField = null;\n        pageSizeInfo.weekSortOrder = null;\n      }\n    },\n  });\n\n  function handleSelectChangeWeek({ keys, rows }) {\n    if (rows && rows.length > 0) {\n      const record = rows[0];\n      selectedWeekRowId.value = record.id;\n    } else {\n      selectedWeekRowId.value = '';\n    }\n  }\n  // 加载月报列表\n  const loadMonthReport = async (param) => {\n    const paginationRef = getMonthPage() as any;\n    searchInfo.pageNo = paginationRef.current;\n    searchInfo.pageSize = paginationRef.pageSize;\n    searchInfo.sortField = pageSizeInfo.monthSortField;\n    searchInfo.sortOrder = pageSizeInfo.monthSortOrder;\n    let data = await getMonthReportList(searchInfo);\n    console.info('月报:', data);\n    return data.result;\n  };\n\n  // 月报列表\n  const [\n    registerMonthTable,\n    {\n      reload: reloadMonth,\n      getPaginationRef: getMonthPage,\n      getSelectRows: getMonthSelectRows,\n      getSelectRowKeys: getMonthSelectRowKeys,\n    },\n  ] = useTable({\n    api: loadMonthReport,\n    target: '#report-tab-content',\n    targetTabKey: 'month',\n    targetTabValue: activeKey,\n    rowKey: 'id',\n    columns: monthCloumns,\n    useSearchForm: false,\n    showTableSetting: false,\n    bordered: true,\n    pagination: { pageSize: 20, pageSizeOptions: ['20', '50', '100', '200'] },\n    resizeHeightOffset: 0,\n    rowSelection: {\n      type: 'radio',\n    },\n    sortFn: (sortInfo: SorterResult) => {\n      if (sortInfo.order) {\n        pageSizeInfo.monthSortField = sortInfo.field;\n        pageSizeInfo.monthSortOrder = sortInfo.order.replace('end', '');\n      } else {\n        pageSizeInfo.monthSortField = null;\n        pageSizeInfo.monthSortOrder = null;\n      }\n    },\n  });\n\n  function handleSelectChangeMonth({ keys, rows }) {\n    if (rows && rows.length > 0) {\n      const record = rows[0];\n      selectedMonthRowId.value = record.id;\n    } else {\n      selectedMonthRowId.value = '';\n    }\n  }\n  // 加载年报列表\n  const loadYearReport = async (param) => {\n    const paginationRef = getYearPage() as any;\n    param.pageNo = paginationRef.current;\n    param.pageSize = paginationRef.pageSize;\n    param.sortField = pageSizeInfo.monthSortField;\n    param.sortOrder = pageSizeInfo.monthSortOrder;\n    let data = await getYearReportList(param);\n    return data.result;\n  };\n\n  // 年报列表\n  const [\n    registerYearTable,\n    {\n      reload: reloadYear,\n      getPaginationRef: getYearPage,\n      getSelectRows: getYearSelectRows,\n      getSelectRowKeys: getYearSelectRowKeys,\n    },\n  ] = useTable({\n    api: loadYearReport,\n    target: '#report-tab-content',\n    targetTabKey: 'year',\n    targetTabValue: activeKey,\n    rowKey: 'id',\n    columns: yearCloumns,\n    useSearchForm: false,\n    showTableSetting: false,\n    bordered: true,\n    pagination: { pageSize: 20, pageSizeOptions: ['20', '50', '100', '200'] },\n    resizeHeightOffset: 0,\n    rowSelection: {\n      type: 'radio',\n    },\n    sortFn: (sortInfo: SorterResult) => {\n      if (sortInfo.order) {\n        pageSizeInfo.yearSortField = sortInfo.field;\n        pageSizeInfo.yearSortOrder = sortInfo.order.replace('end', '');\n      } else {\n        pageSizeInfo.yearSortField = null;\n        pageSizeInfo.yearSortOrder = null;\n      }\n    },\n  });\n\n  function handleSelectChangeYear({ keys, rows }) {\n    if (rows && rows.length > 0) {\n      const record = rows[0];\n      selectedYearRowId.value = record.id;\n    } else {\n      selectedYearRowId.value = '';\n    }\n  }\n  // tab\n  function changeTab() {\n    loadReportList();\n  }\n\n  // 添加报表\n  function addReport() {\n    if (searchInfo.periodId == '' || searchInfo.periodId == null) {\n      message.error('请先选择电站分期。');\n      return;\n    }\n\n    let param = {\n      stationId: searchInfo.stationId,\n      stationName: searchInfo.stationName,\n      periodId: searchInfo.periodId,\n      periodName: searchInfo.periodName,\n      organId: searchInfo.organId,\n      organName: searchInfo.organName,\n    };\n    if (activeKey.value == 'day') {\n      addTabPage('/po/elec/produce/dayReportCreate', '添加日报', param);\n    } else if (activeKey.value == 'week') {\n      addTabPage('/po/elec/produce/weekReportCreate', '添加周报', param);\n    } else if (activeKey.value == 'month') {\n      addTabPage('/po/elec/produce/monthReportCreate', '添加月报', param);\n    } else if (activeKey.value == 'year') {\n      addTabPage('/po/elec/produce/yearReportCreate', '添加年报', param);\n    }\n  }\n  // 导出\n  function exportReport() {\n    createConfirm({\n      title: '提示',\n      iconType: 'warning',\n      content: '确定要导出所有记录？',\n      async onOk() {\n        if (activeKey.value == 'day') {\n          await exportDayReport(searchInfo).then((res) => {\n            exportExcelFile(res?.data, '生产日报.xls');\n          });\n        } else if (activeKey.value == 'week') {\n          await exportWeekReport(searchInfo).then((res) => {\n            exportExcelFile(res?.data, '生产周报.xls');\n          });\n        } else if (activeKey.value == 'month') {\n          await exportMonthReport(searchInfo).then((res) => {\n            exportExcelFile(res?.data, '生产月报.xls');\n          });\n        } else if (activeKey.value == 'year') {\n          await exportYearReport(searchInfo).then((res) => {\n            exportExcelFile(res?.data, '生产年报.xls');\n          });\n        }\n        message.success('导出成功。');\n      },\n    });\n  }\n\n  // 左侧树菜单选中事件\n  function handleSelect(node = []) {\n    if (node != null) {\n      searchInfo.stationId = node.powerStationId;\n      searchInfo.stationName = node.powerStationName;\n      searchInfo.periodId = node.powerStationPeriodId;\n      searchInfo.periodName = node.powerStationPeriodName;\n      searchInfo.organId = node.organId;\n      searchInfo.organName = node.organName;\n      searchInfo.nodeKindId = node.nodeKindId;\n      searchInfo.searchId = node.id;\n    } else {\n      searchInfo.stationId = null;\n      searchInfo.stationName = null;\n      searchInfo.periodId = null;\n      searchInfo.periodName = null;\n      searchInfo.organId = null;\n      searchInfo.organName = null;\n      searchInfo.nodeKindId = null;\n      searchInfo.searchId = null;\n    }\n    searchList();\n  }\n  // 查询左侧电站树数据\n  async function queryDeptTreeList() {\n    const deptList = (await getTreeData({})) as unknown as TreeItem[];\n    treeData.value = deptList.result;\n  }\n\n  const loadReportList = async () => {\n    if (activeKey.value == 'day') {\n      reloadDay();\n    } else if (activeKey.value == 'week') {\n      reloadWeek();\n    } else if (activeKey.value == 'month') {\n      reloadMonth();\n    } else if (activeKey.value == 'year') {\n      reloadYear();\n    }\n  };\n\n  // 查询\n  function searchList() {\n    pageSizeInfo.dayPageNo = 1;\n    pageSizeInfo.weekPageNo = 1;\n    pageSizeInfo.monthPageNo = 1;\n    pageSizeInfo.yearPageNo = 1;\n    if (activeKey.value === 'day') {\n      reloadDay();\n    } else if (activeKey.value === 'week') {\n      reloadWeek();\n    } else if (activeKey.value === 'month') {\n      reloadMonth();\n    } else if (activeKey.value === 'year') {\n      reloadYear();\n    }\n  }\n  /**\n   * 重置\n   */\n  function resetFrom() {\n    searchInfo.rangeData = null;\n    searchInfo.status = null;\n    searchInfo.billCode = null;\n    searchList();\n  }\n\n  /** 审批进度 */\n  function handleProcessDetail(record: any) {\n    CommonUtil.toFlowPage(record.id);\n  }\n\n  function getCurrentSelectRow() {\n    let rows = [];\n    if (activeKey.value == 'day') {\n      rows = getDaySelectRows();\n    } else if (activeKey.value == 'week') {\n      rows = getWeekSelectRows();\n    } else if (activeKey.value == 'month') {\n      rows = getMonthSelectRows();\n    } else if (activeKey.value == 'year') {\n      rows = getYearSelectRows();\n    }\n    if (rows.length == 0) {\n      message.info('请选择数据。');\n      return false;\n    }\n    return rows[0];\n  }\n  //删除\n  async function handleDelete() {\n    let row = getCurrentSelectRow();\n    if (!row) {\n      return;\n    }\n    createConfirm({\n      title: '提示',\n      iconType: 'warning',\n      content: '确定要删除选中记录？',\n      async onOk() {\n        if (row.status != 0) {\n          message.error('非草稿状态不能删除。');\n          return;\n        }\n        // 发起取消\n        await ProcessInstanceApi.deleteProcessInstance(row.processInstanceId);\n        message.success('已删除。');\n        loadReportList();\n      },\n    });\n  }\n\n  const refresh = async (element: any) => {\n    if (element.key) {\n      activeKey.value = element.key;\n    }\n    loadReportList();\n  };\n\n  const initColumn = async () => {\n    dayCloumns.value = getColumnsByKey('day');\n    weekCloumns.value = getColumnsByKey('week');\n    monthCloumns.value = getColumnsByKey('month');\n    yearCloumns.value = getColumnsByKey('year');\n  };\n  // 启动执行代码\n  onMounted(async () => {\n    // 初始化所有的列头。\n    await initColumn();\n    await queryDeptTreeList();\n    MsgManager.getInstance().listen('day-report', refresh);\n  });\n</script>\n<style lang=\"less\" scoped>\n  :deep(.vben-basic-table-header__toolbar) {\n    margin-top: 8px;\n  }\n\n  .tabs-extra-demo-button {\n    margin-right: 16px;\n  }\n\n  .left-tree-layout {\n    flex-shrink: 0;\n    width: 298px;\n    border-radius: 2px;\n  }\n\n  .right-table-layout {\n    width: calc(100% - 308px);\n  }\n\n  .tab-model {\n    height: 100vh;\n    padding: 10px 10px 0;\n\n    div.tab-table-content {\n      height: calc(100vh - 86px);\n\n      :deep(.vben-basic-table) {\n        max-width: 100%;\n        height: 100%;\n        margin-top: -12px;\n      }\n    }\n  }\n\n  .tab-button-div {\n    padding: 12px;\n  }\n\n  .tab-table-div {\n    margin-top: 10px;\n  }\n\n  .tab-button {\n    margin-right: 12.5px;\n  }\n\n  .ant-row-rtl .tabs-extra-demo-button {\n    margin-right: 5px;\n    margin-left: 16px;\n  }\n\n  .editable-row-operations a {\n    margin-right: 8px;\n  }\n\n  :deep(.ant-form-item-label) {\n    > label::after {\n      content: '';\n      position: relative;\n      top: -0.5px;\n      margin: 0 6px 0 2px;\n    }\n  }\n</style>\n"],"names":["t","useI18n","createConfirm","useMessage","useRouter","activeKey","ref","selectedDayRowId","selectedWeekRowId","selectedMonthRowId","selectedYearRowId","pageSizeInfo","reactive","searchInfo","treeData","dayCloumns","weekCloumns","monthCloumns","yearCloumns","commonSelectedKeys","commonExpandedKeys","loadDayReport","param","__async","paginationRef","getDayPage","getDayReportList","registerDayTable","reloadDay","getDaySelectRows","getDaySelectRowKeys","clearSelectedRowKeys","useTable","sortInfo","handleSelectChangeDay","keys","rows","record","loadWeekReport","getWeekPage","data","getWeekReportList","registerWeekTable","reloadWeek","getWeekSelectRows","getWeekSelectRowKeys","handleSelectChangeWeek","loadMonthReport","getMonthPage","getMonthReportList","registerMonthTable","reloadMonth","getMonthSelectRows","getMonthSelectRowKeys","handleSelectChangeMonth","loadYearReport","getYearPage","getYearReportList","registerYearTable","reloadYear","getYearSelectRows","getYearSelectRowKeys","handleSelectChangeYear","changeTab","loadReportList","addReport","message","addTabPage","exportReport","exportDayReport","res","exportExcelFile","exportWeekReport","exportMonthReport","exportYearReport","handleSelect","node","searchList","queryDeptTreeList","deptList","getTreeData","resetFrom","handleProcessDetail","CommonUtil.toFlowPage","getCurrentSelectRow","handleDelete","row","ProcessInstanceApi.deleteProcessInstance","refresh","element","initColumn","getColumnsByKey","onMounted","MsgManager"],"mappings":"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"}