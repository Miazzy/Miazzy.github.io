var f=(P,v,r)=>new Promise((p,m)=>{var g=t=>{try{i(r.next(t))}catch(s){m(s)}},b=t=>{try{i(r.throw(t))}catch(s){m(s)}},i=t=>t.done?p(t.value):Promise.resolve(t.value).then(g,b);i((r=r.apply(P,v)).next())});import{D as N}from"./dict-c04c0dd8.js";import{b as V,a as O}from"./index-a3e62fdf.js";import{au as R,ax as W,cf as X}from"./index.js";import{s as Y}from"./formCreate-e6d0da36.js";import{_ as q}from"./ProcessInstanceBpmnViewer.vue_vue_type_style_index_0_lang-c6c1a54e.js";import{d as G,ax as U,k as u,r as Z,o as j,al as n,x as z,Z as y,a9 as C,aa as a,v as H,f as e,u as J,E as x,ad as B,$ as M}from"./vue-71d1abb3.js";import"./antd-15ac76ed.js";import"./bpmn-embedded-90db6ebb.js";import"./index.esm-c216ed00.js";const K={class:"clearfix"},Q={class:"el-icon-document"},pe=G({name:"BpmProcessInstanceCreate",__name:"index",setup(P){const v=U(),r=R(),p=u(!0),m=u([]),g=Z({suspensionState:1}),b=()=>f(this,null,function*(){p.value=!0;try{m.value=yield V(g)}finally{p.value=!1}}),i=u(null),t=u(),s=u({rule:[],option:{}}),c=u(),T=o=>f(this,null,function*(){c.value=o,o.formType==10?(Y(s,o.formConf,o.formFields),i.value=yield O(o.id)):o.formCustomCreatePath&&(yield W(o.formCustomCreatePath))}),h=o=>f(this,null,function*(){if(!(!t.value||!c.value)){t.value.btn.loading(!0);try{yield X({processDefinitionId:c.value.id,variables:o}),r.success("发起流程成功"),v.go(-1)}finally{t.value.btn.loading(!1)}}});return j(()=>{b()}),(o,d)=>{const _=n("el-table-column"),L=n("dict-tag"),E=n("el-tag"),k=n("Icon"),D=n("el-button"),F=n("el-table"),I=n("ContentWrap"),S=n("form-create"),$=n("el-col"),w=n("el-card"),A=z("loading");return c.value?(y(),C(I,{key:1},{default:a(()=>[e(w,{class:"box-card"},{default:a(()=>[M("div",K,[M("span",Q,"申请信息【"+B(c.value.name)+"】",1),e(D,{style:{float:"right"},type:"primary",onClick:d[0]||(d[0]=l=>c.value=void 0)},{default:a(()=>[e(k,{icon:"ep:delete"}),x(" 选择其它流程 ")]),_:1})]),e($,{span:16,offset:6,style:{"margin-top":"20px"}},{default:a(()=>[e(S,{rule:s.value.rule,api:t.value,"onUpdate:api":d[1]||(d[1]=l=>t.value=l),option:s.value.option,onSubmit:h},null,8,["rule","api","option"])]),_:1})]),_:1}),e(q,{"bpmn-xml":i.value},null,8,["bpmn-xml"])]),_:1})):(y(),C(I,{key:0},{default:a(()=>[H((y(),C(F,{data:m.value},{default:a(()=>[e(_,{label:"流程名称",align:"center",prop:"name"}),e(_,{label:"流程分类",align:"center",prop:"category"},{default:a(l=>[e(L,{type:J(N).BPM_MODEL_CATEGORY,value:l.row.category},null,8,["type","value"])]),_:1}),e(_,{label:"流程版本",align:"center",prop:"version"},{default:a(l=>[e(E,null,{default:a(()=>[x("v"+B(l.row.version),1)]),_:2},1024)]),_:1}),e(_,{label:"流程描述",align:"center",prop:"description"}),e(_,{label:"操作",align:"center"},{default:a(l=>[e(D,{link:"",type:"primary",onClick:ee=>T(l.row)},{default:a(()=>[e(k,{icon:"ep:plus"}),x(" 选择 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[A,p.value]])]),_:1}))}}});export{pe as default};
//# sourceMappingURL=index-d51c339d.js.map
